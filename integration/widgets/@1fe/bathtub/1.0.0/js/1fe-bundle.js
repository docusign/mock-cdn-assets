/*! For license information please see 1fe-bundle.js.LICENSE.txt */
System.register(["React","ReactDOM","1feContext"],(function(__WEBPACK_DYNAMIC_EXPORT__,__system_context__){var __WEBPACK_EXTERNAL_MODULE__1302__={},__WEBPACK_EXTERNAL_MODULE__4946__={},__WEBPACK_EXTERNAL_MODULE__1826__={};return Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__1302__,"__esModule",{value:!0}),Object.defineProperty(__WEBPACK_EXTERNAL_MODULE__4946__,"__esModule",{value:!0}),{setters:[function(t){Object.keys(t).forEach((function(e){__WEBPACK_EXTERNAL_MODULE__1302__[e]=t[e]}))},function(t){Object.keys(t).forEach((function(e){__WEBPACK_EXTERNAL_MODULE__4946__[e]=t[e]}))},function(t){__WEBPACK_EXTERNAL_MODULE__1826__.platformProps=t.platformProps}],execute:function(){__WEBPACK_DYNAMIC_EXPORT__(function(){var __webpack_modules__={41:function(t,e,n){"use strict";function i(t,e,n){var i="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):n&&(i+=n+" ")})),i}n.d(e,{Rk:function(){return i},SF:function(){return r},sk:function(){return o}});var r=function(t,e,n){var i=t.key+"-"+e.name;!1===n&&void 0===t.registered[i]&&(t.registered[i]=e.styles)},o=function(t,e,n){r(t,e,n);var i=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var o=e;do{t.insert(e===o?"."+i:"",o,t.sheet,!0),o=o.next}while(void 0!==o)}}},57:function(t,e,n){"use strict";n.d(e,{A:function(){return k}});var i=n(1302),r=n(6942),o=n.n(r),s=n(2467),a=n(8719),l=n(2279),c=n(682),h=n(7358);const u=t=>{const{componentCls:e,colorPrimary:n}=t;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${t.motionDurationSlow} ${t.motionEaseInOut}`,`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`].join(",")}}}}};var d=(0,h.Or)("Wave",(t=>[u(t)])),f=n(6956),p=n(5371),g=n(9319),m=n(4424),v=n(1016),b=n(8656);function y(t){return t&&"#fff"!==t&&"#ffffff"!==t&&"rgb(255, 255, 255)"!==t&&"rgba(255, 255, 255, 1)"!==t&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&"transparent"!==t}function w(t){return Number.isNaN(t)?0:t}const O=t=>{const{className:e,target:n,component:r,registerUnmount:s}=t,l=i.useRef(null),c=i.useRef(null);i.useEffect((()=>{c.current=s()}),[]);const[h,u]=i.useState(null),[d,f]=i.useState([]),[g,b]=i.useState(0),[O,S]=i.useState(0),[x,k]=i.useState(0),[C,A]=i.useState(0),[M,E]=i.useState(!1),P={left:g,top:O,width:x,height:C,borderRadius:d.map((t=>`${t}px`)).join(" ")};function T(){const t=getComputedStyle(n);u(function(t){const{borderTopColor:e,borderColor:n,backgroundColor:i}=getComputedStyle(t);return y(e)?e:y(n)?n:y(i)?i:null}(n));const e="static"===t.position,{borderLeftWidth:i,borderTopWidth:r}=t;b(e?n.offsetLeft:w(-parseFloat(i))),S(e?n.offsetTop:w(-parseFloat(r))),k(n.offsetWidth),A(n.offsetHeight);const{borderTopLeftRadius:o,borderTopRightRadius:s,borderBottomLeftRadius:a,borderBottomRightRadius:l}=t;f([o,s,l,a].map((t=>w(parseFloat(t)))))}if(h&&(P["--wave-color"]=h),i.useEffect((()=>{if(n){const t=(0,p.A)((()=>{T(),E(!0)}));let e;return"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(T),e.observe(n)),()=>{p.A.cancel(t),null==e||e.disconnect()}}}),[]),!M)return null;const $=("Checkbox"===r||"Radio"===r)&&(null==n?void 0:n.classList.contains(m.D));return i.createElement(v.Ay,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(t,e)=>{var n,i;if(e.deadline||"opacity"===e.propertyName){const t=null===(n=l.current)||void 0===n?void 0:n.parentElement;null===(i=c.current)||void 0===i||i.call(c).then((()=>{null==t||t.remove()}))}return!1}},(({className:t},n)=>i.createElement("div",{ref:(0,a.K4)(l,n),className:o()(e,t,{"wave-quick":$}),style:P})))};var S=(t,e)=>{var n;const{component:r}=e;if("Checkbox"===r&&!(null===(n=t.querySelector("input"))||void 0===n?void 0:n.checked))return;const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",null==t||t.insertBefore(o,null==t?void 0:t.firstChild);const s=(0,b.L)();let a=null;a=s(i.createElement(O,Object.assign({},e,{target:t,registerUnmount:function(){return a}})),o)},x=(t,e,n)=>{const{wave:r}=i.useContext(l.QO),[,o,s]=(0,g.Ay)(),a=(0,f.A)((i=>{const a=t.current;if((null==r?void 0:r.disabled)||!a)return;const l=a.querySelector(`.${m.D}`)||a,{showEffect:c}=r||{};(c||S)(l,{className:e,token:o,component:n,event:i,hashId:s})})),c=i.useRef(null);return t=>{p.A.cancel(c.current),c.current=(0,p.A)((()=>{a(t)}))}},k=t=>{const{children:e,disabled:n,component:r}=t,{getPrefixCls:h}=(0,i.useContext)(l.QO),u=(0,i.useRef)(null),f=h("wave"),[,p]=d(f),g=x(u,o()(f,p),r);if(i.default.useEffect((()=>{const t=u.current;if(!t||1!==t.nodeType||n)return;const e=e=>{!(0,s.A)(e.target)||!t.getAttribute||t.getAttribute("disabled")||t.disabled||t.className.includes("disabled")||t.className.includes("-leave")||g(e)};return t.addEventListener("click",e,!0),()=>{t.removeEventListener("click",e,!0)}}),[n]),!i.default.isValidElement(e))return null!=e?e:null;const m=(0,a.f3)(e)?(0,a.K4)((0,a.A9)(e),u):u;return(0,c.Ob)(e,{ref:m})}},126:function(t,e,n){const i=n(358).y;e.w=function(t){if(t||(t=1),!n.y.meta||!n.y.meta.url)throw console.error("__system_context__",n.y),Error("systemjs-webpack-interop was provided an unknown SystemJS context. Expected context.meta.url, but none was provided");n.p=i(n.y.meta.url,t)}},251:function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,h=-7,u=n?r-1:0,d=n?-1:1,f=t[e+u];for(u+=d,o=f&(1<<-h)-1,f>>=-h,h+=a;h>0;o=256*o+t[e+u],u+=d,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=i;h>0;s=256*s+t[e+u],u+=d,h-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=c}return(f?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,l,c=8*o-r-1,h=(1<<c)-1,u=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=h?(a=0,s=h):s+u>=1?(a=(e*l-1)*Math.pow(2,r),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[n+f]=255&a,f+=p,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[n+f]=255&s,f+=p,s/=256,c-=8);t[n+f-p]|=128*g}},358:function(t,e,n){e.y=function(t,e){var n=document.createElement("a");n.href=t;for(var i="/"===n.pathname[0]?n.pathname:"/"+n.pathname,r=0,o=i.length;r!==e&&o>=0;)"/"===i[--o]&&r++;if(r!==e)throw Error("systemjs-webpack-interop: rootDirectoryLevel ("+e+") is greater than the number of directories ("+r+") in the URL path "+t);var s=i.slice(0,o+1);return n.protocol+"//"+n.host+s};Number.isInteger},540:function(t){"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},682:function(t,e,n){"use strict";n.d(e,{Ob:function(){return s},zv:function(){return r}});var i=n(1302);function r(t){return t&&i.default.isValidElement(t)&&t.type===i.default.Fragment}const o=(t,e,n)=>i.default.isValidElement(t)?i.default.cloneElement(t,"function"==typeof n?n(t.props||{}):n):e;function s(t,e){return o(t,t,e)}},723:function(t,e,n){"use strict";n.d(e,{r:function(){return i}});const i={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},r=Object.assign(Object.assign({},i),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n'Noto Color Emoji'",fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});e.A=r},829:function(t,e,n){"use strict";var i=n(1302),r=n(8224);e.A=t=>{const e=i.default.useContext(r.A);return i.default.useMemo((()=>t?"string"==typeof t?null!=t?t:e:"function"==typeof t?t(e):e:e),[t,e])}},938:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Y:function(){return c}});const o=Math.round;function s(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],i=n.map((t=>parseFloat(t)));for(let t=0;t<3;t+=1)i[t]=e(i[t]||0,n[t]||"",t);return n[3]?i[3]=n[3].includes("%")?i[3]/100:i[3]:i[3]=1,i}const a=(t,e,n)=>0===n?t:t/100;function l(t,e){const n=e||255;return t>n?n:t<0?0:t}class c{constructor(t){function e(e){return e[0]in t&&e[1]in t&&e[2]in t}if(r(this,"isValid",!0),r(this,"r",0),r(this,"g",0),r(this,"b",0),r(this,"a",1),r(this,"_h",void 0),r(this,"_s",void 0),r(this,"_l",void 0),r(this,"_v",void 0),r(this,"_max",void 0),r(this,"_min",void 0),r(this,"_brightness",void 0),t)if("string"==typeof t){const n=t.trim();function i(t){return n.startsWith(t)}/^#?[A-F\d]{3,8}$/i.test(n)?this.fromHexString(n):i("rgb")?this.fromRgbString(n):i("hsl")?this.fromHslString(n):(i("hsv")||i("hsb"))&&this.fromHsvString(n)}else if(t instanceof c)this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this._h=t._h,this._s=t._s,this._l=t._l,this._v=t._v;else if(e("rgb"))this.r=l(t.r),this.g=l(t.g),this.b=l(t.b),this.a="number"==typeof t.a?l(t.a,1):1;else if(e("hsl"))this.fromHsl(t);else{if(!e("hsv"))throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(t));this.fromHsv(t)}}setR(t){return this._sc("r",t)}setG(t){return this._sc("g",t)}setB(t){return this._sc("b",t)}setA(t){return this._sc("a",t,1)}setHue(t){const e=this.toHsv();return e.h=t,this._c(e)}getLuminance(){function t(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return.2126*t(this.r)+.7152*t(this.g)+.0722*t(this.b)}getHue(){if(void 0===this._h){const t=this.getMax()-this.getMin();this._h=0===t?0:o(60*(this.r===this.getMax()?(this.g-this.b)/t+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/t+2:(this.r-this.g)/t+4))}return this._h}getSaturation(){if(void 0===this._s){const t=this.getMax()-this.getMin();this._s=0===t?0:t/this.getMax()}return this._s}getLightness(){return void 0===this._l&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return void 0===this._v&&(this._v=this.getMax()/255),this._v}getBrightness(){return void 0===this._brightness&&(this._brightness=(299*this.r+587*this.g+114*this.b)/1e3),this._brightness}darken(t=10){const e=this.getHue(),n=this.getSaturation();let i=this.getLightness()-t/100;return i<0&&(i=0),this._c({h:e,s:n,l:i,a:this.a})}lighten(t=10){const e=this.getHue(),n=this.getSaturation();let i=this.getLightness()+t/100;return i>1&&(i=1),this._c({h:e,s:n,l:i,a:this.a})}mix(t,e=50){const n=this._c(t),i=e/100,r=t=>(n[t]-this[t])*i+this[t],s={r:o(r("r")),g:o(r("g")),b:o(r("b")),a:o(100*r("a"))/100};return this._c(s)}tint(t=10){return this.mix({r:255,g:255,b:255,a:1},t)}shade(t=10){return this.mix({r:0,g:0,b:0,a:1},t)}onBackground(t){const e=this._c(t),n=this.a+e.a*(1-this.a),i=t=>o((this[t]*this.a+e[t]*e.a*(1-this.a))/n);return this._c({r:i("r"),g:i("g"),b:i("b"),a:n})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}clone(){return this._c(this)}toHexString(){let t="#";const e=(this.r||0).toString(16);t+=2===e.length?e:"0"+e;const n=(this.g||0).toString(16);t+=2===n.length?n:"0"+n;const i=(this.b||0).toString(16);if(t+=2===i.length?i:"0"+i,"number"==typeof this.a&&this.a>=0&&this.a<1){const e=o(255*this.a).toString(16);t+=2===e.length?e:"0"+e}return t}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const t=this.getHue(),e=o(100*this.getSaturation()),n=o(100*this.getLightness());return 1!==this.a?`hsla(${t},${e}%,${n}%,${this.a})`:`hsl(${t},${e}%,${n}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return 1!==this.a?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(t,e,n){const i=this.clone();return i[t]=l(e,n),i}_c(t){return new this.constructor(t)}getMax(){return void 0===this._max&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return void 0===this._min&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(t){const e=t.replace("#","");function n(t,n){return parseInt(e[t]+e[n||t],16)}e.length<6?(this.r=n(0),this.g=n(1),this.b=n(2),this.a=e[3]?n(3)/255:1):(this.r=n(0,1),this.g=n(2,3),this.b=n(4,5),this.a=e[6]?n(6,7)/255:1)}fromHsl({h:t,s:e,l:n,a:i}){if(this._h=t%360,this._s=e,this._l=n,this.a="number"==typeof i?i:1,e<=0){const t=o(255*n);this.r=t,this.g=t,this.b=t}let r=0,s=0,a=0;const l=t/60,c=(1-Math.abs(2*n-1))*e,h=c*(1-Math.abs(l%2-1));l>=0&&l<1?(r=c,s=h):l>=1&&l<2?(r=h,s=c):l>=2&&l<3?(s=c,a=h):l>=3&&l<4?(s=h,a=c):l>=4&&l<5?(r=h,a=c):l>=5&&l<6&&(r=c,a=h);const u=n-c/2;this.r=o(255*(r+u)),this.g=o(255*(s+u)),this.b=o(255*(a+u))}fromHsv({h:t,s:e,v:n,a:i}){this._h=t%360,this._s=e,this._v=n,this.a="number"==typeof i?i:1;const r=o(255*n);if(this.r=r,this.g=r,this.b=r,e<=0)return;const s=t/60,a=Math.floor(s),l=s-a,c=o(n*(1-e)*255),h=o(n*(1-e*l)*255),u=o(n*(1-e*(1-l))*255);switch(a){case 0:this.g=u,this.b=c;break;case 1:this.r=h,this.b=c;break;case 2:this.r=c,this.b=u;break;case 3:this.r=c,this.g=h;break;case 4:this.r=u,this.g=c;break;default:this.g=c,this.b=h}}fromHsvString(t){const e=s(t,a);this.fromHsv({h:e[0],s:e[1],v:e[2],a:e[3]})}fromHslString(t){const e=s(t,a);this.fromHsl({h:e[0],s:e[1],l:e[2],a:e[3]})}fromRgbString(t){const e=s(t,((t,e)=>e.includes("%")?o(t/100*255):t));this.r=e[0],this.g=e[1],this.b=e[2],this.a=e[3]}}},981:function(t,e,n){"use strict";n.d(e,{o:function(){return s}});var i=n(1302),r=(0,n(998).A)()?i.useLayoutEffect:i.useEffect,o=function(t,e){var n=i.useRef(!0);r((function(){return t(n.current)}),e),r((function(){return n.current=!1,function(){n.current=!0}}),[])},s=function(t,e){o((function(e){if(!e)return t()}),e)};e.A=o},998:function(t,e,n){"use strict";function i(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}n.d(e,{A:function(){return i}})},1016:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}function o(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,{Kq:function(){return b},Ay:function(){return kt}});var h=n(6942),u=n.n(h),d=n(6588),f=n(8719),p=n(1302);function g(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var m=["children"],v=p.createContext({});function b(t){var e=t.children,n=g(t,m);return p.createElement(v.Provider,{value:n},e)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function O(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function x(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C=function(){return!!t})()}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t){var e=C();return function(){var n,r=k(t);if(e){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return A(t)}(this,n)}}var E=function(t){x(n,t);var e=M(n);function n(){return y(this,n),e.apply(this,arguments)}return O(n,[{key:"render",value:function(){return this.props.children}}]),n}(p.Component),P=E,T=n(1470),$=n(1233),D=n(5142),R=n(6956),B="none",N="appear",L="enter",j="leave",_="none",I="prepare",z="start",Q="active",H="end",V="prepared",W=n(998);function F(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}var q,X,K,Z=(q=(0,W.A)(),X="undefined"!=typeof window?window:{},K={animationend:F("Animation","AnimationEnd"),transitionend:F("Transition","TransitionEnd")},q&&("AnimationEvent"in X||delete K.animationend.animation,"TransitionEvent"in X||delete K.transitionend.transition),K),Y={};if((0,W.A)()){var G=document.createElement("div");Y=G.style}var U={};function J(t){if(U[t])return U[t];var e=Z[t];if(e)for(var n=Object.keys(e),i=n.length,r=0;r<i;r+=1){var o=n[r];if(Object.prototype.hasOwnProperty.call(e,o)&&o in Y)return U[t]=e[o],U[t]}return""}var tt=J("animationend"),et=J("transitionend"),nt=!(!tt||!et),it=tt||"animationend",rt=et||"transitionend";function ot(t,e){return t?"object"===i(t)?t[e.replace(/-\w/g,(function(t){return t[1].toUpperCase()}))]:"".concat(t,"-").concat(e):null}var st=(0,W.A)()?p.useLayoutEffect:p.useEffect,at=n(5371),lt=[I,z,Q,H],ct=[I,V],ht=!1;function ut(t){return t===Q||t===H}function dt(t,e,n,i){var r,s,l,h,u=i.motionEnter,d=void 0===u||u,f=i.motionAppear,g=void 0===f||f,m=i.motionLeave,v=void 0===m||m,b=i.motionDeadline,y=i.motionLeaveImmediately,w=i.onAppearPrepare,O=i.onEnterPrepare,S=i.onLeavePrepare,x=i.onAppearStart,k=i.onEnterStart,C=i.onLeaveStart,A=i.onAppearActive,M=i.onEnterActive,E=i.onLeaveActive,P=i.onAppearEnd,W=i.onEnterEnd,F=i.onLeaveEnd,q=i.onVisibleChanged,X=c((0,$.A)(),2),K=X[0],Z=X[1],Y=c((r=B,s=p.useReducer((function(t){return t+1}),0),l=(0,D.A)(s,2)[1],h=p.useRef(r),[(0,R.A)((function(){return h.current})),(0,R.A)((function(t){h.current="function"==typeof t?t(h.current):t,l()}))]),2),G=Y[0],U=Y[1],J=c((0,$.A)(null),2),tt=J[0],et=J[1],nt=G(),ot=(0,p.useRef)(!1),dt=(0,p.useRef)(null);function ft(){return n()}var pt=(0,p.useRef)(!1);function gt(){U(B),et(null,!0)}var mt=(0,T._q)((function(t){var e=G();if(e!==B){var n=ft();if(!t||t.deadline||t.target===n){var i,r=pt.current;e===N&&r?i=null==P?void 0:P(n,t):e===L&&r?i=null==W?void 0:W(n,t):e===j&&r&&(i=null==F?void 0:F(n,t)),r&&!1!==i&&gt()}}})),vt=function(t){var e=(0,p.useRef)();function n(e){e&&(e.removeEventListener(rt,t),e.removeEventListener(it,t))}return p.useEffect((function(){return function(){n(e.current)}}),[]),[function(i){e.current&&e.current!==i&&n(e.current),i&&i!==e.current&&(i.addEventListener(rt,t),i.addEventListener(it,t),e.current=i)},n]}(mt),bt=c(vt,1)[0],yt=function(t){switch(t){case N:return o(o(o({},I,w),z,x),Q,A);case L:return o(o(o({},I,O),z,k),Q,M);case j:return o(o(o({},I,S),z,C),Q,E);default:return{}}},wt=p.useMemo((function(){return yt(nt)}),[nt]),Ot=c(function(t,e,n){var i=c((0,$.A)(_),2),r=i[0],o=i[1],s=function(){var t=p.useRef(null);function e(){at.A.cancel(t.current)}return p.useEffect((function(){return function(){e()}}),[]),[function n(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e();var o=(0,at.A)((function(){r<=1?i({isCanceled:function(){return o!==t.current}}):n(i,r-1)}));t.current=o},e]}(),a=c(s,2),l=a[0],h=a[1],u=e?ct:lt;return st((function(){if(r!==_&&r!==H){var t=u.indexOf(r),e=u[t+1],i=n(r);i===ht?o(e,!0):e&&l((function(t){function n(){t.isCanceled()||o(e,!0)}!0===i?n():Promise.resolve(i).then(n)}))}}),[t,r]),p.useEffect((function(){return function(){h()}}),[]),[function(){o(I,!0)},r]}(nt,!t,(function(t){if(t===I){var e=wt[I];return e?e(ft()):ht}var n;return xt in wt&&et((null===(n=wt[xt])||void 0===n?void 0:n.call(wt,ft(),null))||null),xt===Q&&nt!==B&&(bt(ft()),b>0&&(clearTimeout(dt.current),dt.current=setTimeout((function(){mt({deadline:!0})}),b))),xt===V&&gt(),!0})),2),St=Ot[0],xt=Ot[1],kt=ut(xt);pt.current=kt;var Ct=(0,p.useRef)(null);st((function(){if(!ot.current||Ct.current!==e){Z(e);var n,i=ot.current;ot.current=!0,!i&&e&&g&&(n=N),i&&e&&d&&(n=L),(i&&!e&&v||!i&&y&&!e&&v)&&(n=j);var r=yt(n);n&&(t||r[I])?(U(n),St()):U(B),Ct.current=e}}),[e]),(0,p.useEffect)((function(){(nt===N&&!g||nt===L&&!d||nt===j&&!v)&&U(B)}),[g,d,v]),(0,p.useEffect)((function(){return function(){ot.current=!1,clearTimeout(dt.current)}}),[]);var At=p.useRef(!1);(0,p.useEffect)((function(){K&&(At.current=!0),void 0!==K&&nt===B&&((At.current||K)&&(null==q||q(K)),At.current=!0)}),[K,nt]);var Mt=tt;return wt[I]&&xt===z&&(Mt=a({transition:"none"},Mt)),[nt,xt,Mt,null!=K?K:e]}var ft=function(t){var e=t;"object"===i(t)&&(e=t.transitionSupport);var n=p.forwardRef((function(t,n){var i=t.visible,r=void 0===i||i,s=t.removeOnLeave,l=void 0===s||s,h=t.forceRender,g=t.children,m=t.motionName,b=t.leavedClassName,y=t.eventProps,w=function(t,n){return!(!t.motionName||!e||!1===n)}(t,p.useContext(v).motion),O=(0,p.useRef)(),S=(0,p.useRef)(),x=c(dt(w,r,(function(){try{return O.current instanceof HTMLElement?O.current:(0,d.Ay)(S.current)}catch(t){return null}}),t),4),k=x[0],C=x[1],A=x[2],M=x[3],E=p.useRef(M);M&&(E.current=!0);var T,$=p.useCallback((function(t){O.current=t,(0,f.Xf)(n,t)}),[n]),D=a(a({},y),{},{visible:r});if(g)if(k===B)T=M?g(a({},D),$):!l&&E.current&&b?g(a(a({},D),{},{className:b}),$):h||!l&&!b?g(a(a({},D),{},{style:{display:"none"}}),$):null;else{var R;C===I?R="prepare":ut(C)?R="active":C===z&&(R="start");var N=ot(m,"".concat(k,"-").concat(R));T=g(a(a({},D),{},{className:u()(ot(m,k),o(o({},N,N&&R),m,"string"==typeof m)),style:A}),$)}else T=null;return p.isValidElement(T)&&(0,f.f3)(T)&&((0,f.A9)(T)||(T=p.cloneElement(T,{ref:$}))),p.createElement(P,{ref:S},T)}));return n.displayName="CSSMotion",n}(nt);function pt(){return pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pt.apply(null,arguments)}var gt="add",mt="keep",vt="remove",bt="removed";function yt(t){var e;return a(a({},e=t&&"object"===i(t)&&"key"in t?t:{key:t}),{},{key:String(e.key)})}function wt(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(yt)}var Ot=["component","children","onVisibleChanged","onAllRemoved"],St=["status"],xt=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft,e=function(e){x(i,e);var n=M(i);function i(){var t;y(this,i);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return o(A(t=n.call.apply(n,[this].concat(r))),"state",{keyEntities:[]}),o(A(t),"removeKey",(function(e){t.setState((function(t){return{keyEntities:t.keyEntities.map((function(t){return t.key!==e?t:a(a({},t),{},{status:bt})}))}}),(function(){0===t.state.keyEntities.filter((function(t){return t.status!==bt})).length&&t.props.onAllRemoved&&t.props.onAllRemoved()}))})),t}return O(i,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,i=this.props,r=i.component,o=i.children,s=i.onVisibleChanged,l=(i.onAllRemoved,g(i,Ot)),c=r||p.Fragment,h={};return xt.forEach((function(t){h[t]=l[t],delete l[t]})),delete l.keys,p.createElement(c,l,n.map((function(n,i){var r=n.status,l=g(n,St),c=r===gt||r===mt;return p.createElement(t,pt({},h,{key:l.key,visible:c,eventProps:l,onVisibleChanged:function(t){null==s||s(t,{key:l.key}),t||e.removeKey(l.key)}}),(function(t,e){return o(a(a({},t),{},{index:i}),e)}))})))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.keys,i=e.keyEntities,r=wt(n),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],i=0,r=e.length,o=wt(t),s=wt(e);o.forEach((function(t){for(var e=!1,o=i;o<r;o+=1){var l=s[o];if(l.key===t.key){i<o&&(n=n.concat(s.slice(i,o).map((function(t){return a(a({},t),{},{status:gt})}))),i=o),n.push(a(a({},l),{},{status:mt})),i+=1,e=!0;break}}e||n.push(a(a({},t),{},{status:vt}))})),i<r&&(n=n.concat(s.slice(i).map((function(t){return a(a({},t),{},{status:gt})}))));var l={};return n.forEach((function(t){var e=t.key;l[e]=(l[e]||0)+1})),Object.keys(l).filter((function(t){return l[t]>1})).forEach((function(t){(n=n.filter((function(e){var n=e.key,i=e.status;return n!==t||i!==vt}))).forEach((function(e){e.key===t&&(e.status=mt)}))})),n}(i,r);return{keyEntities:o.filter((function(t){var e=i.find((function(e){var n=e.key;return t.key===n}));return!e||e.status!==bt||t.status!==vt}))}}}]),i}(p.Component);o(e,"defaultProps",{component:"div"})}(nt);var kt=ft},1020:function(t,e,n){"use strict";var i=n(1302),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,o={},c=null,h=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(h=e.ref),e)s.call(e,i)&&!l.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===o[i]&&(o[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:h,props:o,_owner:a.current}}e.Fragment=o,e.jsx=c,e.jsxs=c},1053:function(t,e,n){"use strict";var i=(0,n(1302).createContext)({});e.A=i},1081:function(t,e,n){"use strict";function i(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var o,s=0,a={memoizeOptions:void 0},l=i.pop();if("object"==typeof l&&(a=l,l=i.pop()),"function"!=typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var c=a.memoizeOptions,h=void 0===c?n:c,u=Array.isArray(h)?h:[h],d=function(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"==typeof t}))){var n=e.map((function(t){return"function"==typeof t?"function "+(t.name||"unnamed")+"()":typeof t})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return e}(i),f=t.apply(void 0,[function(){return s++,l.apply(null,arguments)}].concat(u)),p=t((function(){for(var t=[],e=d.length,n=0;n<e;n++)t.push(d[n].apply(null,arguments));return o=f.apply(null,t)}));return Object.assign(p,{resultFunc:l,memoizedResultFunc:f,dependencies:d,lastResult:function(){return o},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),p}}n.d(e,{Ad:function(){return i},Mz:function(){return r}});var r=i(n(6234).UI)},1113:function(t){"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},1233:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var i=n(5142),r=n(1302);function o(t){var e=r.useRef(!1),n=r.useState(t),o=(0,i.A)(n,2),s=o[0],a=o[1];return r.useEffect((function(){return e.current=!1,function(){e.current=!0}}),[]),[s,function(t,n){n&&e.current||a(t)}]}},1287:function(t,e,n){"use strict";n.d(e,{s:function(){return o}});var i=n(1302),r=!!i.useInsertionEffect&&i.useInsertionEffect,o=r||function(t){return t()};r||i.useLayoutEffect},1302:function(t){"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__1302__},1470:function(t,e,n){"use strict";n.d(e,{_q:function(){return i.A}});var i=n(6956);n(2533),n(8719),n(9309),n(8210)},1601:function(t){"use strict";t.exports=function(t){return t[1]}},1712:function(t,e,n){"use strict";n.d(e,{Ep:function(){return s},Iv:function(){return p},Mb:function(){return o},OO:function(){return l},Xj:function(){return f},bh:function(){return d},vo:function(){return a}});var i=n(1081),r=n(9889),o=function(t){return t.app},s=(0,i.Mz)(o,(function(t){return t.activeWidgetUrl})),a=(0,i.Mz)(o,(function(t){return t.activeWidgetProps})),l=(0,i.Mz)(o,(function(t){return t.tickTock})),c=r.xI.getSelectors(),h=c.selectAll,u=c.selectById,d=function(t){return h(o(t))},f=((0,i.Mz)(d,(function(t){return t.filter((function(t){return Boolean(t.route)}))})),function(t){var e;return u(o(t),null!==(e=o(t).activeWidgetUrl)&&void 0!==e?e:"")}),p=(0,i.Mz)(o,(function(t){return{isLoading:t.loading,error:t.error}}))},1826:function(t){"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__1826__},1934:function(t,e,n){"use strict";n.d(e,{Ep:function(){return r.Ep},Iv:function(){return r.Iv},Mb:function(){return r.Mb},OO:function(){return r.OO},Xj:function(){return r.Xj},cX:function(){return i.cX},tR:function(){return i.tR},vo:function(){return r.vo}});var i=n(9889),r=n(1712)},2011:function(t,e,n){"use strict";n.d(e,{az:function(){return h},VP:function(){return b},fI:function(){return v},EY:function(){return y}});var i,r,o=n(2639);function s(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var a,l,c,h=o.A.div(i||(i=s(["\n  margin: ",";\n  padding: ",";\n  width: ",";\n  height: ",";\n  min-width: ",";\n  min-height: ",";\n  max-width: ",";\n  max-height: ",";\n  overflow: ",";\n  position: ",";\n  border: ",";\n  ",";\n"])),(function(t){return t.margin}),(function(t){return t.padding}),(function(t){return t.width}),(function(t){return t.height}),(function(t){return t.minWidth}),(function(t){return t.minHeight}),(function(t){return t.maxWidth}),(function(t){return t.maxHeight}),(function(t){return t.overflow}),(function(t){return t.position}),(function(t){return t.border}),(function(t){return t["data-qa"]&&"data-qa=".concat(t["data-qa"])}));function u(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(0,o.A)(h)(r||(r=s(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: ",";\n  height: ",";\n"])),(function(t){var e;return null!==(e=t.width)&&void 0!==e?e:"100%"}),(function(t){var e;return null!==(e=t.height)&&void 0!==e?e:"100%"}));var d,f,p,g=(0,o.A)(h)(a||(a=u(["\n  justify-self: ",";\n  align-self: ",";\n  flex: ",";\n  width: ",";\n  height: ",";\n"])),(function(t){return t.justify}),(function(t){return t.align}),(function(t){var e;return null!==(e=t.flex)&&void 0!==e?e:"1"}),(function(t){var e;return null!==(e=t.width)&&void 0!==e?e:"100%"}),(function(t){var e;return null!==(e=t.height)&&void 0!==e?e:"100%"})),m=function(t){return t.Flex=g,t},v=m((0,o.A)(h)(l||(l=u(["\n  display: flex;\n  flex-direction: row;\n  justify-content: ",";\n  align-items: ",";\n  gap: ",";\n  flex-wrap: ",";\n  width: ",";\n  height: ",";\n"])),(function(t){return t.justify}),(function(t){return t.align}),(function(t){return t.gap}),(function(t){return t.wrap}),(function(t){var e;return null!==(e=t.width)&&void 0!==e?e:"100%"}),(function(t){var e;return null!==(e=t.height)&&void 0!==e?e:"100%"}))),b=m((0,o.A)(h)(c||(c=u(["\n  display: flex;\n  flex-direction: column;\n  justify-content: ",";\n  align-items: ",";\n  gap: ",";\n  width: ",";\n  height: ",";\n"])),(function(t){return t.justify}),(function(t){return t.align}),(function(t){return t.gap}),(function(t){var e;return null!==(e=t.width)&&void 0!==e?e:"100%"}),(function(t){var e;return null!==(e=t.height)&&void 0!==e?e:"100%"}))),y=o.A.div(d||(f=["\n  margin: ",";\n  padding: ",";\n  overflow: ",";\n  color: ",";\n  ",";\n"],p||(p=f.slice(0)),d=Object.freeze(Object.defineProperties(f,{raw:{value:Object.freeze(p)}}))),(function(t){var e;return null!==(e=t.margin)&&void 0!==e?e:0}),(function(t){var e;return null!==(e=t.padding)&&void 0!==e?e:0}),(function(t){return t.overflow}),(function(t){return t.color}),(function(t){return t["data-qa"]&&"data-qa=".concat(t["data-qa"])}))},2162:function(t,e,n){"use strict";var i=n(1302),r=n(9888),o="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},s=r.useSyncExternalStore,a=i.useRef,l=i.useEffect,c=i.useMemo,h=i.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var u=a(null);if(null===u.current){var d={hasValue:!1,value:null};u.current=d}else d=u.current;u=c((function(){function t(t){if(!l){if(l=!0,s=t,t=i(t),void 0!==r&&d.hasValue){var e=d.value;if(r(e,t))return a=e}return a=t}if(e=a,o(s,t))return e;var n=i(t);return void 0!==r&&r(e,n)?(s=t,e):(s=t,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return t(e())},null===c?void 0:function(){return t(c())}]}),[e,n,i,r]);var f=s(t,u[0],u[1]);return l((function(){d.hasValue=!0,d.value=f}),[f]),h(f),f}},2279:function(t,e,n){"use strict";n.d(e,{QO:function(){return a},TP:function(){return h},lJ:function(){return s},pM:function(){return o},yH:function(){return r}});var i=n(1302);const r="ant",o="anticon",s=["outlined","borderless","filled","underlined"],a=i.createContext({getPrefixCls:(t,e)=>e||(t?`${r}-${t}`:r),iconPrefixCls:o}),{Consumer:l}=a,c={};function h(t){const e=i.useContext(a),{getPrefixCls:n,direction:r,getPopupContainer:o}=e,s=e[t];return Object.assign(Object.assign({classNames:c,styles:c},s),{getPrefixCls:n,direction:r,getPopupContainer:o})}},2322:function(t,e,n){"use strict";n.d(e,{A:function(){return r}});var i=n(4607);function r(t,e){if(t){if("string"==typeof t)return(0,i.A)(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.A)(t,e):void 0}}},2445:function(t,e,n){"use strict";n.d(e,{FD:function(){return a},FK:function(){return o},Y:function(){return s}});var i=n(4848),r=n(4684),o=(n(1302),n(5655),n(4146),n(3174),n(1287),i.Fragment),s=function(t,e,n){return r.h.call(e,"css")?i.jsx(r.E,(0,r.c)(t,e),n):i.jsx(t,e,n)},a=function(t,e,n){return r.h.call(e,"css")?i.jsxs(r.E,(0,r.c)(t,e),n):i.jsxs(t,e,n)}},2467:function(t,e){"use strict";e.A=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),n=e.width,i=e.height;if(n||i)return!0}if(t.getBoundingClientRect){var r=t.getBoundingClientRect(),o=r.width,s=r.height;if(o||s)return!0}}return!1}},2490:function(t,e,n){"use strict";n.d(e,{A:function(){return s}});var i=n(4607),r=n(4123),o=n(2322);function s(t){return function(t){if(Array.isArray(t))return(0,i.A)(t)}(t)||(0,r.A)(t)||(0,o.A)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2533:function(t,e,n){"use strict";n.d(e,{A:function(){return l}});var i=n(5142),r=n(6956),o=n(981),s=n(1233);function a(t){return void 0!==t}function l(t,e){var n=e||{},l=n.defaultValue,c=n.value,h=n.onChange,u=n.postState,d=(0,s.A)((function(){return a(c)?c:a(l)?"function"==typeof l?l():l:"function"==typeof t?t():t})),f=(0,i.A)(d,2),p=f[0],g=f[1],m=void 0!==c?c:p,v=u?u(m):m,b=(0,r.A)(h),y=(0,s.A)([m]),w=(0,i.A)(y,2),O=w[0],S=w[1];return(0,o.o)((function(){var t=O[0];p!==t&&b(p,t)}),[O]),(0,o.o)((function(){a(c)||g(c)}),[c]),[v,(0,r.A)((function(t,e){g(t,e),S([m],e)}))]}},2546:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var i=n(6288),r=n(1302);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return r.default.Children.forEach(t,(function(t){(null!=t||e.keepEmpty)&&(Array.isArray(t)?n=n.concat(o(t)):(0,i.A)(t)&&t.props?n=n.concat(o(t.props.children,e)):n.push(t))})),n}},2587:function(t,e,n){"use strict";function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(null,arguments)}n.d(e,{A:function(){return i}})},2633:function(t,e,n){"use strict";function i(t){var e;return null==t||null===(e=t.getRootNode)||void 0===e?void 0:e.call(t)}function r(t){return function(t){return i(t)instanceof ShadowRoot}(t)?i(t):null}n.d(e,{j:function(){return r}})},2639:function(t,e,n){"use strict";function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(null,arguments)}n.d(e,{A:function(){return m}});var r=n(4684),o=n(3174),s=n(1287),a=n(41),l=n(1302),c=n(6289),h=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,u=(0,c.A)((function(t){return h.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),d=function(t){return"theme"!==t},f=function(t){return"string"==typeof t&&t.charCodeAt(0)>96?u:d},p=function(t,e,n){var i;if(e){var r=e.shouldForwardProp;i=t.__emotion_forwardProp&&r?function(e){return t.__emotion_forwardProp(e)&&r(e)}:r}return"function"!=typeof i&&n&&(i=t.__emotion_forwardProp),i},g=function(t){var e=t.cache,n=t.serialized,i=t.isStringTag;return(0,a.SF)(e,n,i),(0,s.s)((function(){return(0,a.sk)(e,n,i)})),null},m=function t(e,n){var s,c,h=e.__emotion_real===e,u=h&&e.__emotion_base||e;void 0!==n&&(s=n.label,c=n.target);var d=p(e,n,h),m=d||f(u),v=!m("as");return function(){var b=arguments,y=h&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==s&&y.push("label:"+s+";"),null==b[0]||void 0===b[0].raw)y.push.apply(y,b);else{var w=b[0];y.push(w[0]);for(var O=b.length,S=1;S<O;S++)y.push(b[S],w[S])}var x=(0,r.w)((function(t,e,n){var i=v&&t.as||u,s="",h=[],p=t;if(null==t.theme){for(var b in p={},t)p[b]=t[b];p.theme=l.useContext(r.T)}"string"==typeof t.className?s=(0,a.Rk)(e.registered,h,t.className):null!=t.className&&(s=t.className+" ");var w=(0,o.J)(y.concat(h),e.registered,p);s+=e.key+"-"+w.name,void 0!==c&&(s+=" "+c);var O=v&&void 0===d?f(i):m,S={};for(var x in t)v&&"as"===x||O(x)&&(S[x]=t[x]);return S.className=s,n&&(S.ref=n),l.createElement(l.Fragment,null,l.createElement(g,{cache:e,serialized:w,isStringTag:"string"==typeof i}),l.createElement(i,S))}));return x.displayName=void 0!==s?s:"Styled("+("string"==typeof u?u:u.displayName||u.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=u,x.__emotion_styles=y,x.__emotion_forwardProp=d,Object.defineProperty(x,"toString",{value:function(){return"."+c}}),x.withComponent=function(e,r){return t(e,i({},n,r,{shouldForwardProp:p(x,r,!0)})).apply(void 0,y)},x}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){m[t]=m(t)}))},2694:function(t,e,n){"use strict";var i=n(6925);function r(){}function o(){}o.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},2799:function(t,e){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy");Symbol.for("react.offscreen");Symbol.for("react.module.reference"),e.ForwardRef=h,e.isMemo=function(t){return function(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case r:case s:case o:case u:case d:return t;default:switch(t=t&&t.$$typeof){case c:case l:case h:case p:case f:case a:return t;default:return e}}case i:return e}}}(t)===f}},2861:function(t,e,n){var i=n(8287),r=i.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,e),e.Buffer=s),s.prototype=Object.create(r.prototype),o(r,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},3072:function(t,e){"use strict";var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function O(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case h:case u:case o:case a:case s:case f:return t;default:switch(t=t&&t.$$typeof){case c:case d:case m:case g:case l:return t;default:return e}}case r:return e}}}function S(t){return O(t)===u}e.AsyncMode=h,e.ConcurrentMode=u,e.ContextConsumer=c,e.ContextProvider=l,e.Element=i,e.ForwardRef=d,e.Fragment=o,e.Lazy=m,e.Memo=g,e.Portal=r,e.Profiler=a,e.StrictMode=s,e.Suspense=f,e.isAsyncMode=function(t){return S(t)||O(t)===h},e.isConcurrentMode=S,e.isContextConsumer=function(t){return O(t)===c},e.isContextProvider=function(t){return O(t)===l},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return O(t)===d},e.isFragment=function(t){return O(t)===o},e.isLazy=function(t){return O(t)===m},e.isMemo=function(t){return O(t)===g},e.isPortal=function(t){return O(t)===r},e.isProfiler=function(t){return O(t)===a},e.isStrictMode=function(t){return O(t)===s},e.isSuspense=function(t){return O(t)===f},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===u||t===a||t===s||t===f||t===p||"object"==typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===l||t.$$typeof===c||t.$$typeof===d||t.$$typeof===b||t.$$typeof===y||t.$$typeof===w||t.$$typeof===v)},e.typeOf=O},3077:function(t,e,n){"use strict";n.d(e,{Z:function(){return h}});var i=n(6432);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(){o=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function h(t,e,n,i){return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i})}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function u(e,n,i,r){var o=n&&n.prototype instanceof p?n:p,s=Object.create(o.prototype);return h(s,"_invoke",function(e,n,i){var r=1;return function(o,s){if(3===r)throw Error("Generator is already running");if(4===r){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var l=x(a,i);if(l){if(l===f)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(1===r)throw r=4,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=3;var c=d(e,n,i);if("normal"===c.type){if(r=i.done?4:2,c.arg===f)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=4,i.method="throw",i.arg=c.arg)}}}(e,i,new A(r||[])),!0),s}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f={};function p(){}function g(){}function m(){}var v={};h(v,a,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(M([])));y&&y!==n&&i.call(y,a)&&(v=y);var w=m.prototype=p.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,s,a,l){var c=d(t[o],t,s);if("throw"!==c.type){var h=c.arg,u=h.value;return u&&"object"==r(u)&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(u).then((function(t){h.value=t,a(h)}),(function(t){return n("throw",t,a,l)}))}l(c.arg)}var o;h(this,"_invoke",(function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return o=o?o.then(r,r):r()}),!0)}function x(e,n){var i=n.method,r=e.i[i];if(r===t)return n.delegate=null,"throw"===i&&e.i.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),f;var o=d(r,e.i,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var s=o.arg;return s?s.done?(n[e.r]=s.value,n.next=e.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function k(t){this.tryEntries.push(t)}function C(e){var n=e[4]||{};n.type="normal",n.arg=t,e[4]=n}function A(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function M(e){if(null!=e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(r(e)+" is not iterable")}return g.prototype=m,h(w,"constructor",m),h(m,"constructor",g),g.displayName=h(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,h(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},O(S.prototype),h(S.prototype,l,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var s=new S(u(t,n,i,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},O(w),h(w,c,"Generator"),h(w,a,(function(){return this})),h(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.unshift(i);return function t(){for(;n.length;)if((i=n.pop())in e)return t.value=i,t.done=!1,t;return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(t){s.type="throw",s.arg=e,n.next=t}for(var r=n.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o[4],a=this.prev,l=o[1],c=o[2];if(-1===o[0])return i("end"),!1;if(!l&&!c)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=a){if(a<l)return this.method="next",this.arg=t,i(l),!0;if(a<c)return i(c),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i[0]>-1&&i[0]<=this.prev&&this.prev<i[2]){var r=i;break}}r&&("break"===t||"continue"===t)&&r[0]<=e&&e<=r[2]&&(r=null);var o=r?r[4]:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r[2],f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),C(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var i=n[4];if("throw"===i.type){var r=i.arg;C(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={i:M(e),r:n,n:i},"next"===this.method&&(this.arg=t),f}},e}function s(t,e,n,i,r,o,s){try{var a=t[o](s),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,r)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){s(o,i,r,a,l,"next",t)}function l(t){s(o,i,r,a,l,"throw",t)}a(void 0)}))}}var l=function(){var t=a(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/version");case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent.configs.widgetConfig,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=(0,i.zD)("app/refreshWidgets",function(){var t=a(o().mark((function t(e,n){var i,r,s,a,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.dispatch,t.prev=1,t.next=4,l();case 4:return i=t.sent,r=new URLSearchParams(window.location.search),s=r.get("widgetId")||r.get("widget"),a=i.find((function(t){return t.widgetId===s})),c=function(){var t,e;return a&&a.widgetId?null===(e=window.importMapOverrides)||void 0===e||null===(e=e.getOverrideMap())||void 0===e?void 0:e.imports[a.widgetId]:null!==(t=r.get("widgetUrl"))&&void 0!==t?t:s},t.abrupt("return",[i,c()]);case 12:throw t.prev=12,t.t0=t.catch(1),console.error(t.t0),t.t0;case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}()),h={loadWidgets:c}},3174:function(t,e,n){"use strict";n.d(e,{J:function(){return m}});var i={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},r=n(6289),o=!1,s=/[A-Z]|^ms/g,a=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(t){return 45===t.charCodeAt(1)},c=function(t){return null!=t&&"boolean"!=typeof t},h=(0,r.A)((function(t){return l(t)?t:t.replace(s,"-$&").toLowerCase()})),u=function(t,e){switch(t){case"animation":case"animationName":if("string"==typeof e)return e.replace(a,(function(t,e,n){return p={name:e,styles:n,next:p},e}))}return 1===i[t]||l(t)||"number"!=typeof e||0===e?e:e+"px"},d="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function f(t,e,n){if(null==n)return"";var i=n;if(void 0!==i.__emotion_styles)return i;switch(typeof n){case"boolean":return"";case"object":var r=n;if(1===r.anim)return p={name:r.name,styles:r.styles,next:p},r.name;var s=n;if(void 0!==s.styles){var a=s.next;if(void 0!==a)for(;void 0!==a;)p={name:a.name,styles:a.styles,next:p},a=a.next;return s.styles+";"}return function(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=f(t,e,n[r])+";";else for(var s in n){var a=n[s];if("object"!=typeof a){var l=a;null!=e&&void 0!==e[l]?i+=s+"{"+e[l]+"}":c(l)&&(i+=h(s)+":"+u(s,l)+";")}else{if("NO_COMPONENT_SELECTOR"===s&&o)throw new Error(d);if(!Array.isArray(a)||"string"!=typeof a[0]||null!=e&&void 0!==e[a[0]]){var p=f(t,e,a);switch(s){case"animation":case"animationName":i+=h(s)+":"+p+";";break;default:i+=s+"{"+p+"}"}}else for(var g=0;g<a.length;g++)c(a[g])&&(i+=h(s)+":"+u(s,a[g])+";")}}return i}(t,e,n);case"function":if(void 0!==t){var l=p,g=n(t);return p=l,f(t,e,g)}}var m=n;if(null==e)return m;var v=e[m];return void 0!==v?v:m}var p,g=/label:\s*([^\s;{]+)\s*(;|$)/g;function m(t,e,n){if(1===t.length&&"object"==typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var i=!0,r="";p=void 0;var o=t[0];null==o||void 0===o.raw?(i=!1,r+=f(n,e,o)):r+=o[0];for(var s=1;s<t.length;s++)r+=f(n,e,t[s]),i&&(r+=o[s]);g.lastIndex=0;for(var a,l="";null!==(a=g.exec(r));)l+="-"+a[1];var c=function(t){for(var e,n=0,i=0,r=t.length;r>=4;++i,r-=4)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&t.charCodeAt(i+2))<<16;case 2:n^=(255&t.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(r)+l;return{name:c,styles:r,next:p}}},3209:function(t,e,n){"use strict";var i=65536,r=n(2861).Buffer,o=n.g.crypto||n.g.msCrypto;o&&o.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var n=r.allocUnsafe(t);if(t>0)if(t>i)for(var s=0;s<t;s+=i)o.getRandomValues(n.slice(s,s+i));else o.getRandomValues(n);return"function"==typeof e?process.nextTick((function(){e(null,n)})):n}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},3210:function(t,e,n){"use strict";var i=n(8314),r=n(8210);e.A=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=new Set;return function t(e,s){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=o.has(e);if((0,r.Ay)(!l,"Warning: There may be circular references"),l)return!1;if(e===s)return!0;if(n&&a>1)return!1;o.add(e);var c=a+1;if(Array.isArray(e)){if(!Array.isArray(s)||e.length!==s.length)return!1;for(var h=0;h<e.length;h++)if(!t(e[h],s[h],c))return!1;return!0}if(e&&s&&"object"===(0,i.A)(e)&&"object"===(0,i.A)(s)){var u=Object.keys(e);return u.length===Object.keys(s).length&&u.every((function(n){return t(e[n],s[n],c)}))}return!1}(t,e)}},3380:function(t,e,n){"use strict";n.d(e,{h:function(){return $}});var i=n(2445),r=n(2639),o=n(1302);const s=(0,o.createContext)(null),a={didCatch:!1,error:null};class l extends o.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=a}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(null!==t){for(var e,n,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];null===(e=(n=this.props).onReset)||void 0===e||e.call(n,{args:r,reason:"imperative-api"}),this.setState(a)}}componentDidCatch(t,e){var n,i;null===(n=(i=this.props).onError)||void 0===n||n.call(i,t,e)}componentDidUpdate(t,e){const{didCatch:n}=this.state,{resetKeys:i}=this.props;var r,o;n&&null!==e.error&&function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.length!==e.length||t.some(((t,n)=>!Object.is(t,e[n])))}(t.resetKeys,i)&&(null===(r=(o=this.props).onReset)||void 0===r||r.call(o,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(a))}render(){const{children:t,fallbackRender:e,FallbackComponent:n,fallback:i}=this.props,{didCatch:r,error:a}=this.state;let l=t;if(r){const t={error:a,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof e)l=e(t);else if(n)l=(0,o.createElement)(n,t);else{if(void 0===i)throw a;l=i}}return(0,o.createElement)(s.Provider,{value:{didCatch:r,error:a,resetErrorBoundary:this.resetErrorBoundary}},l)}}var c=n(4386),h=n(4578);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var f,p,g,m,v=/^(.*?):\s*/,b=function(t){return t instanceof Error?t.message:String(t)},y=function(t){if(t instanceof Error){var e=t.stack;if(e){var n=e.match(v);if(n)return n[1]}}return"Error"},w=n(2011),O=n(5872),S=n(9994),x=n(1934);function k(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var C=r.A.p(f||(f=k(["\n  font-family:\n    ui-monospace, Menlo, Monaco, 'Cascadia Mono', 'Segoe UI Mono',\n    'Roboto Mono', 'Oxygen Mono', 'Ubuntu Monospace', 'Source Code Pro',\n    'Fira Mono', 'Droid Sans Mono', 'Courier New', monospace;\n  color: ",";\n  font-weight: 600;\n  padding: 0;\n  margin: 0;\n"])),(function(t){return"error"===t.type?"#DB3939":"#191823"})),A=r.A.p(p||(p=k(["\n  margin: 0;\n  padding: "," 0 0 0;\n"])),"16px"),M=r.A.pre(g||(g=k(["\n  white-space: pre-wrap;\n  font-family:\n    ui-monospace, Menlo, Monaco, 'Cascadia Mono', 'Segoe UI Mono',\n    'Roboto Mono', 'Oxygen Mono', 'Ubuntu Monospace', 'Source Code Pro',\n    'Fira Mono', 'Droid Sans Mono', 'Courier New', monospace;\n"]))),E="24px",P=(0,r.A)(w.az)(m||(m=k(["\n  padding: ",";\n  borderradius: ",";\n  background: ",";\n"])),E,"2px","#ebeff3"),T=function(t){var e=t.error,n=t.resetErrorBoundary,r=(0,O.W)(),o=(0,S.jL)(),s=function(t){var e,n=function(t){if(t instanceof Error){var e=t.stack;if(e){var n=e.match(/at\s+(.*)\s+\((.*):(\d+):(\d+)\)/);if(n){var i=u(n,5),r=i[1],o=i[2],s=i[3],a=i[4];return{file:o.trim(),widget:r.trim(),location:"".concat(s.trim(),":").concat(a.trim())}}var l=e.match(/at\s+()(.*):(\d+):(\d+)/);if(l){var c=u(l,5),h=c[1],d=c[2],f=c[3],p=c[4];return{file:d.trim(),widget:h.trim(),location:"".concat(f.trim(),":").concat(p.trim())}}}}return{file:"",location:"",widget:""}}(t),i=n.file,r=n.location,o=n.widget;return{type:y(t),message:b(t),file:i,location:r,widget:o,stack:t instanceof Error&&null!==(e=t.stack)&&void 0!==e?e:""}}(e),a=function(){null==n||n(),o(x.tR.renderWidget())};return(0,i.FD)(w.VP,{gap:E,children:[(0,i.Y)(P,{children:(0,i.FD)(w.fI,{css:{alignContent:"center"},children:[(0,i.FD)(w.VP,{justify:"center",children:[(0,i.Y)(C,{"data-qa":"bathtub.error.type",type:"error",children:s.type}),(0,i.Y)("h2",{"data-qa":"bathtub.error.heading",children:r("Bathtub.Renderer.HelpFailedHeader")}),(0,i.Y)(A,{children:r("Bathtub.Renderer.HelpFailed")})]}),(0,i.Y)(c.A,{keyName:"cmd+esc",onKeyDown:a,children:(0,i.Y)(h.Ay,{onClick:a,children:r("Bathtub.Renderer.HelpFailedAction")})})]})}),(0,i.Y)(P,{children:(0,i.FD)(w.fI,{css:{alignContent:"center"},children:[(0,i.FD)(w.fI.Flex,{flex:"1",justify:"center",children:[(0,i.Y)(C,{"data-qa":"bathtub.error.message",type:"error",children:s.message}),(0,i.Y)(C,{"data-qa":"bathtub.error.location",type:"info",children:r("Bathtub.Renderer.HelpFailureLocation",{WIDGET:s.widget,LOCATION:s.location})})]}),(0,i.Y)("a",{href:"".concat(s.file),target:"_blank",children:r("Bathtub.Renderer.HelpFailureOpenFile")})]})}),(0,i.Y)(w.VP.Flex,{flex:"1",children:(0,i.FD)(P,{children:[(0,i.Y)("h3",{"data-qa":"bathtub.error.stackHeading",children:r("Bathtub.Renderer.HelpFailureStackTrace")}),(0,i.Y)(M,{children:s.stack})]})})]})},$=function(t){var e=t.children;return(0,i.Y)(l,{FallbackComponent:T,children:e})}},3404:function(t,e,n){"use strict";t.exports=n(3072)},3459:function(t,e,n){"use strict";var i=n(3209),r=function(){for(var t=i(16),e="",n=0;n<16;++n)e+=t[n].toString(16);return e}(),o=new RegExp('(\\\\)?"@__(F|R|D|M|S|A|U|I|B|L)-'+r+'-(\\d+)__@"',"g"),s=/\{\s*\[native code\]\s*\}/g,a=/function.*?\(/,l=/.*?=>.*?/,c=/[<>\/\u2028\u2029]/g,h=["*","async"],u={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function d(t){return u[t]}t.exports=function t(e,n){n||(n={}),"number"!=typeof n&&"string"!=typeof n||(n={space:n});var i,u=[],f=[],p=[],g=[],m=[],v=[],b=[],y=[],w=[],O=[];return n.ignoreFunction&&"function"==typeof e&&(e=void 0),void 0===e?String(e):(i=n.isJSON&&!n.space?JSON.stringify(e):JSON.stringify(e,n.isJSON?null:function(t,e){if(n.ignoreFunction&&function(t){var e=[];for(var n in t)"function"==typeof t[n]&&e.push(n);for(var i=0;i<e.length;i++)delete t[e[i]]}(e),!e&&void 0!==e&&e!==BigInt(0))return e;var i=this[t],o=typeof i;if("object"===o){if(i instanceof RegExp)return"@__R-"+r+"-"+(f.push(i)-1)+"__@";if(i instanceof Date)return"@__D-"+r+"-"+(p.push(i)-1)+"__@";if(i instanceof Map)return"@__M-"+r+"-"+(g.push(i)-1)+"__@";if(i instanceof Set)return"@__S-"+r+"-"+(m.push(i)-1)+"__@";if(i instanceof Array&&i.filter((function(){return!0})).length!==i.length)return"@__A-"+r+"-"+(v.push(i)-1)+"__@";if(i instanceof URL)return"@__L-"+r+"-"+(O.push(i)-1)+"__@"}return"function"===o?"@__F-"+r+"-"+(u.push(i)-1)+"__@":"undefined"===o?"@__U-"+r+"-"+(b.push(i)-1)+"__@":"number"!==o||isNaN(i)||isFinite(i)?"bigint"===o?"@__B-"+r+"-"+(w.push(i)-1)+"__@":e:"@__I-"+r+"-"+(y.push(i)-1)+"__@"},n.space),"string"!=typeof i?String(i):(!0!==n.unsafe&&(i=i.replace(c,d)),0===u.length&&0===f.length&&0===p.length&&0===g.length&&0===m.length&&0===v.length&&0===b.length&&0===y.length&&0===w.length&&0===O.length?i:i.replace(o,(function(e,i,r,o){return i?e:"D"===r?'new Date("'+p[o].toISOString()+'")':"R"===r?"new RegExp("+t(f[o].source)+', "'+f[o].flags+'")':"M"===r?"new Map("+t(Array.from(g[o].entries()),n)+")":"S"===r?"new Set("+t(Array.from(m[o].values()),n)+")":"A"===r?"Array.prototype.slice.call("+t(Object.assign({length:v[o].length},v[o]),n)+")":"U"===r?"undefined":"I"===r?y[o]:"B"===r?'BigInt("'+w[o]+'")':"L"===r?"new URL("+t(O[o].toString(),n)+")":function(t){var e=t.toString();if(s.test(e))throw new TypeError("Serializing native function: "+t.name);if(a.test(e))return e;if(l.test(e))return e;var n=e.indexOf("("),i=e.substr(0,n).trim().split(" ").filter((function(t){return t.length>0}));return i.filter((function(t){return-1===h.indexOf(t)})).length>0?(i.indexOf("async")>-1?"async ":"")+"function"+(i.join("").indexOf("*")>-1?"*":"")+e.substr(n):e}(u[o])}))))}},3561:function(t,e,n){"use strict";n.d(e,{Kq:function(){return S},bN:function(){return E},wA:function(){return A},d4:function(){return b}});var i=n(9888),r=n(9242),o=n(4946);let s=function(t){t()};const a=()=>s;var l=n(1302);const c=Symbol.for("react-redux-context"),h="undefined"!=typeof globalThis?globalThis:{};function u(){var t;if(!l.createContext)return{};const e=null!=(t=h[c])?t:h[c]=new Map;let n=e.get(l.createContext);return n||(n=l.createContext(null),e.set(l.createContext,n)),n}const d=u();function f(t=d){return function(){return(0,l.useContext)(t)}}const p=f();let g=()=>{throw new Error("uSES not initialized!")};const m=(t,e)=>t===e;function v(t=d){const e=t===d?p:f(t);return function(t,n={}){const{equalityFn:i=m,stabilityCheck:r,noopCheck:o}="function"==typeof n?{equalityFn:n}:n,{store:s,subscription:a,getServerState:c,stabilityCheck:h,noopCheck:u}=e(),d=((0,l.useRef)(!0),(0,l.useCallback)({[t.name](e){return t(e)}}[t.name],[t,h,r])),f=g(a.addNestedSub,s.getState,c||s.getState,d,i);return(0,l.useDebugValue)(f),f}}const b=v();n(4146),n(4363);const y={notify(){},get:()=>[]};const w="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?l.useLayoutEffect:l.useEffect;let O=null;var S=function({store:t,context:e,children:n,serverState:i,stabilityCheck:r="once",noopCheck:o="once"}){const s=l.useMemo((()=>{const e=function(t,e){let n,i=y,r=0,o=!1;function s(){h.onStateChange&&h.onStateChange()}function l(){r++,n||(n=e?e.addNestedSub(s):t.subscribe(s),i=function(){const t=a();let e=null,n=null;return{clear(){e=null,n=null},notify(){t((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let i=!0,r=n={callback:t,next:null,prev:n};return r.prev?r.prev.next=r:e=r,function(){i&&null!==e&&(i=!1,r.next?r.next.prev=r.prev:n=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}())}function c(){r--,n&&0===r&&(n(),n=void 0,i.clear(),i=y)}const h={addNestedSub:function(t){l();const e=i.subscribe(t);let n=!1;return()=>{n||(n=!0,e(),c())}},notifyNestedSubs:function(){i.notify()},handleChangeWrapper:s,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,l())},tryUnsubscribe:function(){o&&(o=!1,c())},getListeners:()=>i};return h}(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:r,noopCheck:o}}),[t,i,r,o]),c=l.useMemo((()=>t.getState()),[t]);w((()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[s,c]);const h=e||d;return l.createElement(h.Provider,{value:s},n)};function x(t=d){const e=t===d?p:f(t);return function(){const{store:t}=e();return t}}const k=x();function C(t=d){const e=t===d?k:x(t);return function(){return e().dispatch}}const A=C();function M(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function E(t,e){if(M(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!M(t[n[i]],e[n[i]]))return!1;return!0}var P,T;P=r.useSyncExternalStoreWithSelector,g=P,(t=>{O=t})(i.useSyncExternalStore),T=o.unstable_batchedUpdates,s=T},3567:function(t,e,n){"use strict";n.d(e,{A:function(){return l}});var i=n(2587),r=n(1302),o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},s=n(7066),a=function(t,e){return r.createElement(s.A,(0,i.A)({},t,{ref:e,icon:o}))},l=r.forwardRef(a)},3950:function(t,e,n){"use strict";n.d(e,{s:function(){return i}});const i=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},4123:function(t,e,n){"use strict";function i(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n.d(e,{A:function(){return i}})},4146:function(t,e,n){"use strict";var i=n(3404),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return i.isMemo(t)?s:a[t.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=s;var c=Object.defineProperty,h=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,i){if("string"!=typeof n){if(p){var r=f(n);r&&r!==p&&t(e,r,i)}var s=h(n);u&&(s=s.concat(u(n)));for(var a=l(e),g=l(n),m=0;m<s.length;++m){var v=s[m];if(!(o[v]||i&&i[v]||g&&g[v]||a&&a[v])){var b=d(n,v);try{c(e,v,b)}catch(t){}}}}return e}},4363:function(t,e,n){"use strict";t.exports=n(2799)},4386:function(t,e,n){"use strict";n.d(e,{A:function(){return P}});var i=n(1302),r=n(5556);const o="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function s(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on".concat(e),n)}function a(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on".concat(e),n)}function l(t,e){const n=e.slice(0,e.length-1);for(let e=0;e<n.length;e++)n[e]=t[n[e].toLowerCase()];return n}function c(t){"string"!=typeof t&&(t="");const e=(t=t.replace(/\s/g,"")).split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}const h={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":o?173:189,"=":o?61:187,";":o?59:186,"'":222,"[":219,"]":221,"\\":220},u={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},d={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},f={16:!1,18:!1,17:!1,91:!1},p={};for(let t=1;t<20;t++)h["f".concat(t)]=111+t;let g=[],m=null,v="all";const b=new Map,y=t=>h[t.toLowerCase()]||u[t.toLowerCase()]||t.toUpperCase().charCodeAt(0);function w(t){v=t||"all"}function O(){return v||"all"}function S(t){if(void 0===t)Object.keys(p).forEach((t=>{Array.isArray(p[t])&&p[t].forEach((t=>x(t))),delete p[t]})),M(null);else if(Array.isArray(t))t.forEach((t=>{t.key&&x(t)}));else if("object"==typeof t)t.key&&x(t);else if("string"==typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];let[r,o]=n;"function"==typeof r&&(o=r,r=""),x({key:t,scope:r,method:o,splitKey:"+"})}}const x=t=>{let{key:e,scope:n,method:i,splitKey:r="+"}=t;c(e).forEach((t=>{const e=t.split(r),o=e.length,s=e[o-1],a="*"===s?"*":y(s);if(!p[a])return;n||(n=O());const c=o>1?l(u,e):[],h=[];p[a]=p[a].filter((t=>{const e=(!i||t.method===i)&&t.scope===n&&function(t,e){const n=t.length>=e.length?t:e,i=t.length>=e.length?e:t;let r=!0;for(let t=0;t<n.length;t++)-1===i.indexOf(n[t])&&(r=!1);return r}(t.mods,c);return e&&h.push(t.element),!e})),h.forEach((t=>M(t)))}))};function k(t,e,n,i){if(e.element!==i)return;let r;if(e.scope===n||"all"===e.scope){r=e.mods.length>0;for(const t in f)Object.prototype.hasOwnProperty.call(f,t)&&(!f[t]&&e.mods.indexOf(+t)>-1||f[t]&&-1===e.mods.indexOf(+t))&&(r=!1);(0!==e.mods.length||f[16]||f[18]||f[17]||f[91])&&!r&&"*"!==e.shortcut||(e.keys=[],e.keys=e.keys.concat(g),!1===e.method(t,e)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}function C(t,e){const n=p["*"];let i=t.keyCode||t.which||t.charCode;if(!A.filter.call(this,t))return;if(93!==i&&224!==i||(i=91),-1===g.indexOf(i)&&229!==i&&g.push(i),["metaKey","ctrlKey","altKey","shiftKey"].forEach((e=>{const n=d[e];t[e]&&-1===g.indexOf(n)?g.push(n):!t[e]&&g.indexOf(n)>-1?g.splice(g.indexOf(n),1):"metaKey"===e&&t[e]&&(g=g.filter((t=>t in d||t===i)))})),i in f){f[i]=!0;for(const e in u)if(Object.prototype.hasOwnProperty.call(u,e)){const n=d[u[e]];A[e]=t[n]}if(!n)return}for(const e in f)Object.prototype.hasOwnProperty.call(f,e)&&(f[e]=t[d[e]]);t.getModifierState&&(!t.altKey||t.ctrlKey)&&t.getModifierState("AltGraph")&&(-1===g.indexOf(17)&&g.push(17),-1===g.indexOf(18)&&g.push(18),f[17]=!0,f[18]=!0);const r=O();if(n)for(let i=0;i<n.length;i++)n[i].scope===r&&("keydown"===t.type&&n[i].keydown||"keyup"===t.type&&n[i].keyup)&&k(t,n[i],r,e);if(!(i in p))return;const o=p[i],s=o.length;for(let n=0;n<s;n++)if(("keydown"===t.type&&o[n].keydown||"keyup"===t.type&&o[n].keyup)&&o[n].key){const i=o[n],{splitKey:s}=i,a=i.key.split(s),l=[];for(let t=0;t<a.length;t++)l.push(y(a[t]));l.sort().join("")===g.sort().join("")&&k(t,i,r,e)}}function A(t,e,n){g=[];const i=c(t);let r=[],o="all",a=document,h=0,d=!1,v=!0,w="+",O=!1,x=!1;for(void 0===n&&"function"==typeof e&&(n=e),"[object Object]"===Object.prototype.toString.call(e)&&(e.scope&&(o=e.scope),e.element&&(a=e.element),e.keyup&&(d=e.keyup),void 0!==e.keydown&&(v=e.keydown),void 0!==e.capture&&(O=e.capture),"string"==typeof e.splitKey&&(w=e.splitKey),!0===e.single&&(x=!0)),"string"==typeof e&&(o=e),x&&S(t,o);h<i.length;h++)r=[],(t=i[h].split(w)).length>1&&(r=l(u,t)),(t="*"===(t=t[t.length-1])?"*":y(t))in p||(p[t]=[]),p[t].push({keyup:d,keydown:v,scope:o,mods:r,shortcut:i[h],method:n,key:i[h],splitKey:w,element:a});if(void 0!==a&&window){if(!b.has(a)){const t=function(){return C(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,a)},e=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;C(t,a),function(t){let e=t.keyCode||t.which||t.charCode;const n=g.indexOf(e);if(n>=0&&g.splice(n,1),t.key&&"meta"===t.key.toLowerCase()&&g.splice(0,g.length),93!==e&&224!==e||(e=91),e in f){f[e]=!1;for(const t in u)u[t]===e&&(A[t]=!1)}}(t)};b.set(a,{keydownListener:t,keyupListenr:e,capture:O}),s(a,"keydown",t,O),s(a,"keyup",e,O)}if(!m){const t=()=>{g=[]};m={listener:t,capture:O},s(window,"focus",t,O)}}}function M(t){const e=Object.values(p).flat();if(e.findIndex((e=>{let{element:n}=e;return n===t}))<0){const{keydownListener:e,keyupListenr:n,capture:i}=b.get(t)||{};e&&n&&(a(t,"keyup",n,i),a(t,"keydown",e,i),b.delete(t))}if((e.length<=0||b.size<=0)&&(Object.keys(b).forEach((t=>{const{keydownListener:e,keyupListenr:n,capture:i}=b.get(t)||{};e&&n&&(a(t,"keyup",n,i),a(t,"keydown",e,i),b.delete(t))})),b.clear(),Object.keys(p).forEach((t=>delete p[t])),m)){const{listener:t,capture:e}=m;a(window,"focus",t,e),m=null}}const E={getPressedKeyString:function(){return g.map((t=>{return e=t,Object.keys(h).find((t=>h[t]===e))||(t=>Object.keys(u).find((e=>u[e]===t)))(t)||String.fromCharCode(t);var e}))},setScope:w,getScope:O,deleteScope:function(t,e){let n,i;t||(t=O());for(const e in p)if(Object.prototype.hasOwnProperty.call(p,e))for(n=p[e],i=0;i<n.length;)n[i].scope===t?n.splice(i,1).forEach((t=>{let{element:e}=t;return M(e)})):i++;O()===t&&w(e||"all")},getPressedKeyCodes:function(){return g.slice(0)},getAllKeyCodes:function(){const t=[];return Object.keys(p).forEach((e=>{p[e].forEach((e=>{let{key:n,scope:i,mods:r,shortcut:o}=e;t.push({scope:i,shortcut:o,mods:r,keys:n.split("+").map((t=>y(t)))})}))})),t},isPressed:function(t){return"string"==typeof t&&(t=y(t)),-1!==g.indexOf(t)},filter:function(t){const e=t.target||t.srcElement,{tagName:n}=e;let i=!0;const r="INPUT"===n&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(r||"TEXTAREA"===n||"SELECT"===n)&&!e.readOnly)&&(i=!1),i},trigger:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(p).forEach((n=>{p[n].filter((n=>n.scope===e&&n.shortcut===t)).forEach((t=>{t&&t.method&&t.method()}))}))},unbind:S,keyMap:h,modifier:u,modifierMap:d};for(const t in E)Object.prototype.hasOwnProperty.call(E,t)&&(A[t]=E[t]);if("undefined"!=typeof window){const t=window.hotkeys;A.noConflict=e=>(e&&window.hotkeys===A&&(window.hotkeys=t),A),window.hotkeys=A}class P extends i.default.Component{constructor(t){super(t),this.isKeyDown=!1,this.handle=void 0,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.handleKeyUpEvent=this.handleKeyUpEvent.bind(this),this.handle={}}componentDidMount(){var{filter:t,splitKey:e}=this.props;t&&(A.filter=t),A.unbind(this.props.keyName),A(this.props.keyName,{splitKey:e},this.onKeyDown),document&&document.body.addEventListener("keyup",this.handleKeyUpEvent)}componentWillUnmount(){A.unbind(this.props.keyName),this.isKeyDown=!0,this.handle={},document&&document.body.removeEventListener("keyup",this.handleKeyUpEvent)}onKeyUp(t,e){var{onKeyUp:n,disabled:i}=this.props;!i&&n&&n(e.shortcut,t,e)}onKeyDown(t,e){var{onKeyDown:n,allowRepeat:i,disabled:r}=this.props;this.isKeyDown&&!i||(this.isKeyDown=!0,this.handle=e,!r&&n&&n(e.shortcut,t,e))}handleKeyUpEvent(t){this.isKeyDown&&(this.isKeyDown=!1,this.props.keyName&&this.props.keyName.indexOf(this.handle.shortcut)<0||(this.onKeyUp(t,this.handle),this.handle={}))}render(){return this.props.children||null}}P.defaultProps={filter(t){var e=t.target||t.srcElement,n=e.tagName;return!(e.isContentEditable||"INPUT"===n||"SELECT"===n||"TEXTAREA"===n)}},P.propTypes={keyName:r.string,filter:r.func,onKeyDown:r.func,onKeyUp:r.func,disabled:r.bool,splitKey:r.string}},4424:function(t,e,n){"use strict";n.d(e,{D:function(){return i}});const i=`${n(2279).yH}-wave-target`},4578:function(t,e,n){"use strict";n.d(e,{Ay:function(){return Bt}});var i=n(1302),r=n(6942),o=n.n(r),s=n(9853),a=n(8719),l=n(57),c=n(2279),h=n(8119),u=n(829),d=n(6327),f=n(9319);const p=i.createContext(void 0);var g=n(9449),m=n(3567),v=n(1016);const b=(0,i.forwardRef)(((t,e)=>{const{className:n,style:r,children:s,prefixCls:a}=t,l=o()(`${a}-icon`,n);return i.default.createElement("span",{ref:e,className:l,style:r},s)}));var y=b;const w=(0,i.forwardRef)(((t,e)=>{const{prefixCls:n,className:r,style:s,iconClassName:a}=t,l=o()(`${n}-loading-icon`,r);return i.default.createElement(y,{prefixCls:n,className:l,style:s,ref:e},i.default.createElement(m.A,{className:a}))})),O=()=>({width:0,opacity:0,transform:"scale(0)"}),S=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"});var x=t=>{const{prefixCls:e,loading:n,existIcon:r,className:s,style:a,mount:l}=t,c=!!n;return r?i.default.createElement(w,{prefixCls:e,className:s,style:a}):i.default.createElement(v.Ay,{visible:c,motionName:`${e}-loading-icon-motion`,motionAppear:!l,motionEnter:!l,motionLeave:!l,removeOnLeave:!0,onAppearStart:O,onAppearActive:S,onEnterStart:O,onEnterActive:S,onLeaveStart:S,onLeaveActive:O},(({className:t,style:n},r)=>{const l=Object.assign(Object.assign({},a),n);return i.default.createElement(w,{prefixCls:e,className:o()(s,t),style:l,ref:r})}))},k=n(8715),C=n(5905),A=n(3950),M=n(4930),E=n(7358);const P=(t,e)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}});var T=t=>{const{componentCls:e,fontSize:n,lineWidth:i,groupBorderColor:r,colorErrorHover:o}=t;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:t.calc(i).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:n}},P(`${e}-primary`,r),P(`${e}-danger`,o)]}};function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function D(t){var e=function(t){if("object"!=$(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:e+""}function R(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,D(i.key),i)}}function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function N(t){var e=function(t){if("object"!=B(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}function L(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,N(i.key),i)}}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}function I(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(I=function(){return!!t})()}function z(t,e,n){return(e=N(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function V(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var W,F=n(938),q=["b"],X=["v"],K=function(t){return Math.round(Number(t||0))},Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(r,t);var e,n,i=(e=r,n=I(),function(){var t,i=_(e);if(n){var r=_(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return function(t,e){if(e&&("object"==B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function r(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),i.call(this,function(t){if(t instanceof F.Y)return t;if(t&&"object"===B(t)&&"h"in t&&"b"in t){var e=t,n=e.b;return H(H({},V(e,q)),{},{v:n})}return"string"==typeof t&&/hsb/.test(t)?t.replace(/hsb/,"hsv"):t}(t))}return function(t,e){e&&L(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1})}(r,[{key:"toHsbString",value:function(){var t=this.toHsb(),e=K(100*t.s),n=K(100*t.b),i=K(t.h),r=t.a,o="hsb(".concat(i,", ").concat(e,"%, ").concat(n,"%)"),s="hsba(".concat(i,", ").concat(e,"%, ").concat(n,"%, ").concat(r.toFixed(0===r?0:2),")");return 1===r?o:s}},{key:"toHsb",value:function(){var t=this.toHsv(),e=t.v;return H(H({},V(t,X)),{},{b:e,a:this.a})}}]),r}(F.Y);(W="#1677ff")instanceof Z||new Z(W),n(1470);let Y=function(){return t=function t(e){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cleared=!1,e instanceof t)return this.metaColor=e.metaColor.clone(),this.colors=null===(n=e.colors)||void 0===n?void 0:n.map((e=>({color:new t(e.color),percent:e.percent}))),void(this.cleared=e.cleared);const i=Array.isArray(e);i&&e.length?(this.colors=e.map((({color:e,percent:n})=>({color:new t(e),percent:n}))),this.metaColor=new Z(this.colors[0].color.metaColor)):this.metaColor=new Z(i?"":e),(!e||i&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)},(e=[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return t=this.toHexString(),e=this.metaColor.a<1,t?((t,e)=>(null==t?void 0:t.replace(/[^\w/]/g,"").slice(0,e?8:6))||"")(t,e):"";var t,e}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:t}=this;return t?`linear-gradient(90deg, ${t.map((t=>`${t.color.toRgbString()} ${t.percent}%`)).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(t){return!(!t||this.isGradient()!==t.isGradient())&&(this.isGradient()?this.colors.length===t.colors.length&&this.colors.every(((e,n)=>{const i=t.colors[n];return e.percent===i.percent&&e.color.equals(i.color)})):this.toHexString()===t.toHexString())}}])&&R(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();n(2533);var G=n(4925),U=n(5045);const J=t=>{const{paddingInline:e,onlyIconSize:n}=t;return(0,M.oX)(t,{buttonPaddingHorizontal:e,buttonPaddingVertical:0,buttonIconOnlyFontSize:n})},tt=t=>{var e,n,i,r,o,s;const a=null!==(e=t.contentFontSize)&&void 0!==e?e:t.fontSize,l=null!==(n=t.contentFontSizeSM)&&void 0!==n?n:t.fontSize,c=null!==(i=t.contentFontSizeLG)&&void 0!==i?i:t.fontSizeLG,h=null!==(r=t.contentLineHeight)&&void 0!==r?r:(0,G.k)(a),u=null!==(o=t.contentLineHeightSM)&&void 0!==o?o:(0,G.k)(l),d=null!==(s=t.contentLineHeightLG)&&void 0!==s?s:(0,G.k)(c),f=((t,e)=>{const{r:n,g:i,b:r,a:o}=t.toRgb(),s=new Z(t.toRgbString()).onBackground(e).toHsv();return o<=.5?s.v>.5:.299*n+.587*i+.114*r>192})(new Y(t.colorBgSolid),"#fff")?"#000":"#fff",p=A.s.reduce(((e,n)=>Object.assign(Object.assign({},e),{[`${n}ShadowColor`]:`0 ${(0,k.zA)(t.controlOutlineWidth)} 0 ${(0,U.A)(t[`${n}1`],t.colorBgContainer)}`})),{});return Object.assign(Object.assign({},p),{fontWeight:400,defaultShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`,primaryShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`,dangerShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`,primaryColor:t.colorTextLightSolid,dangerColor:t.colorTextLightSolid,borderColorDisabled:t.colorBorder,defaultGhostColor:t.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:t.colorBgContainer,paddingInline:t.paddingContentHorizontal-t.lineWidth,paddingInlineLG:t.paddingContentHorizontal-t.lineWidth,paddingInlineSM:8-t.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:t.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:t.colorText,textTextHoverColor:t.colorText,textTextActiveColor:t.colorText,textHoverBg:t.colorFillTertiary,defaultColor:t.colorText,defaultBg:t.colorBgContainer,defaultBorderColor:t.colorBorder,defaultBorderColorDisabled:t.colorBorder,defaultHoverBg:t.colorBgContainer,defaultHoverColor:t.colorPrimaryHover,defaultHoverBorderColor:t.colorPrimaryHover,defaultActiveBg:t.colorBgContainer,defaultActiveColor:t.colorPrimaryActive,defaultActiveBorderColor:t.colorPrimaryActive,solidTextColor:f,contentFontSize:a,contentFontSizeSM:l,contentFontSizeLG:c,contentLineHeight:h,contentLineHeightSM:u,contentLineHeightLG:d,paddingBlock:Math.max((t.controlHeight-a*h)/2-t.lineWidth,0),paddingBlockSM:Math.max((t.controlHeightSM-l*u)/2-t.lineWidth,0),paddingBlockLG:Math.max((t.controlHeightLG-c*d)/2-t.lineWidth,0)})},et=t=>{const{componentCls:e,iconCls:n,fontWeight:i,opacityLoading:r,motionDurationSlow:o,motionEaseInOut:s,marginXS:a,calc:l}=t;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:t.marginXS,alignItems:"center",justifyContent:"center",fontWeight:i,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${(0,k.zA)(t.lineWidth)} ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:t.colorText,"&:disabled > *":{pointerEvents:"none"},[`${e}-icon > svg`]:(0,C.Nk)(),"> a":{color:"currentColor"},"&:not(:disabled)":(0,C.K8)(t),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${n})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${e}-icon-only`]:{paddingInline:0,[`&${e}-compact-item`]:{flex:"none"},[`&${e}-round`]:{width:"auto"}},[`&${e}-loading`]:{opacity:r,cursor:"default"},[`${e}-loading-icon`]:{transition:["width","opacity","margin"].map((t=>`${t} ${o} ${s}`)).join(",")},[`&:not(${e}-icon-end)`]:{[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:l(a).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:l(a).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:l(a).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:l(a).mul(-1).equal()}}}}}},nt=(t,e,n)=>({[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":e,"&:active":n}}),it=t=>({minWidth:t.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),rt=t=>({borderRadius:t.controlHeight,paddingInlineStart:t.calc(t.controlHeight).div(2).equal(),paddingInlineEnd:t.calc(t.controlHeight).div(2).equal()}),ot=t=>({cursor:"not-allowed",borderColor:t.borderColorDisabled,color:t.colorTextDisabled,background:t.colorBgContainerDisabled,boxShadow:"none"}),st=(t,e,n,i,r,o,s,a)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:n||void 0,background:e,borderColor:i||void 0,boxShadow:"none"},nt(t,Object.assign({background:e},s),Object.assign({background:e},a))),{"&:disabled":{cursor:"not-allowed",color:r||void 0,borderColor:o||void 0}})}),at=t=>({[`&:disabled, &${t.componentCls}-disabled`]:Object.assign({},ot(t))}),lt=t=>({[`&:disabled, &${t.componentCls}-disabled`]:{cursor:"not-allowed",color:t.colorTextDisabled}}),ct=(t,e,n,i)=>{const r=i&&["link","text"].includes(i)?lt:at;return Object.assign(Object.assign({},r(t)),nt(t.componentCls,e,n))},ht=(t,e,n,i,r)=>({[`&${t.componentCls}-variant-solid`]:Object.assign({color:e,background:n},ct(t,i,r))}),ut=(t,e,n,i,r)=>({[`&${t.componentCls}-variant-outlined, &${t.componentCls}-variant-dashed`]:Object.assign({borderColor:e,background:n},ct(t,i,r))}),dt=t=>({[`&${t.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),ft=(t,e,n,i)=>({[`&${t.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:e},ct(t,n,i))}),pt=(t,e,n,i,r)=>({[`&${t.componentCls}-variant-${n}`]:Object.assign({color:e,boxShadow:"none"},ct(t,i,r,n))}),gt=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.defaultColor,boxShadow:t.defaultShadow},ht(t,t.solidTextColor,t.colorBgSolid,{color:t.solidTextColor,background:t.colorBgSolidHover},{color:t.solidTextColor,background:t.colorBgSolidActive})),dt(t)),ft(t,t.colorFillTertiary,{background:t.colorFillSecondary},{background:t.colorFill})),st(t.componentCls,t.ghostBg,t.defaultGhostColor,t.defaultGhostBorderColor,t.colorTextDisabled,t.colorBorder)),pt(t,t.textTextColor,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),mt=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorPrimary,boxShadow:t.primaryShadow},ut(t,t.colorPrimary,t.colorBgContainer,{color:t.colorPrimaryTextHover,borderColor:t.colorPrimaryHover,background:t.colorBgContainer},{color:t.colorPrimaryTextActive,borderColor:t.colorPrimaryActive,background:t.colorBgContainer})),dt(t)),ft(t,t.colorPrimaryBg,{background:t.colorPrimaryBgHover},{background:t.colorPrimaryBorder})),pt(t,t.colorPrimaryText,"text",{color:t.colorPrimaryTextHover,background:t.colorPrimaryBg},{color:t.colorPrimaryTextActive,background:t.colorPrimaryBorder})),pt(t,t.colorPrimaryText,"link",{color:t.colorPrimaryTextHover,background:t.linkHoverBg},{color:t.colorPrimaryTextActive})),st(t.componentCls,t.ghostBg,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),vt=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorError,boxShadow:t.dangerShadow},ht(t,t.dangerColor,t.colorError,{background:t.colorErrorHover},{background:t.colorErrorActive})),ut(t,t.colorError,t.colorBgContainer,{color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),dt(t)),ft(t,t.colorErrorBg,{background:t.colorErrorBgFilledHover},{background:t.colorErrorBgActive})),pt(t,t.colorError,"text",{color:t.colorErrorHover,background:t.colorErrorBg},{color:t.colorErrorHover,background:t.colorErrorBgActive})),pt(t,t.colorError,"link",{color:t.colorErrorHover},{color:t.colorErrorActive})),st(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),bt=t=>Object.assign(Object.assign({},pt(t,t.colorLink,"link",{color:t.colorLinkHover},{color:t.colorLinkActive})),st(t.componentCls,t.ghostBg,t.colorInfo,t.colorInfo,t.colorTextDisabled,t.colorBorder,{color:t.colorInfoHover,borderColor:t.colorInfoHover},{color:t.colorInfoActive,borderColor:t.colorInfoActive})),yt=t=>{const{componentCls:e}=t;return Object.assign({[`${e}-color-default`]:gt(t),[`${e}-color-primary`]:mt(t),[`${e}-color-dangerous`]:vt(t),[`${e}-color-link`]:bt(t)},(t=>{const{componentCls:e}=t;return A.s.reduce(((n,i)=>{const r=t[`${i}6`],o=t[`${i}1`],s=t[`${i}5`],a=t[`${i}2`],l=t[`${i}3`],c=t[`${i}7`];return Object.assign(Object.assign({},n),{[`&${e}-color-${i}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:r,boxShadow:t[`${i}ShadowColor`]},ht(t,t.colorTextLightSolid,r,{background:s},{background:c})),ut(t,r,t.colorBgContainer,{color:s,borderColor:s,background:t.colorBgContainer},{color:c,borderColor:c,background:t.colorBgContainer})),dt(t)),ft(t,o,{background:a},{background:l})),pt(t,r,"link",{color:s},{color:c})),pt(t,r,"text",{color:s,background:o},{color:c,background:l}))})}),{})})(t))},wt=t=>Object.assign(Object.assign(Object.assign(Object.assign({},ut(t,t.defaultBorderColor,t.defaultBg,{color:t.defaultHoverColor,borderColor:t.defaultHoverBorderColor,background:t.defaultHoverBg},{color:t.defaultActiveColor,borderColor:t.defaultActiveBorderColor,background:t.defaultActiveBg})),pt(t,t.textTextColor,"text",{color:t.textTextHoverColor,background:t.textHoverBg},{color:t.textTextActiveColor,background:t.colorBgTextActive})),ht(t,t.primaryColor,t.colorPrimary,{background:t.colorPrimaryHover,color:t.primaryColor},{background:t.colorPrimaryActive,color:t.primaryColor})),pt(t,t.colorLink,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),Ot=(t,e="")=>{const{componentCls:n,controlHeight:i,fontSize:r,borderRadius:o,buttonPaddingHorizontal:s,iconCls:a,buttonPaddingVertical:l,buttonIconOnlyFontSize:c}=t;return[{[e]:{fontSize:r,height:i,padding:`${(0,k.zA)(l)} ${(0,k.zA)(s)}`,borderRadius:o,[`&${n}-icon-only`]:{width:i,[a]:{fontSize:c}}}},{[`${n}${n}-circle${e}`]:it(t)},{[`${n}${n}-round${e}`]:rt(t)}]},St=t=>{const e=(0,M.oX)(t,{fontSize:t.contentFontSize});return Ot(e,t.componentCls)},xt=t=>{const e=(0,M.oX)(t,{controlHeight:t.controlHeightSM,fontSize:t.contentFontSizeSM,padding:t.paddingXS,buttonPaddingHorizontal:t.paddingInlineSM,buttonPaddingVertical:0,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.onlyIconSizeSM});return Ot(e,`${t.componentCls}-sm`)},kt=t=>{const e=(0,M.oX)(t,{controlHeight:t.controlHeightLG,fontSize:t.contentFontSizeLG,buttonPaddingHorizontal:t.paddingInlineLG,buttonPaddingVertical:0,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.onlyIconSizeLG});return Ot(e,`${t.componentCls}-lg`)},Ct=t=>{const{componentCls:e}=t;return{[e]:{[`&${e}-block`]:{width:"100%"}}}};var At=(0,E.OF)("Button",(t=>{const e=J(t);return[et(e),St(e),xt(e),kt(e),Ct(e),yt(e),wt(e),T(e)]}),tt,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}}),Mt=n(5974);function Et(t,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:t.calc(t.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function Pt(t){const e=`${t.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},Et(t,e)),(n=t.componentCls,i=e,{[`&-item:not(${i}-first-item):not(${i}-last-item)`]:{borderRadius:0},[`&-item${i}-first-item:not(${i}-last-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${i}-last-item:not(${i}-first-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}))};var n,i}const Tt=t=>{const{componentCls:e,colorPrimaryHover:n,lineWidth:i,calc:r}=t,o=r(i).mul(-1).equal(),s=t=>{const r=`${e}-compact${t?"-vertical":""}-item${e}-primary:not([disabled])`;return{[`${r} + ${r}::before`]:{position:"absolute",top:t?o:0,insetInlineStart:t?0:o,backgroundColor:n,content:'""',width:t?"100%":i,height:t?i:"100%"}}};return Object.assign(Object.assign({},s()),s(!0))};var $t=(0,E.bf)(["Button","compact"],(t=>{const e=J(t);return[(0,Mt.G)(e),Pt(e),Tt(e)]}),tt);const Dt={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},Rt=i.default.forwardRef(((t,e)=>{var n,r;const{loading:f=!1,prefixCls:m,color:v,variant:b,type:w,danger:O=!1,shape:S="default",size:k,styles:C,disabled:A,className:M,rootClassName:E,children:P,icon:T,iconPosition:$="start",ghost:D=!1,block:R=!1,htmlType:B="button",classNames:N,style:L={},autoInsertSpace:j,autoFocus:_}=t,I=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),z=w||"default",{button:Q}=i.default.useContext(c.QO),[H,V]=(0,i.useMemo)((()=>{if(v&&b)return[v,b];if(w||O){const t=Dt[z]||[];return O?["danger",t[1]]:t}return(null==Q?void 0:Q.color)&&(null==Q?void 0:Q.variant)?[Q.color,Q.variant]:["default","outlined"]}),[w,v,b,O,null==Q?void 0:Q.variant,null==Q?void 0:Q.color]),W="danger"===H?"dangerous":H,{getPrefixCls:F,direction:q,autoInsertSpace:X,className:K,style:Z,classNames:Y,styles:G}=(0,c.TP)("button"),U=null===(n=null!=j?j:X)||void 0===n||n,J=F("btn",m),[tt,et,nt]=At(J),it=(0,i.useContext)(h.A),rt=null!=A?A:it,ot=(0,i.useContext)(p),st=(0,i.useMemo)((()=>function(t){if("object"==typeof t&&t){let e=null==t?void 0:t.delay;return e=Number.isNaN(e)||"number"!=typeof e?0:e,{loading:e<=0,delay:e}}return{loading:!!t,delay:0}}(f)),[f]),[at,lt]=(0,i.useState)(st.loading),[ct,ht]=(0,i.useState)(!1),ut=(0,i.useRef)(null),dt=(0,a.xK)(e,ut),ft=1===i.Children.count(P)&&!T&&!(0,g.u1)(V),pt=(0,i.useRef)(!0);i.default.useEffect((()=>(pt.current=!1,()=>{pt.current=!0})),[]),(0,i.useEffect)((()=>{let t=null;return st.delay>0?t=setTimeout((()=>{t=null,lt(!0)}),st.delay):lt(st.loading),function(){t&&(clearTimeout(t),t=null)}}),[st]),(0,i.useEffect)((()=>{if(!ut.current||!U)return;const t=ut.current.textContent||"";ft&&(0,g.Ap)(t)?ct||ht(!0):ct&&ht(!1)})),(0,i.useEffect)((()=>{_&&ut.current&&ut.current.focus()}),[]);const gt=i.default.useCallback((e=>{var n;at||rt?e.preventDefault():null===(n=t.onClick)||void 0===n||n.call(t,e)}),[t.onClick,at,rt]),{compactSize:mt,compactItemClassnames:vt}=(0,d.RQ)(J,q),bt=(0,u.A)((t=>{var e,n;return null!==(n=null!==(e=null!=k?k:mt)&&void 0!==e?e:ot)&&void 0!==n?n:t})),yt=bt&&null!==(r={large:"lg",small:"sm",middle:void 0}[bt])&&void 0!==r?r:"",wt=at?"loading":T,Ot=(0,s.A)(I,["navigate"]),St=o()(J,et,nt,{[`${J}-${S}`]:"default"!==S&&S,[`${J}-${z}`]:z,[`${J}-dangerous`]:O,[`${J}-color-${W}`]:W,[`${J}-variant-${V}`]:V,[`${J}-${yt}`]:yt,[`${J}-icon-only`]:!P&&0!==P&&!!wt,[`${J}-background-ghost`]:D&&!(0,g.u1)(V),[`${J}-loading`]:at,[`${J}-two-chinese-chars`]:ct&&U&&!at,[`${J}-block`]:R,[`${J}-rtl`]:"rtl"===q,[`${J}-icon-end`]:"end"===$},vt,M,E,K),xt=Object.assign(Object.assign({},Z),L),kt=o()(null==N?void 0:N.icon,Y.icon),Ct=Object.assign(Object.assign({},(null==C?void 0:C.icon)||{}),G.icon||{}),Mt=T&&!at?i.default.createElement(y,{prefixCls:J,className:kt,style:Ct},T):f&&"object"==typeof f&&f.icon?i.default.createElement(y,{prefixCls:J,className:kt,style:Ct},f.icon):i.default.createElement(x,{existIcon:!!T,prefixCls:J,loading:at,mount:pt.current}),Et=P||0===P?(0,g.uR)(P,ft&&U):null;if(void 0!==Ot.href)return tt(i.default.createElement("a",Object.assign({},Ot,{className:o()(St,{[`${J}-disabled`]:rt}),href:rt?void 0:Ot.href,style:xt,onClick:gt,ref:dt,tabIndex:rt?-1:0}),Mt,Et));let Pt=i.default.createElement("button",Object.assign({},I,{type:B,className:St,style:xt,onClick:gt,disabled:rt,ref:dt}),Mt,Et,vt&&i.default.createElement($t,{prefixCls:J}));return(0,g.u1)(V)||(Pt=i.default.createElement(l.A,{component:"Button",disabled:at},Pt)),tt(Pt)}));Rt.Group=t=>{const{getPrefixCls:e,direction:n}=i.useContext(c.QO),{prefixCls:r,size:s,className:a}=t,l=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","size","className"]),h=e("btn-group",r),[,,u]=(0,f.Ay)(),d=i.useMemo((()=>{switch(s){case"large":return"lg";case"small":return"sm";default:return""}}),[s]),g=o()(h,{[`${h}-${d}`]:d,[`${h}-rtl`]:"rtl"===n},a,u);return i.createElement(p.Provider,{value:s},i.createElement("div",Object.assign({},l,{className:g})))},Rt.__ANT_BUTTON=!0;var Bt=Rt},4607:function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}n.d(e,{A:function(){return i}})},4684:function(t,e,n){"use strict";n.d(e,{E:function(){return g},T:function(){return h},c:function(){return f},h:function(){return u},w:function(){return c}});var i=n(1302),r=n(5655),o=n(41),s=n(3174),a=n(1287),l=i.createContext("undefined"!=typeof HTMLElement?(0,r.A)({key:"css"}):null),c=(l.Provider,function(t){return(0,i.forwardRef)((function(e,n){var r=(0,i.useContext)(l);return t(e,r,n)}))}),h=i.createContext({}),u={}.hasOwnProperty,d="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f=function(t,e){var n={};for(var i in e)u.call(e,i)&&(n[i]=e[i]);return n[d]=t,n},p=function(t){var e=t.cache,n=t.serialized,i=t.isStringTag;return(0,o.SF)(e,n,i),(0,a.s)((function(){return(0,o.sk)(e,n,i)})),null},g=c((function(t,e,n){var r=t.css;"string"==typeof r&&void 0!==e.registered[r]&&(r=e.registered[r]);var a=t[d],l=[r],c="";"string"==typeof t.className?c=(0,o.Rk)(e.registered,l,t.className):null!=t.className&&(c=t.className+" ");var f=(0,s.J)(l,void 0,i.useContext(h));c+=e.key+"-"+f.name;var g={};for(var m in t)u.call(t,m)&&"css"!==m&&m!==d&&(g[m]=t[m]);return g.className=c,n&&(g.ref=n),i.createElement(i.Fragment,null,i.createElement(p,{cache:e,serialized:f,isStringTag:"string"==typeof a}),i.createElement(a,g))}))},4808:function(t,e,n){"use strict";function i(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}n.d(e,{A:function(){return i}})},4848:function(t,e,n){"use strict";t.exports=n(1020)},4925:function(t,e,n){"use strict";function i(t){return(t+8)/t}function r(t){const e=Array.from({length:10}).map(((e,n)=>{const i=n-1,r=t*Math.pow(Math.E,i/5),o=n>1?Math.floor(r):Math.ceil(r);return 2*Math.floor(o/2)}));return e[1]=t,e.map((t=>({size:t,lineHeight:i(t)})))}n.d(e,{A:function(){return r},k:function(){return i}})},4930:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}function a(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,{L_:function(){return j},oX:function(){return $}});var h=n(1302),u=n(8715);function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,s(i.key),i)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y=function(){return!!t})()}function w(t){var e=y();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}(this,n)}}var O=p((function t(){d(this,t)})),S="CALC_UNIT",x=new RegExp(S,"g");function k(t){return"number"==typeof t?"".concat(t).concat(S):t}var C=function(t){v(n,t);var e=w(n);function n(t,r){var o;d(this,n),a(g(o=e.call(this)),"result",""),a(g(o),"unitlessCssVar",void 0),a(g(o),"lowPriority",void 0);var s=i(t);return o.unitlessCssVar=r,t instanceof n?o.result="(".concat(t.result,")"):"number"===s?o.result=k(t):"string"===s&&(o.result=t),o}return p(n,[{key:"add",value:function(t){return t instanceof n?this.result="".concat(this.result," + ").concat(t.getResult()):"number"!=typeof t&&"string"!=typeof t||(this.result="".concat(this.result," + ").concat(k(t))),this.lowPriority=!0,this}},{key:"sub",value:function(t){return t instanceof n?this.result="".concat(this.result," - ").concat(t.getResult()):"number"!=typeof t&&"string"!=typeof t||(this.result="".concat(this.result," - ").concat(k(t))),this.lowPriority=!0,this}},{key:"mul",value:function(t){return this.lowPriority&&(this.result="(".concat(this.result,")")),t instanceof n?this.result="".concat(this.result," * ").concat(t.getResult(!0)):"number"!=typeof t&&"string"!=typeof t||(this.result="".concat(this.result," * ").concat(t)),this.lowPriority=!1,this}},{key:"div",value:function(t){return this.lowPriority&&(this.result="(".concat(this.result,")")),t instanceof n?this.result="".concat(this.result," / ").concat(t.getResult(!0)):"number"!=typeof t&&"string"!=typeof t||(this.result="".concat(this.result," / ").concat(t)),this.lowPriority=!1,this}},{key:"getResult",value:function(t){return this.lowPriority||t?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(t){var e=this,n=(t||{}).unit,i=!0;return"boolean"==typeof n?i=n:Array.from(this.unitlessCssVar).some((function(t){return e.result.includes(t)}))&&(i=!1),this.result=this.result.replace(x,i?"px":""),void 0!==this.lowPriority?"calc(".concat(this.result,")"):this.result}}]),n}(O),A=function(t){v(n,t);var e=w(n);function n(t){var i;return d(this,n),a(g(i=e.call(this)),"result",0),t instanceof n?i.result=t.result:"number"==typeof t&&(i.result=t),i}return p(n,[{key:"add",value:function(t){return t instanceof n?this.result+=t.result:"number"==typeof t&&(this.result+=t),this}},{key:"sub",value:function(t){return t instanceof n?this.result-=t.result:"number"==typeof t&&(this.result-=t),this}},{key:"mul",value:function(t){return t instanceof n?this.result*=t.result:"number"==typeof t&&(this.result*=t),this}},{key:"div",value:function(t){return t instanceof n?this.result/=t.result:"number"==typeof t&&(this.result/=t),this}},{key:"equal",value:function(){return this.result}}]),n}(O),M=function(t,e){return"".concat([e,t.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};n(1470);var E=function(t,e,n,i){var r=c({},e[t]);null!=i&&i.deprecatedTokens&&i.deprecatedTokens.forEach((function(t){var e,n=o(t,2),i=n[0],s=n[1];(null!=r&&r[i]||null!=r&&r[s])&&(null!==(e=r[s])&&void 0!==e||(r[s]=null==r?void 0:r[i]))}));var s=c(c({},n),r);return Object.keys(s).forEach((function(t){s[t]===e[t]&&delete s[t]})),s},P="undefined"!=typeof CSSINJS_STATISTIC,T=!0;function $(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!P)return Object.assign.apply(Object,[{}].concat(e));T=!1;var r={};return e.forEach((function(t){"object"===i(t)&&Object.keys(t).forEach((function(e){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){return t[e]}})}))})),T=!0,r}var D={};function R(){}var B=function(t,e,n){var i;return"function"==typeof n?n($(e,null!==(i=e[t])&&void 0!==i?i:{})):null!=n?n:{}},N=new(function(){function t(){d(this,t),a(this,"map",new Map),a(this,"objectIDMap",new WeakMap),a(this,"nextID",0),a(this,"lastAccessBeat",new Map),a(this,"accessBeat",0)}return p(t,[{key:"set",value:function(t,e){this.clear();var n=this.getCompositeKey(t);this.map.set(n,e),this.lastAccessBeat.set(n,Date.now())}},{key:"get",value:function(t){var e=this.getCompositeKey(t),n=this.map.get(e);return this.lastAccessBeat.set(e,Date.now()),this.accessBeat+=1,n}},{key:"getCompositeKey",value:function(t){var e=this;return t.map((function(t){return t&&"object"===i(t)?"obj_".concat(e.getObjectID(t)):"".concat(i(t),"_").concat(t)})).join("|")}},{key:"getObjectID",value:function(t){if(this.objectIDMap.has(t))return this.objectIDMap.get(t);var e=this.nextID;return this.objectIDMap.set(t,e),this.nextID+=1,e}},{key:"clear",value:function(){var t=this;if(this.accessBeat>1e4){var e=Date.now();this.lastAccessBeat.forEach((function(n,i){e-n>6e5&&(t.map.delete(i),t.lastAccessBeat.delete(i))})),this.accessBeat=0}}}]),t}()),L=function(){return{}},j=function(t){var e=t.useCSP,n=void 0===e?L:e,r=t.useToken,s=t.usePrefix,l=t.getResetStyles,d=t.getCommonStyle,f=t.getCompUnitless;function p(e,a,f){var p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},g=Array.isArray(e)?e:[e,e],m=o(g,1)[0],v=g.join("-"),b=t.layer||{name:"antd"};return function(t){var e,o,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,y=r(),w=y.theme,O=y.realToken,S=y.hashId,x=y.token,k=y.cssVar,L=s(),j=L.rootPrefixCls,_=L.iconPrefixCls,I=n(),z=k?"css":"js",Q=(e=function(){var t=new Set;return k&&Object.keys(p.unitless||{}).forEach((function(e){t.add((0,u.Ki)(e,k.prefix)),t.add((0,u.Ki)(e,M(m,k.prefix)))})),function(t,e){var n="css"===t?C:A;return function(t){return new n(t,e)}}(z,t)},o=[z,m,null==k?void 0:k.prefix],h.default.useMemo((function(){var t=N.get(o);if(t)return t;var n=e();return N.set(o,n),n}),o)),H=function(t){return"js"===t?{max:Math.max,min:Math.min}:{max:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"max(".concat(e.map((function(t){return(0,u.zA)(t)})).join(","),")")},min:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"min(".concat(e.map((function(t){return(0,u.zA)(t)})).join(","),")")}}}(z),V=H.max,W=H.min,F={theme:w,token:x,hashId:S,nonce:function(){return I.nonce},clientOnly:p.clientOnly,layer:b,order:p.order||-999};return"function"==typeof l&&(0,u.IV)(c(c({},F),{},{clientOnly:!1,path:["Shared",j]}),(function(){return l(x,{prefix:{rootPrefixCls:j,iconPrefixCls:_},csp:I})})),[(0,u.IV)(c(c({},F),{},{path:[v,t,_]}),(function(){if(!1===p.injectStyle)return[];var e=function(t){var e,n=t,i=R;return P&&"undefined"!=typeof Proxy&&(e=new Set,n=new Proxy(t,{get:function(t,n){var i;return T&&(null===(i=e)||void 0===i||i.add(n)),t[n]}}),i=function(t,n){var i;D[t]={global:Array.from(e),component:c(c({},null===(i=D[t])||void 0===i?void 0:i.component),n)}}),{token:n,keys:e,flush:i}}(x),n=e.token,r=e.flush,o=B(m,O,f),s=".".concat(t),l=E(m,O,o,{deprecatedTokens:p.deprecatedTokens});k&&o&&"object"===i(o)&&Object.keys(o).forEach((function(t){o[t]="var(".concat((0,u.Ki)(t,M(m,k.prefix)),")")}));var h=$(n,{componentCls:s,prefixCls:t,iconCls:".".concat(_),antCls:".".concat(j),calc:Q,max:V,min:W},k?o:l),v=a(h,{hashId:S,prefixCls:t,rootPrefixCls:j,iconPrefixCls:_});r(m,l);var b="function"==typeof d?d(h,t,g,p.resetFont):null;return[!1===p.resetStyle?null:b,v]})),S]}}return{genStyleHooks:function(t,e,n,i){var s=Array.isArray(t)?t[0]:t;function l(t){return"".concat(String(s)).concat(t.slice(0,1).toUpperCase()).concat(t.slice(1))}var d=(null==i?void 0:i.unitless)||{},g=c(c({},"function"==typeof f?f(t):{}),{},a({},l("zIndexPopup"),!0));Object.keys(d).forEach((function(t){g[l(t)]=d[t]}));var m=c(c({},i),{},{unitless:g,prefixToken:l}),v=p(t,e,n,m),b=function(t,e,n){var i=n.unitless,o=n.injectStyle,s=void 0===o||o,a=n.prefixToken,l=n.ignore,c=function(o){var s=o.rootCls,c=o.cssVar,h=void 0===c?{}:c,d=r().realToken;return(0,u.RC)({path:[t],prefix:h.prefix,key:h.key,unitless:i,ignore:l,token:d,scope:s},(function(){var i=B(t,d,e),r=E(t,d,i,{deprecatedTokens:null==n?void 0:n.deprecatedTokens});return Object.keys(i).forEach((function(t){r[a(t)]=r[t],delete r[t]})),r})),null};return function(e){var n=r().cssVar;return[function(i){return s&&n?h.default.createElement(h.default.Fragment,null,h.default.createElement(c,{rootCls:e,cssVar:n,component:t}),i):i},null==n?void 0:n.key]}}(s,n,m);return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=o(v(t,e),2)[1],i=o(b(e),2);return[i[0],n,i[1]]}},genSubStyleComponent:function(t,e,n){var i=p(t,e,n,c({resetStyle:!1,order:-998},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}));return function(t){var e=t.prefixCls,n=t.rootCls;return i(e,void 0===n?e:n),null}},genComponentStyleHook:p}}},4946:function(t){"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__4946__},5045:function(t,e,n){"use strict";var i=n(938);function r(t){return t>=0&&t<=255}e.A=function(t,e){const{r:n,g:o,b:s,a:a}=new i.Y(t).toRgb();if(a<1)return t;const{r:l,g:c,b:h}=new i.Y(e).toRgb();for(let t=.01;t<=1;t+=.01){const e=Math.round((n-l*(1-t))/t),a=Math.round((o-c*(1-t))/t),u=Math.round((s-h*(1-t))/t);if(r(e)&&r(a)&&r(u))return new i.Y({r:e,g:a,b:u,a:Math.round(100*t)/100}).toRgbString()}return new i.Y({r:n,g:o,b:s,a:1}).toRgbString()}},5056:function(t,e,n){"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},5072:function(t){"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},s=[],a=0;a<t.length;a++){var l=t[a],c=i.base?l[0]+i.base:l[0],h=o[c]||0,u="".concat(c," ").concat(h);o[c]=h+1;var d=n(u),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var p=r(f,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:p,references:1})}s.push(u)}return s}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var l=i(t,r),c=0;c<o.length;c++){var h=n(o[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=l}}},5089:function(t,e,n){"use strict";n.d(e,{BD:function(){return m},m6:function(){return g}});var i=n(7826),r=n(998),o=n(4808),s="data-rc-order",a="data-rc-priority",l="rc-util-key",c=new Map;function h(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return t?t.startsWith("data-")?t:"data-".concat(t):l}function u(t){return t.attachTo?t.attachTo:document.querySelector("head")||document.body}function d(t){return Array.from((c.get(t)||t).children).filter((function(t){return"STYLE"===t.tagName}))}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.A)())return null;var n=e.csp,i=e.prepend,o=e.priority,l=void 0===o?0:o,c=function(t){return"queue"===t?"prependQueue":t?"prepend":"append"}(i),h="prependQueue"===c,f=document.createElement("style");f.setAttribute(s,c),h&&l&&f.setAttribute(a,"".concat(l)),null!=n&&n.nonce&&(f.nonce=null==n?void 0:n.nonce),f.innerHTML=t;var p=u(e),g=p.firstChild;if(i){if(h){var m=(e.styles||d(p)).filter((function(t){if(!["prepend","prependQueue"].includes(t.getAttribute(s)))return!1;var e=Number(t.getAttribute(a)||0);return l>=e}));if(m.length)return p.insertBefore(f,m[m.length-1].nextSibling),f}p.insertBefore(f,g)}else p.appendChild(f);return f}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u(e);return(e.styles||d(n)).find((function(n){return n.getAttribute(h(e))===t}))}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p(t,e);n&&u(e).removeChild(n)}function m(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=u(n),s=d(r),a=(0,i.A)((0,i.A)({},n),{},{styles:s});!function(t,e){var n=c.get(t);if(!n||!(0,o.A)(document,n)){var i=f("",e),r=i.parentNode;c.set(t,r),t.removeChild(i)}}(r,a);var l,g,m,v=p(e,a);if(v)return null!==(l=a.csp)&&void 0!==l&&l.nonce&&v.nonce!==(null===(g=a.csp)||void 0===g?void 0:g.nonce)&&(v.nonce=null===(m=a.csp)||void 0===m?void 0:m.nonce),v.innerHTML!==t&&(v.innerHTML=t),v;var b=f(t,a);return b.setAttribute(h(a),e),b}},5142:function(t,e,n){"use strict";n.d(e,{A:function(){return s}});var i=n(5723),r=n(2322),o=n(7304);function s(t,e){return(0,i.A)(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||(0,r.A)(t,e)||(0,o.A)()}},5265:function(t,e,n){"use strict";n.d(e,{A:function(){return f}});var i=n(8715),r=n(5748),o=n(723),s=n(938),a=n(4925);const l=(t,e)=>new s.Y(t).setA(e).toRgbString(),c=(t,e)=>new s.Y(t).darken(e).toHexString(),h=t=>{const e=(0,r.cM)(t);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},u=(t,e)=>{const n=t||"#fff",i=e||"#000";return{colorBgBase:n,colorTextBase:i,colorText:l(i,.88),colorTextSecondary:l(i,.65),colorTextTertiary:l(i,.45),colorTextQuaternary:l(i,.25),colorFill:l(i,.15),colorFillSecondary:l(i,.06),colorFillTertiary:l(i,.04),colorFillQuaternary:l(i,.02),colorBgSolid:l(i,1),colorBgSolidHover:l(i,.75),colorBgSolidActive:l(i,.95),colorBgLayout:c(n,4),colorBgContainer:c(n,0),colorBgElevated:c(n,0),colorBgSpotlight:l(i,.85),colorBgBlur:"transparent",colorBorder:c(n,15),colorBorderSecondary:c(n,6)}},d=(0,i.an)((function(t){r.uy.pink=r.uy.magenta,r.UA.pink=r.UA.magenta;const e=Object.keys(o.r).map((e=>{const n=t[e]===r.uy[e]?r.UA[e]:(0,r.cM)(t[e]);return Array.from({length:10},(()=>1)).reduce(((t,i,r)=>(t[`${e}-${r+1}`]=n[r],t[`${e}${r+1}`]=n[r],t)),{})})).reduce(((t,e)=>Object.assign(Object.assign({},t),e)),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),e),function(t,{generateColorPalettes:e,generateNeutralColorPalettes:n}){const{colorSuccess:i,colorWarning:r,colorError:o,colorInfo:a,colorPrimary:l,colorBgBase:c,colorTextBase:h}=t,u=e(l),d=e(i),f=e(r),p=e(o),g=e(a),m=n(c,h),v=e(t.colorLink||t.colorInfo),b=new s.Y(p[1]).mix(new s.Y(p[3]),50).toHexString();return Object.assign(Object.assign({},m),{colorPrimaryBg:u[1],colorPrimaryBgHover:u[2],colorPrimaryBorder:u[3],colorPrimaryBorderHover:u[4],colorPrimaryHover:u[5],colorPrimary:u[6],colorPrimaryActive:u[7],colorPrimaryTextHover:u[8],colorPrimaryText:u[9],colorPrimaryTextActive:u[10],colorSuccessBg:d[1],colorSuccessBgHover:d[2],colorSuccessBorder:d[3],colorSuccessBorderHover:d[4],colorSuccessHover:d[4],colorSuccess:d[6],colorSuccessActive:d[7],colorSuccessTextHover:d[8],colorSuccessText:d[9],colorSuccessTextActive:d[10],colorErrorBg:p[1],colorErrorBgHover:p[2],colorErrorBgFilledHover:b,colorErrorBgActive:p[3],colorErrorBorder:p[3],colorErrorBorderHover:p[4],colorErrorHover:p[5],colorError:p[6],colorErrorActive:p[7],colorErrorTextHover:p[8],colorErrorText:p[9],colorErrorTextActive:p[10],colorWarningBg:f[1],colorWarningBgHover:f[2],colorWarningBorder:f[3],colorWarningBorderHover:f[4],colorWarningHover:f[4],colorWarning:f[6],colorWarningActive:f[7],colorWarningTextHover:f[8],colorWarningText:f[9],colorWarningTextActive:f[10],colorInfoBg:g[1],colorInfoBgHover:g[2],colorInfoBorder:g[3],colorInfoBorderHover:g[4],colorInfoHover:g[4],colorInfo:g[6],colorInfoActive:g[7],colorInfoTextHover:g[8],colorInfoText:g[9],colorInfoTextActive:g[10],colorLinkHover:v[4],colorLink:v[6],colorLinkActive:v[7],colorBgMask:new s.Y("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}(t,{generateColorPalettes:h,generateNeutralColorPalettes:u})),(t=>{const e=(0,a.A)(t),n=e.map((t=>t.size)),i=e.map((t=>t.lineHeight)),r=n[1],o=n[0],s=n[2],l=i[1],c=i[0],h=i[2];return{fontSizeSM:o,fontSize:r,fontSizeLG:s,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:l,lineHeightLG:h,lineHeightSM:c,fontHeight:Math.round(l*r),fontHeightLG:Math.round(h*s),fontHeightSM:Math.round(c*o),lineHeightHeading1:i[6],lineHeightHeading2:i[5],lineHeightHeading3:i[4],lineHeightHeading4:i[3],lineHeightHeading5:i[2]}})(t.fontSize)),function(t){const{sizeUnit:e,sizeStep:n}=t;return{sizeXXL:e*(n+8),sizeXL:e*(n+4),sizeLG:e*(n+2),sizeMD:e*(n+1),sizeMS:e*n,size:e*n,sizeSM:e*(n-1),sizeXS:e*(n-2),sizeXXS:e*(n-3)}}(t)),(t=>{const{controlHeight:e}=t;return{controlHeightSM:.75*e,controlHeightXS:.5*e,controlHeightLG:1.25*e}})(t)),function(t){const{motionUnit:e,motionBase:n,borderRadius:i,lineWidth:r}=t;return Object.assign({motionDurationFast:`${(n+e).toFixed(1)}s`,motionDurationMid:`${(n+2*e).toFixed(1)}s`,motionDurationSlow:`${(n+3*e).toFixed(1)}s`,lineWidthBold:r+1},(t=>{let e=t,n=t,i=t,r=t;return t<6&&t>=5?e=t+1:t<16&&t>=6?e=t+2:t>=16&&(e=16),t<7&&t>=5?n=4:t<8&&t>=7?n=5:t<14&&t>=8?n=6:t<16&&t>=14?n=7:t>=16&&(n=8),t<6&&t>=2?i=1:t>=6&&(i=2),t>4&&t<8?r=4:t>=8&&(r=6),{borderRadius:t,borderRadiusXS:i,borderRadiusSM:n,borderRadiusLG:e,borderRadiusOuter:r}})(i))}(t))}));var f=d},5371:function(t,e){"use strict";var n=function(t){return+setTimeout(t,16)},i=function(t){return clearTimeout(t)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(n=function(t){return window.requestAnimationFrame(t)},i=function(t){return window.cancelAnimationFrame(t)});var r=0,o=new Map;function s(t){o.delete(t)}var a=function(t){var e=r+=1;return function i(r){if(0===r)s(e),t();else{var a=n((function(){i(r-1)}));o.set(e,a)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),e};a.cancel=function(t){var e=o.get(t);return s(t),i(e)},e.A=a},5391:function(t,e,n){"use strict";n.d(e,{No:function(){return l},nG:function(){return a}});var i=n(6432),r=n(1081),o=n(1712),s=(0,i.Z0)({initialState:{filters:[]},name:"widgetBrowser",reducers:{applyFilters:function(t,e){t.filters=e.payload}}}),a={selectFilteredWidgets:(0,r.Mz)([o.bh],(function(t){return t}))},l=(s.actions,s.reducer)},5447:function(t,e,n){"use strict";n.d(e,{A:function(){return l}});var i=n(7358),r=n(4930),o=t=>{const{componentCls:e}=t;return{[e]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};const s=t=>{const{componentCls:e,antCls:n}=t;return{[e]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${e}-item:empty`]:{display:"none"},[`${e}-item > ${n}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},a=t=>{const{componentCls:e}=t;return{[e]:{"&-gap-row-small":{rowGap:t.spaceGapSmallSize},"&-gap-row-middle":{rowGap:t.spaceGapMiddleSize},"&-gap-row-large":{rowGap:t.spaceGapLargeSize},"&-gap-col-small":{columnGap:t.spaceGapSmallSize},"&-gap-col-middle":{columnGap:t.spaceGapMiddleSize},"&-gap-col-large":{columnGap:t.spaceGapLargeSize}}}};var l=(0,i.OF)("Space",(t=>{const e=(0,r.oX)(t,{spaceGapSmallSize:t.paddingXS,spaceGapMiddleSize:t.padding,spaceGapLargeSize:t.paddingLG});return[s(e),a(e),o(e)]}),(()=>({})),{resetStyle:!1})},5556:function(t,e,n){t.exports=n(2694)()},5655:function(t,e,n){"use strict";n.d(e,{A:function(){return it}});var i=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(t){}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){var e;return null==(e=t.parentNode)?void 0:e.removeChild(t)})),this.tags=[],this.ctr=0},t}(),r=Math.abs,o=String.fromCharCode,s=Object.assign;function a(t){return t.trim()}function l(t,e,n){return t.replace(e,n)}function c(t,e){return t.indexOf(e)}function h(t,e){return 0|t.charCodeAt(e)}function u(t,e,n){return t.slice(e,n)}function d(t){return t.length}function f(t){return t.length}function p(t,e){return e.push(t),t}var g=1,m=1,v=0,b=0,y=0,w="";function O(t,e,n,i,r,o,s){return{value:t,root:e,parent:n,type:i,props:r,children:o,line:g,column:m,length:s,return:""}}function S(t,e){return s(O("",null,null,"",null,null,0),t,{length:-t.length},e)}function x(){return y=b>0?h(w,--b):0,m--,10===y&&(m=1,g--),y}function k(){return y=b<v?h(w,b++):0,m++,10===y&&(m=1,g++),y}function C(){return h(w,b)}function A(){return b}function M(t,e){return u(w,t,e)}function E(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function P(t){return g=m=1,v=d(w=t),b=0,[]}function T(t){return w="",t}function $(t){return a(M(b-1,B(91===t?t+2:40===t?t+1:t)))}function D(t){for(;(y=C())&&y<33;)k();return E(t)>2||E(y)>3?"":" "}function R(t,e){for(;--e&&k()&&!(y<48||y>102||y>57&&y<65||y>70&&y<97););return M(t,A()+(e<6&&32==C()&&32==k()))}function B(t){for(;k();)switch(y){case t:return b;case 34:case 39:34!==t&&39!==t&&B(y);break;case 40:41===t&&B(t);break;case 92:k()}return b}function N(t,e){for(;k()&&t+y!==57&&(t+y!==84||47!==C()););return"/*"+M(e,b-1)+"*"+o(47===t?t:k())}function L(t){for(;!E(C());)k();return M(t,b)}var j="-ms-",_="-moz-",I="-webkit-",z="comm",Q="rule",H="decl",V="@keyframes";function W(t,e){for(var n="",i=f(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function F(t,e,n,i){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case H:return t.return=t.return||t.value;case z:return"";case V:return t.return=t.value+"{"+W(t.children,i)+"}";case Q:t.value=t.props.join(",")}return d(n=W(t.children,i))?t.return=t.value+"{"+n+"}":""}function q(t){return T(X("",null,null,null,[""],t=P(t),0,[0],t))}function X(t,e,n,i,r,s,a,u,f){for(var g=0,m=0,v=a,b=0,y=0,w=0,O=1,S=1,M=1,E=0,P="",T=r,B=s,j=i,_=P;S;)switch(w=E,E=k()){case 40:if(108!=w&&58==h(_,v-1)){-1!=c(_+=l($(E),"&","&\f"),"&\f")&&(M=-1);break}case 34:case 39:case 91:_+=$(E);break;case 9:case 10:case 13:case 32:_+=D(w);break;case 92:_+=R(A()-1,7);continue;case 47:switch(C()){case 42:case 47:p(Z(N(k(),A()),e,n),f);break;default:_+="/"}break;case 123*O:u[g++]=d(_)*M;case 125*O:case 59:case 0:switch(E){case 0:case 125:S=0;case 59+m:-1==M&&(_=l(_,/\f/g,"")),y>0&&d(_)-v&&p(y>32?Y(_+";",i,n,v-1):Y(l(_," ","")+";",i,n,v-2),f);break;case 59:_+=";";default:if(p(j=K(_,e,n,g,m,r,u,P,T=[],B=[],v),s),123===E)if(0===m)X(_,e,j,j,T,s,v,u,B);else switch(99===b&&110===h(_,3)?100:b){case 100:case 108:case 109:case 115:X(t,j,j,i&&p(K(t,j,j,0,0,r,u,P,r,T=[],v),B),r,B,v,u,i?T:B);break;default:X(_,j,j,j,[""],B,0,u,B)}}g=m=y=0,O=M=1,P=_="",v=a;break;case 58:v=1+d(_),y=w;default:if(O<1)if(123==E)--O;else if(125==E&&0==O++&&125==x())continue;switch(_+=o(E),E*O){case 38:M=m>0?1:(_+="\f",-1);break;case 44:u[g++]=(d(_)-1)*M,M=1;break;case 64:45===C()&&(_+=$(k())),b=C(),m=v=d(P=_+=L(A())),E++;break;case 45:45===w&&2==d(_)&&(O=0)}}return s}function K(t,e,n,i,o,s,c,h,d,p,g){for(var m=o-1,v=0===o?s:[""],b=f(v),y=0,w=0,S=0;y<i;++y)for(var x=0,k=u(t,m+1,m=r(w=c[y])),C=t;x<b;++x)(C=a(w>0?v[x]+" "+k:l(k,/&\f/g,v[x])))&&(d[S++]=C);return O(t,e,n,0===o?Q:h,d,p,g)}function Z(t,e,n){return O(t,e,n,z,o(y),u(t,2,-2),0)}function Y(t,e,n,i){return O(t,e,n,H,u(t,0,i),u(t,i+1,-1),i)}var G=function(t,e,n){for(var i=0,r=0;i=r,r=C(),38===i&&12===r&&(e[n]=1),!E(r);)k();return M(t,b)},U=new WeakMap,J=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||U.get(n))&&!i){U.set(t,!0);for(var r=[],s=function(t,e){return T(function(t,e){var n=-1,i=44;do{switch(E(i)){case 0:38===i&&12===C()&&(e[n]=1),t[n]+=G(b-1,e,n);break;case 2:t[n]+=$(i);break;case 4:if(44===i){t[++n]=58===C()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=o(i)}}while(i=k());return t}(P(t),e))}(e,r),a=n.props,l=0,c=0;l<s.length;l++)for(var h=0;h<a.length;h++,c++)t.props[c]=r[l]?s[l].replace(/&\f/g,a[h]):a[h]+" "+s[l]}}},tt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function et(t,e){switch(function(t,e){return 45^h(t,0)?(((e<<2^h(t,0))<<2^h(t,1))<<2^h(t,2))<<2^h(t,3):0}(t,e)){case 5103:return I+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return I+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return I+t+_+t+j+t+t;case 6828:case 4268:return I+t+j+t+t;case 6165:return I+t+j+"flex-"+t+t;case 5187:return I+t+l(t,/(\w+).+(:[^]+)/,I+"box-$1$2"+j+"flex-$1$2")+t;case 5443:return I+t+j+"flex-item-"+l(t,/flex-|-self/,"")+t;case 4675:return I+t+j+"flex-line-pack"+l(t,/align-content|flex-|-self/,"")+t;case 5548:return I+t+j+l(t,"shrink","negative")+t;case 5292:return I+t+j+l(t,"basis","preferred-size")+t;case 6060:return I+"box-"+l(t,"-grow","")+I+t+j+l(t,"grow","positive")+t;case 4554:return I+l(t,/([^-])(transform)/g,"$1"+I+"$2")+t;case 6187:return l(l(l(t,/(zoom-|grab)/,I+"$1"),/(image-set)/,I+"$1"),t,"")+t;case 5495:case 3959:return l(t,/(image-set\([^]*)/,I+"$1$`$1");case 4968:return l(l(t,/(.+:)(flex-)?(.*)/,I+"box-pack:$3"+j+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+I+t+t;case 4095:case 3583:case 4068:case 2532:return l(t,/(.+)-inline(.+)/,I+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(t)-1-e>6)switch(h(t,e+1)){case 109:if(45!==h(t,e+4))break;case 102:return l(t,/(.+:)(.+)-([^]+)/,"$1"+I+"$2-$3$1"+_+(108==h(t,e+3)?"$3":"$2-$3"))+t;case 115:return~c(t,"stretch")?et(l(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==h(t,e+1))break;case 6444:switch(h(t,d(t)-3-(~c(t,"!important")&&10))){case 107:return l(t,":",":"+I)+t;case 101:return l(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+I+(45===h(t,14)?"inline-":"")+"box$3$1"+I+"$2$3$1"+j+"$2box$3")+t}break;case 5936:switch(h(t,e+11)){case 114:return I+t+j+l(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return I+t+j+l(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return I+t+j+l(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return I+t+j+t+t}return t}var nt=[function(t,e,n,i){if(t.length>-1&&!t.return)switch(t.type){case H:t.return=et(t.value,t.length);break;case V:return W([S(t,{value:l(t.value,"@","@"+I)})],i);case Q:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t){return(t=/(::plac\w+|:read-\w+)/.exec(t))?t[0]:t}(e)){case":read-only":case":read-write":return W([S(t,{props:[l(e,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return W([S(t,{props:[l(e,/:(plac\w+)/,":"+I+"input-$1")]}),S(t,{props:[l(e,/:(plac\w+)/,":-moz-$1")]}),S(t,{props:[l(e,/:(plac\w+)/,j+"input-$1")]})],i)}return""}))}}],it=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r,o,s=t.stylisPlugins||nt,a={},l=[];r=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)a[e[n]]=!0;l.push(t)}));var c,h,u,d,p=[F,(d=function(t){c.insert(t)},function(t){t.root||(t=t.return)&&d(t)})],g=(h=[J,tt].concat(s,p),u=f(h),function(t,e,n,i){for(var r="",o=0;o<u;o++)r+=h[o](t,e,n,i)||"";return r});o=function(t,e,n,i){c=n,W(q(t?t+"{"+e.styles+"}":e.styles),g),i&&(m.inserted[e.name]=!0)};var m={key:e,sheet:new i({key:e,container:r,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:o};return m.sheet.hydrate(l),m}},5723:function(t,e,n){"use strict";function i(t){if(Array.isArray(t))return t}n.d(e,{A:function(){return i}})},5748:function(t,e,n){"use strict";n.d(e,{z1:function(){return C},cM:function(){return g},bK:function(){return w},UA:function(){return T},uy:function(){return m}});var i=n(938),r=2,o=.16,s=.05,a=.05,l=.15,c=5,h=4,u=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function d(t,e,n){var i;return(i=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-r*e:Math.round(t.h)+r*e:n?Math.round(t.h)+r*e:Math.round(t.h)-r*e)<0?i+=360:i>=360&&(i-=360),i}function f(t,e,n){return 0===t.h&&0===t.s?t.s:((i=n?t.s-o*e:e===h?t.s+o:t.s+s*e)>1&&(i=1),n&&e===c&&i>.1&&(i=.1),i<.06&&(i=.06),Math.round(100*i)/100);var i}function p(t,e,n){var i;return i=n?t.v+a*e:t.v-l*e,i=Math.max(0,Math.min(1,i)),Math.round(100*i)/100}function g(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=new i.Y(t),o=r.toHsv(),s=c;s>0;s-=1){var a=new i.Y({h:d(o,s,!0),s:f(o,s,!0),v:p(o,s,!0)});n.push(a)}n.push(r);for(var l=1;l<=h;l+=1){var g=new i.Y({h:d(o,l),s:f(o,l),v:p(o,l)});n.push(g)}return"dark"===e.theme?u.map((function(t){var r=t.index,o=t.amount;return new i.Y(e.backgroundColor||"#141414").mix(n[r],o).toHexString()})):n.map((function(t){return t.toHexString()}))}var m={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},v=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];v.primary=v[5];var b=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];b.primary=b[5];var y=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];y.primary=y[5];var w=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];w.primary=w[5];var O=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];O.primary=O[5];var S=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];S.primary=S[5];var x=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];x.primary=x[5];var k=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];k.primary=k[5];var C=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];C.primary=C[5];var A=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];A.primary=A[5];var M=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];M.primary=M[5];var E=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];E.primary=E[5];var P=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];P.primary=P[5];var T={red:v,volcano:b,orange:y,gold:w,yellow:O,lime:S,green:x,cyan:k,blue:C,geekblue:A,purple:M,magenta:E,grey:P},$=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];$.primary=$[5];var D=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];D.primary=D[5];var R=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];R.primary=R[5];var B=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];B.primary=B[5];var N=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];N.primary=N[5];var L=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];L.primary=L[5];var j=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];j.primary=j[5];var _=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];_.primary=_[5];var I=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];I.primary=I[5];var z=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];z.primary=z[5];var Q=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];Q.primary=Q[5];var H=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];H.primary=H[5];var V=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];V.primary=V[5]},5872:function(t,e,n){"use strict";n.d(e,{W:function(){return r}});var i={Bathtub:{Header:{SkipLink:{translation:"Skip to main",instruction:"Link to the main content of the page"},Waffle:{translation:"Widget switcher",instruction:"Button to switch between widgets"},Docs:{translation:"1FE Docs",instruction:"Button to link to the 1FE Docs"},Help:{translation:"Help",instruction:"Button to open the help slack channel"},Reset:{translation:"Reset",instruction:"Button to reset the widget"},Render:{translation:"Render",instruction:"Button to render the widget"},Editor:{translation:"Widget props",instruction:"Button to open the widget props"},Variant:{translation:"Variant",instruction:"Button to open the variant switcher"},VariantDefault:{translation:"Default",instruction:"Button to switch to the default widget"}},App:{Loading:{translation:"Loading...",instruction:"Loading message when the environment is loading"}},PropEditor:{Title:{translation:"Widget props",instruction:"Title of the property editor"},Update:{translation:"Update",instruction:"Button to update the widget props"},ValidationError:{translation:"There is a problem with props. Check the console for more information.",instruction:"Error message to users when props object is not valid."}},Renderer:{Help:{translation:"Select a <code>widget</code> from the waffle menu to get started. Or you can add the <code>widgetUrl</code> query parameter to the URL to load a specific widget.",instruction:"Help message when no widget is selected"},HelpAction:{translation:"Select a widget",instruction:"Title of the help message"},HelpHeader:{translation:"Welcome to 1FE Bathtub!",instruction:"Header of the help message"},HelpFailed:{translation:"We tried loading the widget and failed. Press the CLEAN button to reset the bathtub.",instruction:"Message when the widget fails to load"},HelpFailedHeader:{translation:"Yikes! We couldn't load the widget.",instruction:"Message when the widget fails to load"},HelpFailedAction:{translation:"Clean",instruction:"Button to clean the bathtub"},HelpFailureLocation:{translation:"{{WIDGET}}:{{LOCATION}}",instruction:"The error message and location joined with :"},HelpFailureOpenFile:{translation:"Open in browser",instruction:"Button to open the file where the error occurred"},HelpFailureStackTrace:{translation:"Stack trace",instruction:"Heading for the stack trace"}},Switcher:{SearchLabel:{translation:"Select a widget",instruction:"Label for the search input"},SearchPlaceholder:{translation:"@1fe/widget-starter-kit",instruction:"Placeholder for the search input"},SwitcherTitle:{translation:"Widget switcher",instruction:"Title of the widget switcher"},UrlSwitcherLabel:{translation:"Enter a widget url",instruction:"Label of the widget switcher"},QuickLinksLabel:{translation:"Quick load:",instruction:"Label of the quick links"},Apply:{translation:"Apply",instruction:"Button to apply new url from the widget switcher"},SwitcherPlaceholder:{translation:"http://localhost:8081/js/1fe-bundle.js",instruction:"Placeholder of the widget switcher"},OrLabel:{translation:"OR",instruction:"Text that separates the widget switcher and the widget url switcher"}},Shortcuts:{Title:{translation:"Shortcuts",instruction:"Title of the shortcuts widget"},Copy:{translation:"Copy",instruction:"Button to copy the shortcut"},CopyShortcut:{translation:"CTRL+SHIFT+C",instruction:"Shortcut to trigger the copy action"},OpenSwitcher:{translation:"Open widget switcher",instruction:"Button to open the widget switcher"},OpenSwitcherShortcut:{translation:"Ctrl+/",instruction:"Shortcut to trigger the widget switcher"},OpenEditor:{translation:"Open props editor",instruction:"Button to open the widget props"},OpenEditorShortcut:{translation:"Ctrl+P",instruction:"Shortcut to trigger the widget props"},Reset:{translation:"Reset",instruction:"Button to reset the widget"},ResetShortcut:{translation:"Ctrl+R",instruction:"Shortcut to reload the widget"},Clean:{translation:"Clean (on error)",instruction:"Button to clean the bathtub"},CleanShortcut:{translation:"CMD+ESC",instruction:"Shortcut to clean the bathtub"}}},PluginBrowser:{ColumnHeaders:{Name:{translation:"Plugin",instruction:"Column header for the plugin name"},VersionInt:{translation:"Version: Int",instruction:"Column header for the plugin version in the integration environment"},VersionStage:{translation:"Version: Stage",instruction:"Column header for the plugin version in the staging environment"},VersionDemo:{translation:"Version: Demo",instruction:"Column header for the plugin version in the demo environment"},VersionProd:{translation:"Version: Prod",instruction:"Column header for the plugin version in the production environment"},Route:{translation:"Route",instruction:"Column header for the plugin route"},Auth:{translation:"Authentication Enabled",instruction:"Column header for the plugin authentication required"},Launch:{translation:"Launch",instruction:"Column header for the plugin open button"}}},WidgetBrowser:{Root:{Title:{translation:"Widget Browser",instruction:"Title of the widget browser"},PreviewTag:{translation:"Preview",instruction:"Tag for the preview button"}},Menu:{Actions:{translation:"More Actions - {{widget_name}}",instruction:"Button to open the actions menu for a widget"},PipelineHeader:{translation:"Pipelines",instruction:"Header for the pipeline menu"},AzureDevOps:{translation:"ADO Project",instruction:"Button to open the ADO project"},BundleAnalysis:{translation:"Bundle Analysis",instruction:"Button to open the bundle analysis"},Pipeline:{translation:"Pipeline",instruction:"Button to open the pipeline"},Rollback:{translation:"Rollback",instruction:"Button to rollback the widget"},ConfigurationHeader:{translation:"Configs",instruction:"Header for the configuration menu"},ConfigurationInt:{translation:"Integration",instruction:"Button to open the widget integration configuration"},ConfigurationStage:{translation:"Stage",instruction:"Button to open the widget stage configuration"},ConfigurationDemo:{translation:"Demo",instruction:"Button to open the widget demo configuration"},ConfigurationProd:{translation:"Production",instruction:"Button to open the widget prod configuration"},Team:{translation:"Contact",instruction:"Button to contact the widget owner"},CreatedDate:{translation:"Created {{date}}",instruction:"Description of the widget creation date"}},Links:{Repository:{translation:"Repository - {{widget_name}}",instruction:"Link to the widget repository"},Configuration:{translation:"Configuration",instruction:"Link to the widget configuration"},Bathtub:{translation:"Launch {{widget_name}}",instruction:"Link to the widget in the bathtub"},Version:{translation:"{{version_number}} - {{widget_name}}",instruction:"Link showing the version number with the widget name added for additional context"}},Columns:{Id:{translation:"Id",instruction:"Column header for Id"},Name:{translation:"NAME",instruction:"Column header for Name"},Links:{translation:"LINKS",instruction:"Column header for Links"},Route:{translation:"ROUTE",instruction:"Column header for Route"},Authentication:{translation:"AUTHENTICATION",instruction:"Column header for Authentication"},Integration:{translation:"INTEGRATION",instruction:"Column header for Integration"},Stage:{translation:"STAGE",instruction:"Column header for Stage"},Demo:{translation:"DEMO",instruction:"Column header for Demo"},Prod:{translation:"PROD",instruction:"Column header for Prod"},Action:{translation:"ACTION",instruction:"Column header for Action"}}},DataTable:{Footer:{AccessibilityText:{translation:"Pagination",instruction:"Accessibility text for the pagination"}}}},r=function(){return function(t,e){return t.split(".").reduce((function(t,e){return null==t?void 0:t[e]}),i).translation}}},5905:function(t,e,n){"use strict";n.d(e,{K8:function(){return u},L9:function(){return r},Nk:function(){return s},Y1:function(){return f},av:function(){return l},dF:function(){return o},jk:function(){return h},jz:function(){return d},t6:function(){return a},vj:function(){return c}});var i=n(8715);const r={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},o=(t,e=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:e?"inherit":t.fontFamily}),s=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),a=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),l=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active, &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),c=(t,e,n,i)=>{const r=`[class^="${e}"], [class*=" ${e}"]`,o=n?`.${n}`:r,s={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let a={};return!1!==i&&(a={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[o]:Object.assign(Object.assign(Object.assign({},a),s),{[r]:s})}},h=(t,e)=>({outline:`${(0,i.zA)(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:null!=e?e:1,transition:"outline-offset 0s, outline 0s"}),u=(t,e)=>({"&:focus-visible":Object.assign({},h(t,e))}),d=t=>({[`.${t}`]:Object.assign(Object.assign({},s()),{[`.${t} .${t}-icon`]:{display:"block"}})}),f=t=>Object.assign(Object.assign({color:t.colorLink,textDecoration:t.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${t.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},u(t)),{"&:focus, &:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive}})},5974:function(t,e,n){"use strict";function i(t,e,n){const{focusElCls:i,focus:r,borderElCls:o}=n,s=o?"> *":"",a=["hover",r?"focus":null,"active"].filter(Boolean).map((t=>`&:${t} ${s}`)).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[a]:{zIndex:2}},i?{[`&${i}`]:{zIndex:2}}:{}),{[`&[disabled] ${s}`]:{zIndex:0}})}}function r(t,e,n){const{borderElCls:i}=n,r=i?`> ${i}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${r}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${r}, &${t}-sm ${r}, &${t}-lg ${r}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${r}, &${t}-sm ${r}, &${t}-lg ${r}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function o(t,e={focus:!0}){const{componentCls:n}=t,o=`${n}-compact`;return{[o]:Object.assign(Object.assign({},i(t,o,e)),r(n,o,e))}}n.d(e,{G:function(){return o}})},6234:function(t,e,n){"use strict";n.d(e,{UI:function(){return o}});var i="NOT_FOUND",r=function(t,e){return t===e};function o(t,e){var n,o,s="object"==typeof e?e:{equalityCheck:e},a=s.equalityCheck,l=void 0===a?r:a,c=s.maxSize,h=void 0===c?1:c,u=s.resultEqualityCheck,d=function(t){return function(e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var i=e.length,r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}}(l),f=1===h?(n=d,{get:function(t){return o&&n(o.key,t)?o.value:i},put:function(t,e){o={key:t,value:e}},getEntries:function(){return o?[o]:[]},clear:function(){o=void 0}}):function(t,e){var n=[];function r(t){var r=n.findIndex((function(n){return e(t,n.key)}));if(r>-1){var o=n[r];return r>0&&(n.splice(r,1),n.unshift(o)),o.value}return i}return{get:r,put:function(e,o){r(e)===i&&(n.unshift({key:e,value:o}),n.length>t&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(h,d);function p(){var e=f.get(arguments);if(e===i){if(e=t.apply(null,arguments),u){var n=f.getEntries().find((function(t){return u(t.value,e)}));n&&(e=n.value)}f.put(arguments,e)}return e}return p.clearCache=function(){return f.clear()},p}},6288:function(t,e,n){"use strict";n.d(e,{A:function(){return a}});var i=n(8314),r=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function a(t){return t&&"object"===(0,i.A)(t)&&(t.$$typeof===r||t.$$typeof===o)&&t.type===s}},6289:function(t,e,n){"use strict";function i(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}n.d(e,{A:function(){return i}})},6300:function(t,e,n){"use strict";function i(t,e){for(var n=t,i=0;i<e.length;i+=1){if(null==n)return;n=n[e[i]]}return n}n.d(e,{A:function(){return i}})},6314:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&s[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},6327:function(t,e,n){"use strict";n.d(e,{K6:function(){return f},RQ:function(){return d}});var i=n(1302),r=n(6942),o=n.n(r),s=n(2546),a=n(2279),l=n(829),c=n(5447),h=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};const u=i.createContext(null),d=(t,e)=>{const n=i.useContext(u),r=i.useMemo((()=>{if(!n)return"";const{compactDirection:i,isFirstItem:r,isLastItem:s}=n,a="vertical"===i?"-vertical-":"-";return o()(`${t}-compact${a}item`,{[`${t}-compact${a}first-item`]:r,[`${t}-compact${a}last-item`]:s,[`${t}-compact${a}item-rtl`]:"rtl"===e})}),[t,e,n]);return{compactSize:null==n?void 0:n.compactSize,compactDirection:null==n?void 0:n.compactDirection,compactItemClassnames:r}},f=t=>{const{children:e}=t;return i.createElement(u.Provider,{value:null},e)},p=t=>{const{children:e}=t,n=h(t,["children"]);return i.createElement(u.Provider,{value:i.useMemo((()=>n),[n])},e)};e.Ay=t=>{const{getPrefixCls:e,direction:n}=i.useContext(a.QO),{size:r,direction:d,block:f,prefixCls:g,className:m,rootClassName:v,children:b}=t,y=h(t,["size","direction","block","prefixCls","className","rootClassName","children"]),w=(0,l.A)((t=>null!=r?r:t)),O=e("space-compact",g),[S,x]=(0,c.A)(O),k=o()(O,x,{[`${O}-rtl`]:"rtl"===n,[`${O}-block`]:f,[`${O}-vertical`]:"vertical"===d},m,v),C=i.useContext(u),A=(0,s.A)(b),M=i.useMemo((()=>A.map(((t,e)=>{const n=(null==t?void 0:t.key)||`${O}-item-${e}`;return i.createElement(p,{key:n,compactSize:w,compactDirection:d,isFirstItem:0===e&&(!C||(null==C?void 0:C.isFirstItem)),isLastItem:e===A.length-1&&(!C||(null==C?void 0:C.isLastItem))},t)}))),[r,A,C]);return 0===A.length?null:S(i.createElement("div",Object.assign({className:k},y),M))}},6426:function(t){t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],i=0;i<t.rangeCount;i++)n.push(t.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||n.forEach((function(e){t.addRange(e)})),e&&e.focus()}}},6432:function(t,e,n){"use strict";function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(t){return!!t&&!!t[W]}function o(t){var e;return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===F}(t)||Array.isArray(t)||!!t[V]||!!(null===(e=t.constructor)||void 0===e?void 0:e[V])||u(t)||d(t))}function s(t,e,n){void 0===n&&(n=!1),0===a(t)?(n?Object.keys:q)(t).forEach((function(i){n&&"symbol"==typeof i||e(i,t[i],t)})):t.forEach((function(n,i){return e(i,n,t)}))}function a(t){var e=t[W];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:u(t)?2:d(t)?3:0}function l(t,e){return 2===a(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function c(t,e,n){var i=a(t);2===i?t.set(e,n):3===i?t.add(n):t[e]=n}function h(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function u(t){return I&&t instanceof Map}function d(t){return z&&t instanceof Set}function f(t){return t.o||t.t}function p(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=X(t);delete e[W];for(var n=q(e),i=0;i<n.length;i++){var r=n[i],o=e[r];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[r]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[r]})}return Object.create(Object.getPrototypeOf(t),e)}function g(t,e){return void 0===e&&(e=!1),v(t)||r(t)||!o(t)||(a(t)>1&&(t.set=t.add=t.clear=t.delete=m),Object.freeze(t),e&&s(t,(function(t,e){return g(e,!0)}),!0)),t}function m(){i(2)}function v(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function b(t){var e=K[t];return e||i(18,t),e}function y(){return j}function w(t,e){e&&(b("Patches"),t.u=[],t.s=[],t.v=e)}function O(t){S(t),t.p.forEach(k),t.p=null}function S(t){t===j&&(j=t.l)}function x(t){return j={p:[],l:j,h:t,m:!0,_:0}}function k(t){var e=t[W];0===e.i||1===e.i?e.j():e.g=!0}function C(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.O||b("ES5").S(e,t,r),r?(n[W].P&&(O(e),i(4)),o(t)&&(t=A(e,t),e.l||E(e,t)),e.u&&b("Patches").M(n[W].t,t,e.u,e.s)):t=A(e,n,[]),O(e),e.u&&e.v(e.u,e.s),t!==H?t:void 0}function A(t,e,n){if(v(e))return e;var i=e[W];if(!i)return s(e,(function(r,o){return M(t,i,e,r,o,n)}),!0),e;if(i.A!==t)return e;if(!i.P)return E(t,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var r=4===i.i||5===i.i?i.o=p(i.k):i.o,o=r,a=!1;3===i.i&&(o=new Set(r),r.clear(),a=!0),s(o,(function(e,o){return M(t,i,r,e,o,n,a)})),E(t,r,!1),n&&t.u&&b("Patches").N(i,n,t.u,t.s)}return i.o}function M(t,e,n,i,s,a,h){if(r(s)){var u=A(t,s,a&&e&&3!==e.i&&!l(e.R,i)?a.concat(i):void 0);if(c(n,i,u),!r(u))return;t.m=!1}else h&&n.add(s);if(o(s)&&!v(s)){if(!t.h.D&&t._<1)return;A(t,s),e&&e.A.l||E(t,s)}}function E(t,e,n){void 0===n&&(n=!1),!t.l&&t.h.D&&t.m&&g(e,n)}function P(t,e){var n=t[W];return(n?f(n):t)[e]}function T(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Object.getPrototypeOf(n)}}function $(t){t.P||(t.P=!0,t.l&&$(t.l))}function D(t){t.o||(t.o=p(t.t))}function R(t,e,n){var i=u(e)?b("MapSet").F(e,n):d(e)?b("MapSet").T(e,n):t.O?function(t,e){var n=Array.isArray(t),i={i:n?1:0,A:e?e.A:y(),P:!1,I:!1,R:{},l:e,t:t,k:null,o:null,j:null,C:!1},r=i,o=Z;n&&(r=[i],o=Y);var s=Proxy.revocable(r,o),a=s.revoke,l=s.proxy;return i.k=l,i.j=a,l}(e,n):b("ES5").J(e,n);return(n?n.A:y()).p.push(i),i}function B(t){return r(t)||i(22,t),function t(e){if(!o(e))return e;var n,i=e[W],r=a(e);if(i){if(!i.P&&(i.i<4||!b("ES5").K(i)))return i.t;i.I=!0,n=N(e,r),i.I=!1}else n=N(e,r);return s(n,(function(e,r){i&&function(t,e){return 2===a(t)?t.get(e):t[e]}(i.t,e)===r||c(n,e,t(r))})),3===r?new Set(n):n}(t)}function N(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return p(t)}n.d(e,{U1:function(){return Bt},zD:function(){return Zt},pU:function(){return Wt},Z0:function(){return _t}});var L,j,_="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),I="undefined"!=typeof Map,z="undefined"!=typeof Set,Q="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H=_?Symbol.for("immer-nothing"):((L={})["immer-nothing"]=!0,L),V=_?Symbol.for("immer-draftable"):"__$immer_draftable",W=_?Symbol.for("immer-state"):"__$immer_state",F=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),q="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,X=Object.getOwnPropertyDescriptors||function(t){var e={};return q(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},K={},Z={get:function(t,e){if(e===W)return t;var n=f(t);if(!l(n,e))return function(t,e,n){var i,r=T(e,n);return r?"value"in r?r.value:null===(i=r.get)||void 0===i?void 0:i.call(t.k):void 0}(t,n,e);var i=n[e];return t.I||!o(i)?i:i===P(t.t,e)?(D(t),t.o[e]=R(t.A.h,i,t)):i},has:function(t,e){return e in f(t)},ownKeys:function(t){return Reflect.ownKeys(f(t))},set:function(t,e,n){var i=T(f(t),e);if(null==i?void 0:i.set)return i.set.call(t.k,n),!0;if(!t.P){var r=P(f(t),e),o=null==r?void 0:r[W];if(o&&o.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(h(n,r)&&(void 0!==n||l(t.t,e)))return!0;D(t),$(t)}return t.o[e]===n&&(void 0!==n||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return void 0!==P(t.t,e)||e in t.t?(t.R[e]=!1,D(t),$(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=f(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:i.enumerable,value:n[e]}:i},defineProperty:function(){i(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){i(12)}},Y={};s(Z,(function(t,e){Y[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Y.deleteProperty=function(t,e){return Y.set.call(this,t,e,void 0)},Y.set=function(t,e,n){return Z.set.call(this,t[0],e,n,t[0])};var G=function(){function t(t){var e=this;this.O=Q,this.D=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var s=n;n=t;var a=e;return function(t){var e=this;void 0===t&&(t=s);for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return a.produce(t,(function(t){var i;return(i=n).call.apply(i,[e,t].concat(r))}))}}var l;if("function"!=typeof n&&i(6),void 0!==r&&"function"!=typeof r&&i(7),o(t)){var c=x(e),h=R(e,t,void 0),u=!0;try{l=n(h),u=!1}finally{u?O(c):S(c)}return"undefined"!=typeof Promise&&l instanceof Promise?l.then((function(t){return w(c,r),C(t,c)}),(function(t){throw O(c),t})):(w(c,r),C(l,c))}if(!t||"object"!=typeof t){if(void 0===(l=n(t))&&(l=t),l===H&&(l=void 0),e.D&&g(l,!0),r){var d=[],f=[];b("Patches").M(t,l,d,f),r(d,f)}return l}i(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(r))}))};var i,r,o=e.produce(t,n,(function(t,e){i=t,r=e}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return[t,i,r]})):[o,i,r]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){o(t)||i(8),r(t)&&(t=B(t));var e=x(this),n=R(this,t,void 0);return n[W].C=!0,S(e),n},e.finishDraft=function(t,e){var n=(t&&t[W]).A;return w(n,e),C(void 0,n)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!Q&&i(20),this.O=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var i=e[n];if(0===i.path.length&&"replace"===i.op){t=i.value;break}}n>-1&&(e=e.slice(n+1));var o=b("Patches").$;return r(t)?o(t,e):this.produce(t,(function(t){return o(t,e)}))},t}(),U=new G,J=U.produce,tt=(U.produceWithPatches.bind(U),U.setAutoFreeze.bind(U),U.setUseProxies.bind(U),U.applyPatches.bind(U),U.createDraft.bind(U),U.finishDraft.bind(U),J),et=n(1081);function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function it(t,e,n){return(e=function(t){var e=function(t){if("object"!=nt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){it(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function st(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var at="function"==typeof Symbol&&Symbol.observable||"@@observable",lt=function(){return Math.random().toString(36).substring(7).split("").join(".")},ct={INIT:"@@redux/INIT"+lt(),REPLACE:"@@redux/REPLACE"+lt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+lt()}};function ht(t,e,n){var i;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(st(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(st(1));return n(ht)(t,e)}if("function"!=typeof t)throw new Error(st(2));var r=t,o=e,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function h(){if(l)throw new Error(st(3));return o}function u(t){if("function"!=typeof t)throw new Error(st(4));if(l)throw new Error(st(5));var e=!0;return c(),a.push(t),function(){if(e){if(l)throw new Error(st(6));e=!1,c();var n=a.indexOf(t);a.splice(n,1),s=null}}}function d(t){if(!function(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw new Error(st(7));if(void 0===t.type)throw new Error(st(8));if(l)throw new Error(st(9));try{l=!0,o=r(o,t)}finally{l=!1}for(var e=s=a,n=0;n<e.length;n++)(0,e[n])();return t}return d({type:ct.INIT}),(i={dispatch:d,subscribe:u,getState:h,replaceReducer:function(t){if("function"!=typeof t)throw new Error(st(10));r=t,d({type:ct.REPLACE})}})[at]=function(){var t,e=u;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(st(11));function n(){t.next&&t.next(h())}return n(),{unsubscribe:e(n)}}})[at]=function(){return this},t},i}function ut(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function dt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),i=function(){throw new Error(st(15))},r={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},o=e.map((function(t){return t(r)}));return i=ut.apply(void 0,o)(n.dispatch),ot(ot({},n),{},{dispatch:i})}}}function ft(t){return function(e){var n=e.dispatch,i=e.getState;return function(e){return function(r){return"function"==typeof r?r(n,i,t):e(r)}}}}var pt=ft();pt.withExtraArgument=ft;var gt,mt=pt,vt=(gt=function(t,e){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},gt(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}gt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),bt=function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t},yt=Object.defineProperty,wt=Object.defineProperties,Ot=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable,Ct=function(t,e,n){return e in t?yt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},At=function(t,e){for(var n in e||(e={}))xt.call(e,n)&&Ct(t,n,e[n]);if(St)for(var i=0,r=St(e);i<r.length;i++)n=r[i],kt.call(e,n)&&Ct(t,n,e[n]);return t},Mt=function(t,e){return wt(t,Ot(e))},Et=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=et.Mz.apply(void 0,t);return function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return n.apply(void 0,bt([r(t)?B(t):t],e))}},Pt="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?ut:ut.apply(null,arguments)};function Tt(t){if("object"!=typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return e===n}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var $t=function(t){function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=t.apply(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return vt(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,bt([void 0],t[0].concat(this)))):new(e.bind.apply(e,bt([void 0],t.concat(this))))},e}(Array);function Dt(t){return o(t)?tt(t,(function(){})):t}var Rt=!0;function Bt(t){var e,n=function(t){return function(t){void 0===t&&(t={});var e=t.thunk,n=void 0===e||e,i=(t.immutableCheck,t.serializableCheck,new $t);return n&&(function(t){return"boolean"==typeof t}(n)?i.push(mt):i.push(mt.withExtraArgument(n.extraArgument))),i}(t)},i=t||{},r=i.reducer,o=void 0===r?void 0:r,s=i.middleware,a=void 0===s?n():s,l=i.devTools,c=void 0===l||l,h=i.preloadedState,u=void 0===h?void 0:h,d=i.enhancers,f=void 0===d?void 0:d;if("function"==typeof o)e=o;else{if(!Tt(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++){var r=e[i];"function"==typeof t[r]&&(n[r]=t[r])}var o,s=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:ct.INIT}))throw new Error(st(12));if(void 0===n(void 0,{type:ct.PROBE_UNKNOWN_ACTION()}))throw new Error(st(13))}))}(n)}catch(t){o=t}return function(t,e){if(void 0===t&&(t={}),o)throw o;for(var i=!1,r={},a=0;a<s.length;a++){var l=s[a],c=n[l],h=t[l],u=c(h,e);if(void 0===u)throw e&&e.type,new Error(st(14));r[l]=u,i=i||u!==h}return(i=i||s.length!==Object.keys(t).length)?r:t}}(o)}var p=a;if("function"==typeof p&&(p=p(n),!Rt&&!Array.isArray(p)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!Rt&&p.some((function(t){return"function"!=typeof t})))throw new Error("each middleware provided to configureStore must be a function");var g=dt.apply(void 0,p),m=ut;c&&(m=Pt(At({trace:!Rt},"object"==typeof c&&c)));var v=[g];return Array.isArray(f)?v=bt([g],f):"function"==typeof f&&(v=f(v)),ht(e,u,m.apply(void 0,v))}function Nt(t,e){function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(e){var r=e.apply(void 0,n);if(!r)throw new Error("prepareAction did not return an object");return At(At({type:t,payload:r.payload},"meta"in r&&{meta:r.meta}),"error"in r&&{error:r.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}function Lt(t){return["type","payload","error","meta"].indexOf(t)>-1}function jt(t){var e,n={},i=[],r={addCase:function(t,e){var i="string"==typeof t?t:t.type;if(i in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[i]=e,r},addMatcher:function(t,e){return i.push({matcher:t,reducer:e}),r},addDefaultCase:function(t){return e=t,r}};return t(r),[n,i,e]}function _t(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n,i="function"==typeof t.initialState?t.initialState:Dt(t.initialState),s=t.reducers||{},a=Object.keys(s),l={},c={},h={};function u(){var e="function"==typeof t.extraReducers?jt(t.extraReducers):[t.extraReducers],n=e[0],s=void 0===n?{}:n,a=e[1],l=void 0===a?[]:a,h=e[2],u=void 0===h?void 0:h,d=At(At({},s),c);return function(t,e,n){void 0===n&&(n=[]);var i,s=jt(e),a=s[0],l=s[1],c=s[2];if(function(t){return"function"==typeof t}(t))i=function(){return Dt(t())};else{var h=Dt(t);i=function(){return h}}function u(t,e){void 0===t&&(t=i());var n=bt([a[e.type]],l.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[c]),n.reduce((function(t,n){if(n){var i;if(r(t))return void 0===(i=n(t,e))?t:i;if(o(t))return tt(t,(function(t){return n(t,e)}));if(void 0===(i=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}return t}),t)}return u.getInitialState=i,u}(i,(function(t){for(var e in d)t.addCase(e,d[e]);for(var n=0,i=l;n<i.length;n++){var r=i[n];t.addMatcher(r.matcher,r.reducer)}u&&t.addDefaultCase(u)}))}return a.forEach((function(t){var n,i,r=s[t],o=e+"/"+t;"reducer"in r?(n=r.reducer,i=r.prepare):n=r,l[t]=n,c[o]=n,h[t]=i?Nt(o,i):Nt(o)})),{name:e,reducer:function(t,e){return n||(n=u()),n(t,e)},actions:h,caseReducers:l,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}function It(t){return function(e,n){var i=function(e){var i;Tt(i=n)&&"string"==typeof i.type&&Object.keys(i).every(Lt)?t(n.payload,e):t(n,e)};return r(e)?(i(e),e):tt(e,i)}}function zt(t,e){return e(t)}function Qt(t){return Array.isArray(t)||(t=Object.values(t)),t}function Ht(t,e,n){for(var i=[],r=[],o=0,s=t=Qt(t);o<s.length;o++){var a=s[o],l=zt(a,e);l in n.entities?r.push({id:l,changes:a}):i.push(a)}return[i,r]}function Vt(t){function e(e,n){var i=zt(e,t);i in n.entities||(n.ids.push(i),n.entities[i]=e)}function n(t,n){for(var i=0,r=t=Qt(t);i<r.length;i++)e(r[i],n)}function i(e,n){var i=zt(e,t);i in n.entities||n.ids.push(i),n.entities[i]=e}function r(t,e){var n=!1;t.forEach((function(t){t in e.entities&&(delete e.entities[t],n=!0)})),n&&(e.ids=e.ids.filter((function(t){return t in e.entities})))}function o(e,n){var i={},r={};if(e.forEach((function(t){t.id in n.entities&&(r[t.id]={id:t.id,changes:At(At({},r[t.id]?r[t.id].changes:null),t.changes)})})),(e=Object.values(r)).length>0){var o=e.filter((function(e){return function(e,n,i){var r=i.entities[n.id],o=Object.assign({},r,n.changes),s=zt(o,t),a=s!==n.id;return a&&(e[n.id]=s,delete i.entities[n.id]),i.entities[s]=o,a}(i,e,n)})).length>0;o&&(n.ids=Object.keys(n.entities))}}function s(e,i){var r=Ht(e,t,i),s=r[0];o(r[1],i),n(s,i)}return{removeAll:(a=function(t){Object.assign(t,{ids:[],entities:{}})},l=It((function(t,e){return a(e)})),function(t){return l(t,void 0)}),addOne:It(e),addMany:It(n),setOne:It(i),setMany:It((function(t,e){for(var n=0,r=t=Qt(t);n<r.length;n++)i(r[n],e)})),setAll:It((function(t,e){t=Qt(t),e.ids=[],e.entities={},n(t,e)})),updateOne:It((function(t,e){return o([t],e)})),updateMany:It(o),upsertOne:It((function(t,e){return s([t],e)})),upsertMany:It(s),removeOne:It((function(t,e){return r([t],e)})),removeMany:It(r)};var a,l}function Wt(t){void 0===t&&(t={});var e=At({sortComparer:!1,selectId:function(t){return t.id}},t),n=e.selectId,i=e.sortComparer,r={getInitialState:function(t){return void 0===t&&(t={}),Object.assign({ids:[],entities:{}},t)}},o={getSelectors:function(t){var e=function(t){return t.ids},n=function(t){return t.entities},i=Et(e,n,(function(t,e){return t.map((function(t){return e[t]}))})),r=function(t,e){return e},o=function(t,e){return t[e]},s=Et(e,(function(t){return t.length}));if(!t)return{selectIds:e,selectEntities:n,selectAll:i,selectTotal:s,selectById:Et(n,r,o)};var a=Et(t,n);return{selectIds:Et(t,e),selectEntities:a,selectAll:Et(t,i),selectTotal:Et(t,s),selectById:Et(a,r,o)}}},s=i?function(t,e){var n=Vt(t);function i(e,n){var i=(e=Qt(e)).filter((function(e){return!(zt(e,t)in n.entities)}));0!==i.length&&a(i,n)}function r(t,e){0!==(t=Qt(t)).length&&a(t,e)}function o(e,n){for(var i=!1,r=0,o=e;r<o.length;r++){var s=o[r],a=n.entities[s.id];if(a){i=!0,Object.assign(a,s.changes);var c=t(a);s.id!==c&&(delete n.entities[s.id],n.entities[c]=a)}}i&&l(n)}function s(e,n){var r=Ht(e,t,n),s=r[0];o(r[1],n),i(s,n)}function a(e,n){e.forEach((function(e){n.entities[t(e)]=e})),l(n)}function l(n){var i=Object.values(n.entities);i.sort(e);var r=i.map(t);(function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(t[n]!==e[n])return!1;return!0})(n.ids,r)||(n.ids=r)}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:It((function(t,e){return i([t],e)})),updateOne:It((function(t,e){return o([t],e)})),upsertOne:It((function(t,e){return s([t],e)})),setOne:It((function(t,e){return r([t],e)})),setMany:It(r),setAll:It((function(t,e){t=Qt(t),e.entities={},e.ids=[],i(t,e)})),addMany:It(i),updateMany:It(o),upsertMany:It(s)}}(n,i):Vt(n);return At(At(At({selectId:n,sortComparer:i},r),o),s)}var Ft=["name","message","stack","code"],qt=function(t,e){this.payload=t,this.meta=e},Xt=function(t,e){this.payload=t,this.meta=e},Kt=function(t){if("object"==typeof t&&null!==t){for(var e={},n=0,i=Ft;n<i.length;n++){var r=i[n];"string"==typeof t[r]&&(e[r]=t[r])}return e}return{message:String(t)}},Zt=function(){function t(t,e,n){var i=Nt(t+"/fulfilled",(function(t,e,n,i){return{payload:t,meta:Mt(At({},i||{}),{arg:n,requestId:e,requestStatus:"fulfilled"})}})),r=Nt(t+"/pending",(function(t,e,n){return{payload:void 0,meta:Mt(At({},n||{}),{arg:e,requestId:t,requestStatus:"pending"})}})),o=Nt(t+"/rejected",(function(t,e,i,r,o){return{payload:r,error:(n&&n.serializeError||Kt)(t||"Rejected"),meta:Mt(At({},o||{}),{arg:i,requestId:e,rejectedWithValue:!!r,requestStatus:"rejected",aborted:"AbortError"===(null==t?void 0:t.name),condition:"ConditionError"===(null==t?void 0:t.name)})}})),s="undefined"!=typeof AbortController?AbortController:function(){function t(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return t.prototype.abort=function(){},t}();return Object.assign((function(t){return function(a,l,c){var h,u=(null==n?void 0:n.idGenerator)?n.idGenerator(t):function(t){void 0===t&&(t=21);for(var e="",n=t;n--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e}(),d=new s;function f(t){h=t,d.abort()}var p=function(){return s=this,p=null,g=function(){var s,p,g,m,v,b;return function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),null===(w=m=null==(s=null==n?void 0:n.condition)?void 0:s.call(n,t,{getState:l,extra:c}))||"object"!=typeof w||"function"!=typeof w.then?[3,2]:[4,m];case 1:m=y.sent(),y.label=2;case 2:if(!1===m||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return v=new Promise((function(t,e){return d.signal.addEventListener("abort",(function(){return e({name:"AbortError",message:h||"Aborted"})}))})),a(r(u,t,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:u,arg:t},{getState:l,extra:c}))),[4,Promise.race([v,Promise.resolve(e(t,{dispatch:a,getState:l,extra:c,requestId:u,signal:d.signal,abort:f,rejectWithValue:function(t,e){return new qt(t,e)},fulfillWithValue:function(t,e){return new Xt(t,e)}})).then((function(e){if(e instanceof qt)throw e;return e instanceof Xt?i(e.payload,u,t,e.meta):i(e,u,t)}))])];case 3:return g=y.sent(),[3,5];case 4:return b=y.sent(),g=b instanceof qt?o(null,u,t,b.payload,b.meta):o(b,u,t),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(g)&&g.meta.condition||a(g),[2,g]}var w}))},new Promise((function(t,e){var n=function(t){try{r(g.next(t))}catch(t){e(t)}},i=function(t){try{r(g.throw(t))}catch(t){e(t)}},r=function(e){return e.done?t(e.value):Promise.resolve(e.value).then(n,i)};r((g=g.apply(s,p)).next())}));var s,p,g}();return Object.assign(p,{abort:f,requestId:u,arg:t,unwrap:function(){return p.then(Yt)}})}}),{pending:r,rejected:o,fulfilled:i,typePrefix:t})}return t.withTypes=function(){return t},t}();function Yt(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}Object.assign;var Gt="listenerMiddleware";Nt(Gt+"/add"),Nt(Gt+"/removeAll"),Nt(Gt+"/remove"),"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:void 0!==n.g?n.g:globalThis);"undefined"!=typeof window&&window.requestAnimationFrame&&window.requestAnimationFrame,function(){function t(t,e){var n=o[t];return n?n.enumerable=e:o[t]=n={configurable:!0,enumerable:e,get:function(){var e=this[W];return Z.get(e,t)},set:function(e){var n=this[W];Z.set(n,t,e)}},n}function e(t){for(var e=t.length-1;e>=0;e--){var r=t[e][W];if(!r.P)switch(r.i){case 5:i(r)&&$(r);break;case 4:n(r)&&$(r)}}}function n(t){for(var e=t.t,n=t.k,i=q(n),r=i.length-1;r>=0;r--){var o=i[r];if(o!==W){var s=e[o];if(void 0===s&&!l(e,o))return!0;var a=n[o],c=a&&a[W];if(c?c.t!==s:!h(a,s))return!0}}var u=!!e[W];return i.length!==q(e).length+(u?0:1)}function i(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);if(n&&!n.get)return!0;for(var i=0;i<e.length;i++)if(!e.hasOwnProperty(i))return!0;return!1}var o={};!function(t,e){K[t]||(K[t]=e)}("ES5",{J:function(e,n){var i=Array.isArray(e),r=function(e,n){if(e){for(var i=Array(n.length),r=0;r<n.length;r++)Object.defineProperty(i,""+r,t(r,!0));return i}var o=X(n);delete o[W];for(var s=q(o),a=0;a<s.length;a++){var l=s[a];o[l]=t(l,e||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(i,e),o={i:i?5:4,A:n?n.A:y(),P:!1,I:!1,R:{},l:n,t:e,k:r,o:null,g:!1,C:!1};return Object.defineProperty(r,W,{value:o,writable:!0}),r},S:function(t,n,o){o?r(n)&&n[W].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var n=e[W];if(n){var r=n.t,o=n.k,a=n.R,c=n.i;if(4===c)s(o,(function(e){e!==W&&(void 0!==r[e]||l(r,e)?a[e]||t(o[e]):(a[e]=!0,$(n)))})),s(r,(function(t){void 0!==o[t]||l(o,t)||(a[t]=!1,$(n))}));else if(5===c){if(i(n)&&($(n),a.length=!0),o.length<r.length)for(var h=o.length;h<r.length;h++)a[h]=!1;else for(var u=r.length;u<o.length;u++)a[u]=!0;for(var d=Math.min(o.length,r.length),f=0;f<d;f++)o.hasOwnProperty(f)||(a[f]=!0),void 0===a[f]&&t(o[f])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?n(t):i(t)}})}()},6479:function(t,e,n){"use strict";var i=n(1601),r=n.n(i),o=n(6314),s=n.n(o)()(r());s.push([t.id,"html{height:100%}body{height:100%}",""]),e.A=s},6588:function(t,e,n){"use strict";n.d(e,{Ay:function(){return l},fk:function(){return s},rb:function(){return a}});var i=n(8314),r=n(1302),o=n(4946);function s(t){return t instanceof HTMLElement||t instanceof SVGElement}function a(t){return t&&"object"===(0,i.A)(t)&&s(t.nativeElement)?t.nativeElement:s(t)?t:null}function l(t){var e;return a(t)||(t instanceof r.default.Component?null===(e=o.default.findDOMNode)||void 0===e?void 0:e.call(o.default,t):null)}},6783:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{eT:function(){return propsValidation},yz:function(){return createShallowSelector}});var react_redux__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3561),reselect__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1081),reselect__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6234);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var createShallowSelector=(0,reselect__WEBPACK_IMPORTED_MODULE_1__.Ad)(reselect__WEBPACK_IMPORTED_MODULE_2__.UI,react_redux__WEBPACK_IMPORTED_MODULE_0__.bN),propsValidation=function propsValidation(jsCode){try{var jsObject=eval("("+jsCode+")");if("object"!==_typeof(jsObject))throw new Error("You must pass an object")}catch(t){return console.error(t),!1}return!0};function isNotNullable(t){return null!==t}},6925:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6942:function(t,e){var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];n&&(t=s(t,o(n)))}return t}function o(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return r.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var n in t)i.call(t,n)&&t[n]&&(e=s(e,n));return e}function s(t,e){return e?t?t+" "+e:t+e:t}t.exports?(r.default=r,t.exports=r):void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()},6956:function(t,e,n){"use strict";n.d(e,{A:function(){return r}});var i=n(1302);function r(t){var e=i.useRef();e.current=t;var n=i.useCallback((function(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(i))}),[]);return n}},7066:function(t,e,n){"use strict";n.d(e,{A:function(){return $}});var i=n(2587);function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e,n){return(e=function(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var c=n(1302),h=n(6942),u=n.n(h),d=n(5748),f=n(1053);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=n(5089),v=n(2633),b=n(8210);function y(t){return"object"===s(t)&&"string"==typeof t.name&&"string"==typeof t.theme&&("object"===s(t.icon)||"function"==typeof t.icon)}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,n){var i,r=t[n];return"class"===n?(e.className=r,delete e.class):(delete e[n],e[(i=n,i.replace(/-(.)/g,(function(t,e){return e.toUpperCase()})))]=r),e}),{})}function O(t,e,n){return n?c.default.createElement(t.tag,g(g({key:e},w(t.attrs)),n),(t.children||[]).map((function(n,i){return O(n,"".concat(e,"-").concat(t.tag,"-").concat(i))}))):c.default.createElement(t.tag,g({key:e},w(t.attrs)),(t.children||[]).map((function(n,i){return O(n,"".concat(e,"-").concat(t.tag,"-").concat(i))})))}function S(t){return(0,d.cM)(t)[0]}function x(t){return t?Array.isArray(t)?t:[t]:[]}var k=["icon","className","onClick","style","primaryColor","secondaryColor"],C={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},A=function(t){var e,n,i,r,o,s,a,h,u=t.icon,d=t.className,p=t.onClick,w=t.style,x=t.primaryColor,A=t.secondaryColor,M=l(t,k),E=c.useRef(),P=C;if(x&&(P={primaryColor:x,secondaryColor:A||S(x)}),e=E,n=(0,c.useContext)(f.A),i=n.csp,r=n.prefixCls,o=n.layer,s="\n.anticon {\n  display: inline-flex;\n  align-items: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",r&&(s=s.replace(/anticon/g,r)),o&&(s="@layer ".concat(o," {\n").concat(s,"\n}")),(0,c.useEffect)((function(){var t=e.current,n=(0,v.j)(t);(0,m.BD)(s,"@ant-design-icons",{prepend:!o,csp:i,attachTo:n})}),[]),a=y(u),h="icon should be icon definiton, but got ".concat(u),(0,b.Ay)(a,"[@ant-design/icons] ".concat(h)),!y(u))return null;var T=u;return T&&"function"==typeof T.icon&&(T=g(g({},T),{},{icon:T.icon(P.primaryColor,P.secondaryColor)})),O(T.icon,"svg-".concat(T.name),g(g({className:d,onClick:p,style:w,"data-icon":T.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},M),{},{ref:E}))};A.displayName="IconReact",A.getTwoToneColors=function(){return g({},C)},A.setTwoToneColors=function(t){var e=t.primaryColor,n=t.secondaryColor;C.primaryColor=e,C.secondaryColor=n||S(e),C.calculated=!!n};var M=A;function E(t){var e=o(x(t),2),n=e[0],i=e[1];return M.setTwoToneColors({primaryColor:n,secondaryColor:i})}var P=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];E(d.z1.primary);var T=c.forwardRef((function(t,e){var n=t.className,r=t.icon,s=t.spin,h=t.rotate,d=t.tabIndex,p=t.onClick,g=t.twoToneColor,m=l(t,P),v=c.useContext(f.A),b=v.prefixCls,y=void 0===b?"anticon":b,w=v.rootClassName,O=u()(w,y,a(a({},"".concat(y,"-").concat(r.name),!!r.name),"".concat(y,"-spin"),!!s||"loading"===r.name),n),S=d;void 0===S&&p&&(S=-1);var k=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,C=o(x(g),2),A=C[0],E=C[1];return c.createElement("span",(0,i.A)({role:"img","aria-label":r.name},m,{ref:e,tabIndex:S,onClick:p,className:O}),c.createElement(M,{icon:r,primaryColor:A,secondaryColor:E,style:k}))}));T.displayName="AntdIcon",T.getTwoToneColor=function(){var t=M.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor},T.setTwoToneColor=E;var $=T},7304:function(t,e,n){"use strict";function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,{A:function(){return i}})},7358:function(t,e,n){"use strict";n.d(e,{OF:function(){return l},Or:function(){return c},bf:function(){return h}});var i=n(1302),r=n(4930),o=n(2279),s=n(5905),a=n(9319);const{genStyleHooks:l,genComponentStyleHook:c,genSubStyleComponent:h}=(0,r.L_)({usePrefix:()=>{const{getPrefixCls:t,iconPrefixCls:e}=(0,i.useContext)(o.QO);return{rootPrefixCls:t(),iconPrefixCls:e}},useToken:()=>{const[t,e,n,i,r]=(0,a.Ay)();return{theme:t,realToken:e,hashId:n,token:i,cssVar:r}},useCSP:()=>{const{csp:t}=(0,i.useContext)(o.QO);return null!=t?t:{}},getResetStyles:(t,e)=>{var n;const i=(0,s.av)(t);return[i,{"&":i},(0,s.jz)(null!==(n=null==e?void 0:e.prefix.iconPrefixCls)&&void 0!==n?n:o.pM)]},getCommonStyle:s.vj,getCompUnitless:()=>a.Is})},7430:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{u:function(){return WidgetRenderer}});var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2445),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302),_components_errorOverlay__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3380),_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9994),_store_app__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1934);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach((function(e){_defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var safeParseProps=function safeParseProps(widgetProps){try{return eval("("+widgetProps+")")}catch(t){return{kitchenSink:"testing"}}},WidgetRenderer=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)((function(t){var e=t.platform,n=((0,_store__WEBPACK_IMPORTED_MODULE_2__.jL)(),(0,_store__WEBPACK_IMPORTED_MODULE_2__.GV)(_store_app__WEBPACK_IMPORTED_MODULE_3__.Ep)),i=(0,_store__WEBPACK_IMPORTED_MODULE_2__.GV)(_store_app__WEBPACK_IMPORTED_MODULE_3__.vo),r=(0,_store__WEBPACK_IMPORTED_MODULE_2__.GV)(_store_app__WEBPACK_IMPORTED_MODULE_3__.OO),o=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){if(n)return e.utils.widgets.getByUrl(n)}),[n,r]),s=safeParseProps(i);return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Y)(_components_errorOverlay__WEBPACK_IMPORTED_MODULE_1__.h,{children:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Y)(o,_objectSpread({},s))})}))},7526:function(t,e){"use strict";e.byteLength=function(t){var e=a(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,o=a(t),s=o[0],l=o[1],c=new r(function(t,e,n){return 3*(e+n)/4-n}(0,s,l)),h=0,u=l>0?s-4:s;for(n=0;n<u;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],c[h++]=e>>16&255,c[h++]=e>>8&255,c[h++]=255&e;return 2===l&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,c[h++]=255&e),1===l&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,c[h++]=e>>8&255,c[h++]=255&e),c},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,o=[],s=16383,a=0,c=i-r;a<c;a+=s)o.push(l(t,a,a+s>c?c:a+s));return 1===r?(e=t[i-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,i){for(var r,o,s=[],a=e;a<i;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=r)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},7659:function(t){"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},7825:function(t){"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},7826:function(t,e,n){"use strict";n.d(e,{A:function(){return s}});var i=n(8314);function r(t,e,n){return(e=function(t){var e=function(t){if("object"!=(0,i.A)(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=(0,i.A)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==(0,i.A)(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},7965:function(t,e,n){"use strict";var i=n(6426),r={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var n,o,s,a,l,c,h=!1;e||(e={}),n=e.debug||!1;try{if(s=i(),a=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=t,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(i){if(i.stopPropagation(),e.format)if(i.preventDefault(),void 0===i.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=r[e.format]||r.default;window.clipboardData.setData(o,t)}else i.clipboardData.clearData(),i.clipboardData.setData(e.format,t);e.onCopy&&(i.preventDefault(),e.onCopy(i.clipboardData))})),document.body.appendChild(c),a.selectNodeContents(c),l.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");h=!0}catch(i){n&&console.error("unable to copy using execCommand: ",i),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),h=!0}catch(i){n&&console.error("unable to copy using clipboardData: ",i),n&&console.error("falling back to prompt"),o=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,t)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(a):l.removeAllRanges()),c&&document.body.removeChild(c),s()}return h}},8104:function(t,e,n){"use strict";n.d(e,{A:function(){return r}});var i=n(1302);function r(t,e,n){var r=i.useRef({});return"value"in r.current&&!n(r.current.condition,e)||(r.current.value=t(),r.current.condition=e),r.current.value}},8119:function(t,e,n){"use strict";n.d(e,{X:function(){return o}});var i=n(1302);const r=i.createContext(!1),o=({children:t,disabled:e})=>{const n=i.useContext(r);return i.createElement(r.Provider,{value:null!=e?e:n},t)};e.A=r},8210:function(t,e,n){"use strict";n.d(e,{$e:function(){return o}});var i={},r=[];function o(t,e){}function s(t,e){}function a(t,e,n){e||i[n]||(t(!1,n),i[n]=!0)}function l(t,e){a(o,t,e)}l.preMessage=function(t){r.push(t)},l.resetWarned=function(){i={}},l.noteOnce=function(t,e){a(s,t,e)},e.Ay=l},8224:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var i=n(1302);const r=i.createContext(void 0),o=({children:t,size:e})=>{const n=i.useContext(r);return i.createElement(r.Provider,{value:e||n},t)};e.A=r},8287:function(t,e,n){"use strict";var i=n(7526),r=n(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=function(t){return+t!=t&&(t=0),l.alloc(+t)},e.INSPECT_MAX_BYTES=50;var s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|g(t,e),i=a(n),r=i.write(t,e);return r!==n&&(i=i.slice(0,r)),i}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Q(t,Uint8Array)){var e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Q(t,ArrayBuffer)||t&&Q(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(Q(t,SharedArrayBuffer)||t&&Q(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return l.from(i,e,n);var r=function(t){if(l.isBuffer(t)){var e=0|p(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||H(t.length)?a(0):d(t):"Buffer"===t.type&&Array.isArray(t.data)?d(t.data):void 0}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return h(t),a(t<0?0:0|p(t))}function d(t){for(var e=t.length<0?0:0|p(t.length),n=a(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(i,l.prototype),i}function p(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function g(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return _(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return I(t).length;default:if(r)return i?-1:_(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function v(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function b(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),H(n=+n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var o,s=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var h=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===l)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var u=!0,d=0;d<l;d++)if(c(t,o+d)!==c(e,d)){u=!1;break}if(u)return o}return-1}function w(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(H(a))return s;t[n+s]=a}return s}function O(t,e,n,i){return z(_(e,t.length-n),t,n,i)}function S(t,e,n,i){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function x(t,e,n,i){return z(I(e),t,n,i)}function k(t,e,n,i){return z(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function C(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,l,c=t[r],h=null,u=c>239?4:c>223?3:c>191?2:1;if(r+u<=n)switch(u){case 1:c<128&&(h=c);break;case 2:128==(192&(o=t[r+1]))&&(l=(31&c)<<6|63&o)>127&&(h=l);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(h=l)}null===h?(h=65533,u=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),r+=u}return function(t){var e=t.length;if(e<=M)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=M));return n}(i)}e.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(t,e,n){return function(t,e,n){return h(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},l.allocUnsafe=function(t){return u(t)},l.allocUnsafeSlow=function(t){return u(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(Q(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),Q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var o=t[n];if(Q(o,Uint8Array))r+o.length>i.length?l.from(o).copy(i,r):Uint8Array.prototype.set.call(i,o,r);else{if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r)}r+=o.length}return i},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},l.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(t,e,n,i,r){if(Q(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(i,r),h=t.slice(e,n),u=0;u<a;++u)if(c[u]!==h[u]){o=c[u],s=h[u];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return O(this,t,e,n);case"ascii":case"latin1":case"binary":return S(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function E(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function P(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function T(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=V[t[o]];return r}function $(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length-1;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,i,r,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function B(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,i,o){return e=+e,n>>>=0,o||B(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function L(t,e,n,i,o){return e=+e,n>>>=0,o||B(t,0,n,8),r.write(t,e,n,i,52,8),n+8}l.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var i=this.subarray(t,e);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||D(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||D(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return t>>>=0,e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){t>>>=0,e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return t>>>=0,e||D(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||D(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||D(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||D(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s|0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r=i-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),e),r},l.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var r=t.charCodeAt(0);("utf8"===i&&r<128||"latin1"===i)&&(t=r)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=l.isBuffer(t)?t:l.from(t,i),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var j=/[^+/0-9A-Za-z-_]/g;function _(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function I(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function Q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function H(t){return t!=t}var V=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var i=16*n,r=0;r<16;++r)e[i+r]=t[n]+t[r];return e}()},8314:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}n.d(e,{A:function(){return i}})},8493:function(t,e,n){"use strict";var i=n(1302),r="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},o=i.useState,s=i.useEffect,a=i.useLayoutEffect,l=i.useDebugValue;function c(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!r(t,n)}catch(t){return!0}}var h="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),i=o({inst:{value:n,getSnapshot:e}}),r=i[0].inst,h=i[1];return a((function(){r.value=n,r.getSnapshot=e,c(r)&&h({inst:r})}),[t,n,e]),s((function(){return c(r)&&h({inst:r}),t((function(){c(r)&&h({inst:r})}))}),[t]),l(n),n};e.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:h},8656:function(t,e,n){"use strict";n.d(e,{L:function(){return w}}),n(1302);var i=n(4946),r=n(8314);function o(){o=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function h(t,e,n,i){return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i})}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function u(e,n,i,r){var o=n&&n.prototype instanceof p?n:p,s=Object.create(o.prototype);return h(s,"_invoke",function(e,n,i){var r=1;return function(o,s){if(3===r)throw Error("Generator is already running");if(4===r){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var l=x(a,i);if(l){if(l===f)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(1===r)throw r=4,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=3;var c=d(e,n,i);if("normal"===c.type){if(r=i.done?4:2,c.arg===f)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=4,i.method="throw",i.arg=c.arg)}}}(e,i,new A(r||[])),!0),s}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f={};function p(){}function g(){}function m(){}var v={};h(v,a,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(M([])));y&&y!==n&&i.call(y,a)&&(v=y);var w=m.prototype=p.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,s,a,l){var c=d(t[o],t,s);if("throw"!==c.type){var h=c.arg,u=h.value;return u&&"object"==(0,r.A)(u)&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(u).then((function(t){h.value=t,a(h)}),(function(t){return n("throw",t,a,l)}))}l(c.arg)}var o;h(this,"_invoke",(function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return o=o?o.then(r,r):r()}),!0)}function x(e,n){var i=n.method,r=e.i[i];if(r===t)return n.delegate=null,"throw"===i&&e.i.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),f;var o=d(r,e.i,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var s=o.arg;return s?s.done?(n[e.r]=s.value,n.next=e.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function k(t){this.tryEntries.push(t)}function C(e){var n=e[4]||{};n.type="normal",n.arg=t,e[4]=n}function A(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function M(e){if(null!=e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError((0,r.A)(e)+" is not iterable")}return g.prototype=m,h(w,"constructor",m),h(m,"constructor",g),g.displayName=h(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,h(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},O(S.prototype),h(S.prototype,l,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var s=new S(u(t,n,i,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},O(w),h(w,c,"Generator"),h(w,a,(function(){return this})),h(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.unshift(i);return function t(){for(;n.length;)if((i=n.pop())in e)return t.value=i,t.done=!1,t;return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(t){s.type="throw",s.arg=e,n.next=t}for(var r=n.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o[4],a=this.prev,l=o[1],c=o[2];if(-1===o[0])return i("end"),!1;if(!l&&!c)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=a){if(a<l)return this.method="next",this.arg=t,i(l),!0;if(a<c)return i(c),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i[0]>-1&&i[0]<=this.prev&&this.prev<i[2]){var r=i;break}}r&&("break"===t||"continue"===t)&&r[0]<=e&&e<=r[2]&&(r=null);var o=r?r[4]:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r[2],f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),C(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var i=n[4];if("throw"===i.type){var r=i.arg;C(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={i:M(e),r:n,n:i},"next"===this.method&&(this.arg=t),f}},e}function s(t,e,n,i,r,o,s){try{var a=t[o](s),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,r)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){s(o,i,r,a,l,"next",t)}function l(t){s(o,i,r,a,l,"throw",t)}a(void 0)}))}}var l,c=(0,n(7826).A)({},i),h=c.version,u=c.render,d=c.unmountComponentAtNode;try{Number((h||"").split(".")[0])>=18&&(l=c.createRoot)}catch(t){}function f(t){var e=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&"object"===(0,r.A)(e)&&(e.usingClientEntryPoint=t)}var p="__rc_react_root__";function g(t){return m.apply(this,arguments)}function m(){return(m=a(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve().then((function(){var t;null===(t=e[p])||void 0===t||t.unmount(),delete e[p]})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){d(t)}function b(){return(b=a(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===l){t.next=2;break}return t.abrupt("return",g(e));case 2:v(e);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}let y=(t,e)=>(function(t,e){l?function(t,e){f(!0);var n=e[p]||l(e);f(!1),n.render(t),e[p]=n}(t,e):function(t,e){null==u||u(t,e)}(t,e)}(t,e),()=>function(t){return b.apply(this,arguments)}(e));function w(t){return t&&(y=t),y}},8715:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}function o(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function a(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,{Mo:function(){return ae},J:function(){return k},an:function(){return $},Ki:function(){return z},zA:function(){return _},RC:function(){return oe},hV:function(){return et},IV:function(){return ne}});var d=function(t){for(var e,n=0,i=0,r=t.length;r>=4;++i,r-=4)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&t.charCodeAt(i+2))<<16;case 2:n^=(255&t.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},f=n(5089),p=n(1302);function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function v(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n(8104),n(3210);var b="%";function y(t){return t.join(b)}var w=function(){function t(e){g(this,t),o(this,"instanceId",void 0),o(this,"cache",new Map),this.instanceId=e}return v(t,[{key:"get",value:function(t){return this.opGet(y(t))}},{key:"opGet",value:function(t){return this.cache.get(t)||null}},{key:"update",value:function(t,e){return this.opUpdate(y(t),e)}},{key:"opUpdate",value:function(t,e){var n=e(this.cache.get(t));null===n?this.cache.delete(t):this.cache.set(t,n)}}]),t}(),O="data-token-hash",S="data-css-hash",x="__cssinjs_instance__";var k=p.createContext({hashPriority:"low",cache:function(){var t=Math.random().toString(12).slice(2);if("undefined"!=typeof document&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(S,"]"))||[],n=document.head.firstChild;Array.from(e).forEach((function(e){e[x]=e[x]||t,e[x]===t&&document.head.insertBefore(e,n)}));var i={};Array.from(document.querySelectorAll("style[".concat(S,"]"))).forEach((function(e){var n,r=e.getAttribute(S);i[r]?e[x]===t&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e)):i[r]=!0}))}return new w(t)}(),defaultCache:!0}),C=n(998);new RegExp("CALC_UNIT","g");var A=function(){function t(){g(this,t),o(this,"cache",void 0),o(this,"keys",void 0),o(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return v(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={map:this.cache};return t.forEach((function(t){var e;r=r?null===(e=r)||void 0===e||null===(e=e.map)||void 0===e?void 0:e.get(t):void 0})),null!==(e=r)&&void 0!==e&&e.value&&i&&(r.value[1]=this.cacheCallTimes++),null===(n=r)||void 0===n?void 0:n.value}},{key:"get",value:function(t){var e;return null===(e=this.internalGet(t,!0))||void 0===e?void 0:e[0]}},{key:"has",value:function(t){return!!this.internalGet(t)}},{key:"set",value:function(e,n){var i=this;if(!this.has(e)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var r=this.keys.reduce((function(t,e){var n=l(t,2)[1];return i.internalGet(e)[1]<n?[e,i.internalGet(e)[1]]:t}),[this.keys[0],this.cacheCallTimes]),o=l(r,1)[0];this.delete(o)}this.keys.push(e)}var s=this.cache;e.forEach((function(t,r){if(r===e.length-1)s.set(t,{value:[n,i.cacheCallTimes++]});else{var o=s.get(t);o?o.map||(o.map=new Map):s.set(t,{map:new Map}),s=s.get(t).map}}))}},{key:"deleteByPath",value:function(t,e){var n,i=t.get(e[0]);if(1===e.length)return i.map?t.set(e[0],{map:i.map}):t.delete(e[0]),null===(n=i.value)||void 0===n?void 0:n[0];var r=this.deleteByPath(i.map,e.slice(1));return i.map&&0!==i.map.size||i.value||t.delete(e[0]),r}},{key:"delete",value:function(t){if(this.has(t))return this.keys=this.keys.filter((function(e){return!function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(e,t)})),this.deleteByPath(this.cache,t)}}]),t}();o(A,"MAX_CACHE_SIZE",20),o(A,"MAX_CACHE_OFFSET",5);var M=n(8210),E=0,P=function(){function t(e){g(this,t),o(this,"derivatives",void 0),o(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=E,0===e.length&&(0,M.$e)(e.length>0,"[Ant Design CSS-in-JS] Theme should have at least one derivative function."),E+=1}return v(t,[{key:"getDerivativeToken",value:function(t){return this.derivatives.reduce((function(e,n){return n(t,e)}),void 0)}}]),t}(),T=new A;function $(t){var e=Array.isArray(t)?t:[t];return T.has(e)||T.set(e,new P(e)),T.get(e)}var D=new WeakMap,R={},B=new WeakMap;function N(t){var e=B.get(t)||"";return e||(Object.keys(t).forEach((function(n){var r=t[n];e+=n,r instanceof P?e+=r.id:r&&"object"===i(r)?e+=N(r):e+=r})),e=d(e),B.set(t,e)),e}function L(t,e){return d("".concat(e,"_").concat(N(t)))}"random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,"");var j=(0,C.A)();function _(t){return"number"==typeof t?"".concat(t,"px"):t}function I(t,e,n){var i;if(arguments.length>4&&void 0!==arguments[4]&&arguments[4])return t;var r=u(u({},arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),{},(o(i={},O,e),o(i,S,n),i)),s=Object.keys(r).map((function(t){var e=r[t];return e?"".concat(t,'="').concat(e,'"'):null})).filter((function(t){return t})).join(" ");return"<style ".concat(s,">").concat(t,"</style>")}var z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"--".concat(e?"".concat(e,"-"):"").concat(t).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},Q=function(t,e,n){return Object.keys(t).length?".".concat(e).concat(null!=n&&n.scope?".".concat(n.scope):"","{").concat(Object.entries(t).map((function(t){var e=l(t,2),n=e[0],i=e[1];return"".concat(n,":").concat(i,";")})).join(""),"}"):""},H=function(t,e,n){var i={},r={};return Object.entries(t).forEach((function(t){var e,o,s=l(t,2),a=s[0],c=s[1];if(null!=n&&null!==(e=n.preserve)&&void 0!==e&&e[a])r[a]=c;else if(!("string"!=typeof c&&"number"!=typeof c||null!=n&&null!==(o=n.ignore)&&void 0!==o&&o[a])){var h,u=z(a,null==n?void 0:n.prefix);i[u]="number"!=typeof c||null!=n&&null!==(h=n.unitless)&&void 0!==h&&h[a]?String(c):"".concat(c,"px"),r[a]="var(".concat(u,")")}})),[r,Q(i,e,{scope:null==n?void 0:n.scope})]},V=n(981),W=u({},p).useInsertionEffect,F=W?function(t,e,n){return W((function(){return t(),e()}),n)}:function(t,e,n){p.useMemo(t,n),(0,V.A)((function(){return e(!0)}),n)},q=void 0!==u({},p).useInsertionEffect?function(t){var e=[],n=!1;return p.useEffect((function(){return n=!1,function(){n=!0,e.length&&e.forEach((function(t){return t()}))}}),t),function(t){n||e.push(t)}}:function(){return function(t){t()}},X=function(){return!1};function K(t,e,n,i,r){var o=p.useContext(k).cache,s=y([t].concat(c(e))),a=q([s]),h=(X(),function(t){o.opUpdate(s,(function(e){var i=l(e||[void 0,void 0],2),r=i[0],o=[void 0===r?0:r,i[1]||n()];return t?t(o):o}))});p.useMemo((function(){h()}),[s]);var u=o.opGet(s)[1];return F((function(){null==r||r(u)}),(function(t){return h((function(e){var n=l(e,2),i=n[0],o=n[1];return t&&0===i&&(null==r||r(u)),[i+1,o]})),function(){o.opUpdate(s,(function(e){var n=l(e||[],2),r=n[0],c=void 0===r?0:r,h=n[1];return 0==c-1?(a((function(){!t&&o.opGet(s)||null==i||i(h,!1)})),null):[c-1,h]}))}}),[s]),u}var Z={},Y="css",G=new Map,U=0;var J=function(t,e,n,i){var r=u(u({},n.getDerivativeToken(t)),e);return i&&(r=i(r)),r},tt="token";function et(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,p.useContext)(k),r=i.cache.instanceId,o=i.container,s=n.salt,a=void 0===s?"":s,h=n.override,g=void 0===h?Z:h,m=n.formatToken,v=n.getComputedToken,b=n.cssVar,y=function(t,n){for(var i=D,r=0;r<n.length;r+=1){var o=n[r];i.has(o)||i.set(o,new WeakMap),i=i.get(o)}return i.has(R)||i.set(R,Object.assign.apply(Object,[{}].concat(c(e)))),i.get(R)}(0,e),w=N(y),C=N(g),A=b?N(b):"",M=K(tt,[a,t.id,w,C,A],(function(){var e,n=v?v(y,g,t):J(y,g,t,m),i=u({},n),r="";if(b){var o=l(H(n,b.key,{prefix:b.prefix,ignore:b.ignore,unitless:b.unitless,preserve:b.preserve}),2);n=o[0],r=o[1]}var s=L(n,a);n._tokenKey=s,i._tokenKey=L(i,a);var c=null!==(e=null==b?void 0:b.key)&&void 0!==e?e:s;n._themeKey=c,function(t){G.set(t,(G.get(t)||0)+1)}(c);var h="".concat(Y,"-").concat(d(s));return n._hashId=h,[n,h,i,r,(null==b?void 0:b.key)||""]}),(function(t){!function(t,e){G.set(t,(G.get(t)||0)-1);var n=Array.from(G.keys()),i=n.filter((function(t){return(G.get(t)||0)<=0}));n.length-i.length>U&&i.forEach((function(t){!function(t,e){"undefined"!=typeof document&&document.querySelectorAll("style[".concat(O,'="').concat(t,'"]')).forEach((function(t){var n;t[x]===e&&(null===(n=t.parentNode)||void 0===n||n.removeChild(t))}))}(t,e),G.delete(t)}))}(t[0]._themeKey,r)}),(function(t){var e=l(t,4),n=e[0],i=e[3];if(b&&i){var s=(0,f.BD)(i,d("css-variables-".concat(n._themeKey)),{mark:S,prepend:"queue",attachTo:o,priority:-999});s[x]=r,s.setAttribute(O,n._themeKey)}}));return M}function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nt.apply(null,arguments)}var it={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},rt="comm",ot="rule",st="decl",at="@import",lt="@namespace",ct="@keyframes",ht="@layer",ut=Math.abs,dt=String.fromCharCode;function ft(t){return t.trim()}function pt(t,e,n){return t.replace(e,n)}function gt(t,e,n){return t.indexOf(e,n)}function mt(t,e){return 0|t.charCodeAt(e)}function vt(t,e,n){return t.slice(e,n)}function bt(t){return t.length}function yt(t,e){return e.push(t),t}function wt(t,e){for(var n="",i=0;i<t.length;i++)n+=e(t[i],i,t,e)||"";return n}function Ot(t,e,n,i){switch(t.type){case ht:if(t.children.length)break;case at:case lt:case st:return t.return=t.return||t.value;case rt:return"";case ct:return t.return=t.value+"{"+wt(t.children,i)+"}";case ot:if(!bt(t.value=t.props.join(",")))return""}return bt(n=wt(t.children,i))?t.return=t.value+"{"+n+"}":""}Object.assign;var St=1,xt=1,kt=0,Ct=0,At=0,Mt="";function Et(t,e,n,i,r,o,s,a){return{value:t,root:e,parent:n,type:i,props:r,children:o,line:St,column:xt,length:s,return:"",siblings:a}}function Pt(){return At=Ct>0?mt(Mt,--Ct):0,xt--,10===At&&(xt=1,St--),At}function Tt(){return At=Ct<kt?mt(Mt,Ct++):0,xt++,10===At&&(xt=1,St++),At}function $t(){return mt(Mt,Ct)}function Dt(){return Ct}function Rt(t,e){return vt(Mt,t,e)}function Bt(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Nt(t){return ft(Rt(Ct-1,_t(91===t?t+2:40===t?t+1:t)))}function Lt(t){for(;(At=$t())&&At<33;)Tt();return Bt(t)>2||Bt(At)>3?"":" "}function jt(t,e){for(;--e&&Tt()&&!(At<48||At>102||At>57&&At<65||At>70&&At<97););return Rt(t,Dt()+(e<6&&32==$t()&&32==Tt()))}function _t(t){for(;Tt();)switch(At){case t:return Ct;case 34:case 39:34!==t&&39!==t&&_t(At);break;case 40:41===t&&_t(t);break;case 92:Tt()}return Ct}function It(t,e){for(;Tt()&&t+At!==57&&(t+At!==84||47!==$t()););return"/*"+Rt(e,Ct-1)+"*"+dt(47===t?t:Tt())}function zt(t){for(;!Bt($t());)Tt();return Rt(t,Ct)}function Qt(t){return function(t){return Mt="",t}(Ht("",null,null,null,[""],t=function(t){return St=xt=1,kt=bt(Mt=t),Ct=0,[]}(t),0,[0],t))}function Ht(t,e,n,i,r,o,s,a,l){for(var c=0,h=0,u=s,d=0,f=0,p=0,g=1,m=1,v=1,b=0,y="",w=r,O=o,S=i,x=y;m;)switch(p=b,b=Tt()){case 40:if(108!=p&&58==mt(x,u-1)){-1!=gt(x+=pt(Nt(b),"&","&\f"),"&\f",ut(c?a[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:x+=Nt(b);break;case 9:case 10:case 13:case 32:x+=Lt(p);break;case 92:x+=jt(Dt()-1,7);continue;case 47:switch($t()){case 42:case 47:yt(Wt(It(Tt(),Dt()),e,n,l),l),5!=Bt(p||1)&&5!=Bt($t()||1)||!bt(x)||" "===vt(x,-1,void 0)||(x+=" ");break;default:x+="/"}break;case 123*g:a[c++]=bt(x)*v;case 125*g:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+h:-1==v&&(x=pt(x,/\f/g,"")),f>0&&(bt(x)-u||0===g&&47===p)&&yt(f>32?Ft(x+";",i,n,u-1,l):Ft(pt(x," ","")+";",i,n,u-2,l),l);break;case 59:x+=";";default:if(yt(S=Vt(x,e,n,c,h,r,a,y,w=[],O=[],u,o),o),123===b)if(0===h)Ht(x,e,S,S,w,o,u,a,O);else{switch(d){case 99:if(110===mt(x,3))break;case 108:if(97===mt(x,2))break;default:h=0;case 100:case 109:case 115:}h?Ht(t,S,S,i&&yt(Vt(t,S,S,0,0,r,a,y,r,w=[],u,O),O),r,O,u,a,i?w:O):Ht(x,S,S,S,[""],O,0,a,O)}}c=h=f=0,g=v=1,y=x="",u=s;break;case 58:u=1+bt(x),f=p;default:if(g<1)if(123==b)--g;else if(125==b&&0==g++&&125==Pt())continue;switch(x+=dt(b),b*g){case 38:v=h>0?1:(x+="\f",-1);break;case 44:a[c++]=(bt(x)-1)*v,v=1;break;case 64:45===$t()&&(x+=Nt(Tt())),d=$t(),h=u=bt(y=x+=zt(Dt())),b++;break;case 45:45===p&&2==bt(x)&&(g=0)}}return o}function Vt(t,e,n,i,r,o,s,a,l,c,h,u){for(var d=r-1,f=0===r?o:[""],p=function(t){return t.length}(f),g=0,m=0,v=0;g<i;++g)for(var b=0,y=vt(t,d+1,d=ut(m=s[g])),w=t;b<p;++b)(w=ft(m>0?f[b]+" "+y:pt(y,/&\f/g,f[b])))&&(l[v++]=w);return Et(t,e,n,0===r?ot:a,l,c,h,u)}function Wt(t,e,n,i){return Et(t,e,n,rt,dt(At),vt(t,2,-2),0,i)}function Ft(t,e,n,i,r){return Et(t,e,n,st,vt(t,0,i),vt(t,i+1,-1),i,r)}var qt,Xt="data-ant-cssinjs-cache-path",Kt="_FILE_STYLE__",Zt=!0;var Yt="_multi_value_";function Gt(t){return wt(Qt(t),Ot).replace(/\{%%%\:[^;];}/g,";")}var Ut=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{root:!0,parentSelectors:[]},o=r.root,s=r.injectHash,a=r.parentSelectors,h=n.hashId,d=n.layer,f=(n.path,n.hashPriority),p=n.transformers,g=void 0===p?[]:p,m=(n.linters,""),v={};function b(e){var i=e.getName(h);if(!v[i]){var r=l(t(e.style,n,{root:!1,parentSelectors:a}),1)[0];v[i]="@keyframes ".concat(e.getName(h)).concat(r)}}var y=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach((function(e){Array.isArray(e)?t(e,n):e&&n.push(e)})),n}(Array.isArray(e)?e:[e]);return y.forEach((function(e){var r="string"!=typeof e||o?e:{};if("string"==typeof r)m+="".concat(r,"\n");else if(r._keyframe)b(r);else{var d=g.reduce((function(t,e){var n;return(null==e||null===(n=e.visit)||void 0===n?void 0:n.call(e,t))||t}),r);Object.keys(d).forEach((function(e){var r=d[e];if("object"!==i(r)||!r||"animationName"===e&&r._keyframe||function(t){return"object"===i(t)&&t&&("_skip_check_"in t||Yt in t)}(r)){var p;function C(t,e){var n=t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())})),i=e;it[t]||"number"!=typeof i||0===i||(i="".concat(i,"px")),"animationName"===t&&null!=e&&e._keyframe&&(b(e),i=e.getName(h)),m+="".concat(n,":").concat(i,";")}var g=null!==(p=null==r?void 0:r.value)&&void 0!==p?p:r;"object"===i(r)&&null!=r&&r[Yt]&&Array.isArray(g)?g.forEach((function(t){C(e,t)})):C(e,g)}else{var y=!1,w=e.trim(),O=!1;(o||s)&&h?w.startsWith("@")?y=!0:w=function(t,e,n){if(!e)return t;var i=".".concat(e),r="low"===n?":where(".concat(i,")"):i;return t.split(",").map((function(t){var e,n=t.trim().split(/\s+/),i=n[0]||"",o=(null===(e=i.match(/^\w+/))||void 0===e?void 0:e[0])||"";return[i="".concat(o).concat(r).concat(i.slice(o.length))].concat(c(n.slice(1))).join(" ")})).join(",")}("&"===w?"":e,h,f):!o||h||"&"!==w&&""!==w||(w="",O=!0);var S=l(t(r,n,{root:O,injectHash:y,parentSelectors:[].concat(c(a),[w])}),2),x=S[0],k=S[1];v=u(u({},v),k),m+="".concat(w).concat(x)}}))}})),o?d&&(m&&(m="@layer ".concat(d.name," {").concat(m,"}")),d.dependencies&&(v["@layer ".concat(d.name)]=d.dependencies.map((function(t){return"@layer ".concat(t,", ").concat(d.name,";")})).join("\n"))):m="{".concat(m,"}"),[m,v]};function Jt(t,e){return d("".concat(t.join("%")).concat(e))}function te(){return null}var ee="style";function ne(t,e){var n=t.token,i=t.path,r=t.hashId,s=t.layer,a=t.nonce,h=t.clientOnly,d=t.order,g=void 0===d?0:d,m=p.useContext(k),v=m.autoClear,b=(m.mock,m.defaultCache),y=m.hashPriority,w=m.container,A=m.ssrInline,M=m.transformers,E=m.linters,P=m.cache,T=m.layer,$=n._tokenKey,D=[$];T&&D.push("layer"),D.push.apply(D,c(i));var R=j,B=K(ee,D,(function(){var t=D.join("|");if(function(t){return function(){if(!qt&&(qt={},(0,C.A)())){var t=document.createElement("div");t.className=Xt,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var e=getComputedStyle(t).content||"";(e=e.replace(/^"/,"").replace(/"$/,"")).split(";").forEach((function(t){var e=l(t.split(":"),2),n=e[0],i=e[1];qt[n]=i}));var n,i=document.querySelector("style[".concat(Xt,"]"));i&&(Zt=!1,null===(n=i.parentNode)||void 0===n||n.removeChild(i)),document.body.removeChild(t)}}(),!!qt[t]}(t)){var n=function(t){var e=qt[t],n=null;if(e&&(0,C.A)())if(Zt)n=Kt;else{var i=document.querySelector("style[".concat(S,'="').concat(qt[t],'"]'));i?n=i.innerHTML:delete qt[t]}return[n,e]}(t),o=l(n,2),a=o[0],c=o[1];if(a)return[a,$,c,{},h,g]}var u=e(),d=l(Ut(u,{hashId:r,hashPriority:y,layer:T?s:void 0,path:i.join("-"),transformers:M,linters:E}),2),f=d[0],p=d[1],m=Gt(f),v=Jt(D,m);return[m,$,v,p,h,g]}),(function(t,e){var n=l(t,3)[2];(e||v)&&j&&(0,f.m6)(n,{mark:S})}),(function(t){var e=l(t,4),n=e[0],i=(e[1],e[2]),r=e[3];if(R&&n!==Kt){var o={mark:S,prepend:!T&&"queue",attachTo:w,priority:g},s="function"==typeof a?a():a;s&&(o.csp={nonce:s});var c=[],h=[];Object.keys(r).forEach((function(t){t.startsWith("@layer")?c.push(t):h.push(t)})),c.forEach((function(t){(0,f.BD)(Gt(r[t]),"_layer-".concat(t),u(u({},o),{},{prepend:!0}))}));var d=(0,f.BD)(n,i,o);d[x]=P.instanceId,d.setAttribute(O,$),h.forEach((function(t){(0,f.BD)(Gt(r[t]),"_effect-".concat(t),o)}))}})),N=l(B,3),L=N[0],_=N[1],I=N[2];return function(t){var e,n;return e=A&&!R&&b?p.createElement("style",nt({},(o(n={},O,_),o(n,S,I),n),{dangerouslySetInnerHTML:{__html:L}})):p.createElement(te,null),p.createElement(p.Fragment,null,e,t)}}var ie,re="cssVar",oe=function(t,e){var n=t.key,i=t.prefix,r=t.unitless,o=t.ignore,s=t.token,a=t.scope,h=void 0===a?"":a,u=(0,p.useContext)(k),d=u.cache.instanceId,g=u.container,m=s._tokenKey,v=[].concat(c(t.path),[n,h,m]);return K(re,v,(function(){var t=e(),s=l(H(t,n,{prefix:i,unitless:r,ignore:o,scope:h}),2),a=s[0],c=s[1];return[a,c,Jt(v,c),n]}),(function(t){var e=l(t,3)[2];j&&(0,f.m6)(e,{mark:S})}),(function(t){var e=l(t,3),i=e[1],r=e[2];if(i){var o=(0,f.BD)(i,r,{mark:S,prepend:"queue",attachTo:g,priority:-999});o[x]=d,o.setAttribute(O,n)}}))};o(ie={},ee,(function(t,e,n){var i=l(t,6),r=i[0],o=i[1],s=i[2],a=i[3],c=i[4],h=i[5],u=(n||{}).plain;if(c)return null;var d=r,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(h)};return d=I(r,o,s,f,u),a&&Object.keys(a).forEach((function(t){if(!e[t]){e[t]=!0;var n=I(Gt(a[t]),o,"_effect-".concat(t),f,u);t.startsWith("@layer")?d=n+d:d+=n}})),[h,s,d]})),o(ie,tt,(function(t,e,n){var i=l(t,5),r=i[2],o=i[3],s=i[4],a=(n||{}).plain;if(!o)return null;var c=r._tokenKey;return[-999,c,I(o,s,c,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},a)]})),o(ie,re,(function(t,e,n){var i=l(t,4),r=i[1],o=i[2],s=i[3],a=(n||{}).plain;return r?[-999,o,I(r,s,o,{"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)},a)]:null}));var se=function(){function t(e,n){g(this,t),o(this,"name",void 0),o(this,"style",void 0),o(this,"_keyframe",!0),this.name=e,this.style=n}return v(t,[{key:"getName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t?"".concat(t,"-").concat(this.name):this.name}}]),t}(),ae=se;function le(t){return t.notSplit=!0,t}le(["borderTop","borderBottom"]),le(["borderTop"]),le(["borderBottom"]),le(["borderLeft","borderRight"]),le(["borderLeft"]),le(["borderRight"])},8719:function(t,e,n){"use strict";n.d(e,{A9:function(){return g},H3:function(){return p},K4:function(){return h},Xf:function(){return c},f3:function(){return d},xK:function(){return u}});var i=n(8314),r=n(1302),o=n(4363),s=n(8104),a=n(6288),l=Number(r.version.split(".")[0]),c=function(t,e){"function"==typeof t?t(e):"object"===(0,i.A)(t)&&t&&"current"in t&&(t.current=e)},h=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.filter(Boolean);return i.length<=1?i[0]:function(t){e.forEach((function(e){c(e,t)}))}},u=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,s.A)((function(){return h.apply(void 0,e)}),e,(function(t,e){return t.length!==e.length||t.every((function(t,n){return t!==e[n]}))}))},d=function(t){var e,n;if(!t)return!1;if(f(t)&&l>=19)return!0;var i=(0,o.isMemo)(t)?t.type.type:t.type;return!!("function"!=typeof i||null!==(e=i.prototype)&&void 0!==e&&e.render||i.$$typeof===o.ForwardRef)&&!!("function"!=typeof t||null!==(n=t.prototype)&&void 0!==n&&n.render||t.$$typeof===o.ForwardRef)};function f(t){return(0,r.isValidElement)(t)&&!(0,a.A)(t)}var p=function(t){return f(t)&&d(t)},g=function(t){if(t&&f(t)){var e=t;return e.props.propertyIsEnumerable("ref")?e.props.ref:e.ref}return null}},8831:function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,{A:function(){return r}})},9242:function(t,e,n){"use strict";t.exports=n(2162)},9309:function(t,e,n){"use strict";n.d(e,{A:function(){return d},h:function(){return g}});var i=n(8314),r=n(7826),o=n(2490),s=n(5723),a=n(4123),l=n(2322),c=n(7304),h=n(6300);function u(t,e,n,i){if(!e.length)return n;var h,d,f=(h=e,(0,s.A)(h)||(0,a.A)(h)||(0,l.A)(h)||(0,c.A)()),p=f[0],g=f.slice(1);return d=t||"number"!=typeof p?Array.isArray(t)?(0,o.A)(t):(0,r.A)({},t):[],i&&void 0===n&&1===g.length?delete d[p][g[0]]:d[p]=u(d[p],g,n,i),d}function d(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.length&&i&&void 0===n&&!(0,h.A)(t,e.slice(0,-1))?t:u(t,e,n,i)}function f(t){return Array.isArray(t)?[]:{}}var p="undefined"==typeof Reflect?Object.keys:Reflect.ownKeys;function g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=f(e[0]);return e.forEach((function(t){!function e(n,s){var a,l=new Set(s),c=(0,h.A)(t,n),u=Array.isArray(c);if(u||(a=c,"object"===(0,i.A)(a)&&null!==a&&Object.getPrototypeOf(a)===Object.prototype)){if(!l.has(c)){l.add(c);var g=(0,h.A)(r,n);u?r=d(r,n,[]):g&&"object"===(0,i.A)(g)||(r=d(r,n,f(c))),p(c).forEach((function(t){e([].concat((0,o.A)(n),[t]),l)}))}}else r=d(r,n,c)}([])})),r}},9319:function(t,e,n){"use strict";n.d(e,{Ay:function(){return b},Is:function(){return p}});var i=n(1302),r=n(8715),o="5.25.3",s=n(9806),a=n(5265),l=n(723),c=n(938),h=n(5045),u=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};function d(t){const{override:e}=t,n=u(t,["override"]),i=Object.assign({},e);Object.keys(l.A).forEach((t=>{delete i[t]}));const r=Object.assign(Object.assign({},n),i);if(!1===r.motion){const t="0s";r.motionDurationFast=t,r.motionDurationMid=t,r.motionDurationSlow=t}return Object.assign(Object.assign(Object.assign({},r),{colorFillContent:r.colorFillSecondary,colorFillContentHover:r.colorFill,colorFillAlter:r.colorFillQuaternary,colorBgContainerDisabled:r.colorFillTertiary,colorBorderBg:r.colorBgContainer,colorSplit:(0,h.A)(r.colorBorderSecondary,r.colorBgContainer),colorTextPlaceholder:r.colorTextQuaternary,colorTextDisabled:r.colorTextQuaternary,colorTextHeading:r.colorText,colorTextLabel:r.colorTextSecondary,colorTextDescription:r.colorTextTertiary,colorTextLightSolid:r.colorWhite,colorHighlight:r.colorError,colorBgTextHover:r.colorFillSecondary,colorBgTextActive:r.colorFill,colorIcon:r.colorTextTertiary,colorIconHover:r.colorText,colorErrorOutline:(0,h.A)(r.colorErrorBg,r.colorBgContainer),colorWarningOutline:(0,h.A)(r.colorWarningBg,r.colorBgContainer),fontSizeIcon:r.fontSizeSM,lineWidthFocus:3*r.lineWidth,lineWidth:r.lineWidth,controlOutlineWidth:2*r.lineWidth,controlInteractiveSize:r.controlHeight/2,controlItemBgHover:r.colorFillTertiary,controlItemBgActive:r.colorPrimaryBg,controlItemBgActiveHover:r.colorPrimaryBgHover,controlItemBgActiveDisabled:r.colorFill,controlTmpOutline:r.colorFillQuaternary,controlOutline:(0,h.A)(r.colorPrimaryBg,r.colorBgContainer),lineType:r.lineType,borderRadius:r.borderRadius,borderRadiusXS:r.borderRadiusXS,borderRadiusSM:r.borderRadiusSM,borderRadiusLG:r.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:r.sizeXXS,paddingXS:r.sizeXS,paddingSM:r.sizeSM,padding:r.size,paddingMD:r.sizeMD,paddingLG:r.sizeLG,paddingXL:r.sizeXL,paddingContentHorizontalLG:r.sizeLG,paddingContentVerticalLG:r.sizeMS,paddingContentHorizontal:r.sizeMS,paddingContentVertical:r.sizeSM,paddingContentHorizontalSM:r.size,paddingContentVerticalSM:r.sizeXS,marginXXS:r.sizeXXS,marginXS:r.sizeXS,marginSM:r.sizeSM,margin:r.size,marginMD:r.sizeMD,marginLG:r.sizeLG,marginXL:r.sizeXL,marginXXL:r.sizeXXL,boxShadow:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowSecondary:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTertiary:"\n      0 1px 2px 0 rgba(0, 0, 0, 0.03),\n      0 1px 6px -1px rgba(0, 0, 0, 0.02),\n      0 2px 4px 0 rgba(0, 0, 0, 0.02)\n    ",screenXS:480,screenXSMin:480,screenXSMax:575,screenSM:576,screenSMMin:576,screenSMMax:767,screenMD:768,screenMDMin:768,screenMDMax:991,screenLG:992,screenLGMin:992,screenLGMax:1199,screenXL:1200,screenXLMin:1200,screenXLMax:1599,screenXXL:1600,screenXXLMin:1600,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`\n      0 1px 2px -2px ${new c.Y("rgba(0, 0, 0, 0.16)").toRgbString()},\n      0 3px 6px 0 ${new c.Y("rgba(0, 0, 0, 0.12)").toRgbString()},\n      0 5px 12px 4px ${new c.Y("rgba(0, 0, 0, 0.09)").toRgbString()}\n    `,boxShadowDrawerRight:"\n      -6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      -3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      -9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerLeft:"\n      6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerUp:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerDown:"\n      0 -6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 -3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 -9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),i)}var f=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};const p={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},g={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},m={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},v=(t,e,n)=>{const i=n.getDerivativeToken(t),{override:r}=e,o=f(e,["override"]);let s=Object.assign(Object.assign({},i),{override:r});return s=d(s),o&&Object.entries(o).forEach((([t,e])=>{const{theme:n}=e,i=f(e,["theme"]);let r=i;n&&(r=v(Object.assign(Object.assign({},s),i),{override:i},n)),s[t]=r})),s};function b(){const{token:t,hashed:e,theme:n,override:c,cssVar:h}=i.default.useContext(s.vG),u=`${o}-${e||""}`,f=n||a.A,[b,y,w]=(0,r.hV)(f,[l.A,t],{salt:u,override:c,getComputedToken:v,formatToken:d,cssVar:h&&{prefix:h.prefix,key:h.key,unitless:p,ignore:g,preserve:m}});return[f,w,e?y:"",b,h]}},9449:function(t,e,n){"use strict";n.d(e,{Ap:function(){return l},DU:function(){return c},u1:function(){return u},uR:function(){return d}});var i=n(8831),r=n(1302),o=n(682),s=n(3950);const a=/^[\u4E00-\u9FA5]{2}$/,l=a.test.bind(a);function c(t){return"danger"===t?{danger:!0}:{type:t}}function h(t){return"string"==typeof t}function u(t){return"text"===t||"link"===t}function d(t,e){let n=!1;const i=[];return r.default.Children.forEach(t,(t=>{const e=typeof t,r="string"===e||"number"===e;if(n&&r){const e=i.length-1,n=i[e];i[e]=`${n}${t}`}else i.push(t);n=r})),r.default.Children.map(i,(t=>function(t,e){if(null==t)return;const n=e?" ":"";return"string"!=typeof t&&"number"!=typeof t&&h(t.type)&&l(t.props.children)?(0,o.Ob)(t,{children:t.props.children.split("").join(n)}):h(t)?l(t)?r.default.createElement("span",null,t.split("").join(n)):r.default.createElement("span",null,t):(0,o.zv)(t)?r.default.createElement("span",null,t):t}(t,e)))}["default","primary","danger"].concat((0,i.A)(s.s))},9806:function(t,e,n){"use strict";n.d(e,{sb:function(){return o},vG:function(){return s}});var i=n(1302),r=n(723);const o={token:r.A,override:{override:r.A},hashed:!0},s=i.default.createContext(o)},9853:function(t,e,n){"use strict";function i(t,e){var n=Object.assign({},t);return Array.isArray(e)&&e.forEach((function(t){delete n[t]})),n}n.d(e,{A:function(){return i}})},9888:function(t,e,n){"use strict";t.exports=n(8493)},9889:function(t,e,n){"use strict";n.d(e,{cX:function(){return b},tR:function(){return v},xI:function(){return d}});var i=n(6432),r=n(3459),o=n.n(r),s=n(3077),a=n(6783);function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var c="bathtub",h="url",u="props",d=(0,i.pU)({selectId:function(t){return t.widgetId},sortComparer:function(t,e){return t.widgetId.localeCompare(e.widgetId)}}),f=d.getInitialState({loading:!0,error:void 0,activeWidgetUrl:void 0,activeWidgetProps:o()({kitchenSink:"testing"},{unsafe:!0,space:2}),isPropsEditorOpen:!1,tickTock:!1,isWidgetSwitcherOpen:!1,environment:"integration",hasPropsError:!1}),p=(0,i.Z0)({initialState:f,name:"app",reducers:{setActiveWidgetUrl:function(t,e){t.activeWidgetUrl=e.payload,t.isWidgetSwitcherOpen=!1,sessionStorage.setItem("".concat(c,"-").concat(h),e.payload)},setActiveWidgetProps:function(t,e){(0,a.eT)(e.payload)?(t.activeWidgetProps=e.payload,t.isPropsEditorOpen=!1,t.hasPropsError=!1,sessionStorage.setItem("".concat(c,"-").concat(u),e.payload)):t.hasPropsError=!0},clearPropsError:function(t){t.hasPropsError=!1},setIsPropsEditorOpen:function(t,e){var n;t.isPropsEditorOpen=e.payload,t.activeWidgetProps=null!==(n=m())&&void 0!==n?n:t.activeWidgetProps;var i=(0,a.eT)(t.activeWidgetProps);t.hasPropsError=!i},setIsWidgetSwitcherOpen:function(t,e){t.isWidgetSwitcherOpen=e.payload},renderWidget:function(t){var e,n;t.activeWidgetProps=null!==(e=m())&&void 0!==e?e:t.activeWidgetProps,t.activeWidgetUrl=null!==(n=g())&&void 0!==n?n:t.activeWidgetUrl,t.tickTock=!t.tickTock},reset:function(){sessionStorage.removeItem("".concat(c,"-").concat(h)),sessionStorage.removeItem("".concat(c,"-").concat(u)),window.location.reload()}},extraReducers:function(t){t.addCase(s.Z.loadWidgets.pending,(function(t){t.loading=!0,t.error=void 0})),t.addCase(s.Z.loadWidgets.rejected,(function(t,e){t.loading=!1,t.error="[".concat(e.error.name," (").concat(e.error.code,")] ").concat(e.error.message,"\n\nStack:\n").concat(e.error.stack)})),t.addCase(s.Z.loadWidgets.fulfilled,(function(t,e){var n,i;t.loading=!1,t.error=void 0;var r,o,s=(r=e.payload,o=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(r,o)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=s[0],u=s[1];d.setAll(t,a),t.activeWidgetProps=null!==(n=m())&&void 0!==n?n:t.activeWidgetProps,t.activeWidgetUrl=null!==(i=null!=u?u:g())&&void 0!==i?i:t.activeWidgetUrl,t.activeWidgetUrl&&sessionStorage.setItem("".concat(c,"-").concat(h),t.activeWidgetUrl)}))}}),g=function(){var t=sessionStorage.getItem("".concat(c,"-").concat(h));if(t)return t},m=function(){var t=sessionStorage.getItem("".concat(c,"-").concat(u));if(t)return t},v=p.actions,b=p.reducer},9994:function(t,e,n){"use strict";n.d(e,{GV:function(){return h},M_:function(){return l},jL:function(){return c},yz:function(){return a.yz}});var i=n(6432),r=n(3561),o=n(5391),s=n(1934),a=n(6783),l=(0,i.U1)({reducer:{app:s.cX,widgetBrowser:o.No},middleware:function(t){return t()}}),c=r.wA,h=r.d4}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.y=__system_context__,__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.p="/",__webpack_require__.nc=void 0;var __webpack_exports__={};return(0,__webpack_require__(126).w)(2),function(){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return wot}});var t=__webpack_require__(2445),e=__webpack_require__(2639),n=__webpack_require__(1302),i=__webpack_require__(9994),r=__webpack_require__(1934),o=__webpack_require__(5872),s=__webpack_require__(4386),a=__webpack_require__(4578),l=__webpack_require__(8831),c=__webpack_require__(2279),h=__webpack_require__(8715),u=__webpack_require__(1053),d=__webpack_require__(8104),f=__webpack_require__(9309),p=__webpack_require__(8210);function g(){}const m=n.createContext({}),v=()=>{const t=()=>{};return t.deprecated=g,t};var b=(0,n.createContext)(void 0),y={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function O(t,e,n){return(e=function(t){var e=function(t){if("object"!=w(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k=x(x({},{yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),C={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};const A={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},k),timePickerLocale:Object.assign({},C)},M="${label} is not a valid ${type}";var E={locale:"en",Pagination:y,DatePicker:A,TimePicker:C,Calendar:A,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:M,method:M,array:M,object:M,number:M,date:M,boolean:M,integer:M,float:M,regexp:M,email:M,url:M,hex:M},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let P=Object.assign({},E.Modal),T=[];const $=()=>T.reduce(((t,e)=>Object.assign(Object.assign({},t),e)),E.Modal);function D(){return P}var R=(0,n.createContext)(void 0),B=t=>{const{locale:e={},children:i,_ANT_MARK__:r}=t;n.useEffect((()=>{const t=function(t){if(t){const e=Object.assign({},t);return T.push(e),P=$(),()=>{T=T.filter((t=>t!==e)),P=$()}}P=Object.assign({},E.Modal)}(null==e?void 0:e.Modal);return t}),[e]);const o=n.useMemo((()=>Object.assign(Object.assign({},e),{exist:!0})),[e]);return n.createElement(R.Provider,{value:o},i)},N=__webpack_require__(5265),L=__webpack_require__(9806),j=__webpack_require__(723),_=__webpack_require__(5748),I=__webpack_require__(938),z=__webpack_require__(998),Q=__webpack_require__(5089);const H=`-ant-${Date.now()}-${Math.random()}`;var V=__webpack_require__(8119),W=__webpack_require__(8224),F=__webpack_require__(3210);const q=Object.assign({},n),{useId:X}=q;var K=void 0===X?()=>"":X,Z=__webpack_require__(1016),Y=__webpack_require__(9319);function G(t){const{children:e}=t,[,i]=(0,Y.Ay)(),{motion:r}=i,o=n.useRef(!1);return o.current=o.current||!1===r,o.current?n.createElement(Z.Kq,{motion:r},e):e}var U=()=>null,J=__webpack_require__(5905);const tt=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let et,nt,it,rt;function ot(){return et||c.yH}function st(){return nt||c.pM}const at=t=>{const{children:e,csp:i,autoInsertSpaceInButton:r,alert:o,anchor:s,form:a,locale:l,componentSize:p,direction:g,space:y,splitter:w,virtual:O,dropdownMatchSelectWidth:S,popupMatchSelectWidth:x,popupOverflow:k,legacyLocale:C,parentContext:A,iconPrefixCls:M,theme:P,componentDisabled:T,segmented:$,statistic:D,spin:R,calendar:_,carousel:I,cascader:z,collapse:Q,typography:H,checkbox:q,descriptions:X,divider:Z,drawer:et,skeleton:nt,steps:it,image:rt,layout:ot,list:st,mentions:at,modal:lt,progress:ct,result:ht,slider:ut,breadcrumb:dt,menu:ft,pagination:pt,input:gt,textArea:mt,empty:vt,badge:bt,radio:yt,rate:wt,switch:Ot,transfer:St,avatar:xt,message:kt,tag:Ct,table:At,card:Mt,tabs:Et,timeline:Pt,timePicker:Tt,upload:$t,notification:Dt,tree:Rt,colorPicker:Bt,datePicker:Nt,rangePicker:Lt,flex:jt,wave:_t,dropdown:It,warning:zt,tour:Qt,tooltip:Ht,popover:Vt,popconfirm:Wt,floatButtonGroup:Ft,variant:qt,inputNumber:Xt,treeSelect:Kt}=t,Zt=n.useCallback(((e,n)=>{const{prefixCls:i}=t;if(n)return n;const r=i||A.getPrefixCls("");return e?`${r}-${e}`:r}),[A.getPrefixCls,t.prefixCls]),Yt=M||A.iconPrefixCls||c.pM,Gt=i||A.csp;((t,e)=>{const[n,i]=(0,Y.Ay)();(0,h.IV)({theme:n,token:i,hashId:"",path:["ant-design-icons",t],nonce:()=>null==e?void 0:e.nonce,layer:{name:"antd"}},(()=>[(0,J.jz)(t)]))})(Yt,Gt);const Ut=function(t,e,n){var i;v();const r=t||{},o=!1!==r.inherit&&e?e:Object.assign(Object.assign({},L.sb),{hashed:null!==(i=null==e?void 0:e.hashed)&&void 0!==i?i:L.sb.hashed,cssVar:null==e?void 0:e.cssVar}),s=K();return(0,d.A)((()=>{var i,a;if(!t)return e;const l=Object.assign({},o.components);Object.keys(t.components||{}).forEach((e=>{l[e]=Object.assign(Object.assign({},l[e]),t.components[e])}));const c=`css-var-${s.replace(/:/g,"")}`,h=(null!==(i=r.cssVar)&&void 0!==i?i:o.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:null==n?void 0:n.prefixCls},"object"==typeof o.cssVar?o.cssVar:{}),"object"==typeof r.cssVar?r.cssVar:{}),{key:"object"==typeof r.cssVar&&(null===(a=r.cssVar)||void 0===a?void 0:a.key)||c});return Object.assign(Object.assign(Object.assign({},o),r),{token:Object.assign(Object.assign({},o.token),r.token),components:l,cssVar:h})}),[r,o],((t,e)=>t.some(((t,n)=>{const i=e[n];return!(0,F.A)(t,i,!0)}))))}(P,A.theme,{prefixCls:Zt("")}),Jt={csp:Gt,autoInsertSpaceInButton:r,alert:o,anchor:s,locale:l||C,direction:g,space:y,splitter:w,virtual:O,popupMatchSelectWidth:null!=x?x:S,popupOverflow:k,getPrefixCls:Zt,iconPrefixCls:Yt,theme:Ut,segmented:$,statistic:D,spin:R,calendar:_,carousel:I,cascader:z,collapse:Q,typography:H,checkbox:q,descriptions:X,divider:Z,drawer:et,skeleton:nt,steps:it,image:rt,input:gt,textArea:mt,layout:ot,list:st,mentions:at,modal:lt,progress:ct,result:ht,slider:ut,breadcrumb:dt,menu:ft,pagination:pt,empty:vt,badge:bt,radio:yt,rate:wt,switch:Ot,transfer:St,avatar:xt,message:kt,tag:Ct,table:At,card:Mt,tabs:Et,timeline:Pt,timePicker:Tt,upload:$t,notification:Dt,tree:Rt,colorPicker:Bt,datePicker:Nt,rangePicker:Lt,flex:jt,wave:_t,dropdown:It,warning:zt,tour:Qt,tooltip:Ht,popover:Vt,popconfirm:Wt,floatButtonGroup:Ft,variant:qt,inputNumber:Xt,treeSelect:Kt},te=Object.assign({},A);Object.keys(Jt).forEach((t=>{void 0!==Jt[t]&&(te[t]=Jt[t])})),tt.forEach((e=>{const n=t[e];n&&(te[e]=n)})),void 0!==r&&(te.button=Object.assign({autoInsertSpace:r},te.button));const ee=(0,d.A)((()=>te),te,((t,e)=>{const n=Object.keys(t),i=Object.keys(e);return n.length!==i.length||n.some((n=>t[n]!==e[n]))})),{layer:ne}=n.useContext(h.J),ie=n.useMemo((()=>({prefixCls:Yt,csp:Gt,layer:ne?"antd":void 0})),[Yt,Gt,ne]);let re=n.createElement(n.Fragment,null,n.createElement(U,{dropdownMatchSelectWidth:S}),e);const oe=n.useMemo((()=>{var t,e,n,i;return(0,f.h)((null===(t=E.Form)||void 0===t?void 0:t.defaultValidateMessages)||{},(null===(n=null===(e=ee.locale)||void 0===e?void 0:e.Form)||void 0===n?void 0:n.defaultValidateMessages)||{},(null===(i=ee.form)||void 0===i?void 0:i.validateMessages)||{},(null==a?void 0:a.validateMessages)||{})}),[ee,null==a?void 0:a.validateMessages]);Object.keys(oe).length>0&&(re=n.createElement(b.Provider,{value:oe},re)),l&&(re=n.createElement(B,{locale:l,_ANT_MARK__:"internalMark"},re)),(Yt||Gt)&&(re=n.createElement(u.A.Provider,{value:ie},re)),p&&(re=n.createElement(W.c,{size:p},re)),re=n.createElement(G,null,re);const se=n.useMemo((()=>{const t=Ut||{},{algorithm:e,token:n,components:i,cssVar:r}=t,o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["algorithm","token","components","cssVar"]),s=e&&(!Array.isArray(e)||e.length>0)?(0,h.an)(e):N.A,a={};Object.entries(i||{}).forEach((([t,e])=>{const n=Object.assign({},e);"algorithm"in n&&(!0===n.algorithm?n.theme=s:(Array.isArray(n.algorithm)||"function"==typeof n.algorithm)&&(n.theme=(0,h.an)(n.algorithm)),delete n.algorithm),a[t]=n}));const l=Object.assign(Object.assign({},j.A),n);return Object.assign(Object.assign({},o),{theme:s,token:l,components:a,override:Object.assign({override:l},a),cssVar:r})}),[Ut]);return P&&(re=n.createElement(L.vG.Provider,{value:se},re)),ee.warning&&(re=n.createElement(m.Provider,{value:ee.warning},re)),void 0!==T&&(re=n.createElement(V.X,{disabled:T},re)),n.createElement(c.QO.Provider,{value:ee},re)},lt=t=>{const e=n.useContext(c.QO),i=n.useContext(R);return n.createElement(at,Object.assign({parentContext:e,legacyLocale:i},t))};lt.ConfigContext=c.QO,lt.SizeContext=W.A,lt.config=t=>{const{prefixCls:e,iconPrefixCls:n,theme:i,holderRender:r}=t;void 0!==e&&(et=e),void 0!==n&&(nt=n),"holderRender"in t&&(rt=r),i&&(function(t){return Object.keys(t).some((t=>t.endsWith("Color")))}(i)?function(t,e){const n=function(t,e){const n={},i=(t,e)=>{let n=t.clone();return n=(null==e?void 0:e(n))||n,n.toRgbString()},r=(t,e)=>{const r=new I.Y(t),o=(0,_.cM)(r.toRgbString());n[`${e}-color`]=i(r),n[`${e}-color-disabled`]=o[1],n[`${e}-color-hover`]=o[4],n[`${e}-color-active`]=o[6],n[`${e}-color-outline`]=r.clone().setA(.2).toRgbString(),n[`${e}-color-deprecated-bg`]=o[0],n[`${e}-color-deprecated-border`]=o[2]};if(e.primaryColor){r(e.primaryColor,"primary");const t=new I.Y(e.primaryColor),o=(0,_.cM)(t.toRgbString());o.forEach(((t,e)=>{n[`primary-${e+1}`]=t})),n["primary-color-deprecated-l-35"]=i(t,(t=>t.lighten(35))),n["primary-color-deprecated-l-20"]=i(t,(t=>t.lighten(20))),n["primary-color-deprecated-t-20"]=i(t,(t=>t.tint(20))),n["primary-color-deprecated-t-50"]=i(t,(t=>t.tint(50))),n["primary-color-deprecated-f-12"]=i(t,(t=>t.setA(.12*t.a)));const s=new I.Y(o[0]);n["primary-color-active-deprecated-f-30"]=i(s,(t=>t.setA(.3*t.a))),n["primary-color-active-deprecated-d-02"]=i(s,(t=>t.darken(2)))}return e.successColor&&r(e.successColor,"success"),e.warningColor&&r(e.warningColor,"warning"),e.errorColor&&r(e.errorColor,"error"),e.infoColor&&r(e.infoColor,"info"),`\n  :root {\n    ${Object.keys(n).map((e=>`--${t}-${e}: ${n[e]};`)).join("\n")}\n  }\n  `.trim()}(t,e);(0,z.A)()&&(0,Q.BD)(n,`${H}-dynamic-theme`)}(ot(),i):it=i)},lt.useConfig=function(){return{componentDisabled:(0,n.useContext)(V.A),componentSize:(0,n.useContext)(W.A)}},Object.defineProperty(lt,"SizeContext",{get:()=>W.A});var ct=lt,ht=__webpack_require__(8656),ut=__webpack_require__(2587),dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},ft=__webpack_require__(7066),pt=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:dt}))},gt=n.forwardRef(pt),mt={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},vt=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:mt}))},bt=n.forwardRef(vt),yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},wt=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:yt}))},Ot=n.forwardRef(wt),St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},xt=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:St}))},kt=n.forwardRef(xt),Ct=__webpack_require__(6942),At=__webpack_require__.n(Ct),Mt=n.default.createContext(void 0);const Et=100,Pt={Modal:Et,Drawer:Et,Popover:Et,Popconfirm:Et,Tooltip:Et,Tour:Et,FloatButton:Et},Tt={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1},$t=(t,e)=>{const[,i]=(0,Y.Ay)(),r=n.default.useContext(Mt),o=t in Pt;let s;if(void 0!==e)s=[e,e];else{let n=null!=r?r:0;n+=o?(r?0:i.zIndexPopupBase)+Pt[t]:Tt[t],s=[void 0===r?e:n,n]}return s},Dt=()=>({height:0,opacity:0}),Rt=t=>{const{scrollHeight:e}=t;return{height:e,opacity:1}},Bt=t=>({height:t?t.offsetHeight:0}),Nt=(t,e)=>!0===(null==e?void 0:e.deadline)||"height"===e.propertyName,Lt=(t,e,n)=>void 0!==n?n:`${t}-${e}`;var jt=(t=c.yH)=>({motionName:`${t}-motion-collapse`,onAppearStart:Dt,onEnterStart:Dt,onAppearActive:Rt,onEnterActive:Rt,onLeaveStart:Bt,onLeaveActive:Dt,onAppearEnd:Nt,onEnterEnd:Nt,onLeaveEnd:Nt,motionDeadline:500}),_t=(t,e)=>{const i=n.useContext(R),r=n.useMemo((()=>{var n;const r=e||E[t],o=null!==(n=null==i?void 0:i[t])&&void 0!==n?n:{};return Object.assign(Object.assign({},"function"==typeof r?r():r),o||{})}),[t,e,i]);return[r,n.useMemo((()=>{const t=null==i?void 0:i.locale;return(null==i?void 0:i.exist)&&!t?E.locale:t}),[i])]},It=__webpack_require__(1233),zt=__webpack_require__(9449);function Qt(t){return!!(null==t?void 0:t.then)}var Ht=t=>{const{type:e,children:i,prefixCls:r,buttonProps:o,close:s,autoFocus:l,emitEvent:c,isSilent:h,quitOnNullishReturnValue:u,actionFn:d}=t,f=n.useRef(!1),p=n.useRef(null),[g,m]=(0,It.A)(!1),v=(...t)=>{null==s||s.apply(void 0,t)};return n.useEffect((()=>{let t=null;return l&&(t=setTimeout((()=>{var t;null===(t=p.current)||void 0===t||t.focus({preventScroll:!0})}))),()=>{t&&clearTimeout(t)}}),[]),n.createElement(a.Ay,Object.assign({},(0,zt.DU)(e),{onClick:t=>{if(f.current)return;if(f.current=!0,!d)return void v();let e;if(c){if(e=d(t),u&&!Qt(e))return f.current=!1,void v(t)}else if(d.length)e=d(s),f.current=!1;else if(e=d(),!Qt(e))return void v();(t=>{Qt(t)&&(m(!0),t.then(((...t)=>{m(!1,!0),v.apply(void 0,t),f.current=!1}),(t=>{if(m(!1,!0),f.current=!1,!(null==h?void 0:h()))return Promise.reject(t)})))})(e)},loading:g,prefixCls:r},o,{ref:p}),i)};const Vt=n.default.createContext({}),{Provider:Wt}=Vt;var Ft=()=>{const{autoFocusButton:t,cancelButtonProps:e,cancelTextLocale:i,isSilent:r,mergedOkCancel:o,rootPrefixCls:s,close:a,onCancel:l,onConfirm:c}=(0,n.useContext)(Vt);return o?n.default.createElement(Ht,{isSilent:r,actionFn:l,close:(...t)=>{null==a||a.apply(void 0,t),null==c||c(!1)},autoFocus:"cancel"===t,buttonProps:e,prefixCls:`${s}-btn`},i):null},qt=()=>{const{autoFocusButton:t,close:e,isSilent:i,okButtonProps:r,rootPrefixCls:o,okTextLocale:s,okType:a,onConfirm:l,onOk:c}=(0,n.useContext)(Vt);return n.default.createElement(Ht,{isSilent:i,type:a||"primary",actionFn:c,close:(...t)=>{null==e||e.apply(void 0,t),null==l||l(!0)},autoFocus:"ok"===t,buttonProps:r,prefixCls:`${o}-btn`},s)},Xt={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},Kt=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:Xt}))},Zt=n.forwardRef(Kt);function Yt(){return Yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yt.apply(null,arguments)}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Gt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function te(t,e){if(t){if("string"==typeof t)return Jt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(t,e):void 0}}function ee(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||te(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ne=__webpack_require__(4946),ie=__webpack_require__(8719),re=n.createContext(null);var oe,se=__webpack_require__(981),ae=[];function le(t){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=e;var i,r,o=n.style;if(o.position="absolute",o.left="0",o.top="0",o.width="100px",o.height="100px",o.overflow="scroll",t){var s=getComputedStyle(t);o.scrollbarColor=s.scrollbarColor,o.scrollbarWidth=s.scrollbarWidth;var a=getComputedStyle(t,"::-webkit-scrollbar"),l=parseInt(a.width,10),c=parseInt(a.height,10);try{var h=l?"width: ".concat(a.width,";"):"",u=c?"height: ".concat(a.height,";"):"";(0,Q.BD)("\n#".concat(e,"::-webkit-scrollbar {\n").concat(h,"\n").concat(u,"\n}"),e)}catch(t){console.error(t),i=l,r=c}}document.body.appendChild(n);var d=t&&i&&!isNaN(i)?i:n.offsetWidth-n.clientWidth,f=t&&r&&!isNaN(r)?r:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),(0,Q.m6)(e),{width:d,height:f}}function ce(t){return"undefined"==typeof document?0:((t||void 0===oe)&&(oe=le()),oe.width)}function he(t){return"undefined"!=typeof document&&t&&t instanceof Element?le(t):{width:0,height:0}}var ue="rc-util-locker-".concat(Date.now()),de=0;var fe=!1,pe=function(t){return!1!==t&&((0,z.A)()&&t?"string"==typeof t?document.querySelector(t):"function"==typeof t?t():t:null)},ge=n.forwardRef((function(t,e){var i=t.open,r=t.autoLock,o=t.getContainer,s=(t.debug,t.autoDestroy),a=void 0===s||s,l=t.children,c=ee(n.useState(i),2),h=c[0],u=c[1],d=h||i;n.useEffect((function(){(a||i)&&u(i)}),[i,a]);var f=ee(n.useState((function(){return pe(o)})),2),p=f[0],g=f[1];n.useEffect((function(){var t=pe(o);g(null!=t?t:null)}));var m=function(t){var e=ee(n.useState((function(){return(0,z.A)()?document.createElement("div"):null})),1)[0],i=n.useRef(!1),r=n.useContext(re),o=ee(n.useState(ae),2),s=o[0],a=o[1],l=r||(i.current?void 0:function(t){a((function(e){return[t].concat(function(t){if(Array.isArray(t))return Jt(t)}(n=e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||te(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var n}))});function c(){e.parentElement||document.body.appendChild(e),i.current=!0}function h(){var t;null===(t=e.parentElement)||void 0===t||t.removeChild(e),i.current=!1}return(0,se.A)((function(){return t?r?r(c):c():h(),h}),[t]),(0,se.A)((function(){s.length&&(s.forEach((function(t){return t()})),a(ae))}),[s]),[e,l]}(d&&!p),v=ee(m,2),b=v[0],y=v[1],w=null!=p?p:b;!function(t){var e=!!t,i=ee(n.useState((function(){return de+=1,"".concat(ue,"_").concat(de)})),1)[0];(0,se.A)((function(){if(e){var t=he(document.body).width,n=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;(0,Q.BD)("\nhtml body {\n  overflow-y: hidden;\n  ".concat(n?"width: calc(100% - ".concat(t,"px);"):"","\n}"),i)}else(0,Q.m6)(i);return function(){(0,Q.m6)(i)}}),[e,i])}(r&&i&&(0,z.A)()&&(w===b||w===document.body));var O=null;l&&(0,ie.f3)(l)&&e&&(O=l.ref);var S=(0,ie.xK)(O,e);if(!d||!(0,z.A)()||void 0===p)return null;var x=!1===w||fe,k=l;return e&&(k=n.cloneElement(l,{ref:S})),n.createElement(re.Provider,{value:y},x?k:(0,ne.createPortal)(k,w))})),me=ge,ve=n.createContext({});function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function ye(t,e,n){return(e=function(t){var e=function(t){if("object"!=be(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==be(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function we(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?we(Object(n),!0).forEach((function(e){ye(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Se=__webpack_require__(4808),xe=__webpack_require__(5142),ke=__webpack_require__(7826),Ce=0,Ae=(0,ke.A)({},n).useId,Me=Ae?function(t){var e=Ae();return t||e}:function(t){var e=n.useState("ssr-id"),i=(0,xe.A)(e,2),r=i[0],o=i[1];return n.useEffect((function(){var t=Ce;Ce+=1,o("rc_unique_".concat(t))}),[]),t||r},Ee={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var e=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||e>=Ee.F1&&e<=Ee.F12)return!1;switch(e){case Ee.ALT:case Ee.CAPS_LOCK:case Ee.CONTEXT_MENU:case Ee.CTRL:case Ee.DOWN:case Ee.END:case Ee.ESC:case Ee.HOME:case Ee.INSERT:case Ee.LEFT:case Ee.MAC_FF_META:case Ee.META:case Ee.NUMLOCK:case Ee.NUM_CENTER:case Ee.PAGE_DOWN:case Ee.PAGE_UP:case Ee.PAUSE:case Ee.PRINT_SCREEN:case Ee.RIGHT:case Ee.SHIFT:case Ee.UP:case Ee.WIN_KEY:case Ee.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Ee.ZERO&&t<=Ee.NINE)return!0;if(t>=Ee.NUM_ZERO&&t<=Ee.NUM_MULTIPLY)return!0;if(t>=Ee.A&&t<=Ee.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===t)return!0;switch(t){case Ee.SPACE:case Ee.QUESTION_MARK:case Ee.NUM_PLUS:case Ee.NUM_MINUS:case Ee.NUM_PERIOD:case Ee.NUM_DIVISION:case Ee.SEMICOLON:case Ee.DASH:case Ee.EQUALS:case Ee.COMMA:case Ee.PERIOD:case Ee.SLASH:case Ee.APOSTROPHE:case Ee.SINGLE_QUOTE:case Ee.OPEN_SQUARE_BRACKET:case Ee.BACKSLASH:case Ee.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Pe=Ee,Te="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/);function $e(t,e){return 0===t.indexOf(e)}function De(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:(0,ke.A)({},n);var i={};return Object.keys(t).forEach((function(n){(e.aria&&("role"===n||$e(n,"aria-"))||e.data&&$e(n,"data-")||e.attr&&Te.includes(n))&&(i[n]=t[n])})),i}function Re(t,e,n){var i=e;return!i&&n&&(i="".concat(t,"-").concat(n)),i}function Be(t,e){var n=t["page".concat(e?"Y":"X","Offset")],i="scroll".concat(e?"Top":"Left");if("number"!=typeof n){var r=t.document;"number"!=typeof(n=r.documentElement[i])&&(n=r.body[i])}return n}var Ne=n.memo((function(t){return t.children}),(function(t,e){return!e.shouldUpdate})),Le={width:0,height:0,overflow:"hidden",outline:"none"},je={outline:"none"},_e=n.default.forwardRef((function(t,e){var i=t.prefixCls,r=t.className,o=t.style,s=t.title,a=t.ariaId,l=t.footer,c=t.closable,h=t.closeIcon,u=t.onClose,d=t.children,f=t.bodyStyle,p=t.bodyProps,g=t.modalRender,m=t.onMouseDown,v=t.onMouseUp,b=t.holderRef,y=t.visible,w=t.forceRender,O=t.width,S=t.height,x=t.classNames,k=t.styles,C=n.default.useContext(ve).panel,A=(0,ie.xK)(b,C),M=(0,n.useRef)(),E=(0,n.useRef)();n.default.useImperativeHandle(e,(function(){return{focus:function(){var t;null===(t=M.current)||void 0===t||t.focus({preventScroll:!0})},changeActive:function(t){var e=document.activeElement;t&&e===E.current?M.current.focus({preventScroll:!0}):t||e!==M.current||E.current.focus({preventScroll:!0})}}}));var P={};void 0!==O&&(P.width=O),void 0!==S&&(P.height=S);var T=l?n.default.createElement("div",{className:At()("".concat(i,"-footer"),null==x?void 0:x.footer),style:Oe({},null==k?void 0:k.footer)},l):null,$=s?n.default.createElement("div",{className:At()("".concat(i,"-header"),null==x?void 0:x.header),style:Oe({},null==k?void 0:k.header)},n.default.createElement("div",{className:"".concat(i,"-title"),id:a},s)):null,D=(0,n.useMemo)((function(){return"object"===be(c)&&null!==c?c:c?{closeIcon:null!=h?h:n.default.createElement("span",{className:"".concat(i,"-close-x")})}:{}}),[c,h,i]),R=De(D,!0),B="object"===be(c)&&c.disabled,N=c?n.default.createElement("button",Yt({type:"button",onClick:u,"aria-label":"Close"},R,{className:"".concat(i,"-close"),disabled:B}),D.closeIcon):null,L=n.default.createElement("div",{className:At()("".concat(i,"-content"),null==x?void 0:x.content),style:null==k?void 0:k.content},N,$,n.default.createElement("div",Yt({className:At()("".concat(i,"-body"),null==x?void 0:x.body),style:Oe(Oe({},f),null==k?void 0:k.body)},p),d),T);return n.default.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":s?a:null,"aria-modal":"true",ref:A,style:Oe(Oe({},o),P),className:At()(i,r),onMouseDown:m,onMouseUp:v},n.default.createElement("div",{ref:M,tabIndex:0,style:je},n.default.createElement(Ne,{shouldUpdate:y||w},g?g(L):L)),n.default.createElement("div",{tabIndex:0,ref:E,style:Le}))})),Ie=_e,ze=n.forwardRef((function(t,e){var i=t.prefixCls,r=t.title,o=t.style,s=t.className,a=t.visible,l=t.forceRender,c=t.destroyOnClose,h=t.motionName,u=t.ariaId,d=t.onVisibleChanged,f=t.mousePosition,p=(0,n.useRef)(),g=Ut(n.useState(),2),m=g[0],v=g[1],b={};function y(){var t=function(t){var e=t.getBoundingClientRect(),n={left:e.left,top:e.top},i=t.ownerDocument,r=i.defaultView||i.parentWindow;return n.left+=Be(r),n.top+=Be(r,!0),n}(p.current);v(f&&(f.x||f.y)?"".concat(f.x-t.left,"px ").concat(f.y-t.top,"px"):"")}return m&&(b.transformOrigin=m),n.createElement(Z.Ay,{visible:a,onVisibleChanged:d,onAppearPrepare:y,onEnterPrepare:y,forceRender:l,motionName:h,removeOnLeave:c,ref:p},(function(a,l){var c=a.className,h=a.style;return n.createElement(Ie,Yt({},t,{ref:e,title:r,ariaId:u,prefixCls:i,holderRef:l,style:Oe(Oe(Oe({},h),o),b),className:At()(s,c)}))}))}));ze.displayName="Content";var Qe=ze,He=function(t){var e=t.prefixCls,i=t.style,r=t.visible,o=t.maskProps,s=t.motionName,a=t.className;return n.createElement(Z.Ay,{key:"mask",visible:r,motionName:s,leavedClassName:"".concat(e,"-mask-hidden")},(function(t,r){var s=t.className,l=t.style;return n.createElement("div",Yt({ref:r,style:Oe(Oe({},l),i),className:At()("".concat(e,"-mask"),s,a)},o))}))},Ve=function(t){var e=t.prefixCls,i=void 0===e?"rc-dialog":e,r=t.zIndex,o=t.visible,s=void 0!==o&&o,a=t.keyboard,l=void 0===a||a,c=t.focusTriggerAfterClose,h=void 0===c||c,u=t.wrapStyle,d=t.wrapClassName,f=t.wrapProps,p=t.onClose,g=t.afterOpenChange,m=t.afterClose,v=t.transitionName,b=t.animation,y=t.closable,w=void 0===y||y,O=t.mask,S=void 0===O||O,x=t.maskTransitionName,k=t.maskAnimation,C=t.maskClosable,A=void 0===C||C,M=t.maskStyle,E=t.maskProps,P=t.rootClassName,T=t.classNames,$=t.styles,D=(0,n.useRef)(),R=(0,n.useRef)(),B=(0,n.useRef)(),N=Ut(n.useState(s),2),L=N[0],j=N[1],_=Me();function I(t){null==p||p(t)}var z=(0,n.useRef)(!1),Q=(0,n.useRef)(),H=null;A&&(H=function(t){z.current?z.current=!1:R.current===t.target&&I(t)}),(0,n.useEffect)((function(){s&&(j(!0),(0,Se.A)(R.current,document.activeElement)||(D.current=document.activeElement))}),[s]),(0,n.useEffect)((function(){return function(){clearTimeout(Q.current)}}),[]);var V=Oe(Oe(Oe({zIndex:r},u),null==$?void 0:$.wrapper),{},{display:L?null:"none"});return n.createElement("div",Yt({className:At()("".concat(i,"-root"),P)},De(t,{data:!0})),n.createElement(He,{prefixCls:i,visible:S&&s,motionName:Re(i,x,k),style:Oe(Oe({zIndex:r},M),null==$?void 0:$.mask),maskProps:E,className:null==T?void 0:T.mask}),n.createElement("div",Yt({tabIndex:-1,onKeyDown:function(t){if(l&&t.keyCode===Pe.ESC)return t.stopPropagation(),void I(t);s&&t.keyCode===Pe.TAB&&B.current.changeActive(!t.shiftKey)},className:At()("".concat(i,"-wrap"),d,null==T?void 0:T.wrapper),ref:R,onClick:H,style:V},f),n.createElement(Qe,Yt({},t,{onMouseDown:function(){clearTimeout(Q.current),z.current=!0},onMouseUp:function(){Q.current=setTimeout((function(){z.current=!1}))},ref:B,closable:w,ariaId:_,prefixCls:i,visible:s&&L,onClose:I,onVisibleChanged:function(t){if(t)(0,Se.A)(R.current,document.activeElement)||null===(e=B.current)||void 0===e||e.focus();else{if(j(!1),S&&D.current&&h){try{D.current.focus({preventScroll:!0})}catch(t){}D.current=null}L&&(null==m||m())}var e;null==g||g(t)},motionName:Re(i,v,b)}))))},We=function(t){var e=t.visible,i=t.getContainer,r=t.forceRender,o=t.destroyOnClose,s=void 0!==o&&o,a=t.afterClose,l=t.panelRef,c=Ut(n.useState(e),2),h=c[0],u=c[1],d=n.useMemo((function(){return{panel:l}}),[l]);return n.useEffect((function(){e&&u(!0)}),[e]),r||!s||h?n.createElement(ve.Provider,{value:d},n.createElement(me,{open:e||r||h,autoDestroy:!1,getContainer:i,autoLock:e||h},n.createElement(Ve,Yt({},t,{destroyOnClose:s,afterClose:function(){null==a||a(),u(!1)}})))):null};We.displayName="Dialog";var Fe=We;function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qe.apply(null,arguments)}function Xe(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(t)}function Ze(){Ze=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i})}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(e,n,i,r){var o=n&&n.prototype instanceof d?n:d,s=Object.create(o.prototype);return l(s,"_invoke",function(e,n,i){var r=1;return function(o,s){if(3===r)throw Error("Generator is already running");if(4===r){if("throw"===o)throw s;return{value:t,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var l=O(a,i);if(l){if(l===u)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(1===r)throw r=4,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=3;var c=h(e,n,i);if("normal"===c.type){if(r=i.done?4:2,c.arg===u)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=4,i.method="throw",i.arg=c.arg)}}}(e,i,new k(r||[])),!0),s}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var u={};function d(){}function f(){}function p(){}var g={};l(g,o,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(C([])));v&&v!==n&&i.call(v,o)&&(g=v);var b=p.prototype=d.prototype=Object.create(g);function y(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(r,o,s,a){var l=h(t[r],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Ke(u)&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(u).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,a)}))}a(l.arg)}var r;l(this,"_invoke",(function(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}),!0)}function O(e,n){var i=n.method,r=e.i[i];if(r===t)return n.delegate=null,"throw"===i&&e.i.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var o=h(r,e.i,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,u;var s=o.arg;return s?s.done?(n[e.r]=s.value,n.next=e.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,u):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,u)}function S(t){this.tryEntries.push(t)}function x(e){var n=e[4]||{};n.type="normal",n.arg=t,e[4]=n}function k(t){this.tryEntries=[[-1]],t.forEach(S,this),this.reset(!0)}function C(e){if(null!=e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(Ke(e)+" is not iterable")}return f.prototype=p,l(b,"constructor",p),l(p,"constructor",f),l(p,a,f.displayName="GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},y(w.prototype),l(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var s=new w(c(t,n,i,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},y(b),l(b,a,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.unshift(i);return function t(){for(;n.length;)if((i=n.pop())in e)return t.value=i,t.done=!1,t;return t.done=!0,t}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(t){s.type="throw",s.arg=e,n.next=t}for(var r=n.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o[4],a=this.prev,l=o[1],c=o[2];if(-1===o[0])return i("end"),!1;if(!l&&!c)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=a){if(a<l)return this.method="next",this.arg=t,i(l),!0;if(a<c)return i(c),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i[0]>-1&&i[0]<=this.prev&&this.prev<i[2]){var r=i;break}}r&&("break"===t||"continue"===t)&&r[0]<=e&&e<=r[2]&&(r=null);var o=r?r[4]:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r[2],u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),x(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var i=n[4];if("throw"===i.type){var r=i.arg;x(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={i:C(e),r:n,n:i},"next"===this.method&&(this.arg=t),u}},e}function Ye(t,e,n,i,r,o,s){try{var a=t[o](s),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(i,r)}function Ge(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){Ye(o,i,r,s,a,"next",t)}function a(t){Ye(o,i,r,s,a,"throw",t)}s(void 0)}))}}function Ue(t){var e=function(t){if("object"!=Ke(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ke(e)?e:e+""}function Je(t,e,n){return(e=Ue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(n),!0).forEach((function(e){Je(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function rn(t,e){if(t){if("string"==typeof t)return nn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(t,e):void 0}}function on(t){return function(t){if(Array.isArray(t))return nn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||rn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function an(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ue(i.key),i)}}function ln(t,e,n){return e&&an(t.prototype,e),n&&an(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hn(t,e){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hn(t,e)}function un(t){return un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},un(t)}function dn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dn=function(){return!!t})()}var fn=__webpack_require__(2546),pn="RC_FORM_INTERNAL_HOOKS",gn=function(){(0,p.Ay)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},mn=n.createContext({getFieldValue:gn,getFieldsValue:gn,getFieldError:gn,getFieldWarning:gn,getFieldsError:gn,isFieldsTouched:gn,isFieldTouched:gn,isFieldValidating:gn,isFieldsValidating:gn,resetFields:gn,setFields:gn,setFieldValue:gn,setFieldsValue:gn,validateFields:gn,submit:gn,getInternalHooks:function(){return gn(),{dispatch:gn,initEntityValue:gn,registerField:gn,useSubscribe:gn,setInitialValues:gn,destroyForm:gn,setCallbacks:gn,registerWatch:gn,getFields:gn,setValidateMessages:gn,setPreserve:gn,getInitialValue:gn}}}),vn=n.createContext(null);function bn(t){return null==t?[]:Array.isArray(t)?t:[t]}function yn(t){return yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yn(t)}function wn(t){var e=function(t){if("object"!=yn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yn(e)?e:e+""}function On(t,e,n){return(e=wn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function xn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sn(Object(n),!0).forEach((function(e){On(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Cn(t){return function(t){if(Array.isArray(t))return kn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return kn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,wn(i.key),i)}}function En(t,e,n){return e&&Mn(t.prototype,e),n&&Mn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pn(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var Tn=Pn();function $n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dn(t,e){return Dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dn(t,e)}function Rn(t){return Rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rn(t)}function Bn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bn=function(){return!!t})()}function Nn(t){var e="function"==typeof Map?new Map:void 0;return Nn=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Bn())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var r=new(t.bind.apply(t,i));return n&&Dn(r,n.prototype),r}(t,arguments,Rn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Dn(n,t)},Nn(t)}var Ln=/%[sdj%]/g;function jn(t){if(!t||!t.length)return null;var e={};return t.forEach((function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)})),e}function _n(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=0,o=n.length;return"function"==typeof t?t.apply(null,n):"string"==typeof t?t.replace(Ln,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}break;default:return t}})):t}function In(t,e){return null==t||!("array"!==e||!Array.isArray(t)||t.length)||!(!function(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"date"===t||"pattern"===t}(e)||"string"!=typeof t||t)}function zn(t,e,n){var i=0,r=t.length;!function o(s){if(s&&s.length)n(s);else{var a=i;i+=1,a<r?e(t[a],o):n([])}}([])}"undefined"!=typeof process&&process.env;var Qn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dn(t,e)}(n,t);var e=function(t){var e=Bn();return function(){var n,i=Rn(t);if(e){var r=Rn(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"==yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $n(t)}(this,n)}}(n);function n(t,i){var r;return An(this,n),On($n(r=e.call(this,"Async Validation Error")),"errors",void 0),On($n(r),"fields",void 0),r.errors=t,r.fields=i,r}return En(n)}(Nn(Error));function Hn(t,e){return function(n){var i,r;return i=t.fullFields?function(t,e){for(var n=t,i=0;i<e.length;i++){if(null==n)return n;n=n[e[i]]}return n}(e,t.fullFields):e[n.field||t.fullField],(r=n)&&void 0!==r.message?(n.field=n.field||t.fullField,n.fieldValue=i,n):{message:"function"==typeof n?n():n,fieldValue:i,field:n.field||t.fullField}}}function Vn(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];"object"===yn(i)&&"object"===yn(t[n])?t[n]=xn(xn({},t[n]),i):t[n]=i}return t}var Wn,Fn="enum",qn=function(t,e,n,i,r,o){!t.required||n.hasOwnProperty(t.field)&&!In(e,o||t.type)||i.push(_n(r.messages.required,t.fullField))},Xn=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,Kn=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,Zn={integer:function(t){return Zn.number(t)&&parseInt(t,10)===t},float:function(t){return Zn.number(t)&&!Zn.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(t){return!1}},date:function(t){return"function"==typeof t.getTime&&"function"==typeof t.getMonth&&"function"==typeof t.getYear&&!isNaN(t.getTime())},number:function(t){return!isNaN(t)&&"number"==typeof t},object:function(t){return"object"===yn(t)&&!Zn.array(t)},method:function(t){return"function"==typeof t},email:function(t){return"string"==typeof t&&t.length<=320&&!!t.match(Xn)},url:function(t){return"string"==typeof t&&t.length<=2048&&!!t.match(function(){if(Wn)return Wn;var t="[a-fA-F\\d:]",e=function(e){return e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=["(?:".concat(i,":){7}(?:").concat(i,"|:)"),"(?:".concat(i,":){6}(?:").concat(n,"|:").concat(i,"|:)"),"(?:".concat(i,":){5}(?::").concat(n,"|(?::").concat(i,"){1,2}|:)"),"(?:".concat(i,":){4}(?:(?::").concat(i,"){0,1}:").concat(n,"|(?::").concat(i,"){1,3}|:)"),"(?:".concat(i,":){3}(?:(?::").concat(i,"){0,2}:").concat(n,"|(?::").concat(i,"){1,4}|:)"),"(?:".concat(i,":){2}(?:(?::").concat(i,"){0,3}:").concat(n,"|(?::").concat(i,"){1,5}|:)"),"(?:".concat(i,":){1}(?:(?::").concat(i,"){0,4}:").concat(n,"|(?::").concat(i,"){1,6}|:)"),"(?::(?:(?::".concat(i,"){0,5}:").concat(n,"|(?::").concat(i,"){1,7}|:))")],o="(?:".concat(r.join("|"),")").concat("(?:%[0-9a-zA-Z]{1,})?"),s=new RegExp("(?:^".concat(n,"$)|(?:^").concat(o,"$)")),a=new RegExp("^".concat(n,"$")),l=new RegExp("^".concat(o,"$")),c=function(t){return t&&t.exact?s:new RegExp("(?:".concat(e(t)).concat(n).concat(e(t),")|(?:").concat(e(t)).concat(o).concat(e(t),")"),"g")};c.v4=function(t){return t&&t.exact?a:new RegExp("".concat(e(t)).concat(n).concat(e(t)),"g")},c.v6=function(t){return t&&t.exact?l:new RegExp("".concat(e(t)).concat(o).concat(e(t)),"g")};var h=c.v4().source,u=c.v6().source,d="(?:".concat("(?:(?:[a-z]+:)?//)","|www\\.)").concat("(?:\\S+(?::\\S*)?@)?","(?:localhost|").concat(h,"|").concat(u,"|").concat("(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)").concat("(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*").concat("(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",")").concat("(?::\\d{2,5})?").concat('(?:[/?#][^\\s"]*)?');return Wn=new RegExp("(?:^".concat(d,"$)"),"i")}())},hex:function(t){return"string"==typeof t&&!!t.match(Kn)}},Yn=qn,Gn=function(t,e,n,i,r){(/^\s+$/.test(e)||""===e)&&i.push(_n(r.messages.whitespace,t.fullField))},Un=function(t,e,n,i,r){if(t.required&&void 0===e)qn(t,e,n,i,r);else{var o=t.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?Zn[o](e)||i.push(_n(r.messages.types[o],t.fullField,t.type)):o&&yn(e)!==t.type&&i.push(_n(r.messages.types[o],t.fullField,t.type))}},Jn=function(t,e,n,i,r){var o="number"==typeof t.len,s="number"==typeof t.min,a="number"==typeof t.max,l=e,c=null,h="number"==typeof e,u="string"==typeof e,d=Array.isArray(e);if(h?c="number":u?c="string":d&&(c="array"),!c)return!1;d&&(l=e.length),u&&(l=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?l!==t.len&&i.push(_n(r.messages[c].len,t.fullField,t.len)):s&&!a&&l<t.min?i.push(_n(r.messages[c].min,t.fullField,t.min)):a&&!s&&l>t.max?i.push(_n(r.messages[c].max,t.fullField,t.max)):s&&a&&(l<t.min||l>t.max)&&i.push(_n(r.messages[c].range,t.fullField,t.min,t.max))},ti=function(t,e,n,i,r){t[Fn]=Array.isArray(t[Fn])?t[Fn]:[],-1===t[Fn].indexOf(e)&&i.push(_n(r.messages[Fn],t.fullField,t[Fn].join(", ")))},ei=function(t,e,n,i,r){t.pattern&&(t.pattern instanceof RegExp?(t.pattern.lastIndex=0,t.pattern.test(e)||i.push(_n(r.messages.pattern.mismatch,t.fullField,e,t.pattern))):"string"==typeof t.pattern&&(new RegExp(t.pattern).test(e)||i.push(_n(r.messages.pattern.mismatch,t.fullField,e,t.pattern))))},ni=function(t,e,n,i,r){var o=t.type,s=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e,o)&&!t.required)return n();Yn(t,e,i,s,r,o),In(e,o)||Un(t,e,i,s,r)}n(s)},ii={string:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e,"string")&&!t.required)return n();Yn(t,e,i,o,r,"string"),In(e,"string")||(Un(t,e,i,o,r),Jn(t,e,i,o,r),ei(t,e,i,o,r),!0===t.whitespace&&Gn(t,e,i,o,r))}n(o)},method:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e)&&!t.required)return n();Yn(t,e,i,o,r),void 0!==e&&Un(t,e,i,o,r)}n(o)},number:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(""===e&&(e=void 0),In(e)&&!t.required)return n();Yn(t,e,i,o,r),void 0!==e&&(Un(t,e,i,o,r),Jn(t,e,i,o,r))}n(o)},boolean:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e)&&!t.required)return n();Yn(t,e,i,o,r),void 0!==e&&Un(t,e,i,o,r)}n(o)},regexp:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e)&&!t.required)return n();Yn(t,e,i,o,r),In(e)||Un(t,e,i,o,r)}n(o)},integer:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e)&&!t.required)return n();Yn(t,e,i,o,r),void 0!==e&&(Un(t,e,i,o,r),Jn(t,e,i,o,r))}n(o)},float:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e)&&!t.required)return n();Yn(t,e,i,o,r),void 0!==e&&(Un(t,e,i,o,r),Jn(t,e,i,o,r))}n(o)},array:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(null==e&&!t.required)return n();Yn(t,e,i,o,r,"array"),null!=e&&(Un(t,e,i,o,r),Jn(t,e,i,o,r))}n(o)},object:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e)&&!t.required)return n();Yn(t,e,i,o,r),void 0!==e&&Un(t,e,i,o,r)}n(o)},enum:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e)&&!t.required)return n();Yn(t,e,i,o,r),void 0!==e&&ti(t,e,i,o,r)}n(o)},pattern:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e,"string")&&!t.required)return n();Yn(t,e,i,o,r),In(e,"string")||ei(t,e,i,o,r)}n(o)},date:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e,"date")&&!t.required)return n();var s;Yn(t,e,i,o,r),In(e,"date")||(s=e instanceof Date?e:new Date(e),Un(t,s,i,o,r),s&&Jn(t,s.getTime(),i,o,r))}n(o)},url:ni,hex:ni,email:ni,required:function(t,e,n,i,r){var o=[],s=Array.isArray(e)?"array":yn(e);Yn(t,e,i,o,r,s),n(o)},any:function(t,e,n,i,r){var o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(In(e)&&!t.required)return n();Yn(t,e,i,o,r)}n(o)}},ri=function(){function t(e){An(this,t),On(this,"rules",null),On(this,"_messages",Tn),this.define(e)}return En(t,[{key:"define",value:function(t){var e=this;if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!==yn(t)||Array.isArray(t))throw new Error("Rules must be an object");this.rules={},Object.keys(t).forEach((function(n){var i=t[n];e.rules[n]=Array.isArray(i)?i:[i]}))}},{key:"messages",value:function(t){return t&&(this._messages=Vn(Pn(),t)),this._messages}},{key:"validate",value:function(e){var n=this,i=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("function"==typeof r&&(o=r,r={}),!this.rules||0===Object.keys(this.rules).length)return o&&o(null,i),Promise.resolve(i);if(r.messages){var s=this.messages();s===Tn&&(s=Pn()),Vn(s,r.messages),r.messages=s}else r.messages=this.messages();var a={};(r.keys||Object.keys(this.rules)).forEach((function(t){var r=n.rules[t],o=i[t];r.forEach((function(r){var s=r;"function"==typeof s.transform&&(i===e&&(i=xn({},i)),null!=(o=i[t]=s.transform(o))&&(s.type=s.type||(Array.isArray(o)?"array":yn(o)))),(s="function"==typeof s?{validator:s}:xn({},s)).validator=n.getValidationMethod(s),s.validator&&(s.field=t,s.fullField=s.fullField||t,s.type=n.getType(s),a[t]=a[t]||[],a[t].push({rule:s,value:o,source:i,field:t}))}))}));var l={};return function(t,e,n,i,r){if(e.first){var o=new Promise((function(e,o){var s=function(t){var e=[];return Object.keys(t).forEach((function(n){e.push.apply(e,Cn(t[n]||[]))})),e}(t);zn(s,n,(function(t){return i(t),t.length?o(new Qn(t,jn(t))):e(r)}))}));return o.catch((function(t){return t})),o}var s=!0===e.firstFields?Object.keys(t):e.firstFields||[],a=Object.keys(t),l=a.length,c=0,h=[],u=new Promise((function(e,o){var u=function(t){if(h.push.apply(h,t),++c===l)return i(h),h.length?o(new Qn(h,jn(h))):e(r)};a.length||(i(h),e(r)),a.forEach((function(e){var i=t[e];-1!==s.indexOf(e)?zn(i,n,u):function(t,e,n){var i=[],r=0,o=t.length;function s(t){i.push.apply(i,Cn(t||[])),++r===o&&n(i)}t.forEach((function(t){e(t,s)}))}(i,n,u)}))}));return u.catch((function(t){return t})),u}(a,r,(function(e,n){var o,s=e.rule,a=!("object"!==s.type&&"array"!==s.type||"object"!==yn(s.fields)&&"object"!==yn(s.defaultField));function c(t,e){return xn(xn({},e),{},{fullField:"".concat(s.fullField,".").concat(t),fullFields:s.fullFields?[].concat(Cn(s.fullFields),[t]):[t]})}function h(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],h=Array.isArray(o)?o:[o];!r.suppressWarning&&h.length&&t.warning("async-validator:",h),h.length&&void 0!==s.message&&(h=[].concat(s.message));var u=h.map(Hn(s,i));if(r.first&&u.length)return l[s.field]=1,n(u);if(a){if(s.required&&!e.value)return void 0!==s.message?u=[].concat(s.message).map(Hn(s,i)):r.error&&(u=[r.error(s,_n(r.messages.required,s.field))]),n(u);var d={};s.defaultField&&Object.keys(e.value).map((function(t){d[t]=s.defaultField})),d=xn(xn({},d),e.rule.fields);var f={};Object.keys(d).forEach((function(t){var e=d[t],n=Array.isArray(e)?e:[e];f[t]=n.map(c.bind(null,t))}));var p=new t(f);p.messages(r.messages),e.rule.options&&(e.rule.options.messages=r.messages,e.rule.options.error=r.error),p.validate(e.value,e.rule.options||r,(function(t){var e=[];u&&u.length&&e.push.apply(e,Cn(u)),t&&t.length&&e.push.apply(e,Cn(t)),n(e.length?e:null)}))}else n(u)}if(a=a&&(s.required||!s.required&&e.value),s.field=e.field,s.asyncValidator)o=s.asyncValidator(s,e.value,h,e.source,r);else if(s.validator){try{o=s.validator(s,e.value,h,e.source,r)}catch(t){var u,d;null===(u=(d=console).error)||void 0===u||u.call(d,t),r.suppressValidatorError||setTimeout((function(){throw t}),0),h(t.message)}!0===o?h():!1===o?h("function"==typeof s.message?s.message(s.fullField||s.field):s.message||"".concat(s.fullField||s.field," fails")):o instanceof Array?h(o):o instanceof Error&&h(o.message)}o&&o.then&&o.then((function(){return h()}),(function(t){return h(t)}))}),(function(t){!function(t){for(var e,n,r=[],s={},a=0;a<t.length;a++)e=t[a],n=void 0,Array.isArray(e)?r=(n=r).concat.apply(n,Cn(e)):r.push(e);r.length?(s=jn(r),o(r,s)):o(null,i)}(t)}),i)}},{key:"getType",value:function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!=typeof t.validator&&t.type&&!ii.hasOwnProperty(t.type))throw new Error(_n("Unknown rule type %s",t.type));return t.type||"string"}},{key:"getValidationMethod",value:function(t){if("function"==typeof t.validator)return t.validator;var e=Object.keys(t),n=e.indexOf("message");return-1!==n&&e.splice(n,1),1===e.length&&"required"===e[0]?ii.required:ii[this.getType(t)]||void 0}}]),t}();On(ri,"register",(function(t,e){if("function"!=typeof e)throw new Error("Cannot register a validator by type, validator is not a function");ii[t]=e})),On(ri,"warning",(function(){})),On(ri,"messages",Tn),On(ri,"validators",ii);var oi="'${name}' is not a valid ${type}",si={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:oi,method:oi,array:oi,object:oi,number:oi,date:oi,boolean:oi,integer:oi,float:oi,regexp:oi,email:oi,url:oi,hex:oi},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},ai=ri;function li(t,e){return t.replace(/\\?\$\{\w+\}/g,(function(t){if(t.startsWith("\\"))return t.slice(1);var n=t.slice(2,-1);return e[n]}))}var ci="CODE_LOGIC_ERROR";function hi(t,e,n,i,r){return ui.apply(this,arguments)}function ui(){return ui=Ge(Ze().mark((function t(e,i,r,o,s){var a,l,c,h,u,d,p,g,m;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete(a=en({},r)).ruleIndex,ai.warning=function(){},a.validator&&(l=a.validator,a.validator=function(){try{return l.apply(void 0,arguments)}catch(t){return console.error(t),Promise.reject(ci)}}),c=null,a&&"array"===a.type&&a.defaultField&&(c=a.defaultField,delete a.defaultField),h=new ai(Je({},e,[a])),u=(0,f.h)(si,o.validateMessages),h.messages(u),d=[],t.prev=10,t.next=13,Promise.resolve(h.validate(Je({},e,i),en({},o)));case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(10),t.t0.errors&&(d=t.t0.errors.map((function(t,e){var i=t.message,r=i===ci?u.default:i;return n.isValidElement(r)?n.cloneElement(r,{key:"error_".concat(e)}):r})));case 18:if(d.length||!c){t.next=23;break}return t.next=21,Promise.all(i.map((function(t,n){return hi("".concat(e,".").concat(n),t,c,o,s)})));case 21:return p=t.sent,t.abrupt("return",p.reduce((function(t,e){return[].concat(on(t),on(e))}),[]));case 23:return g=en(en({},r),{},{name:e,enum:(r.enum||[]).join(", ")},s),m=d.map((function(t){return"string"==typeof t?li(t,g):t})),t.abrupt("return",m);case 26:case"end":return t.stop()}}),t,null,[[10,15]])}))),ui.apply(this,arguments)}function di(t,e,n,i,r,o){var s,a=t.join("."),l=n.map((function(t,e){var n=t.validator,i=en(en({},t),{},{ruleIndex:e});return n&&(i.validator=function(t,e,i){var r=!1,o=n(t,e,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Promise.resolve().then((function(){(0,p.Ay)(!r,"Your validator function has already return a promise. `callback` will be ignored."),r||i.apply(void 0,e)}))}));r=o&&"function"==typeof o.then&&"function"==typeof o.catch,(0,p.Ay)(r,"`callback` is deprecated. Please return a promise instead."),r&&o.then((function(){i()})).catch((function(t){i(t||" ")}))}),i})).sort((function(t,e){var n=t.warningOnly,i=t.ruleIndex,r=e.warningOnly,o=e.ruleIndex;return!!n==!!r?i-o:n?1:-1}));if(!0===r)s=new Promise(function(){var t=Ge(Ze().mark((function t(n,r){var s,c,h;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<l.length)){t.next=12;break}return c=l[s],t.next=5,hi(a,e,c,i,o);case 5:if(!(h=t.sent).length){t.next=9;break}return r([{errors:h,rule:c}]),t.abrupt("return");case 9:s+=1,t.next=1;break;case 12:n([]);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());else{var c=l.map((function(t){return hi(a,e,t,i,o).then((function(e){return{errors:e,rule:t}}))}));s=(r?function(t){return pi.apply(this,arguments)}(c):function(t){return fi.apply(this,arguments)}(c)).then((function(t){return Promise.reject(t)}))}return s.catch((function(t){return t})),s}function fi(){return(fi=Ge(Ze().mark((function t(e){return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(e).then((function(t){var e;return(e=[]).concat.apply(e,on(t))})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pi(){return(pi=Ge(Ze().mark((function t(e){var n;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,t.abrupt("return",new Promise((function(t){e.forEach((function(i){i.then((function(i){i.errors.length&&t([i]),(n+=1)===e.length&&t([])}))}))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var gi=__webpack_require__(6300);function mi(t){return bn(t)}function vi(t,e){var n={};return e.forEach((function(e){var i=(0,gi.A)(t,e);n=(0,f.A)(n,e,i)})),n}function bi(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t&&t.some((function(t){return yi(e,t,n)}))}function yi(t,e){return!(!t||!e)&&!(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&t.length!==e.length)&&e.every((function(e,n){return t[n]===e}))}function wi(t){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&"object"===Ke(e.target)&&t in e.target?e.target[t]:e}function Oi(t,e,n){var i=t.length;if(e<0||e>=i||n<0||n>=i)return t;var r=t[e],o=e-n;return o>0?[].concat(on(t.slice(0,n)),[r],on(t.slice(n,e)),on(t.slice(e+1,i))):o<0?[].concat(on(t.slice(0,e)),on(t.slice(e+1,n+1)),[r],on(t.slice(n+1,i))):t}var Si=["name"],xi=[];function ki(t,e,n,i,r,o){return"function"==typeof t?t(e,n,"source"in o?{source:o.source}:{}):i!==r}var Ci=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hn(t,e)}(i,t);var e=function(t){var e=dn();return function(){var n,i=un(t);if(e){var r=un(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"==Ke(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cn(t)}(this,n)}}(i);function i(t){var r;return sn(this,i),Je(cn(r=e.call(this,t)),"state",{resetCount:0}),Je(cn(r),"cancelRegisterFunc",null),Je(cn(r),"mounted",!1),Je(cn(r),"touched",!1),Je(cn(r),"dirty",!1),Je(cn(r),"validatePromise",void 0),Je(cn(r),"prevValidating",void 0),Je(cn(r),"errors",xi),Je(cn(r),"warnings",xi),Je(cn(r),"cancelRegister",(function(){var t=r.props,e=t.preserve,n=t.isListField,i=t.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,e,mi(i)),r.cancelRegisterFunc=null})),Je(cn(r),"getNamePath",(function(){var t=r.props,e=t.name,n=t.fieldContext.prefixName;return void 0!==e?[].concat(on(void 0===n?[]:n),on(e)):[]})),Je(cn(r),"getRules",(function(){var t=r.props,e=t.rules,n=void 0===e?[]:e,i=t.fieldContext;return n.map((function(t){return"function"==typeof t?t(i):t}))})),Je(cn(r),"refresh",(function(){r.mounted&&r.setState((function(t){return{resetCount:t.resetCount+1}}))})),Je(cn(r),"metaCache",null),Je(cn(r),"triggerMetaEvent",(function(t){var e=r.props.onMetaChange;if(e){var n=en(en({},r.getMeta()),{},{destroy:t});(0,F.A)(r.metaCache,n)||e(n),r.metaCache=n}else r.metaCache=null})),Je(cn(r),"onStoreChange",(function(t,e,n){var i=r.props,o=i.shouldUpdate,s=i.dependencies,a=void 0===s?[]:s,l=i.onReset,c=n.store,h=r.getNamePath(),u=r.getValue(t),d=r.getValue(c),f=e&&bi(e,h);switch("valueUpdate"!==n.type||"external"!==n.source||(0,F.A)(u,d)||(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=xi,r.warnings=xi,r.triggerMetaEvent()),n.type){case"reset":if(!e||f)return r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.errors=xi,r.warnings=xi,r.triggerMetaEvent(),null==l||l(),void r.refresh();break;case"remove":if(o&&ki(o,t,c,u,d,n))return void r.reRender();break;case"setField":var p=n.data;if(f)return"touched"in p&&(r.touched=p.touched),"validating"in p&&!("originRCField"in p)&&(r.validatePromise=p.validating?Promise.resolve([]):null),"errors"in p&&(r.errors=p.errors||xi),"warnings"in p&&(r.warnings=p.warnings||xi),r.dirty=!0,r.triggerMetaEvent(),void r.reRender();if("value"in p&&bi(e,h,!0))return void r.reRender();if(o&&!h.length&&ki(o,t,c,u,d,n))return void r.reRender();break;case"dependenciesUpdate":if(a.map(mi).some((function(t){return bi(n.relatedFields,t)})))return void r.reRender();break;default:if(f||(!a.length||h.length||o)&&ki(o,t,c,u,d,n))return void r.reRender()}!0===o&&r.reRender()})),Je(cn(r),"validateRules",(function(t){var e=r.getNamePath(),n=r.getValue(),i=t||{},o=i.triggerName,s=i.validateOnly,a=void 0!==s&&s,l=Promise.resolve().then(Ge(Ze().mark((function i(){var s,a,c,h,u,d,f;return Ze().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r.mounted){i.next=2;break}return i.abrupt("return",[]);case 2:if(s=r.props,a=s.validateFirst,c=void 0!==a&&a,h=s.messageVariables,u=s.validateDebounce,d=r.getRules(),o&&(d=d.filter((function(t){return t})).filter((function(t){var e=t.validateTrigger;return!e||bn(e).includes(o)}))),!u||!o){i.next=10;break}return i.next=8,new Promise((function(t){setTimeout(t,u)}));case 8:if(r.validatePromise===l){i.next=10;break}return i.abrupt("return",[]);case 10:return(f=di(e,n,d,t,c,h)).catch((function(t){return t})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xi;if(r.validatePromise===l){var e;r.validatePromise=null;var n=[],i=[];null===(e=t.forEach)||void 0===e||e.call(t,(function(t){var e=t.rule.warningOnly,r=t.errors,o=void 0===r?xi:r;e?i.push.apply(i,on(o)):n.push.apply(n,on(o))})),r.errors=n,r.warnings=i,r.triggerMetaEvent(),r.reRender()}})),i.abrupt("return",f);case 13:case"end":return i.stop()}}),i)}))));return a||(r.validatePromise=l,r.dirty=!0,r.errors=xi,r.warnings=xi,r.triggerMetaEvent(),r.reRender()),l})),Je(cn(r),"isFieldValidating",(function(){return!!r.validatePromise})),Je(cn(r),"isFieldTouched",(function(){return r.touched})),Je(cn(r),"isFieldDirty",(function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(pn).getInitialValue)(r.getNamePath())})),Je(cn(r),"getErrors",(function(){return r.errors})),Je(cn(r),"getWarnings",(function(){return r.warnings})),Je(cn(r),"isListField",(function(){return r.props.isListField})),Je(cn(r),"isList",(function(){return r.props.isList})),Je(cn(r),"isPreserve",(function(){return r.props.preserve})),Je(cn(r),"getMeta",(function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath(),validated:null===r.validatePromise}})),Je(cn(r),"getOnlyChild",(function(t){if("function"==typeof t){var e=r.getMeta();return en(en({},r.getOnlyChild(t(r.getControlled(),e,r.props.fieldContext))),{},{isFunction:!0})}var i=(0,fn.A)(t);return 1===i.length&&n.isValidElement(i[0])?{child:i[0],isFunction:!1}:{child:i,isFunction:!1}})),Je(cn(r),"getValue",(function(t){var e=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return(0,gi.A)(t||e(!0),n)})),Je(cn(r),"getControlled",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.props,n=e.name,i=e.trigger,o=e.validateTrigger,s=e.getValueFromEvent,a=e.normalize,l=e.valuePropName,c=e.getValueProps,h=e.fieldContext,u=void 0!==o?o:h.validateTrigger,d=r.getNamePath(),f=h.getInternalHooks,p=h.getFieldsValue,g=f(pn).dispatch,m=r.getValue(),v=c||function(t){return Je({},l,t)},b=t[i],y=void 0!==n?v(m):{},w=en(en({},t),y);return w[i]=function(){var t;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t=s?s.apply(void 0,n):wi.apply(void 0,[l].concat(n)),a&&(t=a(t,m,p(!0))),t!==m&&g({type:"updateValue",namePath:d,value:t}),b&&b.apply(void 0,n)},bn(u||[]).forEach((function(t){var e=w[t];w[t]=function(){e&&e.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&g({type:"validateField",namePath:d,triggerName:t})}})),w})),t.fieldContext&&(0,(0,t.fieldContext.getInternalHooks)(pn).initEntityValue)(cn(r)),r}return ln(i,[{key:"componentDidMount",value:function(){var t=this.props,e=t.shouldUpdate,n=t.fieldContext;if(this.mounted=!0,n){var i=(0,n.getInternalHooks)(pn).registerField;this.cancelRegisterFunc=i(this)}!0===e&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var t,e=this.state.resetCount,i=this.props.children,r=this.getOnlyChild(i),o=r.child;return r.isFunction?t=o:n.isValidElement(o)?t=n.cloneElement(o,this.getControlled(o.props)):((0,p.Ay)(!o,"`children` of Field is not validate ReactElement."),t=o),n.createElement(n.Fragment,{key:e},t)}}]),i}(n.Component);Je(Ci,"contextType",mn),Je(Ci,"defaultProps",{trigger:"onChange",valuePropName:"value"});var Ai=function(t){var e,i=t.name,r=Xe(t,Si),o=n.useContext(mn),s=n.useContext(vn),a=void 0!==i?mi(i):void 0,l=null!==(e=r.isListField)&&void 0!==e?e:!!s,c="keep";return l||(c="_".concat((a||[]).join("_"))),n.createElement(Ci,qe({key:c,name:a,isListField:l},r,{fieldContext:o}))};function Mi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||rn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ei="__@field_split__";function Pi(t){return t.map((function(t){return"".concat(Ke(t),":").concat(t)})).join(Ei)}var Ti=function(){function t(){sn(this,t),Je(this,"kvs",new Map)}return ln(t,[{key:"set",value:function(t,e){this.kvs.set(Pi(t),e)}},{key:"get",value:function(t){return this.kvs.get(Pi(t))}},{key:"update",value:function(t,e){var n=e(this.get(t));n?this.set(t,n):this.delete(t)}},{key:"delete",value:function(t){this.kvs.delete(Pi(t))}},{key:"map",value:function(t){return on(this.kvs.entries()).map((function(e){var n=Mi(e,2),i=n[0],r=n[1],o=i.split(Ei);return t({key:o.map((function(t){var e=Mi(t.match(/^([^:]*):(.*)$/),3),n=e[1],i=e[2];return"number"===n?Number(i):i})),value:r})}))}},{key:"toJSON",value:function(){var t={};return this.map((function(e){var n=e.key,i=e.value;return t[n.join(".")]=i,null})),t}}]),t}(),$i=["name"],Di=ln((function t(e){var n=this;sn(this,t),Je(this,"formHooked",!1),Je(this,"forceRootUpdate",void 0),Je(this,"subscribable",!0),Je(this,"store",{}),Je(this,"fieldEntities",[]),Je(this,"initialValues",{}),Je(this,"callbacks",{}),Je(this,"validateMessages",null),Je(this,"preserve",null),Je(this,"lastValidatePromise",null),Je(this,"getForm",(function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}})),Je(this,"getInternalHooks",(function(t){return t===pn?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):((0,p.Ay)(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)})),Je(this,"useSubscribe",(function(t){n.subscribable=t})),Je(this,"prevWithoutPreserves",null),Je(this,"setInitialValues",(function(t,e){if(n.initialValues=t||{},e){var i,r=(0,f.h)(t,n.store);null===(i=n.prevWithoutPreserves)||void 0===i||i.map((function(e){var n=e.key;r=(0,f.A)(r,n,(0,gi.A)(t,n))})),n.prevWithoutPreserves=null,n.updateStore(r)}})),Je(this,"destroyForm",(function(t){if(t)n.updateStore({});else{var e=new Ti;n.getFieldEntities(!0).forEach((function(t){n.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)})),n.prevWithoutPreserves=e}})),Je(this,"getInitialValue",(function(t){var e=(0,gi.A)(n.initialValues,t);return t.length?(0,f.h)(e):e})),Je(this,"setCallbacks",(function(t){n.callbacks=t})),Je(this,"setValidateMessages",(function(t){n.validateMessages=t})),Je(this,"setPreserve",(function(t){n.preserve=t})),Je(this,"watchList",[]),Je(this,"registerWatch",(function(t){return n.watchList.push(t),function(){n.watchList=n.watchList.filter((function(e){return e!==t}))}})),Je(this,"notifyWatch",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var e=n.getFieldsValue(),i=n.getFieldsValue(!0);n.watchList.forEach((function(n){n(e,i,t)}))}})),Je(this,"timeoutId",null),Je(this,"warningUnhooked",(function(){})),Je(this,"updateStore",(function(t){n.store=t})),Je(this,"getFieldEntities",(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(t){return t.getNamePath().length})):n.fieldEntities})),Je(this,"getFieldsMap",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new Ti;return n.getFieldEntities(t).forEach((function(t){var n=t.getNamePath();e.set(n,t)})),e})),Je(this,"getFieldEntitiesForNamePathList",(function(t){if(!t)return n.getFieldEntities(!0);var e=n.getFieldsMap(!0);return t.map((function(t){var n=mi(t);return e.get(n)||{INVALIDATE_NAME_PATH:mi(t)}}))})),Je(this,"getFieldsValue",(function(t,e){var i,r,o;if(n.warningUnhooked(),!0===t||Array.isArray(t)?(i=t,r=e):t&&"object"===Ke(t)&&(o=t.strict,r=t.filter),!0===i&&!r)return n.store;var s=n.getFieldEntitiesForNamePathList(Array.isArray(i)?i:null),a=[];return s.forEach((function(t){var e,n,s,l,c="INVALIDATE_NAME_PATH"in t?t.INVALIDATE_NAME_PATH:t.getNamePath();if(o){if(null!==(s=(l=t).isList)&&void 0!==s&&s.call(l))return}else if(!i&&null!==(e=(n=t).isListField)&&void 0!==e&&e.call(n))return;if(r){var h="getMeta"in t?t.getMeta():null;r(h)&&a.push(c)}else a.push(c)})),vi(n.store,a.map(mi))})),Je(this,"getFieldValue",(function(t){n.warningUnhooked();var e=mi(t);return(0,gi.A)(n.store,e)})),Je(this,"getFieldsError",(function(t){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(t).map((function(e,n){return e&&!("INVALIDATE_NAME_PATH"in e)?{name:e.getNamePath(),errors:e.getErrors(),warnings:e.getWarnings()}:{name:mi(t[n]),errors:[],warnings:[]}}))})),Je(this,"getFieldError",(function(t){n.warningUnhooked();var e=mi(t);return n.getFieldsError([e])[0].errors})),Je(this,"getFieldWarning",(function(t){n.warningUnhooked();var e=mi(t);return n.getFieldsError([e])[0].warnings})),Je(this,"isFieldsTouched",(function(){n.warningUnhooked();for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r,o=e[0],s=e[1],a=!1;0===e.length?r=null:1===e.length?Array.isArray(o)?(r=o.map(mi),a=!1):(r=null,a=o):(r=o.map(mi),a=s);var l=n.getFieldEntities(!0),c=function(t){return t.isFieldTouched()};if(!r)return a?l.every((function(t){return c(t)||t.isList()})):l.some(c);var h=new Ti;r.forEach((function(t){h.set(t,[])})),l.forEach((function(t){var e=t.getNamePath();r.forEach((function(n){n.every((function(t,n){return e[n]===t}))&&h.update(n,(function(e){return[].concat(on(e),[t])}))}))}));var u=function(t){return t.some(c)},d=h.map((function(t){return t.value}));return a?d.every(u):d.some(u)})),Je(this,"isFieldTouched",(function(t){return n.warningUnhooked(),n.isFieldsTouched([t])})),Je(this,"isFieldsValidating",(function(t){n.warningUnhooked();var e=n.getFieldEntities();if(!t)return e.some((function(t){return t.isFieldValidating()}));var i=t.map(mi);return e.some((function(t){var e=t.getNamePath();return bi(i,e)&&t.isFieldValidating()}))})),Je(this,"isFieldValidating",(function(t){return n.warningUnhooked(),n.isFieldsValidating([t])})),Je(this,"resetWithFieldInitialValue",(function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=new Ti,r=n.getFieldEntities(!0);r.forEach((function(t){var e=t.props.initialValue,n=t.getNamePath();if(void 0!==e){var r=i.get(n)||new Set;r.add({entity:t,value:e}),i.set(n,r)}})),e.entities?t=e.entities:e.namePathList?(t=[],e.namePathList.forEach((function(e){var n,r=i.get(e);r&&(n=t).push.apply(n,on(on(r).map((function(t){return t.entity}))))}))):t=r,t.forEach((function(t){if(void 0!==t.props.initialValue){var r=t.getNamePath();if(void 0!==n.getInitialValue(r))(0,p.Ay)(!1,"Form already set 'initialValues' with path '".concat(r.join("."),"'. Field can not overwrite it."));else{var o=i.get(r);if(o&&o.size>1)(0,p.Ay)(!1,"Multiple Field with path '".concat(r.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(o){var s=n.getFieldValue(r);t.isListField()||e.skipExist&&void 0!==s||n.updateStore((0,f.A)(n.store,r,on(o)[0].value))}}}}))})),Je(this,"resetFields",(function(t){n.warningUnhooked();var e=n.store;if(!t)return n.updateStore((0,f.h)(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(e,null,{type:"reset"}),void n.notifyWatch();var i=t.map(mi);i.forEach((function(t){var e=n.getInitialValue(t);n.updateStore((0,f.A)(n.store,t,e))})),n.resetWithFieldInitialValue({namePathList:i}),n.notifyObservers(e,i,{type:"reset"}),n.notifyWatch(i)})),Je(this,"setFields",(function(t){n.warningUnhooked();var e=n.store,i=[];t.forEach((function(t){var r=t.name,o=Xe(t,$i),s=mi(r);i.push(s),"value"in o&&n.updateStore((0,f.A)(n.store,s,o.value)),n.notifyObservers(e,[s],{type:"setField",data:t})})),n.notifyWatch(i)})),Je(this,"getFields",(function(){return n.getFieldEntities(!0).map((function(t){var e=t.getNamePath(),i=en(en({},t.getMeta()),{},{name:e,value:n.getFieldValue(e)});return Object.defineProperty(i,"originRCField",{value:!0}),i}))})),Je(this,"initEntityValue",(function(t){var e=t.props.initialValue;if(void 0!==e){var i=t.getNamePath();void 0===(0,gi.A)(n.store,i)&&n.updateStore((0,f.A)(n.store,i,e))}})),Je(this,"isMergedPreserve",(function(t){var e=void 0!==t?t:n.preserve;return null==e||e})),Je(this,"registerField",(function(t){n.fieldEntities.push(t);var e=t.getNamePath();if(n.notifyWatch([e]),void 0!==t.props.initialValue){var i=n.store;n.resetWithFieldInitialValue({entities:[t],skipExist:!0}),n.notifyObservers(i,[t.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(i,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(e){return e!==t})),!n.isMergedPreserve(r)&&(!i||o.length>1)){var s=i?void 0:n.getInitialValue(e);if(e.length&&n.getFieldValue(e)!==s&&n.fieldEntities.every((function(t){return!yi(t.getNamePath(),e)}))){var a=n.store;n.updateStore((0,f.A)(a,e,s,!0)),n.notifyObservers(a,[e],{type:"remove"}),n.triggerDependenciesUpdate(a,e)}}n.notifyWatch([e])}})),Je(this,"dispatch",(function(t){switch(t.type){case"updateValue":var e=t.namePath,i=t.value;n.updateValue(e,i);break;case"validateField":var r=t.namePath,o=t.triggerName;n.validateFields([r],{triggerName:o})}})),Je(this,"notifyObservers",(function(t,e,i){if(n.subscribable){var r=en(en({},i),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(t,e,r)}))}else n.forceRootUpdate()})),Je(this,"triggerDependenciesUpdate",(function(t,e){var i=n.getDependencyChildrenFields(e);return i.length&&n.validateFields(i),n.notifyObservers(t,i,{type:"dependenciesUpdate",relatedFields:[e].concat(on(i))}),i})),Je(this,"updateValue",(function(t,e){var i=mi(t),r=n.store;n.updateStore((0,f.A)(n.store,i,e)),n.notifyObservers(r,[i],{type:"valueUpdate",source:"internal"}),n.notifyWatch([i]);var o=n.triggerDependenciesUpdate(r,i),s=n.callbacks.onValuesChange;s&&s(vi(n.store,[i]),n.getFieldsValue()),n.triggerOnFieldsChange([i].concat(on(o)))})),Je(this,"setFieldsValue",(function(t){n.warningUnhooked();var e=n.store;if(t){var i=(0,f.h)(n.store,t);n.updateStore(i)}n.notifyObservers(e,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()})),Je(this,"setFieldValue",(function(t,e){n.setFields([{name:t,value:e,errors:[],warnings:[]}])})),Je(this,"getDependencyChildrenFields",(function(t){var e=new Set,i=[],r=new Ti;return n.getFieldEntities().forEach((function(t){(t.props.dependencies||[]).forEach((function(e){var n=mi(e);r.update(n,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return e.add(t),e}))}))})),function t(n){(r.get(n)||new Set).forEach((function(n){if(!e.has(n)){e.add(n);var r=n.getNamePath();n.isFieldDirty()&&r.length&&(i.push(r),t(r))}}))}(t),i})),Je(this,"triggerOnFieldsChange",(function(t,e){var i=n.callbacks.onFieldsChange;if(i){var r=n.getFields();if(e){var o=new Ti;e.forEach((function(t){var e=t.name,n=t.errors;o.set(e,n)})),r.forEach((function(t){t.errors=o.get(t.name)||t.errors}))}var s=r.filter((function(e){var n=e.name;return bi(t,n)}));s.length&&i(s,r)}})),Je(this,"validateFields",(function(t,e){var i,r;n.warningUnhooked(),Array.isArray(t)||"string"==typeof t||"string"==typeof e?(i=t,r=e):r=t;var o=!!i,s=o?i.map(mi):[],a=[],l=String(Date.now()),c=new Set,h=r||{},u=h.recursive,d=h.dirty;n.getFieldEntities(!0).forEach((function(t){if(o||s.push(t.getNamePath()),t.props.rules&&t.props.rules.length&&(!d||t.isFieldDirty())){var e=t.getNamePath();if(c.add(e.join(l)),!o||bi(s,e,u)){var i=t.validateRules(en({validateMessages:en(en({},si),n.validateMessages)},r));a.push(i.then((function(){return{name:e,errors:[],warnings:[]}})).catch((function(t){var n,i=[],r=[];return null===(n=t.forEach)||void 0===n||n.call(t,(function(t){var e=t.rule.warningOnly,n=t.errors;e?r.push.apply(r,on(n)):i.push.apply(i,on(n))})),i.length?Promise.reject({name:e,errors:i,warnings:r}):{name:e,errors:i,warnings:r}})))}}}));var f=function(t){var e=!1,n=t.length,i=[];return t.length?new Promise((function(r,o){t.forEach((function(t,s){t.catch((function(t){return e=!0,t})).then((function(t){n-=1,i[s]=t,n>0||(e&&o(i),r(i))}))}))})):Promise.resolve([])}(a);n.lastValidatePromise=f,f.catch((function(t){return t})).then((function(t){var e=t.map((function(t){return t.name}));n.notifyObservers(n.store,e,{type:"validateFinish"}),n.triggerOnFieldsChange(e,t)}));var p=f.then((function(){return n.lastValidatePromise===f?Promise.resolve(n.getFieldsValue(s)):Promise.reject([])})).catch((function(t){var e=t.filter((function(t){return t&&t.errors.length}));return Promise.reject({values:n.getFieldsValue(s),errorFields:e,outOfDate:n.lastValidatePromise!==f})}));p.catch((function(t){return t}));var g=s.filter((function(t){return c.has(t.join(l))}));return n.triggerOnFieldsChange(g),p})),Je(this,"submit",(function(){n.warningUnhooked(),n.validateFields().then((function(t){var e=n.callbacks.onFinish;if(e)try{e(t)}catch(t){console.error(t)}})).catch((function(t){var e=n.callbacks.onFinishFailed;e&&e(t)}))})),this.forceRootUpdate=e})),Ri=function(t){var e=n.useRef(),i=Mi(n.useState({}),2)[1];if(!e.current)if(t)e.current=t;else{var r=new Di((function(){i({})}));e.current=r.getForm()}return[e.current]},Bi=n.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Ni=Bi,Li=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],ji=function(t,e){var i=t.name,r=t.initialValues,o=t.fields,s=t.form,a=t.preserve,l=t.children,c=t.component,h=void 0===c?"form":c,u=t.validateMessages,d=t.validateTrigger,f=void 0===d?"onChange":d,p=t.onValuesChange,g=t.onFieldsChange,m=t.onFinish,v=t.onFinishFailed,b=t.clearOnDestroy,y=Xe(t,Li),w=n.useRef(null),O=n.useContext(Ni),S=Mi(Ri(s),1)[0],x=S.getInternalHooks(pn),k=x.useSubscribe,C=x.setInitialValues,A=x.setCallbacks,M=x.setValidateMessages,E=x.setPreserve,P=x.destroyForm;n.useImperativeHandle(e,(function(){return en(en({},S),{},{nativeElement:w.current})})),n.useEffect((function(){return O.registerForm(i,S),function(){O.unregisterForm(i)}}),[O,S,i]),M(en(en({},O.validateMessages),u)),A({onValuesChange:p,onFieldsChange:function(t){if(O.triggerFormChange(i,t),g){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];g.apply(void 0,[t].concat(n))}},onFinish:function(t){O.triggerFormFinish(i,t),m&&m(t)},onFinishFailed:v}),E(a);var T,$=n.useRef(null);C(r,!$.current),$.current||($.current=!0),n.useEffect((function(){return function(){return P(b)}}),[]);var D="function"==typeof l;T=D?l(S.getFieldsValue(!0),S):l,k(!D);var R=n.useRef();n.useEffect((function(){(function(t,e){if(t===e)return!0;if(!t&&e||t&&!e)return!1;if(!t||!e||"object"!==Ke(t)||"object"!==Ke(e))return!1;var n=Object.keys(t),i=Object.keys(e);return on(new Set([].concat(n,i))).every((function(n){var i=t[n],r=e[n];return"function"==typeof i&&"function"==typeof r||i===r}))})(R.current||[],o||[])||S.setFields(o||[]),R.current=o}),[o,S]);var B=n.useMemo((function(){return en(en({},S),{},{validateTrigger:f})}),[S,f]),N=n.createElement(vn.Provider,{value:null},n.createElement(mn.Provider,{value:B},T));return!1===h?N:n.createElement(h,qe({},y,{ref:w,onSubmit:function(t){t.preventDefault(),t.stopPropagation(),S.submit()},onReset:function(t){var e;t.preventDefault(),S.resetFields(),null===(e=y.onReset)||void 0===e||e.call(y,t)}}),N)};function _i(t){try{return JSON.stringify(t)}catch(t){return Math.random()}}var Ii=n.forwardRef(ji);Ii.FormProvider=function(t){var e=t.validateMessages,i=t.onFormChange,r=t.onFormFinish,o=t.children,s=n.useContext(Bi),a=n.useRef({});return n.createElement(Bi.Provider,{value:en(en({},s),{},{validateMessages:en(en({},s.validateMessages),e),triggerFormChange:function(t,e){i&&i(t,{changedFields:e,forms:a.current}),s.triggerFormChange(t,e)},triggerFormFinish:function(t,e){r&&r(t,{values:e,forms:a.current}),s.triggerFormFinish(t,e)},registerForm:function(t,e){t&&(a.current=en(en({},a.current),{},Je({},t,e))),s.registerForm(t,e)},unregisterForm:function(t){var e=en({},a.current);delete e[t],a.current=e,s.unregisterForm(t)}})},o)},Ii.Field=Ai,Ii.List=function(t){var e=t.name,i=t.initialValue,r=t.children,o=t.rules,s=t.validateTrigger,a=t.isListField,l=n.useContext(mn),c=n.useContext(vn),h=n.useRef({keys:[],id:0}).current,u=n.useMemo((function(){var t=mi(l.prefixName)||[];return[].concat(on(t),on(mi(e)))}),[l.prefixName,e]),d=n.useMemo((function(){return en(en({},l),{},{prefixName:u})}),[l,u]),f=n.useMemo((function(){return{getKey:function(t){var e=u.length,n=t[e];return[h.keys[n],t.slice(e+1)]}}}),[u]);return"function"!=typeof r?((0,p.Ay)(!1,"Form.List only accepts function as children."),null):n.createElement(vn.Provider,{value:f},n.createElement(mn.Provider,{value:d},n.createElement(Ai,{name:[],shouldUpdate:function(t,e,n){return"internal"!==n.source&&t!==e},rules:o,validateTrigger:s,initialValue:i,isList:!0,isListField:null!=a?a:!!c},(function(t,e){var n=t.value,i=void 0===n?[]:n,o=t.onChange,s=l.getFieldValue,a=function(){return s(u||[])||[]},c={add:function(t,e){var n=a();e>=0&&e<=n.length?(h.keys=[].concat(on(h.keys.slice(0,e)),[h.id],on(h.keys.slice(e))),o([].concat(on(n.slice(0,e)),[t],on(n.slice(e))))):(h.keys=[].concat(on(h.keys),[h.id]),o([].concat(on(n),[t]))),h.id+=1},remove:function(t){var e=a(),n=new Set(Array.isArray(t)?t:[t]);n.size<=0||(h.keys=h.keys.filter((function(t,e){return!n.has(e)})),o(e.filter((function(t,e){return!n.has(e)}))))},move:function(t,e){if(t!==e){var n=a();t<0||t>=n.length||e<0||e>=n.length||(h.keys=Oi(h.keys,t,e),o(Oi(n,t,e)))}}},d=i||[];return Array.isArray(d)||(d=[]),r(d.map((function(t,e){var n=h.keys[e];return void 0===n&&(h.keys[e]=h.id,n=h.keys[e],h.id+=1),{name:e,key:n,isListField:!0}})),c,e)}))))},Ii.useForm=Ri,Ii.useWatch=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r=e[0],o=e[1],s=void 0===o?{}:o,a=function(t){return t&&!!t._init}(s)?{form:s}:s,l=a.form,c=Mi((0,n.useState)(),2),h=c[0],u=c[1],d=(0,n.useMemo)((function(){return _i(h)}),[h]),f=(0,n.useRef)(d);f.current=d;var p=(0,n.useContext)(mn),g=l||p,m=g&&g._init,v=mi(r),b=(0,n.useRef)(v);return b.current=v,(0,n.useEffect)((function(){if(m){var t=g.getFieldsValue,e=(0,g.getInternalHooks)(pn).registerWatch,n=function(t,e){var n=a.preserve?e:t;return"function"==typeof r?r(n):(0,gi.A)(n,b.current)},i=e((function(t,e){var i=n(t,e),r=_i(i);f.current!==r&&(f.current=r,u(i))})),o=n(t(),t(!0));return h!==o&&u(o),i}}),[m]),h};const zi=n.createContext({}),Qi=({children:t,status:e,override:i})=>{const r=n.useContext(zi),o=n.useMemo((()=>{const t=Object.assign({},r);return i&&delete t.isFormItemInput,e&&(delete t.status,delete t.hasFeedback,delete t.feedbackIcon),t}),[e,i,r]);return n.createElement(zi.Provider,{value:o},t)},Hi=n.createContext(void 0);var Vi=__webpack_require__(6327),Wi=t=>{const{space:e,form:i,children:r}=t;if(null==r)return null;let o=r;return i&&(o=n.default.createElement(Qi,{override:!0,status:!0},o)),e&&(o=n.default.createElement(Vi.K6,null,o)),o},Fi=function(...t){const e={};return t.forEach((t=>{t&&Object.keys(t).forEach((n=>{void 0!==t[n]&&(e[n]=t[n])}))})),e};function qi(t){if(t)return{closable:t.closable,closeIcon:t.closeIcon}}function Xi(t){const{closable:e,closeIcon:i}=t||{};return n.default.useMemo((()=>{if(!e&&(!1===e||!1===i||null===i))return!1;if(void 0===e&&void 0===i)return null;let t={closeIcon:"boolean"!=typeof i&&null!==i?i:void 0};return e&&"object"==typeof e&&(t=Object.assign(Object.assign({},t),e)),t}),[e,i])}const Ki={};var Zi=t=>{const[,,,,e]=(0,Y.Ay)();return e?`${t}-css-var`:""},Yi=__webpack_require__(9853),Gi=t=>{const{prefixCls:e,className:i,style:r,size:o,shape:s}=t,a=At()({[`${e}-lg`]:"large"===o,[`${e}-sm`]:"small"===o}),l=At()({[`${e}-circle`]:"circle"===s,[`${e}-square`]:"square"===s,[`${e}-round`]:"round"===s}),c=n.useMemo((()=>"number"==typeof o?{width:o,height:o,lineHeight:`${o}px`}:{}),[o]);return n.createElement("span",{className:At()(e,a,l,i),style:Object.assign(Object.assign({},c),r)})},Ui=__webpack_require__(7358),Ji=__webpack_require__(4930);const tr=new h.Mo("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),er=t=>({height:t,lineHeight:(0,h.zA)(t)}),nr=t=>Object.assign({width:t},er(t)),ir=t=>({background:t.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:tr,animationDuration:t.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),rr=(t,e)=>Object.assign({width:e(t).mul(5).equal(),minWidth:e(t).mul(5).equal()},er(t)),or=t=>{const{skeletonAvatarCls:e,gradientFromColor:n,controlHeight:i,controlHeightLG:r,controlHeightSM:o}=t;return{[e]:Object.assign({display:"inline-block",verticalAlign:"top",background:n},nr(i)),[`${e}${e}-circle`]:{borderRadius:"50%"},[`${e}${e}-lg`]:Object.assign({},nr(r)),[`${e}${e}-sm`]:Object.assign({},nr(o))}},sr=t=>{const{controlHeight:e,borderRadiusSM:n,skeletonInputCls:i,controlHeightLG:r,controlHeightSM:o,gradientFromColor:s,calc:a}=t;return{[i]:Object.assign({display:"inline-block",verticalAlign:"top",background:s,borderRadius:n},rr(e,a)),[`${i}-lg`]:Object.assign({},rr(r,a)),[`${i}-sm`]:Object.assign({},rr(o,a))}},ar=t=>Object.assign({width:t},er(t)),lr=t=>{const{skeletonImageCls:e,imageSizeBase:n,gradientFromColor:i,borderRadiusSM:r,calc:o}=t;return{[e]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:i,borderRadius:r},ar(o(n).mul(2).equal())),{[`${e}-path`]:{fill:"#bfbfbf"},[`${e}-svg`]:Object.assign(Object.assign({},ar(n)),{maxWidth:o(n).mul(4).equal(),maxHeight:o(n).mul(4).equal()}),[`${e}-svg${e}-svg-circle`]:{borderRadius:"50%"}}),[`${e}${e}-circle`]:{borderRadius:"50%"}}},cr=(t,e,n)=>{const{skeletonButtonCls:i}=t;return{[`${n}${i}-circle`]:{width:e,minWidth:e,borderRadius:"50%"},[`${n}${i}-round`]:{borderRadius:e}}},hr=(t,e)=>Object.assign({width:e(t).mul(2).equal(),minWidth:e(t).mul(2).equal()},er(t)),ur=t=>{const{borderRadiusSM:e,skeletonButtonCls:n,controlHeight:i,controlHeightLG:r,controlHeightSM:o,gradientFromColor:s,calc:a}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:s,borderRadius:e,width:a(i).mul(2).equal(),minWidth:a(i).mul(2).equal()},hr(i,a))},cr(t,i,n)),{[`${n}-lg`]:Object.assign({},hr(r,a))}),cr(t,r,`${n}-lg`)),{[`${n}-sm`]:Object.assign({},hr(o,a))}),cr(t,o,`${n}-sm`))},dr=t=>{const{componentCls:e,skeletonAvatarCls:n,skeletonTitleCls:i,skeletonParagraphCls:r,skeletonButtonCls:o,skeletonInputCls:s,skeletonImageCls:a,controlHeight:l,controlHeightLG:c,controlHeightSM:h,gradientFromColor:u,padding:d,marginSM:f,borderRadius:p,titleHeight:g,blockRadius:m,paragraphLiHeight:v,controlHeightXS:b,paragraphMarginTop:y}=t;return{[e]:{display:"table",width:"100%",[`${e}-header`]:{display:"table-cell",paddingInlineEnd:d,verticalAlign:"top",[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:u},nr(l)),[`${n}-circle`]:{borderRadius:"50%"},[`${n}-lg`]:Object.assign({},nr(c)),[`${n}-sm`]:Object.assign({},nr(h))},[`${e}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[i]:{width:"100%",height:g,background:u,borderRadius:m,[`+ ${r}`]:{marginBlockStart:h}},[r]:{padding:0,"> li":{width:"100%",height:v,listStyle:"none",background:u,borderRadius:m,"+ li":{marginBlockStart:b}}},[`${r}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${e}-content`]:{[`${i}, ${r} > li`]:{borderRadius:p}}},[`${e}-with-avatar ${e}-content`]:{[i]:{marginBlockStart:f,[`+ ${r}`]:{marginBlockStart:y}}},[`${e}${e}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},ur(t)),or(t)),sr(t)),lr(t)),[`${e}${e}-block`]:{width:"100%",[o]:{width:"100%"},[s]:{width:"100%"}},[`${e}${e}-active`]:{[`\n        ${i},\n        ${r} > li,\n        ${n},\n        ${o},\n        ${s},\n        ${a}\n      `]:Object.assign({},ir(t))}}};var fr=(0,Ui.OF)("Skeleton",(t=>{const{componentCls:e,calc:n}=t,i=(0,Ji.oX)(t,{skeletonAvatarCls:`${e}-avatar`,skeletonTitleCls:`${e}-title`,skeletonParagraphCls:`${e}-paragraph`,skeletonButtonCls:`${e}-button`,skeletonInputCls:`${e}-input`,skeletonImageCls:`${e}-image`,imageSizeBase:n(t.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${t.gradientFromColor} 25%, ${t.gradientToColor} 37%, ${t.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[dr(i)]}),(t=>{const{colorFillContent:e,colorFill:n}=t;return{color:e,colorGradientEnd:n,gradientFromColor:e,gradientToColor:n,titleHeight:t.controlHeight/2,blockRadius:t.borderRadiusSM,paragraphMarginTop:t.marginLG+t.marginXXS,paragraphLiHeight:t.controlHeight/2}}),{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]});const pr=(t,e)=>{const{width:n,rows:i=2}=e;return Array.isArray(n)?n[t]:i-1===t?n:void 0};var gr=t=>{const{prefixCls:e,className:i,style:r,rows:o=0}=t,s=Array.from({length:o}).map(((e,i)=>n.createElement("li",{key:i,style:{width:pr(i,t)}})));return n.createElement("ul",{className:At()(e,i),style:r},s)},mr=({prefixCls:t,className:e,width:i,style:r})=>n.createElement("h3",{className:At()(t,e),style:Object.assign({width:i},r)});function vr(t){return t&&"object"==typeof t?t:{}}const br=t=>{const{prefixCls:e,loading:i,className:r,rootClassName:o,style:s,children:a,avatar:l=!1,title:h=!0,paragraph:u=!0,active:d,round:f}=t,{getPrefixCls:p,direction:g,className:m,style:v}=(0,c.TP)("skeleton"),b=p("skeleton",e),[y,w,O]=fr(b);if(i||!("loading"in t)){const t=!!l,e=!!h,i=!!u;let a,c;if(t){const t=Object.assign(Object.assign({prefixCls:`${b}-avatar`},function(t,e){return t&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}(e,i)),vr(l));a=n.createElement("div",{className:`${b}-header`},n.createElement(Gi,Object.assign({},t)))}if(e||i){let r,o;if(e){const e=Object.assign(Object.assign({prefixCls:`${b}-title`},function(t,e){return!t&&e?{width:"38%"}:t&&e?{width:"50%"}:{}}(t,i)),vr(h));r=n.createElement(mr,Object.assign({},e))}if(i){const i=Object.assign(Object.assign({prefixCls:`${b}-paragraph`},function(t,e){const n={};return t&&e||(n.width="61%"),n.rows=!t&&e?3:2,n}(t,e)),vr(u));o=n.createElement(gr,Object.assign({},i))}c=n.createElement("div",{className:`${b}-content`},r,o)}const p=At()(b,{[`${b}-with-avatar`]:t,[`${b}-active`]:d,[`${b}-rtl`]:"rtl"===g,[`${b}-round`]:f},m,r,o,w,O);return y(n.createElement("div",{className:p,style:Object.assign(Object.assign({},v),s)},a,c))}return null!=a?a:null};br.Button=t=>{const{prefixCls:e,className:i,rootClassName:r,active:o,block:s=!1,size:a="default"}=t,{getPrefixCls:l}=n.useContext(c.QO),h=l("skeleton",e),[u,d,f]=fr(h),p=(0,Yi.A)(t,["prefixCls"]),g=At()(h,`${h}-element`,{[`${h}-active`]:o,[`${h}-block`]:s},i,r,d,f);return u(n.createElement("div",{className:g},n.createElement(Gi,Object.assign({prefixCls:`${h}-button`,size:a},p))))},br.Avatar=t=>{const{prefixCls:e,className:i,rootClassName:r,active:o,shape:s="circle",size:a="default"}=t,{getPrefixCls:l}=n.useContext(c.QO),h=l("skeleton",e),[u,d,f]=fr(h),p=(0,Yi.A)(t,["prefixCls","className"]),g=At()(h,`${h}-element`,{[`${h}-active`]:o},i,r,d,f);return u(n.createElement("div",{className:g},n.createElement(Gi,Object.assign({prefixCls:`${h}-avatar`,shape:s,size:a},p))))},br.Input=t=>{const{prefixCls:e,className:i,rootClassName:r,active:o,block:s,size:a="default"}=t,{getPrefixCls:l}=n.useContext(c.QO),h=l("skeleton",e),[u,d,f]=fr(h),p=(0,Yi.A)(t,["prefixCls"]),g=At()(h,`${h}-element`,{[`${h}-active`]:o,[`${h}-block`]:s},i,r,d,f);return u(n.createElement("div",{className:g},n.createElement(Gi,Object.assign({prefixCls:`${h}-input`,size:a},p))))},br.Image=t=>{const{prefixCls:e,className:i,rootClassName:r,style:o,active:s}=t,{getPrefixCls:a}=n.useContext(c.QO),l=a("skeleton",e),[h,u,d]=fr(l),f=At()(l,`${l}-element`,{[`${l}-active`]:s},i,r,u,d);return h(n.createElement("div",{className:f},n.createElement("div",{className:At()(`${l}-image`,i),style:o},n.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${l}-image-svg`},n.createElement("title",null,"Image placeholder"),n.createElement("path",{d:"M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",className:`${l}-image-path`})))))},br.Node=t=>{const{prefixCls:e,className:i,rootClassName:r,style:o,active:s,children:a}=t,{getPrefixCls:l}=n.useContext(c.QO),h=l("skeleton",e),[u,d,f]=fr(h),p=At()(h,`${h}-element`,{[`${h}-active`]:s},d,i,r,f);return u(n.createElement("div",{className:p},n.createElement("div",{className:At()(`${h}-image`,i),style:o},a)))};var yr=br,wr=__webpack_require__(6956);function Or(){}const Sr=n.createContext({add:Or,remove:Or});var xr=()=>{const{cancelButtonProps:t,cancelTextLocale:e,onCancel:i}=(0,n.useContext)(Vt);return n.default.createElement(a.Ay,Object.assign({onClick:i},t),e)},kr=()=>{const{confirmLoading:t,okButtonProps:e,okType:i,okTextLocale:r,onOk:o}=(0,n.useContext)(Vt);return n.default.createElement(a.Ay,Object.assign({},(0,zt.DU)(i),{loading:t,onClick:o},e),r)};function Cr(t,e){return n.default.createElement("span",{className:`${t}-close-x`},e||n.default.createElement(Zt,{className:`${t}-close-icon`}))}const Ar=t=>{const{okText:e,okType:i="primary",cancelText:r,confirmLoading:o,onOk:s,onCancel:a,okButtonProps:c,cancelButtonProps:h,footer:u}=t,[d]=_t("Modal",D()),f={confirmLoading:o,okButtonProps:c,cancelButtonProps:h,okTextLocale:e||(null==d?void 0:d.okText),cancelTextLocale:r||(null==d?void 0:d.cancelText),okType:i,onOk:s,onCancel:a},p=n.default.useMemo((()=>f),(0,l.A)(Object.values(f)));let g;return"function"==typeof u||void 0===u?(g=n.default.createElement(n.default.Fragment,null,n.default.createElement(xr,null),n.default.createElement(kr,null)),"function"==typeof u&&(g=u(g,{OkBtn:kr,CancelBtn:xr})),g=n.default.createElement(Wt,{value:p},g)):g=u,n.default.createElement(V.X,{disabled:!1},g)},Mr=t=>{const{componentCls:e}=t;return{[e]:{position:"relative",maxWidth:"100%",minHeight:1}}},Er=(t,e)=>((t,e)=>{const{prefixCls:n,componentCls:i,gridColumns:r}=t,o={};for(let t=r;t>=0;t--)0===t?(o[`${i}${e}-${t}`]={display:"none"},o[`${i}-push-${t}`]={insetInlineStart:"auto"},o[`${i}-pull-${t}`]={insetInlineEnd:"auto"},o[`${i}${e}-push-${t}`]={insetInlineStart:"auto"},o[`${i}${e}-pull-${t}`]={insetInlineEnd:"auto"},o[`${i}${e}-offset-${t}`]={marginInlineStart:0},o[`${i}${e}-order-${t}`]={order:0}):(o[`${i}${e}-${t}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${t/r*100}%`,maxWidth:t/r*100+"%"}],o[`${i}${e}-push-${t}`]={insetInlineStart:t/r*100+"%"},o[`${i}${e}-pull-${t}`]={insetInlineEnd:t/r*100+"%"},o[`${i}${e}-offset-${t}`]={marginInlineStart:t/r*100+"%"},o[`${i}${e}-order-${t}`]={order:t});return o[`${i}${e}-flex`]={flex:`var(--${n}${e}-flex)`},o})(t,e),Pr=((0,Ui.OF)("Grid",(t=>{const{componentCls:e}=t;return{[e]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}}),(()=>({}))),t=>({xs:t.screenXSMin,sm:t.screenSMMin,md:t.screenMDMin,lg:t.screenLGMin,xl:t.screenXLMin,xxl:t.screenXXLMin})),Tr=((0,Ui.OF)("Grid",(t=>{const e=(0,Ji.oX)(t,{gridColumns:24}),n=Pr(e);return delete n.xs,[Mr(e),Er(e,""),Er(e,"-xs"),Object.keys(n).map((t=>((t,e,n)=>({[`@media (min-width: ${(0,h.zA)(e)})`]:Object.assign({},Er(t,n))}))(e,n[t],`-${t}`))).reduce(((t,e)=>Object.assign(Object.assign({},t),e)),{})]}),(()=>({}))),t=>({animationDuration:t,animationFillMode:"both"})),$r=t=>({animationDuration:t,animationFillMode:"both"}),Dr=(t,e,n,i,r=!1)=>{const o=r?"&":"";return{[`\n      ${o}${t}-enter,\n      ${o}${t}-appear\n    `]:Object.assign(Object.assign({},Tr(i)),{animationPlayState:"paused"}),[`${o}${t}-leave`]:Object.assign(Object.assign({},$r(i)),{animationPlayState:"paused"}),[`\n      ${o}${t}-enter${t}-enter-active,\n      ${o}${t}-appear${t}-appear-active\n    `]:{animationName:e,animationPlayState:"running"},[`${o}${t}-leave${t}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},Rr=new h.Mo("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),Br=new h.Mo("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),Nr=(t,e=!1)=>{const{antCls:n}=t,i=`${n}-fade`,r=e?"&":"";return[Dr(i,Rr,Br,t.motionDurationMid,e),{[`\n        ${r}${i}-enter,\n        ${r}${i}-appear\n      `]:{opacity:0,animationTimingFunction:"linear"},[`${r}${i}-leave`]:{animationTimingFunction:"linear"}}]},Lr=new h.Mo("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),jr=new h.Mo("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),_r=new h.Mo("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Ir=new h.Mo("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),zr=new h.Mo("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Qr=new h.Mo("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),Hr={zoom:{inKeyframes:Lr,outKeyframes:jr},"zoom-big":{inKeyframes:_r,outKeyframes:Ir},"zoom-big-fast":{inKeyframes:_r,outKeyframes:Ir},"zoom-left":{inKeyframes:new h.Mo("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),outKeyframes:new h.Mo("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}})},"zoom-right":{inKeyframes:new h.Mo("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),outKeyframes:new h.Mo("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}})},"zoom-up":{inKeyframes:zr,outKeyframes:Qr},"zoom-down":{inKeyframes:new h.Mo("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),outKeyframes:new h.Mo("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}})}},Vr=(t,e)=>{const{antCls:n}=t,i=`${n}-${e}`,{inKeyframes:r,outKeyframes:o}=Hr[e];return[Dr(i,r,o,"zoom-big-fast"===e?t.motionDurationFast:t.motionDurationMid),{[`\n        ${i}-enter,\n        ${i}-appear\n      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${i}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]};function Wr(t){return{position:t,inset:0}}const Fr=t=>{const{componentCls:e,antCls:n}=t;return[{[`${e}-root`]:{[`${e}${n}-zoom-enter, ${e}${n}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:t.motionDurationSlow,userSelect:"none"},[`${e}${n}-zoom-leave ${e}-content`]:{pointerEvents:"none"},[`${e}-mask`]:Object.assign(Object.assign({},Wr("fixed")),{zIndex:t.zIndexPopupBase,height:"100%",backgroundColor:t.colorBgMask,pointerEvents:"none",[`${e}-hidden`]:{display:"none"}}),[`${e}-wrap`]:Object.assign(Object.assign({},Wr("fixed")),{zIndex:t.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${e}-root`]:Nr(t)}]},qr=t=>{const{componentCls:e}=t;return[{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl"},[`${e}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[e]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${t.screenSMMax}px)`]:{[e]:{maxWidth:"calc(100vw - 16px)",margin:`${(0,h.zA)(t.marginXS)} auto`},[`${e}-centered`]:{[e]:{flex:1}}}}},{[e]:Object.assign(Object.assign({},(0,J.dF)(t)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${(0,h.zA)(t.calc(t.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:t.paddingLG,[`${e}-title`]:{margin:0,color:t.titleColor,fontWeight:t.fontWeightStrong,fontSize:t.titleFontSize,lineHeight:t.titleLineHeight,wordWrap:"break-word"},[`${e}-content`]:{position:"relative",backgroundColor:t.contentBg,backgroundClip:"padding-box",border:0,borderRadius:t.borderRadiusLG,boxShadow:t.boxShadow,pointerEvents:"auto",padding:t.contentPadding},[`${e}-close`]:Object.assign({position:"absolute",top:t.calc(t.modalHeaderHeight).sub(t.modalCloseBtnSize).div(2).equal(),insetInlineEnd:t.calc(t.modalHeaderHeight).sub(t.modalCloseBtnSize).div(2).equal(),zIndex:t.calc(t.zIndexPopupBase).add(10).equal(),padding:0,color:t.modalCloseIconColor,fontWeight:t.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:t.borderRadiusSM,width:t.modalCloseBtnSize,height:t.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${t.motionDurationMid}, background-color ${t.motionDurationMid}`,"&-x":{display:"flex",fontSize:t.fontSizeLG,fontStyle:"normal",lineHeight:(0,h.zA)(t.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:t.modalCloseIconHoverColor,backgroundColor:t.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:t.colorBgTextActive}},(0,J.K8)(t)),[`${e}-header`]:{color:t.colorText,background:t.headerBg,borderRadius:`${(0,h.zA)(t.borderRadiusLG)} ${(0,h.zA)(t.borderRadiusLG)} 0 0`,marginBottom:t.headerMarginBottom,padding:t.headerPadding,borderBottom:t.headerBorderBottom},[`${e}-body`]:{fontSize:t.fontSize,lineHeight:t.lineHeight,wordWrap:"break-word",padding:t.bodyPadding,[`${e}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${(0,h.zA)(t.margin)} auto`}},[`${e}-footer`]:{textAlign:"end",background:t.footerBg,marginTop:t.footerMarginTop,padding:t.footerPadding,borderTop:t.footerBorderTop,borderRadius:t.footerBorderRadius,[`> ${t.antCls}-btn + ${t.antCls}-btn`]:{marginInlineStart:t.marginXS}},[`${e}-open`]:{overflow:"hidden"}})},{[`${e}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${e}-content,\n          ${e}-body,\n          ${e}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${e}-confirm-body`]:{marginBottom:"auto"}}}]},Xr=t=>{const{componentCls:e}=t;return{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl",[`${e}-confirm-body`]:{direction:"rtl"}}}}},Kr=t=>{const{componentCls:e}=t,n=Pr(t);delete n.xs;const i=Object.keys(n).map((t=>({[`@media (min-width: ${(0,h.zA)(n[t])})`]:{width:`var(--${e.replace(".","")}-${t}-width)`}})));return{[`${e}-root`]:{[e]:[{width:`var(--${e.replace(".","")}-xs-width)`}].concat((0,l.A)(i))}}},Zr=t=>{const e=t.padding,n=t.fontSizeHeading5,i=t.lineHeightHeading5;return(0,Ji.oX)(t,{modalHeaderHeight:t.calc(t.calc(i).mul(n).equal()).add(t.calc(e).mul(2).equal()).equal(),modalFooterBorderColorSplit:t.colorSplit,modalFooterBorderStyle:t.lineType,modalFooterBorderWidth:t.lineWidth,modalCloseIconColor:t.colorIcon,modalCloseIconHoverColor:t.colorIconHover,modalCloseBtnSize:t.controlHeight,modalConfirmIconSize:t.fontHeight,modalTitleHeight:t.calc(t.titleFontSize).mul(t.titleLineHeight).equal()})},Yr=t=>({footerBg:"transparent",headerBg:t.colorBgElevated,titleLineHeight:t.lineHeightHeading5,titleFontSize:t.fontSizeHeading5,contentBg:t.colorBgElevated,titleColor:t.colorTextHeading,contentPadding:t.wireframe?0:`${(0,h.zA)(t.paddingMD)} ${(0,h.zA)(t.paddingContentHorizontalLG)}`,headerPadding:t.wireframe?`${(0,h.zA)(t.padding)} ${(0,h.zA)(t.paddingLG)}`:0,headerBorderBottom:t.wireframe?`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorSplit}`:"none",headerMarginBottom:t.wireframe?0:t.marginXS,bodyPadding:t.wireframe?t.paddingLG:0,footerPadding:t.wireframe?`${(0,h.zA)(t.paddingXS)} ${(0,h.zA)(t.padding)}`:0,footerBorderTop:t.wireframe?`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorSplit}`:"none",footerBorderRadius:t.wireframe?`0 0 ${(0,h.zA)(t.borderRadiusLG)} ${(0,h.zA)(t.borderRadiusLG)}`:0,footerMarginTop:t.wireframe?0:t.marginSM,confirmBodyPadding:t.wireframe?`${(0,h.zA)(2*t.padding)} ${(0,h.zA)(2*t.padding)} ${(0,h.zA)(t.paddingLG)}`:0,confirmIconMarginInlineEnd:t.wireframe?t.margin:t.marginSM,confirmBtnsMarginTop:t.wireframe?t.marginLG:t.marginSM});var Gr=(0,Ui.OF)("Modal",(t=>{const e=Zr(t);return[qr(e),Xr(e),Fr(e),Vr(e,"zoom"),Kr(e)]}),Yr,{unitless:{titleLineHeight:!0}});let Ur;(0,z.A)()&&window.document.documentElement&&document.documentElement.addEventListener("click",(t=>{Ur={x:t.pageX,y:t.pageY},setTimeout((()=>{Ur=null}),100)}),!0);var Jr=t=>{const{prefixCls:e,className:i,rootClassName:r,open:o,wrapClassName:s,centered:a,getContainer:l,focusTriggerAfterClose:h=!0,style:u,visible:d,width:f=520,footer:p,classNames:g,styles:m,children:v,loading:b,confirmLoading:y,zIndex:w,mousePosition:O,onOk:S,onCancel:x,destroyOnHidden:k,destroyOnClose:C}=t,A=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading","confirmLoading","zIndex","mousePosition","onOk","onCancel","destroyOnHidden","destroyOnClose"]),{getPopupContainer:M,getPrefixCls:P,direction:T,modal:$}=n.useContext(c.QO),D=t=>{y||null==x||x(t)},R=P("modal",e),B=P(),N=Zi(R),[L,j,_]=Gr(R,N),I=At()(s,{[`${R}-centered`]:null!=a?a:null==$?void 0:$.centered,[`${R}-wrap-rtl`]:"rtl"===T}),z=null===p||b?null:n.createElement(Ar,Object.assign({},t,{onOk:t=>{null==S||S(t)},onCancel:D})),[Q,H,V,W]=function(t,e,i=Ki){const r=Xi(t),o=Xi(e),[s]=_t("global",E.global),a="boolean"!=typeof r&&!!(null==r?void 0:r.disabled),l=n.default.useMemo((()=>Object.assign({closeIcon:n.default.createElement(Zt,null)},i)),[i]),c=n.default.useMemo((()=>!1!==r&&(r?Fi(l,o,r):!1!==o&&(o?Fi(l,o):!!l.closable&&l))),[r,o,l]);return n.default.useMemo((()=>{if(!1===c)return[!1,null,a,{}];const{closeIconRender:t}=l,{closeIcon:e}=c;let i=e;const r=De(c,!0);return null!=i&&(t&&(i=t(e)),i=n.default.isValidElement(i)?n.default.cloneElement(i,Object.assign({"aria-label":s.close},r)):n.default.createElement("span",Object.assign({"aria-label":s.close},r),i)),[!0,i,a,r]}),[c,l])}(qi(t),qi($),{closable:!0,closeIcon:n.createElement(Zt,{className:`${R}-close-icon`}),closeIconRender:t=>Cr(R,t)}),F=function(t){const e=n.useContext(Sr),i=n.useRef(null);return(0,wr.A)((n=>{if(n){const r=t?n.querySelector(t):n;e.add(r),i.current=r}else e.remove(i.current)}))}(`.${R}-content`),[q,X]=$t("Modal",w),[K,Z]=n.useMemo((()=>f&&"object"==typeof f?[void 0,f]:[f,void 0]),[f]),Y=n.useMemo((()=>{const t={};return Z&&Object.keys(Z).forEach((e=>{const n=Z[e];void 0!==n&&(t[`--${R}-${e}-width`]="number"==typeof n?`${n}px`:n)})),t}),[Z]);return L(n.createElement(Wi,{form:!0,space:!0},n.createElement(Mt.Provider,{value:X},n.createElement(Fe,Object.assign({width:K},A,{zIndex:q,getContainer:void 0===l?M:l,prefixCls:R,rootClassName:At()(j,r,_,N),footer:z,visible:null!=o?o:d,mousePosition:null!=O?O:Ur,onClose:D,closable:Q?Object.assign({disabled:V,closeIcon:H},W):Q,closeIcon:H,focusTriggerAfterClose:h,transitionName:Lt(B,"zoom",t.transitionName),maskTransitionName:Lt(B,"fade",t.maskTransitionName),className:At()(j,i,null==$?void 0:$.className),style:Object.assign(Object.assign(Object.assign({},null==$?void 0:$.style),u),Y),classNames:Object.assign(Object.assign(Object.assign({},null==$?void 0:$.classNames),g),{wrapper:At()(I,null==g?void 0:g.wrapper)}),styles:Object.assign(Object.assign({},null==$?void 0:$.styles),m),panelRef:F,destroyOnClose:null!=k?k:C}),b?n.createElement(yr,{active:!0,title:!1,paragraph:{rows:4},className:`${R}-body-skeleton`}):v))))};const to=t=>{const{componentCls:e,titleFontSize:n,titleLineHeight:i,modalConfirmIconSize:r,fontSize:o,lineHeight:s,modalTitleHeight:a,fontHeight:l,confirmBodyPadding:c}=t,u=`${e}-confirm`;return{[u]:{"&-rtl":{direction:"rtl"},[`${t.antCls}-modal-header`]:{display:"none"},[`${u}-body-wrapper`]:Object.assign({},(0,J.t6)()),[`&${e} ${e}-body`]:{padding:c},[`${u}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t.iconCls}`]:{flex:"none",fontSize:r,marginInlineEnd:t.confirmIconMarginInlineEnd,marginTop:t.calc(t.calc(l).sub(r).equal()).div(2).equal()},[`&-has-title > ${t.iconCls}`]:{marginTop:t.calc(t.calc(a).sub(r).equal()).div(2).equal()}},[`${u}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:t.marginXS,maxWidth:`calc(100% - ${(0,h.zA)(t.marginSM)})`},[`${t.iconCls} + ${u}-paragraph`]:{maxWidth:`calc(100% - ${(0,h.zA)(t.calc(t.modalConfirmIconSize).add(t.marginSM).equal())})`},[`${u}-title`]:{color:t.colorTextHeading,fontWeight:t.fontWeightStrong,fontSize:n,lineHeight:i},[`${u}-content`]:{color:t.colorText,fontSize:o,lineHeight:s},[`${u}-btns`]:{textAlign:"end",marginTop:t.confirmBtnsMarginTop,[`${t.antCls}-btn + ${t.antCls}-btn`]:{marginBottom:0,marginInlineStart:t.marginXS}}},[`${u}-error ${u}-body > ${t.iconCls}`]:{color:t.colorError},[`${u}-warning ${u}-body > ${t.iconCls},\n        ${u}-confirm ${u}-body > ${t.iconCls}`]:{color:t.colorWarning},[`${u}-info ${u}-body > ${t.iconCls}`]:{color:t.colorInfo},[`${u}-success ${u}-body > ${t.iconCls}`]:{color:t.colorSuccess}}};var eo=(0,Ui.bf)(["Modal","confirm"],(t=>{const e=Zr(t);return[to(e)]}),Yr,{order:-1e3});function no(t){const{prefixCls:e,icon:i,okText:r,cancelText:o,confirmPrefixCls:s,type:a,okCancel:c,footer:h,locale:u}=t,d=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=i;if(!i&&null!==i)switch(a){case"info":f=n.createElement(kt,null);break;case"success":f=n.createElement(gt,null);break;case"error":f=n.createElement(bt,null);break;default:f=n.createElement(Ot,null)}const p=null!=c?c:"confirm"===a,g=null!==t.autoFocusButton&&(t.autoFocusButton||"ok"),[m]=_t("Modal"),v=u||m,b=r||(p?null==v?void 0:v.okText:null==v?void 0:v.justOkText),y=o||(null==v?void 0:v.cancelText),w=Object.assign({autoFocusButton:g,cancelTextLocale:y,okTextLocale:b,mergedOkCancel:p},d),O=n.useMemo((()=>w),(0,l.A)(Object.values(w))),S=n.createElement(n.Fragment,null,n.createElement(Ft,null),n.createElement(qt,null)),x=void 0!==t.title&&null!==t.title,k=`${s}-body`;return n.createElement("div",{className:`${s}-body-wrapper`},n.createElement("div",{className:At()(k,{[`${k}-has-title`]:x})},f,n.createElement("div",{className:`${s}-paragraph`},x&&n.createElement("span",{className:`${s}-title`},t.title),n.createElement("div",{className:`${s}-content`},t.content))),void 0===h||"function"==typeof h?n.createElement(Wt,{value:O},n.createElement("div",{className:`${s}-btns`},"function"==typeof h?h(S,{OkBtn:qt,CancelBtn:Ft}):S)):h,n.createElement(eo,{prefixCls:e}))}const io=t=>{const{close:e,zIndex:i,maskStyle:r,direction:o,prefixCls:s,wrapClassName:a,rootPrefixCls:l,bodyStyle:c,closable:h=!1,onConfirm:u,styles:d}=t,f=`${s}-confirm`,p=t.width||416,g=t.style||{},m=void 0===t.mask||t.mask,v=void 0!==t.maskClosable&&t.maskClosable,b=At()(f,`${f}-${t.type}`,{[`${f}-rtl`]:"rtl"===o},t.className),[,y]=(0,Y.Ay)(),w=n.useMemo((()=>void 0!==i?i:y.zIndexPopupBase+1e3),[i,y]);return n.createElement(Jr,Object.assign({},t,{className:b,wrapClassName:At()({[`${f}-centered`]:!!t.centered},a),onCancel:()=>{null==e||e({triggerCancel:!0}),null==u||u(!1)},title:"",footer:null,transitionName:Lt(l||"","zoom",t.transitionName),maskTransitionName:Lt(l||"","fade",t.maskTransitionName),mask:m,maskClosable:v,style:g,styles:Object.assign({body:c,mask:r},d),width:p,zIndex:w,closable:h}),n.createElement(no,Object.assign({},t,{confirmPrefixCls:f})))};var ro=t=>{const{rootPrefixCls:e,iconPrefixCls:i,direction:r,theme:o}=t;return n.createElement(ct,{prefixCls:e,iconPrefixCls:i,direction:r,theme:o},n.createElement(io,Object.assign({},t)))},oo=[];let so="";function ao(){return so}const lo=t=>{var e,i;const{prefixCls:r,getContainer:o,direction:s}=t,a=D(),l=(0,n.useContext)(c.QO),h=ao()||l.getPrefixCls(),u=r||`${h}-modal`;let d=o;return!1===d&&(d=void 0),n.default.createElement(ro,Object.assign({},t,{rootPrefixCls:h,prefixCls:u,iconPrefixCls:l.iconPrefixCls,theme:l.theme,direction:null!=s?s:l.direction,locale:null!==(i=null===(e=l.locale)||void 0===e?void 0:e.Modal)&&void 0!==i?i:a,getContainer:d}))};function co(t){const e={getPrefixCls:(t,e)=>e||(t?`${ot()}-${t}`:ot()),getIconPrefixCls:st,getRootPrefixCls:()=>et||ot(),getTheme:()=>it,holderRender:rt},i=document.createDocumentFragment();let r,o,s=Object.assign(Object.assign({},t),{close:h,open:!0});function a(...e){var n,i;e.some((t=>null==t?void 0:t.triggerCancel))&&(null===(n=t.onCancel)||void 0===n||(i=n).call.apply(i,[t,()=>{}].concat((0,l.A)(e.slice(1)))));for(let t=0;t<oo.length;t++)if(oo[t]===h){oo.splice(t,1);break}o()}function c(t){clearTimeout(r),r=setTimeout((()=>{const r=e.getPrefixCls(void 0,ao()),s=e.getIconPrefixCls(),a=e.getTheme(),l=n.default.createElement(lo,Object.assign({},t)),c=(0,ht.L)();o=c(n.default.createElement(ct,{prefixCls:r,iconPrefixCls:s,theme:a},e.holderRender?e.holderRender(l):l),i)}))}function h(...e){s=Object.assign(Object.assign({},s),{open:!1,afterClose:()=>{"function"==typeof t.afterClose&&t.afterClose(),a.apply(this,e)}}),s.visible&&delete s.visible,c(s)}return c(s),oo.push(h),{destroy:h,update:function(t){s="function"==typeof t?t(s):Object.assign(Object.assign({},s),t),c(s)}}}function ho(t){return Object.assign(Object.assign({},t),{type:"warning"})}function uo(t){return Object.assign(Object.assign({},t),{type:"info"})}function fo(t){return Object.assign(Object.assign({},t),{type:"success"})}function po(t){return Object.assign(Object.assign({},t),{type:"error"})}function go(t){return Object.assign(Object.assign({},t),{type:"confirm"})}var mo=__webpack_require__(2533);function vo(t){return e=>n.createElement(ct,{theme:{token:{motion:!1,zIndexPopupBase:0}}},n.createElement(t,Object.assign({},e)))}var bo=(t,e,i,r,o)=>vo((s=>{const{prefixCls:a,style:l}=s,h=n.useRef(null),[u,d]=n.useState(0),[f,p]=n.useState(0),[g,m]=(0,mo.A)(!1,{value:s.open}),{getPrefixCls:v}=n.useContext(c.QO),b=v(r||"select",a);n.useEffect((()=>{if(m(!0),"undefined"!=typeof ResizeObserver){const t=new ResizeObserver((t=>{const e=t[0].target;d(e.offsetHeight+8),p(e.offsetWidth)})),e=setInterval((()=>{var n;const i=o?`.${o(b)}`:`.${b}-dropdown`,r=null===(n=h.current)||void 0===n?void 0:n.querySelector(i);r&&(clearInterval(e),t.observe(r))}),10);return()=>{clearInterval(e),t.disconnect()}}}),[]);let y=Object.assign(Object.assign({},s),{style:Object.assign(Object.assign({},l),{margin:0}),open:g,visible:g,getPopupContainer:()=>h.current});i&&(y=i(y)),e&&Object.assign(y,{[e]:{overflow:{adjustX:!1,adjustY:!1}}});const w={paddingBottom:u,position:"relative",minWidth:f};return n.createElement("div",{ref:h,style:w},n.createElement(t,Object.assign({},y)))})),yo=vo((t=>{const{prefixCls:e,className:i,closeIcon:r,closable:o,type:s,title:a,children:l,footer:h}=t,u=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:d}=n.useContext(c.QO),f=d(),p=e||d("modal"),g=Zi(f),[m,v,b]=Gr(p,g),y=`${p}-confirm`;let w={};return w=s?{closable:null!=o&&o,title:"",footer:"",children:n.createElement(no,Object.assign({},t,{prefixCls:p,confirmPrefixCls:y,rootPrefixCls:f,content:l}))}:{closable:null==o||o,title:a,footer:null!==h&&n.createElement(Ar,Object.assign({},t)),children:l},m(n.createElement(Ie,Object.assign({prefixCls:p,className:At()(v,`${p}-pure-panel`,s&&y,s&&`${y}-${s}`,i,b,g)},u,{closeIcon:Cr(p,r),closable:o},w)))}));const wo=(t,e)=>{var i,{afterClose:r,config:o}=t,s=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["afterClose","config"]);const[a,h]=n.useState(!0),[u,d]=n.useState(o),{direction:f,getPrefixCls:p}=n.useContext(c.QO),g=p("modal"),m=p(),v=(...t)=>{var e,n;h(!1),t.some((t=>null==t?void 0:t.triggerCancel))&&(null===(e=u.onCancel)||void 0===e||(n=e).call.apply(n,[u,()=>{}].concat((0,l.A)(t.slice(1)))))};n.useImperativeHandle(e,(()=>({destroy:v,update:t=>{d((e=>Object.assign(Object.assign({},e),t)))}})));const b=null!==(i=u.okCancel)&&void 0!==i?i:"confirm"===u.type,[y]=_t("Modal",E.Modal);return n.createElement(ro,Object.assign({prefixCls:g,rootPrefixCls:m},u,{close:v,open:a,afterClose:()=>{var t;r(),null===(t=u.afterClose)||void 0===t||t.call(u)},okText:u.okText||(b?null==y?void 0:y.okText:null==y?void 0:y.justOkText),direction:u.direction||f,cancelText:u.cancelText||(null==y?void 0:y.cancelText)},s))};var Oo=n.forwardRef(wo);let So=0;const xo=n.memo(n.forwardRef(((t,e)=>{const[i,r]=function(){const[t,e]=n.useState([]);return[t,n.useCallback((t=>(e((e=>[].concat((0,l.A)(e),[t]))),()=>{e((e=>e.filter((e=>e!==t))))})),[])]}();return n.useImperativeHandle(e,(()=>({patchElement:r})),[]),n.createElement(n.Fragment,null,i)})));function ko(t){return co(ho(t))}const Co=Jr;Co.useModal=function(){const t=n.useRef(null),[e,i]=n.useState([]);n.useEffect((()=>{e.length&&((0,l.A)(e).forEach((t=>{t()})),i([]))}),[e]);const r=n.useCallback((e=>function(r){var o;So+=1;const s=n.createRef();let a;const c=new Promise((t=>{a=t}));let h,u=!1;const d=n.createElement(Oo,{key:`modal-${So}`,config:e(r),ref:s,afterClose:()=>{null==h||h()},isSilent:()=>u,onConfirm:t=>{a(t)}});h=null===(o=t.current)||void 0===o?void 0:o.patchElement(d),h&&oo.push(h);const f={destroy:()=>{function t(){var t;null===(t=s.current)||void 0===t||t.destroy()}s.current?t():i((e=>[].concat((0,l.A)(e),[t])))},update:t=>{function e(){var e;null===(e=s.current)||void 0===e||e.update(t)}s.current?e():i((t=>[].concat((0,l.A)(t),[e])))},then:t=>(u=!0,c.then(t))};return f}),[]);return[n.useMemo((()=>({info:r(uo),success:r(fo),error:r(po),warning:r(ho),confirm:r(go)})),[]),n.createElement(xo,{key:"modal-holder",ref:t})]},Co.info=function(t){return co(uo(t))},Co.success=function(t){return co(fo(t))},Co.error=function(t){return co(po(t))},Co.warning=ko,Co.warn=ko,Co.confirm=function(t){return co(go(t))},Co.destroyAll=function(){for(;oo.length;){const t=oo.pop();t&&t()}},Co.config=function({rootPrefixCls:t}){so=t},Co._InternalPanelDoNotUseOrYouWillBeFired=yo;var Ao=Co,Mo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},Eo=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:Mo}))},Po=n.forwardRef(Eo);function To(){return To=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},To.apply(null,arguments)}function $o(t){return $o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$o(t)}function Do(t){var e=function(t){if("object"!=$o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=$o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$o(e)?e:e+""}function Ro(t,e,n){return(e=Do(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function No(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bo(Object(n),!0).forEach((function(e){Ro(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Lo=__webpack_require__(6588),jo=n.createContext(null),_o=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,i){return t[0]===e&&(n=i,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];t.call(e,r[1],r[0])}},e}()}(),Io="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,zo=void 0!==__webpack_require__.g&&__webpack_require__.g.Math===Math?__webpack_require__.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Qo="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(zo):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},Ho=["top","right","bottom","left","width","height","size","weight"],Vo="undefined"!=typeof MutationObserver,Wo=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t){var e=!1,n=!1,i=0;function r(){e&&(e=!1,t()),n&&s()}function o(){Qo(r)}function s(){var t=Date.now();if(e){if(t-i<2)return;n=!0}else e=!0,n=!1,setTimeout(o,20);i=t}return s}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){Io&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Vo?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){Io&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;Ho.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Fo=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},qo=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||zo},Xo=Uo(0,0,0,0);function Ko(t){return parseFloat(t)||0}function Zo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+Ko(t["border-"+n+"-width"])}),0)}var Yo="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof qo(t).SVGGraphicsElement}:function(t){return t instanceof qo(t).SVGElement&&"function"==typeof t.getBBox};function Go(t){return Io?Yo(t)?function(t){var e=t.getBBox();return Uo(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Xo;var i=qo(t).getComputedStyle(t),r=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],o=t["padding-"+r];e[r]=Ko(o)}return e}(i),o=r.left+r.right,s=r.top+r.bottom,a=Ko(i.width),l=Ko(i.height);if("border-box"===i.boxSizing&&(Math.round(a+o)!==e&&(a-=Zo(i,"left","right")+o),Math.round(l+s)!==n&&(l-=Zo(i,"top","bottom")+s)),!function(t){return t===qo(t).document.documentElement}(t)){var c=Math.round(a+o)-e,h=Math.round(l+s)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(h)&&(l-=h)}return Uo(r.left,r.top,a,l)}(t):Xo}function Uo(t,e,n,i){return{x:t,y:e,width:n,height:i}}var Jo=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Uo(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=Go(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),ts=function(t,e){var n=function(t){var e=t.x,n=t.y,i=t.width,r=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return Fo(s,{x:e,y:n,width:i,height:r,top:n,right:e+i,bottom:r+n,left:e}),s}(e);Fo(this,{target:t,contentRect:n})},es=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new _o,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof qo(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new Jo(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof qo(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new ts(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),ns="undefined"!=typeof WeakMap?new WeakMap:new _o,is=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Wo.getInstance(),i=new es(e,n,this);ns.set(this,i)};["observe","unobserve","disconnect"].forEach((function(t){is.prototype[t]=function(){var e;return(e=ns.get(this))[t].apply(e,arguments)}}));var rs=void 0!==zo.ResizeObserver?zo.ResizeObserver:is,os=new Map,ss=new rs((function(t){t.forEach((function(t){var e,n=t.target;null===(e=os.get(n))||void 0===e||e.forEach((function(t){return t(n)}))}))}));function as(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Do(i.key),i)}}function ls(t,e){return ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ls(t,e)}function cs(t){return cs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cs(t)}function hs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(hs=function(){return!!t})()}var us=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ls(t,e)}(r,t);var e,n,i=function(t){var e=hs();return function(){var n,i=cs(t);if(e){var r=cs(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"==$o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}(r);function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),i.apply(this,arguments)}return e=r,(n=[{key:"render",value:function(){return this.props.children}}])&&as(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),r}(n.Component);function ds(t,e){var i=t.children,r=t.disabled,o=n.useRef(null),s=n.useRef(null),a=n.useContext(jo),l="function"==typeof i,c=l?i(o):i,h=n.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!l&&n.isValidElement(c)&&(0,ie.f3)(c),d=u?(0,ie.A9)(c):null,f=(0,ie.xK)(d,o),p=function(){var t;return(0,Lo.Ay)(o.current)||(o.current&&"object"===$o(o.current)?(0,Lo.Ay)(null===(t=o.current)||void 0===t?void 0:t.nativeElement):null)||(0,Lo.Ay)(s.current)};n.useImperativeHandle(e,(function(){return p()}));var g=n.useRef(t);g.current=t;var m=n.useCallback((function(t){var e=g.current,n=e.onResize,i=e.data,r=t.getBoundingClientRect(),o=r.width,s=r.height,l=t.offsetWidth,c=t.offsetHeight,u=Math.floor(o),d=Math.floor(s);if(h.current.width!==u||h.current.height!==d||h.current.offsetWidth!==l||h.current.offsetHeight!==c){var f={width:u,height:d,offsetWidth:l,offsetHeight:c};h.current=f;var p=l===Math.round(o)?o:l,m=c===Math.round(s)?s:c,v=No(No({},f),{},{offsetWidth:p,offsetHeight:m});null==a||a(v,t,i),n&&Promise.resolve().then((function(){n(v,t)}))}}),[]);return n.useEffect((function(){var t,e,n=p();return n&&!r&&(t=n,e=m,os.has(t)||(os.set(t,new Set),ss.observe(t)),os.get(t).add(e)),function(){return function(t,e){os.has(t)&&(os.get(t).delete(e),os.get(t).size||(ss.unobserve(t),os.delete(t)))}(n,m)}}),[o.current,r]),n.createElement(us,{ref:s},u?n.cloneElement(c,{ref:f}):c)}var fs=n.forwardRef(ds);function ps(t,e){var i=t.children;return("function"==typeof i?[i]:(0,fn.A)(i)).map((function(i,r){var o=(null==i?void 0:i.key)||"".concat("rc-observer-key","-").concat(r);return n.createElement(fs,To({},t,{key:o,ref:0===r?e:void 0}),i)}))}var gs=n.forwardRef(ps);gs.Collection=function(t){var e=t.children,i=t.onBatchResize,r=n.useRef(0),o=n.useRef([]),s=n.useContext(jo),a=n.useCallback((function(t,e,n){r.current+=1;var a=r.current;o.current.push({size:t,element:e,data:n}),Promise.resolve().then((function(){a===r.current&&(null==i||i(o.current),o.current=[])})),null==s||s(t,e,n)}),[i,s]);return n.createElement(jo.Provider,{value:a},e)};var ms=gs,vs=function(t){if((0,z.A)()&&window.document.documentElement){var e=Array.isArray(t)?t:[t],n=window.document.documentElement;return e.some((function(t){return t in n.style}))}return!1};function bs(t,e){return Array.isArray(t)||void 0===e?vs(t):function(t,e){if(!vs(t))return!1;var n=document.createElement("div"),i=n.style[t];return n.style[t]=e,n.style[t]!==i}(t,e)}function ys(t){var e=t.children,i=t.prefixCls,r=t.id,o=t.overlayInnerStyle,s=t.bodyClassName,a=t.className,l=t.style;return n.createElement("div",{className:At()("".concat(i,"-content"),a),style:l},n.createElement("div",{className:At()("".concat(i,"-inner"),s),id:r,role:"tooltip",style:o},"function"==typeof e?e():e))}function ws(){return ws=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ws.apply(null,arguments)}function Os(t){return Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Os(t)}function Ss(t,e,n){return(e=function(t){var e=function(t){if("object"!=Os(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Os(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Os(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xs(Object(n),!0).forEach((function(e){Ss(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Cs(t){return Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(t)}function As(t,e,n){return(e=function(t){var e=function(t){if("object"!=Cs(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Cs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Cs(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ms(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Es(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ms(Object(n),!0).forEach((function(e){As(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ps(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Ts(t,e){if(t){if("string"==typeof t)return Ps(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ps(t,e):void 0}}function $s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||Ts(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ds=__webpack_require__(2633),Rs=function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==t?void 0:t.substr(0,4))};function Bs(){return Bs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bs.apply(null,arguments)}function Ns(t){var e=t.prefixCls,i=t.align,r=t.arrow,o=t.arrowPos,s=r||{},a=s.className,l=s.content,c=o.x,h=void 0===c?0:c,u=o.y,d=void 0===u?0:u,f=n.useRef();if(!i||!i.points)return null;var p={position:"absolute"};if(!1!==i.autoArrow){var g=i.points[0],m=i.points[1],v=g[0],b=g[1],y=m[0],w=m[1];v!==y&&["t","b"].includes(v)?"t"===v?p.top=0:p.bottom=0:p.top=d,b!==w&&["l","r"].includes(b)?"l"===b?p.left=0:p.right=0:p.left=h}return n.createElement("div",{ref:f,className:At()("".concat(e,"-arrow"),a),style:p},l)}function Ls(t){var e=t.prefixCls,i=t.open,r=t.zIndex,o=t.mask,s=t.motion;return o?n.createElement(Z.Ay,Bs({},s,{motionAppear:!0,visible:i,removeOnLeave:!0}),(function(t){var i=t.className;return n.createElement("div",{style:{zIndex:r},className:At()("".concat(e,"-mask"),i)})})):null}var js=n.memo((function(t){return t.children}),(function(t,e){return e.cache})),_s=n.forwardRef((function(t,e){var i=t.popup,r=t.className,o=t.prefixCls,s=t.style,a=t.target,l=t.onVisibleChanged,c=t.open,h=t.keepDom,u=t.fresh,d=t.onClick,f=t.mask,p=t.arrow,g=t.arrowPos,m=t.align,v=t.motion,b=t.maskMotion,y=t.forceRender,w=t.getPopupContainer,O=t.autoDestroy,S=t.portal,x=t.zIndex,k=t.onMouseEnter,C=t.onMouseLeave,A=t.onPointerEnter,M=t.onPointerDownCapture,E=t.ready,P=t.offsetX,T=t.offsetY,$=t.offsetR,D=t.offsetB,R=t.onAlign,B=t.onPrepare,N=t.stretch,L=t.targetWidth,j=t.targetHeight,_="function"==typeof i?i():i,I=c||h,z=(null==w?void 0:w.length)>0,Q=$s(n.useState(!w||!z),2),H=Q[0],V=Q[1];if((0,se.A)((function(){!H&&z&&a&&V(!0)}),[H,z,a]),!H)return null;var W="auto",F={left:"-1000vw",top:"-1000vh",right:W,bottom:W};if(E||!c){var q,X=m.points,K=m.dynamicInset||(null===(q=m._experimental)||void 0===q?void 0:q.dynamicInset),Y=K&&"r"===X[0][1],G=K&&"b"===X[0][0];Y?(F.right=$,F.left=W):(F.left=P,F.right=W),G?(F.bottom=D,F.top=W):(F.top=T,F.bottom=W)}var U={};return N&&(N.includes("height")&&j?U.height=j:N.includes("minHeight")&&j&&(U.minHeight=j),N.includes("width")&&L?U.width=L:N.includes("minWidth")&&L&&(U.minWidth=L)),c||(U.pointerEvents="none"),n.createElement(S,{open:y||I,getContainer:w&&function(){return w(a)},autoDestroy:O},n.createElement(Ls,{prefixCls:o,open:c,zIndex:x,mask:f,motion:b}),n.createElement(ms,{onResize:R,disabled:!c},(function(t){return n.createElement(Z.Ay,Bs({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:y,leavedClassName:"".concat(o,"-hidden")},v,{onAppearPrepare:B,onEnterPrepare:B,visible:c,onVisibleChanged:function(t){var e;null==v||null===(e=v.onVisibleChanged)||void 0===e||e.call(v,t),l(t)}}),(function(i,a){var l=i.className,h=i.style,f=At()(o,l,r);return n.createElement("div",{ref:(0,ie.K4)(t,e,a),className:f,style:Es(Es(Es(Es({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},F),U),h),{},{boxSizing:"border-box",zIndex:x},s),onMouseEnter:k,onMouseLeave:C,onPointerEnter:A,onClick:d,onPointerDownCapture:M},p&&n.createElement(Ns,{prefixCls:o,arrow:p,arrowPos:g,align:m}),n.createElement(js,{cache:!c&&!u},_))}))})))})),Is=_s,zs=n.forwardRef((function(t,e){var i=t.children,r=t.getTriggerDOMNode,o=(0,ie.f3)(i),s=n.useCallback((function(t){(0,ie.Xf)(e,r?r(t):t)}),[r]),a=(0,ie.xK)(s,(0,ie.A9)(i));return o?n.cloneElement(i,{ref:a}):i})),Qs=n.createContext(null);function Hs(t){return t?Array.isArray(t)?t:[t]:[]}var Vs=__webpack_require__(2467);function Ws(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function Fs(t,e,n,i){return e||(n?{motionName:"".concat(t,"-").concat(n)}:i?{motionName:i}:null)}function qs(t){return t.ownerDocument.defaultView}function Xs(t){for(var e=[],n=null==t?void 0:t.parentElement,i=["hidden","scroll","clip","auto"];n;){var r=qs(n).getComputedStyle(n);[r.overflowX,r.overflowY,r.overflow].some((function(t){return i.includes(t)}))&&e.push(n),n=n.parentElement}return e}function Ks(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(t)?e:t}function Zs(t){return Ks(parseFloat(t),0)}function Ys(t,e){var n=Es({},t);return(e||[]).forEach((function(t){if(!(t instanceof HTMLBodyElement||t instanceof HTMLHtmlElement)){var e=qs(t).getComputedStyle(t),i=e.overflow,r=e.overflowClipMargin,o=e.borderTopWidth,s=e.borderBottomWidth,a=e.borderLeftWidth,l=e.borderRightWidth,c=t.getBoundingClientRect(),h=t.offsetHeight,u=t.clientHeight,d=t.offsetWidth,f=t.clientWidth,p=Zs(o),g=Zs(s),m=Zs(a),v=Zs(l),b=Ks(Math.round(c.width/d*1e3)/1e3),y=Ks(Math.round(c.height/h*1e3)/1e3),w=(d-f-m-v)*b,O=(h-u-p-g)*y,S=p*y,x=g*y,k=m*b,C=v*b,A=0,M=0;if("clip"===i){var E=Zs(r);A=E*b,M=E*y}var P=c.x+k-A,T=c.y+S-M,$=P+c.width+2*A-k-C-w,D=T+c.height+2*M-S-x-O;n.left=Math.max(n.left,P),n.top=Math.max(n.top,T),n.right=Math.min(n.right,$),n.bottom=Math.min(n.bottom,D)}})),n}function Gs(t){var e="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=e.match(/^(.*)\%$/);return n?t*(parseFloat(n[1])/100):parseFloat(e)}function Us(t,e){var n=$s(e||[],2),i=n[0],r=n[1];return[Gs(t.width,i),Gs(t.height,r)]}function Js(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[t[0],t[1]]}function ta(t,e){var n,i=e[0],r=e[1];return n="t"===i?t.y:"b"===i?t.y+t.height:t.y+t.height/2,{x:"l"===r?t.x:"r"===r?t.x+t.width:t.x+t.width/2,y:n}}function ea(t,e){var n={t:"b",b:"t",l:"r",r:"l"};return t.map((function(t,i){return i===e?n[t]||"c":t})).join("")}function na(t){return function(t){if(Array.isArray(t))return Ps(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ts(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ia=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"],ra=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,e=n.forwardRef((function(e,i){var r=e.prefixCls,o=void 0===r?"rc-trigger-popup":r,s=e.children,a=e.action,l=void 0===a?"hover":a,c=e.showAction,h=e.hideAction,u=e.popupVisible,d=e.defaultPopupVisible,f=e.onPopupVisibleChange,p=e.afterPopupVisibleChange,g=e.mouseEnterDelay,m=e.mouseLeaveDelay,v=void 0===m?.1:m,b=e.focusDelay,y=e.blurDelay,w=e.mask,O=e.maskClosable,S=void 0===O||O,x=e.getPopupContainer,k=e.forceRender,C=e.autoDestroy,A=e.destroyPopupOnHide,M=e.popup,E=e.popupClassName,P=e.popupStyle,T=e.popupPlacement,$=e.builtinPlacements,D=void 0===$?{}:$,R=e.popupAlign,B=e.zIndex,N=e.stretch,L=e.getPopupClassNameFromAlign,j=e.fresh,_=e.alignPoint,I=e.onPopupClick,z=e.onPopupAlign,Q=e.arrow,H=e.popupMotion,V=e.maskMotion,W=e.popupTransitionName,F=e.popupAnimation,q=e.maskTransitionName,X=e.maskAnimation,K=e.className,Z=e.getTriggerDOMNode,Y=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(e,ia),G=C||A||!1,U=$s(n.useState(!1),2),J=U[0],tt=U[1];(0,se.A)((function(){tt(Rs())}),[]);var et=n.useRef({}),nt=n.useContext(Qs),it=n.useMemo((function(){return{registerSubPopup:function(t,e){et.current[t]=e,null==nt||nt.registerSubPopup(t,e)}}}),[nt]),rt=Me(),ot=$s(n.useState(null),2),st=ot[0],at=ot[1],lt=n.useRef(null),ct=(0,wr.A)((function(t){lt.current=t,(0,Lo.fk)(t)&&st!==t&&at(t),null==nt||nt.registerSubPopup(rt,t)})),ht=$s(n.useState(null),2),ut=ht[0],dt=ht[1],ft=n.useRef(null),pt=(0,wr.A)((function(t){(0,Lo.fk)(t)&&ut!==t&&(dt(t),ft.current=t)})),gt=n.Children.only(s),mt=(null==gt?void 0:gt.props)||{},vt={},bt=(0,wr.A)((function(t){var e,n,i=ut;return(null==i?void 0:i.contains(t))||(null===(e=(0,Ds.j)(i))||void 0===e?void 0:e.host)===t||t===i||(null==st?void 0:st.contains(t))||(null===(n=(0,Ds.j)(st))||void 0===n?void 0:n.host)===t||t===st||Object.values(et.current).some((function(e){return(null==e?void 0:e.contains(t))||t===e}))})),yt=Fs(o,H,F,W),wt=Fs(o,V,X,q),Ot=$s(n.useState(d||!1),2),St=Ot[0],xt=Ot[1],kt=null!=u?u:St,Ct=(0,wr.A)((function(t){void 0===u&&xt(t)}));(0,se.A)((function(){xt(u||!1)}),[u]);var Mt=n.useRef(kt);Mt.current=kt;var Et=n.useRef([]);Et.current=[];var Pt=(0,wr.A)((function(t){var e;Ct(t),(null!==(e=Et.current[Et.current.length-1])&&void 0!==e?e:kt)!==t&&(Et.current.push(t),null==f||f(t))})),Tt=n.useRef(),$t=function(){clearTimeout(Tt.current)},Dt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$t(),0===e?Pt(t):Tt.current=setTimeout((function(){Pt(t)}),1e3*e)};n.useEffect((function(){return $t}),[]);var Rt=$s(n.useState(!1),2),Bt=Rt[0],Nt=Rt[1];(0,se.A)((function(t){t&&!kt||Nt(!0)}),[kt]);var Lt=$s(n.useState(null),2),jt=Lt[0],_t=Lt[1],It=$s(n.useState(null),2),zt=It[0],Qt=It[1],Ht=function(t){Qt([t.clientX,t.clientY])},Vt=function(t,e,i,r,o,s,a){var l=$s(n.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[r]||{}}),2),c=l[0],h=l[1],u=n.useRef(0),d=n.useMemo((function(){return e?Xs(e):[]}),[e]),f=n.useRef({});t||(f.current={});var p=(0,wr.A)((function(){if(e&&i&&t){var n,l,c,u,p,g=e,m=g.ownerDocument,v=qs(g).getComputedStyle(g),b=v.width,y=v.height,w=v.position,O=g.style.left,S=g.style.top,x=g.style.right,k=g.style.bottom,C=g.style.overflow,A=Es(Es({},o[r]),s),M=m.createElement("div");if(null===(n=g.parentElement)||void 0===n||n.appendChild(M),M.style.left="".concat(g.offsetLeft,"px"),M.style.top="".concat(g.offsetTop,"px"),M.style.position=w,M.style.height="".concat(g.offsetHeight,"px"),M.style.width="".concat(g.offsetWidth,"px"),g.style.left="0",g.style.top="0",g.style.right="auto",g.style.bottom="auto",g.style.overflow="hidden",Array.isArray(i))p={x:i[0],y:i[1],width:0,height:0};else{var E,P,T=i.getBoundingClientRect();T.x=null!==(E=T.x)&&void 0!==E?E:T.left,T.y=null!==(P=T.y)&&void 0!==P?P:T.top,p={x:T.x,y:T.y,width:T.width,height:T.height}}var $=g.getBoundingClientRect();$.x=null!==(l=$.x)&&void 0!==l?l:$.left,$.y=null!==(c=$.y)&&void 0!==c?c:$.top;var D=m.documentElement,R=D.clientWidth,B=D.clientHeight,N=D.scrollWidth,L=D.scrollHeight,j=D.scrollTop,_=D.scrollLeft,I=$.height,z=$.width,Q=p.height,H=p.width,V={left:0,top:0,right:R,bottom:B},W={left:-_,top:-j,right:N-_,bottom:L-j},F=A.htmlRegion,q="visible",X="visibleFirst";"scroll"!==F&&F!==X&&(F=q);var K=F===X,Z=Ys(W,d),Y=Ys(V,d),G=F===q?Y:Z,U=K?Y:G;g.style.left="auto",g.style.top="auto",g.style.right="0",g.style.bottom="0";var J=g.getBoundingClientRect();g.style.left=O,g.style.top=S,g.style.right=x,g.style.bottom=k,g.style.overflow=C,null===(u=g.parentElement)||void 0===u||u.removeChild(M);var tt=Ks(Math.round(z/parseFloat(b)*1e3)/1e3),et=Ks(Math.round(I/parseFloat(y)*1e3)/1e3);if(0===tt||0===et||(0,Lo.fk)(i)&&!(0,Vs.A)(i))return;var nt=A.offset,it=A.targetOffset,rt=$s(Us($,nt),2),ot=rt[0],st=rt[1],at=$s(Us(p,it),2),lt=at[0],ct=at[1];p.x-=lt,p.y-=ct;var ht=$s(A.points||[],2),ut=ht[0],dt=Js(ht[1]),ft=Js(ut),pt=ta(p,dt),gt=ta($,ft),mt=Es({},A),vt=pt.x-gt.x+ot,bt=pt.y-gt.y+st;function ue(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G,i=$.x+t,r=$.y+e,o=i+z,s=r+I,a=Math.max(i,n.left),l=Math.max(r,n.top),c=Math.min(o,n.right),h=Math.min(s,n.bottom);return Math.max(0,(c-a)*(h-l))}var yt,wt,Ot,St,xt=ue(vt,bt),kt=ue(vt,bt,Y),Ct=ta(p,["t","l"]),At=ta($,["t","l"]),Mt=ta(p,["b","r"]),Et=ta($,["b","r"]),Pt=A.overflow||{},Tt=Pt.adjustX,$t=Pt.adjustY,Dt=Pt.shiftX,Rt=Pt.shiftY,Bt=function(t){return"boolean"==typeof t?t:t>=0};function de(){yt=$.y+bt,wt=yt+I,Ot=$.x+vt,St=Ot+z}de();var Nt=Bt($t),Lt=ft[0]===dt[0];if(Nt&&"t"===ft[0]&&(wt>U.bottom||f.current.bt)){var jt=bt;Lt?jt-=I-Q:jt=Ct.y-Et.y-st;var _t=ue(vt,jt),It=ue(vt,jt,Y);_t>xt||_t===xt&&(!K||It>=kt)?(f.current.bt=!0,bt=jt,st=-st,mt.points=[ea(ft,0),ea(dt,0)]):f.current.bt=!1}if(Nt&&"b"===ft[0]&&(yt<U.top||f.current.tb)){var zt=bt;Lt?zt+=I-Q:zt=Mt.y-At.y-st;var Qt=ue(vt,zt),Ht=ue(vt,zt,Y);Qt>xt||Qt===xt&&(!K||Ht>=kt)?(f.current.tb=!0,bt=zt,st=-st,mt.points=[ea(ft,0),ea(dt,0)]):f.current.tb=!1}var Vt=Bt(Tt),Wt=ft[1]===dt[1];if(Vt&&"l"===ft[1]&&(St>U.right||f.current.rl)){var Ft=vt;Wt?Ft-=z-H:Ft=Ct.x-Et.x-ot;var qt=ue(Ft,bt),Xt=ue(Ft,bt,Y);qt>xt||qt===xt&&(!K||Xt>=kt)?(f.current.rl=!0,vt=Ft,ot=-ot,mt.points=[ea(ft,1),ea(dt,1)]):f.current.rl=!1}if(Vt&&"r"===ft[1]&&(Ot<U.left||f.current.lr)){var Kt=vt;Wt?Kt+=z-H:Kt=Mt.x-At.x-ot;var Zt=ue(Kt,bt),Yt=ue(Kt,bt,Y);Zt>xt||Zt===xt&&(!K||Yt>=kt)?(f.current.lr=!0,vt=Kt,ot=-ot,mt.points=[ea(ft,1),ea(dt,1)]):f.current.lr=!1}de();var Gt=!0===Dt?0:Dt;"number"==typeof Gt&&(Ot<Y.left&&(vt-=Ot-Y.left-ot,p.x+H<Y.left+Gt&&(vt+=p.x-Y.left+H-Gt)),St>Y.right&&(vt-=St-Y.right-ot,p.x>Y.right-Gt&&(vt+=p.x-Y.right+Gt)));var Ut=!0===Rt?0:Rt;"number"==typeof Ut&&(yt<Y.top&&(bt-=yt-Y.top-st,p.y+Q<Y.top+Ut&&(bt+=p.y-Y.top+Q-Ut)),wt>Y.bottom&&(bt-=wt-Y.bottom-st,p.y>Y.bottom-Ut&&(bt+=p.y-Y.bottom+Ut)));var Jt=$.x+vt,te=Jt+z,ee=$.y+bt,ne=ee+I,ie=p.x,re=ie+H,oe=p.y,se=oe+Q,ae=(Math.max(Jt,ie)+Math.min(te,re))/2-Jt,le=(Math.max(ee,oe)+Math.min(ne,se))/2-ee;null==a||a(e,mt);var ce=J.right-$.x-(vt+$.width),he=J.bottom-$.y-(bt+$.height);1===tt&&(vt=Math.round(vt),ce=Math.round(ce)),1===et&&(bt=Math.round(bt),he=Math.round(he)),h({ready:!0,offsetX:vt/tt,offsetY:bt/et,offsetR:ce/tt,offsetB:he/et,arrowX:ae/tt,arrowY:le/et,scaleX:tt,scaleY:et,align:mt})}})),g=function(){h((function(t){return Es(Es({},t),{},{ready:!1})}))};return(0,se.A)(g,[r]),(0,se.A)((function(){t||g()}),[t]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,function(){u.current+=1;var t=u.current;Promise.resolve().then((function(){u.current===t&&p()}))}]}(kt,st,_&&null!==zt?zt:ut,T,D,R,z),Wt=$s(Vt,11),Ft=Wt[0],qt=Wt[1],Xt=Wt[2],Kt=Wt[3],Zt=Wt[4],Yt=Wt[5],Gt=Wt[6],Ut=Wt[7],Jt=Wt[8],te=Wt[9],ee=Wt[10],ne=function(t,e,i,r){return n.useMemo((function(){var n=Hs(null!=i?i:e),o=Hs(null!=r?r:e),s=new Set(n),a=new Set(o);return t&&(s.has("hover")&&(s.delete("hover"),s.add("click")),a.has("hover")&&(a.delete("hover"),a.add("click"))),[s,a]}),[t,e,i,r])}(J,l,c,h),ie=$s(ne,2),re=ie[0],oe=ie[1],ae=re.has("click"),le=oe.has("click")||oe.has("contextMenu"),ce=(0,wr.A)((function(){Bt||ee()}));!function(t,e,n,i){(0,se.A)((function(){if(t&&e&&n){var r=n,o=Xs(e),s=Xs(r),a=qs(r),l=new Set([a].concat(na(o),na(s)));function c(){i(),Mt.current&&_&&le&&Dt(!1)}return l.forEach((function(t){t.addEventListener("scroll",c,{passive:!0})})),a.addEventListener("resize",c,{passive:!0}),i(),function(){l.forEach((function(t){t.removeEventListener("scroll",c),a.removeEventListener("resize",c)}))}}}),[t,e,n])}(kt,ut,st,ce),(0,se.A)((function(){ce()}),[zt,T]),(0,se.A)((function(){!kt||null!=D&&D[T]||ce()}),[JSON.stringify(R)]);var he=n.useMemo((function(){var t=function(t,e,n,i){for(var r=n.points,o=Object.keys(t),s=0;s<o.length;s+=1){var a,l=o[s];if(Ws(null===(a=t[l])||void 0===a?void 0:a.points,r,i))return"".concat(e,"-placement-").concat(l)}return""}(D,o,te,_);return At()(t,null==L?void 0:L(te))}),[te,L,D,o,_]);n.useImperativeHandle(i,(function(){return{nativeElement:ft.current,popupElement:lt.current,forceAlign:ce}}));var ue=$s(n.useState(0),2),de=ue[0],fe=ue[1],pe=$s(n.useState(0),2),ge=pe[0],me=pe[1],ve=function(){if(N&&ut){var t=ut.getBoundingClientRect();fe(t.width),me(t.height)}};function be(t,e,n,i){vt[t]=function(r){var o;null==i||i(r),Dt(e,n);for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];null===(o=mt[t])||void 0===o||o.call.apply(o,[mt,r].concat(a))}}(0,se.A)((function(){jt&&(ee(),jt(),_t(null))}),[jt]),(ae||le)&&(vt.onClick=function(t){var e;Mt.current&&le?Dt(!1):!Mt.current&&ae&&(Ht(t),Dt(!0));for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];null===(e=mt.onClick)||void 0===e||e.call.apply(e,[mt,t].concat(i))});var ye,we,Oe=function(t,e,i,r,o,s,a,l){var c=n.useRef(t);c.current=t;var h=n.useRef(!1);return n.useEffect((function(){if(e&&r&&(!o||s)){var t=function(){h.current=!1},n=function(t){var e;!c.current||a((null===(e=t.composedPath)||void 0===e||null===(e=e.call(t))||void 0===e?void 0:e[0])||t.target)||h.current||l(!1)},u=qs(r);u.addEventListener("pointerdown",t,!0),u.addEventListener("mousedown",n,!0),u.addEventListener("contextmenu",n,!0);var d=(0,Ds.j)(i);return d&&(d.addEventListener("mousedown",n,!0),d.addEventListener("contextmenu",n,!0)),function(){u.removeEventListener("pointerdown",t,!0),u.removeEventListener("mousedown",n,!0),u.removeEventListener("contextmenu",n,!0),d&&(d.removeEventListener("mousedown",n,!0),d.removeEventListener("contextmenu",n,!0))}}}),[e,i,r,o,s]),function(){h.current=!0}}(kt,le,ut,st,w,S,bt,Dt),Se=re.has("hover"),xe=oe.has("hover");Se&&(be("onMouseEnter",!0,g,(function(t){Ht(t)})),be("onPointerEnter",!0,g,(function(t){Ht(t)})),ye=function(t){(kt||Bt)&&null!=st&&st.contains(t.target)&&Dt(!0,g)},_&&(vt.onMouseMove=function(t){var e;null===(e=mt.onMouseMove)||void 0===e||e.call(mt,t)})),xe&&(be("onMouseLeave",!1,v),be("onPointerLeave",!1,v),we=function(){Dt(!1,v)}),re.has("focus")&&be("onFocus",!0,b),oe.has("focus")&&be("onBlur",!1,y),re.has("contextMenu")&&(vt.onContextMenu=function(t){var e;Mt.current&&oe.has("contextMenu")?Dt(!1):(Ht(t),Dt(!0)),t.preventDefault();for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];null===(e=mt.onContextMenu)||void 0===e||e.call.apply(e,[mt,t].concat(i))}),K&&(vt.className=At()(mt.className,K));var ke=Es(Es({},mt),vt),Ce={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(t){Y[t]&&(Ce[t]=function(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];null===(e=ke[t])||void 0===e||e.call.apply(e,[ke].concat(i)),Y[t].apply(Y,i)})}));var Ae=n.cloneElement(gt,Es(Es({},ke),Ce)),Ee={x:Yt,y:Gt},Pe=Q?Es({},!0!==Q?Q:{}):null;return n.createElement(n.Fragment,null,n.createElement(ms,{disabled:!kt,ref:pt,onResize:function(){ve(),ce()}},n.createElement(zs,{getTriggerDOMNode:Z},Ae)),n.createElement(Qs.Provider,{value:it},n.createElement(Is,{portal:t,ref:ct,prefixCls:o,popup:M,className:At()(E,he),style:P,target:ut,onMouseEnter:ye,onMouseLeave:we,onPointerEnter:ye,zIndex:B,open:kt,keepDom:Bt,fresh:j,onClick:I,onPointerDownCapture:Oe,mask:w,motion:yt,maskMotion:wt,onVisibleChanged:function(t){Nt(!1),ee(),null==p||p(t)},onPrepare:function(){return new Promise((function(t){ve(),_t((function(){return t}))}))},forceRender:k,autoDestroy:G,getPopupContainer:x,align:te,arrow:Pe,arrowPos:Ee,ready:Ft,offsetX:qt,offsetY:Xt,offsetR:Kt,offsetB:Zt,onAlign:ce,stretch:N,targetWidth:de/Ut,targetHeight:ge/Jt})))}));return e}(me),oa={shiftX:64,adjustY:1},sa={adjustX:1,shiftY:!0},aa=[0,0],la={left:{points:["cr","cl"],overflow:sa,offset:[-4,0],targetOffset:aa},right:{points:["cl","cr"],overflow:sa,offset:[4,0],targetOffset:aa},top:{points:["bc","tc"],overflow:oa,offset:[0,-4],targetOffset:aa},bottom:{points:["tc","bc"],overflow:oa,offset:[0,4],targetOffset:aa},topLeft:{points:["bl","tl"],overflow:oa,offset:[0,-4],targetOffset:aa},leftTop:{points:["tr","tl"],overflow:sa,offset:[-4,0],targetOffset:aa},topRight:{points:["br","tr"],overflow:oa,offset:[0,-4],targetOffset:aa},rightTop:{points:["tl","tr"],overflow:sa,offset:[4,0],targetOffset:aa},bottomRight:{points:["tr","br"],overflow:oa,offset:[0,4],targetOffset:aa},rightBottom:{points:["bl","br"],overflow:sa,offset:[4,0],targetOffset:aa},bottomLeft:{points:["tl","bl"],overflow:oa,offset:[0,4],targetOffset:aa},leftBottom:{points:["br","bl"],overflow:sa,offset:[-4,0],targetOffset:aa}},ca=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],ha=function(t,e){var i=t.overlayClassName,r=t.trigger,o=void 0===r?["hover"]:r,s=t.mouseEnterDelay,a=void 0===s?0:s,l=t.mouseLeaveDelay,c=void 0===l?.1:l,h=t.overlayStyle,u=t.prefixCls,d=void 0===u?"rc-tooltip":u,f=t.children,p=t.onVisibleChange,g=t.afterVisibleChange,m=t.transitionName,v=t.animation,b=t.motion,y=t.placement,w=void 0===y?"right":y,O=t.align,S=void 0===O?{}:O,x=t.destroyTooltipOnHide,k=void 0!==x&&x,C=t.defaultVisible,A=t.getTooltipContainer,M=t.overlayInnerStyle,E=(t.arrowContent,t.overlay),P=t.id,T=t.showArrow,$=void 0===T||T,D=t.classNames,R=t.styles,B=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,ca),N=Me(P),L=(0,n.useRef)(null);(0,n.useImperativeHandle)(e,(function(){return L.current}));var j,_,I=ks({},B);return"visible"in t&&(I.popupVisible=t.visible),n.createElement(ra,ws({popupClassName:At()(i,null==D?void 0:D.root),prefixCls:d,popup:function(){return n.createElement(ys,{key:"content",prefixCls:d,id:N,bodyClassName:null==D?void 0:D.body,overlayInnerStyle:ks(ks({},M),null==R?void 0:R.body)},E)},action:o,builtinPlacements:la,popupPlacement:w,ref:L,popupAlign:S,getPopupContainer:A,onPopupVisibleChange:p,afterPopupVisibleChange:g,popupTransitionName:m,popupAnimation:v,popupMotion:b,defaultPopupVisible:C,autoDestroy:k,mouseLeaveDelay:c,popupStyle:ks(ks({},h),null==R?void 0:R.root),mouseEnterDelay:a,arrow:$},I),(_=ks(ks({},(null==(j=n.Children.only(f))?void 0:j.props)||{}),{},{"aria-describedby":E?N:null}),n.cloneElement(f,_)))},ua=(0,n.forwardRef)(ha);function da(t){const{sizePopupArrow:e,borderRadiusXS:n,borderRadiusOuter:i}=t,r=e/2,o=r,s=1*i/Math.sqrt(2),a=r-i*(1-1/Math.sqrt(2)),l=r-n*(1/Math.sqrt(2)),c=i*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),h=2*r-l,u=c,d=2*r-s,f=a,p=2*r-0,g=o,m=r*Math.sqrt(2)+i*(Math.sqrt(2)-2),v=i*(Math.sqrt(2)-1);return{arrowShadowWidth:m,arrowPath:`path('M 0 ${o} A ${i} ${i} 0 0 0 ${s} ${a} L ${l} ${c} A ${n} ${n} 0 0 1 ${h} ${u} L ${d} ${f} A ${i} ${i} 0 0 0 ${p} ${g} Z')`,arrowPolygon:`polygon(${v}px 100%, 50% ${v}px, ${2*r-v}px 100%, ${v}px 100%)`}}const fa=(t,e,n)=>{const{sizePopupArrow:i,arrowPolygon:r,arrowPath:o,arrowShadowWidth:s,borderRadiusXS:a,calc:l}=t;return{pointerEvents:"none",width:i,height:i,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:i,height:l(i).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[r,o]},content:'""'},"&::after":{content:'""',position:"absolute",width:s,height:s,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,h.zA)(a)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}};function pa(t){const{contentRadius:e,limitVerticalRadius:n}=t,i=e>12?e+2:12;return{arrowOffsetHorizontal:i,arrowOffsetVertical:n?8:i}}function ga(t,e){return t?e:{}}function ma(t,e,n){const{componentCls:i,boxShadowPopoverArrow:r,arrowOffsetVertical:o,arrowOffsetHorizontal:s}=t,{arrowDistance:a=0,arrowPlacement:l={left:!0,right:!0,top:!0,bottom:!0}}=n||{};return{[i]:Object.assign(Object.assign(Object.assign(Object.assign({[`${i}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},fa(t,e,r)),{"&:before":{background:e}})]},ga(!!l.top,{[[`&-placement-top > ${i}-arrow`,`&-placement-topLeft > ${i}-arrow`,`&-placement-topRight > ${i}-arrow`].join(",")]:{bottom:a,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":s,[`> ${i}-arrow`]:{left:{_skip_check_:!0,value:s}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${(0,h.zA)(s)})`,[`> ${i}-arrow`]:{right:{_skip_check_:!0,value:s}}}})),ga(!!l.bottom,{[[`&-placement-bottom > ${i}-arrow`,`&-placement-bottomLeft > ${i}-arrow`,`&-placement-bottomRight > ${i}-arrow`].join(",")]:{top:a,transform:"translateY(-100%)"},[`&-placement-bottom > ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":s,[`> ${i}-arrow`]:{left:{_skip_check_:!0,value:s}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${(0,h.zA)(s)})`,[`> ${i}-arrow`]:{right:{_skip_check_:!0,value:s}}}})),ga(!!l.left,{[[`&-placement-left > ${i}-arrow`,`&-placement-leftTop > ${i}-arrow`,`&-placement-leftBottom > ${i}-arrow`].join(",")]:{right:{_skip_check_:!0,value:a},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${i}-arrow`]:{top:o},[`&-placement-leftBottom > ${i}-arrow`]:{bottom:o}})),ga(!!l.right,{[[`&-placement-right > ${i}-arrow`,`&-placement-rightTop > ${i}-arrow`,`&-placement-rightBottom > ${i}-arrow`].join(",")]:{left:{_skip_check_:!0,value:a},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${i}-arrow`]:{top:o},[`&-placement-rightBottom > ${i}-arrow`]:{bottom:o}}))}}const va={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},ba={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},ya=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function wa(t){const{arrowWidth:e,autoAdjustOverflow:n,arrowPointAtCenter:i,offset:r,borderRadius:o,visibleFirst:s}=t,a=e/2,l={};return Object.keys(va).forEach((t=>{const c=i&&ba[t]||va[t],h=Object.assign(Object.assign({},c),{offset:[0,0],dynamicInset:!0});switch(l[t]=h,ya.has(t)&&(h.autoArrow=!1),t){case"top":case"topLeft":case"topRight":h.offset[1]=-a-r;break;case"bottom":case"bottomLeft":case"bottomRight":h.offset[1]=a+r;break;case"left":case"leftTop":case"leftBottom":h.offset[0]=-a-r;break;case"right":case"rightTop":case"rightBottom":h.offset[0]=a+r}const u=pa({contentRadius:o,limitVerticalRadius:!0});if(i)switch(t){case"topLeft":case"bottomLeft":h.offset[0]=-u.arrowOffsetHorizontal-a;break;case"topRight":case"bottomRight":h.offset[0]=u.arrowOffsetHorizontal+a;break;case"leftTop":case"rightTop":h.offset[1]=2*-u.arrowOffsetHorizontal+a;break;case"leftBottom":case"rightBottom":h.offset[1]=2*u.arrowOffsetHorizontal-a}h.overflow=function(t,e,n,i){if(!1===i)return{adjustX:!1,adjustY:!1};const r=i&&"object"==typeof i?i:{},o={};switch(t){case"top":case"bottom":o.shiftX=2*e.arrowOffsetHorizontal+n,o.shiftY=!0,o.adjustY=!0;break;case"left":case"right":o.shiftY=2*e.arrowOffsetVertical+n,o.shiftX=!0,o.adjustX=!0}const s=Object.assign(Object.assign({},o),r);return s.shiftX||(s.adjustX=!0),s.shiftY||(s.adjustY=!0),s}(t,u,e,n),s&&(h.htmlRegion="visibleFirst")})),l}var Oa=__webpack_require__(682),Sa=__webpack_require__(3950);function xa(t,e){return Sa.s.reduce(((n,i)=>{const r=t[`${i}1`],o=t[`${i}3`],s=t[`${i}6`],a=t[`${i}7`];return Object.assign(Object.assign({},n),e(i,{lightColor:r,lightBorderColor:o,darkColor:s,textColor:a}))}),{})}const ka=t=>{const{calc:e,componentCls:n,tooltipMaxWidth:i,tooltipColor:r,tooltipBg:o,tooltipBorderRadius:s,zIndexPopup:a,controlHeight:l,boxShadowSecondary:c,paddingSM:u,paddingXS:d,arrowOffsetHorizontal:f,sizePopupArrow:p}=t,g=e(s).add(p).add(f).equal(),m=e(s).mul(2).add(p).equal();return[{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,J.dF)(t)),{position:"absolute",zIndex:a,display:"block",width:"max-content",maxWidth:i,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":o,[`${n}-inner`]:{minWidth:m,minHeight:l,padding:`${(0,h.zA)(t.calc(u).div(2).equal())} ${(0,h.zA)(d)}`,color:r,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:o,borderRadius:s,boxShadow:c,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:g},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${n}-inner`]:{borderRadius:t.min(s,8)}},[`${n}-content`]:{position:"relative"}}),xa(t,((t,{darkColor:e})=>({[`&${n}-${t}`]:{[`${n}-inner`]:{backgroundColor:e},[`${n}-arrow`]:{"--antd-arrow-background-color":e}}})))),{"&-rtl":{direction:"rtl"}})},ma(t,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},Ca=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+70},pa({contentRadius:t.borderRadius,limitVerticalRadius:!0})),da((0,Ji.oX)(t,{borderRadiusOuter:Math.min(t.borderRadiusOuter,4)})));var Aa=(t,e=!0)=>(0,Ui.OF)("Tooltip",(t=>{const{borderRadius:e,colorTextLightSolid:n,colorBgSpotlight:i}=t,r=(0,Ji.oX)(t,{tooltipMaxWidth:250,tooltipColor:n,tooltipBorderRadius:e,tooltipBg:i});return[ka(r),Vr(t,"zoom-big-fast")]}),Ca,{resetStyle:!1,injectStyle:e})(t);const Ma=Sa.s.map((t=>`${t}-inverse`));function Ea(t,e){const n=function(t,e=!0){return e?[].concat((0,l.A)(Ma),(0,l.A)(Sa.s)).includes(t):Sa.s.includes(t)}(e),i=At()({[`${t}-${e}`]:e&&n}),r={},o={};return e&&!n&&(r.background=e,o["--antd-arrow-background-color"]=e),{className:i,overlayStyle:r,arrowStyle:o}}const Pa=n.forwardRef(((t,e)=>{var i,r;const{prefixCls:o,openClassName:s,getTooltipContainer:a,color:l,overlayInnerStyle:h,children:u,afterOpenChange:d,afterVisibleChange:f,destroyTooltipOnHide:p,destroyOnHidden:g,arrow:m=!0,title:b,overlay:y,builtinPlacements:w,arrowPointAtCenter:O=!1,autoAdjustOverflow:S=!0,motion:x,getPopupContainer:k,placement:C="top",mouseEnterDelay:A=.1,mouseLeaveDelay:M=.1,overlayStyle:E,rootClassName:P,overlayClassName:T,styles:$,classNames:D}=t,R=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","openClassName","getTooltipContainer","color","overlayInnerStyle","children","afterOpenChange","afterVisibleChange","destroyTooltipOnHide","destroyOnHidden","arrow","title","overlay","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","motion","getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),B=!!m,[,N]=(0,Y.Ay)(),{getPopupContainer:L,getPrefixCls:j,direction:_,className:I,style:z,classNames:Q,styles:H}=(0,c.TP)("tooltip"),V=v(),W=n.useRef(null),F=()=>{var t;null===(t=W.current)||void 0===t||t.forceAlign()};n.useImperativeHandle(e,(()=>{var t,e;return{forceAlign:F,forcePopupAlign:()=>{V.deprecated(!1,"forcePopupAlign","forceAlign"),F()},nativeElement:null===(t=W.current)||void 0===t?void 0:t.nativeElement,popupElement:null===(e=W.current)||void 0===e?void 0:e.popupElement}}));const[q,X]=(0,mo.A)(!1,{value:null!==(i=t.open)&&void 0!==i?i:t.visible,defaultValue:null!==(r=t.defaultOpen)&&void 0!==r?r:t.defaultVisible}),K=!b&&!y&&0!==b,Z=n.useMemo((()=>{var t,e;let n=O;return"object"==typeof m&&(n=null!==(e=null!==(t=m.pointAtCenter)&&void 0!==t?t:m.arrowPointAtCenter)&&void 0!==e?e:O),w||wa({arrowPointAtCenter:n,autoAdjustOverflow:S,arrowWidth:B?N.sizePopupArrow:0,borderRadius:N.borderRadius,offset:N.marginXXS,visibleFirst:!0})}),[O,m,w,N]),G=n.useMemo((()=>0===b?b:y||b||""),[y,b]),U=n.createElement(Wi,{space:!0},"function"==typeof G?G():G),J=j("tooltip",o),tt=j(),et=t["data-popover-inject"];let nt=q;"open"in t||"visible"in t||!K||(nt=!1);const it=n.isValidElement(u)&&!(0,Oa.zv)(u)?u:n.createElement("span",null,u),rt=it.props,ot=rt.className&&"string"!=typeof rt.className?rt.className:At()(rt.className,s||`${J}-open`),[st,at,lt]=Aa(J,!et),ct=Ea(J,l),ht=ct.arrowStyle,ut=At()(T,{[`${J}-rtl`]:"rtl"===_},ct.className,P,at,lt,I,Q.root,null==D?void 0:D.root),dt=At()(Q.body,null==D?void 0:D.body),[ft,pt]=$t("Tooltip",R.zIndex),gt=n.createElement(ua,Object.assign({},R,{zIndex:ft,showArrow:B,placement:C,mouseEnterDelay:A,mouseLeaveDelay:M,prefixCls:J,classNames:{root:ut,body:dt},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ht),H.root),z),E),null==$?void 0:$.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},H.body),h),null==$?void 0:$.body),ct.overlayStyle)},getTooltipContainer:k||a||L,ref:W,builtinPlacements:Z,overlay:U,visible:nt,onVisibleChange:e=>{var n,i;X(!K&&e),K||(null===(n=t.onOpenChange)||void 0===n||n.call(t,e),null===(i=t.onVisibleChange)||void 0===i||i.call(t,e))},afterVisibleChange:null!=d?d:f,arrowContent:n.createElement("span",{className:`${J}-arrow-content`}),motion:{motionName:Lt(tt,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:null!=g?g:!!p}),nt?(0,Oa.Ob)(it,{className:ot}):it);return st(n.createElement(Mt.Provider,{value:pt},gt))})),Ta=Pa;Ta._InternalPanelDoNotUseOrYouWillBeFired=t=>{const{prefixCls:e,className:i,placement:r="top",title:o,color:s,overlayInnerStyle:a}=t,{getPrefixCls:l}=n.useContext(c.QO),h=l("tooltip",e),[u,d,f]=Aa(h),p=Ea(h,s),g=p.arrowStyle,m=Object.assign(Object.assign({},a),p.overlayStyle),v=At()(d,f,h,`${h}-pure`,`${h}-placement-${r}`,i,p.className);return u(n.createElement("div",{className:v,style:g},n.createElement("div",{className:`${h}-arrow`}),n.createElement(ys,Object.assign({},t,{className:d,prefixCls:h,overlayInnerStyle:m}),o)))};var $a=Ta,Da={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},Ra=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:Da}))},Ba=n.forwardRef(Ra);function Na(){return Na=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Na.apply(null,arguments)}function La(t){return La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},La(t)}function ja(t,e,n){return(e=function(t){var e=function(t){if("object"!=La(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=La(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==La(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ia(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_a(Object(n),!0).forEach((function(e){ja(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function za(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Qa(t,e){if(t){if("string"==typeof t)return za(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?za(t,e):void 0}}function Ha(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||Qa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Wa(t){return Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wa(t)}function Fa(t,e,n){return(e=function(t){var e=function(t){if("object"!=Wa(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Wa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wa(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Xa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qa(Object(n),!0).forEach((function(e){Fa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ka.apply(null,arguments)}function Za(t,e,n){var i=e.cloneNode(!0),r=Object.create(t,{target:{value:i},currentTarget:{value:i}});return i.value=n,"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd&&(i.selectionStart=e.selectionStart,i.selectionEnd=e.selectionEnd),i.setSelectionRange=function(){e.setSelectionRange.apply(e,arguments)},r}function Ya(t,e,n,i){if(n){var r=e;"click"!==e.type?"file"===t.type||void 0===i?n(r):n(r=Za(e,t,i)):n(r=Za(e,t,""))}}function Ga(t,e){if(t){t.focus(e);var n=(e||{}).cursor;if(n){var i=t.value.length;switch(n){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(i,i);break;default:t.setSelectionRange(0,i)}}}}var Ua=n.default.forwardRef((function(t,e){var i,r,o,s=t.inputElement,a=t.children,l=t.prefixCls,c=t.prefix,h=t.suffix,u=t.addonBefore,d=t.addonAfter,f=t.className,p=t.style,g=t.disabled,m=t.readOnly,v=t.focused,b=t.triggerFocus,y=t.allowClear,w=t.value,O=t.handleReset,S=t.hidden,x=t.classes,k=t.classNames,C=t.dataAttrs,A=t.styles,M=t.components,E=t.onClear,P=null!=a?a:s,T=(null==M?void 0:M.affixWrapper)||"span",$=(null==M?void 0:M.groupWrapper)||"span",D=(null==M?void 0:M.wrapper)||"span",R=(null==M?void 0:M.groupAddon)||"span",B=(0,n.useRef)(null),N=function(t){return!!(t.prefix||t.suffix||t.allowClear)}(t),L=(0,n.cloneElement)(P,{value:w,className:At()(null===(i=P.props)||void 0===i?void 0:i.className,!N&&(null==k?void 0:k.variant))||null}),j=(0,n.useRef)(null);if(n.default.useImperativeHandle(e,(function(){return{nativeElement:j.current||B.current}})),N){var _=null;if(y){var I=!g&&!m&&w,z="".concat(l,"-clear-icon"),Q="object"===Wa(y)&&null!=y&&y.clearIcon?y.clearIcon:"✖";_=n.default.createElement("button",{type:"button",tabIndex:-1,onClick:function(t){null==O||O(t),null==E||E()},onMouseDown:function(t){return t.preventDefault()},className:At()(z,Fa(Fa({},"".concat(z,"-hidden"),!I),"".concat(z,"-has-suffix"),!!h))},Q)}var H="".concat(l,"-affix-wrapper"),V=At()(H,Fa(Fa(Fa(Fa(Fa({},"".concat(l,"-disabled"),g),"".concat(H,"-disabled"),g),"".concat(H,"-focused"),v),"".concat(H,"-readonly"),m),"".concat(H,"-input-with-clear-btn"),h&&y&&w),null==x?void 0:x.affixWrapper,null==k?void 0:k.affixWrapper,null==k?void 0:k.variant),W=(h||y)&&n.default.createElement("span",{className:At()("".concat(l,"-suffix"),null==k?void 0:k.suffix),style:null==A?void 0:A.suffix},_,h);L=n.default.createElement(T,Ka({className:V,style:null==A?void 0:A.affixWrapper,onClick:function(t){var e;null!==(e=B.current)&&void 0!==e&&e.contains(t.target)&&(null==b||b())}},null==C?void 0:C.affixWrapper,{ref:B}),c&&n.default.createElement("span",{className:At()("".concat(l,"-prefix"),null==k?void 0:k.prefix),style:null==A?void 0:A.prefix},c),L,W)}if(function(t){return!(!t.addonBefore&&!t.addonAfter)}(t)){var F="".concat(l,"-group"),q="".concat(F,"-addon"),X="".concat(F,"-wrapper"),K=At()("".concat(l,"-wrapper"),F,null==x?void 0:x.wrapper,null==k?void 0:k.wrapper),Z=At()(X,Fa({},"".concat(X,"-disabled"),g),null==x?void 0:x.group,null==k?void 0:k.groupWrapper);L=n.default.createElement($,{className:Z,ref:j},n.default.createElement(D,{className:K},u&&n.default.createElement(R,{className:q},u),L,d&&n.default.createElement(R,{className:q},d)))}return n.default.cloneElement(L,{className:At()(null===(r=L.props)||void 0===r?void 0:r.className,f)||null,style:Xa(Xa({},null===(o=L.props)||void 0===o?void 0:o.style),p),hidden:S})})),Ja=Ua;function tl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function el(t,e){if(t){if("string"==typeof t)return tl(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tl(t,e):void 0}}function nl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||el(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function il(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var rl=["show"];function ol(t,e){return n.useMemo((function(){var n={};e&&(n.show="object"===Wa(e)&&e.formatter?e.formatter:!!e);var i=n=Xa(Xa({},n),t),r=i.show,o=il(i,rl);return Xa(Xa({},o),{},{show:!!r,showFormatter:"function"==typeof r?r:void 0,strategy:o.strategy||function(t){return t.length}})}),[t,e])}var sl,al=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],ll=(0,n.forwardRef)((function(t,e){var i=t.autoComplete,r=t.onChange,o=t.onFocus,s=t.onBlur,a=t.onPressEnter,l=t.onKeyDown,c=t.onKeyUp,h=t.prefixCls,u=void 0===h?"rc-input":h,d=t.disabled,f=t.htmlSize,p=t.className,g=t.maxLength,m=t.suffix,v=t.showCount,b=t.count,y=t.type,w=void 0===y?"text":y,O=t.classes,S=t.classNames,x=t.styles,k=t.onCompositionStart,C=t.onCompositionEnd,A=il(t,al),M=nl((0,n.useState)(!1),2),E=M[0],P=M[1],T=(0,n.useRef)(!1),$=(0,n.useRef)(!1),D=(0,n.useRef)(null),R=(0,n.useRef)(null),B=function(t){D.current&&Ga(D.current,t)},N=nl((0,mo.A)(t.defaultValue,{value:t.value}),2),L=N[0],j=N[1],_=null==L?"":String(L),I=nl((0,n.useState)(null),2),z=I[0],Q=I[1],H=ol(b,v),V=H.max||g,W=H.strategy(_),F=!!V&&W>V;(0,n.useImperativeHandle)(e,(function(){var t;return{focus:B,blur:function(){var t;null===(t=D.current)||void 0===t||t.blur()},setSelectionRange:function(t,e,n){var i;null===(i=D.current)||void 0===i||i.setSelectionRange(t,e,n)},select:function(){var t;null===(t=D.current)||void 0===t||t.select()},input:D.current,nativeElement:(null===(t=R.current)||void 0===t?void 0:t.nativeElement)||D.current}})),(0,n.useEffect)((function(){$.current&&($.current=!1),P((function(t){return(!t||!d)&&t}))}),[d]);var q=function(t,e,n){var i,o,s=e;if(!T.current&&H.exceedFormatter&&H.max&&H.strategy(e)>H.max)e!==(s=H.exceedFormatter(e,{max:H.max}))&&Q([(null===(i=D.current)||void 0===i?void 0:i.selectionStart)||0,(null===(o=D.current)||void 0===o?void 0:o.selectionEnd)||0]);else if("compositionEnd"===n.source)return;j(s),D.current&&Ya(D.current,t,r,s)};(0,n.useEffect)((function(){var t,e;z&&(null===(t=D.current)||void 0===t||t.setSelectionRange.apply(t,function(t){if(Array.isArray(t))return tl(t)}(e=z)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||el(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}),[z]);var X,K=F&&"".concat(u,"-out-of-range");return n.default.createElement(Ja,Ka({},A,{prefixCls:u,className:At()(p,K),handleReset:function(t){j(""),B(),D.current&&Ya(D.current,t,r)},value:_,focused:E,triggerFocus:B,suffix:function(){var t=Number(V)>0;if(m||H.show){var e=H.showFormatter?H.showFormatter({value:_,count:W,maxLength:V}):"".concat(W).concat(t?" / ".concat(V):"");return n.default.createElement(n.default.Fragment,null,H.show&&n.default.createElement("span",{className:At()("".concat(u,"-show-count-suffix"),Fa({},"".concat(u,"-show-count-has-suffix"),!!m),null==S?void 0:S.count),style:Xa({},null==x?void 0:x.count)},e),m)}return null}(),disabled:d,classes:O,classNames:S,styles:x,ref:R}),(X=(0,Yi.A)(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]),n.default.createElement("input",Ka({autoComplete:i},X,{onChange:function(t){q(t,t.target.value,{source:"change"})},onFocus:function(t){P(!0),null==o||o(t)},onBlur:function(t){$.current&&($.current=!1),P(!1),null==s||s(t)},onKeyDown:function(t){a&&"Enter"===t.key&&!$.current&&($.current=!0,a(t)),null==l||l(t)},onKeyUp:function(t){"Enter"===t.key&&($.current=!1),null==c||c(t)},className:At()(u,Fa({},"".concat(u,"-disabled"),d),null==S?void 0:S.input),style:null==x?void 0:x.input,ref:D,size:f,type:w,onCompositionStart:function(t){T.current=!0,null==k||k(t)},onCompositionEnd:function(t){T.current=!1,q(t,t.currentTarget.value,{source:"compositionEnd"}),null==C||C(t)}}))))})),cl=ll,hl=__webpack_require__(5371),ul=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],dl={};var fl=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],pl=n.forwardRef((function(t,e){var i=t,r=i.prefixCls,o=i.defaultValue,s=i.value,a=i.autoSize,l=i.onResize,c=i.className,h=i.style,u=i.disabled,d=i.onChange,f=(i.onInternalAutoSize,Va(i,fl)),p=Ha((0,mo.A)(o,{value:s,postState:function(t){return null!=t?t:""}}),2),g=p[0],m=p[1],v=n.useRef();n.useImperativeHandle(e,(function(){return{textArea:v.current}}));var b=Ha(n.useMemo((function(){return a&&"object"===La(a)?[a.minRows,a.maxRows]:[]}),[a]),2),y=b[0],w=b[1],O=!!a,S=Ha(n.useState(2),2),x=S[0],k=S[1],C=Ha(n.useState(),2),A=C[0],M=C[1],E=function(){k(0)};(0,se.A)((function(){O&&E()}),[s,y,w,O]),(0,se.A)((function(){if(0===x)k(1);else if(1===x){var t=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;sl||((sl=document.createElement("textarea")).setAttribute("tab-index","-1"),sl.setAttribute("aria-hidden","true"),sl.setAttribute("name","hiddenTextarea"),document.body.appendChild(sl)),t.getAttribute("wrap")?sl.setAttribute("wrap",t.getAttribute("wrap")):sl.removeAttribute("wrap");var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&dl[n])return dl[n];var i=window.getComputedStyle(t),r=i.getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),o=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),s=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),a={sizingStyle:ul.map((function(t){return"".concat(t,":").concat(i.getPropertyValue(t))})).join(";"),paddingSize:o,borderSize:s,boxSizing:r};return e&&n&&(dl[n]=a),a}(t,e),o=r.paddingSize,s=r.borderSize,a=r.boxSizing,l=r.sizingStyle;sl.setAttribute("style","".concat(l,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),sl.value=t.value||t.placeholder||"";var c,h=void 0,u=void 0,d=sl.scrollHeight;if("border-box"===a?d+=s:"content-box"===a&&(d-=o),null!==n||null!==i){sl.value=" ";var f=sl.scrollHeight-o;null!==n&&(h=f*n,"border-box"===a&&(h=h+o+s),d=Math.max(h,d)),null!==i&&(u=f*i,"border-box"===a&&(u=u+o+s),c=d>u?"":"hidden",d=Math.min(u,d))}var p={height:d,overflowY:c,resize:"none"};return h&&(p.minHeight=h),u&&(p.maxHeight=u),p}(v.current,!1,y,w);k(2),M(t)}else!function(){try{if(document.activeElement===v.current){var t=v.current,e=t.selectionStart,n=t.selectionEnd,i=t.scrollTop;v.current.setSelectionRange(e,n),v.current.scrollTop=i}}catch(t){}}()}),[x]);var P=n.useRef(),T=function(){hl.A.cancel(P.current)};n.useEffect((function(){return T}),[]);var $=O?A:null,D=Ia(Ia({},h),$);return 0!==x&&1!==x||(D.overflowY="hidden",D.overflowX="hidden"),n.createElement(ms,{onResize:function(t){2===x&&(null==l||l(t),a&&(T(),P.current=(0,hl.A)((function(){E()}))))},disabled:!(a||l)},n.createElement("textarea",Na({},f,{ref:v,style:D,className:At()(r,c,ja({},"".concat(r,"-disabled"),u)),disabled:u,value:g,onChange:function(t){m(t.target.value),null==d||d(t)}})))})),gl=pl,ml=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],vl=n.default.forwardRef((function(t,e){var i,r=t.defaultValue,o=t.value,s=t.onFocus,a=t.onBlur,l=t.onChange,c=t.allowClear,h=t.maxLength,u=t.onCompositionStart,d=t.onCompositionEnd,f=t.suffix,p=t.prefixCls,g=void 0===p?"rc-textarea":p,m=t.showCount,v=t.count,b=t.className,y=t.style,w=t.disabled,O=t.hidden,S=t.classNames,x=t.styles,k=t.onResize,C=t.onClear,A=t.onPressEnter,M=t.readOnly,E=t.autoSize,P=t.onKeyDown,T=Va(t,ml),$=Ha((0,mo.A)(r,{value:o,defaultValue:r}),2),D=$[0],R=$[1],B=null==D?"":String(D),N=Ha(n.default.useState(!1),2),L=N[0],j=N[1],_=n.default.useRef(!1),I=Ha(n.default.useState(null),2),z=I[0],Q=I[1],H=(0,n.useRef)(null),V=(0,n.useRef)(null),W=function(){var t;return null===(t=V.current)||void 0===t?void 0:t.textArea},F=function(){W().focus()};(0,n.useImperativeHandle)(e,(function(){var t;return{resizableTextArea:V.current,focus:F,blur:function(){W().blur()},nativeElement:(null===(t=H.current)||void 0===t?void 0:t.nativeElement)||W()}})),(0,n.useEffect)((function(){j((function(t){return!w&&t}))}),[w]);var q=Ha(n.default.useState(null),2),X=q[0],K=q[1];n.default.useEffect((function(){var t,e;X&&(t=W()).setSelectionRange.apply(t,function(t){if(Array.isArray(t))return za(t)}(e=X)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||Qa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),[X]);var Z,Y=ol(v,m),G=null!==(i=Y.max)&&void 0!==i?i:h,U=Number(G)>0,J=Y.strategy(B),tt=!!G&&J>G,et=function(t,e){var n=e;!_.current&&Y.exceedFormatter&&Y.max&&Y.strategy(e)>Y.max&&e!==(n=Y.exceedFormatter(e,{max:Y.max}))&&K([W().selectionStart||0,W().selectionEnd||0]),R(n),Ya(t.currentTarget,t,l,n)},nt=f;Y.show&&(Z=Y.showFormatter?Y.showFormatter({value:B,count:J,maxLength:G}):"".concat(J).concat(U?" / ".concat(G):""),nt=n.default.createElement(n.default.Fragment,null,nt,n.default.createElement("span",{className:At()("".concat(g,"-data-count"),null==S?void 0:S.count),style:null==x?void 0:x.count},Z)));var it=!E&&!m&&!c;return n.default.createElement(Ja,{ref:H,value:B,allowClear:c,handleReset:function(t){R(""),F(),Ya(W(),t,l)},suffix:nt,prefixCls:g,classNames:Ia(Ia({},S),{},{affixWrapper:At()(null==S?void 0:S.affixWrapper,ja(ja({},"".concat(g,"-show-count"),m),"".concat(g,"-textarea-allow-clear"),c))}),disabled:w,focused:L,className:At()(b,tt&&"".concat(g,"-out-of-range")),style:Ia(Ia({},y),z&&!it?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"==typeof Z?Z:void 0}},hidden:O,readOnly:M,onClear:C},n.default.createElement(gl,Na({},T,{autoSize:E,maxLength:h,onKeyDown:function(t){"Enter"===t.key&&A&&A(t),null==P||P(t)},onChange:function(t){et(t,t.target.value)},onFocus:function(t){j(!0),null==s||s(t)},onBlur:function(t){j(!1),null==a||a(t)},onCompositionStart:function(t){_.current=!0,null==u||u(t)},onCompositionEnd:function(t){_.current=!1,et(t,t.currentTarget.value),null==d||d(t)},className:At()(null==S?void 0:S.textarea),style:Ia(Ia({},null==x?void 0:x.textarea),{},{resize:null==y?void 0:y.resize}),disabled:w,prefixCls:g,onResize:function(t){var e;null==k||k(t),null!==(e=W())&&void 0!==e&&e.style.height&&Q(!0)},ref:V,readOnly:M})))})),bl=vl,yl=t=>{let e;return"object"==typeof t&&(null==t?void 0:t.clearIcon)?e=t:t&&(e={clearIcon:n.default.createElement(bt,null)}),e};function wl(t,e,n){return At()({[`${t}-status-success`]:"success"===e,[`${t}-status-warning`]:"warning"===e,[`${t}-status-error`]:"error"===e,[`${t}-status-validating`]:"validating"===e,[`${t}-has-feedback`]:n})}const Ol=(t,e)=>e||t;var Sl=__webpack_require__(829),xl=(t,e,i=void 0)=>{var r,o;const{variant:s,[t]:a}=n.useContext(c.QO),l=n.useContext(Hi),h=null==a?void 0:a.variant;let u;return u=void 0!==e?e:!1===i?"borderless":null!==(o=null!==(r=null!=l?l:h)&&void 0!==r?r:s)&&void 0!==o?o:"outlined",[u,c.lJ.includes(u)]},kl=__webpack_require__(5974);function Cl(t){return(0,Ji.oX)(t,{inputAffixPadding:t.paddingXXS})}const Al=t=>{const{controlHeight:e,fontSize:n,lineHeight:i,lineWidth:r,controlHeightSM:o,controlHeightLG:s,fontSizeLG:a,lineHeightLG:l,paddingSM:c,controlPaddingHorizontalSM:h,controlPaddingHorizontal:u,colorFillAlter:d,colorPrimaryHover:f,colorPrimary:p,controlOutlineWidth:g,controlOutline:m,colorErrorOutline:v,colorWarningOutline:b,colorBgContainer:y,inputFontSize:w,inputFontSizeLG:O,inputFontSizeSM:S}=t,x=w||n,k=S||x,C=O||a,A=Math.round((e-x*i)/2*10)/10-r,M=Math.round((o-k*i)/2*10)/10-r,E=Math.ceil((s-C*l)/2*10)/10-r;return{paddingBlock:Math.max(A,0),paddingBlockSM:Math.max(M,0),paddingBlockLG:Math.max(E,0),paddingInline:c-r,paddingInlineSM:h-r,paddingInlineLG:u-r,addonBg:d,activeBorderColor:p,hoverBorderColor:f,activeShadow:`0 0 0 ${g}px ${m}`,errorActiveShadow:`0 0 0 ${g}px ${v}`,warningActiveShadow:`0 0 0 ${g}px ${b}`,hoverBg:y,activeBg:y,inputFontSize:x,inputFontSizeLG:C,inputFontSizeSM:k}},Ml=t=>({borderColor:t.hoverBorderColor,backgroundColor:t.hoverBg}),El=t=>({color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},Ml((0,Ji.oX)(t,{hoverBorderColor:t.colorBorder,hoverBg:t.colorBgContainerDisabled})))}),Pl=(t,e)=>({background:t.colorBgContainer,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:e.borderColor,"&:hover":{borderColor:e.hoverBorderColor,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:t.activeBg}}),Tl=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},Pl(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}}),[`&${t.componentCls}-status-${e.status}${t.componentCls}-disabled`]:{borderColor:e.borderColor}}),$l=(t,e)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Pl(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},El(t))}),Tl(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),Tl(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),e)}),Dl=(t,e)=>({[`&${t.componentCls}-group-wrapper-status-${e.status}`]:{[`${t.componentCls}-group-addon`]:{borderColor:e.addonBorderColor,color:e.addonColor}}}),Rl=t=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group`]:{"&-addon":{background:t.addonBg,border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Dl(t,{status:"error",addonBorderColor:t.colorError,addonColor:t.colorErrorText})),Dl(t,{status:"warning",addonBorderColor:t.colorWarning,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group-addon`]:Object.assign({},El(t))}})}),Bl=(t,e)=>{const{componentCls:n}=t;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${n}-disabled, &[disabled]`]:{color:t.colorTextDisabled,cursor:"not-allowed"},[`&${n}-status-error`]:{"&, & input, & textarea":{color:t.colorError}},[`&${n}-status-warning`]:{"&, & input, & textarea":{color:t.colorWarning}}},e)}},Nl=(t,e)=>{var n;return{background:e.bg,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:null!==(n=null==e?void 0:e.inputColor)&&void 0!==n?n:"unset"},"&:hover":{background:e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:e.activeBorderColor,backgroundColor:t.activeBg}}},Ll=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},Nl(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}})}),jl=(t,e)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Nl(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.activeBorderColor})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},El(t))}),Ll(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,inputColor:t.colorErrorText,affixColor:t.colorError})),Ll(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,inputColor:t.colorWarningText,affixColor:t.colorWarning})),e)}),_l=(t,e)=>({[`&${t.componentCls}-group-wrapper-status-${e.status}`]:{[`${t.componentCls}-group-addon`]:{background:e.addonBg,color:e.addonColor}}}),Il=t=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group-addon`]:{background:t.colorFillTertiary,"&:last-child":{position:"static"}}},_l(t,{status:"error",addonBg:t.colorErrorBg,addonColor:t.colorErrorText})),_l(t,{status:"warning",addonBg:t.colorWarningBg,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group`]:{"&-addon":{background:t.colorFillTertiary,color:t.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorBorder}`}}}})}),zl=(t,e)=>({background:t.colorBgContainer,borderWidth:`${(0,h.zA)(t.lineWidth)} 0`,borderStyle:`${t.lineType} none`,borderColor:`transparent transparent ${e.borderColor} transparent`,borderRadius:0,"&:hover":{borderColor:`transparent transparent ${e.borderColor} transparent`,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:`transparent transparent ${e.borderColor} transparent`,outline:0,backgroundColor:t.activeBg}}),Ql=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},zl(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}}),[`&${t.componentCls}-status-${e.status}${t.componentCls}-disabled`]:{borderColor:`transparent transparent ${e.borderColor} transparent`}}),Hl=(t,e)=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},zl(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:{color:t.colorTextDisabled,boxShadow:"none",cursor:"not-allowed","&:hover":{borderColor:`transparent transparent ${t.colorBorder} transparent`}},"input[disabled], textarea[disabled]":{cursor:"not-allowed"}}),Ql(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),Ql(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),e)}),Vl=t=>{const{paddingBlockLG:e,lineHeightLG:n,borderRadiusLG:i,paddingInlineLG:r}=t;return{padding:`${(0,h.zA)(e)} ${(0,h.zA)(r)}`,fontSize:t.inputFontSizeLG,lineHeight:n,borderRadius:i}},Wl=t=>({padding:`${(0,h.zA)(t.paddingBlockSM)} ${(0,h.zA)(t.paddingInlineSM)}`,fontSize:t.inputFontSizeSM,borderRadius:t.borderRadiusSM}),Fl=t=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,h.zA)(t.paddingBlock)} ${(0,h.zA)(t.paddingInline)}`,color:t.colorText,fontSize:t.inputFontSize,lineHeight:t.lineHeight,borderRadius:t.borderRadius,transition:`all ${t.motionDurationMid}`},{"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:t.colorTextPlaceholder,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),{"&-lg":Object.assign({},Vl(t)),"&-sm":Object.assign({},Wl(t)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),ql=t=>{const{componentCls:e,antCls:n}=t;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:t.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:Object.assign({},Vl(t)),[`&-sm ${e}, &-sm > ${e}-group-addon`]:Object.assign({},Wl(t)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,h.zA)(t.paddingInline)}`,color:t.colorText,fontWeight:"normal",fontSize:t.inputFontSize,textAlign:"center",borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`${(0,h.zA)(t.calc(t.paddingBlock).add(1).mul(-1).equal())} ${(0,h.zA)(t.calc(t.paddingInline).mul(-1).equal())}`,[`&${n}-select-single:not(${n}-select-customize-input):not(${n}-pagination-size-changer)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} transparent`,boxShadow:"none"}}},[`${n}-cascader-picker`]:{margin:`-9px ${(0,h.zA)(t.calc(t.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[e]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${e}-search-with-button &`]:{zIndex:0}}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-search &`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius}},[`&:not(:first-child), ${e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,J.t6)()),{[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:t.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`\n        & > ${e}-affix-wrapper,\n        & > ${e}-number-affix-wrapper,\n        & > ${n}-picker-range\n      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderInlineEndWidth:t.lineWidth},[e]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,\n      & > ${n}-select-auto-complete ${e},\n      & > ${n}-cascader-picker ${e},\n      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:t.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,\n      & > ${n}-select:first-child > ${n}-select-selector,\n      & > ${n}-select-auto-complete:first-child ${e},\n      & > ${n}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius},[`& > *:last-child,\n      & > ${n}-select:last-child > ${n}-select-selector,\n      & > ${n}-cascader-picker:last-child ${e},\n      & > ${n}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:t.lineWidth,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius},[`& > ${n}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:t.calc(t.lineWidth).mul(-1).equal(),[`${e}-affix-wrapper`]:{borderRadius:0}},[`${e}-group-wrapper:not(:last-child)`]:{[`&${e}-search > ${e}-group`]:{[`& > ${e}-group-addon > ${e}-search-button`]:{borderRadius:0},[`& > ${e}`]:{borderStartStartRadius:t.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:t.borderRadius}}}})}},Xl=t=>{const{componentCls:e,controlHeightSM:n,lineWidth:i,calc:r}=t,o=r(n).sub(r(i).mul(2)).sub(16).div(2).equal();return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,J.dF)(t)),Fl(t)),$l(t)),jl(t)),Bl(t)),Hl(t)),{'&[type="color"]':{height:t.controlHeight,[`&${e}-lg`]:{height:t.controlHeightLG},[`&${e}-sm`]:{height:n,paddingTop:o,paddingBottom:o}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{appearance:"none"}})}},Kl=t=>{const{componentCls:e}=t;return{[`${e}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${t.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:t.colorIcon},"&:active":{color:t.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,h.zA)(t.inputAffixPadding)}`}}}},Zl=t=>{const{componentCls:e,inputAffixPadding:n,colorTextDescription:i,motionDurationSlow:r,colorIcon:o,colorIconHover:s,iconCls:a}=t,l=`${e}-affix-wrapper`,c=`${e}-affix-wrapper-disabled`;return{[l]:Object.assign(Object.assign(Object.assign(Object.assign({},Fl(t)),{display:"inline-flex",[`&:not(${e}-disabled):hover`]:{zIndex:1,[`${e}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${e}`]:{padding:0},[`> input${e}, > textarea${e}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:t.paddingXS}},"&-show-count-suffix":{color:i,direction:"ltr"},"&-show-count-has-suffix":{marginInlineEnd:t.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),Kl(t)),{[`${a}${e}-password-icon`]:{color:o,cursor:"pointer",transition:`all ${r}`,"&:hover":{color:s}}}),[`${e}-underlined`]:{borderRadius:0},[c]:{[`${a}${e}-password-icon`]:{color:o,cursor:"not-allowed","&:hover":{color:o}}}}},Yl=t=>{const{componentCls:e,borderRadiusLG:n,borderRadiusSM:i}=t;return{[`${e}-group`]:Object.assign(Object.assign(Object.assign({},(0,J.dF)(t)),ql(t)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:n,fontSize:t.inputFontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:i}}},Rl(t)),Il(t)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})})}},Gl=t=>{const{componentCls:e,antCls:n}=t,i=`${e}-search`;return{[i]:{[e]:{"&:hover, &:focus":{[`+ ${e}-group-addon ${i}-button:not(${n}-btn-color-primary):not(${n}-btn-variant-text)`]:{borderInlineStartColor:t.colorPrimaryHover}}},[`${e}-affix-wrapper`]:{height:t.controlHeight,borderRadius:0},[`${e}-lg`]:{lineHeight:t.calc(t.lineHeightLG).sub(2e-4).equal()},[`> ${e}-group`]:{[`> ${e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${i}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${i}-button:not(${n}-btn-color-primary)`]:{color:t.colorTextDescription,"&:hover":{color:t.colorPrimaryHover},"&:active":{color:t.colorPrimaryActive},[`&${n}-btn-loading::before`]:{inset:0}}}},[`${i}-button`]:{height:t.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${e}-affix-wrapper, ${i}-button`]:{height:t.controlHeightLG}},"&-small":{[`${e}-affix-wrapper, ${i}-button`]:{height:t.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${e}-compact-item`]:{[`&:not(${e}-compact-last-item)`]:{[`${e}-group-addon`]:{[`${e}-search-button`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${e}-compact-first-item)`]:{[`${e},${e}-affix-wrapper`]:{borderRadius:0}},[`> ${e}-group-addon ${e}-search-button,\n        > ${e},\n        ${e}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${e}-affix-wrapper-focused`]:{zIndex:2}}}}},Ul=t=>{const{componentCls:e}=t;return{[`${e}-out-of-range`]:{[`&, & input, & textarea, ${e}-show-count-suffix, ${e}-data-count`]:{color:t.colorError}}}},Jl=(0,Ui.OF)(["Input","Shared"],(t=>{const e=(0,Ji.oX)(t,Cl(t));return[Xl(e),Zl(e)]}),Al,{resetFont:!1});var tc=(0,Ui.OF)(["Input","Component"],(t=>{const e=(0,Ji.oX)(t,Cl(t));return[Yl(e),Gl(e),Ul(e),(0,kl.G)(e)]}),Al,{resetFont:!1});const ec=t=>{const{componentCls:e,paddingLG:n}=t,i=`${e}-textarea`;return{[`textarea${e}`]:{maxWidth:"100%",height:"auto",minHeight:t.controlHeight,lineHeight:t.lineHeight,verticalAlign:"bottom",transition:`all ${t.motionDurationSlow}`,resize:"vertical",[`&${e}-mouse-active`]:{transition:`all ${t.motionDurationSlow}, height 0s, width 0s`}},[`${e}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[i]:{position:"relative","&-show-count":{[`${e}-data-count`]:{position:"absolute",bottom:t.calc(t.fontSize).mul(t.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:t.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`\n        &-allow-clear > ${e},\n        &-affix-wrapper${i}-has-feedback ${e}\n      `]:{paddingInlineEnd:n},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:t.paddingInline,insetBlockStart:t.paddingXS},[`${i}-suffix`]:{position:"absolute",top:0,insetInlineEnd:t.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${e}-affix-wrapper-rtl`]:{[`${e}-suffix`]:{[`${e}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${e}-affix-wrapper-sm`]:{[`${e}-suffix`]:{[`${e}-clear-icon`]:{insetInlineEnd:t.paddingInlineSM}}}}}};var nc=(0,Ui.OF)(["Input","TextArea"],(t=>{const e=(0,Ji.oX)(t,Cl(t));return[ec(e)]}),Al,{resetFont:!1});const ic=(0,n.forwardRef)(((t,e)=>{var i;const{prefixCls:r,bordered:o=!0,size:s,disabled:a,status:l,allowClear:h,classNames:u,rootClassName:d,className:f,style:p,styles:g,variant:m,showCount:v,onMouseDown:b,onResize:y}=t,w=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:O,direction:S,allowClear:x,autoComplete:k,className:C,style:A,classNames:M,styles:E}=(0,c.TP)("textArea"),P=n.useContext(V.A),T=null!=a?a:P,{status:$,hasFeedback:D,feedbackIcon:R}=n.useContext(zi),B=Ol($,l),N=n.useRef(null);n.useImperativeHandle(e,(()=>{var t;return{resizableTextArea:null===(t=N.current)||void 0===t?void 0:t.resizableTextArea,focus:t=>{var e,n;Ga(null===(n=null===(e=N.current)||void 0===e?void 0:e.resizableTextArea)||void 0===n?void 0:n.textArea,t)},blur:()=>{var t;return null===(t=N.current)||void 0===t?void 0:t.blur()}}}));const L=O("input",r),j=Zi(L),[_,I,z]=Jl(L,d),[Q]=nc(L,j),{compactSize:H,compactItemClassnames:W}=(0,Vi.RQ)(L,S),F=(0,Sl.A)((t=>{var e;return null!==(e=null!=s?s:H)&&void 0!==e?e:t})),[q,X]=xl("textArea",m,o),K=yl(null!=h?h:x),[Z,Y]=n.useState(!1),[G,U]=n.useState(!1);return _(Q(n.createElement(bl,Object.assign({autoComplete:k},w,{style:Object.assign(Object.assign({},A),p),styles:Object.assign(Object.assign({},E),g),disabled:T,allowClear:K,className:At()(z,j,f,d,W,C,G&&`${L}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},u),M),{textarea:At()({[`${L}-sm`]:"small"===F,[`${L}-lg`]:"large"===F},I,null==u?void 0:u.textarea,M.textarea,Z&&`${L}-mouse-active`),variant:At()({[`${L}-${q}`]:X},wl(L,B)),affixWrapper:At()(`${L}-textarea-affix-wrapper`,{[`${L}-affix-wrapper-rtl`]:"rtl"===S,[`${L}-affix-wrapper-sm`]:"small"===F,[`${L}-affix-wrapper-lg`]:"large"===F,[`${L}-textarea-show-count`]:v||(null===(i=t.count)||void 0===i?void 0:i.show)},I)}),prefixCls:L,suffix:D&&n.createElement("span",{className:`${L}-textarea-suffix`},R),showCount:v,ref:N,onResize:t=>{var e,n;if(null==y||y(t),Z&&"function"==typeof getComputedStyle){const t=null===(n=null===(e=N.current)||void 0===e?void 0:e.nativeElement)||void 0===n?void 0:n.querySelector("textarea");t&&"both"===getComputedStyle(t).resize&&U(!0)}},onMouseDown:t=>{Y(!0),null==b||b(t);const e=()=>{Y(!1),document.removeEventListener("mouseup",e)};document.addEventListener("mouseup",e)}}))))}));var rc=ic;const oc=t=>{const e={};return[1,2,3,4,5].forEach((n=>{e[`\n      h${n}&,\n      div&-h${n},\n      div&-h${n} > textarea,\n      h${n}\n    `]=((t,e,n,i)=>{const{titleMarginBottom:r,fontWeightStrong:o}=i;return{marginBottom:r,color:n,fontWeight:o,fontSize:t,lineHeight:e}})(t[`fontSizeHeading${n}`],t[`lineHeightHeading${n}`],t.colorTextHeading,t)})),e},sc=t=>{const{componentCls:e}=t;return{"a&, a":Object.assign(Object.assign({},(0,J.Y1)(t)),{userSelect:"text",[`&[disabled], &${e}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:t.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},ac=t=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:t.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:t.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:_.bK[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:t.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),lc=t=>{const{componentCls:e,paddingSM:n}=t,i=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:t.calc(t.paddingSM).mul(-1).equal(),marginTop:t.calc(i).mul(-1).equal(),marginBottom:`calc(1em - ${(0,h.zA)(i)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:t.calc(t.marginXS).add(2).equal(),insetBlockEnd:t.marginXS,color:t.colorIcon,fontWeight:"normal",fontSize:t.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},cc=t=>({[`${t.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:t.colorSuccess}},[`${t.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),hc=t=>{const{componentCls:e,titleMarginTop:n}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorText,wordBreak:"break-word",lineHeight:t.lineHeight,[`&${e}-secondary`]:{color:t.colorTextDescription},[`&${e}-success`]:{color:t.colorSuccessText},[`&${e}-warning`]:{color:t.colorWarningText},[`&${e}-danger`]:{color:t.colorErrorText,"a&:active, a&:focus":{color:t.colorErrorTextActive},"a&:hover":{color:t.colorErrorTextHover}},[`&${e}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},oc(t)),{[`\n      & + h1${e},\n      & + h2${e},\n      & + h3${e},\n      & + h4${e},\n      & + h5${e}\n      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),ac(t)),sc(t)),{[`\n        ${e}-expand,\n        ${e}-collapse,\n        ${e}-edit,\n        ${e}-copy\n      `]:Object.assign(Object.assign({},(0,J.Y1)(t)),{marginInlineStart:t.marginXXS})}),lc(t)),cc(t)),{"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),{"&-rtl":{direction:"rtl"}})}};var uc=(0,Ui.OF)("Typography",(t=>[hc(t)]),(()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}))),dc=t=>{const{prefixCls:e,"aria-label":i,className:r,style:o,direction:s,maxLength:a,autoSize:l=!0,value:c,onSave:h,onCancel:u,onEnd:d,component:f,enterIcon:p=n.createElement(Ba,null)}=t,g=n.useRef(null),m=n.useRef(!1),v=n.useRef(null),[b,y]=n.useState(c);n.useEffect((()=>{y(c)}),[c]),n.useEffect((()=>{var t;if(null===(t=g.current)||void 0===t?void 0:t.resizableTextArea){const{textArea:t}=g.current.resizableTextArea;t.focus();const{length:e}=t.value;t.setSelectionRange(e,e)}}),[]);const w=()=>{h(b.trim())},[O,S,x]=uc(e),k=At()(e,`${e}-edit-content`,{[`${e}-rtl`]:"rtl"===s,[`${e}-${f}`]:!!f},r,S,x);return O(n.createElement("div",{className:k,style:o},n.createElement(rc,{ref:g,maxLength:a,value:b,onChange:({target:t})=>{y(t.value.replace(/[\n\r]/g,""))},onKeyDown:({keyCode:t})=>{m.current||(v.current=t)},onKeyUp:({keyCode:t,ctrlKey:e,altKey:n,metaKey:i,shiftKey:r})=>{v.current!==t||m.current||e||n||i||r||(t===Pe.ENTER?(w(),null==d||d()):t===Pe.ESC&&u())},onCompositionStart:()=>{m.current=!0},onCompositionEnd:()=>{m.current=!1},onBlur:()=>{w()},"aria-label":i,rows:1,autoSize:l}),null!==p?(0,Oa.Ob)(p,{className:`${e}-edit-content-confirm`}):null))},fc=__webpack_require__(7965),pc=__webpack_require__.n(fc),gc=({copyConfig:t,children:e})=>{const[i,r]=n.useState(!1),[o,s]=n.useState(!1),a=n.useRef(null),l=()=>{a.current&&clearTimeout(a.current)},c={};t.format&&(c.format=t.format),n.useEffect((()=>l),[]);const h=(0,wr.A)((n=>{return i=void 0,o=void 0,u=function*(){var i;null==n||n.preventDefault(),null==n||n.stopPropagation(),s(!0);try{const o="function"==typeof t.text?yield t.text():t.text;pc()(o||((t,e=!1)=>e&&null==t?[]:Array.isArray(t)?t:[t])(e,!0).join("")||"",c),s(!1),r(!0),l(),a.current=setTimeout((()=>{r(!1)}),3e3),null===(i=t.onCopy)||void 0===i||i.call(t,n)}catch(t){throw s(!1),t}},new((h=void 0)||(h=Promise))((function(t,e){function n(t){try{s(u.next(t))}catch(t){e(t)}}function r(t){try{s(u.throw(t))}catch(t){e(t)}}function s(e){var i;e.done?t(e.value):(i=e.value,i instanceof h?i:new h((function(t){t(i)}))).then(n,r)}s((u=u.apply(i,o||[])).next())}));var i,o,h,u}));return{copied:i,copyLoading:o,onClick:h}};function mc(t,e){return n.useMemo((()=>{const n=!!t;return[n,Object.assign(Object.assign({},e),n&&"object"==typeof t?t:null)]}),[t])}const vc=n.forwardRef(((t,e)=>{const{prefixCls:i,component:r="article",className:o,rootClassName:s,setContentRef:a,children:l,direction:h,style:u}=t,d=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:f,direction:p,className:g,style:m}=(0,c.TP)("typography"),v=null!=h?h:p,b=a?(0,ie.K4)(e,a):e,y=f("typography",i),[w,O,S]=uc(y),x=At()(y,g,{[`${y}-rtl`]:"rtl"===v},o,s,O,S),k=Object.assign(Object.assign({},m),u);return w(n.createElement(r,Object.assign({className:x,style:k,ref:b},d),l))}));var bc=vc,yc={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},wc=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:yc}))},Oc=n.forwardRef(wc),Sc={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},xc=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:Sc}))},kc=n.forwardRef(xc),Cc=__webpack_require__(3567);function Ac(t){return!1===t?[!1,!1]:Array.isArray(t)?t:[t]}function Mc(t,e,n){return!0===t||void 0===t?e:t||n&&e}const Ec=t=>["string","number"].includes(typeof t);var Pc=({prefixCls:t,copied:e,locale:i,iconOnly:r,tooltips:o,icon:s,tabIndex:a,onCopy:l,loading:c})=>{const h=Ac(o),u=Ac(s),{copied:d,copy:f}=null!=i?i:{},p=e?d:f,g=Mc(h[e?1:0],p),m="string"==typeof g?g:p;return n.createElement($a,{title:g},n.createElement("button",{type:"button",className:At()(`${t}-copy`,{[`${t}-copy-success`]:e,[`${t}-copy-icon-only`]:r}),onClick:l,"aria-label":m,tabIndex:a},e?Mc(u[1],n.createElement(Oc,null),!0):Mc(u[0],c?n.createElement(Cc.A,null):n.createElement(kc,null),!0)))};const Tc=n.forwardRef((({style:t,children:e},i)=>{const r=n.useRef(null);return n.useImperativeHandle(i,(()=>({isExceed:()=>{const t=r.current;return t.scrollHeight>t.clientHeight},getHeight:()=>r.current.clientHeight}))),n.createElement("span",{"aria-hidden":!0,ref:r,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},t)},e)}));function $c(t,e){let n=0;const i=[];for(let r=0;r<t.length;r+=1){if(n===e)return i;const o=t[r],s=n+(Ec(o)?String(o).length:1);if(s>e){const t=e-n;return i.push(String(o).slice(0,t)),i}i.push(o),n=s}return t}const Dc=0,Rc=4,Bc={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function Nc(t){const{enableMeasure:e,width:i,text:r,children:o,rows:s,expanded:a,miscDeps:c,onEllipsis:h}=t,u=n.useMemo((()=>(0,fn.A)(r)),[r]),d=n.useMemo((()=>(t=>t.reduce(((t,e)=>t+(Ec(e)?String(e).length:1)),0))(u)),[r]),f=n.useMemo((()=>o(u,!1)),[r]),[p,g]=n.useState(null),m=n.useRef(null),v=n.useRef(null),b=n.useRef(null),y=n.useRef(null),w=n.useRef(null),[O,S]=n.useState(!1),[x,k]=n.useState(Dc),[C,A]=n.useState(0),[M,E]=n.useState(null);(0,se.A)((()=>{k(e&&i&&d?1:Dc)}),[i,r,s,e,u]),(0,se.A)((()=>{var t,e,n,i;if(1===x){k(2);const t=v.current&&getComputedStyle(v.current).whiteSpace;E(t)}else if(2===x){const r=!!(null===(t=b.current)||void 0===t?void 0:t.isExceed());k(r?3:Rc),g(r?[0,d]:null),S(r);const o=(null===(e=b.current)||void 0===e?void 0:e.getHeight())||0,a=1===s?0:(null===(n=y.current)||void 0===n?void 0:n.getHeight())||0,l=(null===(i=w.current)||void 0===i?void 0:i.getHeight())||0,c=Math.max(o,a+l);A(c+1),h(r)}}),[x]);const P=p?Math.ceil((p[0]+p[1])/2):0;(0,se.A)((()=>{var t;const[e,n]=p||[0,0];if(e!==n){const i=((null===(t=m.current)||void 0===t?void 0:t.getHeight())||0)>C;let r=P;n-e===1&&(r=i?e:n),g(i?[e,r]:[r,n])}}),[p,P]);const T=n.useMemo((()=>{if(!e)return o(u,!1);if(3!==x||!p||p[0]!==p[1]){const t=o(u,!1);return[Rc,Dc].includes(x)?t:n.createElement("span",{style:Object.assign(Object.assign({},Bc),{WebkitLineClamp:s})},t)}return o(a?u:$c(u,p[0]),O)}),[a,x,p,u].concat((0,l.A)(c))),$={width:i,margin:0,padding:0,whiteSpace:"nowrap"===M?"normal":"inherit"};return n.createElement(n.Fragment,null,T,2===x&&n.createElement(n.Fragment,null,n.createElement(Tc,{style:Object.assign(Object.assign(Object.assign({},$),Bc),{WebkitLineClamp:s}),ref:b},f),n.createElement(Tc,{style:Object.assign(Object.assign(Object.assign({},$),Bc),{WebkitLineClamp:s-1}),ref:y},f),n.createElement(Tc,{style:Object.assign(Object.assign(Object.assign({},$),Bc),{WebkitLineClamp:1}),ref:w},o([],!0))),3===x&&p&&p[0]!==p[1]&&n.createElement(Tc,{style:Object.assign(Object.assign({},$),{top:400}),ref:m},o($c(u,P),!0)),1===x&&n.createElement("span",{style:{whiteSpace:"inherit"},ref:v}))}var Lc=({enableEllipsis:t,isEllipsis:e,children:i,tooltipProps:r})=>(null==r?void 0:r.title)&&t?n.createElement($a,Object.assign({open:!!e&&void 0},r),i):i;const jc=["delete","mark","code","underline","strong","keyboard","italic"],_c=n.forwardRef(((t,e)=>{var i;const{prefixCls:r,className:o,style:s,type:a,disabled:h,children:u,ellipsis:d,editable:f,copyable:p,component:g,title:m}=t,v=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:b,direction:y}=n.useContext(c.QO),[w]=_t("Text"),O=n.useRef(null),S=n.useRef(null),x=b("typography",r),k=(0,Yi.A)(v,jc),[C,A]=mc(f),[M,E]=(0,mo.A)(!1,{value:A.editing}),{triggerType:P=["icon"]}=A,T=t=>{var e;t&&(null===(e=A.onStart)||void 0===e||e.call(A)),E(t)},$=(t=>{const e=(0,n.useRef)(void 0);return(0,n.useEffect)((()=>{e.current=t})),e.current})(M);(0,se.A)((()=>{var t;!M&&$&&(null===(t=S.current)||void 0===t||t.focus())}),[M]);const D=t=>{null==t||t.preventDefault(),T(!0)},[R,B]=mc(p),{copied:N,copyLoading:L,onClick:j}=gc({copyConfig:B,children:u}),[_,I]=n.useState(!1),[z,Q]=n.useState(!1),[H,V]=n.useState(!1),[W,F]=n.useState(!1),[q,X]=n.useState(!0),[K,Z]=mc(d,{expandable:!1,symbol:t=>t?null==w?void 0:w.collapse:null==w?void 0:w.expand}),[Y,G]=(0,mo.A)(Z.defaultExpanded||!1,{value:Z.expanded}),U=K&&(!Y||"collapsible"===Z.expandable),{rows:J=1}=Z,tt=n.useMemo((()=>U&&(void 0!==Z.suffix||Z.onEllipsis||Z.expandable||C||R)),[U,Z,C,R]);(0,se.A)((()=>{K&&!tt&&(I(bs("webkitLineClamp")),Q(bs("textOverflow")))}),[tt,K]);const[et,nt]=n.useState(U),it=n.useMemo((()=>!tt&&(1===J?z:_)),[tt,z,_]);(0,se.A)((()=>{nt(it&&U)}),[it,U]);const rt=U&&(et?W:H),ot=U&&1===J&&et,st=U&&J>1&&et,[at,lt]=n.useState(0),ct=t=>{var e;V(t),H!==t&&(null===(e=Z.onEllipsis)||void 0===e||e.call(Z,t))};n.useEffect((()=>{const t=O.current;if(K&&et&&t){const e=function(t){const e=document.createElement("em");t.appendChild(e);const n=t.getBoundingClientRect(),i=e.getBoundingClientRect();return t.removeChild(e),n.left>i.left||i.right>n.right||n.top>i.top||i.bottom>n.bottom}(t);W!==e&&F(e)}}),[K,et,u,st,q,at]),n.useEffect((()=>{const t=O.current;if("undefined"==typeof IntersectionObserver||!t||!et||!U)return;const e=new IntersectionObserver((()=>{X(!!t.offsetParent)}));return e.observe(t),()=>{e.disconnect()}}),[et,U]);const ht=((t,e,i)=>(0,n.useMemo)((()=>!0===t?{title:null!=e?e:i}:(0,n.isValidElement)(t)?{title:t}:"object"==typeof t?Object.assign({title:null!=e?e:i},t):{title:t}),[t,e,i]))(Z.tooltip,A.text,u),ut=n.useMemo((()=>{if(K&&!et)return[A.text,u,m,ht.title].find(Ec)}),[K,et,m,ht.title,rt]);if(M)return n.createElement(dc,{value:null!==(i=A.text)&&void 0!==i?i:"string"==typeof u?u:"",onSave:t=>{var e;null===(e=A.onChange)||void 0===e||e.call(A,t),T(!1)},onCancel:()=>{var t;null===(t=A.onCancel)||void 0===t||t.call(A),T(!1)},onEnd:A.onEnd,prefixCls:x,className:o,style:s,direction:y,component:g,maxLength:A.maxLength,autoSize:A.autoSize,enterIcon:A.enterIcon});const dt=()=>{const{expandable:t,symbol:e}=Z;return t?n.createElement("button",{type:"button",key:"expand",className:`${x}-${Y?"collapse":"expand"}`,onClick:t=>((t,e)=>{var n;G(e.expanded),null===(n=Z.onExpand)||void 0===n||n.call(Z,t,e)})(t,{expanded:!Y}),"aria-label":Y?w.collapse:null==w?void 0:w.expand},"function"==typeof e?e(Y):e):null},ft=()=>{if(!C)return;const{icon:t,tooltip:e,tabIndex:i}=A,r=(0,fn.A)(e)[0]||(null==w?void 0:w.edit),o="string"==typeof r?r:"";return P.includes("icon")?n.createElement($a,{key:"edit",title:!1===e?"":r},n.createElement("button",{type:"button",ref:S,className:`${x}-edit`,onClick:D,"aria-label":o,tabIndex:i},t||n.createElement(Po,{role:"button"}))):null},pt=t=>[t&&dt(),ft(),R?n.createElement(Pc,Object.assign({key:"copy"},B,{prefixCls:x,copied:N,locale:w,onCopy:j,loading:L,iconOnly:null==u})):null];return n.createElement(ms,{onResize:({offsetWidth:t})=>{lt(t)},disabled:!U},(i=>n.createElement(Lc,{tooltipProps:ht,enableEllipsis:U,isEllipsis:rt},n.createElement(bc,Object.assign({className:At()({[`${x}-${a}`]:a,[`${x}-disabled`]:h,[`${x}-ellipsis`]:K,[`${x}-ellipsis-single-line`]:ot,[`${x}-ellipsis-multiple-line`]:st},o),prefixCls:r,style:Object.assign(Object.assign({},s),{WebkitLineClamp:st?J:void 0}),component:g,ref:(0,ie.K4)(i,O,e),direction:y,onClick:P.includes("text")?D:void 0,"aria-label":null==ut?void 0:ut.toString(),title:m},k),n.createElement(Nc,{enableMeasure:U&&!et,text:u,rows:J,width:at,onEllipsis:ct,expanded:Y,miscDeps:[N,Y,L,C,R,w].concat((0,l.A)(jc.map((e=>t[e]))))},((e,i)=>function({mark:t,code:e,underline:i,delete:r,strong:o,keyboard:s,italic:a},l){let c=l;function h(t,e){e&&(c=n.createElement(t,{},c))}return h("strong",o),h("u",i),h("del",r),h("code",e),h("mark",t),h("kbd",s),h("i",a),c}(t,n.createElement(n.Fragment,null,e.length>0&&i&&!Y&&ut?n.createElement("span",{key:"show-content","aria-hidden":!0},e):e,(t=>[t&&!Y&&n.createElement("span",{"aria-hidden":!0,key:"ellipsis"},"..."),Z.suffix,pt(t)])(i)))))))))}));var Ic=_c;const zc=n.forwardRef(((t,e)=>{var{ellipsis:i,rel:r}=t,o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["ellipsis","rel"]);const s=Object.assign(Object.assign({},o),{rel:void 0===r&&"_blank"===o.target?"noopener noreferrer":r});return delete s.navigate,n.createElement(Ic,Object.assign({},s,{ref:e,ellipsis:!!i,component:"a"}))}));var Qc=zc,Hc=n.forwardRef(((t,e)=>n.createElement(Ic,Object.assign({ref:e},t,{component:"div"}))));const Vc=(t,e)=>{var{ellipsis:i}=t,r=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["ellipsis"]);const o=n.useMemo((()=>i&&"object"==typeof i?(0,Yi.A)(i,["expandable","rows"]):i),[i]);return n.createElement(Ic,Object.assign({ref:e},r,{ellipsis:o,component:"span"}))};var Wc=n.forwardRef(Vc);const Fc=[1,2,3,4,5];var qc=n.forwardRef(((t,e)=>{const{level:i=1}=t,r=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["level"]),o=Fc.includes(i)?`h${i}`:"h1";return n.createElement(Ic,Object.assign({ref:e},r,{component:o}))}));const Xc=bc;Xc.Text=Wc,Xc.Link=Qc,Xc.Title=qc,Xc.Paragraph=Hc;var Kc=Xc;function Zc(t,e){const i=(0,n.useRef)([]),r=()=>{i.current.push(setTimeout((()=>{var e,n,i,r;(null===(e=t.current)||void 0===e?void 0:e.input)&&"password"===(null===(n=t.current)||void 0===n?void 0:n.input.getAttribute("type"))&&(null===(i=t.current)||void 0===i?void 0:i.input.hasAttribute("value"))&&(null===(r=t.current)||void 0===r||r.input.removeAttribute("value"))})))};return(0,n.useEffect)((()=>(e&&r(),()=>i.current.forEach((t=>{t&&clearTimeout(t)})))),[]),r}const Yc=(0,n.forwardRef)(((t,e)=>{const{prefixCls:i,bordered:r=!0,status:o,size:s,disabled:a,onBlur:l,onFocus:h,suffix:u,allowClear:d,addonAfter:f,addonBefore:p,className:g,style:m,styles:v,rootClassName:b,onChange:y,classNames:w,variant:O}=t,S=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:x,direction:k,allowClear:C,autoComplete:A,className:M,style:E,classNames:P,styles:T}=(0,c.TP)("input"),$=x("input",i),D=(0,n.useRef)(null),R=Zi($),[B,N,L]=Jl($,b),[j]=tc($,R),{compactSize:_,compactItemClassnames:I}=(0,Vi.RQ)($,k),z=(0,Sl.A)((t=>{var e;return null!==(e=null!=s?s:_)&&void 0!==e?e:t})),Q=n.default.useContext(V.A),H=null!=a?a:Q,{status:W,hasFeedback:F,feedbackIcon:q}=(0,n.useContext)(zi),X=Ol(W,o),K=function(t){return!!(t.prefix||t.suffix||t.allowClear||t.showCount)}(t)||!!F;(0,n.useRef)(K);const Z=Zc(D,!0),Y=(F||u)&&n.default.createElement(n.default.Fragment,null,u,F&&q),G=yl(null!=d?d:C),[U,J]=xl("input",O,r);return B(j(n.default.createElement(cl,Object.assign({ref:(0,ie.K4)(e,D),prefixCls:$,autoComplete:A},S,{disabled:H,onBlur:t=>{Z(),null==l||l(t)},onFocus:t=>{Z(),null==h||h(t)},style:Object.assign(Object.assign({},E),m),styles:Object.assign(Object.assign({},T),v),suffix:Y,allowClear:G,className:At()(g,b,L,R,I,M),onChange:t=>{Z(),null==y||y(t)},addonBefore:p&&n.default.createElement(Wi,{form:!0,space:!0},p),addonAfter:f&&n.default.createElement(Wi,{form:!0,space:!0},f),classNames:Object.assign(Object.assign(Object.assign({},w),P),{input:At()({[`${$}-sm`]:"small"===z,[`${$}-lg`]:"large"===z,[`${$}-rtl`]:"rtl"===k},null==w?void 0:w.input,P.input,N),variant:At()({[`${$}-${U}`]:J},wl($,X)),affixWrapper:At()({[`${$}-affix-wrapper-sm`]:"small"===z,[`${$}-affix-wrapper-lg`]:"large"===z,[`${$}-affix-wrapper-rtl`]:"rtl"===k},N),wrapper:At()({[`${$}-group-rtl`]:"rtl"===k},N),groupWrapper:At()({[`${$}-group-wrapper-sm`]:"small"===z,[`${$}-group-wrapper-lg`]:"large"===z,[`${$}-group-wrapper-rtl`]:"rtl"===k,[`${$}-group-wrapper-${U}`]:J},wl(`${$}-group-wrapper`,X,F),N)})}))))}));var Gc=Yc;const Uc=t=>{const{componentCls:e,paddingXS:n}=t;return{[e]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:n,[`${e}-input-wrapper`]:{position:"relative",[`${e}-mask-icon`]:{position:"absolute",zIndex:"1",top:"50%",right:"50%",transform:"translate(50%, -50%)",pointerEvents:"none"},[`${e}-mask-input`]:{color:"transparent",caretColor:"var(--ant-color-text)"},[`${e}-mask-input[type=number]::-webkit-inner-spin-button`]:{"-webkit-appearance":"none",margin:0},[`${e}-mask-input[type=number]`]:{"-moz-appearance":"textfield"}},"&-rtl":{direction:"rtl"},[`${e}-input`]:{textAlign:"center",paddingInline:t.paddingXXS},[`&${e}-sm ${e}-input`]:{paddingInline:t.calc(t.paddingXXS).div(2).equal()},[`&${e}-lg ${e}-input`]:{paddingInline:t.paddingXS}}}};var Jc=(0,Ui.OF)(["Input","OTP"],(t=>{const e=(0,Ji.oX)(t,Cl(t));return[Uc(e)]}),Al);const th=n.forwardRef(((t,e)=>{const{className:i,value:r,onChange:o,onActiveChange:s,index:a,mask:l}=t,h=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["className","value","onChange","onActiveChange","index","mask"]),{getPrefixCls:u}=n.useContext(c.QO),d=u("otp"),f="string"==typeof l?l:r,p=n.useRef(null);n.useImperativeHandle(e,(()=>p.current));const g=()=>{(0,hl.A)((()=>{var t;const e=null===(t=p.current)||void 0===t?void 0:t.input;document.activeElement===e&&e&&e.select()}))};return n.createElement("span",{className:`${d}-input-wrapper`,role:"presentation"},l&&""!==r&&void 0!==r&&n.createElement("span",{className:`${d}-mask-icon`,"aria-hidden":"true"},f),n.createElement(Gc,Object.assign({"aria-label":`OTP Input ${a+1}`,type:!0===l?"password":"text"},h,{ref:p,value:r,onInput:t=>{o(a,t.target.value)},onFocus:g,onKeyDown:t=>{const{key:e,ctrlKey:n,metaKey:i}=t;"ArrowLeft"===e?s(a-1):"ArrowRight"===e?s(a+1):"z"===e&&(n||i)&&t.preventDefault(),g()},onKeyUp:t=>{"Backspace"!==t.key||r||s(a-1),g()},onMouseDown:g,onMouseUp:g,className:At()(i,{[`${d}-mask-input`]:l})})))}));var eh=th;function nh(t){return(t||"").split("")}const ih=t=>{const{index:e,prefixCls:i,separator:r}=t,o="function"==typeof r?r(e):r;return o?n.createElement("span",{className:`${i}-separator`},o):null},rh=n.forwardRef(((t,e)=>{const{prefixCls:i,length:r=6,size:o,defaultValue:s,value:a,onChange:h,formatter:u,separator:d,variant:f,disabled:p,status:g,autoFocus:m,mask:v,type:b,onInput:y,inputMode:w}=t,O=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","length","size","defaultValue","value","onChange","formatter","separator","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:S,direction:x}=n.useContext(c.QO),k=S("otp",i),C=De(O,{aria:!0,data:!0,attr:!0}),[A,M,E]=Jc(k),P=(0,Sl.A)((t=>null!=o?o:t)),T=n.useContext(zi),$=Ol(T.status,g),D=n.useMemo((()=>Object.assign(Object.assign({},T),{status:$,hasFeedback:!1,feedbackIcon:null})),[T,$]),R=n.useRef(null),B=n.useRef({});n.useImperativeHandle(e,(()=>({focus:()=>{var t;null===(t=B.current[0])||void 0===t||t.focus()},blur:()=>{var t;for(let e=0;e<r;e+=1)null===(t=B.current[e])||void 0===t||t.blur()},nativeElement:R.current})));const N=t=>u?u(t):t,[L,j]=n.useState((()=>nh(N(s||""))));n.useEffect((()=>{void 0!==a&&j(nh(a))}),[a]);const _=(0,wr.A)((t=>{j(t),y&&y(t),h&&t.length===r&&t.every((t=>t))&&t.some(((t,e)=>L[e]!==t))&&h(t.join(""))})),I=(0,wr.A)(((t,e)=>{let n=(0,l.A)(L);for(let e=0;e<t;e+=1)n[e]||(n[e]="");e.length<=1?n[t]=e:n=n.slice(0,t).concat(nh(e)),n=n.slice(0,r);for(let t=n.length-1;t>=0&&!n[t];t-=1)n.pop();const i=N(n.map((t=>t||" ")).join(""));return n=nh(i).map(((t,e)=>" "!==t||n[e]?t:n[e])),n})),z=(t,e)=>{var n;const i=I(t,e),o=Math.min(t+e.length,r-1);o!==t&&void 0!==i[t]&&(null===(n=B.current[o])||void 0===n||n.focus()),_(i)},Q=t=>{var e;null===(e=B.current[t])||void 0===e||e.focus()},H={variant:f,disabled:p,status:$,mask:v,type:b,inputMode:w};return A(n.createElement("div",Object.assign({},C,{ref:R,className:At()(k,{[`${k}-sm`]:"small"===P,[`${k}-lg`]:"large"===P,[`${k}-rtl`]:"rtl"===x},E,M),role:"group"}),n.createElement(zi.Provider,{value:D},Array.from({length:r}).map(((t,e)=>{const i=`otp-${e}`,o=L[e]||"";return n.createElement(n.Fragment,{key:i},n.createElement(eh,Object.assign({ref:t=>{B.current[e]=t},index:e,size:P,htmlSize:1,className:`${k}-input`,onChange:z,value:o,onActiveChange:Q,autoFocus:0===e&&m},H)),e<r-1&&n.createElement(ih,{separator:d,index:e,prefixCls:k}))})))))}));var oh=rh,sh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},ah=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:sh}))},lh=n.forwardRef(ah),ch={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},hh=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:ch}))},uh=n.forwardRef(hh);const dh=t=>t?n.createElement(uh,null):n.createElement(lh,null),fh={click:"onClick",hover:"onMouseOver"},ph=n.forwardRef(((t,e)=>{const{disabled:i,action:r="click",visibilityToggle:o=!0,iconRender:s=dh}=t,a=n.useContext(V.A),l=null!=i?i:a,h="object"==typeof o&&void 0!==o.visible,[u,d]=(0,n.useState)((()=>!!h&&o.visible)),f=(0,n.useRef)(null);n.useEffect((()=>{h&&d(o.visible)}),[h,o]);const p=Zc(f),g=()=>{var t;if(l)return;u&&p();const e=!u;d(e),"object"==typeof o&&(null===(t=o.onVisibleChange)||void 0===t||t.call(o,e))},{className:m,prefixCls:v,inputPrefixCls:b,size:y}=t,w=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:O}=n.useContext(c.QO),S=O("input",b),x=O("input-password",v),k=o&&(t=>{const e=fh[r]||"",i=s(u),o={[e]:g,className:`${t}-icon`,key:"passwordIcon",onMouseDown:t=>{t.preventDefault()},onMouseUp:t=>{t.preventDefault()}};return n.cloneElement(n.isValidElement(i)?i:n.createElement("span",null,i),o)})(x),C=At()(x,m,{[`${x}-${y}`]:!!y}),A=Object.assign(Object.assign({},(0,Yi.A)(w,["suffix","iconRender","visibilityToggle"])),{type:u?"text":"password",className:C,prefixCls:S,suffix:k});return y&&(A.size=y),n.createElement(Gc,Object.assign({ref:(0,ie.K4)(e,f)},A))}));var gh=ph,mh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},vh=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:mh}))},bh=n.forwardRef(vh);const yh=n.forwardRef(((t,e)=>{const{prefixCls:i,inputPrefixCls:r,className:o,size:s,suffix:l,enterButton:h=!1,addonAfter:u,loading:d,disabled:f,onSearch:p,onChange:g,onCompositionStart:m,onCompositionEnd:v,variant:b}=t,y=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd","variant"]),{getPrefixCls:w,direction:O}=n.useContext(c.QO),S=n.useRef(!1),x=w("input-search",i),k=w("input",r),{compactSize:C}=(0,Vi.RQ)(x,O),A=(0,Sl.A)((t=>{var e;return null!==(e=null!=s?s:C)&&void 0!==e?e:t})),M=n.useRef(null),E=t=>{var e;document.activeElement===(null===(e=M.current)||void 0===e?void 0:e.input)&&t.preventDefault()},P=t=>{var e,n;p&&p(null===(n=null===(e=M.current)||void 0===e?void 0:e.input)||void 0===n?void 0:n.value,t,{source:"input"})},T="boolean"==typeof h?n.createElement(bh,null):null,$=`${x}-button`;let D;const R=h||{},B=R.type&&!0===R.type.__ANT_BUTTON;D=B||"button"===R.type?(0,Oa.Ob)(R,Object.assign({onMouseDown:E,onClick:t=>{var e,n;null===(n=null===(e=null==R?void 0:R.props)||void 0===e?void 0:e.onClick)||void 0===n||n.call(e,t),P(t)},key:"enterButton"},B?{className:$,size:A}:{})):n.createElement(a.Ay,{className:$,color:h?"primary":"default",size:A,disabled:f,key:"enterButton",onMouseDown:E,onClick:P,loading:d,icon:T,variant:"borderless"===b||"filled"===b||"underlined"===b?"text":h?"solid":void 0},h),u&&(D=[D,(0,Oa.Ob)(u,{key:"addonAfter"})]);const N=At()(x,{[`${x}-rtl`]:"rtl"===O,[`${x}-${A}`]:!!A,[`${x}-with-button`]:!!h},o),L=Object.assign(Object.assign({},y),{className:N,prefixCls:k,type:"search",size:A,variant:b,onPressEnter:t=>{S.current||d||P(t)},onCompositionStart:t=>{S.current=!0,null==m||m(t)},onCompositionEnd:t=>{S.current=!1,null==v||v(t)},addonAfter:D,suffix:l,onChange:t=>{(null==t?void 0:t.target)&&"click"===t.type&&p&&p(t.target.value,t,{source:"clear"}),null==g||g(t)},disabled:f});return n.createElement(Gc,Object.assign({ref:(0,ie.K4)(M,e)},L))}));var wh=yh;const Oh=Gc;Oh.Group=t=>{const{getPrefixCls:e,direction:i}=(0,n.useContext)(c.QO),{prefixCls:r,className:o}=t,s=e("input-group",r),a=e("input"),[l,h,u]=tc(a),d=At()(s,u,{[`${s}-lg`]:"large"===t.size,[`${s}-sm`]:"small"===t.size,[`${s}-compact`]:t.compact,[`${s}-rtl`]:"rtl"===i},h,o),f=(0,n.useContext)(zi),p=(0,n.useMemo)((()=>Object.assign(Object.assign({},f),{isFormItemInput:!1})),[f]);return l(n.createElement("span",{className:d,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},n.createElement(zi.Provider,{value:p},t.children)))},Oh.Search=wh,Oh.TextArea=rc,Oh.Password=gh,Oh.OTP=oh;var Sh=Oh,xh=__webpack_require__(2011),kh=__webpack_require__(1826),Ch=(0,n.memo)((function(e){var n=e.port,o=(0,i.jL)();return kh.platformProps.utils.widgets.get("@1fe/starter-kit"),(0,t.Y)(a.Ay,{onClick:function(){return o(r.tR.setActiveWidgetUrl("http://127.0.0.1:".concat(n||"8080","/js/1fe-bundle.js")))},children:n})}));function Ah(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var Mh=(0,i.yz)(r.Mb,r.Ep,(function(t,e){return{isVisible:t.isWidgetSwitcherOpen,widgetUrl:e}})),Eh=(0,n.memo)((function(e){var o,l,c=e.trigger,h=(0,i.GV)(Mh),u=h.isVisible,d=h.widgetUrl,f=(0,i.jL)(),p=(o=(0,n.useState)(d),l=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(o,l)||function(t,e){if(t){if("string"==typeof t)return Ah(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ah(t,e):void 0}}(o,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=p[0],m=p[1];return(0,t.FD)(t.FK,{children:[c,(0,t.FD)(Ao,{open:u,onCancel:function(){return f(r.tR.setIsWidgetSwitcherOpen(!1))},footer:[(0,t.Y)(s.A,{keyName:"esc",onKeyDown:function(){f(r.tR.setIsWidgetSwitcherOpen(!1))},children:(0,t.Y)(a.Ay,{type:"primary",disabled:!g||g===d,onClick:function(){g&&f(r.tR.setActiveWidgetUrl(g))},"data-qa":"apply-widget-url",children:"Apply"})}),(0,t.Y)(a.Ay,{type:"primary",onClick:function(){f(r.tR.setIsWidgetSwitcherOpen(!1))},children:"Close"})],children:[(0,t.Y)(Kc.Title,{level:2,children:"Widget switcher"}),(0,t.FD)(xh.VP,{padding:"".concat("32px"," 0"),children:[(0,t.Y)("label",{htmlFor:"widgetUrl",children:"Enter a widget url"}),(0,t.Y)(Sh,{id:"widgetUrl",name:"widgetUrl",type:"url",placeholder:"http://127.0.0.1:8081/js/1fe-bundle.js",onChange:function(t){return m(t.target.value)},value:null!=g?g:d,"data-qa":"widgetUrlInput"}),(0,t.FD)("div",{children:[(0,t.Y)(xh.EY,{children:"Quick load: "}),(0,t.Y)(Ch,{port:"8080"}),(0,t.Y)(Ch,{port:"8081"}),(0,t.Y)(Ch,{port:"8082"}),(0,t.Y)(Ch,{port:"8083"})]}),(0,t.FD)(xh.az,{padding:"".concat("24px"," 0"),children:[(0,t.Y)("p",{children:(0,t.Y)("b",{children:"Shortcuts"})}),(0,t.Y)("table",{children:(0,t.FD)("tbody",{children:[(0,t.FD)("tr",{children:[(0,t.Y)("td",{children:"Copy"}),(0,t.Y)("td",{children:"CTRL+SHIFT+C"})]}),(0,t.FD)("tr",{children:[(0,t.Y)("td",{children:"Open widget switcher"}),(0,t.Y)("td",{children:"Ctrl+/"})]}),(0,t.FD)("tr",{children:[(0,t.Y)("td",{children:"Open props editor"}),(0,t.Y)("td",{children:"Ctrl+P"})]}),(0,t.FD)("tr",{children:[(0,t.Y)("td",{children:"Reset"}),(0,t.Y)("td",{children:"Ctrl+R"})]}),(0,t.FD)("tr",{children:[(0,t.Y)("td",{children:"Clean (on error)"}),(0,t.Y)("td",{children:"CMD+ESC"})]})]})})]})]})]})]})}));const Ph=1024;let Th=0;class $h{constructor(t,e){this.from=t,this.to=e}}class Dh{constructor(t={}){this.id=Th++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=Nh.match(t)),e=>{let n=t(e);return void 0===n?null:[this,n]}}}Dh.closedBy=new Dh({deserialize:t=>t.split(" ")}),Dh.openedBy=new Dh({deserialize:t=>t.split(" ")}),Dh.group=new Dh({deserialize:t=>t.split(" ")}),Dh.isolate=new Dh({deserialize:t=>{if(t&&"rtl"!=t&&"ltr"!=t&&"auto"!=t)throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}}),Dh.contextHash=new Dh({perNode:!0}),Dh.lookAhead=new Dh({perNode:!0}),Dh.mounted=new Dh({perNode:!0});class Rh{constructor(t,e,n){this.tree=t,this.overlay=e,this.parser=n}static get(t){return t&&t.props&&t.props[Dh.mounted.id]}}const Bh=Object.create(null);class Nh{constructor(t,e,n,i=0){this.name=t,this.props=e,this.id=n,this.flags=i}static define(t){let e=t.props&&t.props.length?Object.create(null):Bh,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),i=new Nh(t.name||"",e,t.id,n);if(t.props)for(let n of t.props)if(Array.isArray(n)||(n=n(i)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[n[0].id]=n[1]}return i}prop(t){return this.props[t.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(t){if("string"==typeof t){if(this.name==t)return!0;let e=this.prop(Dh.group);return!!e&&e.indexOf(t)>-1}return this.id==t}static match(t){let e=Object.create(null);for(let n in t)for(let i of n.split(" "))e[i]=t[n];return t=>{for(let n=t.prop(Dh.group),i=-1;i<(n?n.length:0);i++){let r=e[i<0?t.name:n[i]];if(r)return r}}}}Nh.none=new Nh("",Object.create(null),0,8);class Lh{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let n of this.types){let i=null;for(let e of t){let t=e(n);t&&(i||(i=Object.assign({},n.props)),i[t[0].id]=t[1])}e.push(i?new Nh(n.name,i,n.id,n.flags):n)}return new Lh(e)}}const jh=new WeakMap,_h=new WeakMap;var Ih;!function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"}(Ih||(Ih={}));class zh{constructor(t,e,n,i,r){if(this.type=t,this.children=e,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[t,e]of r)this.props["number"==typeof t?t:t.id]=e}}toString(){let t=Rh.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let t of this.children){let n=t.toString();n&&(e&&(e+=","),e+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new Jh(this.topNode,t)}cursorAt(t,e=0,n=0){let i=jh.get(this)||this.topNode,r=new Jh(i);return r.moveTo(t,e),jh.set(this,r._tree),r}get topNode(){return new qh(this,0,0,null)}resolve(t,e=0){let n=Wh(jh.get(this)||this.topNode,t,e,!1);return jh.set(this,n),n}resolveInner(t,e=0){let n=Wh(_h.get(this)||this.topNode,t,e,!0);return _h.set(this,n),n}resolveStack(t,e=0){return function(t,e,n){let i=t.resolveInner(e,n),r=null;for(let t=i instanceof qh?i:i.context.parent;t;t=t.parent)if(t.index<0){let o=t.parent;(r||(r=[i])).push(o.resolve(e,n)),t=o}else{let o=Rh.get(t.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let s=new qh(o.tree,o.overlay[0].from+t.from,-1,t);(r||(r=[i])).push(Wh(s,e,n,!1))}}return r?Gh(r):i}(this,t,e)}iterate(t){let{enter:e,leave:n,from:i=0,to:r=this.length}=t,o=t.mode||0,s=(o&Ih.IncludeAnonymous)>0;for(let t=this.cursor(o|Ih.IncludeAnonymous);;){let o=!1;if(t.from<=r&&t.to>=i&&(!s&&t.type.isAnonymous||!1!==e(t))){if(t.firstChild())continue;o=!0}for(;o&&n&&(s||!t.type.isAnonymous)&&n(t),!t.nextSibling();){if(!t.parent())return;o=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:iu(Nh.none,this.children,this.positions,0,this.children.length,0,this.length,((t,e,n)=>new zh(this.type,t,e,n,this.propValues)),t.makeTree||((t,e,n)=>new zh(Nh.none,t,e,n)))}static build(t){return function(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=Ph,reused:o=[],minRepeatType:s=i.types.length}=t,a=Array.isArray(n)?new Qh(n,n.length):n,l=i.types,c=0,h=0;function u(t,e,n,m,v,b){let{id:y,start:w,end:O,size:S}=a,x=h,k=c;for(;S<0;){if(a.next(),-1==S){let e=o[y];return n.push(e),void m.push(w-t)}if(-3==S)return void(c=y);if(-4==S)return void(h=y);throw new RangeError(`Unrecognized record size: ${S}`)}let C,A,M=l[y],E=w-t;if(O-w<=r&&(A=function(t,e){let n=a.fork(),i=0,o=0,l=0,c=n.end-r,h={size:0,start:0,skip:0};t:for(let r=n.pos-t;n.pos>r;){let t=n.size;if(n.id==e&&t>=0){h.size=i,h.start=o,h.skip=l,l+=4,i+=4,n.next();continue}let a=n.pos-t;if(t<0||a<r||n.start<c)break;let u=n.id>=s?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break t;u+=4}else n.id>=s&&(u+=4);n.next()}o=d,i+=t,l+=u}return(e<0||i==t)&&(h.size=i,h.start=o,h.skip=l),h.size>4?h:void 0}(a.pos-e,v))){let e=new Uint16Array(A.size-A.skip),n=a.pos-A.size,r=e.length;for(;a.pos>n;)r=g(A.start,e,r);C=new Hh(e,O-A.start,i),E=A.start-t}else{let t=a.pos-S;a.next();let e=[],n=[],i=y>=s?y:-1,o=0,l=O;for(;a.pos>t;)i>=0&&a.id==i&&a.size>=0?(a.end<=l-r&&(f(e,n,w,o,a.end,l,i,x,k),o=e.length,l=a.end),a.next()):b>2500?d(w,t,e,n):u(w,t,e,n,i,b+1);if(i>=0&&o>0&&o<e.length&&f(e,n,w,o,w,l,i,x,k),e.reverse(),n.reverse(),i>-1&&o>0){let t=function(t,e){return(n,i,r)=>{let o,s,a=0,l=n.length-1;if(l>=0&&(o=n[l])instanceof zh){if(!l&&o.type==t&&o.length==r)return o;(s=o.prop(Dh.lookAhead))&&(a=i[l]+o.length+s)}return p(t,n,i,r,a,e)}}(M,k);C=iu(M,e,n,0,e.length,0,O-w,t,t)}else C=p(M,e,n,O-w,x-O,k)}n.push(C),m.push(E)}function d(t,e,n,o){let s=[],l=0,c=-1;for(;a.pos>e;){let{id:t,start:e,end:n,size:i}=a;if(i>4)a.next();else{if(c>-1&&e<c)break;c<0&&(c=n-r),s.push(t,e,n),l++,a.next()}}if(l){let e=new Uint16Array(4*l),r=s[s.length-2];for(let t=s.length-3,n=0;t>=0;t-=3)e[n++]=s[t],e[n++]=s[t+1]-r,e[n++]=s[t+2]-r,e[n++]=n;n.push(new Hh(e,s[2]-r,i)),o.push(r-t)}}function f(t,e,n,r,o,s,a,l,c){let h=[],u=[];for(;t.length>r;)h.push(t.pop()),u.push(e.pop()+n-o);t.push(p(i.types[a],h,u,s-o,l-s,c)),e.push(o-n)}function p(t,e,n,i,r,o,s){if(o){let t=[Dh.contextHash,o];s=s?[t].concat(s):[t]}if(r>25){let t=[Dh.lookAhead,r];s=s?[t].concat(s):[t]}return new zh(t,e,n,i,s)}function g(t,e,n){let{id:i,start:r,end:o,size:l}=a;if(a.next(),l>=0&&i<s){let s=n;if(l>4){let i=a.pos-(l-4);for(;a.pos>i;)n=g(t,e,n)}e[--n]=s,e[--n]=o-t,e[--n]=r-t,e[--n]=i}else-3==l?c=i:-4==l&&(h=i);return n}let m=[],v=[];for(;a.pos>0;)u(t.start||0,t.bufferStart||0,m,v,-1,0);let b=null!==(e=t.length)&&void 0!==e?e:m.length?v[0]+m[0].length:0;return new zh(l[t.topID],m.reverse(),v.reverse(),b)}(t)}}zh.empty=new zh(Nh.none,[],[],0);class Qh{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Qh(this.buffer,this.index)}}class Hh{constructor(t,e,n){this.buffer=t,this.length=e,this.set=n}get type(){return Nh.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],n=this.buffer[t+3],i=this.set.types[e],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),n==(t+=4))return r;let o=[];for(;t<n;)o.push(this.childString(t)),t=this.buffer[t+3];return r+"("+o.join(",")+")"}findChild(t,e,n,i,r){let{buffer:o}=this,s=-1;for(let a=t;a!=e&&!(Vh(r,i,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(t,e,n){let i=this.buffer,r=new Uint16Array(e-t),o=0;for(let s=t,a=0;s<e;){r[a++]=i[s++],r[a++]=i[s++]-n;let e=r[a++]=i[s++]-n;r[a++]=i[s++]-t,o=Math.max(o,e)}return new Hh(r,o,this.set)}}function Vh(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Wh(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let e=!i&&t instanceof qh&&t.index<0?null:t.parent;if(!e)return t;t=e}let o=i?0:Ih.IgnoreOverlays;if(i)for(let i=t,s=i.parent;s;i=s,s=i.parent)i instanceof qh&&i.index<0&&(null===(r=s.enter(e,n,o))||void 0===r?void 0:r.from)!=i.from&&(t=s);for(;;){let i=t.enter(e,n,o);if(!i)return t;t=i}}class Fh{cursor(t=0){return new Jh(this,t)}getChild(t,e=null,n=null){let i=Xh(this,t,e,n);return i.length?i[0]:null}getChildren(t,e=null,n=null){return Xh(this,t,e,n)}resolve(t,e=0){return Wh(this,t,e,!1)}resolveInner(t,e=0){return Wh(this,t,e,!0)}matchContext(t){return Kh(this.parent,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),n=this;for(;e;){let t=e.lastChild;if(!t||t.to!=e.to)break;t.type.isError&&t.from==t.to?(n=e,e=t.prevSibling):e=t}return n}get node(){return this}get next(){return this.parent}}class qh extends Fh{constructor(t,e,n,i){super(),this._tree=t,this.from=e,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,n,i,r=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=e>0?s.length:-1;t!=l;t+=e){let l=s[t],c=a[t]+o.from;if(Vh(i,n,c,c+l.length))if(l instanceof Hh){if(r&Ih.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,e,n-c,i);if(s>-1)return new Yh(new Zh(o,l,t,c),null,s)}else if(r&Ih.IncludeAnonymous||!l.type.isAnonymous||tu(l)){let s;if(!(r&Ih.IgnoreMounts)&&(s=Rh.get(l))&&!s.overlay)return new qh(s.tree,c,t,o);let a=new qh(l,c,t,o);return r&Ih.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(e<0?l.children.length-1:0,e,n,i)}}if(r&Ih.IncludeAnonymous||!o.type.isAnonymous)return null;if(t=o.index>=0?o.index+e:e<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,n=0){let i;if(!(n&Ih.IgnoreOverlays)&&(i=Rh.get(this._tree))&&i.overlay){let n=t-this.from;for(let{from:t,to:r}of i.overlay)if((e>0?t<=n:t<n)&&(e<0?r>=n:r>n))return new qh(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Xh(t,e,n,i){let r=t.cursor(),o=[];if(!r.firstChild())return o;if(null!=n)for(let t=!1;!t;)if(t=r.type.is(n),!r.nextSibling())return o;for(;;){if(null!=i&&r.type.is(i))return o;if(r.type.is(e)&&o.push(r.node),!r.nextSibling())return null==i?o:[]}}function Kh(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class Zh{constructor(t,e,n,i){this.parent=t,this.buffer=e,this.index=n,this.start=i}}class Yh extends Fh{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,n){super(),this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,e,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],t,e-this.context.start,n);return r<0?null:new Yh(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,n=0){if(n&Ih.ExcludeBuffers)return null;let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return r<0?null:new Yh(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Yh(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new Yh(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let o=n.buffer[this.index+1];t.push(n.slice(i,r,o)),e.push(0)}return new zh(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Gh(t){if(!t.length)return null;let e=0,n=t[0];for(let i=1;i<t.length;i++){let r=t[i];(r.from>n.from||r.to<n.to)&&(n=r,e=i)}let i=n instanceof qh&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new Uh(r,n)}class Uh{constructor(t,e){this.heads=t,this.node=e}get next(){return Gh(this.heads)}}class Jh{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof qh)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let e=t._parent;e;e=e._parent)this.stack.unshift(e.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}yieldBuf(t,e){this.index=t;let{start:n,buffer:i}=this.buffer;return this.type=e||i.set.types[i.buffer[t]],this.from=n+i.buffer[t+1],this.to=n+i.buffer[t+2],!0}yield(t){return!!t&&(t instanceof qh?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],t,e-this.buffer.start,n);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,n=this.mode){return this.buffer?!(n&Ih.ExcludeBuffers)&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ih.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Ih.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));let{buffer:e}=this.buffer,n=this.stack.length-1;if(t<0){let t=n<0?0:this.stack[n]+4;if(this.index!=t)return this.yieldBuf(e.findChild(t,this.index,-1,0,4))}else{let t=e.buffer[this.index+3];if(t<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(t)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,n,{buffer:i}=this;if(i){if(t>0){if(this.index<i.buffer.buffer.length)return!1}else for(let t=0;t<this.index;t++)if(i.buffer.buffer[t+3]<this.index)return!1;({index:e,parent:n}=i)}else({index:e,_parent:n}=this._tree);for(;n;({index:e,_parent:n}=n))if(e>-1)for(let i=e+t,r=t<0?-1:n._tree.children.length;i!=r;i+=t){let t=n._tree.children[i];if(this.mode&Ih.IncludeAnonymous||t instanceof Hh||!t.type.isAnonymous||tu(t))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(let i=this.index,r=this.stack.length;r>=0;){for(let o=t;o;o=o._parent)if(o.index==i){if(i==this.index)return o;e=o,n=r+1;break t}i=this.stack[--r]}for(let t=n;t<this.stack.length;t++)e=new Yh(this.buffer,e,this.stack[t]);return this.bufferNode=new Yh(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let n=0;;){let i=!1;if(this.type.isAnonymous||!1!==t(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&e&&e(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(t){if(!this.buffer)return Kh(this.node.parent,t);let{buffer:e}=this.buffer,{types:n}=e.set;for(let i=t.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return Kh(this._tree,t,i);let o=n[e.buffer[this.stack[r]]];if(!o.isAnonymous){if(t[i]&&t[i]!=o.name)return!1;i--}}return!0}}function tu(t){return t.children.some((t=>t instanceof Hh||!t.type.isAnonymous||tu(t)))}const eu=new WeakMap;function nu(t,e){if(!t.isAnonymous||e instanceof Hh||e.type!=t)return 1;let n=eu.get(e);if(null==n){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof zh)){n=1;break}n+=nu(t,i)}eu.set(e,n)}return n}function iu(t,e,n,i,r,o,s,a,l){let c=0;for(let n=i;n<r;n++)c+=nu(t,e[n]);let h=Math.ceil(1.5*c/8),u=[],d=[];return function e(n,i,r,s,a){for(let c=r;c<s;){let r=c,f=i[c],p=nu(t,n[c]);for(c++;c<s;c++){let e=nu(t,n[c]);if(p+e>=h)break;p+=e}if(c==r+1){if(p>h){let t=n[r];e(t.children,t.positions,0,t.children.length,i[r]+a);continue}u.push(n[r])}else{let e=i[c-1]+n[c-1].length-f;u.push(iu(t,n,i,r,c,f,e,null,l))}d.push(f+a-o)}}(e,n,i,r,0),(a||l)(u,d,s)}class ru{constructor(){this.map=new WeakMap}setBuffer(t,e,n){let i=this.map.get(t);i||this.map.set(t,i=new Map),i.set(e,n)}getBuffer(t,e){let n=this.map.get(t);return n&&n.get(e)}set(t,e){t instanceof Yh?this.setBuffer(t.context.buffer,t.index,e):t instanceof qh&&this.map.set(t.tree,e)}get(t){return t instanceof Yh?this.getBuffer(t.context.buffer,t.index):t instanceof qh?this.map.get(t.tree):void 0}cursorSet(t,e){t.buffer?this.setBuffer(t.buffer.buffer,t.index,e):this.map.set(t.tree,e)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class ou{constructor(t,e,n,i,r=!1,o=!1){this.from=t,this.to=e,this.tree=n,this.offset=i,this.open=(r?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(t,e=[],n=!1){let i=[new ou(0,t.length,t,0,!1,n)];for(let n of e)n.to>t.length&&i.push(n);return i}static applyChanges(t,e,n=128){if(!e.length)return t;let i=[],r=1,o=t.length?t[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<e.length?e[s]:null,h=c?c.fromA:1e9;if(h-a>=n)for(;o&&o.from<h;){let e=o;if(a>=e.from||h<=e.to||l){let t=Math.max(e.from,a)-l,n=Math.min(e.to,h)-l;e=t>=n?null:new ou(t,n,e.tree,e.offset+l,s>0,!!c)}if(e&&i.push(e),o.to>h)break;o=r<t.length?t[r++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return i}}class su{startParse(t,e,n){return"string"==typeof t&&(t=new au(t)),n=n?n.length?n.map((t=>new $h(t.from,t.to))):[new $h(0,0)]:[new $h(0,t.length)],this.createParse(t,e||[],n)}parse(t,e,n){let i=this.startParse(t,e,n);for(;;){let t=i.advance();if(t)return t}}}class au{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new Dh({perNode:!0});class lu{constructor(t,e,n,i,r,o,s,a,l,c=0,h){this.p=t,this.stack=e,this.state=n,this.reducePos=i,this.pos=r,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=h}toString(){return`[${this.stack.filter(((t,e)=>e%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,n=0){let i=t.parser.context;return new lu(t,[],e,n,n,0,[],0,i?new cu(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let n=t>>19,i=65535&t,{parser:r}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let s=r.dynamicPrecedence(i);if(s&&(this.score+=s),0==n)return this.pushState(r.getGoto(this.state,i,!0),this.reducePos),i<r.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),void this.reduceContext(i,this.reducePos);let a=this.stack.length-3*(n-1)-(262144&t?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-l;c>=2e3&&!(null===(e=this.p.parser.nodeSet.types[i])||void 0===e?void 0:e.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=c));let h=a?this.stack[a-1]:0,u=this.bufferBase+this.buffer.length-h;if(i<r.minRepeatTerm||131072&t){let t=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,t,u+4,!0)}if(262144&t)this.state=this.stack[a];else{let t=this.stack[a-3];this.state=r.getGoto(t,i,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(i,l)}storeNode(t,e,n,i=4,r=!1){if(0==t&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let t=this,i=this.buffer.length;if(0==i&&t.parent&&(i=t.bufferBase-t.parent.bufferBase,t=t.parent),i>0&&0==t.buffer[i-4]&&t.buffer[i-1]>-1){if(e==n)return;if(t.buffer[i-2]>=e)return void(t.buffer[i-2]=n)}}if(r&&this.pos!=n){let r=this.buffer.length;if(r>0&&0!=this.buffer[r-4]){let t=!1;for(let e=r;e>0&&this.buffer[e-2]>n;e-=4)if(this.buffer[e-1]>=0){t=!0;break}if(t)for(;r>0&&this.buffer[r-2]>n;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,i>4&&(i-=4)}this.buffer[r]=t,this.buffer[r+1]=e,this.buffer[r+2]=n,this.buffer[r+3]=i}else this.buffer.push(t,e,n,i)}shift(t,e,n,i){if(131072&t)this.pushState(65535&t,this.pos);else if(262144&t)this.pos=i,this.shiftContext(e,n),e<=this.p.parser.maxNode&&this.buffer.push(e,n,i,4);else{let r=t,{parser:o}=this.p;(i>this.pos||e<=o.maxNode)&&(this.pos=i,o.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,n),this.shiftContext(e,n),e<=o.maxNode&&this.buffer.push(e,n,i,4)}}apply(t,e,n,i){65536&t?this.reduce(t):this.shift(t,e,n,i)}useNode(t,e){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=t)&&(this.p.reused.push(t),n++);let i=this.pos;this.reducePos=this.pos=i+t.length,this.pushState(e,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let n=t.buffer.slice(e),i=t.bufferBase+e;for(;t&&i==t.bufferBase;)t=t.parent;return new lu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let n=t<=this.p.parser.maxNode;n&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,n?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new hu(this);;){let n=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(0==n)return!1;if(!(65536&n))return!0;e.reduce(n)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let n=[];for(let i,r=0;r<e.length;r+=2)(i=e[r+1])!=this.state&&this.p.parser.hasAction(i,t)&&n.push(e[r],i);if(this.stack.length<120)for(let t=0;n.length<8&&t<e.length;t+=2){let i=e[t+1];n.some(((t,e)=>1&e&&t==i))||n.push(e[t],i)}e=n}let n=[];for(let t=0;t<e.length&&n.length<4;t+=2){let i=e[t+1];if(i==this.state)continue;let r=this.split();r.pushState(i,this.pos),r.storeNode(0,r.pos,r.pos,4,!0),r.shiftContext(e[t],this.pos),r.reducePos=this.pos,r.score-=200,n.push(r)}return n}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if(!(65536&e))return!1;if(!t.validAction(this.state,e)){let n=e>>19,i=65535&e,r=this.stack.length-3*n;if(r<0||t.getGoto(this.stack[r],i,!1)<0){let t=this.findForcedReduction();if(null==t)return!1;e=t}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],n=(i,r)=>{if(!e.includes(i))return e.push(i),t.allActions(i,(e=>{if(393216&e);else if(65536&e){let n=(e>>19)-r;if(n>1){let i=65535&e,r=this.stack.length-3*n;if(r>=0&&t.getGoto(this.stack[r],i,!1)>=0)return n<<19|65536|i}}else{let t=n(e,r+1);if(null!=t)return t}}))};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:t}=this.p;return 65535==t.data[t.stateSlot(this.state,1)]&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||-3!=this.buffer[t])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||-4!=this.buffer[t])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new cu(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class cu{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}class hu{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=65535&t,n=t>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let i=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=i}}class uu{constructor(t,e,n){this.stack=t,this.pos=e,this.index=n,this.buffer=t.buffer,0==this.index&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new uu(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;null!=t&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new uu(this.stack,this.pos,this.index)}}function du(t,e=Uint16Array){if("string"!=typeof t)return t;let n=null;for(let i=0,r=0;i<t.length;){let o=0;for(;;){let e=t.charCodeAt(i++),n=!1;if(126==e){o=65535;break}e>=92&&e--,e>=34&&e--;let r=e-32;if(r>=46&&(r-=46,n=!0),o+=r,n)break;o*=46}n?n[r++]=o:n=new e(o)}return n}class fu{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const pu=new fu;class gu{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=pu,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let n=this.range,i=this.rangeIndex,r=this.pos+t;for(;r<n.from;){if(!i)return null;let t=this.ranges[--i];r-=n.from-t.to,n=t}for(;e<0?r>n.to:r>=n.to;){if(i==this.ranges.length-1)return null;let t=this.ranges[++i];r+=t.from-n.to,n=t}return r}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e,n,i=this.chunkOff+t;if(i>=0&&i<this.chunk.length)e=this.pos+t,n=this.chunk.charCodeAt(i);else{let i=this.resolveOffset(t,1);if(null==i)return-1;if(e=i,e>=this.chunk2Pos&&e<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(e-this.chunk2Pos);else{let t=this.rangeIndex,i=this.range;for(;i.to<=e;)i=this.ranges[++t];this.chunk2=this.input.chunk(this.chunk2Pos=e),e+this.chunk2.length>i.to&&(this.chunk2=this.chunk2.slice(0,i.to-e)),n=this.chunk2.charCodeAt(0)}}return e>=this.token.lookAhead&&(this.token.lookAhead=e+1),n}acceptToken(t,e=0){let n=e?this.resolveOffset(e,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=n}acceptTokenTo(t,e){this.token.value=t,this.token.end=e}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=pu,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let n="";for(let i of this.ranges){if(i.from>=e)break;i.to>t&&(n+=this.input.read(Math.max(i.from,t),Math.min(i.to,e)))}return n}}class mu{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:n}=e.p;yu(this.data,t,e,this.id,n.data,n.tokenPrecTable)}}mu.prototype.contextual=mu.prototype.fallback=mu.prototype.extend=!1;class vu{constructor(t,e,n){this.precTable=e,this.elseToken=n,this.data="string"==typeof t?du(t):t}token(t,e){let n=t.pos,i=0;for(;;){let n=t.next<0,r=t.resolveOffset(1,1);if(yu(this.data,t,e,0,this.data,this.precTable),t.token.value>-1)break;if(null==this.elseToken)return;if(n||i++,null==r)break;t.reset(r,t.token)}i&&(t.reset(n,t.token),t.acceptToken(this.elseToken,i))}}vu.prototype.contextual=mu.prototype.fallback=mu.prototype.extend=!1;class bu{constructor(t,e={}){this.token=t,this.contextual=!!e.contextual,this.fallback=!!e.fallback,this.extend=!!e.extend}}function yu(t,e,n,i,r,o){let s=0,a=1<<i,{dialect:l}=n.p.parser;t:for(;0!=(a&t[s]);){let n=t[s+1];for(let i=s+3;i<n;i+=2)if((t[i+1]&a)>0){let n=t[i];if(l.allows(n)&&(-1==e.token.value||e.token.value==n||Ou(n,e.token.value,r,o))){e.acceptToken(n);break}}let i=e.next,c=0,h=t[s+2];if(!(e.next<0&&h>c&&65535==t[n+3*h-3])){for(;c<h;){let r=c+h>>1,o=n+r+(r<<1),a=t[o],l=t[o+1]||65536;if(i<a)h=r;else{if(!(i>=l)){s=t[o+2],e.advance();continue t}c=r+1}}break}s=t[n+3*h-1]}}function wu(t,e,n){for(let i,r=e;65535!=(i=t[r]);r++)if(i==n)return r-e;return-1}function Ou(t,e,n,i){let r=wu(n,i,e);return r<0||wu(n,i,t)<r}const Su="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let xu=null;function ku(t,e,n){let i=t.cursor(Ih.IncludeAnonymous);for(i.moveTo(e);;)if(!(n<0?i.childBefore(e):i.childAfter(e)))for(;;){if((n<0?i.to<e:i.from>e)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(t.length,Math.max(i.from+1,e+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:t.length}}class Cu{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?ku(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?ku(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let n=this.trees[e],i=this.index[e];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=n.children[i],o=this.start[e]+n.positions[i];if(o>t)return this.nextStart=o,null;if(r instanceof zh){if(o==t){if(o<this.safeFrom)return null;let t=o+r.length;if(t<=this.safeTo){let e=r.prop(Dh.lookAhead);if(!e||t+e<this.fragment.to)return r}}this.index[e]++,o+r.length>=Math.max(this.safeFrom,t)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[e]++,this.nextStart=o+r.length}}}class Au{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map((t=>new fu))}getActions(t){let e=0,n=null,{parser:i}=t.p,{tokenizers:r}=i,o=i.stateSlot(t.state,3),s=t.curContext?t.curContext.hash:0,a=0;for(let i=0;i<r.length;i++){if(!(1<<i&o))continue;let l=r[i],c=this.tokens[i];if((!n||l.fallback)&&((l.contextual||c.start!=t.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,l,t),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let i=e;if(c.extended>-1&&(e=this.addActions(t,c.extended,c.end,e)),e=this.addActions(t,c.value,c.end,e),!l.extend&&(n=c,e>i))break}}for(;this.actions.length>e;)this.actions.pop();return a&&t.setLookAhead(a),n||t.pos!=this.stream.end||(n=new fu,n.value=t.p.parser.eofTerm,n.start=n.end=t.pos,e=this.addActions(t,n.value,n.end,e)),this.mainToken=n,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new fu,{pos:n,p:i}=t;return e.start=n,e.end=Math.min(n+1,i.stream.end),e.value=n==i.stream.end?i.parser.eofTerm:0,e}updateCachedToken(t,e,n){let i=this.stream.clipPos(n.pos);if(e.token(this.stream.reset(i,t),n),t.value>-1){let{parser:e}=n.p;for(let i=0;i<e.specialized.length;i++)if(e.specialized[i]==t.value){let r=e.specializers[i](this.stream.read(t.start,t.end),n);if(r>=0&&n.p.parser.dialect.allows(r>>1)){1&r?t.extended=r>>1:t.value=r>>1;break}}}else t.value=0,t.end=this.stream.clipPos(i+1)}putAction(t,e,n,i){for(let e=0;e<i;e+=3)if(this.actions[e]==t)return i;return this.actions[i++]=t,this.actions[i++]=e,this.actions[i++]=n,i}addActions(t,e,n,i){let{state:r}=t,{parser:o}=t.p,{data:s}=o;for(let t=0;t<2;t++)for(let a=o.stateSlot(r,t?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==i&&2==s[a+1]&&(i=this.putAction(Du(s,a+2),e,n,i));break}a=Du(s,a+2)}s[a]==e&&(i=this.putAction(Du(s,a+1),e,n,i))}return i}}class Mu{constructor(t,e,n,i){this.parser=t,this.input=e,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new gu(e,i),this.tokens=new Au(t,this.stream),this.topTerm=t.top[1];let{from:r}=i[0];this.stacks=[lu.start(this,t.top[0],r)],this.fragments=n.length&&this.stream.end-r>4*t.bufferLength?new Cu(n,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t,e,n=this.stacks,i=this.minStackPos,r=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[t]=n;for(;t.forceReduce()&&t.stack.length&&t.stack[t.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<n.length;o++){let s=n[o];for(;;){if(this.tokens.mainToken=null,s.pos>i)r.push(s);else{if(this.advanceStack(s,r,n))continue;{t||(t=[],e=[]),t.push(s);let n=this.tokens.getMainToken(s);e.push(n.value,n.end)}}break}}if(!r.length){let e=t&&function(t){let e=null;for(let n of t){let t=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=t&&n.pos>t)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}(t);if(e)return Su&&console.log("Finish with "+this.stackID(e)),this.stackToTree(e);if(this.parser.strict)throw Su&&t&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&t){let n=null!=this.stoppedAt&&t[0].pos>this.stoppedAt?t[0]:this.runRecovery(t,e,r);if(n)return Su&&console.log("Force-finish "+this.stackID(n)),this.stackToTree(n.forceAll())}if(this.recovering){let t=1==this.recovering?1:3*this.recovering;if(r.length>t)for(r.sort(((t,e)=>e.score-t.score));r.length>t;)r.pop();r.some((t=>t.reducePos>i))&&this.recovering--}else if(r.length>1){t:for(let t=0;t<r.length-1;t++){let e=r[t];for(let n=t+1;n<r.length;n++){let i=r[n];if(e.sameState(i)||e.buffer.length>500&&i.buffer.length>500){if(!((e.score-i.score||e.buffer.length-i.buffer.length)>0)){r.splice(t--,1);continue t}r.splice(n--,1)}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let t=1;t<r.length;t++)r[t].pos<this.minStackPos&&(this.minStackPos=r[t].pos);return null}stopAt(t){if(null!=this.stoppedAt&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,n){let i=t.pos,{parser:r}=this,o=Su?this.stackID(t)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let e=t.curContext&&t.curContext.tracker.strict,n=e?t.curContext.hash:0;for(let s=this.fragments.nodeAt(i);s;){let i=this.parser.nodeSet.types[s.type.id]==s.type?r.getGoto(t.state,s.type.id):-1;if(i>-1&&s.length&&(!e||(s.prop(Dh.contextHash)||0)==n))return t.useNode(s,i),Su&&console.log(o+this.stackID(t)+` (via reuse of ${r.getName(s.type.id)})`),!0;if(!(s instanceof zh)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof zh&&0==s.positions[0]))break;s=a}}let s=r.stateSlot(t.state,4);if(s>0)return t.reduce(s),Su&&console.log(o+this.stackID(t)+` (via always-reduce ${r.getName(65535&s)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let a=this.tokens.getActions(t);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],h=a[s++],u=s==a.length||!n,d=u?t:t.split(),f=this.tokens.mainToken;if(d.apply(l,c,f?f.start:d.pos,h),Su&&console.log(o+this.stackID(d)+` (via ${65536&l?`reduce of ${r.getName(65535&l)}`:"shift"} for ${r.getName(c)} @ ${i}${d==t?"":", split"})`),u)return!0;d.pos>i?e.push(d):n.push(d)}return!1}advanceFully(t,e){let n=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>n)return Eu(t,e),!0}}runRecovery(t,e,n){let i=null,r=!1;for(let o=0;o<t.length;o++){let s=t[o],a=e[o<<1],l=e[1+(o<<1)],c=Su?this.stackID(s)+" -> ":"";if(s.deadEnd){if(r)continue;if(r=!0,s.restart(),Su&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))continue}let h=s.split(),u=c;for(let t=0;h.forceReduce()&&t<10&&(Su&&console.log(u+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,n));t++)Su&&(u=this.stackID(h)+" -> ");for(let t of s.recoverByInsert(a))Su&&console.log(c+this.stackID(t)+" (via recover-insert)"),this.advanceFully(t,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),Su&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),Eu(s,n)):(!i||i.score<s.score)&&(i=s)}return i}stackToTree(t){return t.close(),zh.build({buffer:uu.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(xu||(xu=new WeakMap)).get(t);return e||xu.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function Eu(t,e){for(let n=0;n<e.length;n++){let i=e[n];if(i.pos==t.pos&&i.sameState(t))return void(e[n].score<t.score&&(e[n]=t))}e.push(t)}class Pu{constructor(t,e,n){this.source=t,this.flags=e,this.disabled=n}allows(t){return!this.disabled||0==this.disabled[t]}}const Tu=t=>t;class $u extends su{constructor(t){if(super(),this.wrappers=[],14!=t.version)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let n=0;n<t.repeatNodeCount;n++)e.push("");let n=Object.keys(t.topRules).map((e=>t.topRules[e][1])),i=[];for(let t=0;t<e.length;t++)i.push([]);function r(t,e,n){i[t].push([e,e.deserialize(String(n))])}if(t.nodeProps)for(let e of t.nodeProps){let t=e[0];"string"==typeof t&&(t=Dh[t]);for(let n=1;n<e.length;){let i=e[n++];if(i>=0)r(i,t,e[n++]);else{let o=e[n+-i];for(let s=-i;s>0;s--)r(e[n++],t,o);n++}}}this.nodeSet=new Lh(e.map(((e,r)=>Nh.define({name:r>=this.minRepeatTerm?void 0:e,id:r,props:i[r],top:n.indexOf(r)>-1,error:0==r,skipped:t.skippedNodes&&t.skippedNodes.indexOf(r)>-1})))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=Ph;let o=du(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let t=0;t<this.specializerSpecs.length;t++)this.specialized[t]=this.specializerSpecs[t].term;this.specializers=this.specializerSpecs.map(Ru),this.states=du(t.states,Uint32Array),this.data=du(t.stateData),this.goto=du(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map((t=>"number"==typeof t?new mu(o,t):t)),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,n){let i=new Mu(this,t,e,n);for(let r of this.wrappers)i=r(i,t,e,n);return i}getGoto(t,e,n=!1){let i=this.goto;if(e>=i[0])return-1;for(let r=i[e+1];;){let e=i[r++],o=1&e,s=i[r++];if(o&&n)return s;for(let n=r+(e>>1);r<n;r++)if(i[r]==t)return s;if(o)return-1}}hasAction(t,e){let n=this.data;for(let i=0;i<2;i++)for(let r,o=this.stateSlot(t,i?2:1);;o+=3){if(65535==(r=n[o])){if(1!=n[o+1]){if(2==n[o+1])return Du(n,o+2);break}r=n[o=Du(n,o+2)]}if(r==e||0==r)return Du(n,o+1)}return 0}stateSlot(t,e){return this.states[6*t+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,(t=>t==e||null))}allActions(t,e){let n=this.stateSlot(t,4),i=n?e(n):void 0;for(let n=this.stateSlot(t,1);null==i;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=Du(this.data,n+2)}i=e(Du(this.data,n+1))}return i}nextStates(t){let e=[];for(let n=this.stateSlot(t,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=Du(this.data,n+2)}if(!(1&this.data[n+2])){let t=this.data[n+1];e.some(((e,n)=>1&n&&e==t))||e.push(this.data[n],t)}}return e}configure(t){let e=Object.assign(Object.create($u.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let n=this.topRules[t.top];if(!n)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=n}return t.tokenizers&&(e.tokenizers=this.tokenizers.map((e=>{let n=t.tokenizers.find((t=>t.from==e));return n?n.to:e}))),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map(((n,i)=>{let r=t.specializers.find((t=>t.from==n.external));if(!r)return n;let o=Object.assign(Object.assign({},n),{external:r.to});return e.specializers[i]=Ru(o),o}))),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),null!=t.strict&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),null!=t.bufferLength&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return null==e?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),n=e.map((()=>!1));if(t)for(let i of t.split(" ")){let t=e.indexOf(i);t>=0&&(n[t]=!0)}let i=null;for(let t=0;t<e.length;t++)if(!n[t])for(let n,r=this.dialects[e[t]];65535!=(n=this.data[r++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[n]=1;return new Pu(t,n,i)}static deserialize(t){return new $u(t)}}function Du(t,e){return t[e]|t[e+1]<<16}function Ru(t){if(t.external){let e=t.extend?1:0;return(n,i)=>t.external(n,i)<<1|e}return t.get}let Bu=0;class Nu{constructor(t,e,n,i){this.name=t,this.set=e,this.base=n,this.modified=i,this.id=Bu++}toString(){let{name:t}=this;for(let e of this.modified)e.name&&(t=`${e.name}(${t})`);return t}static define(t,e){let n="string"==typeof t?t:"?";if(t instanceof Nu&&(e=t),null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let i=new Nu(n,[],null,[]);if(i.set.push(i),e)for(let t of e.set)i.set.push(t);return i}static defineModifier(t){let e=new ju(t);return t=>t.modified.indexOf(e)>-1?t:ju.get(t.base||t,t.modified.concat(e).sort(((t,e)=>t.id-e.id)))}}let Lu=0;class ju{constructor(t){this.name=t,this.instances=[],this.id=Lu++}static get(t,e){if(!e.length)return t;let n=e[0].instances.find((n=>{return n.base==t&&(i=e,r=n.modified,i.length==r.length&&i.every(((t,e)=>t==r[e])));var i,r}));if(n)return n;let i=[],r=new Nu(t.name,i,t,e);for(let t of e)t.instances.push(r);let o=function(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort(((t,e)=>e.length-t.length))}(e);for(let e of t.set)if(!e.modified.length)for(let t of o)i.push(ju.get(e,t));return r}}function _u(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let t of n.split(" "))if(t){let n=[],r=2,o=t;for(let e=0;;){if("..."==o&&e>0&&e+3==t.length){r=1;break}let i=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!i)throw new RangeError("Invalid path: "+t);if(n.push("*"==i[0]?"":'"'==i[0][0]?JSON.parse(i[0]):i[0]),e+=i[0].length,e==t.length)break;let s=t[e++];if(e==t.length&&"!"==s){r=0;break}if("/"!=s)throw new RangeError("Invalid path: "+t);o=t.slice(e)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+t);let l=new zu(i,r,s>0?n.slice(0,s):null);e[a]=l.sort(e[a])}}return Iu.add(e)}const Iu=new Dh;class zu{constructor(t,e,n,i){this.tags=t,this.mode=e,this.context=n,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function Qu(t,e){let n=Object.create(null);for(let e of t)if(Array.isArray(e.tag))for(let t of e.tag)n[t.id]=e.class;else n[e.tag.id]=e.class;let{scope:i,all:r=null}=e||{};return{style:t=>{let e=r;for(let i of t)for(let t of i.set){let i=n[t.id];if(i){e=e?e+" "+i:i;break}}return e},scope:i}}function Hu(t,e,n,i=0,r=t.length){let o=new Vu(i,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),i,r,"",o.highlighters),o.flush(r)}zu.empty=new zu([],2,null);class Vu{constructor(t,e,n){this.at=t,this.highlighters=e,this.span=n,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,n,i,r){let{type:o,from:s,to:a}=t;if(s>=n||a<=e)return;o.isTop&&(r=this.highlighters.filter((t=>!t.scope||t.scope(o))));let l=i,c=function(t){let e=t.type.prop(Iu);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}(t)||zu.empty,h=function(t,e){let n=null;for(let i of t){let t=i.style(e);t&&(n=n?n+" "+t:t)}return n}(r,c.tags);if(h&&(l&&(l+=" "),l+=h,1==c.mode&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(e,s),l),c.opaque)return;let u=t.tree&&t.tree.prop(Dh.mounted);if(u&&u.overlay){let o=t.node.enter(u.overlay[0].from+s,1),c=this.highlighters.filter((t=>!t.scope||t.scope(u.tree.type))),h=t.firstChild();for(let d=0,f=s;;d++){let p=d<u.overlay.length?u.overlay[d]:null,g=p?p.from+s:a,m=Math.max(e,f),v=Math.min(n,g);if(m<v&&h)for(;t.from<v&&(this.highlightRange(t,m,v,i,r),this.startSpan(Math.min(v,t.to),l),!(t.to>=g)&&t.nextSibling()););if(!p||g>n)break;f=p.to+s,f>e&&(this.highlightRange(o.cursor(),Math.max(e,p.from+s),Math.min(n,f),"",c),this.startSpan(Math.min(n,f),l))}h&&t.parent()}else if(t.firstChild()){u&&(i="");do{if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,i,r),this.startSpan(Math.min(n,t.to),l)}}while(t.nextSibling());t.parent()}}}const Wu=Nu.define,Fu=Wu(),qu=Wu(),Xu=Wu(qu),Ku=Wu(qu),Zu=Wu(),Yu=Wu(Zu),Gu=Wu(Zu),Uu=Wu(),Ju=Wu(Uu),td=Wu(),ed=Wu(),nd=Wu(),id=Wu(nd),rd=Wu(),od={comment:Fu,lineComment:Wu(Fu),blockComment:Wu(Fu),docComment:Wu(Fu),name:qu,variableName:Wu(qu),typeName:Xu,tagName:Wu(Xu),propertyName:Ku,attributeName:Wu(Ku),className:Wu(qu),labelName:Wu(qu),namespace:Wu(qu),macroName:Wu(qu),literal:Zu,string:Yu,docString:Wu(Yu),character:Wu(Yu),attributeValue:Wu(Yu),number:Gu,integer:Wu(Gu),float:Wu(Gu),bool:Wu(Zu),regexp:Wu(Zu),escape:Wu(Zu),color:Wu(Zu),url:Wu(Zu),keyword:td,self:Wu(td),null:Wu(td),atom:Wu(td),unit:Wu(td),modifier:Wu(td),operatorKeyword:Wu(td),controlKeyword:Wu(td),definitionKeyword:Wu(td),moduleKeyword:Wu(td),operator:ed,derefOperator:Wu(ed),arithmeticOperator:Wu(ed),logicOperator:Wu(ed),bitwiseOperator:Wu(ed),compareOperator:Wu(ed),updateOperator:Wu(ed),definitionOperator:Wu(ed),typeOperator:Wu(ed),controlOperator:Wu(ed),punctuation:nd,separator:Wu(nd),bracket:id,angleBracket:Wu(id),squareBracket:Wu(id),paren:Wu(id),brace:Wu(id),content:Uu,heading:Ju,heading1:Wu(Ju),heading2:Wu(Ju),heading3:Wu(Ju),heading4:Wu(Ju),heading5:Wu(Ju),heading6:Wu(Ju),contentSeparator:Wu(Uu),list:Wu(Uu),quote:Wu(Uu),emphasis:Wu(Uu),strong:Wu(Uu),link:Wu(Uu),monospace:Wu(Uu),strikethrough:Wu(Uu),inserted:Wu(),deleted:Wu(),changed:Wu(),invalid:Wu(),meta:rd,documentMeta:Wu(rd),annotation:Wu(rd),processingInstruction:Wu(rd),definition:Nu.defineModifier("definition"),constant:Nu.defineModifier("constant"),function:Nu.defineModifier("function"),standard:Nu.defineModifier("standard"),local:Nu.defineModifier("local"),special:Nu.defineModifier("special")};for(let t in od){let e=od[t];e instanceof Nu&&(e.name=t)}Qu([{tag:od.link,class:"tok-link"},{tag:od.heading,class:"tok-heading"},{tag:od.emphasis,class:"tok-emphasis"},{tag:od.strong,class:"tok-strong"},{tag:od.keyword,class:"tok-keyword"},{tag:od.atom,class:"tok-atom"},{tag:od.bool,class:"tok-bool"},{tag:od.url,class:"tok-url"},{tag:od.labelName,class:"tok-labelName"},{tag:od.inserted,class:"tok-inserted"},{tag:od.deleted,class:"tok-deleted"},{tag:od.literal,class:"tok-literal"},{tag:od.string,class:"tok-string"},{tag:od.number,class:"tok-number"},{tag:[od.regexp,od.escape,od.special(od.string)],class:"tok-string2"},{tag:od.variableName,class:"tok-variableName"},{tag:od.local(od.variableName),class:"tok-variableName tok-local"},{tag:od.definition(od.variableName),class:"tok-variableName tok-definition"},{tag:od.special(od.variableName),class:"tok-variableName2"},{tag:od.definition(od.propertyName),class:"tok-propertyName tok-definition"},{tag:od.typeName,class:"tok-typeName"},{tag:od.namespace,class:"tok-namespace"},{tag:od.className,class:"tok-className"},{tag:od.macroName,class:"tok-macroName"},{tag:od.propertyName,class:"tok-propertyName"},{tag:od.operator,class:"tok-operator"},{tag:od.comment,class:"tok-comment"},{tag:od.meta,class:"tok-meta"},{tag:od.invalid,class:"tok-invalid"},{tag:od.punctuation,class:"tok-punctuation"}]);const sd=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],ad=new class{constructor(t){this.start=t.start,this.shift=t.shift||Tu,this.reduce=t.reduce||Tu,this.reuse=t.reuse||Tu,this.hash=t.hash||(()=>0),this.strict=!1!==t.strict}}({start:!1,shift(t,e){return 5==e||6==e||319==e?t:320==e},strict:!1}),ld=new bu(((t,e)=>{let{next:n}=t;(125==n||-1==n||e.context)&&t.acceptToken(317)}),{contextual:!0,fallback:!0}),cd=new bu(((t,e)=>{let n,{next:i}=t;sd.indexOf(i)>-1||(47!=i||47!=(n=t.peek(1))&&42!=n)&&(125==i||59==i||-1==i||e.context||t.acceptToken(315))}),{contextual:!0}),hd=new bu(((t,e)=>{91!=t.next||e.context||t.acceptToken(316)}),{contextual:!0}),ud=new bu(((t,e)=>{let{next:n}=t;if(43==n||45==n){if(t.advance(),n==t.next){t.advance();let n=!e.context&&e.canShift(1);t.acceptToken(n?1:2)}}else 63==n&&46==t.peek(1)&&(t.advance(),t.advance(),(t.next<48||t.next>57)&&t.acceptToken(3))}),{contextual:!0});function dd(t,e){return t>=65&&t<=90||t>=97&&t<=122||95==t||t>=192||!e&&t>=48&&t<=57}const fd=new bu(((t,e)=>{if(60!=t.next||!e.dialectEnabled(0))return;if(t.advance(),47==t.next)return;let n=0;for(;sd.indexOf(t.next)>-1;)t.advance(),n++;if(dd(t.next,!0)){for(t.advance(),n++;dd(t.next,!1);)t.advance(),n++;for(;sd.indexOf(t.next)>-1;)t.advance(),n++;if(44==t.next)return;for(let e=0;;e++){if(7==e){if(!dd(t.next,!0))return;break}if(t.next!="extends".charCodeAt(e))break;t.advance(),n++}}t.acceptToken(4,-n)})),pd=_u({"get set async static":od.modifier,"for while do if else switch try catch finally return throw break continue default case":od.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":od.operatorKeyword,"let var const using function class extends":od.definitionKeyword,"import export from":od.moduleKeyword,"with debugger new":od.keyword,TemplateString:od.special(od.string),super:od.atom,BooleanLiteral:od.bool,this:od.self,null:od.null,Star:od.modifier,VariableName:od.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":od.function(od.variableName),VariableDefinition:od.definition(od.variableName),Label:od.labelName,PropertyName:od.propertyName,PrivatePropertyName:od.special(od.propertyName),"CallExpression/MemberExpression/PropertyName":od.function(od.propertyName),"FunctionDeclaration/VariableDefinition":od.function(od.definition(od.variableName)),"ClassDeclaration/VariableDefinition":od.definition(od.className),"NewExpression/VariableName":od.className,PropertyDefinition:od.definition(od.propertyName),PrivatePropertyDefinition:od.definition(od.special(od.propertyName)),UpdateOp:od.updateOperator,"LineComment Hashbang":od.lineComment,BlockComment:od.blockComment,Number:od.number,String:od.string,Escape:od.escape,ArithOp:od.arithmeticOperator,LogicOp:od.logicOperator,BitOp:od.bitwiseOperator,CompareOp:od.compareOperator,RegExp:od.regexp,Equals:od.definitionOperator,Arrow:od.function(od.punctuation),": Spread":od.punctuation,"( )":od.paren,"[ ]":od.squareBracket,"{ }":od.brace,"InterpolationStart InterpolationEnd":od.special(od.brace),".":od.derefOperator,", ;":od.separator,"@":od.meta,TypeName:od.typeName,TypeDefinition:od.definition(od.typeName),"type enum interface implements namespace module declare":od.definitionKeyword,"abstract global Privacy readonly override":od.modifier,"is keyof unique infer asserts":od.operatorKeyword,JSXAttributeValue:od.attributeValue,JSXText:od.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":od.angleBracket,"JSXIdentifier JSXNameSpacedName":od.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":od.attributeName,"JSXBuiltin/JSXIdentifier":od.standard(od.tagName)}),gd={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,for:474,of:483,while:486,with:490,do:494,if:498,else:500,switch:504,case:510,try:516,catch:520,finally:524,return:528,throw:532,break:536,continue:540,debugger:544},md={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},vd={__proto__:null,"<":193},bd=$u.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Ik'#IkO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JqO6[Q!0MxO'#JrO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO7eQMhO'#F|O9[Q`O'#F{OOQ!0Lf'#Jr'#JrOOQ!0Lb'#Jq'#JqO9aQ`O'#GwOOQ['#K^'#K^O9lQ`O'#IXO9qQ!0LrO'#IYOOQ['#J_'#J_OOQ['#I^'#I^Q`QlOOQ`QlOOO9yQ!L^O'#DvO:QQlO'#EOO:XQlO'#EQO9gQ`O'#GsO:`QMhO'#CoO:nQ`O'#EnO:yQ`O'#EyO;OQMhO'#FeO;mQ`O'#GsOOQO'#K_'#K_O;rQ`O'#K_O<QQ`O'#G{O<QQ`O'#G|O<QQ`O'#HOO9gQ`O'#HRO<wQ`O'#HUO>`Q`O'#CeO>pQ`O'#HbO>xQ`O'#HhO>xQ`O'#HjO`QlO'#HlO>xQ`O'#HnO>xQ`O'#HqO>}Q`O'#HwO?SQ!0LsO'#H}O%[QlO'#IPO?_Q!0LsO'#IRO?jQ!0LsO'#ITO9qQ!0LrO'#IVO?uQ!0MxO'#CiO@wQpO'#DlQOQ`OOO%[QlO'#EQOA_Q`O'#ETO:`QMhO'#EnOAjQ`O'#EnOAuQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Ju'#JuO%[QlO'#JuOOQO'#Jx'#JxOOQO'#Ig'#IgOBuQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J|'#J|OCqQ!0MSO'#EgOC{QpO'#EWOOQO'#Jw'#JwODaQpO'#JxOEnQpO'#EWOC{QpO'#EgPE{O&2DjO'#CbPOOO)CD|)CD|OOOO'#I_'#I_OFWO#tO,59UOOQ!0Lh,59U,59UOOOO'#I`'#I`OFfO&jO,59UOFtQ!L^O'#DcOOOO'#Ib'#IbOF{O#@ItO,59{OOQ!0Lf,59{,59{OGZQlO'#IcOGnQ`O'#JsOImQ!fO'#JsO+}QlO'#JsOItQ`O,5:ROJ[Q`O'#EpOJiQ`O'#KSOJtQ`O'#KROJtQ`O'#KROJ|Q`O,5;^OKRQ`O'#KQOOQ!0Ln,5:^,5:^OKYQlO,5:^OMWQ!0MxO,5:fOMwQ`O,5:nONbQ!0LrO'#KPONiQ`O'#KOO9aQ`O'#KOON}Q`O'#KOO! VQ`O,5;]O! [Q`O'#KOO!#aQ!fO'#JrOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$PQ!fO,5:sOOQS'#Jy'#JyOOQO-E<i-E<iO9gQ`O,5=_O!$gQ`O,5=_O!$lQlO,5;ZO!&oQMhO'#EkO!(YQ`O,5;ZO!(_QlO'#DyO!(iQpO,5;dO!(qQpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)PQlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IoO!+SQ!0LrO,5<iO%[QlO,5;eO!&oQMhO,5;eO!+qQMhO,5;eO!-cQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-jQ,UO'#FjO!.gQ,UO'#KWO!.RQ,UO'#KWO!.nQ,UO'#KWOOQO'#KW'#KWO!/SQ,UO,5<SOOOW,5<`,5<`O!/eQlO'#FvOOOW'#In'#InO7VO7dO,5<QO!/lQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0]Q$IUO'#CyOOQ!0Lh'#C}'#C}O!0pO#@ItO'#DRO!1^QMjO,5<eO!1eQ`O,5<hO!3QQ(CWO'#GXO!3_Q`O'#GYO!3dQ`O'#GYO!5SQ(CWO'#G^O!6XQpO'#GbOOQO'#Gn'#GnO!+xQMhO'#GmOOQO'#Gp'#GpO!+xQMhO'#GoO!6zQ$IUO'#JkOOQ!0Lh'#Jk'#JkO!7UQ`O'#JjO!7dQ`O'#JiO!7lQ`O'#CuOOQ!0Lh'#C{'#C{O!7}Q`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO1SQ`O'#DZO!+xQMhO'#GPO!+xQMhO'#GRO!8SQ`O'#GTO!8XQ`O'#GUO!3dQ`O'#G[O!+xQMhO'#GaO<QQ`O'#JjO!8^Q`O'#EqO!8{Q`O,5<gOOQ!0Lb'#Cr'#CrO!9TQ`O'#ErO!9}QpO'#EsOOQ!0Lb'#KQ'#KQO!:UQ!0LrO'#K`O9qQ!0LrO,5=cO`QlO,5>sOOQ['#Jg'#JgOOQ[,5>t,5>tOOQ[-E<[-E<[O!<TQ!0MxO,5:bO!9xQpO,5:`O!>nQ!0MxO,5:jO%[QlO,5:jO!AUQ!0MxO,5:lOOQO,5@y,5@yO!AuQMhO,5=_O!BTQ!0LrO'#JhO9[Q`O'#JhO!BfQ!0LrO,59ZO!BqQpO,59ZO!ByQMhO,59ZO:`QMhO,59ZO!CUQ`O,5;ZO!C^Q`O'#HaO!CrQ`O'#KcO%[QlO,5;}O!9xQpO,5<PO!CzQ`O,5=zO!DPQ`O,5=zO!DUQ`O,5=zO9qQ!0LrO,5=zO<QQ`O,5=jOOQO'#Cy'#CyO!DdQpO,5=gO!DlQMhO,5=hO!DwQ`O,5=jO!D|Q!bO,5=mO!EUQ`O'#K_O>}Q`O'#HWO9gQ`O'#HYO!EZQ`O'#HYO:`QMhO'#H[O!E`Q`O'#H[OOQ[,5=p,5=pO!EeQ`O'#H]O!EvQ`O'#CoO!E{Q`O,59PO!FVQ`O,59PO!H[QlO,59POOQ[,59P,59PO!HlQ!0LrO,59PO%[QlO,59PO!JwQlO'#HdOOQ['#He'#HeOOQ['#Hf'#HfO`QlO,5=|O!K_Q`O,5=|O`QlO,5>SO`QlO,5>UO!KdQ`O,5>WO`QlO,5>YO!KiQ`O,5>]O!KnQlO,5>cOOQ[,5>i,5>iO%[QlO,5>iO9qQ!0LrO,5>kOOQ[,5>m,5>mO# xQ`O,5>mOOQ[,5>o,5>oO# xQ`O,5>oOOQ[,5>q,5>qO#!fQpO'#D_O%[QlO'#JuO##XQpO'#JuO##cQpO'#DmO##tQpO'#DmO#&VQlO'#DmO#&^Q`O'#JtO#&fQ`O,5:WO#&kQ`O'#EtO#&yQ`O'#KTO#'RQ`O,5;_O#'WQpO'#DmO#'eQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#'lQ`O,5:oO>}Q`O,5;YO!BqQpO,5;YO!ByQMhO,5;YO:`QMhO,5;YO#'tQ`O,5@aO#'yQ07dO,5:sOOQO-E<e-E<eO#)PQ!0MSO,5;ROC{QpO,5:rO#)ZQpO,5:rOC{QpO,5;RO!BfQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#)hQ!0LrO,5;RO#)sQ!0LrO,5;RO!BqQpO,5:rOOQO,5;X,5;XO#*RQ!0LrO,5;RPOOO'#I]'#I]P#*gO&2DjO,58|POOO,58|,58|OOOO-E<]-E<]OOQ!0Lh1G.p1G.pOOOO-E<^-E<^OOOO,59},59}O#*rQ!bO,59}OOOO-E<`-E<`OOQ!0Lf1G/g1G/gO#*wQ!fO,5>}O+}QlO,5>}OOQO,5?T,5?TO#+RQlO'#IcOOQO-E<a-E<aO#+`Q`O,5@_O#+hQ!fO,5@_O#+oQ`O,5@mOOQ!0Lf1G/m1G/mO%[QlO,5@nO#+wQ`O'#IiOOQO-E<g-E<gO#+oQ`O,5@mOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@kO#,]Q!0LrO,5@kO#,nQ!0LrO,5@kO#,uQ`O,5@jO9aQ`O,5@jO#,}Q`O,5@jO#-]Q`O'#IlO#,uQ`O,5@jOOQ!0Lb1G0w1G0wO!(iQpO,5:uO!(tQpO,5:uOOQS,5:w,5:wO#-}QdO,5:wO#.VQMhO1G2yO9gQ`O1G2yOOQ!0Lf1G0u1G0uO#.eQ!0MxO1G0uO#/jQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0WQ!0MzO'#JkO!$lQlO1G0uO#2cQ!fO'#JvO%[QlO'#JvO#2mQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#2rQ`O1G1OO#5WQ!0MxO1G1PO#5_Q!0MxO1G1PO#7uQ!0MxO1G1PO#7|Q!0MxO1G1PO#:dQ!0MxO1G1PO#<zQ!0MxO1G1PO#=RQ!0MxO1G1PO#=YQ!0MxO1G1PO#?pQ!0MxO1G1PO#?wQ!0MxO1G1PO#BUQ?MtO'#CiO#DPQ?MtO1G1`O#DWQ?MtO'#JrO#DkQ!0MxO,5?ZOOQ!0Lb-E<m-E<mO#FxQ!0MxO1G1PO#GuQ!0MzO1G1POOQ!0Lf1G1P1G1PO#HxQMjO'#J{O#ISQ`O,5:xO#IXQ!0MxO1G1cO#I{Q,UO,5<WO#JTQ,UO,5<XO#J]Q,UO'#FoO#JtQ`O'#FnOOQO'#KX'#KXOOQO'#Im'#ImO#JyQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#K[Q?MtO'#JqO#KfQ`O,5<bO!)PQlO,5<bOOOW-E<l-E<lOOQ!0Lf1G1l1G1lO#KkQpO'#KWOOQ!0Lf,5<d,5<dO#KsQpO,5<dO#KxQMhO'#DTOOOO'#Ia'#IaO#LPO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8XQ`O'#IqO#L[Q`O,5<zOOQ!0Lh,5<w,5<wO!+xQMhO'#ItO#LxQMjO,5=XO!+xQMhO'#IvO#MkQMjO,5=ZO!&oQMhO,5=]OOQO1G2S1G2SO#MuQ!dO'#CrO#NYQ(CWO'#ErO$ _QpO'#GbO$ uQ!dO,5<sO$ |Q`O'#KZO9aQ`O'#KZO$![Q`O,5<uO!+xQMhO,5<tO$!aQ`O'#GZO$!rQ`O,5<tO$!wQ!dO'#GWO$#UQ!dO'#K[O$#`Q`O'#K[O!&oQMhO'#K[O$#eQ`O,5<xO$#jQlO'#JuO$#tQpO'#GcO##tQpO'#GcO$$VQ`O'#GgO!3dQ`O'#GkO$$[Q!0LrO'#IsO$$gQpO,5<|OOQ!0Lp,5<|,5<|O$$nQpO'#GcO$${QpO'#GdO$%^QpO'#GdO$%cQMjO,5=XO$%sQMjO,5=ZOOQ!0Lh,5=^,5=^O!+xQMhO,5@UO!+xQMhO,5@UO$&TQ`O'#IxO$&iQ`O,5@TO$&qQ`O,59aOOQ!0Lh,59i,59iO$'hQ$IYO,59uOOQ!0Lh'#Jo'#JoO$(ZQMjO,5<kO$(|QMjO,5<mO@oQ`O,5<oOOQ!0Lh,5<p,5<pO$)WQ`O,5<vO$)]QMjO,5<{O$)mQ`O,5@UO$){Q`O'#KOO!$lQlO1G2RO$*QQ`O1G2RO9aQ`O'#KRO9aQ`O'#EtO%[QlO'#EtO9aQ`O'#IzO$*VQ!0LrO,5@zOOQ[1G2}1G2}OOQ[1G4_1G4_OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$,XQ!0MxO1G0UOOQ[1G2y1G2yO!&oQMhO1G2yO%[QlO1G2yO#.YQ`O1G2yO$.]QMhO'#EkOOQ!0Lb,5@S,5@SO$.jQ!0LrO,5@SOOQ[1G.u1G.uO!BfQ!0LrO1G.uO!BqQpO1G.uO!ByQMhO1G.uO$.{Q`O1G0uO$/QQ`O'#CiO$/]Q`O'#KdO$/eQ`O,5={O$/jQ`O'#KdO$/oQ`O'#KdO$/}Q`O'#JQO$0]Q`O,5@}O$0eQ!fO1G1iOOQ!0Lf1G1k1G1kO9gQ`O1G3fO@oQ`O1G3fO$0lQ`O1G3fO$0qQ`O1G3fOOQ[1G3f1G3fO!DwQ`O1G3UO!&oQMhO1G3RO$0vQ`O1G3ROOQ[1G3S1G3SO!&oQMhO1G3SO$0{Q`O1G3SO$1TQpO'#HQOOQ[1G3U1G3UO!6SQpO'#I|O!D|Q!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$1]QMhO,5=tO9gQ`O,5=tO$$VQ`O,5=vO9[Q`O,5=vO!BqQpO,5=vO!ByQMhO,5=vO:`QMhO,5=vO$1kQ`O'#KbO$1vQ`O,5=wOOQ[1G.k1G.kO$1{Q!0LrO1G.kO@oQ`O1G.kO$2WQ`O1G.kO9qQ!0LrO1G.kO$4`Q!fO,5APO$4mQ`O,5APO9aQ`O,5APO$4xQlO,5>OO$5PQ`O,5>OOOQ[1G3h1G3hO`QlO1G3hOOQ[1G3n1G3nOOQ[1G3p1G3pO>xQ`O1G3rO$5UQlO1G3tO$9YQlO'#HsOOQ[1G3w1G3wO$9gQ`O'#HyO>}Q`O'#H{OOQ[1G3}1G3}O$9oQlO1G3}O9qQ!0LrO1G4TOOQ[1G4V1G4VOOQ!0Lb'#G_'#G_O9qQ!0LrO1G4XO9qQ!0LrO1G4ZO$=vQ`O,5@aO!)PQlO,5;`O9aQ`O,5;`O>}Q`O,5:XO!)PQlO,5:XO!BqQpO,5:XO$={Q?MtO,5:XOOQO,5;`,5;`O$>VQpO'#IdO$>mQ`O,5@`OOQ!0Lf1G/r1G/rO$>uQpO'#IjO$?PQ`O,5@oOOQ!0Lb1G0y1G0yO##tQpO,5:XOOQO'#If'#IfO$?XQpO,5:qOOQ!0Ln,5:q,5:qO#'oQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO>}Q`O1G0tO!BqQpO1G0tO!ByQMhO1G0tOOQ!0Lb1G5{1G5{O!BfQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$?`Q!0LrO1G0mO$?kQ!0LrO1G0mO!BqQpO1G0^OC{QpO1G0^O$?yQ!0LrO1G0mOOQO1G0^1G0^O$@_Q!0MxO1G0mPOOO-E<Z-E<ZPOOO1G.h1G.hOOOO1G/i1G/iO$@iQ!bO,5<iO$@qQ!fO1G4iOOQO1G4o1G4oO%[QlO,5>}O$@{Q`O1G5yO$ATQ`O1G6XO$A]Q!fO1G6YO9aQ`O,5?TO$AgQ!0MxO1G6VO%[QlO1G6VO$AwQ!0LrO1G6VO$BYQ`O1G6UO$BYQ`O1G6UO9aQ`O1G6UO$BbQ`O,5?WO9aQ`O,5?WOOQO,5?W,5?WO$BvQ`O,5?WO$){Q`O,5?WOOQO-E<j-E<jOOQS1G0a1G0aOOQS1G0c1G0cO#.QQ`O1G0cOOQ[7+(e7+(eO!&oQMhO7+(eO%[QlO7+(eO$CUQ`O7+(eO$CaQMhO7+(eO$CoQ!0MzO,5=XO$EzQ!0MzO,5=ZO$HVQ!0MzO,5=XO$JhQ!0MzO,5=ZO$LyQ!0MzO,59uO% OQ!0MzO,5<kO%#ZQ!0MzO,5<mO%%fQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%'wQ!0MxO7+&aO%(kQlO'#IeO%(xQ`O,5@bO%)QQ!fO,5@bOOQ!0Lf1G0P1G0PO%)[Q`O7+&jOOQ!0Lf7+&j7+&jO%)aQ?MtO,5:fO%[QlO7+&zO%)kQ?MtO,5:bO%)xQ?MtO,5:jO%*SQ?MtO,5:lO%*^QMhO'#IhO%*hQ`O,5@gOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%*pQ!jO,5<ZO!)PQlO,5<YOOQO-E<k-E<kOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%*{Q`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%+QQ!dO,59oOOOO-E<_-E<_OOQ!0Lh1G/X1G/XO%+XQ!0MxO7+'kOOQ!0Lh,5?],5?]O%+{QMhO1G2fP%,SQ`O'#IqPOQ!0Lh-E<o-E<oO%,pQMjO,5?`OOQ!0Lh-E<r-E<rO%-cQMjO,5?bOOQ!0Lh-E<t-E<tO%-mQ!dO1G2wO%-tQ!dO'#CrO%.[QMhO'#KRO$#jQlO'#JuOOQ!0Lh1G2_1G2_O%.cQ`O'#IpO%.wQ`O,5@uO%.wQ`O,5@uO%/PQ`O,5@uO%/[Q`O,5@uOOQO1G2a1G2aO%/jQMjO1G2`O!+xQMhO1G2`O%/zQ(CWO'#IrO%0XQ`O,5@vO!&oQMhO,5@vO%0aQ!dO,5@vOOQ!0Lh1G2d1G2dO%2qQ!fO'#CiO%2{Q`O,5=POOQ!0Lb,5<},5<}O%3TQpO,5<}OOQ!0Lb,5=O,5=OOClQ`O,5<}O%3`QpO,5<}OOQ!0Lb,5=R,5=RO$){Q`O,5=VOOQO,5?_,5?_OOQO-E<q-E<qOOQ!0Lp1G2h1G2hO##tQpO,5<}O$#jQlO,5=PO%3nQ`O,5=OO%3yQpO,5=OO!+xQMhO'#ItO%4sQMjO1G2sO!+xQMhO'#IvO%5fQMjO1G2uO%5pQMjO1G5pO%5zQMjO1G5pOOQO,5?d,5?dOOQO-E<v-E<vOOQO1G.{1G.{O!9xQpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%6XQ`O1G2ZO!+xQMhO1G2bO!+xQMhO1G5pO!+xQMhO1G5pO%6^Q!0MxO7+'mOOQ!0Lf7+'m7+'mO!$lQlO7+'mO%7QQ`O,5;`OOQ!0Lb,5?f,5?fOOQ!0Lb-E<x-E<xO%7VQ!dO'#K]O#'oQ`O7+(eO4UQ!fO7+(eO$CXQ`O7+(eO%7aQ!0MvO'#CiO%7tQ!0MvO,5=SO%8fQ`O,5=SO%8nQ`O,5=SOOQ!0Lb1G5n1G5nOOQ[7+$a7+$aO!BfQ!0LrO7+$aO!BqQpO7+$aO!$lQlO7+&aO%8sQ`O'#JPO%9[Q`O,5AOOOQO1G3g1G3gO9gQ`O,5AOO%9[Q`O,5AOO%9dQ`O,5AOOOQO,5?l,5?lOOQO-E=O-E=OOOQ!0Lf7+'T7+'TO%9iQ`O7+)QO9qQ!0LrO7+)QO9gQ`O7+)QO@oQ`O7+)QOOQ[7+(p7+(pO%9nQ!0MvO7+(mO!&oQMhO7+(mO!DrQ`O7+(nOOQ[7+(n7+(nO!&oQMhO7+(nO%9xQ`O'#KaO%:TQ`O,5=lOOQO,5?h,5?hOOQO-E<z-E<zOOQ[7+(s7+(sO%;gQpO'#HZOOQ[1G3`1G3`O!&oQMhO1G3`O%[QlO1G3`O%;nQ`O1G3`O%;yQMhO1G3`O9qQ!0LrO1G3bO$$VQ`O1G3bO9[Q`O1G3bO!BqQpO1G3bO!ByQMhO1G3bO%<XQ`O'#JOO%<mQ`O,5@|O%<uQpO,5@|OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@oQ`O7+$VO9qQ!0LrO7+$VO%=QQ`O7+$VO%[QlO1G6kO%[QlO1G6lO%=VQ!0LrO1G6kO%=aQlO1G3jO%=hQ`O1G3jO%=mQlO1G3jOOQ[7+)S7+)SO9qQ!0LrO7+)^O`QlO7+)`OOQ['#Kg'#KgOOQ['#JR'#JRO%=tQlO,5>_OOQ[,5>_,5>_O%[QlO'#HtO%>RQ`O'#HvOOQ[,5>e,5>eO9aQ`O,5>eOOQ[,5>g,5>gOOQ[7+)i7+)iOOQ[7+)o7+)oOOQ[7+)s7+)sOOQ[7+)u7+)uO%>WQpO1G5{O%>rQ?MtO1G0zO%>|Q`O1G0zOOQO1G/s1G/sO%?XQ?MtO1G/sO>}Q`O1G/sO!)PQlO'#DmOOQO,5?O,5?OOOQO-E<b-E<bOOQO,5?U,5?UOOQO-E<h-E<hO!BqQpO1G/sOOQO-E<d-E<dOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#'oQ`O7+%uOOQ!0Lf7+&`7+&`O>}Q`O7+&`O!BqQpO7+&`OOQO7+%x7+%xO$@_Q!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%?cQ!0LrO7+&XO!BfQ!0LrO7+%xO!BqQpO7+%xO%?nQ!0LrO7+&XO%?|Q!0MxO7++qO%[QlO7++qO%@^Q`O7++pO%@^Q`O7++pOOQO1G4r1G4rO9aQ`O1G4rO%@fQ`O1G4rOOQS7+%}7+%}O#'oQ`O<<LPO4UQ!fO<<LPO%@tQ`O<<LPOOQ[<<LP<<LPO!&oQMhO<<LPO%[QlO<<LPO%@|Q`O<<LPO%AXQ!0MzO,5?`O%CdQ!0MzO,5?bO%EoQ!0MzO1G2`O%HQQ!0MzO1G2sO%J]Q!0MzO1G2uO%LhQ!fO,5?PO%[QlO,5?POOQO-E<c-E<cO%LrQ`O1G5|OOQ!0Lf<<JU<<JUO%LzQ?MtO1G0uO& RQ?MtO1G1PO& YQ?MtO1G1PO&#ZQ?MtO1G1PO&#bQ?MtO1G1PO&%cQ?MtO1G1PO&'dQ?MtO1G1PO&'kQ?MtO1G1PO&'rQ?MtO1G1PO&)sQ?MtO1G1PO&)zQ?MtO1G1PO&*RQ!0MxO<<JfO&+yQ?MtO1G1PO&,vQ?MvO1G1PO&-yQ?MvO'#JkO&0PQ?MtO1G1cO&0^Q?MtO1G0UO&0hQMjO,5?SOOQO-E<f-E<fO!)PQlO'#FqOOQO'#KY'#KYOOQO1G1u1G1uO&0rQ`O1G1tO&0wQ?MtO,5?ZOOOW7+'h7+'hOOOO1G/Z1G/ZO&1RQ!dO1G4wOOQ!0Lh7+(Q7+(QP!&oQMhO,5?]O!+xQMhO7+(cO&1YQ`O,5?[O9aQ`O,5?[OOQO-E<n-E<nO&1hQ`O1G6aO&1hQ`O1G6aO&1pQ`O1G6aO&1{QMjO7+'zO&2]Q!dO,5?^O&2gQ`O,5?^O!&oQMhO,5?^OOQO-E<p-E<pO&2lQ!dO1G6bO&2vQ`O1G6bO&3OQ`O1G2kO!&oQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%3TQpO1G2iO!BqQpO1G2iOClQ`O1G2iOOQ!0Lb1G2q1G2qO&3TQpO1G2iO&3cQ`O1G2kO$){Q`O1G2jOClQ`O1G2jO$#jQlO1G2kO&3kQ`O1G2jO&4_QMjO,5?`OOQ!0Lh-E<s-E<sO&5QQMjO,5?bOOQ!0Lh-E<u-E<uO!+xQMhO7++[OOQ!0Lh1G/c1G/cO&5[Q`O1G/cOOQ!0Lh7+'u7+'uO&5aQMjO7+'|O&5qQMjO7++[O&5{QMjO7++[O&6YQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&6|Q`O1G0zO!&oQMhO'#IyO&7RQ`O,5@wO&9TQ!fO<<LPO!&oQMhO1G2nO&9[Q!0LrO1G2nOOQ[<<G{<<G{O!BfQ!0LrO<<G{O&9mQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?k,5?kO&:aQ`O,5?kO&:fQ`O,5?kOOQO-E<}-E<}O&:tQ`O1G6jO&:tQ`O1G6jO9gQ`O1G6jO@oQ`O<<LlOOQ[<<Ll<<LlO&:|Q`O<<LlO9qQ!0LrO<<LlOOQ[<<LX<<LXO%9nQ!0MvO<<LXOOQ[<<LY<<LYO!DrQ`O<<LYO&;RQpO'#I{O&;^Q`O,5@{O!)PQlO,5@{OOQ[1G3W1G3WOOQO'#I}'#I}O9qQ!0LrO'#I}O&;fQpO,5=uOOQ[,5=u,5=uO&;mQpO'#EgO&;tQpO'#GeO&;yQ`O7+(zO&<OQ`O7+(zOOQ[7+(z7+(zO!&oQMhO7+(zO%[QlO7+(zO&<WQ`O7+(zOOQ[7+(|7+(|O9qQ!0LrO7+(|O$$VQ`O7+(|O9[Q`O7+(|O!BqQpO7+(|O&<cQ`O,5?jOOQO-E<|-E<|OOQO'#H^'#H^O&<nQ`O1G6hO9qQ!0LrO<<GqOOQ[<<Gq<<GqO@oQ`O<<GqO&<vQ`O7+,VO&<{Q`O7+,WO%[QlO7+,VO%[QlO7+,WOOQ[7+)U7+)UO&=QQ`O7+)UO&=VQlO7+)UO&=^Q`O7+)UOOQ[<<Lx<<LxOOQ[<<Lz<<LzOOQ[-E=P-E=POOQ[1G3y1G3yO&=cQ`O,5>`OOQ[,5>b,5>bO&=hQ`O1G4PO9aQ`O7+&fO!)PQlO7+&fOOQO7+%_7+%_O&=mQ?MtO1G6YO>}Q`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO>}Q`O<<IzOOQO<<Is<<IsO$@_Q!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!BfQ!0LrO<<IdO&=wQ!0LrO<<IsO&>SQ!0MxO<= ]O&>dQ`O<= [OOQO7+*^7+*^O9aQ`O7+*^OOQ[ANAkANAkO&>lQ!fOANAkO!&oQMhOANAkO#'oQ`OANAkO4UQ!fOANAkO&>sQ`OANAkO%[QlOANAkO&>{Q!0MzO7+'zO&A^Q!0MzO,5?`O&CiQ!0MzO,5?bO&EtQ!0MzO7+'|O&HVQ!fO1G4kO&HaQ?MtO7+&aO&JeQ?MvO,5=XO&LlQ?MvO,5=ZO&L|Q?MvO,5=XO&M^Q?MvO,5=ZO&MnQ?MvO,59uO' tQ?MvO,5<kO'#wQ?MvO,5<mO'&]Q?MvO,5<{O'(RQ?MtO7+'kO'(`Q?MtO7+'mO'(mQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*c7+*cO'(rQMjO<<K}OOQO1G4v1G4vO'(yQ`O1G4vO')UQ`O1G4vO')dQ`O7++{O')dQ`O7++{O!&oQMhO1G4xO')lQ!dO1G4xO')vQ`O7++|O'*OQ`O7+(VO'*ZQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!BqQpO7+(TOClQ`O7+(TO'*eQ`O7+(VO!&oQMhO7+(VO$){Q`O7+(UO'*jQ`O7+(VOClQ`O7+(UO'*rQMjO<<NvOOQ!0Lh7+$}7+$}O!+xQMhO<<NvO'*|Q!dO,5?eOOQO-E<w-E<wO'+WQ!0MvO7+(YO!&oQMhO7+(YOOQ[AN=gAN=gO9gQ`O1G5VOOQO1G5V1G5VO'+hQ`O1G5VO'+mQ`O7+,UO'+mQ`O7+,UO9qQ!0LrOANBWO@oQ`OANBWOOQ[ANBWANBWOOQ[ANAsANAsOOQ[ANAtANAtO'+uQ`O,5?gOOQO-E<y-E<yO',QQ?MtO1G6gOOQO,5?i,5?iOOQO-E<{-E<{OOQ[1G3a1G3aO',[Q`O,5=POOQ[<<Lf<<LfO!&oQMhO<<LfO&;yQ`O<<LfO',aQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9qQ!0LrO<<LhO$$VQ`O<<LhO9[Q`O<<LhO',iQpO1G5UO',tQ`O7+,SOOQ[AN=]AN=]O9qQ!0LrOAN=]OOQ[<= q<= qOOQ[<= r<= rO',|Q`O<= qO'-RQ`O<= rOOQ[<<Lp<<LpO'-WQ`O<<LpO'-]QlO<<LpOOQ[1G3z1G3zO>}Q`O7+)kO'-dQ`O<<JQO'-oQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$@_Q!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<Mx<<MxOOQ[G27VG27VO!&oQMhOG27VO#'oQ`OG27VO'-yQ!fOG27VO4UQ!fOG27VO'.QQ`OG27VO'.YQ?MtO<<JfO'.gQ?MvO1G2`O'0]Q?MvO,5?`O'2`Q?MvO,5?bO'4cQ?MvO1G2sO'6fQ?MvO1G2uO'8iQ?MtO<<KXO'8vQ?MtO<<I{OOQO1G1w1G1wO!+xQMhOANAiOOQO7+*b7+*bO'9TQ`O7+*bO'9`Q`O<= gO'9hQ!dO7+*dOOQ!0Lb<<Kq<<KqO$){Q`O<<KqOClQ`O<<KqO'9rQ`O<<KqO!&oQMhO<<KqOOQ!0Lb<<Ko<<KoO!BqQpO<<KoO'9}Q!dO<<KqOOQ!0Lb<<Kp<<KpO':XQ`O<<KqO!&oQMhO<<KqO$){Q`O<<KpO':^QMjOANDbO':hQ!0MvO<<KtOOQO7+*q7+*qO9gQ`O7+*qO':xQ`O<= pOOQ[G27rG27rO9qQ!0LrOG27rO!)PQlO1G5RO';QQ`O7+,RO';YQ`O1G2kO&;yQ`OANBQOOQ[ANBQANBQO!&oQMhOANBQO';_Q`OANBQOOQ[ANBSANBSO9qQ!0LrOANBSO$$VQ`OANBSOOQO'#H_'#H_OOQO7+*p7+*pOOQ[G22wG22wOOQ[ANE]ANE]OOQ[ANE^ANE^OOQ[ANB[ANB[O';gQ`OANB[OOQ[<<MV<<MVO!)PQlOAN?lOOQOG24yG24yO$@_Q!0MxOG24yO#'oQ`OLD,qOOQ[LD,qLD,qO!&oQMhOLD,qO';lQ!fOLD,qO';sQ?MvO7+'zO'=iQ?MvO,5?`O'?lQ?MvO,5?bO'AoQ?MvO7+'|O'CeQMjOG27TOOQO<<M|<<M|OOQ!0LbANA]ANA]O$){Q`OANA]OClQ`OANA]O'CuQ!dOANA]OOQ!0LbANAZANAZO'C|Q`OANA]O!&oQMhOANA]O'DXQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N]<<N]OOQ[LD-^LD-^O'DcQ?MtO7+*mOOQO'#Gf'#GfOOQ[G27lG27lO&;yQ`OG27lO!&oQMhOG27lOOQ[G27nG27nO9qQ!0LrOG27nOOQ[G27vG27vO'DmQ?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#'oQ`O!$(!]O!&oQMhO!$(!]O'DwQ!0MzOG27TOOQ!0LbG26wG26wO$){Q`OG26wO'GYQ`OG26wOClQ`OG26wO'GeQ!dOG26wO!&oQMhOG26wOOQ[LD-WLD-WO&;yQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#'oQ`O!)9EwOOQ!0LbLD,cLD,cO$){Q`OLD,cOClQ`OLD,cO'GlQ`OLD,cO'GwQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'HOQ?MvOG27TOOQ!0Lb!$( }!$( }O$){Q`O!$( }OClQ`O!$( }O'ItQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$){Q`O!)9EiOClQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$){Q`O!.K;TOOQ!0Lb!4/0o!4/0oO!)PQlO'#DzO1PQ`O'#EXO'JPQ!fO'#JqO'JWQ!L^O'#DvO'J_QlO'#EOO'JfQ!fO'#CiO'L|Q!fO'#CiO!)PQlO'#EQO'M^QlO,5;ZO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO,5;eO!)PQlO'#IoO( aQ`O,5<iO!)PQlO,5;eO( iQMhO,5;eO(#SQMhO,5;eO!)PQlO,5;wO!&oQMhO'#GmO( iQMhO'#GmO!&oQMhO'#GoO( iQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&oQMhO'#GPO( iQMhO'#GPO!&oQMhO'#GRO( iQMhO'#GRO!&oQMhO'#GaO( iQMhO'#GaO!)PQlO,5:jO(#ZQpO'#D_O(#eQpO'#JuO!)PQlO,5@nO'M^QlO1G0uO(#oQ?MtO'#CiO!)PQlO1G2PO!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO(#yQ!dO'#CrO!&oQMhO,5<tO( iQMhO,5<tO'M^QlO1G2RO!)PQlO7+&zO!&oQMhO1G2`O( iQMhO1G2`O!&oQMhO'#ItO( iQMhO'#ItO!&oQMhO'#IvO( iQMhO'#IvO!&oQMhO1G2bO( iQMhO1G2bO'M^QlO7+'mO'M^QlO7+&aO!&oQMhOANAiO( iQMhOANAiO($^Q`O'#EoO($cQ`O'#EoO($kQ`O'#F]O($pQ`O'#EyO($uQ`O'#KSO(%QQ`O'#KQO(%]Q`O,5;ZO(%bQMjO,5<eO(%iQ`O'#GYO(%nQ`O'#GYO(%sQ`O,5<gO(%{Q`O,5;ZO(&TQ?MtO1G1`O(&[Q`O,5<tO(&aQ`O,5<tO(&fQ`O,5<vO(&kQ`O,5<vO(&pQ`O1G2RO(&uQ`O1G0uO(&zQMjO<<K}O('RQMjO<<K}O7eQMhO'#F|O9[Q`O'#F{OAjQ`O'#EnO!)PQlO,5;tO!3dQ`O'#GYO!3dQ`O'#GYO!3dQ`O'#G[O!3dQ`O'#G[O!+xQMhO7+(cO!+xQMhO7+(cO%-mQ!dO1G2wO%-mQ!dO1G2wO!&oQMhO,5=]O!&oQMhO,5=]",stateData:"((X~O'{OS'|OSTOS'}RQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&V!WO&]!XO&_!YO&a!ZO&c![O&f!]O&l!^O&r!_O&t!`O&v!aO&x!bO&z!cO(SSO(UTO(XUO(`VO(n[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O'}!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'y]X(`]X(q]X(x]X(y]X~O!g%RX~P(qO_!}O(U#PO(V!}O(W#PO~O_#QO(W#PO(X#PO(Y#QO~Ox#SO!U#TO(a#TO(b#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S;{O(UTO(XUO(`VO(n[O~O![#ZO!]#WO!Y(gP!Y(uP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(UTO(XUO(`VO(n[O~Op#mO![#iO!|]O#i#lO#j#iO(S;|O!k(rP~P.iO!l#oO(S#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa(eX'y(eX'v(eX!k(eX!Y(eX!_(eX%i(eX!g(eX~P1qO#S$dO#`$eO$Q$eOP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX!_(fX%i(fX~Oa(fX'y(fX'v(fX!Y(fX!k(fXv(fX!g(fX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%cOk%cOl%cOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S$sO(UTO(XUO(`$uO(x$}O(y%POg(]P~O!l%dO~O!S%gO!_%hO(S%fO~O!g%lO~Oa%mO'y%mO~O!Q%qO~P%[O(T!lO~P%[O%n%uO~P%[Oh%VO!l%dO(S%fO(T!lO~Oe%|O!l%dO(S%fO~Oj$RO~O!Q&RO!_&OO!l&QO%j&UO(S%fO(T!lO(UTO(XUO`)VP~O!x#sO~O%s&WO!S)RX!_)RX(S)RX~O(S&XO~Ol!PO!u&^O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&cOe&bO!x&`O%h&aO%{&_O~P<VOd&fOeyOl!PO!_&eO!u&^O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&iO#`&lO%j&gO(T!lO~P=[O!l&mO!u&qO~O!l#oO~O!_XO~Oa%mO'w&yO'y%mO~Oa%mO'w&|O'y%mO~Oa%mO'w'OO'y%mO~O'v]X!Y]Xv]X!k]X&Z]X!_]X%i]X!g]X~P(qO!b']O!c'UO!d'UO(T!lO(UTO(XUO~Os'SO!S'RO!['VO(d'QO!^(hP!^(wP~P@cOn'`O!_'^O(S%fO~Oe'eO!l%dO(S%fO~O!Q&RO!l&QO~Os!nO!S!oO!|;wO#T!pO#U!pO#W!pO#X!pO(T!lO(UTO(XUO(d!mO(n!sO~O!b'kO!c'jO!d'jO#V!pO#['lO#]'lO~PA}Oa%mOh%VO!g#vO!l%dO'y%mO(q'nO~O!p'rO#`'pO~PC]Os!nO!S!oO(UTO(XUO(d!mO(n!sO~O!_XOs(lX!S(lX!b(lX!c(lX!d(lX!|(lX#T(lX#U(lX#V(lX#W(lX#X(lX#[(lX#](lX(T(lX(U(lX(X(lX(d(lX(n(lX~O!c'jO!d'jO(T!lO~PC{O(O'vO(P'vO(Q'xO~O_!}O(U'zO(V!}O(W'zO~O_#QO(W'zO(X'zO(Y#QO~Ov'|O~P%[Ox#SO!U#TO(a#TO(b(PO~O![(RO!Y'VX!Y']X!]'VX!]']X~P+}O!](TO!Y(gX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](TO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~O!Y(gX~PGvO!Y(YO~O!Y(tX!](tX!g(tX!k(tX(q(tX~O#`(tX#k#dX!^(tX~PIyO#`(ZO!Y(vX!](vX~O!]([O!Y(uX~O!Y(_O~O#`$eO~PIyO!^(`O~P`OR#zO!Q#yO!S#{O!l#xO(`VOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(q!na(x!na(y!na~Oa!na'y!na'v!na!Y!na!k!nav!na!_!na%i!na!g!na~PKaO!k(aO~O!g#vO#`(bO(q'nO!](sXa(sX'y(sX~O!k(sX~PM|O!S%gO!_%hO!|]O#i(gO#j(fO(S%fO~O!](hO!k(rX~O!k(jO~O!S%gO!_%hO#j(fO(S%fO~OP(fXR(fX[(fXj(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~O!g#vO!k(fX~P! jOR(lO!Q(kO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(S!{a~P!#kO!x(pO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~O#k(vO~O![(xO!k(jP~P%[O(d(zO(n[O~O!S(|O!l#xO(d(zO(n[O~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]$_Oa$qa'y$qa'v$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)bO~P!&oOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%[O!S${O!_$|O!i%aO!l$xO#j%bO$W%_O$t%]O$v%^O$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Og(oP~P!+xO!Q)gO!g)fO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)fO!_(zX$Z(zX$](zX$_(zX$f(zX~O!Q)gO~P!.RO!Q)gO!_(zX$Z(zX$](zX$_(zX$f(zX~O!_)iO$Z)mO$])hO$_)hO$f)nO~O![)qO~P!)PO$]$hO$_$gO$f)uO~On$zX!Q$zX#S$zX'x$zX(x$zX(y$zX~OgmXg$zXnmX!]mX#`mX~P!/wOx)wO(a)xO(b)zO~On*TO!Q)|O'x)}O(x$}O(y%PO~Og){O~P!0{Og*UO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S*WO!_*XO!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~O![*[O(S*VO!k(}P~P!1jO#k*^O~O!l*_O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(S*aO(UTO(XUO(`$uO(x$}O(y%PO~O![*dO!Y)OP~P!3iOr*pOs!nO!S*fO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO(d!mO~O!^*mO~P!5^O#S$dOn(_X!Q(_X'x(_X(x(_X(y(_X!](_X#`(_X~Og(_X$O(_X~P!6`On*uO#`*tOg(^X!](^X~O!]*vOg(]X~Oj%cOk%cOl%cO(S&XOg(]P~Os*yO~O!l+OO~O(S(tO~Op+TO!S%gO![#iO!_%hO!|]O#i#lO#j#iO(S%fO!k(rP~O!g#vO#k+UO~O!S%gO![+WO!]([O!_%hO(S%fO!Y(uP~Os'YO!S+YO![+XO(UTO(XUO(d(zO~O!^(wP~P!9iO!]+ZOa)SX'y)SX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(`VO(q$YO(x#|O(y#}O~Oa!ja!]!ja'y!ja'v!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:aOR#zO!Q#yO!S#{O!l#xO(`VOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(q!ra(x!ra(y!ra~Oa!ra'y!ra'v!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!<wOR#zO!Q#yO!S#{O!l#xO(`VOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(q!ta(x!ta(y!ta~Oa!ta'y!ta'v!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?_Oh%VOn+dO!_'^O%i+cO~O!g+fOa([X!_([X'y([X!]([X~Oa%mO!_XO'y%mO~Oh%VO!l%dO~Oh%VO!l%dO(S%fO~O!g#vO#k(vO~Ob+qO%j+rO(S+nO(UTO(XUO!^)WP~O!]+sO`)VX~O[+wO~O`+xO~O!_&OO(S%fO(T!lO`)VP~Oh%VO#`+}O~Oh%VOn,QO!_$|O~O!_,SO~O!Q,UO!_XO~O%n%uO~O!x,ZO~Oe,`O~Ob,aO(S#nO(UTO(XUO!^)UP~Oe%|O~O%j!QO(S&XO~P=[O[,fO`,eO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(UTO(XUO(`VO(n[O~O!_!eO!u!gO$W!kO(S!dO~P!F_O`,eOa%mO'y%mO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(S!dO(UTO(XUO(`VO(n[O~Oa,kOl!OO!uwO%l!OO%m!OO%n!OO~P!HwO!l&mO~O&],qO~O!_,sO~O&n,uO&p,vOP&kaQ&kaS&kaY&kaa&kad&kae&kal&kap&kar&kas&kat&kaz&ka|&ka!O&ka!S&ka!W&ka!X&ka!_&ka!i&ka!l&ka!o&ka!p&ka!q&ka!s&ka!u&ka!x&ka!|&ka$W&ka$n&ka%h&ka%j&ka%l&ka%m&ka%n&ka%q&ka%s&ka%v&ka%w&ka%y&ka&V&ka&]&ka&_&ka&a&ka&c&ka&f&ka&l&ka&r&ka&t&ka&v&ka&x&ka&z&ka'v&ka(S&ka(U&ka(X&ka(`&ka(n&ka!^&ka&d&kab&ka&i&ka~O(S,{O~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P# }O!g-QO#`-POh(iX!]#hX!^#hX!g(iX!l(iX~O!](iX!^(iX~P#!pOh%VO!g-SO!l%dO!]!aX!^!aX~Os!nO!S!oO(UTO(XUO(d!mO~OP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_!eO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(UTO(XUO(`VO(n[O~O(S<rO~P#$VO!]-WO!^(hX~O!^-YO~O!g-QO#`-PO!]#hX!^#hX~O!]-ZO!^(wX~O!^-]O~O!c-^O!d-^O(T!lO~P##tO!^-aO~P'_On-dO!_'^O~O!Y-iO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(T!{a(U!{a(X!{a(d!{a(n!{a~P!#kO!p-nO#`-lO~PC]O!c-pO!d-pO(T!lO~PC{Oa%mO#`-lO'y%mO~Oa%mO!g#vO#`-lO'y%mO~Oa%mO!g#vO!p-nO#`-lO'y%mO(q'nO~O(O'vO(P'vO(Q-uO~Ov-vO~O!Y'Va!]'Va~P!:aO![-zO!Y'VX!]'VX~P%[O!](TO!Y(ga~O!Y(ga~PGvO!]([O!Y(ua~O!S%gO![.OO!_%hO(S%fO!Y']X!]']X~O#`.QO!](sa!k(saa(sa'y(sa~O!g#vO~P#,]O!](hO!k(ra~O!S%gO!_%hO#j.UO(S%fO~Op.ZO!S%gO![.WO!_%hO!|]O#i.YO#j.WO(S%fO!]'`X!k'`X~OR._O!l#xO~Oh%VOn.bO!_'^O%i.aO~Oa#ci!]#ci'y#ci'v#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:aOn=|O!Q)|O'x)}O(x$}O(y%PO~O#k#_aa#_a#`#_a'y#_a!]#_a!k#_a!_#_a!Y#_a~P#/XO#k(_XP(_XR(_X[(_Xa(_Xj(_Xr(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X'y(_X(`(_X(q(_X!k(_X!Y(_X'v(_Xv(_X!_(_X%i(_X!g(_X~P!6`O!].oO!k(jX~P!:aO!k.rO~O!Y.tO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#2wO#n$OO~P#2wOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#5fO#r$QO~P#5fOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(`VOa#mi!]#mi#x#mi#z#mi#{#mi'y#mi(q#mi(x#mi(y#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(`VO(y#}Oa#mi!]#mi#z#mi#{#mi'y#mi(q#mi(x#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#:kO#x#mi~P#:kO#v$SO~P#8TOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(`VO(x#|O(y#}Oa#mi!]#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#=aO#z$WO~P#=aOP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X!]]X!^]X~O$O]X~P#@OOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO#z<XO#{<YO(`VO(q$YO(x#|O(y#}O~O$O.vO~P#B]O#S$dO#`<`O$Q<`O$O(fX!^(fX~P! jOa'ca!]'ca'y'ca'v'ca!k'ca!Y'cav'ca!_'ca%i'ca!g'ca~P!:aO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'y#mi(q#mi'v#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(`VO(x#mi(y#mi~P#E_On=|O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P#E_O!].zOg(oX~P!0{Og.|O~Oa$Pi!]$Pi'y$Pi'v$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:aO$].}O$_.}O~O$]/OO$_/OO~O!g)fO#`/PO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/QO~O!_)iO$Z/SO$])hO$_)hO$f/TO~O!]<ZO!^(eX~P#B]O!^/UO~O!g)fO$f(zX~O$f/WO~Ov/XO~P!&oOx)wO(a)xO(b/[O~O!S/_O~O(x$}On%aa!Q%aa'x%aa(y%aa!]%aa#`%aa~Og%aa$O%aa~P#LaO(y%POn%ca!Q%ca'x%ca(x%ca!]%ca#`%ca~Og%ca$O%ca~P#MSO!]fX!gfX!kfX!k$zX(qfX~P!/wO![/hO!]([O(S/gO!Y(uP!Y)OP~P!1jOr*pO!b*nO!c*hO!d*hO!l*_O#[*oO%`*jO(T!lO(UTO(XUO~Os<oO!S/iO![+XO!^*mO(d<nO!^(wP~P#NmO!k/jO~P#/XO!]/kO!g#vO(q'nO!k(}X~O!k/pO~O!S%gO![*[O!_%hO(S%fO!k(}P~O#k/rO~O!Y$zX!]$zX!g%RX~P!/wO!]/sO!Y)OX~P#/XO!g/uO~O!Y/wO~OpkO(S/xO~P.iOh%VOr/}O!g#vO!l%dO(q'nO~O!g+fO~Oa%mO!]0RO'y%mO~O!^0TO~P!5^O!c0UO!d0UO(T!lO~P##tOs!nO!S0VO(UTO(XUO(d!mO~O#[0XO~Og%aa!]%aa#`%aa$O%aa~P!0{Og%ca!]%ca#`%ca$O%ca~P!0{Oj%cOk%cOl%cO(S&XOg'lX!]'lX~O!]*vOg(]a~Og0bO~OR0cO!Q0cO!S0dO#S$dOn}a'x}a(x}a(y}a!]}a#`}a~Og}a$O}a~P$&vO!Q)|O'x)}On$sa(x$sa(y$sa!]$sa#`$sa~Og$sa$O$sa~P$'rO!Q)|O'x)}On$ua(x$ua(y$ua!]$ua#`$ua~Og$ua$O$ua~P$(eO#k0gO~Og%Ta!]%Ta#`%Ta$O%Ta~P!0{On0iO#`0hOg(^a!](^a~O!g#vO~O#k0lO~O!]+ZOa)Sa'y)Sa~OR#zO!Q#yO!S#{O!l#xO(`VOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(q!ri(x!ri(y!ri~Oa!ri'y!ri'v!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$*bOh%VOr%XOs$tOt$tOz%YO|%ZO!O<eO!S${O!_$|O!i=vO!l$xO#j<kO$W%_O$t<gO$v<iO$y%`O(UTO(XUO(`$uO(x$}O(y%PO~Op0uO%]0vO(S0tO~P$,xO!g+fOa([a!_([a'y([a!]([a~O#k0|O~O[]X!]fX!^fX~O!]0}O!^)WX~O!^1PO~O[1QO~Ob1SO(S+nO(UTO(XUO~O!_&OO(S%fO`'tX!]'tX~O!]+sO`)Va~O!k1VO~P!:aO[1YO~O`1ZO~O#`1^O~On1aO!_$|O~O(d(zO!^)TP~Oh%VOn1jO!_1gO%i1iO~O[1tO!]1rO!^)UX~O!^1uO~O`1wOa%mO'y%mO~O(S#nO(UTO(XUO~O#S$dO#`$eO$Q$eOP(fXR(fX[(fXr(fX!Q(fX!S(fX!](fX!l(fX!p(fX#R(fX#n(fX#o(fX#p(fX#q(fX#r(fX#s(fX#t(fX#u(fX#v(fX#x(fX#z(fX#{(fX(`(fX(q(fX(x(fX(y(fX~Oj1zO&Z1{Oa(fX~P$2cOj1zO#`$eO&Z1{O~Oa1}O~P%[Oa2PO~O&d2SOP&biQ&biS&biY&bia&bid&bie&bil&bip&bir&bis&bit&biz&bi|&bi!O&bi!S&bi!W&bi!X&bi!_&bi!i&bi!l&bi!o&bi!p&bi!q&bi!s&bi!u&bi!x&bi!|&bi$W&bi$n&bi%h&bi%j&bi%l&bi%m&bi%n&bi%q&bi%s&bi%v&bi%w&bi%y&bi&V&bi&]&bi&_&bi&a&bi&c&bi&f&bi&l&bi&r&bi&t&bi&v&bi&x&bi&z&bi'v&bi(S&bi(U&bi(X&bi(`&bi(n&bi!^&bib&bi&i&bi~Ob2YO!^2WO&i2XO~P`O!_XO!l2[O~O&p,vOP&kiQ&kiS&kiY&kia&kid&kie&kil&kip&kir&kis&kit&kiz&ki|&ki!O&ki!S&ki!W&ki!X&ki!_&ki!i&ki!l&ki!o&ki!p&ki!q&ki!s&ki!u&ki!x&ki!|&ki$W&ki$n&ki%h&ki%j&ki%l&ki%m&ki%n&ki%q&ki%s&ki%v&ki%w&ki%y&ki&V&ki&]&ki&_&ki&a&ki&c&ki&f&ki&l&ki&r&ki&t&ki&v&ki&x&ki&z&ki'v&ki(S&ki(U&ki(X&ki(`&ki(n&ki!^&ki&d&kib&ki&i&ki~O!Y2bO~O!]!aa!^!aa~P#B]Os!nO!S!oO![2hO(d!mO!]'WX!^'WX~P@cO!]-WO!^(ha~O!]'^X!^'^X~P!9iO!]-ZO!^(wa~O!^2oO~P'_Oa%mO#`2xO'y%mO~Oa%mO!g#vO#`2xO'y%mO~Oa%mO!g#vO!p2|O#`2xO'y%mO(q'nO~Oa%mO'y%mO~P!:aO!]$_Ov$qa~O!Y'Vi!]'Vi~P!:aO!](TO!Y(gi~O!]([O!Y(ui~O!Y(vi!](vi~P!:aO!](si!k(sia(si'y(si~P!:aO#`3OO!](si!k(sia(si'y(si~O!](hO!k(ri~O!S%gO!_%hO!|]O#i3TO#j3SO(S%fO~O!S%gO!_%hO#j3SO(S%fO~On3[O!_'^O%i3ZO~Oh%VOn3[O!_'^O%i3ZO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aav%aa!_%aa%i%aa!g%aa~P#LaO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%cav%ca!_%ca%i%ca!g%ca~P#MSO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'y%aa(`%aa(q%aa!k%aa!Y%aa'v%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/XO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'y%ca(`%ca(q%ca!k%ca!Y%ca'v%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/XO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'y}a(`}a(q}a!k}a!Y}a'v}av}a!_}a%i}a!g}a~P$&vO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'y$sa(`$sa(q$sa!k$sa!Y$sa'v$sav$sa!_$sa%i$sa!g$sa~P$'rO#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'y$ua(`$ua(q$ua!k$ua!Y$ua'v$uav$ua!_$ua%i$ua!g$ua~P$(eO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'y%Ta(`%Ta(q%Ta!k%Ta!Y%Ta'v%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/XOa#cq!]#cq'y#cq'v#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:aO![3dO!]'XX!k'XX~P%[O!].oO!k(ja~O!].oO!k(ja~P!:aO!Y3gO~O$O!na!^!na~PKaO$O!ja!]!ja!^!ja~P#B]O$O!ra!^!ra~P!<wO$O!ta!^!ta~P!?_Og'[X!]'[X~P!+xO!].zOg(oa~OSfO!_3{O$d3|O~O!^4QO~Ov4RO~P#/XOa$mq!]$mq'y$mq'v$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:aO!Y4TO~P!&oO!S4UO~O!Q)|O'x)}O(y%POn'ha(x'ha!]'ha#`'ha~Og'ha$O'ha~P%,XO!Q)|O'x)}On'ja(x'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P%,zO(q$YO~P#/XO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!/wO(S<xO~P!1jO!S%gO![4XO!_%hO(S%fO!]'dX!k'dX~O!]/kO!k(}a~O!]/kO!g#vO!k(}a~O!]/kO!g#vO(q'nO!k(}a~Og$|i!]$|i#`$|i$O$|i~P!0{O![4aO!Y'fX!]'fX~P!3iO!]/sO!Y)Oa~O!]/sO!Y)Oa~P#/XOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~Oj%YX!g%YX~P%0kOj4fO!g#vO~Oh%VO!g#vO!l%dO~Oh%VOr4kO!l%dO(q'nO~Or4pO!g#vO(q'nO~Os!nO!S4qO(UTO(XUO(d!mO~O(x$}On%ai!Q%ai'x%ai(y%ai!]%ai#`%ai~Og%ai$O%ai~P%4[O(y%POn%ci!Q%ci'x%ci(x%ci!]%ci#`%ci~Og%ci$O%ci~P%4}Og(^i!](^i~P!0{O#`4wOg(^i!](^i~P!0{O!k4zO~Oa$oq!]$oq'y$oq'v$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:aO!Y5QO~O!]5RO!_)PX~P#/XOa$zX!_$zX%^]X'y$zX!]$zX~P!/wO%^5UOaoXnoX!QoX!_oX'xoX'yoX(xoX(yoX!]oX~Op5VO(S#nO~O%^5UO~Ob5]O%j5^O(S+nO(UTO(XUO!]'sX!^'sX~O!]0}O!^)Wa~O[5bO~O`5cO~Oa%mO'y%mO~P#/XO!]5kO#`5mO!^)TX~O!^5nO~Or5tOs!nO!S*fO!b!yO!c!vO!d!vO!|;wO#T!pO#U!pO#V!pO#W!pO#X!pO#[5sO#]!zO(T!lO(UTO(XUO(d!mO(n!sO~O!^5rO~P%:YOn5yO!_1gO%i5xO~Oh%VOn5yO!_1gO%i5xO~Ob6QO(S#nO(UTO(XUO!]'rX!^'rX~O!]1rO!^)Ua~O(UTO(XUO(d6SO~O`6WO~Oj6ZO&Z6[O~PM|O!k6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO!^6dO&i2XO~P`O!g6fO~O!g6hOh(ii!](ii!^(ii!g(ii!l(iir(ii(q(ii~O!]#hi!^#hi~P#B]O#`6iO!]#hi!^#hi~O!]!ai!^!ai~P#B]Oa%mO#`6rO'y%mO~Oa%mO!g#vO#`6rO'y%mO~O!](sq!k(sqa(sq'y(sq~P!:aO!](hO!k(rq~O!S%gO!_%hO#j6yO(S%fO~O!_'^O%i6|O~On7QO!_'^O%i6|O~O#k'haP'haR'ha['haa'haj'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha'y'ha(`'ha(q'ha!k'ha!Y'ha'v'hav'ha!_'ha%i'ha!g'ha~P%,XO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'y'ja(`'ja(q'ja!k'ja!Y'ja'v'jav'ja!_'ja%i'ja!g'ja~P%,zO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'y$|i(`$|i(q$|i!k$|i!Y$|i'v$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/XO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'y%ai(`%ai(q%ai!k%ai!Y%ai'v%aiv%ai!_%ai%i%ai!g%ai~P%4[O#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'y%ci(`%ci(q%ci!k%ci!Y%ci'v%civ%ci!_%ci%i%ci!g%ci~P%4}O!]'Xa!k'Xa~P!:aO!].oO!k(ji~O$O#ci!]#ci!^#ci~P#B]OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(`VO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#n#mi~P%MXO#n<PO~P%MXOP$[OR#zOr<]O!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#r#mi~P& aO#r<RO~P& aOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O(`VO#x#mi#z#mi#{#mi$O#mi(q#mi(x#mi(y#mi!]#mi!^#mi~O#v#mi~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO(`VO(y#}O#z#mi#{#mi$O#mi(q#mi(x#mi!]#mi!^#mi~O#x<VO~P&%jO#x#mi~P&%jO#v<TO~P&#iOP$[OR#zO[<_Oj<SOr<]O!Q#yO!S#{O!l#xO!p$[O#R<SO#n<PO#o<QO#p<QO#q<QO#r<RO#s<SO#t<SO#u<^O#v<TO#x<VO(`VO(x#|O(y#}O#{#mi$O#mi(q#mi!]#mi!^#mi~O#z#mi~P&'yO#z<XO~P&'yOa#|y!]#|y'y#|y'v#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:aO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(q#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<PO#o<QO#p<QO#q<QO(`VO(x#mi(y#mi~P&*uOn=}O!Q)|O'x)}O(x$}O(y%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(`#mi~P&*uO#S$dOP(_XR(_X[(_Xj(_Xn(_Xr(_X!Q(_X!S(_X!l(_X!p(_X#R(_X#n(_X#o(_X#p(_X#q(_X#r(_X#s(_X#t(_X#u(_X#v(_X#x(_X#z(_X#{(_X$O(_X'x(_X(`(_X(q(_X(x(_X(y(_X!](_X!^(_X~O$O$Pi!]$Pi!^$Pi~P#B]O$O!ri!^!ri~P$*bOg'[a!]'[a~P!0{O!^7dO~O!]'ca!^'ca~P#B]O!Y7eO~P#/XO!g#vO(q'nO!]'da!k'da~O!]/kO!k(}i~O!]/kO!g#vO!k(}i~Og$|q!]$|q#`$|q$O$|q~P!0{O!Y'fa!]'fa~P#/XO!g7lO~O!]/sO!Y)Oi~P#/XO!]/sO!Y)Oi~O!Y7oO~Oh%VOr7tO!l%dO(q'nO~Oj7vO!g#vO~Or7yO!g#vO(q'nO~O!Q)|O'x)}O(y%POn'ia(x'ia!]'ia#`'ia~Og'ia$O'ia~P&3vO!Q)|O'x)}On'ka(x'ka(y'ka!]'ka#`'ka~Og'ka$O'ka~P&4iO!Y7{O~Og%Oq!]%Oq#`%Oq$O%Oq~P!0{Og(^q!](^q~P!0{O#`7|Og(^q!](^q~P!0{Oa$oy!]$oy'y$oy'v$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:aO!g6hO~O!]5RO!_)Pa~O!_'^OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(`$Ta(q$Ta(x$Ta(y$Ta~O%i6|O~P&7ZO%^8QOa%[i!_%[i'y%[i!]%[i~Oa#cy!]#cy'y#cy'v#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:aO[8SO~Ob8UO(S+nO(UTO(XUO~O!]0}O!^)Wi~O`8YO~O(d(zO!]'oX!^'oX~O!]5kO!^)Ta~O!^8cO~P%:YO(n!sO~P$${O#[8dO~O!_1gO~O!_1gO%i8fO~On8iO!_1gO%i8fO~O[8nO!]'ra!^'ra~O!]1rO!^)Ui~O!k8rO~O!k8sO~O!k8vO~O!k8vO~P%[Oa8xO~O!g8yO~O!k8zO~O!](vi!^(vi~P#B]Oa%mO#`9SO'y%mO~O!](sy!k(sya(sy'y(sy~P!:aO!](hO!k(ry~O%i9VO~P&7ZO!_'^O%i9VO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'y$|q(`$|q(q$|q!k$|q!Y$|q'v$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/XO#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'y'ia(`'ia(q'ia!k'ia!Y'ia'v'iav'ia!_'ia%i'ia!g'ia~P&3vO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'y'ka(`'ka(q'ka!k'ka!Y'ka'v'kav'ka!_'ka%i'ka!g'ka~P&4iO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'y%Oq(`%Oq(q%Oq!k%Oq!Y%Oq'v%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/XO!]'Xi!k'Xi~P!:aO$O#cq!]#cq!^#cq~P#B]O(x$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(`%aa(q%aa!]%aa!^%aa~On%aa!Q%aa'x%aa(y%aa~P&HnO(y%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(`%ca(q%ca!]%ca!^%ca~On%ca!Q%ca'x%ca(x%ca~P&JuOn=}O!Q)|O'x)}O(y%PO~P&HnOn=}O!Q)|O'x)}O(x$}O~P&JuOR0cO!Q0cO!S0dO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'x}a(`}a(q}a(x}a(y}a!]}a!^}a~O!Q)|O'x)}OP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(`$sa(q$sa(x$sa(y$sa!]$sa!^$sa~O!Q)|O'x)}OP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(`$ua(q$ua(x$ua(y$ua!]$ua!^$ua~On=}O!Q)|O'x)}O(x$}O(y%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(`%Ta(q%Ta!]%Ta!^%Ta~P'%zO$O$mq!]$mq!^$mq~P#B]O$O$oq!]$oq!^$oq~P#B]O!^9dO~O$O9eO~P!0{O!g#vO!]'di!k'di~O!g#vO(q'nO!]'di!k'di~O!]/kO!k(}q~O!Y'fi!]'fi~P#/XO!]/sO!Y)Oq~Or9lO!g#vO(q'nO~O[9nO!Y9mO~P#/XO!Y9mO~Oj9tO!g#vO~Og(^y!](^y~P!0{O!]'ma!_'ma~P#/XOa%[q!_%[q'y%[q!]%[q~P#/XO[9yO~O!]0}O!^)Wq~O#`9}O!]'oa!^'oa~O!]5kO!^)Ti~P#B]O!S:PO~O!_1gO%i:SO~O(UTO(XUO(d:XO~O!]1rO!^)Uq~O!k:[O~O!k:]O~O!k:^O~O!k:^O~P%[O#`:aO!]#hy!^#hy~O!]#hy!^#hy~P#B]O%i:fO~P&7ZO!_'^O%i:fO~O$O#|y!]#|y!^#|y~P#B]OP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(`$|i(q$|i!]$|i!^$|i~P'%zO!Q)|O'x)}O(y%POP'haR'ha['haj'han'har'ha!S'ha!l'ha!p'ha#R'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#v'ha#x'ha#z'ha#{'ha$O'ha(`'ha(q'ha(x'ha!]'ha!^'ha~O!Q)|O'x)}OP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(`'ja(q'ja(x'ja(y'ja!]'ja!^'ja~O(x$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'x%ai(`%ai(q%ai(y%ai!]%ai!^%ai~O(y%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'x%ci(`%ci(q%ci(x%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#B]O$O#cy!]#cy!^#cy~P#B]O!g#vO!]'dq!k'dq~O!]/kO!k(}y~O!Y'fq!]'fq~P#/XOr:pO!g#vO(q'nO~O[:tO!Y:sO~P#/XO!Y:sO~Og(^!R!](^!R~P!0{Oa%[y!_%[y'y%[y!]%[y~P#/XO!]0}O!^)Wy~O!]5kO!^)Tq~O(S:zO~O!_1gO%i:}O~O!k;QO~O%i;VO~P&7ZOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(`$|q(q$|q!]$|q!^$|q~P'%zO!Q)|O'x)}O(y%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(`'ia(q'ia(x'ia!]'ia!^'ia~O!Q)|O'x)}OP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(`'ka(q'ka(x'ka(y'ka!]'ka!^'ka~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(`%Oq(q%Oq!]%Oq!^%Oq~P'%zOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!0{O!Y;ZO~P#/XOr;[O!g#vO(q'nO~O[;^O!Y;ZO~P#/XO!]'oq!^'oq~P#B]O!]#h!Z!^#h!Z~P#B]O#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'y%e!Z(`%e!Z(q%e!Z!k%e!Z!Y%e!Z'v%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/XOr;fO!g#vO(q'nO~O!Y;gO~P#/XOr;nO!g#vO(q'nO~O!Y;oO~P#/XOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(`%e!Z(q%e!Z!]%e!Z!^%e!Z~P'%zOr;rO!g#vO(q'nO~Ov(eX~P1qO!Q%qO~P!)PO(T!lO~P!)PO!YfX!]fX#`fX~P%0kOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(`]X(q]X(x]X(y]X~O!gfX!k]X!kfX(qfX~P'JsOP;vOQ;vOSfOd=rOe!iOpkOr;vOskOtkOzkO|;vO!O;vO!SWO!WkO!XkO!_XO!i;yO!lZO!o;vO!p;vO!q;vO!s;zO!u;}O!x!hO$W!kO$n=pO(S)ZO(UTO(XUO(`VO(n[O~O!]<ZO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<fO!S${O!_$|O!i=wO!l$xO#j<lO$W%_O$t<hO$v<jO$y%`O(S(tO(UTO(XUO(`$uO(x$}O(y%PO~Ol)bO~P( iOr!eX(q!eX~P# }Or(iX(q(iX~P#!pO!^]X!^fX~P'JsO!YfX!Y$zX!]fX!]$zX#`fX~P!/wO#k<OO~O!g#vO#k<OO~O#`<`O~Oj<SO~O#`<pO!](vX!^(vX~O#`<`O!](tX!^(tX~O#k<qO~Og<sO~P!0{O#k<yO~O#k<zO~O!g#vO#k<{O~O!g#vO#k<qO~O$O<|O~P#B]O#k<}O~O#k=OO~O#k=TO~O#k=UO~O#k=VO~O#k=WO~O$O=XO~P!0{O$O=YO~P!0{Ok#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~'}T#o!X'{(T#ps#n#qr!Q'|$]'|(S$_(d~",goto:"$8g)[PPPPPP)]PP)`P)qP+R/WPPPP6bPP6xPP<pPPP@dP@zP@zPPP@zPCSP@zP@zP@zPCWPC]PCzPHtPPPHxPPPPHxK{PPPLRLsPHxPHxPP! RHxPPPHxPHxP!#YHxP!&p!'u!(OP!(r!(v!(r!,TPPPPPPP!,t!'uPP!-U!.vP!2SHxHx!2X!5e!:R!:R!>QPPP!>YHxPPPPPPPPP!AiP!BvPPHx!DXPHxPHxHxHxHxHxPHx!EkP!HuP!K{P!LP!LZ!L_!L_P!HrP!Lc!LcP# iP# mHxPHx# s#$xCW@zP@zP@z@zP#&V@z@z#(i@z#+a@z#-m@z@z#.]#0q#0q#0v#1P#0q#1[PP#0qP@z#1t@z#5s@z@z6bPPP#9xPPP#:c#:cP#:cP#:y#:cPP#;PP#:vP#:v#;d#:v#<O#<U#<X)`#<[)`P#<c#<c#<cP)`P)`P)`P)`PP)`P#<i#<lP#<l)`P#<pP#<sP)`P)`P)`P)`P)`P)`)`PP#<y#=P#=[#=b#=h#=n#=t#>S#>Y#>d#>j#>t#>z#?[#?b#@S#@f#@l#@r#AQ#Ag#C[#Cj#Cq#E]#Ek#G]#Gk#Gq#Gw#G}#HX#H_#He#Ho#IR#IXPPPPPPPPPPP#I_PPPPPPP#JS#MZ#Ns#Nz$ SPPP$&nP$&w$)p$0Z$0^$0a$1`$1c$1j$1rP$1x$1{P$2i$2m$3e$4s$4x$5`PP$5e$5k$5o$5r$5v$5z$6v$7_$7v$7z$7}$8Q$8W$8Z$8_$8cR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0w+fQ1S+rQ1y,fQ3W.bQ5V0vQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:379,context:ad,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,236,242,244,246,248,251,257,263,265,267,269,271,273,274,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[pd],skippedNodes:[0,5,6,277],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Vp(Y!b'{0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(W#S$i&j'|0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Vp(Y!b'|0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(U':f$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Y!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Vp(Y!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Vp(Y!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Y!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Y!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(VpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(VpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Vp(Y!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(n%1l(Vp(Y!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Vp(Y!b$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Vp(Y!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Vp(Y!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(y+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(X';W$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(VpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(VpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(VpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(VpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Vp(Y!b(T%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Vp(Y!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Vp(Y!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Vp(Y!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Vp(Y!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Y!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Y!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Y!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Y!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Y!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Y!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Vp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Vp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Vp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Vp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(VpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(VpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Vp(Y!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Vp(Y!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Vp(Y!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Vp(Y!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Vp(Y!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Vp(Y!b'}0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Vp(Y!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Y!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Y!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(VpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(VpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Vp(Y!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Vp(Y!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Vp(Y!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Vp(Y!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(q(Ct$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Vp(Y!b(`+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Vp(Y!b(S,2j$_#t(d$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Vp(Y!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Vp(Y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(x+JY$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Vp(Y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Vp(Y!b'{0/l$]#t(S,2j(d$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Vp(Y!b'|0/l$]#t(S,2j(d$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[cd,hd,ud,fd,2,3,4,5,6,7,8,9,10,11,12,13,14,ld,new vu("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(b~~",141,339),new vu("j~RQYZXz{^~^O(P~~aP!P!Qd~iO(Q~~",25,322)],topRules:{Script:[0,7],SingleExpression:[1,275],SingleClassItem:[2,276]},dialects:{jsx:0,ts:15098},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:326,get:t=>gd[t]||-1},{term:342,get:t=>md[t]||-1},{term:95,get:t=>vd[t]||-1}],tokenPrec:15124});let yd=[],wd=[];function Od(t){if(t<768)return!1;for(let e=0,n=yd.length;;){let i=e+n>>1;if(t<yd[i])n=i;else{if(!(t>=wd[i]))return!0;e=i+1}if(e==n)return!1}}function Sd(t){return t>=127462&&t<=127487}function xd(t,e,n=!0,i=!0){return(n?kd:Cd)(t,e,i)}function kd(t,e,n){if(e==t.length)return e;e&&Md(t.charCodeAt(e))&&Ed(t.charCodeAt(e-1))&&e--;let i=Ad(t,e);for(e+=Pd(i);e<t.length;){let r=Ad(t,e);if(8205==i||8205==r||n&&Od(r))e+=Pd(r),i=r;else{if(!Sd(r))break;{let n=0,i=e-2;for(;i>=0&&Sd(Ad(t,i));)n++,i-=2;if(n%2==0)break;e+=2}}}return e}function Cd(t,e,n){for(;e>0;){let i=kd(t,e-2,n);if(i<e)return i;e--}return 0}function Ad(t,e){let n=t.charCodeAt(e);if(!Ed(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return Md(i)?i-56320+(n-55296<<10)+65536:n}function Md(t){return t>=56320&&t<57344}function Ed(t){return t>=55296&&t<56320}function Pd(t){return t<65536?1:2}(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t=>t?parseInt(t,36):1));for(let e=0,n=0;e<t.length;e++)(e%2?wd:yd).push(n+=t[e])})();class Td{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){[t,e]=Id(this,t,e);let i=[];return this.decompose(0,t,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(e,this.length,i,1),Dd.from(i,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=Id(this,t,e);let n=[];return this.decompose(t,e,n,0),Dd.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),i=new Nd(this),r=new Nd(t);for(let t=e,o=e;;){if(i.next(t),r.next(t),t=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(o+=i.value.length,i.done||o>=n)return!0}}iter(t=1){return new Nd(this,t)}iterRange(t,e=this.length){return new Ld(this,t,e)}iterLines(t,e){let n;if(null==t)n=this.iter();else{null==e&&(e=this.lines+1);let i=this.line(t).from;n=this.iterRange(i,Math.max(i,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new jd(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new $d(t):Dd.from($d.split(t,[])):Td.empty}}class $d extends Td{constructor(t,e=function(t){let e=-1;for(let n of t)e+=n.length+1;return e}(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,i){for(let r=0;;r++){let o=this.text[r],s=i+o.length;if((e?n:s)>=t)return new _d(i,s,n,o);i=s+1,n++}}decompose(t,e,n,i){let r=t<=0&&e>=this.length?this:new $d(Bd(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(1&i){let t=n.pop(),e=Rd(r.text,t.text.slice(),0,r.length);if(e.length<=32)n.push(new $d(e,t.length+r.length));else{let t=e.length>>1;n.push(new $d(e.slice(0,t)),new $d(e.slice(t)))}}else n.push(r)}replace(t,e,n){if(!(n instanceof $d))return super.replace(t,e,n);[t,e]=Id(this,t,e);let i=Rd(this.text,Rd(n.text,Bd(this.text,0,t)),e),r=this.length+n.length-(e-t);return i.length<=32?new $d(i,r):Dd.from($d.split(i,[]),r)}sliceString(t,e=this.length,n="\n"){[t,e]=Id(this,t,e);let i="";for(let r=0,o=0;r<=e&&o<this.text.length;o++){let s=this.text[o],a=r+s.length;r>t&&o&&(i+=n),t<a&&e>r&&(i+=s.slice(Math.max(0,t-r),e-r)),r=a+1}return i}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],i=-1;for(let r of t)n.push(r),i+=r.length+1,32==n.length&&(e.push(new $d(n,i)),n=[],i=-1);return i>-1&&e.push(new $d(n,i)),e}}class Dd extends Td{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let e of t)this.lines+=e.lines}lineInner(t,e,n,i){for(let r=0;;r++){let o=this.children[r],s=i+o.length,a=n+o.lines-1;if((e?a:s)>=t)return o.lineInner(t,e,n,i);i=s+1,n=a+1}}decompose(t,e,n,i){for(let r=0,o=0;o<=e&&r<this.children.length;r++){let s=this.children[r],a=o+s.length;if(t<=a&&e>=o){let r=i&((o<=t?1:0)|(a>=e?2:0));o>=t&&a<=e&&!r?n.push(s):s.decompose(t-o,e-o,n,r)}o=a+1}}replace(t,e,n){if([t,e]=Id(this,t,e),n.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let o=this.children[i],s=r+o.length;if(t>=r&&e<=s){let a=o.replace(t-r,e-r,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let r=this.children.slice();return r[i]=a,new Dd(r,this.length-(e-t)+n.length)}return super.replace(r,s,a)}r=s+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n="\n"){[t,e]=Id(this,t,e);let i="";for(let r=0,o=0;r<this.children.length&&o<=e;r++){let s=this.children[r],a=o+s.length;o>t&&r&&(i+=n),t<a&&e>o&&(i+=s.sliceString(t-o,e-o,n)),o=a+1}return i}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof Dd))return 0;let n=0,[i,r,o,s]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;i+=e,r+=e){if(i==o||r==s)return n;let a=this.children[i],l=t.children[r];if(a!=l)return n+a.scanIdentical(l,e);n+=a.length+1}}static from(t,e=t.reduce(((t,e)=>t+e.length+1),-1)){let n=0;for(let e of t)n+=e.lines;if(n<32){let n=[];for(let e of t)e.flatten(n);return new $d(n,e)}let i=Math.max(32,n>>5),r=i<<1,o=i>>1,s=[],a=0,l=-1,c=[];function h(t){let e;if(t.lines>r&&t instanceof Dd)for(let e of t.children)h(e);else t.lines>o&&(a>o||!a)?(u(),s.push(t)):t instanceof $d&&a&&(e=c[c.length-1])instanceof $d&&t.lines+e.lines<=32?(a+=t.lines,l+=t.length+1,c[c.length-1]=new $d(e.text.concat(t.text),e.length+1+t.length)):(a+t.lines>i&&u(),a+=t.lines,l+=t.length+1,c.push(t))}function u(){0!=a&&(s.push(1==c.length?c[0]:Dd.from(c,l)),l=-1,a=c.length=0)}for(let e of t)h(e);return u(),1==s.length?s[0]:new Dd(s,e)}}function Rd(t,e,n=0,i=1e9){for(let r=0,o=0,s=!0;o<t.length&&r<=i;o++){let a=t[o],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),s?(e[e.length-1]+=a,s=!1):e.push(a)),r=l+1}return e}function Bd(t,e,n){return Rd(t,[""],e,n)}Td.empty=new $d([""],0);class Nd{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof $d?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],o=r>>1,s=i instanceof $d?i.text.length:i.children.length;if(o==(e>0?s:0)){if(0==n)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(e>0?0:1)){if(this.offsets[n]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(i instanceof $d){let r=i.text[o+(e<0?-1:0)];if(this.offsets[n]+=e,r.length>Math.max(0,t))return this.value=0==t?r:e>0?r.slice(t):r.slice(0,r.length-t),this;t-=r.length}else{let r=i.children[o+(e<0?-1:0)];t>r.length?(t-=r.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(r),this.offsets.push(e>0?1:(r instanceof $d?r.text.length:r.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class Ld{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new Nd(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:i}=this.cursor.next(t);return this.pos+=(i.length+t)*e,this.value=i.length<=n?i:e<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class jd{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:i}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Td.prototype[Symbol.iterator]=function(){return this.iter()},Nd.prototype[Symbol.iterator]=Ld.prototype[Symbol.iterator]=jd.prototype[Symbol.iterator]=function(){return this});class _d{constructor(t,e,n,i){this.from=t,this.to=e,this.number=n,this.text=i}get length(){return this.to-this.from}}function Id(t,e,n){return[e=Math.max(0,Math.min(t.length,e)),Math.max(e,Math.min(t.length,n))]}function zd(t,e,n=!0,i=!0){return xd(t,e,n,i)}function Qd(t,e){let n=t.charCodeAt(e);if(!((i=n)>=55296&&i<56320&&e+1!=t.length))return n;var i;let r=t.charCodeAt(e+1);return function(t){return t>=56320&&t<57344}(r)?r-56320+(n-55296<<10)+65536:n}function Hd(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Vd(t){return t<65536?1:2}const Wd=/\r\n?|\n/;var Fd=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Fd||(Fd={}));class qd{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,i=0;e<this.sections.length;){let r=this.sections[e++],o=this.sections[e++];o<0?(t(n,i,r),i+=r):i+=o,n+=r}}iterChangedRanges(t,e=!1){Yd(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],i=this.sections[e++];i<0?t.push(n,i):t.push(i,n)}return new qd(t)}composeDesc(t){return this.empty?t:t.empty?this:Ud(this,t)}mapDesc(t,e=!1){return t.empty?this:Gd(this,t,e)}mapPos(t,e=-1,n=Fd.Simple){let i=0,r=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=i+s;if(a<0){if(l>t)return r+(t-i);r+=s}else{if(n!=Fd.Simple&&l>=t&&(n==Fd.TrackDel&&i<t&&l>t||n==Fd.TrackBefore&&i<t||n==Fd.TrackAfter&&l>t))return null;if(l>t||l==t&&e<0&&!s)return t==i||e<0?r:r+a;r+=a}i=l}if(t>i)throw new RangeError(`Position ${t} is out of range for changeset of length ${i}`);return r}touchesRange(t,e=t){for(let n=0,i=0;n<this.sections.length&&i<=e;){let r=i+this.sections[n++];if(this.sections[n++]>=0&&i<=e&&r>=t)return!(i<t&&r>e)||"cover";i=r}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],i=this.sections[e++];t+=(t?" ":"")+n+(i>=0?":"+i:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some((t=>"number"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new qd(t)}static create(t){return new qd(t)}}class Xd extends qd{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Yd(this,((e,n,i,r,o)=>t=t.replace(i,i+(n-e),o)),!1),t}mapDesc(t,e=!1){return Gd(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let i=0,r=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s>=0){e[i]=s,e[i+1]=o;let a=i>>1;for(;n.length<a;)n.push(Td.empty);n.push(o?t.slice(r,r+o):Td.empty)}r+=o}return new Xd(e,n)}compose(t){return this.empty?t:t.empty?this:Ud(this,t,!0)}map(t,e=!1){return t.empty?this:Gd(this,t,e,!0)}iterChanges(t,e=!1){Yd(this,t,e)}get desc(){return qd.create(this.sections)}filter(t){let e=[],n=[],i=[],r=new Jd(this);t:for(let o=0,s=0;;){let a=o==t.length?1e9:t[o++];for(;s<a||s==a&&0==r.len;){if(r.done)break t;let t=Math.min(r.len,a-s);Kd(i,t,-1);let o=-1==r.ins?-1:0==r.off?r.ins:0;Kd(e,t,o),o>0&&Zd(n,e,r.text),r.forward(t),s+=t}let l=t[o++];for(;s<l;){if(r.done)break t;let t=Math.min(r.len,l-s);Kd(e,t,-1),Kd(i,t,-1==r.ins?-1:0==r.off?r.ins:0),r.forward(t),s+=t}}return{changes:new Xd(e,n),filtered:qd.create(i)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],i=this.sections[e+1];i<0?t.push(n):0==i?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let i=[],r=[],o=0,s=null;function a(t=!1){if(!t&&!i.length)return;o<e&&Kd(i,e-o,-1);let n=new Xd(i,r);s=s?s.compose(n.map(s)):n,i=[],r=[],o=0}return function t(l){if(Array.isArray(l))for(let e of l)t(e);else if(l instanceof Xd){if(l.length!=e)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${e})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:t,to:s=t,insert:c}=l;if(t>s||t<0||s>e)throw new RangeError(`Invalid change range ${t} to ${s} (in doc of length ${e})`);let h=c?"string"==typeof c?Td.of(c.split(n||Wd)):c:Td.empty,u=h.length;if(t==s&&0==u)return;t<o&&a(),t>o&&Kd(i,t-o,-1),Kd(i,s-t,u),Zd(r,i,h),o=s}}(t),a(!s),s}static empty(t){return new Xd(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let i=0;i<t.length;i++){let r=t[i];if("number"==typeof r)e.push(r,-1);else{if(!Array.isArray(r)||"number"!=typeof r[0]||r.some(((t,e)=>e&&"string"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==r.length)e.push(r[0],0);else{for(;n.length<i;)n.push(Td.empty);n[i]=Td.of(r.slice(1)),e.push(r[0],n[i].length)}}}return new Xd(e,n)}static createSet(t,e){return new Xd(t,e)}}function Kd(t,e,n,i=!1){if(0==e&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&0==e&&0==t[r]?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Zd(t,e,n){if(0==n.length)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Td.empty);t.push(n)}}function Yd(t,e,n){let i=t.inserted;for(let r=0,o=0,s=0;s<t.sections.length;){let a=t.sections[s++],l=t.sections[s++];if(l<0)r+=a,o+=a;else{let c=r,h=o,u=Td.empty;for(;c+=a,h+=l,l&&i&&(u=u.append(i[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)a=t.sections[s++],l=t.sections[s++];e(r,c,o,h,u),r=c,o=h}}}function Gd(t,e,n,i=!1){let r=[],o=i?[]:null,s=new Jd(t),a=new Jd(e);for(let t=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(-1==s.ins&&-1==a.ins){let t=Math.min(s.len,a.len);Kd(r,t,-1),s.forward(t),a.forward(t)}else if(a.ins>=0&&(s.ins<0||t==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!n))){let e=a.len;for(Kd(r,a.ins,-1);e;){let n=Math.min(s.len,e);s.ins>=0&&t<s.i&&s.len<=n&&(Kd(r,0,s.ins),o&&Zd(o,r,s.text),t=s.i),s.forward(n),e-=n}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?Xd.createSet(r,o):qd.create(r);throw new Error("Mismatched change set lengths")}{let e=0,n=s.len;for(;n;)if(-1==a.ins){let t=Math.min(n,a.len);e+=t,n-=t,a.forward(t)}else{if(!(0==a.ins&&a.len<n))break;n-=a.len,a.next()}Kd(r,e,t<s.i?s.ins:0),o&&t<s.i&&Zd(o,r,s.text),t=s.i,s.forward(s.len-n)}}}}function Ud(t,e,n=!1){let i=[],r=n?[]:null,o=new Jd(t),s=new Jd(e);for(let t=!1;;){if(o.done&&s.done)return r?Xd.createSet(i,r):qd.create(i);if(0==o.ins)Kd(i,o.len,0,t),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(o.len2,s.len),n=i.length;if(-1==o.ins){let n=-1==s.ins?-1:s.off?0:s.ins;Kd(i,e,n,t),r&&n&&Zd(r,i,s.text)}else-1==s.ins?(Kd(i,o.off?0:o.len,e,t),r&&Zd(r,i,o.textBit(e))):(Kd(i,o.off?0:o.len,s.off?0:s.ins,t),r&&!s.off&&Zd(r,i,s.text));t=(o.ins>e||s.ins>=0&&s.len>e)&&(t||i.length>n),o.forward2(e),s.forward(e)}}else Kd(i,0,s.ins,t),r&&Zd(r,i,s.text),s.next()}}class Jd{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?Td.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?Td.empty:e[n].slice(this.off,null==t?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class tf{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let t=7&this.flags;return 7==t?null:t}get goalColumn(){let t=this.flags>>6;return 16777215==t?void 0:t}map(t,e=-1){let n,i;return this.empty?n=i=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),i=t.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new tf(n,i,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return ef.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return ef.range(this.anchor,n)}eq(t,e=!1){return!(this.anchor!=t.anchor||this.head!=t.head||e&&this.empty&&this.assoc!=t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return ef.range(t.anchor,t.head)}static create(t,e,n){return new tf(t,e,n)}}class ef{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:ef.create(this.ranges.map((n=>n.map(t,e))),this.mainIndex)}eq(t,e=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(t.ranges[n],e))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new ef([this.main],0)}addRange(t,e=!0){return ef.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,ef.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((t=>t.toJSON())),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ef(t.ranges.map((t=>tf.fromJSON(t))),t.main)}static single(t,e=t){return new ef([ef.range(t,e)],0)}static create(t,e=0){if(0==t.length)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<t.length;i++){let r=t[i];if(r.empty?r.from<=n:r.from<n)return ef.normalized(t.slice(),e);n=r.to}return new ef(t,e)}static cursor(t,e=0,n,i){return tf.create(t,t,(0==e?0:e<0?8:16)|(null==n?7:Math.min(6,n))|(null!=i?i:16777215)<<6)}static range(t,e,n,i){let r=(null!=n?n:16777215)<<6|(null==i?7:Math.min(6,i));return e<t?tf.create(e,t,48|r):tf.create(t,e,(e>t?8:0)|r)}static normalized(t,e=0){let n=t[e];t.sort(((t,e)=>t.from-e.from)),e=t.indexOf(n);for(let n=1;n<t.length;n++){let i=t[n],r=t[n-1];if(i.empty?i.from<=r.to:i.from<r.to){let o=r.from,s=Math.max(i.to,r.to);n<=e&&e--,t.splice(--n,2,i.anchor>i.head?ef.range(s,o):ef.range(o,s))}}return new ef(t,e)}}function nf(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let rf=0;class of{constructor(t,e,n,i,r){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=i,this.id=rf++,this.default=t([]),this.extensions="function"==typeof r?r(this):r}get reader(){return this}static define(t={}){return new of(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:sf),!!t.static,t.enables)}of(t){return new af([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new af(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new af(t,this,2,e)}from(t,e){return e||(e=t=>t),this.compute([t],(n=>e(n.field(t))))}}function sf(t,e){return t==e||t.length==e.length&&t.every(((t,n)=>t===e[n]))}class af{constructor(t,e,n,i){this.dependencies=t,this.facet=e,this.type=n,this.value=i,this.id=rf++}dynamicSlot(t){var e;let n=this.value,i=this.facet.compareInput,r=this.id,o=t[r]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:1&(null!==(e=t[n.id])&&void 0!==e?e:1)||c.push(t[n.id]);return{create(t){return t.values[o]=n(t),1},update(t,e){if(a&&e.docChanged||l&&(e.docChanged||e.selection)||cf(t,c)){let e=n(t);if(s?!lf(e,t.values[o],i):!i(e,t.values[o]))return t.values[o]=e,1}return 0},reconfigure:(t,e)=>{let a,l=e.config.address[r];if(null!=l){let r=wf(e,l);if(this.dependencies.every((n=>n instanceof of?e.facet(n)===t.facet(n):!(n instanceof df)||e.field(n,!1)==t.field(n,!1)))||(s?lf(a=n(t),r,i):i(a=n(t),r)))return t.values[o]=r,0}else a=n(t);return t.values[o]=a,1}}}}function lf(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function cf(t,e){let n=!1;for(let i of e)1&yf(t,i)&&(n=!0);return n}function hf(t,e,n){let i=n.map((e=>t[e.id])),r=n.map((t=>t.type)),o=i.filter((t=>!(1&t))),s=t[e.id]>>1;function a(t){let n=[];for(let e=0;e<i.length;e++){let o=wf(t,i[e]);if(2==r[e])for(let t of o)n.push(t);else n.push(o)}return e.combine(n)}return{create(t){for(let e of i)yf(t,e);return t.values[s]=a(t),1},update(t,n){if(!cf(t,o))return 0;let i=a(t);return e.compare(i,t.values[s])?0:(t.values[s]=i,1)},reconfigure(t,r){let o=cf(t,i),l=r.config.facets[e.id],c=r.facet(e);if(l&&!o&&sf(n,l))return t.values[s]=c,0;let h=a(t);return e.compare(h,c)?(t.values[s]=c,0):(t.values[s]=h,1)}}}const uf=of.define({static:!0});class df{constructor(t,e,n,i,r){this.id=t,this.createF=e,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}static define(t){let e=new df(rf++,t.create,t.update,t.compare||((t,e)=>t===e),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(uf).find((t=>t.field==this));return((null==e?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:t=>(t.values[e]=this.create(t),1),update:(t,n)=>{let i=t.values[e],r=this.updateF(i,n);return this.compareF(i,r)?0:(t.values[e]=r,1)},reconfigure:(t,n)=>{let i,r=t.facet(uf),o=n.facet(uf);return(i=r.find((t=>t.field==this)))&&i!=o.find((t=>t.field==this))?(t.values[e]=i.create(t),1):null!=n.config.address[this.id]?(t.values[e]=n.field(this),0):(t.values[e]=this.create(t),1)}}}init(t){return[this,uf.of({field:this,create:t})]}get extension(){return this}}function ff(t){return e=>new gf(e,t)}const pf={highest:ff(0),high:ff(1),default:ff(2),low:ff(3),lowest:ff(4)};class gf{constructor(t,e){this.inner=t,this.prec=e}}class mf{of(t){return new vf(this,t)}reconfigure(t){return mf.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class vf{constructor(t,e){this.compartment=t,this.inner=e}}class bf{constructor(t,e,n,i,r,o){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let i=[],r=Object.create(null),o=new Map;for(let n of function(t,e,n){let i=[[],[],[],[],[]],r=new Map;return function t(o,s){let a=r.get(o);if(null!=a){if(a<=s)return;let t=i[a].indexOf(o);t>-1&&i[a].splice(t,1),o instanceof vf&&n.delete(o.compartment)}if(r.set(o,s),Array.isArray(o))for(let e of o)t(e,s);else if(o instanceof vf){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let i=e.get(o.compartment)||o.inner;n.set(o.compartment,i),t(i,s)}else if(o instanceof gf)t(o.inner,o.prec);else if(o instanceof df)i[s].push(o),o.provides&&t(o.provides,s);else if(o instanceof af)i[s].push(o),o.facet.extensions&&t(o.facet.extensions,2);else{let e=o.extension;if(!e)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);t(e,s)}}(t,2),i.reduce(((t,e)=>t.concat(e)))}(t,e,o))n instanceof df?i.push(n):(r[n.facet.id]||(r[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let t of i)s[t.id]=l.length<<1,l.push((e=>t.slot(e)));let c=null==n?void 0:n.config.facets;for(let t in r){let e=r[t],i=e[0].facet,o=c&&c[t]||[];if(e.every((t=>0==t.type)))if(s[i.id]=a.length<<1|1,sf(o,e))a.push(n.facet(i));else{let t=i.combine(e.map((t=>t.value)));a.push(n&&i.compare(t,n.facet(i))?n.facet(i):t)}else{for(let t of e)0==t.type?(s[t.id]=a.length<<1|1,a.push(t.value)):(s[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));s[i.id]=l.length<<1,l.push((t=>hf(t,i,e)))}}let h=l.map((t=>t(s)));return new bf(t,o,h,s,a,r)}}function yf(t,e){if(1&e)return 2;let n=e>>1,i=t.status[n];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function wf(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}const Of=of.define(),Sf=of.define({combine:t=>t.some((t=>t)),static:!0}),xf=of.define({combine:t=>t.length?t[0]:void 0,static:!0}),kf=of.define(),Cf=of.define(),Af=of.define(),Mf=of.define({combine:t=>!!t.length&&t[0]});class Ef{constructor(t,e){this.type=t,this.value=e}static define(){return new Pf}}class Pf{of(t){return new Ef(this,t)}}class Tf{constructor(t){this.map=t}of(t){return new $f(this,t)}}class $f{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return void 0===e?void 0:e==this.value?this:new $f(this.type,e)}is(t){return this.type==t}static define(t={}){return new Tf(t.map||(t=>t))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let i of t){let t=i.map(e);t&&n.push(t)}return n}}$f.reconfigure=$f.define(),$f.appendConfig=$f.define();class Df{constructor(t,e,n,i,r,o){this.startState=t,this.changes=e,this.selection=n,this.effects=i,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,n&&nf(n,e.newLength),r.some((t=>t.type==Df.time))||(this.annotations=r.concat(Df.time.of(Date.now())))}static create(t,e,n,i,r,o){return new Df(t,e,n,i,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(Df.userEvent);return!(!e||!(e==t||e.length>t.length&&e.slice(0,t.length)==t&&"."==e[t.length]))}}function Rf(t,e){let n=[];for(let i=0,r=0;;){let o,s;if(i<t.length&&(r==e.length||e[r]>=t[i]))o=t[i++],s=t[i++];else{if(!(r<e.length))return n;o=e[r++],s=e[r++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Bf(t,e,n){var i;let r,o,s;return n?(r=e.changes,o=Xd.empty(e.changes.length),s=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(r)),{changes:s,selection:e.selection?e.selection.map(o):null===(i=t.selection)||void 0===i?void 0:i.map(r),effects:$f.mapEffects(t.effects,r).concat($f.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Nf(t,e,n){let i=e.selection,r=_f(e.annotations);return e.userEvent&&(r=r.concat(Df.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xd?e.changes:Xd.of(e.changes||[],n,t.facet(xf)),selection:i&&(i instanceof ef?i:ef.single(i.anchor,i.head)),effects:_f(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function Lf(t,e,n){let i=Nf(t,e.length?e[0]:{},t.doc.length);e.length&&!1===e[0].filter&&(n=!1);for(let r=1;r<e.length;r++){!1===e[r].filter&&(n=!1);let o=!!e[r].sequential;i=Bf(i,Nf(t,e[r],o?i.changes.newLength:t.doc.length),o)}let r=Df.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function(t){let e=t.startState,n=e.facet(Af),i=t;for(let r=n.length-1;r>=0;r--){let o=n[r](t);o&&Object.keys(o).length&&(i=Bf(i,Nf(e,o,t.changes.newLength),!0))}return i==t?t:Df.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}(n?function(t){let e=t.startState,n=!0;for(let i of e.facet(kf)){let e=i(t);if(!1===e){n=!1;break}Array.isArray(e)&&(n=!0===n?e:Rf(n,e))}if(!0!==n){let i,r;if(!1===n)r=t.changes.invertedDesc,i=Xd.empty(e.doc.length);else{let e=t.changes.filter(n);i=e.changes,r=e.filtered.mapDesc(e.changes).invertedDesc}t=Df.create(e,i,t.selection&&t.selection.map(r),$f.mapEffects(t.effects,r),t.annotations,t.scrollIntoView)}let i=e.facet(Cf);for(let n=i.length-1;n>=0;n--){let r=i[n](t);t=r instanceof Df?r:Array.isArray(r)&&1==r.length&&r[0]instanceof Df?r[0]:Lf(e,_f(r),!1)}return t}(r):r)}Df.time=Ef.define(),Df.userEvent=Ef.define(),Df.addToHistory=Ef.define(),Df.remote=Ef.define();const jf=[];function _f(t){return null==t?jf:Array.isArray(t)?t:[t]}var If=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(If||(If={}));const zf=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Qf;try{Qf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(t){}class Hf{constructor(t,e,n,i,r,o){this.config=t,this.doc=e,this.selection=n,this.values=i,this.status=t.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let t=0;t<this.config.dynamicSlots.length;t++)yf(this,t<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(null!=n)return yf(this,n),wf(this,n);if(e)throw new RangeError("Field is not present in this state")}update(...t){return Lf(this,t,!0)}applyTransaction(t){let e,n=this.config,{base:i,compartments:r}=n;for(let e of t.effects)e.is(mf.reconfigure)?(n&&(r=new Map,n.compartments.forEach(((t,e)=>r.set(e,t))),n=null),r.set(e.value.compartment,e.value.extension)):e.is($f.reconfigure)?(n=null,i=e.value):e.is($f.appendConfig)&&(n=null,i=_f(i).concat(e.value));n?e=t.startState.values.slice():(n=bf.resolve(i,r,this),e=new Hf(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((t,e)=>e.reconfigure(t,this)),null).values);let o=t.startState.facet(Sf)?t.newSelection:t.newSelection.asSingle();new Hf(n,t.newDoc,o,e,((e,n)=>n.update(e,t)),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:t},range:ef.cursor(e.from+t.length)})))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),i=this.changes(n.changes),r=[n.range],o=_f(n.effects);for(let n=1;n<e.ranges.length;n++){let s=t(e.ranges[n]),a=this.changes(s.changes),l=a.map(i);for(let t=0;t<n;t++)r[t]=r[t].map(l);let c=i.mapDesc(a,!0);r.push(s.range.map(c)),i=i.compose(l),o=$f.mapEffects(o,l).concat($f.mapEffects(_f(s.effects),c))}return{changes:i,selection:ef.create(r,e.mainIndex),effects:o}}changes(t=[]){return t instanceof Xd?t:Xd.of(t,this.doc.length,this.facet(Hf.lineSeparator))}toText(t){return Td.of(t.split(this.facet(Hf.lineSeparator)||Wd))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(yf(this,e),wf(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let i=t[n];i instanceof df&&null!=this.config.address[i.id]&&(e[n]=i.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n)for(let e in n)if(Object.prototype.hasOwnProperty.call(t,e)){let r=n[e],o=t[e];i.push(r.init((t=>r.spec.fromJSON(o,t))))}return Hf.create({doc:t.doc,selection:ef.fromJSON(t.selection),extensions:e.extensions?i.concat([e.extensions]):i})}static create(t={}){let e=bf.resolve(t.extensions||[],new Map),n=t.doc instanceof Td?t.doc:Td.of((t.doc||"").split(e.staticFacet(Hf.lineSeparator)||Wd)),i=t.selection?t.selection instanceof ef?t.selection:ef.single(t.selection.anchor,t.selection.head):ef.single(0);return nf(i,n.length),e.staticFacet(Sf)||(i=i.asSingle()),new Hf(e,n,i,e.dynamicSlots.map((()=>null)),((t,e)=>e.create(t)),null)}get tabSize(){return this.facet(Hf.tabSize)}get lineBreak(){return this.facet(Hf.lineSeparator)||"\n"}get readOnly(){return this.facet(Mf)}phrase(t,...e){for(let e of this.facet(Hf.phrases))if(Object.prototype.hasOwnProperty.call(e,t)){t=e[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,((t,n)=>{if("$"==n)return"$";let i=+(n||1);return!i||i>e.length?t:e[i-1]}))),t}languageDataAt(t,e,n=-1){let i=[];for(let r of this.facet(Of))for(let o of r(this,e,n))Object.prototype.hasOwnProperty.call(o,t)&&i.push(o[t]);return i}charCategorizer(t){return e=this.languageDataAt("wordChars",t).join(""),t=>{if(!/\S/.test(t))return If.Space;if(function(t){if(Qf)return Qf.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||zf.test(n)))return!0}return!1}(t))return If.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return If.Word;return If.Other};var e}wordAt(t){let{text:e,from:n,length:i}=this.doc.lineAt(t),r=this.charCategorizer(t),o=t-n,s=t-n;for(;o>0;){let t=zd(e,o,!1);if(r(e.slice(t,o))!=If.Word)break;o=t}for(;s<i;){let t=zd(e,s);if(r(e.slice(s,t))!=If.Word)break;s=t}return o==s?null:ef.range(o+n,s+n)}}function Vf(t,e,n={}){let i={};for(let e of t)for(let t of Object.keys(e)){let r=e[t],o=i[t];if(void 0===o)i[t]=r;else if(o===r||void 0===r);else{if(!Object.hasOwnProperty.call(n,t))throw new Error("Config merge conflict for field "+t);i[t]=n[t](o,r)}}for(let t in e)void 0===i[t]&&(i[t]=e[t]);return i}Hf.allowMultipleSelections=Sf,Hf.tabSize=of.define({combine:t=>t.length?t[0]:4}),Hf.lineSeparator=xf,Hf.readOnly=Mf,Hf.phrases=of.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every((n=>t[n]==e[n]))}}),Hf.languageData=Of,Hf.changeFilter=kf,Hf.transactionFilter=Cf,Hf.transactionExtender=Af,mf.reconfigure=$f.define();class Wf{eq(t){return this==t}range(t,e=t){return Ff.create(t,e,this)}}Wf.prototype.startSide=Wf.prototype.endSide=0,Wf.prototype.point=!1,Wf.prototype.mapMode=Fd.TrackDel;class Ff{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new Ff(t,e,n)}}function qf(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Xf{constructor(t,e,n,i){this.from=t,this.to=e,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,i=0){let r=n?this.to:this.from;for(let o=i,s=r.length;;){if(o==s)return o;let i=o+s>>1,a=r[i]-t||(n?this.value[i].endSide:this.value[i].startSide)-e;if(i==o)return a>=0?o:s;a>=0?s=i:o=i+1}}between(t,e,n,i){for(let r=this.findIndex(e,-1e9,!0),o=this.findIndex(n,1e9,!1,r);r<o;r++)if(!1===i(this.from[r]+t,this.to[r]+t,this.value[r]))return!1}map(t,e){let n=[],i=[],r=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,h=this.value[a],u=this.from[a]+t,d=this.to[a]+t;if(u==d){let t=e.mapPos(u,h.startSide,h.mapMode);if(null==t)continue;if(l=c=t,h.startSide!=h.endSide&&(c=e.mapPos(u,h.endSide),c<l))continue}else if(l=e.mapPos(u,h.startSide),c=e.mapPos(d,h.endSide),l>c||l==c&&h.startSide>0&&h.endSide<=0)continue;(c-l||h.endSide-h.startSide)<0||(o<0&&(o=l),h.point&&(s=Math.max(s,c-l)),n.push(h),i.push(l-o),r.push(c-o))}return{mapped:n.length?new Xf(i,r,n,s):null,pos:o}}}class Kf{constructor(t,e,n,i){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=i}static create(t,e,n,i){return new Kf(t,e,n,i)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:i=0,filterTo:r=this.length}=t,o=t.filter;if(0==e.length&&!o)return this;if(n&&(e=e.slice().sort(qf)),this.isEmpty)return e.length?Kf.of(e):this;let s=new Gf(this,null,-1).goto(0),a=0,l=[],c=new Zf;for(;s.value||a<e.length;)if(a<e.length&&(s.from-e[a].from||s.startSide-e[a].value.startSide)>=0){let t=e[a++];c.addInner(t.from,t.to,t.value)||l.push(t)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==e.length||this.chunkEnd(s.chunkIndex)<e[a].from)&&(!o||i>this.chunkEnd(s.chunkIndex)||r<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||i>s.to||r<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(Ff.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?Kf.empty:this.nextLayer.update({add:l,filter:o,filterFrom:i,filterTo:r}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],i=-1;for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],s=this.chunk[r],a=t.touchesRange(o,o+s.length);if(!1===a)i=Math.max(i,s.maxPoint),e.push(s),n.push(t.mapPos(o));else if(!0===a){let{mapped:r,pos:a}=s.map(o,t);r&&(i=Math.max(i,r.maxPoint),e.push(r),n.push(a))}}let r=this.nextLayer.map(t);return 0==e.length?r:new Kf(n,e,r||Kf.empty,i)}between(t,e,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],o=this.chunk[i];if(e>=r&&t<=r+o.length&&!1===o.between(r,t-r,e-r,n))return}this.nextLayer.between(t,e,n)}}iter(t=0){return Uf.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Uf.from(t).goto(e)}static compare(t,e,n,i,r=-1){let o=t.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=r)),s=e.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=r)),a=Yf(o,s,n),l=new tp(o,a,r),c=new tp(s,a,r);n.iterGaps(((t,e,n)=>ep(l,t,c,e,n,i))),n.empty&&0==n.length&&ep(l,0,c,0,0,i)}static eq(t,e,n=0,i){null==i&&(i=999999999);let r=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0)),o=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0));if(r.length!=o.length)return!1;if(!r.length)return!0;let s=Yf(r,o),a=new tp(r,s,0).goto(n),l=new tp(o,s,0).goto(n);for(;;){if(a.to!=l.to||!np(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>i)return!0;a.next(),l.next()}}static spans(t,e,n,i,r=-1){let o=new tp(t,null,r).goto(e),s=e,a=o.openStart;for(;;){let t=Math.min(o.to,n);if(o.point){let n=o.activeForPoint(o.to),r=o.pointFrom<e?n.length+1:o.point.startSide<0?n.length:Math.min(n.length,a);i.point(s,t,o.point,n,r,o.pointRank),a=Math.min(o.openEnd(t),n.length)}else t>s&&(i.span(s,t,o.active,a),a=o.openEnd(t));if(o.to>n)return a+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(t,e=!1){let n=new Zf;for(let i of t instanceof Ff?[t]:e?function(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(qf(e,i)>0)return t.slice().sort(qf);e=i}return t}(t):t)n.add(i.from,i.to,i.value);return n.finish()}static join(t){if(!t.length)return Kf.empty;let e=t[t.length-1];for(let n=t.length-2;n>=0;n--)for(let i=t[n];i!=Kf.empty;i=i.nextLayer)e=new Kf(i.chunkPos,i.chunk,e,Math.max(i.maxPoint,e.maxPoint));return e}}Kf.empty=new Kf([],[],null,-1),Kf.empty.nextLayer=Kf.empty;class Zf{finishChunk(t){this.chunks.push(new Xf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new Zf)).add(t,e,n)}addInner(t,e,n){let i=t-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),0))}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(Kf.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=Kf.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function Yf(t,e,n){let i=new Map;for(let e of t)for(let t=0;t<e.chunk.length;t++)e.chunk[t].maxPoint<=0&&i.set(e.chunk[t],e.chunkPos[t]);let r=new Set;for(let t of e)for(let e=0;e<t.chunk.length;e++){let o=i.get(t.chunk[e]);null==o||(n?n.mapPos(o):o)!=t.chunkPos[e]||(null==n?void 0:n.touchesRange(o,o+t.chunk[e].length))||r.add(t.chunk[e])}return r}class Gf{constructor(t,e,n,i=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Uf{constructor(t){this.heap=t}static from(t,e=null,n=-1){let i=[];for(let r=0;r<t.length;r++)for(let o=t[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new Gf(o,e,n,r));return 1==i.length?i[0]:new Uf(i)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let t=this.heap.length>>1;t>=0;t--)Jf(this.heap,t);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let t=this.heap.length>>1;t>=0;t--)Jf(this.heap,t);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),Jf(this.heap,0)}}}function Jf(t,e){for(let n=t[e];;){let i=1+(e<<1);if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class tp{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Uf.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){ip(this.active,t),ip(this.activeTo,t),ip(this.activeRank,t),this.minActive=op(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:i,rank:r}=this.cursor;for(;e<this.activeRank.length&&(r-this.activeRank[e]||i-this.activeTo[e])>0;)e++;rp(this.active,e,n),rp(this.activeTo,e,i),rp(this.activeRank,e,r),t&&rp(t,e,this.cursor.from),this.minActive=op(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>t){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&ip(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let t=this.cursor.value;if(t.point){if(!(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=t,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=t.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let e=n.length-1;e>=0&&n[e]<t;e--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}function ep(t,e,n,i,r,o){t.goto(e),n.goto(i);let s=i+r,a=i,l=i-e;for(;;){let e=t.to+l-n.to,i=e||t.endSide-n.endSide,r=i<0?t.to+l:n.to,c=Math.min(r,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&np(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(a,c,t.point,n.point):c>a&&!np(t.active,n.active)&&o.compareRange(a,c,t.active,n.active),r>s)break;(e||t.openEnd!=n.openEnd)&&o.boundChange&&o.boundChange(r),a=r,i<=0&&t.next(),i>=0&&n.next()}}function np(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function ip(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function rp(t,e,n){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=n}function op(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function sp(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)9==t.charCodeAt(r)?(i+=e-i%e,r++):(i++,r=zd(t,r));return i}function ap(t,e,n,i){for(let i=0,r=0;;){if(r>=e)return i;if(i==t.length)break;r+=9==t.charCodeAt(i)?n-r%n:1,i=zd(t,i)}return!0===i?-1:t.length}const lp="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),cp="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),hp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class up{constructor(t,e){this.rules=[];let{finish:n}=e||{};function i(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function r(t,e,o,s){let a=[],l=/^@(\w+)\b/.exec(t[0]),c=l&&"keyframes"==l[1];if(l&&null==e)return o.push(t[0]+";");for(let n in e){let s=e[n];if(/&/.test(n))r(n.split(/,\s*/).map((e=>t.map((t=>e.replace(/&/,t))))).reduce(((t,e)=>t.concat(e))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");r(i(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?t:t.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let e in t)r(i(e),t[e],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let t=hp[lp]||1;return hp[lp]=t+1,"ͼ"+t.toString(36)}static mount(t,e,n){let i=t[cp],r=n&&n.nonce;i?r&&i.setNonce(r):i=new fp(t,r),i.mount(Array.isArray(e)?e:[e],t)}}let dp=new Map;class fp{constructor(t,e){let n=t.ownerDocument||t,i=n.defaultView;if(!t.head&&t.adoptedStyleSheets&&i.CSSStyleSheet){let e=dp.get(n);if(e)return t[cp]=e;this.sheet=new i.CSSStyleSheet,dp.set(n,this)}else this.styleTag=n.createElement("style"),e&&this.styleTag.setAttribute("nonce",e);this.modules=[],t[cp]=this}mount(t,e){let n=this.sheet,i=0,r=0;for(let e=0;e<t.length;e++){let o=t[e],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),n)for(let t=0;t<o.rules.length;t++)n.insertRule(o.rules[t],i++)}else{for(;r<s;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(n)e.adoptedStyleSheets.indexOf(this.sheet)<0&&(e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets]);else{let t="";for(let e=0;e<this.modules.length;e++)t+=this.modules[e].getRules()+"\n";this.styleTag.textContent=t;let n=e.head||e;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}for(var pp={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mp="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),vp="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),bp=0;bp<10;bp++)pp[48+bp]=pp[96+bp]=String(bp);for(bp=1;bp<=24;bp++)pp[bp+111]="F"+bp;for(bp=65;bp<=90;bp++)pp[bp]=String.fromCharCode(bp+32),gp[bp]=String.fromCharCode(bp);for(var yp in pp)gp.hasOwnProperty(yp)||(gp[yp]=pp[yp]);function wp(t){var e=!(mp&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||vp&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?gp:pp)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}function Op(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function Sp(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function xp(t,e){if(!e.anchorNode)return!1;try{return Sp(t,e.anchorNode)}catch(t){return!1}}function kp(t){return 3==t.nodeType?jp(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function Cp(t,e,n,i){return!!n&&(Ep(t,e,n,i,-1)||Ep(t,e,n,i,1))}function Ap(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function Mp(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Ep(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Pp(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=Ap(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(r<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=r<0?Pp(t):0}}}function Pp(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Tp(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function $p(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Dp(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}class Rp{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?Pp(e):0),n,Math.min(t.focusOffset,n?Pp(n):0))}set(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i}}let Bp,Np=null;function Lp(t){if(t.setActive)return t.setActive();if(Np)return t.focus(Np);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==Np?{get preventScroll(){return Np={preventScroll:!0},!0}}:void 0),!Np){Np=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function jp(t,e,n=e){let i=Bp||(Bp=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function _p(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function Ip(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function zp(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Qp(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=Pp(n)}else{if(!n.parentNode||Mp(n))return null;i=Ap(n),n=n.parentNode}}}function Hp(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||Mp(n))return null;i=Ap(n)+1,n=n.parentNode}}}class Vp{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new Vp(t.parentNode,Ap(t),e)}static after(t,e){return new Vp(t.parentNode,Ap(t)+1,e)}}const Wp=[];class Fp{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,i=this.dom,r=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let t=Fp.get(n);(!t||!t.parent&&t.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(t,e),o.flags&=-8}if(n=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&n!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=qp(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&e&&e.node==i&&(e.written=!0);n;)n=qp(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let i=0==Pp(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==i&&e.firstChild!=e.lastChild&&(i=t==e.firstChild?-1:1),t=e}n=i<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Fp.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let i=this.children[t];if(i.dom==n)return e;e+=i.length+i.breakAfter}}domBoundsAround(t,e,n=0){let i=-1,r=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],h=l+n.length;if(l<t&&h>e)return n.domBoundsAround(t,e,l);if(h>=t&&-1==i&&(i=a,r=l),l>e&&n.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+n.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=Wp){this.markDirty();for(let i=t;i<e;i++){let t=this.children[i];t.parent==this&&n.indexOf(t)<0&&t.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new Xp(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,i,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function qp(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}Fp.prototype.breakAfter=0;class Xp{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Kp(t,e,n,i,r,o,s,a,l){let{children:c}=t,h=c.length?c[e]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(e==i&&h&&!s&&!d&&o.length<2&&h.merge(n,r,o.length?u:null,0==n,a,l))){if(i<c.length){let t=c[i];t&&(r<t.length||t.breakAfter&&(null==u?void 0:u.breakAfter))?(e==i&&(t=t.split(r),r=0),!d&&u&&t.merge(0,r,u,!0,0,l)?o[o.length-1]=t:((r||t.children.length&&!t.children[0].length)&&t.merge(0,r,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(u?u.breakAfter=1:s=1),i++}for(h&&(h.breakAfter=s,n>0&&(!s&&o.length&&h.merge(n,h.length,o[0],!1,a,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,a,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function Zp(t,e,n,i,r,o){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:h}=s.findPos(e,-1),u=e-n;for(let t of i)u+=t.length;t.length+=u,Kp(t,c,h,a,l,i,0,r,o)}let Yp="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Gp="undefined"!=typeof document?document:{documentElement:{style:{}}};const Up=/Edge\/(\d+)/.exec(Yp.userAgent),Jp=/MSIE \d/.test(Yp.userAgent),tg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yp.userAgent),eg=!!(Jp||tg||Up),ng=!eg&&/gecko\/(\d+)/i.test(Yp.userAgent),ig=!eg&&/Chrome\/(\d+)/.exec(Yp.userAgent),rg="webkitFontSmoothing"in Gp.documentElement.style,og=!eg&&/Apple Computer/.test(Yp.vendor),sg=og&&(/Mobile\/\w+/.test(Yp.userAgent)||Yp.maxTouchPoints>2);var ag={mac:sg||/Mac/.test(Yp.platform),windows:/Win/.test(Yp.platform),linux:/Linux|X11/.test(Yp.platform),ie:eg,ie_version:Jp?Gp.documentMode||6:tg?+tg[1]:Up?+Up[1]:0,gecko:ng,gecko_version:ng?+(/Firefox\/(\d+)/.exec(Yp.userAgent)||[0,0])[1]:0,chrome:!!ig,chrome_version:ig?+ig[1]:0,ios:sg,android:/Android\b/.test(Yp.userAgent),webkit:rg,safari:og,webkit_version:rg?+(/\bAppleWebKit\/(\d+)/.exec(Yp.userAgent)||[0,0])[1]:0,tabSize:null!=Gp.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class lg extends Fp{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof lg)||this.length-(e-t)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),0))}split(t){let e=new lg(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new Vp(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;0==e&&n<0||e==i&&n>=0?ag.chrome||ag.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let a=jp(t,r,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return ag.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l),s?Tp(l,s<0):l||null}(this.dom,t,e)}}class cg extends Fp{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(Ip(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof cg&&n.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0)||(Zp(this,t,e,n?n.children.slice():[],r-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>t&&e.push(n<t?o.split(t-n):o),i<0&&n>=t&&(i=r),n=s,r++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new cg(this.mark,e,o)}domAtPos(t){return dg(this,t)}coordsAt(t,e){return pg(this,t,e)}}class hg extends Fp{static create(t,e,n){return new hg(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=hg.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof hg&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t instanceof hg&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return Td.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Td.empty}domAtPos(t){return(this.length?0==t:this.side>0)?Vp.before(this.dom):Vp.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:t>0;for(let e=o?i.length-1:0;r=i[e],!(t>0?0==e:e==i.length-1||r.top<r.bottom);e+=o?-1:1);return Tp(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ug extends Fp{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof ug&&t.side==this.side}split(){return new ug(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?Vp.before(this.dom):Vp.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Td.empty}get isHidden(){return!0}}function dg(t,e){let n=t.dom,{children:i}=t,r=0;for(let t=0;r<i.length;r++){let o=i[r],s=t+o.length;if(!(s==t&&o.getSide()<=0)){if(e>t&&e<s&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=r;t>0;t--){let e=i[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=r;t<i.length;t++){let e=i[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new Vp(n,0)}function fg(t,e,n){let i,{children:r}=t;n>0&&e instanceof cg&&r.length&&(i=r[r.length-1])instanceof cg&&i.mark.eq(e.mark)?fg(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function pg(t,e,n){let i=null,r=-1,o=null,s=-1;!function t(e,a){for(let l=0,c=0;l<e.children.length&&c<=a;l++){let h=e.children[l],u=c+h.length;u>=a&&(h.children.length?t(h,a-c):(!o||o.isHidden&&(n>0||gg(o,h)))&&(u>a||c==u&&h.getSide()>0)?(o=h,s=a-c):(c<a||c==u&&h.getSide()<0&&!h.isHidden)&&(i=h,r=a-c)),c=u}}(t,e);let a=(n<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?r:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=kp(e);return n[n.length-1]||null}(t)}function gg(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function mg(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}lg.prototype.children=hg.prototype.children=ug.prototype.children=Wp;const vg=Object.create(null);function bg(t,e,n){if(t==e)return!0;t||(t=vg),e||(e=vg);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(-1==r.indexOf(o)||t[o]!==e[o]))return!1;return!0}function yg(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,"style"==r?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,"style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function wg(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Og{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var Sg=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Sg||(Sg={}));class xg extends Wf{constructor(t,e,n,i){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new kg(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new Ag(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,i=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:r,end:o}=Mg(t,i);e=(r?i?-3e8:-1:5e8)-1,n=1+(o?i?2e8:1:-6e8)}return new Ag(t,e,n,i,t.widget||null,!0)}static line(t){return new Cg(t)}static set(t,e=!1){return Kf.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}xg.none=Kf.empty;class kg extends xg{constructor(t){let{start:e,end:n}=Mg(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof kg&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&bg(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}kg.prototype.point=!1;class Cg extends xg{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Cg&&this.spec.class==t.spec.class&&bg(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}Cg.prototype.mapMode=Fd.TrackBefore,Cg.prototype.point=!0;class Ag extends xg{constructor(t,e,n,i,r,o){super(e,n,r,t),this.block=i,this.isReplace=o,this.mapMode=i?e<=0?Fd.TrackBefore:Fd.TrackAfter:Fd.TrackDel}get type(){return this.startSide!=this.endSide?Sg.WidgetRange:this.startSide<=0?Sg.WidgetBefore:Sg.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof Ag&&((e=this.widget)==(n=t.widget)||!!(e&&n&&e.compare(n)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,n}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function Mg(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!=n?n:e,end:null!=i?i:e}}function Eg(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}Ag.prototype.point=!0;class Pg extends Fp{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,i,r,o){if(n){if(!(n instanceof Pg))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),Zp(this,t,e,n?n.children.slice():[],r,o),!0}split(t){let e=new Pg;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:i}=this.childPos(t);i&&(e.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){bg(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){fg(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=mg(e,this.attrs||{})),n&&(this.attrs=mg({class:n},this.attrs||{}))}domAtPos(t){return dg(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?4&this.flags&&(Ip(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(yg(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let i=this.dom.lastChild;for(;i&&Fp.get(i)instanceof cg;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=Fp.get(i))||void 0===n?void 0:n.isEditable)||ag.ios&&this.children.some((t=>t instanceof lg))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof lg)||/[^ -~]/.test(n.text))return null;let i=kp(n.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=pg(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let i=(e-t.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(t){return t instanceof Pg&&0==this.children.length&&0==t.children.length&&bg(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,i=0;n<t.children.length;n++){let r=t.children[n],o=i+r.length;if(o>=e){if(r instanceof Pg)return r;if(o>e)break}i=o+r.breakAfter}return null}}class Tg extends Fp{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof Tg&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?Vp.before(this.dom):Vp.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new Tg(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Wp}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Td.empty}domBoundsAround(){return null}become(t){return t instanceof Tg&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)||(this.widget instanceof $g?null:Tp(this.dom.getBoundingClientRect(),this.length?0==t:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class $g extends Og{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Dg{constructor(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof Tg&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Pg),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Rg(new ug(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof Tg||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(Rg(new lg(this.text.slice(this.textOff,this.textOff+i)),e),n),this.atCursorPos=!0,this.textOff+=i,t-=i,n=0}}span(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)}point(t,e,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Ag){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof Ag)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Tg(n.widget||Bg.block,s,n));else{let o=hg.create(n.widget||Bg.inline,s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&r<=i.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||r>i.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(c.append(Rg(new ug(1),i),r),r=i.length+Math.max(0,r-i.length)),c.append(Rg(o,i),r),this.atCursorPos=l,this.pendingBuffer=l?t<e||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,n,i,r){let o=new Dg(t,e,n,r);return o.openEnd=Kf.spans(i,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Rg(t,e){for(let n of e)t=new cg(n,[t],t.length);return t}class Bg extends Og{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Bg.inline=new Bg("span"),Bg.block=new Bg("div");var Ng=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ng||(Ng={}));const Lg=Ng.LTR,jg=Ng.RTL;function _g(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Ig=_g("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),zg=_g("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Qg=Object.create(null),Hg=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Qg[e]=n,Qg[n]=-e}function Vg(t){return t<=247?Ig[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?zg[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Wg=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Fg{get dir(){return this.level%2?jg:Lg}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,i){let r=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<e:s.to>e:t[r].level>s.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function qg(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!qg(i.inner,r.inner))return!1}return!0}const Xg=[];function Kg(t,e,n,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let e=!0,h=!1;if(c==o.length||l<o[c].from){let t=Xg[l];t!=a&&(e=!1,h=16==t)}let u=e||1!=a?null:[],d=e?i:i+1,f=l;t:for(;;)if(c<o.length&&f==o[c].from){if(h)break t;let p=o[c];if(!e)for(let t=p.to,e=c+1;;){if(t==n)break t;if(!(e<o.length&&o[e].from==t)){if(Xg[t]==a)break t;break}t=o[e++].to}c++,u?u.push(p):(p.from>l&&s.push(new Fg(l,p.from,d)),Zg(t,p.direction==Lg!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.to),f=p.to}else{if(f==n||(e?Xg[f]!=a:Xg[f]==a))break;f++}u?Kg(t,l,f,i+1,r,u,s):l<f&&s.push(new Fg(l,f,d)),l=f}else for(let l=n,c=o.length;l>e;){let n=!0,h=!1;if(!c||l>o[c-1].to){let t=Xg[l-1];t!=a&&(n=!1,h=16==t)}let u=n||1!=a?null:[],d=n?i:i+1,f=l;t:for(;;)if(c&&f==o[c-1].to){if(h)break t;let p=o[--c];if(!n)for(let t=p.from,n=c;;){if(t==e)break t;if(!n||o[n-1].to!=t){if(Xg[t-1]==a)break t;break}t=o[--n].from}u?u.push(p):(p.to<l&&s.push(new Fg(p.to,l,d)),Zg(t,p.direction==Lg!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.from),f=p.from}else{if(f==e||(n?Xg[f-1]!=a:Xg[f-1]==a))break;f--}u?Kg(t,f,l,i+1,r,u,s):f<l&&s.push(new Fg(f,l,d)),l=f}}function Zg(t,e,n,i,r,o,s){let a=e%2?2:1;!function(t,e,n,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:n,l=o?256:r;for(let e=s,n=l,i=l;e<a;e++){let r=Vg(t.charCodeAt(e));512==r?r=n:8==r&&4==i&&(r=16),Xg[e]=4==r?2:r,7&r&&(i=r),n=r}for(let t=s,e=l,i=l;t<a;t++){let r=Xg[t];if(128==r)t<a-1&&e==Xg[t+1]&&24&e?r=Xg[t]=e:Xg[t]=256;else if(64==r){let r=t+1;for(;r<a&&64==Xg[r];)r++;let o=t&&8==e||r<n&&8==Xg[r]?1==i?1:8:256;for(let e=t;e<r;e++)Xg[e]=o;t=r-1}else 8==r&&1==i&&(Xg[t]=1);e=r,7&r&&(i=r)}}}(t,r,o,i,a),function(t,e,n,i,r){let o=1==r?2:1;for(let s=0,a=0,l=0;s<=i.length;s++){let c=s?i[s-1].to:e,h=s<i.length?i[s].from:n;for(let e,n,i,s=c;s<h;s++)if(n=Qg[e=t.charCodeAt(s)])if(n<0){for(let t=a-3;t>=0;t-=3)if(Hg[t+1]==-n){let e=Hg[t+2],n=2&e?r:4&e?1&e?o:r:0;n&&(Xg[s]=Xg[Hg[t]]=n),a=t;break}}else{if(189==Hg.length)break;Hg[a++]=s,Hg[a++]=e,Hg[a++]=l}else if(2==(i=Xg[s])||1==i){let t=i==r;l=t?0:1;for(let e=a-3;e>=0;e-=3){let n=Hg[e+2];if(2&n)break;if(t)Hg[e+2]|=2;else{if(4&n)break;Hg[e+2]|=4}}}}}(t,r,o,i,a),function(t,e,n,i){for(let r=0,o=i;r<=n.length;r++){let s=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=s;l<a;){let s=Xg[l];if(256==s){let s=l+1;for(;;)if(s==a){if(r==n.length)break;s=n[r++].to,a=r<n.length?n[r].from:e}else{if(256!=Xg[s])break;s++}let c=1==o,h=c==(1==(s<e?Xg[s]:i))?c?1:2:i;for(let e=s,i=r,o=i?n[i-1].to:t;e>l;)e==o&&(e=n[--i].from,o=i?n[i-1].to:t),Xg[--e]=h;l=s}else o=s,l++}}}(r,o,i,a),Kg(t,r,o,e,n,i,s)}function Yg(t){return[new Fg(0,t,0)]}let Gg="";function Ug(t,e,n,i,r){var o;let s=i.head-t.from,a=Fg.find(e,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc),l=e[a],c=l.side(r,n);if(s==c){let t=a+=r?1:-1;if(t<0||t>=e.length)return null;l=e[a=t],s=l.side(!r,n),c=l.side(r,n)}let h=zd(t.text,s,l.forward(r,n));(h<l.from||h>l.to)&&(h=c),Gg=t.text.slice(Math.min(s,h),Math.max(s,h));let u=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return u&&h==c&&u.level+(r?0:1)<l.level?ef.cursor(u.side(!r,n)+t.from,u.forward(r,n)?1:-1,u.level):ef.cursor(h+t.from,l.forward(r,n)?-1:1,l.level)}function Jg(t,e,n){for(let i=e;i<n;i++){let e=Vg(t.charCodeAt(i));if(1==e)return Lg;if(2==e||4==e)return jg}return Lg}const tm=of.define(),em=of.define(),nm=of.define(),im=of.define(),rm=of.define(),om=of.define(),sm=of.define(),am=of.define(),lm=of.define(),cm=of.define({combine:t=>t.some((t=>t))}),hm=of.define({combine:t=>t.some((t=>t))}),um=of.define();class dm{constructor(t,e="nearest",n="nearest",i=5,r=5,o=!1){this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new dm(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new dm(ef.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const fm=$f.define({map:(t,e)=>t.map(e)}),pm=$f.define();function gm(t,e,n){let i=t.facet(im);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const mm=of.define({combine:t=>!t.length||t[0]});let vm=0;const bm=of.define();class ym{constructor(t,e,n,i,r){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(t,e){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=e||{};return new ym(vm++,t,n,i,(t=>{let e=[bm.of(t)];return o&&e.push(xm.of((e=>{let n=e.plugin(t);return n?o(n):xg.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return ym.define((e=>new t(e)),e)}}class wm{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(gm(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){gm(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){gm(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Om=of.define(),Sm=of.define(),xm=of.define(),km=of.define(),Cm=of.define(),Am=of.define();function Mm(t,e){let n=t.state.facet(Am);if(!n.length)return n;let i=n.map((e=>e instanceof Function?e(t):e)),r=[];return Kf.spans(i,e.from,e.to,{point(){},span(t,n,i,o){let s=t-e.from,a=n-e.from,l=r;for(let t=i.length-1;t>=0;t--,o--){let n,r=i[t].spec.bidiIsolate;if(null==r&&(r=Jg(e.text,s,a)),o>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==r)n.to=a,l=n.inner;else{let t={from:s,to:a,direction:r,inner:[]};l.push(t),l=t.inner}}}}),r}const Em=of.define();function Pm(t){let e=0,n=0,i=0,r=0;for(let o of t.state.facet(Em)){let s=o(t);s&&(null!=s.left&&(e=Math.max(e,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(i=Math.max(i,s.top)),null!=s.bottom&&(r=Math.max(r,s.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Tm=of.define();class $m{constructor(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}join(t){return new $m(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let i=0,r=0,o=0,s=0;;i++){let a=i==t.length?null:t[i],l=o-s,c=a?a.fromB:1e9;for(;r<e.length&&e[r]<c;){let t=e[r],i=e[r+1],o=Math.max(s,t),a=Math.min(c,i);if(o<=a&&new $m(o+l,a+l,o,a).addToSet(n),i>c)break;r+=2}if(!a)return n;new $m(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class Dm{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Xd.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let i=[];this.changes.iterChangedRanges(((t,e,n,r)=>i.push(new $m(t,e,n,r)))),this.changedRanges=i}static create(t,e,n){return new Dm(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class Rm extends Fp{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=xg.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new Pg],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new $m(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?i=this.domChanged.newSel.head:function(t,e){let n=!1;return e&&t.iterChangedRanges(((t,i)=>{t<e.to&&i>e.from&&(n=!0)})),n}(t.changes,this.hasComposition)||t.selectionSet||(i=t.state.selection.main.head));let r=i>-1?function(t,e,n){let i=Bm(t,n);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new $m(l.mapPos(o),l.mapPos(s),o,s),h=[];for(let e=r.parentNode;;e=e.parentNode){let n=Fp.get(e);if(n instanceof cg)h.push({node:e,deco:n.mark});else{if(n instanceof Pg||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:r,marks:h,line:e};if(e==t.contentDOM)return null;h.push({node:e,deco:new kg({inclusive:!0,attributes:wg(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:i}=this.hasComposition;n=new $m(e,i,t.changes.mapPos(e,-1),t.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(ag.ie||ag.chrome)&&!r&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=function(t,e,n){let i=new Nm;return Kf.compare(t,e,n,i),i.changes}(this.decorations,this.updateDeco(),t.changes);return n=$m.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,r),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=ag.chrome||ag.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=-8,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof Tg&&t.widget instanceof $g&&r.push(t.dom);i.updateGaps(r)}updateChildren(t,e,n){let i=n?n.range.addToSet(t.slice()):t,r=this.childCursor(e);for(let t=i.length-1;;t--){let e=t>=0?i[t]:null;if(!e)break;let o,s,a,l,{fromA:c,toA:h,fromB:u,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>u){let t=Dg.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=Dg.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);s=t.breakAtStart,a=t.openStart,l=e.openEnd;let i=this.compositionView(n);e.breakAtStart?i.breakAfter=1:e.content.length&&i.merge(i.length,i.length,e.content[0],!1,e.openStart,0)&&(i.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&i.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),o=t.content.concat(i).concat(e.content)}else({content:o,breakAtStart:s,openStart:a,openEnd:l}=Dg.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(h,1),{i:g,off:m}=r.findPos(c,-1);Kp(this,g,m,f,p,o,s,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let t of e.effects)t.is(pm)&&(this.editContextFormatting=t.value)}compositionView(t){let e=new lg(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new cg(n,[e],e.length);let n=new Pg;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=Fp.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),i=this.children[n.i];e(t.line,i);for(let r=t.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],e(r>=0?t.marks[r].node:t.text,i)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet(mm)||this.dom.tabIndex>-1)&&xp(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||e||r))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(ag.gecko&&s.empty&&!this.hasComposition&&1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(t,a.node.childNodes[a.offset]||null))),a=l=new Vp(t,0),o=!0}var c;let h=this.view.observer.selectionRange;!o&&h.focusNode&&(Cp(a.node,a.offset,h.anchorNode,h.anchorOffset)&&Cp(l.node,l.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,s))||(this.view.observer.ignore((()=>{ag.android&&ag.chrome&&this.dom.contains(h.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=Op(this.view.root);if(t)if(s.empty){if(ag.gecko){let t=(e=a.node,i=a.offset,1!=e.nodeType?0:(i&&"false"==e.childNodes[i-1].contentEditable?1:0)|(i<e.childNodes.length&&"false"==e.childNodes[i].contentEditable?2:0));if(t&&3!=t){let e=(1==t?Qp:Hp)(a.node,a.offset);e&&(a=new Vp(e.node,e.offset))}}t.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(a.node,a.offset);try{t.extend(l.node,l.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),e.setEnd(l.node,l.offset),e.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(e)}var e,i;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new Vp(h.anchorNode,h.anchorOffset),this.impreciseHead=l.precise?null:new Vp(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&Cp(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=Op(t.root),{anchorNode:i,anchorOffset:r}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=Pg.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let h=t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=e.from&&n.collapse(i,r)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let i=t.offset;!e&&i<n.childNodes.length;i++){let t=Fp.get(n.childNodes[i]);t instanceof Pg&&(e=t.domAtPos(0))}for(let i=t.offset-1;!e&&i>=0;i--){let t=Fp.get(n.childNodes[i]);t instanceof Pg&&(e=t.domAtPos(t.length))}return e?new Vp(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=Fp.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof Pg)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=r-s.breakAfter,l=a-s.length;if(a<t)break;if(l<=t&&(l<t||s.covers(-1))&&(a>t||s.covers(1))&&(!n||s instanceof Pg&&!(n instanceof Pg&&e>=0)))n=s,i=l;else if(n&&l==t&&a==t&&s instanceof Tg&&Math.abs(e)<2){if(s.deco.startSide<0)break;o&&(n=null)}r=l}return n?n.coordsAt(t-i,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),i=this.children[e];if(!(i instanceof Pg))return null;for(;i.children.length;){let{i:t,off:e}=i.childPos(n,1);for(;;t++){if(t==i.children.length)return null;if((i=i.children[t]).length)break}n=e}if(!(i instanceof lg))return null;let r=zd(i.text,n);if(r==n)return null;let o=jp(i.dom,n,r).getClientRects();for(let t=0;t<o.length;t++){let e=o[t];if(t==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:i}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Ng.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],h=t+c.length;if(h>i)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),o){let e=c.dom.lastChild,i=e?kp(e):[];if(i.length){let e=i[i.length-1],o=a?e.right-n.left:n.right-e.left;o>s&&(s=o,this.minWidth=r,this.minWidthFrom=t,this.minWidthTo=h)}}}t=h+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?Ng.RTL:Ng.LTR}measureTextSize(){for(let t of this.children)if(t instanceof Pg){let e=t.measureTextSize();if(e)return e}let t,e,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=kp(i.firstChild)[0];t=i.getBoundingClientRect().height,e=r?r.width/27:7,n=r?r.height:t,i.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new Xp(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,i=0;;i++){let r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=(e.lineBlockAt(o).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(xg.replace({widget:new $g(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return xg.set(t)}updateDeco(){let t=1,e=this.view.state.facet(xm).map((e=>(this.dynamicDecorationMap[t++]="function"==typeof e)?e(this.view):e)),n=!1,i=this.view.state.facet(km).map(((t,e)=>{let i="function"==typeof t;return i&&(n=!0),i?t(this.view):t}));for(i.length&&(this.dynamicDecorationMap[t++]=n,e.push(Kf.join(i))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}for(let e of this.view.state.facet(um))try{if(e(this.view,t.range,t))return!0}catch(t){gm(this.view.state,t,"scroll handler")}let e,{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});let r=Pm(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(t,e,n,i,r,o,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let h=t,u=!1;h&&!u;)if(1==h.nodeType){let t,d=h==l.body,f=1,p=1;if(d)t=$p(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let e=h.getBoundingClientRect();({scaleX:f,scaleY:p}=Dp(h,e)),t={left:e.left,right:e.left+h.clientWidth*f,top:e.top,bottom:e.top+h.clientHeight*p}}let g=0,m=0;if("nearest"==r)e.top<t.top?(m=e.top-(t.top+s),n>0&&e.bottom>t.bottom+m&&(m=e.bottom-t.bottom+s)):e.bottom>t.bottom&&(m=e.bottom-t.bottom+s,n<0&&e.top-m<t.top&&(m=e.top-(t.top+s)));else{let i=e.bottom-e.top,o=t.bottom-t.top;m=("center"==r&&i<=o?e.top+i/2-o/2:"start"==r||"center"==r&&n<0?e.top-s:e.bottom-o+s)-t.top}if("nearest"==i?e.left<t.left?(g=e.left-(t.left+o),n>0&&e.right>t.right+g&&(g=e.right-t.right+o)):e.right>t.right&&(g=e.right-t.right+o,n<0&&e.left<t.left+g&&(g=e.left-(t.left+o))):g=("center"==i?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==i==a?e.left-o:e.right-(t.right-t.left)+o)-t.left,g||m)if(d)c.scrollBy(g,m);else{let t=0,n=0;if(m){let t=h.scrollTop;h.scrollTop+=m/p,n=(h.scrollTop-t)*p}if(g){let e=h.scrollLeft;h.scrollLeft+=g/f,t=(h.scrollLeft-e)*f}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(i="nearest"),n&&Math.abs(n-m)<1&&(r="nearest")}if(d)break;(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)&&(e={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)}),h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,s),-s),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==Ng.LTR)}}function Bm(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=Qp(n.focusNode,n.focusOffset),r=Hp(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let e=Fp.get(r.node);if(!e||e instanceof lg&&e.text!=r.node.nodeValue)o=r;else if(t.docView.lastCompositionAfterCursor){let t=Fp.get(i.node);!t||t instanceof lg&&t.text!=i.node.nodeValue||(o=r)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let Nm=class{constructor(){this.changes=[]}compareRange(t,e){Eg(t,e,this.changes)}comparePoint(t,e){Eg(t,e,this.changes)}boundChange(t){Eg(t,t,this.changes)}};function Lm(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function jm(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function _m(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Im(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function zm(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Qm(t,e,n){let i,r,o,s,a,l,c,h,u=!1;for(let d=t.firstChild;d;d=d.nextSibling){let t=kp(d);for(let f=0;f<t.length;f++){let p=t[f];r&&_m(r,p)&&(p=Im(zm(p,r.bottom),r.top));let g=Lm(e,p),m=jm(n,p);if(0==g&&0==m)return 3==d.nodeType?Hm(d,e,n):Qm(d,e,n);if(!i||s>m||s==m&&o>g){i=d,r=p,o=g,s=m;let a=m?n<p.top?-1:1:g?e<p.left?-1:1:0;u=!a||(a>0?f<t.length-1:f>0)}0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=d,c=p):n<p.top&&(!h||h.top>p.top)&&(l=d,h=p):c&&_m(c,p)?c=zm(c,p.bottom):h&&_m(h,p)&&(h=Im(h,p.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=l,r=h),!i)return{node:t,offset:0};let d=Math.max(r.left,Math.min(r.right,e));return 3==i.nodeType?Hm(i,d,n):u&&"false"!=i.contentEditable?Qm(i,d,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0)}}function Hm(t,e,n){let i=t.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let i=jp(t,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<o){let n=e>=(c.left+c.right)/2,i=n;if((ag.chrome||ag.gecko)&&jp(t,a).getBoundingClientRect().left==c.right&&(i=!n),h<=0)return{node:t,offset:a+(i?1:0)};r=a+(i?1:0),o=h}}}return{node:t,offset:r>-1?r:s>0?t.nodeValue.length:0}}function Vm(t,e,n,i=-1){var r,o;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:h,y:u}=e,d=u-l;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,r=!1;s=t.elementAtHeight(d),s.type!=Sg.Text;)for(;d=i>0?s.bottom+e:s.top-e,!(d>=0&&d<=c);){if(r)return n?null:0;r=!0,i=-i}u=l+d;let f=s.from;if(f<t.viewport.from)return 0==t.viewport.from?0:n?null:Wm(t,a,s,h,u);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Wm(t,a,s,h,u);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,m=g.elementFromPoint(h,u);m&&!t.contentDOM.contains(m)&&(m=null),m||(h=Math.max(a.left+1,Math.min(a.right-1,h)),m=g.elementFromPoint(h,u),m&&!t.contentDOM.contains(m)&&(m=null));let v,b=-1;if(m&&0!=(null===(r=t.docView.nearest(m))||void 0===r?void 0:r.isEditable)){if(p.caretPositionFromPoint){let t=p.caretPositionFromPoint(h,u);t&&({offsetNode:v,offset:b}=t)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(h,u);e&&(({startContainer:v,startOffset:b}=e),(!t.contentDOM.contains(v)||ag.safari&&function(t,e,n){let i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return jp(t,i-1,i).getBoundingClientRect().left>n}(v,b,h)||ag.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():jp(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(v,b,h))&&(v=void 0))}v&&(b=Math.min(Pp(v),b))}if(!v||!t.docView.dom.contains(v)){let e=Pg.find(t.docView,f);if(!e)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:b}=Qm(e.dom,h,u))}let y=t.docView.nearest(v);if(!y)return null;if(y.isWidget&&1==(null===(o=y.dom)||void 0===o?void 0:o.nodeType)){let t=y.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?y.posAtStart:y.posAtEnd}return y.localPosFromDOM(v,b)+y.posAtStart}function Wm(t,e,n,i,r){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;o+=Math.floor((r-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+ap(s,o,t.state.tabSize)}function Fm(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),s=t.textDirectionAt(r.from);for(let a=e,l=null;;){let e=Ug(r,o,s,a,n),c=Gg;if(!e){if(r.number==(n?t.state.doc.lines:1))return a;c="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),e=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return e;l=i(c)}a=e}}function qm(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,((t,r,o)=>{if(e>t&&e<r){let o=i||n||(e-t<r-e?-1:1);e=o<0?t:r,i=o}}));if(!i)return e}}function Xm(t,e,n){let i=qm(t.state.facet(Cm).map((e=>e(t))),n.from,e.head>n.from?-1:1);return i==n.from?n:ef.cursor(i,i<n.from?1:-1)}const Km="￿";class Zm{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Hf.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=Km}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i);let t=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==e)break;let o=Fp.get(i),s=Fp.get(r);(o&&s?o.breakAfter:(o?o.breakAfter:Mp(i))||Mp(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>t)&&this.lineBreak(),i=r}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(r=i.exec(e))&&(o=r.index,s=r[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=Fp.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(Ym(t,n.node,n.offset)?e:0))}}function Ym(t,e,n){for(;;){if(!e||n<Pp(e))return!1;if(e==t)return!0;n=Ap(e)+1,e=e.parentNode}}class Gm{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class Um{constructor(t,e,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=r||o?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new Gm(n,i)),r==n&&o==i||e.push(new Gm(r,o))),e}(t),n=new Zm(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?ef.single(n+e,i+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=r&&r.node==e.focusNode&&r.offset==e.focusOffset||!Sp(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),i=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!Sp(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset),s=t.viewport;if((ag.ios||ag.chrome)&&t.state.selection.main.empty&&n!=i&&(s.from>0||s.to<t.state.doc.length)){let e=Math.min(n,i),r=Math.max(n,i),o=s.from-e,a=s.to-r;0!=o&&1!=o&&0!=e||0!=a&&-1!=a&&r!=t.state.doc.length||(n=0,i=t.state.doc.length)}this.newSel=ef.single(i,n)}}}function Jm(t,e){let n,{newSel:i}=e,r=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:i,to:s}=e.bounds,a=r.from,l=null;(8===o||ag.android&&e.text.length<s-i)&&(a=r.to,l="end");let c=function(t,e,n,i){let r=Math.min(t.length,e.length),o=0;for(;o<r&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;return"end"==i&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(t.state.doc.sliceString(i,s,Km),e.text,a-i,l);c&&(ag.chrome&&13==o&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Km+Km&&c.toB--,n={from:i+c.from,to:i+c.toA,insert:Td.of(e.text.slice(c.from,c.toB).split(Km))})}else i&&(!t.hasFocus&&t.state.facet(mm)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(ag.mac||ag.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Td.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:ag.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(i&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Td.of([" "])}),n)return tv(t,n,i,o);if(i&&!i.main.eq(r)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:e,userEvent:n}),!0}return!1}function tv(t,e,n,i=-1){if(ag.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(ag.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&" "==t.state.sliceDoc(e.from,r.from))&&1==e.insert.length&&2==e.insert.lines&&_p(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&0==e.insert.length||8==i&&e.insert.length<e.to-e.from&&e.to>r.head)&&_p(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&0==e.insert.length&&_p(t.contentDOM,"Delete",46)))return!0;let o,s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a=()=>o||(o=function(t,e,n){let i,r=t.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=o.from<e.from?r.sliceDoc(o.from,e.from):"",s=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=r.changes(e),a=n&&n.main.to<=s.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let l,c=t.state.sliceDoc(e.from,e.to),h=n&&Bm(t,n.main.head);if(h){let t=e.insert.length-(e.to-e.from);l={from:h.from,to:h.to-t}}else l=t.state.doc.lineAt(o.head);let u=o.to-e.to,d=o.to-o.from;i=r.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let i=n.to-u,h=i-c.length;if(n.to-n.from!=d||t.state.sliceDoc(h,i)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=r.changes({from:h,to:i,insert:e.insert}),p=n.to-o.to;return{changes:f,range:a?ef.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else i={changes:s,selection:a&&r.selection.replaceRange(a)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:s,scrollIntoView:!0})}(t,e,n));return t.state.facet(om).some((n=>n(t,e.from,e.to,s,a)))||t.dispatch(a()),!0}class ev{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,ag.safari&&t.contentDOM.addEventListener("input",(()=>null)),ag.gecko&&function(t){Ev.has(t)||(Ev.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,i=e.target;i!=t.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=Fp.get(i))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||(0!=this.view.updateState?Promise.resolve().then((()=>this.runHandlers(t.type,t))):this.runHandlers(t.type,t)))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=iv(t),n=this.handlers,i=this.view.contentDOM;for(let t in e)if("scroll"!=t){let r=!e[t].handlers.length,o=n[t];o&&r!=!o.handlers.length&&(i.removeEventListener(t,this.handleEvent),o=null),o||i.addEventListener(t,this.handleEvent,{passive:r})}for(let t in n)"scroll"==t||e[t]||i.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=t.keyCode&&sv.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),ag.android&&ag.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!ag.ios||t.synthetic||t.altKey||t.metaKey||!((e=rv.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||ov.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&!("Enter"==e.key&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString()))&&(this.pendingIOSKey=void 0,_p(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(ag.safari&&!ag.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function nv(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(t){gm(n.state,t)}}}function iv(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let i in t.domEventHandlers){let r=t.domEventHandlers[i];r&&n(i).handlers.push(nv(e.value,r))}if(t&&t.domEventObservers)for(let i in t.domEventObservers){let r=t.domEventObservers[i];r&&n(i).observers.push(nv(e.value,r))}}for(let t in cv)n(t).handlers.push(cv[t]);for(let t in hv)n(t).observers.push(hv[t]);return e}const rv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ov="dthko",sv=[16,17,18,20,91,92,224,225];function av(t){return.7*Math.max(0,t)+8}class lv{constructor(t,e,n,i){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=function(t){let e,n,i=t.ownerDocument;for(let r=t.parentNode;r&&!(r==i.body||e&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:e,y:n}}(t.contentDOM),this.atoms=t.state.facet(Cm).map((e=>e(t)));let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Hf.allowMultipleSelections)&&function(t,e){let n=t.state.facet(tm);return n.length?n[0](e):ag.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Op(t.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let t=0;t<r.length;t++){let n=r[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=Sv(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(e=this.startEvent,n=t,Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))<10))return;var e,n;this.select(this.lastEvent=t);let i=0,r=0,o=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=Pm(this.view);t.clientX-c.left<=o+6?i=-av(o-t.clientX):t.clientX+c.right>=a-6&&(i=av(t.clientX-a)),t.clientY-c.top<=s+6?r=-av(s-t.clientY):t.clientY+c.bottom>=l-6&&(r=av(t.clientY-l)),this.setScrollSpeed(i,r)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n],r=null;if(i.empty){let t=qm(this.atoms,i.from,0);t!=i.from&&(r=ef.cursor(t,-1))}else{let t=qm(this.atoms,i.from,-1),e=qm(this.atoms,i.to,1);t==i.from&&e==i.to||(r=ef.range(i.from==i.anchor?t:e,i.from==i.head?t:e))}r&&(e||(e=t.ranges.slice()),e[n]=r)}return e?ef.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&n.eq(e.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some((t=>t.isUserEvent("input.type")))?this.destroy():this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const cv=Object.create(null),hv=Object.create(null),uv=ag.ie&&ag.ie_version<15||ag.ios&&ag.webkit_version<604;function dv(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function fv(t,e){e=dv(t.state,am,e);let n,{state:i}=t,r=1,o=i.toText(e),s=o.lines==i.selection.ranges.length;if(null!=kv&&i.selection.ranges.every((t=>t.empty))&&kv==o.toString()){let t=-1;n=i.changeByRange((n=>{let a=i.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=i.toText((s?o.line(r++).text:e)+i.lineBreak);return{changes:{from:a.from,insert:l},range:ef.cursor(n.from+l.length)}}))}else n=s?i.changeByRange((t=>{let e=o.line(r++);return{changes:{from:t.from,to:t.to,insert:e.text},range:ef.cursor(t.from+e.length)}})):i.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function pv(t,e,n,i){if(1==i)return ef.cursor(e,n);if(2==i)return function(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),o=e-r.from;if(0==r.length)return ef.cursor(e);0==o?n=1:o==r.length&&(n=-1);let s=o,a=o;n<0?s=zd(r.text,o,!1):a=zd(r.text,o);let l=i(r.text.slice(s,a));for(;s>0;){let t=zd(r.text,s,!1);if(i(r.text.slice(t,s))!=l)break;s=t}for(;a<r.length;){let t=zd(r.text,a);if(i(r.text.slice(a,t))!=l)break;a=t}return ef.range(s+r.from,a+r.from)}(t.state,e,n);{let n=Pg.find(t.docView,e),i=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:i.from,o=n?n.posAtEnd:i.to;return o<t.state.doc.length&&o==i.to&&o++,ef.range(r,o)}}hv.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},cv.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&0!=t.inputState.tabFocusMode&&(t.inputState.tabFocusMode=Date.now()+2e3),!1),hv.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},hv.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},cv.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(nm))if(n=i(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=vv(t,e),i=Sv(e),r=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),r=r.map(t.changes))},get(e,o,s){let a,l=vv(t,e),c=pv(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let e=pv(t,n.pos,n.bias,i),r=Math.min(e.from,c.from),o=Math.max(e.to,c.to);c=r<c.from?ef.range(r,o):ef.range(o,r)}return o?r.replaceRange(r.main.extend(c.from,c.to)):s&&1==i&&r.ranges.length>1&&(a=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ef.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(r,l.pos))?a:s?r.addRange(c):ef.create([c])}}}(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new lv(t,e,n,i)),i&&t.observer.ignore((()=>{Lp(t.contentDOM);let e=t.root.activeElement;e&&!e.contains(t.contentDOM)&&e.blur()}));let r=t.inputState.mouseSelection;if(r)return r.start(e),!1===r.dragging}return!1};let gv=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function mv(t,e,n,i){let r=Pg.find(t.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&gv(n,i,s))return-1;let a=r.coordsAt(o,1);return a&&gv(n,i,a)?1:s&&s.bottom>=i?-1:1}function vv(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:mv(t,n,e.clientX,e.clientY)}}const bv=ag.ie&&ag.ie_version<=11;let yv=null,wv=0,Ov=0;function Sv(t){if(!bv)return t.detail;let e=yv,n=Ov;return yv=t,Ov=Date.now(),wv=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(wv+1)%3:1}function xv(t,e,n,i){if(!(n=dv(t.state,am,n)))return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=i&&o&&function(t,e){let n=t.state.facet(em);return n.length?n[0](e):ag.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:o.from,to:o.to}:null,a={from:r,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}cv.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let t=i.posAtStart,e=t+i.length;(t>=n.to||e<=n.from)&&(n=ef.range(t,e))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",dv(t.state,lm,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1},cv.dragend=t=>(t.inputState.draggedContent=null,!1),cv.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,o=()=>{++r==n.length&&xv(t,e,i.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return xv(t,e,n,!0),!0}return!1},cv.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=uv?null:e.clipboardData;return n?(fv(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),fv(t,n.value)}),50)}(t),!1)};let kv=null;cv.copy=cv.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=function(t){let e=[],n=[],i=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:dv(t,lm,e.join(t.lineBreak)),ranges:n,linewise:i}}(t.state);if(!n&&!r)return!1;kv=r?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=uv?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout((()=>{i.remove(),t.focus()}),50)}(t,n),!1)};const Cv=Ef.define();function Av(t,e){let n=[];for(let i of t.facet(sm)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:Cv.of(!0)}):null}function Mv(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Av(t.state,e);n?t.dispatch(n):t.update([])}}),10)}hv.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Mv(t)},hv.blur=t=>{t.observer.clearSelectionRange(),Mv(t)},hv.compositionstart=hv.compositionupdate=t=>{t.observer.editContext||(null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))},hv.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,ag.chrome&&ag.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50))},hv.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},cv.beforeinput=(t,e)=>{var n,i;if("insertReplacementText"==e.inputType&&t.observer.editContext){let i=null===(n=e.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),r=e.getTargetRanges();if(i&&r.length){let e=r[0],n=t.posAtDOM(e.startContainer,e.startOffset),o=t.posAtDOM(e.endContainer,e.endOffset);return tv(t,{from:n,to:o,insert:t.state.toText(i)},null),!0}}let r;if(ag.chrome&&ag.android&&(r=rv.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return ag.ios&&"deleteContentForward"==e.inputType&&t.observer.flushSoon(),ag.safari&&"insertText"==e.inputType&&t.inputState.composing>=0&&setTimeout((()=>hv.compositionend(t,e)),20),!1};const Ev=new Set,Pv=["pre-wrap","normal","pre-line","break-spaces"];let Tv=!1;function $v(){Tv=!1}class Dv{constructor(t){this.lineWrapping=t,this.doc=Td.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Pv.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e}refresh(t,e,n,i,r,o){let s=Pv.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let t=0;t<o.length;t++){let e=o[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return a}}class Rv{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class Bv{constructor(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?Sg.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ag?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new Bv(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Nv=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Nv||(Nv={}));const Lv=.001;class jv{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>Lv&&(Tv=!0),this.height=t)}replace(t,e,n){return jv.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,i){let r=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:h}=i[s],u=r.lineAt(a,Nv.ByPosNoHeight,n.setDoc(e),0,0),d=u.to>=l?u:r.lineAt(l,Nv.ByPosNoHeight,n,0,0);for(h+=d.to-l,l=d.to;s>0&&u.from<=i[s-1].toA;)a=i[s-1].fromA,c=i[s-1].fromB,s--,a<u.from&&(u=r.lineAt(a,Nv.ByPosNoHeight,n,0,0));c+=u.from-a,a=u.from;let f=Wv.build(n.setDoc(o),t,c,h);r=_v(r,r.replace(a,l,f))}return r.updateHeight(n,0)}static empty(){return new zv(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,i=0,r=0;for(;;)if(e==n)if(i>2*r){let r=t[e-1];r.break?t.splice(--e,1,r.left,null,r.right):t.splice(--e,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,r-=e.size}}else if(i<r){let n=t[e++];n&&(i+=n.size)}else{let e=t[--n];e&&(r+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new Hv(jv.of(t.slice(0,e)),o,jv.of(t.slice(n)))}}function _v(t,e){return t==e?t:(t.constructor!=e.constructor&&(Tv=!0),e)}jv.prototype.size=1;class Iv extends jv{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,i){return new Bv(i,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(t,e,n,i,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,n,i,r))}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class zv extends Iv{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,i){return new Bv(i,this.length,n,this.height,this.breaks)}replace(t,e,n){let i=n[0];return 1==n.length&&(i instanceof zv||i instanceof Qv&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof Qv?i=new zv(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):jv.of(n)}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Qv extends jv{constructor(t){super(t,0)}heightMetrics(t,e){let n,i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-i+1,s=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*o);n=e/o,this.length>o+1&&(s=(this.height-e)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:s}}blockAt(t,e,n,i){let{firstLine:r,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(e,i);if(e.lineWrapping){let r=i+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),o=e.doc.lineAt(r),l=s+o.length*a,c=Math.max(n,t-l/2);return new Bv(o.from,o.length,c,l,0)}{let i=Math.max(0,Math.min(o-r,Math.floor((t-n)/s))),{from:a,length:l}=e.doc.line(r+i);return new Bv(a,l,n+s*i,s,0)}}lineAt(t,e,n,i,r){if(e==Nv.ByHeight)return this.blockAt(t,n,i,r);if(e==Nv.ByPosNoHeight){let{from:e,to:i}=n.doc.lineAt(t);return new Bv(e,i-e,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,r),l=n.doc.lineAt(t),c=s+l.length*a,h=l.number-o,u=i+s*h+a*(l.from-r-h);return new Bv(l.from,l.length,Math.max(i,Math.min(u,i+this.height-c)),c,0)}forEachLine(t,e,n,i,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,r);for(let c=t,h=i;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-s;h+=a*n+l*(t-r-n)}let i=a+l*e.length;o(new Bv(e.from,e.length,h,i,0)),h+=i,c=e.to+1}}replace(t,e,n){let i=this.length-e;if(i>0){let t=n[n.length-1];t instanceof Qv?n[n.length-1]=new Qv(t.length+i):n.push(null,new Qv(i-1))}if(t>0){let e=n[0];e instanceof Qv?n[0]=new Qv(t+e.length):n.unshift(new Qv(t-1),null)}return jv.of(n)}decomposeLeft(t,e){e.push(new Qv(t-1),null)}decomposeRight(t,e){e.push(null,new Qv(this.length-t-1))}updateHeight(t,e=0,n=!1,i){let r=e+this.length;if(i&&i.from<=e+this.length&&i.more){let n=[],o=Math.max(e,i.from),s=-1;for(i.from>e&&n.push(new Qv(i.from-e-1).updateHeight(t,e));o<=r&&i.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==s?s=r:Math.abs(r-s)>=Lv&&(s=-2);let a=new zv(e,r);a.outdated=!1,n.push(a),o+=e+1}o<=r&&n.push(null,new Qv(r-o).updateHeight(t,o));let a=jv.of(n);return(s<0||Math.abs(a.height-this.height)>=Lv||Math.abs(s-this.heightMetrics(t,e).perLine)>=Lv)&&(Tv=!0),_v(this,a)}return(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Hv extends jv{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,i){let r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)}lineAt(t,e,n,i,r){let o=i+this.left.height,s=r+this.left.length+this.break,a=e==Nv.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==Nv.ByPosNoHeight?Nv.ByPosNoHeight:Nv.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,r).join(l)}forEachLine(t,e,n,i,r,o){let s=i+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,i,r,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{let l=this.lineAt(a,Nv.ByPos,n,i,r);t<l.from&&this.left.forEachLine(t,l.from-1,n,i,r,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}}replace(t,e,n){let i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let t of n)r.push(t);if(t>0&&Vv(r,o-1),e<this.length){let t=r.length;this.decomposeRight(e,r),Vv(r,t)}return jv.of(r)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?jv.of(this.break?[t,null,e]:[t,e]):(this.left=_v(this.left,t),this.right=_v(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,i){let{left:r,right:o}=this,s=e+r.length+this.break,a=null;return i&&i.from<=e+r.length&&i.more?a=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=s+o.length&&i.more?a=o=o.updateHeight(t,s,n,i):o.updateHeight(t,s,n),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Vv(t,e){let n,i;null==t[e]&&(n=t[e-1])instanceof Qv&&(i=t[e+1])instanceof Qv&&t.splice(e-1,3,new Qv(n.length+1+i.length))}class Wv{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof zv?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new zv(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=e-t;n.block?this.addBlock(new Iv(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new zv(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new Qv(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof zv)return t;let e=new zv(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),i.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof zv||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new zv(0,-1));let n=t;for(let t of this.nodes)t instanceof zv&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,i){let r=new Wv(n,t);return Kf.spans(e,n,i,r,0),r.finish(n)}}class Fv{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&Eg(t,e,this.changes,5)}}function qv(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=i.body;)if(1==e.nodeType){let n=e,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();o=Math.max(o,i.left),s=Math.min(s,i.right),a=Math.max(a,i.top),l=Math.min(e==t.parentNode?r.innerHeight:l,i.bottom)}e="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function Xv(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Kv{constructor(t,e,n,i){this.from=t,this.to=e,this.size=n,this.displaySize=i}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(t,e){return xg.replace({widget:new Zv(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class Zv extends Og{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Yv{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=tb,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ng.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(Sm).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new Dv(e),this.stateDeco=t.facet(xm).filter((t=>"function"!=typeof t)),this.heightMap=jv.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle.setDoc(t.doc),[new $m(0,0,0,t.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=xg.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let i=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>i>=t&&i<=e))){let{from:e,to:n}=this.lineBlockAt(i);t.push(new Gv(e,n))}}return this.viewports=t.sort(((t,e)=>t.from-e.from)),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?tb:new eb(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(nb(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(xm).filter((t=>"function"!=typeof t));let i=t.changedRanges,r=$m.extendWithRanges(i,function(t,e,n){let i=new Fv;return Kf.compare(t,e,n,i,0),i.changes}(n,this.stateDeco,t?t.changes:Xd.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);$v(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||Tv)&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,t.flags|=this.updateForViewport(),(l||!t.changes.empty||2&t.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(hm)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Ng.RTL:Ng.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),s=e.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:t,scaleY:n}=Dp(e,s);(t>.005&&Math.abs(this.scaleX-t)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=t,this.scaleY=n,l|=16,o=a=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,u=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==u||(this.paddingTop=h,this.paddingBottom=u,l|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=16);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=zp(t.scrollDOM);let f=(this.printing?Xv:qv)(e,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!function(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}(t.dom))return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=t.scrollDOM.clientHeight,l|=16),a){let e=t.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(e)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=t.docView.measureTextSize();o=n>0&&i.refresh(r,n,s,a,v/s,e),o&&(t.docView.minWidth=0,l|=16)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),$v();for(let n of this.viewports){let r=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(o?jv.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle,[new $m(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new Rv(n.from,r))}Tv&&(l|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new Gv(i.lineAt(o-1e3*n,Nv.ByHeight,r,0,0).from,i.lineAt(s+1e3*(1-n),Nv.ByHeight,r,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=i.lineAt(t,Nv.ByPos,r,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-o,a=new Gv(i.lineAt(n-500,Nv.ByHeight,r,0,0).from,i.lineAt(n+o+500,Nv.ByHeight,r,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new Gv(this.heightMap.lineAt(n,Nv.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Nv.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,Nv.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,Nv.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||i<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||r>=s+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let i of t)e.touchesRange(i.from,i.to)||n.push(new Kv(e.mapPos(i.from),e.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=Ng.LTR&&!n)return[];let s=[],a=(i,o,l,c)=>{if(o-i<r)return;let h=this.state.selection.main,u=[h.from];h.empty||u.push(h.to);for(let t of u)if(t>i&&t<o)return a(i,t-10,l,c),void a(t+10,o,l,c);let d=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-i)<r&&Math.abs(t.to-o)<r&&!u.some((e=>t.from<e&&t.to>e))));if(!d){if(o<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=o&&t.to>=o))){let t=e.moveToLineBoundary(ef.cursor(o),!1,!0).head;t>i&&(o=t)}let t=this.gapSize(l,i,o,c);d=new Kv(i,o,t,n||t<2e6?t:2e6)}s.push(d)},l=e=>{if(e.length<o||e.type!=Sg.Text)return;let r=function(t,e,n){let i=[],r=t,o=0;return Kf.spans(n,t,e,{span(){},point(t,e){t>r&&(i.push({from:r,to:t}),o+=t-r),r=e}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}(e.from,e.to,this.stateDeco);if(r.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let t,n,o=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let i=Jv(r,c),s=((this.visibleBottom-this.visibleTop)/2+o)/e.height;t=i-s,n=i+s}else t=(this.visibleTop-e.top-o)/e.height,n=(this.visibleBottom-e.top+o)/e.height;s=Uv(r,t),l=Uv(r,n)}else{let n=r.total*this.heightOracle.charWidth,o=i*this.heightOracle.charWidth,a=0;if(n>2e6)for(let n of t)n.from>=e.from&&n.from<e.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let h,u,d=this.pixelViewport.left+a,f=this.pixelViewport.right+a;if(null!=c){let t=Jv(r,c),e=((f-d)/2+o)/n;h=t-e,u=t+e}else h=(d-o)/n,u=(f+o)/n;s=Uv(r,h),l=Uv(r,u)}s>e.from&&a(e.from,s,e,r),l<e.to&&a(l,e.to,e,r)};for(let t of this.viewportLines)Array.isArray(t.type)?t.type.forEach(l):l(t);return s}gapSize(t,e,n,i){let r=Jv(i,n)-Jv(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(t){Kv.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=xg.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Kf.spans(e,this.viewport.from,this.viewport.to,{span(t,e){n.push({from:t,to:e})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let e=0;e<n.length&&!(8&i);e++){let r=this.visibleRanges[e],o=n[e];r.from==o.from&&r.to==o.to||(i|=4,t&&t.mapPos(r.from,-1)==o.from&&t.mapPos(r.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||nb(this.heightMap.lineAt(t,Nv.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((e=>e.top<=t&&e.bottom>=t))||nb(this.heightMap.lineAt(this.scaler.fromDOM(t),Nv.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return nb(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Gv{constructor(t,e){this.from=t,this.to=e}}function Uv({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:r}=e[t],o=r-n;if(i<=o)return n+i;i-=o}}function Jv(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}const tb={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class eb{constructor(t,e,n){let i=0,r=0,o=0;this.viewports=n.map((({from:n,to:r})=>{let o=e.lineAt(n,Nv.ByPos,t,0,0).top,s=e.lineAt(r,Nv.ByPos,t,0,0).bottom;return i+=s-o,{from:n,to:r,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(e.height-i);for(let t of this.viewports)t.domTop=o+(t.top-r)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),r=t.bottom}toDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}}fromDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}}eq(t){return t instanceof eb&&this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every(((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to))}}function nb(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Bv(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map((t=>nb(t,e))):t._content)}const ib=of.define({combine:t=>t.join(" ")}),rb=of.define({combine:t=>t.indexOf(!0)>-1}),ob=up.newName(),sb=up.newName(),ab=up.newName(),lb={"&light":"."+sb,"&dark":"."+ab};function cb(t,e,n){return new up(e,{finish(e){return/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e}})}const hb=cb("."+ob,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lb),ub={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},db=ag.ie&&ag.ie_version<=11;class fb{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new Rp,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(ag.ie&&ag.ie_version<=11||ag.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===t.constructor.EDIT_CONTEXT||ag.chrome&&ag.chrome_version<126||(this.editContext=new mb(t),t.state.facet(mm)&&(t.contentDOM.editContext=this.editContext.editContext)),db&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(t){("change"!=t.type&&t.type||t.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(mm)?n.root.activeElement!=this.dom:!xp(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(t)?e||(this.selectionChanged=!1):(ag.ie&&ag.ie_version<=11||ag.android&&ag.chrome)&&!n.state.selection.main.empty&&i.focusNode&&Cp(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=Op(t.root);if(!e)return!1;let n=ag.safari&&11==t.root.nodeType&&t.root.activeElement==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return gb(t,n)}let n=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?gb(t,n):null}(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let i=xp(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,Pp(n));;)if(i){if(1!=n.nodeType)return!1;let t=n.childNodes[i-1];"false"==t.contentEditable?i--:(n=t,i=Pp(n))}else{if(n==t)return!0;i=Ap(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ub),db&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),db&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&_p(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,i=!1;for(let r of t){let t=this.readMutation(r);t&&(t.typeOver&&(i=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:i}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),i=this.selectionChanged&&xp(this.dom,this.selectionRange);if(t<0&&!i)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new Um(this.view,t,e,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,i=Jm(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=pb(e,t.previousSibling||t.target.previousSibling,-1),i=pb(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(mm)!=t.state.facet(mm)&&(t.view.contentDOM.editContext=t.state.facet(mm)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function pb(t,e,n){for(;e;){let i=Fp.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function gb(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return Cp(s.node,s.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}class mb{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=e=>{let n=t.state.selection.main,{anchor:i,head:r}=n,o=this.toEditorPos(e.updateRangeStart),s=this.toEditorPos(e.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:e.updateRangeStart,editorBase:o,drifted:!1});let a={from:o,to:s,insert:Td.of(e.text.split("\n"))};if(a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),a.from!=a.to||a.insert.length){if((ag.mac||ag.android)&&a.from==r-1&&/^\. ?$/.test(e.text)&&"off"==t.contentDOM.getAttribute("autocorrect")&&(a={from:o,to:s,insert:Td.of([e.text.replace("."," ")])}),this.pendingContextChange=a,!t.state.readOnly){let n=this.to-this.from+(a.to-a.from+a.insert.length);tv(t,a,ef.single(this.toEditorPos(e.selectionStart,n),this.toEditorPos(e.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))}else{let i=ef.single(this.toEditorPos(e.selectionStart),this.toEditorPos(e.selectionEnd));i.main.eq(n)||t.dispatch({selection:i,userEvent:"select"})}},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let e=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);e<o;e++){let n=t.coordsForChar(e);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}e.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=e=>{let n=[];for(let t of e.getTextFormats()){let e=t.underlineStyle,i=t.underlineThickness;if("None"!=e&&"None"!=i){let r=this.toEditorPos(t.rangeStart),o=this.toEditorPos(t.rangeEnd);if(r<o){let t=`text-decoration: underline ${"Dashed"==e?"dashed ":"Squiggle"==e?"wavy ":""}${"Thin"==i?1:2}px`;n.push(xg.mark({attributes:{style:t}}).range(r,o))}}}t.dispatch({effects:pm.of(xg.set(n))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:e}=this.composing;this.composing=null,e&&this.reset(t.state)}};for(let t in this.handlers)e.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let e=Op(t.root);e&&e.rangeCount&&this.editContext.updateSelectionBounds(e.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,i=this.pendingContextChange;return t.changes.iterChanges(((r,o,s,a,l)=>{if(n)return;let c=l.length-(o-r);if(i&&o>=i.to){if(i.from==r&&i.to==o&&i.insert.eq(l))return i=this.pendingContextChange=null,e+=c,void(this.to+=c);i=null,this.revertPending(t.state)}if(r+=e,(o+=e)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),l.toString()),this.to+=c}e+=c})),i&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some((t=>!t.isUserEvent("input.type")&&t.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):this.applyEdits(t)&&this.rangeIsValid(t.state)?(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state):(this.pendingContextChange=null,this.reset(t.state)),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),i=this.toContextPos(e.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>3e4)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class vb{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(t=>t.forEach((t=>n(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new Yv(t.state||Hf.create(t)),t.scrollTo&&t.scrollTo.is(fm)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(bm).map((t=>new wm(t)));for(let t of this.plugins)t.update(this);this.observer=new fb(this),this.inputState=new ev(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Rm(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(e=document.fonts)||void 0===e?void 0:e.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...t){let e=1==t.length&&t[0]instanceof Df?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,i=!1,r=this.state;for(let e of t){if(e.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=e.state}if(this.destroyed)return void(this.viewState.state=r);let o=this.hasFocus,s=0,a=null;t.some((t=>t.annotation(Cv)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Av(r,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(Hf.phrases)!=this.state.facet(Hf.phrases))return this.setState(r);e=Dm.create(this,r,t),e.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(h&&(h=h.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;h=new dm(t.empty?t:ef.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(fm)&&(h=t.value.clip(this.state))}this.viewState.update(e,h),this.bidiCache=wb.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(Tm)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(ib)!=e.state.facet(ib)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!e.empty)for(let t of this.state.facet(rm))try{t(e)}catch(t){gm(this.state,t,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Jm(this,c)&&l.force&&_p(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new Yv(t),this.plugins=t.facet(bm).map((t=>new wm(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new Rm(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(bm),n=t.state.facet(bm);if(e!=n){let i=[];for(let r of n){let n=e.indexOf(r);if(n<0)i.push(new wm(r));else{let e=this.plugins[n];e.mustUpdate=t,i.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(t){gm(this.state,t,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(o<0)if(zp(n))r=-1,o=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(i);r=t.from,o=t.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((t=>{try{return t.read(this)}catch(t){return gm(this.state,t),yb}})),c=Dm.create(this,this.state,[]),h=!1;c.flags|=s,e?e.flags|=s:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let t=0;t<a.length;t++)if(l[t]!=yb)try{let e=a[t];e.write&&e.write(l[t],this)}catch(t){gm(this.state,t)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let t=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(t>1||t<-1){i+=t,n.scrollTop=i/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(rm))t(e)}get themeClasses(){return ob+" "+(this.state.facet(rb)?ab:sb)+" "+this.state.facet(ib)}updateAttrs(){let t=Ob(this,Om,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(mm)?"true":"false",class:"cm-content",style:`${ag.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),Ob(this,Sm,e);let n=this.observer.ignore((()=>{let n=yg(this.contentDOM,this.contentAttrs,e),i=yg(this.dom,this.editorAttrs,t);return n||i}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(vb.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(Tm);let t=this.state.facet(vb.cspNonce);up.mount(this.root,this.styleModules.concat(hb).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return Xm(this,t,Fm(this,t,e,n))}moveByGroup(t,e){return Xm(this,t,Fm(this,t,e,(e=>function(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return t=>{let e=i(t);return r==If.Space&&(r=e),r==e}}(this,t.head,e))))}visualLineSide(t,e){let n=this.bidiSpans(t),i=this.textDirectionAt(t.from),r=n[e?n.length-1:0];return ef.cursor(r.side(e,i)+t.from,r.forward(!e,i)?1:-1)}moveToLineBoundary(t,e,n=!0){return function(t,e,n,i){let r=function(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let t;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;t&&(r.type!=Sg.Text||t.type==r.type&&!(n<0?r.from<e:r.to>e))||(t=r)}}return t||i}return i}(t,e.head,e.assoc||-1),o=i&&r.type==Sg.Text&&(t.lineWrapping||r.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),i=t.textDirectionAt(r.from),s=t.posAtCoords({x:n==(i==Ng.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return ef.cursor(s,n?-1:1)}return ef.cursor(n?r.to:r.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return Xm(this,t,function(t,e,n,i){let r=e.head,o=n?1:-1;if(r==(n?t.state.doc.length:0))return ef.cursor(r,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),h=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-e.from))),s=(o<0?e.top:e.bottom)+h}let u=l.left+a,d=null!=i?i:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(d+e)*o,i=Vm(t,{x:u,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?i<r:i>r)){let e=t.docView.coordsForChar(i),r=!e||n<e.top?-1:1;return ef.cursor(i,r,void 0,a)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),Vm(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),r=this.bidiSpans(i);return Tp(n,r[Fg.find(r,t-i.from,-1,e)].dir==Ng.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(cm)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>bb)return Yg(t.length);let e,n=this.textDirectionAt(t.from);for(let i of this.bidiCache)if(i.from==t.from&&i.dir==n&&(i.fresh||qg(i.isolates,e=Mm(this,t))))return i.order;e||(e=Mm(this,t));let i=function(t,e,n){if(!t)return[new Fg(0,0,e==jg?1:0)];if(e==Lg&&!n.length&&!Wg.test(t))return Yg(t.length);if(n.length)for(;t.length>Xg.length;)Xg[Xg.length]=256;let i=[],r=e==Lg?0:1;return Zg(t,r,r,n,0,t.length,i),i}(t.text,n,e);return this.bidiCache.push(new wb(t.from,t.to,n,e,!0,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||ag.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Lp(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return fm.of(new dm("number"==typeof t?ef.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return fm.of(new dm(ef.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){null==t?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof t?this.inputState.tabFocusMode=t?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return ym.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return ym.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=up.newName(),i=[ib.of(n),Tm.of(cb(`.${n}`,t))];return e&&e.dark&&i.push(rb.of(!0)),i}static baseTheme(t){return pf.lowest(Tm.of(cb("."+ob,t,lb)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),i=n&&Fp.get(n)||Fp.get(t);return(null===(e=null==i?void 0:i.rootView)||void 0===e?void 0:e.view)||null}}vb.styleModule=Tm,vb.inputHandler=om,vb.clipboardInputFilter=am,vb.clipboardOutputFilter=lm,vb.scrollHandler=um,vb.focusChangeEffect=sm,vb.perLineTextDirection=cm,vb.exceptionSink=im,vb.updateListener=rm,vb.editable=mm,vb.mouseSelectionStyle=nm,vb.dragMovesSelection=em,vb.clickAddsSelectionRange=tm,vb.decorations=xm,vb.outerDecorations=km,vb.atomicRanges=Cm,vb.bidiIsolatedRanges=Am,vb.scrollMargins=Em,vb.darkTheme=rb,vb.cspNonce=of.define({combine:t=>t.length?t[0]:""}),vb.contentAttributes=Sm,vb.editorAttributes=Om,vb.lineWrapping=vb.contentAttributes.of({class:"cm-lineWrapping"}),vb.announce=$f.define();const bb=4096,yb={};class wb{constructor(t,e,n,i,r,o){this.from=t,this.to=e,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],i=t.length?t[t.length-1].dir:Ng.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir!=i||e.touchesRange(o.from,o.to)||n.push(new wb(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function Ob(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let e=i[r],o="function"==typeof e?e(t):e;o&&mg(o,n)}return n}class Sb extends Wf{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}Sb.prototype.elementClass="",Sb.prototype.toDOM=void 0,Sb.prototype.mapMode=Fd.TrackBefore,Sb.prototype.startSide=Sb.prototype.endSide=-1,Sb.prototype.point=!0;const xb=of.define(),kb=of.define(),Cb={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Kf.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ab=of.define();function Mb(t){return[Pb(),Ab.of(Object.assign(Object.assign({},Cb),t))]}const Eb=of.define({combine:t=>t.some((t=>t))});function Pb(t){let e=[Tb];return t&&!1===t.fixed&&e.push(Eb.of(!0)),e}const Tb=ym.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Ab).map((e=>new Bb(t,e)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!t.state.facet(Eb),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<.8*(n.to-n.from))}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Eb)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Kf.iter(this.view.state.facet(xb),this.view.viewport.from),i=[],r=this.gutters.map((t=>new Rb(t,this.view.viewport,-this.view.documentPadding.top)));for(let t of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(t.type)){let e=!0;for(let o of t.type)if(o.type==Sg.Text&&e){Db(n,i,o.from);for(let t of r)t.line(this.view,o,i);e=!1}else if(o.widget)for(let t of r)t.widget(this.view,o)}else if(t.type==Sg.Text){Db(n,i,t.from);for(let e of r)e.line(this.view,t,i)}else if(t.widget)for(let e of r)e.widget(this.view,t);for(let t of r)t.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Ab),n=t.state.facet(Ab),i=t.docChanged||t.heightChanged||t.viewportChanged||!Kf.eq(t.startState.facet(xb),t.state.facet(xb),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let e of this.gutters)e.update(t)&&(i=!0);else{i=!0;let r=[];for(let i of n){let n=e.indexOf(i);n<0?r.push(new Bb(this.view,i)):(this.gutters[n].update(t),r.push(this.gutters[n]))}for(let t of this.gutters)t.dom.remove(),r.indexOf(t)<0&&t.destroy();for(let t of r)this.dom.appendChild(t.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>vb.scrollMargins.of((e=>{let n=e.plugin(t);return n&&0!=n.gutters.length&&n.fixed?e.textDirection==Ng.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}:null}))});function $b(t){return Array.isArray(t)?t:[t]}function Db(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Rb{constructor(t,e,n){this.gutter=t,this.height=n,this.i=0,this.cursor=Kf.iter(t.markers,e.from)}addElement(t,e,n){let{gutter:i}=this,r=(e.top-this.height)/t.scaleY,o=e.height/t.scaleY;if(this.i==i.elements.length){let e=new Nb(t,o,r,n);i.elements.push(e),i.dom.appendChild(e.dom)}else i.elements[this.i].update(t,o,r,n);this.height=e.bottom,this.i++}line(t,e,n){let i=[];Db(this.cursor,i,e.from),n.length&&(i=i.concat(n));let r=this.gutter.config.lineMarker(t,e,i);r&&i.unshift(r);let o=this.gutter;(0!=i.length||o.config.renderEmptyElements)&&this.addElement(t,e,i)}widget(t,e){let n=this.gutter.config.widgetMarker(t,e.widget,e),i=n?[n]:null;for(let n of t.state.facet(kb)){let r=n(t,e.widget,e);r&&(i||(i=[])).push(r)}i&&this.addElement(t,e,i)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class Bb{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in e.domEventHandlers)this.dom.addEventListener(n,(i=>{let r,o=i.target;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let t=o.getBoundingClientRect();r=(t.top+t.bottom)/2}else r=i.clientY;let s=t.lineBlockAtHeight(r-t.documentTop);e.domEventHandlers[n](t,s,i)&&i.preventDefault()}));this.markers=$b(e.markers(t)),e.initialSpacer&&(this.spacer=new Nb(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=$b(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let e=this.config.updateSpacer(this.spacer.markers[0],t);e!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[e])}let n=t.view.viewport;return!Kf.eq(this.markers,e,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(t)}destroy(){for(let t of this.elements)t.destroy()}}class Nb{constructor(t,e,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,n,i)}update(t,e,n,i){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}(this.markers,i)||this.setMarkers(t,i)}setMarkers(t,e){let n="cm-gutterElement",i=this.dom.firstChild;for(let r=0,o=0;;){let s=o,a=r<e.length?e[r++]:null,l=!1;if(a){let t=a.elementClass;t&&(n+=" "+t);for(let t=o;t<this.markers.length;t++)if(this.markers[t].compare(a)){s=t,l=!0;break}}else s=this.markers.length;for(;o<s;){let t=this.markers[o++];if(t.toDOM){t.destroy(i);let e=i.nextSibling;i.remove(),i=e}}if(!a)break;a.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(a.toDOM(t),i)),l&&o++}this.dom.className=n,this.markers=e}destroy(){this.setMarkers(null,[])}}var Lb;const jb=new Dh;function _b(t){return of.define({combine:t?e=>e.concat(t):void 0})}const Ib=new Dh;class zb{constructor(t,e,n=[],i=""){this.data=t,this.name=i,Hf.prototype.hasOwnProperty("tree")||Object.defineProperty(Hf.prototype,"tree",{get(){return Vb(this)}}),this.parser=e,this.extension=[Ub.of(this),Hf.languageData.of(((t,e,n)=>{let i=Qb(t,e,n),r=i.type.prop(jb);if(!r)return[];let o=t.facet(r),s=i.type.prop(Ib);if(s){let r=i.resolve(e-i.from,n);for(let e of s)if(e.test(r,t)){let n=t.facet(e.facet);return"replace"==e.type?n:n.concat(o)}}return o}))].concat(n)}isActiveAt(t,e,n=-1){return Qb(t,e,n).type.prop(jb)==this.data}findRegions(t){let e=t.facet(Ub);if((null==e?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],i=(t,e)=>{if(t.prop(jb)==this.data)return void n.push({from:e,to:e+t.length});let r=t.prop(Dh.mounted);if(r){if(r.tree.prop(jb)==this.data){if(r.overlay)for(let t of r.overlay)n.push({from:t.from+e,to:t.to+e});else n.push({from:e,to:e+t.length});return}if(r.overlay){let t=n.length;if(i(r.tree,r.overlay[0].from+e),n.length>t)return}}for(let n=0;n<t.children.length;n++){let r=t.children[n];r instanceof zh&&i(r,t.positions[n]+e)}};return i(Vb(t),0),n}get allowsNesting(){return!0}}function Qb(t,e,n){let i=t.facet(Ub),r=Vb(t).topNode;if(!i||i.allowsNesting)for(let t=r;t;t=t.enter(e,n,Ih.ExcludeBuffers))t.type.isTop&&(r=t);return r}zb.setState=$f.define();class Hb extends zb{constructor(t,e,n){super(t,e,[],n),this.parser=e}static define(t){let e=_b(t.languageData);return new Hb(e,t.parser.configure({props:[jb.add((t=>t.isTop?e:void 0))]}),t.name)}configure(t,e){return new Hb(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Vb(t){let e=t.field(zb.state,!1);return e?e.tree:zh.empty}class Wb{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}}let Fb=null;class qb{constructor(t,e,n=[],i,r,o,s,a){this.parser=t,this.state=e,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(t,e,n){return new qb(t,e,[],zh.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Wb(this.state.doc),this.fragments)}work(t,e){return null!=e&&e>=this.state.doc.length&&(e=void 0),this.tree!=zh.empty&&this.isDone(null!=e?e:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof t){let e=Date.now()+t;t=()=>Date.now()>e}for(this.parse||(this.parse=this.startParse()),null!=e&&(null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(ou.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(null!=e?e:this.state.doc.length)))return!0;this.parse=this.startParse()}if(t())return!1}}))}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext((()=>{for(;!(e=this.parse.advance()););})),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(ou.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=Fb;Fb=this;try{return t()}finally{Fb=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Xb(t,e.from,e.to);return t}changes(t,e){let{fragments:n,tree:i,treeLen:r,viewport:o,skipped:s}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges(((t,n,i,r)=>e.push({fromA:t,toA:n,fromB:i,toB:r}))),n=ou.applyChanges(n,e),i=zh.empty,r=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){s=[];for(let e of this.skipped){let n=t.mapPos(e.from,1),i=t.mapPos(e.to,-1);n<i&&s.push({from:n,to:i})}}}return new qb(this.parser,e,n,i,r,o,s,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let e=0;e<this.skipped.length;e++){let{from:n,to:i}=this.skipped[e];n<t.to&&i>t.from&&(this.fragments=Xb(this.fragments,n,i),this.skipped.splice(e--,1))}return!(this.skipped.length>=e||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends su{createParse(e,n,i){let r=i[0].from,o=i[i.length-1].to;return{parsedPos:r,advance(){let e=Fb;if(e){for(let t of i)e.tempSkipped.push(t);t&&(e.scheduleOn=e.scheduleOn?Promise.all([e.scheduleOn,t]):t)}return this.parsedPos=o,new zh(Nh.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&0==e[0].from&&e[0].to>=t}static get(){return Fb}}function Xb(t,e,n){return ou.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Kb{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,n)||e.takeTree(),new Kb(e)}static init(t){let e=Math.min(3e3,t.doc.length),n=qb.create(t.facet(Ub).parser,t,{from:0,to:e});return n.work(20,e)||n.takeTree(),new Kb(n)}}zb.state=df.define({create:Kb.init,update(t,e){for(let t of e.effects)if(t.is(zb.setState))return t.value;return e.startState.facet(Ub)!=e.state.facet(Ub)?Kb.init(e.state):t.apply(e)}});let Zb=t=>{let e=setTimeout((()=>t()),500);return()=>clearTimeout(e)};"undefined"!=typeof requestIdleCallback&&(Zb=t=>{let e=-1,n=setTimeout((()=>{e=requestIdleCallback(t,{timeout:400})}),100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Yb="undefined"!=typeof navigator&&(null===(Lb=navigator.scheduling)||void 0===Lb?void 0:Lb.isInputPending)?()=>navigator.scheduling.isInputPending():null,Gb=ym.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(zb.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(zb.state);e.tree==e.context.tree&&e.context.isDone(t.doc.length)||(this.working=Zb(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(zb.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!Yb?Math.max(25,t.timeRemaining()-5):1e9),s=r.context.treeLen<i&&n.doc.length>i+1e3,a=r.context.work((()=>Yb&&Yb()||Date.now()>o),i+(s?0:1e5));this.chunkBudget-=Date.now()-e,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:zb.setState.of(new Kb(r.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then((()=>this.scheduleWork())).catch((t=>gm(this.view.state,t))).then((()=>this.workScheduled--)),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ub=of.define({combine(t){return t.length?t[0]:null},enables:t=>[zb.state,Gb,vb.contentAttributes.compute([t],(e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}}))]});class Jb{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}}const ty=of.define(),ey=of.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some((t=>t!=e[0])))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function ny(t){let e=t.facet(ey);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function iy(t,e){let n="",i=t.tabSize,r=t.facet(ey)[0];if("\t"==r){for(;e>=i;)n+="\t",e-=i;r=" "}for(let t=0;t<e;t++)n+=r;return n}function ry(t,e){t instanceof Hf&&(t=new oy(t));for(let n of t.state.facet(ty)){let i=n(t,e);if(void 0!==i)return i}let n=Vb(t.state);return n.length>=e?function(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let t=[];for(let e=r;e&&(e.from!=i.node.from||e.type!=i.node.type);e=e.parent)t.push(e);for(let e=t.length-1;e>=0;e--)i={node:t[e],next:i}}return ay(i,t,n)}(t,n,e):null}class oy{constructor(t,e={}){this.state=t,this.options=e,this.unit=ny(t)}lineAt(t,e=1){let n=this.state.doc.lineAt(t),{simulateBreak:i,simulateDoubleBreak:r}=this.options;return null!=i&&i>=n.from&&i<=n.to?r&&i==t?{text:"",from:t}:(e<0?i<t:i<=t)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(t,e);return n.slice(t-i,Math.min(n.length,t+100-i))}column(t,e=1){let{text:n,from:i}=this.lineAt(t,e),r=this.countColumn(n,t-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(r+=o-this.countColumn(n,n.search(/\S|$/))),r}countColumn(t,e=t.length){return sp(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:n,from:i}=this.lineAt(t,e),r=this.options.overrideIndentation;if(r){let t=r(i);if(t>-1)return t}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const sy=new Dh;function ay(t,e,n){for(let i=t;i;i=i.next){let t=ly(i.node);if(t)return t(hy.create(e,n,i))}return 0}function ly(t){let e=t.type.prop(sy);if(e)return e;let n,i=t.firstChild;if(i&&(n=i.type.prop(Dh.closedBy))){let e=t.lastChild,i=e&&n.indexOf(e.name)>-1;return t=>fy(t,!0,1,void 0,i&&!function(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}(t)?e.from:void 0)}return null==t.parent?cy:null}function cy(){return 0}class hy extends oy{constructor(t,e,n){super(t.state,t.options),this.base=t,this.pos=e,this.context=n}get node(){return this.context.node}static create(t,e,n){return new hy(t,e,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let n=t.resolve(e.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(uy(n,t))break;e=this.state.doc.lineAt(n.from)}return this.lineIndent(e.from)}continue(){return ay(this.context.next,this.base,this.pos)}}function uy(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function dy({closing:t,align:e=!0,units:n=1}){return i=>fy(i,e,n,t)}function fy(t,e,n,i,r){let o=t.textAfter,s=o.match(/^\s*/)[0].length,a=i&&o.slice(s,s+i.length)==i||r==t.pos+s,l=e?function(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),s=null==r||r<=o.from?o.to:Math.min(o.to,r);for(let t=n.to;;){let r=e.childAfter(t);if(!r||r==i)return null;if(!r.type.isSkipped){if(r.from>=s)return null;let t=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+t}}t=r.to}}(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}function py({except:t,units:e=1}={}){return n=>{let i=t&&t.test(n.textAfter);return n.baseIndent+(i?0:e*n.unit)}}const gy=of.define(),my=new Dh;function vy(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function by(t,e,n){for(let i of t.facet(gy)){let r=i(t,e,n);if(r)return r}return function(t,e,n){let i=Vb(t);if(i.length<n)return null;let r=null;for(let o=i.resolveStack(n,1);o;o=o.next){let s=o.node;if(s.to<=n||s.from>n)continue;if(r&&s.from<e)break;let a=s.type.prop(my);if(a&&(s.to<i.length-50||i.length==t.doc.length||!vy(s))){let i=a(s,t);i&&i.from<=n&&i.from>=e&&i.to>n&&(r=i)}}return r}(t,e,n)}function yy(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const wy=$f.define({map:yy}),Oy=$f.define({map:yy});function Sy(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some((t=>t.from<=n&&t.to>=n))||e.push(t.lineBlockAt(n));return e}const xy=df.define({create(){return xg.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(wy)&&!Cy(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Ty),r=i?xg.replace({widget:new By(i(e.state,n.value))}):Ry;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Oy)&&(t=t.update({filter:(t,e)=>n.value.from!=t||n.value.to!=e,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,((t,e)=>{t<i&&e>i&&(n=!0)})),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(t,e)=>e<=i||t>=i}))}return t},provide:t=>vb.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,((t,e)=>{n.push(t,e)})),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if("number"!=typeof i||"number"!=typeof r)throw new RangeError("Invalid JSON for fold state");e.push(Ry.range(i,r))}return xg.set(e,!0)}});function ky(t,e,n){var i;let r=null;return null===(i=t.field(xy,!1))||void 0===i||i.between(e,n,((t,e)=>{(!r||r.from>t)&&(r={from:t,to:e})})),r}function Cy(t,e,n){let i=!1;return t.between(e,e,((t,r)=>{t==e&&r==n&&(i=!0)})),i}function Ay(t,e){return t.field(xy,!1)?e:e.concat($f.appendConfig.of($y()))}function My(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return vb.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const Ey=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:t=>{for(let e of Sy(t)){let n=by(t.state,e.from,e.to);if(n)return t.dispatch({effects:Ay(t.state,[wy.of(n),My(t,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:t=>{if(!t.state.field(xy,!1))return!1;let e=[];for(let n of Sy(t)){let i=ky(t.state,n.from,n.to);i&&e.push(Oy.of(i),My(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),o=by(e,r.from,r.to);o&&n.push(wy.of(o)),i=(o?t.lineBlockAt(o.to):r).to+1}return n.length&&t.dispatch({effects:Ay(t.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:t=>{let e=t.state.field(xy,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,((t,e)=>{n.push(Oy.of({from:t,to:e}))})),t.dispatch({effects:n}),!0}}],Py={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Ty=of.define({combine(t){return Vf(t,Py)}});function $y(t){let e=[xy,jy];return t&&e.push(Ty.of(t)),e}function Dy(t,e){let{state:n}=t,i=n.facet(Ty),r=e=>{let n=t.lineBlockAt(t.posAtDOM(e.target)),i=ky(t.state,n.from,n.to);i&&t.dispatch({effects:Oy.of(i)}),e.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}const Ry=xg.replace({widget:new class extends Og{toDOM(t){return Dy(t,null)}}});class By extends Og{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return Dy(t,this.value)}}const Ny={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ly extends Sb{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}const jy=vb.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class _y{constructor(t,e){let n;function i(t){let e=up.newName();return(n||(n=Object.create(null)))["."+e]=t,e}this.specs=t;const r="string"==typeof e.all?e.all:e.all?i(e.all):void 0,o=e.scope;this.scope=o instanceof zb?t=>t.prop(jb)==o.data:o?t=>t==o:void 0,this.style=Qu(t.map((t=>({tag:t.tag,class:t.class||i(Object.assign({},t,{tag:null}))}))),{all:r}).style,this.module=n?new up(n):null,this.themeType=e.themeType}static define(t,e){return new _y(t,e||{})}}const Iy=of.define(),zy=of.define({combine(t){return t.length?[t[0]]:null}});function Qy(t){let e=t.facet(Iy);return e.length?e:t.facet(zy)}function Hy(t,e){let n,i=[Wy];return t instanceof _y&&(t.module&&i.push(vb.styleModule.of(t.module)),n=t.themeType),(null==e?void 0:e.fallback)?i.push(zy.of(t)):n?i.push(Iy.computeN([vb.darkTheme],(e=>e.facet(vb.darkTheme)==("dark"==n)?[t]:[]))):i.push(Iy.of(t)),i}class Vy{constructor(t){this.markCache=Object.create(null),this.tree=Vb(t.state),this.decorations=this.buildDeco(t,Qy(t.state)),this.decoratedTo=t.viewport.to}update(t){let e=Vb(t.state),n=Qy(t.state),i=n!=Qy(t.startState),{viewport:r}=t.view,o=t.changes.mapPos(this.decoratedTo,1);e.length<r.to&&!i&&e.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=o):(e!=this.tree||t.viewportChanged||i)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n),this.decoratedTo=r.to)}buildDeco(t,e){if(!e||!this.tree.length)return xg.none;let n=new Zf;for(let{from:i,to:r}of t.visibleRanges)Hu(this.tree,e,((t,e,i)=>{n.add(t,e,this.markCache[i]||(this.markCache[i]=xg.mark({class:i})))}),i,r);return n.finish()}}const Wy=pf.high(ym.fromClass(Vy,{decorations:t=>t.decorations})),Fy=_y.define([{tag:od.meta,color:"#404740"},{tag:od.link,textDecoration:"underline"},{tag:od.heading,textDecoration:"underline",fontWeight:"bold"},{tag:od.emphasis,fontStyle:"italic"},{tag:od.strong,fontWeight:"bold"},{tag:od.strikethrough,textDecoration:"line-through"},{tag:od.keyword,color:"#708"},{tag:[od.atom,od.bool,od.url,od.contentSeparator,od.labelName],color:"#219"},{tag:[od.literal,od.inserted],color:"#164"},{tag:[od.string,od.deleted],color:"#a11"},{tag:[od.regexp,od.escape,od.special(od.string)],color:"#e40"},{tag:od.definition(od.variableName),color:"#00f"},{tag:od.local(od.variableName),color:"#30a"},{tag:[od.typeName,od.namespace],color:"#085"},{tag:od.className,color:"#167"},{tag:[od.special(od.variableName),od.macroName],color:"#256"},{tag:od.definition(od.propertyName),color:"#00c"},{tag:od.comment,color:"#940"},{tag:od.invalid,color:"#f00"}]),qy=vb.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Xy="()[]{}",Ky=of.define({combine(t){return Vf(t,{afterCursor:!0,brackets:Xy,maxScanDistance:1e4,renderMatch:Gy})}}),Zy=xg.mark({class:"cm-matchingBracket"}),Yy=xg.mark({class:"cm-nonmatchingBracket"});function Gy(t){let e=[],n=t.matched?Zy:Yy;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const Uy=df.define({create(){return xg.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],i=e.state.facet(Ky);for(let t of e.state.selection.ranges){if(!t.empty)continue;let r=iw(e.state,t.head,-1,i)||t.head>0&&iw(e.state,t.head-1,1,i)||i.afterCursor&&(iw(e.state,t.head,1,i)||t.head<e.state.doc.length&&iw(e.state,t.head+1,-1,i));r&&(n=n.concat(i.renderMatch(r,e.state)))}return xg.set(n,!0)},provide:t=>vb.decorations.from(t)}),Jy=[Uy,qy],tw=new Dh;function ew(t,e,n){let i=t.prop(e<0?Dh.openedBy:Dh.closedBy);if(i)return i;if(1==t.name.length){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function nw(t){let e=t.type.prop(tw);return e?e(t.node):t}function iw(t,e,n,i={}){let r=i.maxScanDistance||1e4,o=i.brackets||Xy,s=Vb(t),a=s.resolveInner(e,n);for(let t=a;t;t=t.parent){let i=ew(t.type,n,o);if(i&&t.from<t.to){let r=nw(t);if(r&&(n>0?e>=r.from&&e<r.to:e>r.from&&e<=r.to))return rw(0,0,n,t,r,i,o)}}return function(t,e,n,i,r,o,s){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),u=0;for(let t=0;!h.next().done&&t<=o;){let o=h.value;n<0&&(t+=o.length);let a=e+t*n;for(let t=n>0?0:o.length-1,e=n>0?o.length:-1;t!=e;t+=n){let e=s.indexOf(o[t]);if(!(e<0||i.resolveInner(a+t,1).type!=r))if(e%2==0==n>0)u++;else{if(1==u)return{start:c,end:{from:a+t,to:a+t+1},matched:e>>1==l>>1};u--}}n>0&&(t+=o.length)}return h.done?{start:c,matched:!1}:null}(t,e,n,s,a.type,r,o)}function rw(t,e,n,i,r,o,s){let a=i.parent,l={from:r.from,to:r.to},c=0,h=null==a?void 0:a.cursor();if(h&&(n<0?h.childBefore(i.from):h.childAfter(i.to)))do{if(n<0?h.to<=i.from:h.from>=i.to){if(0==c&&o.indexOf(h.type.name)>-1&&h.from<h.to){let t=nw(h);return{start:l,end:t?{from:t.from,to:t.to}:void 0,matched:!0}}if(ew(h.type,n,s))c++;else if(ew(h.type,-n,s)){if(0==c){let t=nw(h);return{start:l,end:t&&t.from<t.to?{from:t.from,to:t.to}:void 0,matched:!1}}c--}}}while(n<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}const ow=Object.create(null),sw=[Nh.none],aw=[],lw=Object.create(null),cw=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])cw[t]=uw(ow,e);function hw(t,e){aw.indexOf(t)>-1||(aw.push(t),console.warn(e))}function uw(t,e){let n=[];for(let i of e.split(" ")){let e=[];for(let n of i.split(".")){let i=t[n]||od[n];i?"function"==typeof i?e.length?e=e.map(i):hw(n,`Modifier ${n} used at start of tag`):e.length?hw(n,`Tag ${n} used as modifier`):e=Array.isArray(i)?i:[i]:hw(n,`Unknown highlighting tag ${n}`)}for(let t of e)n.push(t)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map((t=>t.id)),o=lw[r];if(o)return o.id;let s=lw[r]=Nh.define({id:sw.length,name:i,props:[_u({[i]:n})]});return sw.push(s),s.id}function dw(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function fw(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function pw(t,e){if(!e.anchorNode)return!1;try{return fw(t,e.anchorNode)}catch(t){return!1}}function gw(t){return 3==t.nodeType?Ew(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function mw(t,e,n,i){return!!n&&(yw(t,e,n,i,-1)||yw(t,e,n,i,1))}function vw(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function bw(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function yw(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:ww(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=vw(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(r<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=r<0?ww(t):0}}}function ww(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Ow(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Sw(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function xw(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}Ng.RTL,Ng.LTR;class kw{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?ww(e):0),n,Math.min(t.focusOffset,n?ww(n):0))}set(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i}}let Cw,Aw=null;function Mw(t){if(t.setActive)return t.setActive();if(Aw)return t.focus(Aw);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==Aw?{get preventScroll(){return Aw={preventScroll:!0},!0}}:void 0),!Aw){Aw=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function Ew(t,e,n=e){let i=Cw||(Cw=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Pw(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function Tw(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function $w(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Dw(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=ww(n)}else{if(!n.parentNode||bw(n))return null;i=vw(n),n=n.parentNode}}}function Rw(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||bw(n))return null;i=vw(n)+1,n=n.parentNode}}}class Bw{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new Bw(t.parentNode,vw(t),e)}static after(t,e){return new Bw(t.parentNode,vw(t)+1,e)}}const Nw=[];class Lw{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,i=this.dom,r=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let t=Lw.get(n);(!t||!t.parent&&t.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(t,e),o.flags&=-8}if(n=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&n!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=jw(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&e&&e.node==i&&(e.written=!0);n;)n=jw(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let i=0==ww(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==i&&e.firstChild!=e.lastChild&&(i=t==e.firstChild?-1:1),t=e}n=i<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Lw.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let i=this.children[t];if(i.dom==n)return e;e+=i.length+i.breakAfter}}domBoundsAround(t,e,n=0){let i=-1,r=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],h=l+n.length;if(l<t&&h>e)return n.domBoundsAround(t,e,l);if(h>=t&&-1==i&&(i=a,r=l),l>e&&n.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+n.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=Nw){this.markDirty();for(let i=t;i<e;i++){let t=this.children[i];t.parent==this&&n.indexOf(t)<0&&t.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new _w(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,i,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function jw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}Lw.prototype.breakAfter=0;class _w{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Iw(t,e,n,i,r,o,s,a,l){let{children:c}=t,h=c.length?c[e]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(e==i&&h&&!s&&!d&&o.length<2&&h.merge(n,r,o.length?u:null,0==n,a,l))){if(i<c.length){let t=c[i];t&&(r<t.length||t.breakAfter&&(null==u?void 0:u.breakAfter))?(e==i&&(t=t.split(r),r=0),!d&&u&&t.merge(0,r,u,!0,0,l)?o[o.length-1]=t:((r||t.children.length&&!t.children[0].length)&&t.merge(0,r,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(u?u.breakAfter=1:s=1),i++}for(h&&(h.breakAfter=s,n>0&&(!s&&o.length&&h.merge(n,h.length,o[0],!1,a,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,a,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function zw(t,e,n,i,r,o){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:h}=s.findPos(e,-1),u=e-n;for(let t of i)u+=t.length;t.length+=u,Iw(t,c,h,a,l,i,0,r,o)}let Qw="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Hw="undefined"!=typeof document?document:{documentElement:{style:{}}};const Vw=/Edge\/(\d+)/.exec(Qw.userAgent),Ww=/MSIE \d/.test(Qw.userAgent),Fw=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Qw.userAgent),qw=!!(Ww||Fw||Vw),Xw=!qw&&/gecko\/(\d+)/i.test(Qw.userAgent),Kw=!qw&&/Chrome\/(\d+)/.exec(Qw.userAgent),Zw="webkitFontSmoothing"in Hw.documentElement.style,Yw=!qw&&/Apple Computer/.test(Qw.vendor),Gw=Yw&&(/Mobile\/\w+/.test(Qw.userAgent)||Qw.maxTouchPoints>2);var Uw={mac:Gw||/Mac/.test(Qw.platform),windows:/Win/.test(Qw.platform),linux:/Linux|X11/.test(Qw.platform),ie:qw,ie_version:Ww?Hw.documentMode||6:Fw?+Fw[1]:Vw?+Vw[1]:0,gecko:Xw,gecko_version:Xw?+(/Firefox\/(\d+)/.exec(Qw.userAgent)||[0,0])[1]:0,chrome:!!Kw,chrome_version:Kw?+Kw[1]:0,ios:Gw,android:/Android\b/.test(Qw.userAgent),webkit:Zw,safari:Yw,webkit_version:Zw?+(/\bAppleWebKit\/(\d+)/.exec(Qw.userAgent)||[0,0])[1]:0,tabSize:null!=Hw.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Jw extends Lw{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof Jw)||this.length-(e-t)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),0))}split(t){let e=new Jw(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new Bw(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;0==e&&n<0||e==i&&n>=0?Uw.chrome||Uw.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let a=Ew(t,r,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return Uw.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l),s?Ow(l,s<0):l||null}(this.dom,t,e)}}class tO extends Lw{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(Tw(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof tO&&n.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0)||(zw(this,t,e,n?n.children.slice():[],r-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>t&&e.push(n<t?o.split(t-n):o),i<0&&n>=t&&(i=r),n=s,r++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new tO(this.mark,e,o)}domAtPos(t){return iO(this,t)}coordsAt(t,e){return oO(this,t,e)}}class eO extends Lw{static create(t,e,n){return new eO(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=eO.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof eO&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t instanceof eO&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return Td.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Td.empty}domAtPos(t){return(this.length?0==t:this.side>0)?Bw.before(this.dom):Bw.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:t>0;for(let e=o?i.length-1:0;r=i[e],!(t>0?0==e:e==i.length-1||r.top<r.bottom);e+=o?-1:1);return Ow(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class nO extends Lw{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof nO&&t.side==this.side}split(){return new nO(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?Bw.before(this.dom):Bw.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Td.empty}get isHidden(){return!0}}function iO(t,e){let n=t.dom,{children:i}=t,r=0;for(let t=0;r<i.length;r++){let o=i[r],s=t+o.length;if(!(s==t&&o.getSide()<=0)){if(e>t&&e<s&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=r;t>0;t--){let e=i[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=r;t<i.length;t++){let e=i[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new Bw(n,0)}function rO(t,e,n){let i,{children:r}=t;n>0&&e instanceof tO&&r.length&&(i=r[r.length-1])instanceof tO&&i.mark.eq(e.mark)?rO(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function oO(t,e,n){let i=null,r=-1,o=null,s=-1;!function t(e,a){for(let l=0,c=0;l<e.children.length&&c<=a;l++){let h=e.children[l],u=c+h.length;u>=a&&(h.children.length?t(h,a-c):(!o||o.isHidden&&(n>0||sO(o,h)))&&(u>a||c==u&&h.getSide()>0)?(o=h,s=a-c):(c<a||c==u&&h.getSide()<0&&!h.isHidden)&&(i=h,r=a-c)),c=u}}(t,e);let a=(n<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?r:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=gw(e);return n[n.length-1]||null}(t)}function sO(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function aO(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}Jw.prototype.children=eO.prototype.children=nO.prototype.children=Nw;const lO=Object.create(null);function cO(t,e,n){if(t==e)return!0;t||(t=lO),e||(e=lO);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(-1==r.indexOf(o)||t[o]!==e[o]))return!1;return!0}function hO(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,"style"==r?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,"style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function uO(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class dO{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var fO=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(fO||(fO={}));class pO extends Wf{constructor(t,e,n,i){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new gO(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new vO(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,i=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:r,end:o}=bO(t,i);e=(r?i?-3e8:-1:5e8)-1,n=1+(o?i?2e8:1:-6e8)}return new vO(t,e,n,i,t.widget||null,!0)}static line(t){return new mO(t)}static set(t,e=!1){return Kf.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}pO.none=Kf.empty;class gO extends pO{constructor(t){let{start:e,end:n}=bO(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof gO&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&cO(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}gO.prototype.point=!1;class mO extends pO{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof mO&&this.spec.class==t.spec.class&&cO(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}mO.prototype.mapMode=Fd.TrackBefore,mO.prototype.point=!0;class vO extends pO{constructor(t,e,n,i,r,o){super(e,n,r,t),this.block=i,this.isReplace=o,this.mapMode=i?e<=0?Fd.TrackBefore:Fd.TrackAfter:Fd.TrackDel}get type(){return this.startSide!=this.endSide?fO.WidgetRange:this.startSide<=0?fO.WidgetBefore:fO.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof vO&&((e=this.widget)==(n=t.widget)||!!(e&&n&&e.compare(n)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,n}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function bO(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!=n?n:e,end:null!=i?i:e}}function yO(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}vO.prototype.point=!0;class wO extends Lw{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,i,r,o){if(n){if(!(n instanceof wO))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),zw(this,t,e,n?n.children.slice():[],r,o),!0}split(t){let e=new wO;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:i}=this.childPos(t);i&&(e.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){cO(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){rO(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=aO(e,this.attrs||{})),n&&(this.attrs=aO({class:n},this.attrs||{}))}domAtPos(t){return iO(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?4&this.flags&&(Tw(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(hO(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let i=this.dom.lastChild;for(;i&&Lw.get(i)instanceof tO;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=Lw.get(i))||void 0===n?void 0:n.isEditable)||Uw.ios&&this.children.some((t=>t instanceof Jw))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof Jw)||/[^ -~]/.test(n.text))return null;let i=gw(n.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=oO(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let i=(e-t.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(t){return t instanceof wO&&0==this.children.length&&0==t.children.length&&cO(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,i=0;n<t.children.length;n++){let r=t.children[n],o=i+r.length;if(o>=e){if(r instanceof wO)return r;if(o>e)break}i=o+r.breakAfter}return null}}class OO extends Lw{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof OO&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?Bw.before(this.dom):Bw.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new OO(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Nw}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Td.empty}domBoundsAround(){return null}become(t){return t instanceof OO&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)||(this.widget instanceof SO?null:Ow(this.dom.getBoundingClientRect(),this.length?0==t:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class SO extends dO{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class xO{constructor(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof OO&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new wO),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(kO(new nO(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof OO||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(kO(new Jw(this.text.slice(this.textOff,this.textOff+i)),e),n),this.atCursorPos=!0,this.textOff+=i,t-=i,n=0}}span(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)}point(t,e,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof vO){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof vO)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new OO(n.widget||CO.block,s,n));else{let o=eO.create(n.widget||CO.inline,s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&r<=i.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||r>i.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(c.append(kO(new nO(1),i),r),r=i.length+Math.max(0,r-i.length)),c.append(kO(o,i),r),this.atCursorPos=l,this.pendingBuffer=l?t<e||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,n,i,r){let o=new xO(t,e,n,r);return o.openEnd=Kf.spans(i,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function kO(t,e){for(let n of e)t=new tO(n,[t],t.length);return t}class CO extends dO{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}CO.inline=new CO("span"),CO.block=new CO("div");var AO=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(AO||(AO={}));const MO=AO.LTR,EO=AO.RTL;function PO(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const TO=PO("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),$O=PO("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),DO=Object.create(null),RO=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);DO[e]=n,DO[n]=-e}function BO(t){return t<=247?TO[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?$O[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const NO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class LO{get dir(){return this.level%2?EO:MO}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,i){let r=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<e:s.to>e:t[r].level>s.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function jO(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!jO(i.inner,r.inner))return!1}return!0}const _O=[];function IO(t,e,n,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let e=!0,h=!1;if(c==o.length||l<o[c].from){let t=_O[l];t!=a&&(e=!1,h=16==t)}let u=e||1!=a?null:[],d=e?i:i+1,f=l;t:for(;;)if(c<o.length&&f==o[c].from){if(h)break t;let p=o[c];if(!e)for(let t=p.to,e=c+1;;){if(t==n)break t;if(!(e<o.length&&o[e].from==t)){if(_O[t]==a)break t;break}t=o[e++].to}c++,u?u.push(p):(p.from>l&&s.push(new LO(l,p.from,d)),zO(t,p.direction==MO!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.to),f=p.to}else{if(f==n||(e?_O[f]!=a:_O[f]==a))break;f++}u?IO(t,l,f,i+1,r,u,s):l<f&&s.push(new LO(l,f,d)),l=f}else for(let l=n,c=o.length;l>e;){let n=!0,h=!1;if(!c||l>o[c-1].to){let t=_O[l-1];t!=a&&(n=!1,h=16==t)}let u=n||1!=a?null:[],d=n?i:i+1,f=l;t:for(;;)if(c&&f==o[c-1].to){if(h)break t;let p=o[--c];if(!n)for(let t=p.from,n=c;;){if(t==e)break t;if(!n||o[n-1].to!=t){if(_O[t-1]==a)break t;break}t=o[--n].from}u?u.push(p):(p.to<l&&s.push(new LO(p.to,l,d)),zO(t,p.direction==MO!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.from),f=p.from}else{if(f==e||(n?_O[f-1]!=a:_O[f-1]==a))break;f--}u?IO(t,f,l,i+1,r,u,s):f<l&&s.push(new LO(f,l,d)),l=f}}function zO(t,e,n,i,r,o,s){let a=e%2?2:1;!function(t,e,n,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:n,l=o?256:r;for(let e=s,n=l,i=l;e<a;e++){let r=BO(t.charCodeAt(e));512==r?r=n:8==r&&4==i&&(r=16),_O[e]=4==r?2:r,7&r&&(i=r),n=r}for(let t=s,e=l,i=l;t<a;t++){let r=_O[t];if(128==r)t<a-1&&e==_O[t+1]&&24&e?r=_O[t]=e:_O[t]=256;else if(64==r){let r=t+1;for(;r<a&&64==_O[r];)r++;let o=t&&8==e||r<n&&8==_O[r]?1==i?1:8:256;for(let e=t;e<r;e++)_O[e]=o;t=r-1}else 8==r&&1==i&&(_O[t]=1);e=r,7&r&&(i=r)}}}(t,r,o,i,a),function(t,e,n,i,r){let o=1==r?2:1;for(let s=0,a=0,l=0;s<=i.length;s++){let c=s?i[s-1].to:e,h=s<i.length?i[s].from:n;for(let e,n,i,s=c;s<h;s++)if(n=DO[e=t.charCodeAt(s)])if(n<0){for(let t=a-3;t>=0;t-=3)if(RO[t+1]==-n){let e=RO[t+2],n=2&e?r:4&e?1&e?o:r:0;n&&(_O[s]=_O[RO[t]]=n),a=t;break}}else{if(189==RO.length)break;RO[a++]=s,RO[a++]=e,RO[a++]=l}else if(2==(i=_O[s])||1==i){let t=i==r;l=t?0:1;for(let e=a-3;e>=0;e-=3){let n=RO[e+2];if(2&n)break;if(t)RO[e+2]|=2;else{if(4&n)break;RO[e+2]|=4}}}}}(t,r,o,i,a),function(t,e,n,i){for(let r=0,o=i;r<=n.length;r++){let s=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=s;l<a;){let s=_O[l];if(256==s){let s=l+1;for(;;)if(s==a){if(r==n.length)break;s=n[r++].to,a=r<n.length?n[r].from:e}else{if(256!=_O[s])break;s++}let c=1==o,h=c==(1==(s<e?_O[s]:i))?c?1:2:i;for(let e=s,i=r,o=i?n[i-1].to:t;e>l;)e==o&&(e=n[--i].from,o=i?n[i-1].to:t),_O[--e]=h;l=s}else o=s,l++}}}(r,o,i,a),IO(t,r,o,e,n,i,s)}function QO(t){return[new LO(0,t,0)]}let HO="";function VO(t,e,n,i,r){var o;let s=i.head-t.from,a=LO.find(e,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc),l=e[a],c=l.side(r,n);if(s==c){let t=a+=r?1:-1;if(t<0||t>=e.length)return null;l=e[a=t],s=l.side(!r,n),c=l.side(r,n)}let h=zd(t.text,s,l.forward(r,n));(h<l.from||h>l.to)&&(h=c),HO=t.text.slice(Math.min(s,h),Math.max(s,h));let u=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return u&&h==c&&u.level+(r?0:1)<l.level?ef.cursor(u.side(!r,n)+t.from,u.forward(r,n)?1:-1,u.level):ef.cursor(h+t.from,l.forward(r,n)?-1:1,l.level)}function WO(t,e,n){for(let i=e;i<n;i++){let e=BO(t.charCodeAt(i));if(1==e)return MO;if(2==e||4==e)return EO}return MO}const FO=of.define(),qO=of.define(),XO=of.define(),KO=of.define(),ZO=of.define(),YO=of.define(),GO=of.define(),UO=of.define(),JO=of.define(),tS=of.define({combine:t=>t.some((t=>t))}),eS=of.define({combine:t=>t.some((t=>t))}),nS=of.define();class iS{constructor(t,e="nearest",n="nearest",i=5,r=5,o=!1){this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new iS(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new iS(ef.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const rS=$f.define({map:(t,e)=>t.map(e)}),oS=$f.define();function sS(t,e,n){let i=t.facet(KO);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const aS=of.define({combine:t=>!t.length||t[0]});let lS=0;const cS=of.define();class hS{constructor(t,e,n,i,r){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(t,e){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=e||{};return new hS(lS++,t,n,i,(t=>{let e=[cS.of(t)];return o&&e.push(pS.of((e=>{let n=e.plugin(t);return n?o(n):pO.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return hS.define((e=>new t(e)),e)}}class uS{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(sS(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){sS(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){sS(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const dS=of.define(),fS=of.define(),pS=of.define(),gS=of.define(),mS=of.define(),vS=of.define();function bS(t,e){let n=t.state.facet(vS);if(!n.length)return n;let i=n.map((e=>e instanceof Function?e(t):e)),r=[];return Kf.spans(i,e.from,e.to,{point(){},span(t,n,i,o){let s=t-e.from,a=n-e.from,l=r;for(let t=i.length-1;t>=0;t--,o--){let n,r=i[t].spec.bidiIsolate;if(null==r&&(r=WO(e.text,s,a)),o>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==r)n.to=a,l=n.inner;else{let t={from:s,to:a,direction:r,inner:[]};l.push(t),l=t.inner}}}}),r}const yS=of.define();function wS(t){let e=0,n=0,i=0,r=0;for(let o of t.state.facet(yS)){let s=o(t);s&&(null!=s.left&&(e=Math.max(e,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(i=Math.max(i,s.top)),null!=s.bottom&&(r=Math.max(r,s.bottom)))}return{left:e,right:n,top:i,bottom:r}}const OS=of.define();class SS{constructor(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}join(t){return new SS(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let i=0,r=0,o=0,s=0;;i++){let a=i==t.length?null:t[i],l=o-s,c=a?a.fromB:1e9;for(;r<e.length&&e[r]<c;){let t=e[r],i=e[r+1],o=Math.max(s,t),a=Math.min(c,i);if(o<=a&&new SS(o+l,a+l,o,a).addToSet(n),i>c)break;r+=2}if(!a)return n;new SS(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class xS{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Xd.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let i=[];this.changes.iterChangedRanges(((t,e,n,r)=>i.push(new SS(t,e,n,r)))),this.changedRanges=i}static create(t,e,n){return new xS(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class kS extends Lw{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=pO.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new wO],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new SS(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?i=this.domChanged.newSel.head:function(t,e){let n=!1;return e&&t.iterChangedRanges(((t,i)=>{t<e.to&&i>e.from&&(n=!0)})),n}(t.changes,this.hasComposition)||t.selectionSet||(i=t.state.selection.main.head));let r=i>-1?function(t,e,n){let i=CS(t,n);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new SS(l.mapPos(o),l.mapPos(s),o,s),h=[];for(let e=r.parentNode;;e=e.parentNode){let n=Lw.get(e);if(n instanceof tO)h.push({node:e,deco:n.mark});else{if(n instanceof wO||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:r,marks:h,line:e};if(e==t.contentDOM)return null;h.push({node:e,deco:new gO({inclusive:!0,attributes:uO(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:i}=this.hasComposition;n=new SS(e,i,t.changes.mapPos(e,-1),t.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Uw.ie||Uw.chrome)&&!r&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=function(t,e,n){let i=new AS;return Kf.compare(t,e,n,i),i.changes}(this.decorations,this.updateDeco(),t.changes);return n=SS.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,r),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=Uw.chrome||Uw.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=-8,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof OO&&t.widget instanceof SO&&r.push(t.dom);i.updateGaps(r)}updateChildren(t,e,n){let i=n?n.range.addToSet(t.slice()):t,r=this.childCursor(e);for(let t=i.length-1;;t--){let e=t>=0?i[t]:null;if(!e)break;let o,s,a,l,{fromA:c,toA:h,fromB:u,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>u){let t=xO.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=xO.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);s=t.breakAtStart,a=t.openStart,l=e.openEnd;let i=this.compositionView(n);e.breakAtStart?i.breakAfter=1:e.content.length&&i.merge(i.length,i.length,e.content[0],!1,e.openStart,0)&&(i.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&i.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),o=t.content.concat(i).concat(e.content)}else({content:o,breakAtStart:s,openStart:a,openEnd:l}=xO.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(h,1),{i:g,off:m}=r.findPos(c,-1);Iw(this,g,m,f,p,o,s,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let t of e.effects)t.is(oS)&&(this.editContextFormatting=t.value)}compositionView(t){let e=new Jw(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new tO(n,[e],e.length);let n=new wO;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=Lw.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),i=this.children[n.i];e(t.line,i);for(let r=t.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],e(r>=0?t.marks[r].node:t.text,i)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet(aS)||this.dom.tabIndex>-1)&&pw(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||e||r))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(Uw.gecko&&s.empty&&!this.hasComposition&&1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(t,a.node.childNodes[a.offset]||null))),a=l=new Bw(t,0),o=!0}var c;let h=this.view.observer.selectionRange;!o&&h.focusNode&&(mw(a.node,a.offset,h.anchorNode,h.anchorOffset)&&mw(l.node,l.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,s))||(this.view.observer.ignore((()=>{Uw.android&&Uw.chrome&&this.dom.contains(h.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=dw(this.view.root);if(t)if(s.empty){if(Uw.gecko){let t=(e=a.node,i=a.offset,1!=e.nodeType?0:(i&&"false"==e.childNodes[i-1].contentEditable?1:0)|(i<e.childNodes.length&&"false"==e.childNodes[i].contentEditable?2:0));if(t&&3!=t){let e=(1==t?Dw:Rw)(a.node,a.offset);e&&(a=new Bw(e.node,e.offset))}}t.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(a.node,a.offset);try{t.extend(l.node,l.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),e.setEnd(l.node,l.offset),e.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(e)}var e,i;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new Bw(h.anchorNode,h.anchorOffset),this.impreciseHead=l.precise?null:new Bw(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&mw(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=dw(t.root),{anchorNode:i,anchorOffset:r}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=wO.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let h=t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=e.from&&n.collapse(i,r)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let i=t.offset;!e&&i<n.childNodes.length;i++){let t=Lw.get(n.childNodes[i]);t instanceof wO&&(e=t.domAtPos(0))}for(let i=t.offset-1;!e&&i>=0;i--){let t=Lw.get(n.childNodes[i]);t instanceof wO&&(e=t.domAtPos(t.length))}return e?new Bw(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=Lw.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof wO)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=r-s.breakAfter,l=a-s.length;if(a<t)break;if(l<=t&&(l<t||s.covers(-1))&&(a>t||s.covers(1))&&(!n||s instanceof wO&&!(n instanceof wO&&e>=0)))n=s,i=l;else if(n&&l==t&&a==t&&s instanceof OO&&Math.abs(e)<2){if(s.deco.startSide<0)break;o&&(n=null)}r=l}return n?n.coordsAt(t-i,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),i=this.children[e];if(!(i instanceof wO))return null;for(;i.children.length;){let{i:t,off:e}=i.childPos(n,1);for(;;t++){if(t==i.children.length)return null;if((i=i.children[t]).length)break}n=e}if(!(i instanceof Jw))return null;let r=zd(i.text,n);if(r==n)return null;let o=Ew(i.dom,n,r).getClientRects();for(let t=0;t<o.length;t++){let e=o[t];if(t==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:i}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==AO.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],h=t+c.length;if(h>i)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),o){let e=c.dom.lastChild,i=e?gw(e):[];if(i.length){let e=i[i.length-1],o=a?e.right-n.left:n.right-e.left;o>s&&(s=o,this.minWidth=r,this.minWidthFrom=t,this.minWidthTo=h)}}}t=h+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?AO.RTL:AO.LTR}measureTextSize(){for(let t of this.children)if(t instanceof wO){let e=t.measureTextSize();if(e)return e}let t,e,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=gw(i.firstChild)[0];t=i.getBoundingClientRect().height,e=r?r.width/27:7,n=r?r.height:t,i.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new _w(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,i=0;;i++){let r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=(e.lineBlockAt(o).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(pO.replace({widget:new SO(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return pO.set(t)}updateDeco(){let t=1,e=this.view.state.facet(pS).map((e=>(this.dynamicDecorationMap[t++]="function"==typeof e)?e(this.view):e)),n=!1,i=this.view.state.facet(gS).map(((t,e)=>{let i="function"==typeof t;return i&&(n=!0),i?t(this.view):t}));for(i.length&&(this.dynamicDecorationMap[t++]=n,e.push(Kf.join(i))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}for(let e of this.view.state.facet(nS))try{if(e(this.view,t.range,t))return!0}catch(t){sS(this.view.state,t,"scroll handler")}let e,{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});let r=wS(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(t,e,n,i,r,o,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let h=t,u=!1;h&&!u;)if(1==h.nodeType){let t,d=h==l.body,f=1,p=1;if(d)t=Sw(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let e=h.getBoundingClientRect();({scaleX:f,scaleY:p}=xw(h,e)),t={left:e.left,right:e.left+h.clientWidth*f,top:e.top,bottom:e.top+h.clientHeight*p}}let g=0,m=0;if("nearest"==r)e.top<t.top?(m=e.top-(t.top+s),n>0&&e.bottom>t.bottom+m&&(m=e.bottom-t.bottom+s)):e.bottom>t.bottom&&(m=e.bottom-t.bottom+s,n<0&&e.top-m<t.top&&(m=e.top-(t.top+s)));else{let i=e.bottom-e.top,o=t.bottom-t.top;m=("center"==r&&i<=o?e.top+i/2-o/2:"start"==r||"center"==r&&n<0?e.top-s:e.bottom-o+s)-t.top}if("nearest"==i?e.left<t.left?(g=e.left-(t.left+o),n>0&&e.right>t.right+g&&(g=e.right-t.right+o)):e.right>t.right&&(g=e.right-t.right+o,n<0&&e.left<t.left+g&&(g=e.left-(t.left+o))):g=("center"==i?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==i==a?e.left-o:e.right-(t.right-t.left)+o)-t.left,g||m)if(d)c.scrollBy(g,m);else{let t=0,n=0;if(m){let t=h.scrollTop;h.scrollTop+=m/p,n=(h.scrollTop-t)*p}if(g){let e=h.scrollLeft;h.scrollLeft+=g/f,t=(h.scrollLeft-e)*f}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(i="nearest"),n&&Math.abs(n-m)<1&&(r="nearest")}if(d)break;(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)&&(e={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)}),h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,s),-s),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==AO.LTR)}}function CS(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=Dw(n.focusNode,n.focusOffset),r=Rw(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let e=Lw.get(r.node);if(!e||e instanceof Jw&&e.text!=r.node.nodeValue)o=r;else if(t.docView.lastCompositionAfterCursor){let t=Lw.get(i.node);!t||t instanceof Jw&&t.text!=i.node.nodeValue||(o=r)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let AS=class{constructor(){this.changes=[]}compareRange(t,e){yO(t,e,this.changes)}comparePoint(t,e){yO(t,e,this.changes)}boundChange(t){yO(t,t,this.changes)}};function MS(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function ES(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function PS(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function TS(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function $S(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function DS(t,e,n){let i,r,o,s,a,l,c,h,u=!1;for(let d=t.firstChild;d;d=d.nextSibling){let t=gw(d);for(let f=0;f<t.length;f++){let p=t[f];r&&PS(r,p)&&(p=TS($S(p,r.bottom),r.top));let g=MS(e,p),m=ES(n,p);if(0==g&&0==m)return 3==d.nodeType?RS(d,e,n):DS(d,e,n);if(!i||s>m||s==m&&o>g){i=d,r=p,o=g,s=m;let a=m?n<p.top?-1:1:g?e<p.left?-1:1:0;u=!a||(a>0?f<t.length-1:f>0)}0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=d,c=p):n<p.top&&(!h||h.top>p.top)&&(l=d,h=p):c&&PS(c,p)?c=$S(c,p.bottom):h&&PS(h,p)&&(h=TS(h,p.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=l,r=h),!i)return{node:t,offset:0};let d=Math.max(r.left,Math.min(r.right,e));return 3==i.nodeType?RS(i,d,n):u&&"false"!=i.contentEditable?DS(i,d,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0)}}function RS(t,e,n){let i=t.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let i=Ew(t,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<o){let n=e>=(c.left+c.right)/2,i=n;if((Uw.chrome||Uw.gecko)&&Ew(t,a).getBoundingClientRect().left==c.right&&(i=!n),h<=0)return{node:t,offset:a+(i?1:0)};r=a+(i?1:0),o=h}}}return{node:t,offset:r>-1?r:s>0?t.nodeValue.length:0}}function BS(t,e,n,i=-1){var r,o;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:h,y:u}=e,d=u-l;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,r=!1;s=t.elementAtHeight(d),s.type!=fO.Text;)for(;d=i>0?s.bottom+e:s.top-e,!(d>=0&&d<=c);){if(r)return n?null:0;r=!0,i=-i}u=l+d;let f=s.from;if(f<t.viewport.from)return 0==t.viewport.from?0:n?null:NS(t,a,s,h,u);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:NS(t,a,s,h,u);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,m=g.elementFromPoint(h,u);m&&!t.contentDOM.contains(m)&&(m=null),m||(h=Math.max(a.left+1,Math.min(a.right-1,h)),m=g.elementFromPoint(h,u),m&&!t.contentDOM.contains(m)&&(m=null));let v,b=-1;if(m&&0!=(null===(r=t.docView.nearest(m))||void 0===r?void 0:r.isEditable)){if(p.caretPositionFromPoint){let t=p.caretPositionFromPoint(h,u);t&&({offsetNode:v,offset:b}=t)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(h,u);e&&(({startContainer:v,startOffset:b}=e),(!t.contentDOM.contains(v)||Uw.safari&&function(t,e,n){let i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return Ew(t,i-1,i).getBoundingClientRect().left>n}(v,b,h)||Uw.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():Ew(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(v,b,h))&&(v=void 0))}v&&(b=Math.min(ww(v),b))}if(!v||!t.docView.dom.contains(v)){let e=wO.find(t.docView,f);if(!e)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:b}=DS(e.dom,h,u))}let y=t.docView.nearest(v);if(!y)return null;if(y.isWidget&&1==(null===(o=y.dom)||void 0===o?void 0:o.nodeType)){let t=y.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?y.posAtStart:y.posAtEnd}return y.localPosFromDOM(v,b)+y.posAtStart}function NS(t,e,n,i,r){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;o+=Math.floor((r-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+ap(s,o,t.state.tabSize)}function LS(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),s=t.textDirectionAt(r.from);for(let a=e,l=null;;){let e=VO(r,o,s,a,n),c=HO;if(!e){if(r.number==(n?t.state.doc.lines:1))return a;c="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),e=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return e;l=i(c)}a=e}}function jS(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,((t,r,o)=>{if(e>t&&e<r){let o=i||n||(e-t<r-e?-1:1);e=o<0?t:r,i=o}}));if(!i)return e}}function _S(t,e,n){let i=jS(t.state.facet(mS).map((e=>e(t))),n.from,e.head>n.from?-1:1);return i==n.from?n:ef.cursor(i,i<n.from?1:-1)}const IS="￿";class zS{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Hf.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=IS}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i);let t=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==e)break;let o=Lw.get(i),s=Lw.get(r);(o&&s?o.breakAfter:(o?o.breakAfter:bw(i))||bw(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>t)&&this.lineBreak(),i=r}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(r=i.exec(e))&&(o=r.index,s=r[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=Lw.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(QS(t,n.node,n.offset)?e:0))}}function QS(t,e,n){for(;;){if(!e||n<ww(e))return!1;if(e==t)return!0;n=vw(e)+1,e=e.parentNode}}class HS{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class VS{constructor(t,e,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=r||o?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new HS(n,i)),r==n&&o==i||e.push(new HS(r,o))),e}(t),n=new zS(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?ef.single(n+e,i+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=r&&r.node==e.focusNode&&r.offset==e.focusOffset||!fw(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),i=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!fw(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset),s=t.viewport;if((Uw.ios||Uw.chrome)&&t.state.selection.main.empty&&n!=i&&(s.from>0||s.to<t.state.doc.length)){let e=Math.min(n,i),r=Math.max(n,i),o=s.from-e,a=s.to-r;0!=o&&1!=o&&0!=e||0!=a&&-1!=a&&r!=t.state.doc.length||(n=0,i=t.state.doc.length)}this.newSel=ef.single(i,n)}}}function WS(t,e){let n,{newSel:i}=e,r=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:i,to:s}=e.bounds,a=r.from,l=null;(8===o||Uw.android&&e.text.length<s-i)&&(a=r.to,l="end");let c=function(t,e,n,i){let r=Math.min(t.length,e.length),o=0;for(;o<r&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;return"end"==i&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(t.state.doc.sliceString(i,s,IS),e.text,a-i,l);c&&(Uw.chrome&&13==o&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==IS+IS&&c.toB--,n={from:i+c.from,to:i+c.toA,insert:Td.of(e.text.slice(c.from,c.toB).split(IS))})}else i&&(!t.hasFocus&&t.state.facet(aS)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(Uw.mac||Uw.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Td.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:Uw.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(i&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Td.of([" "])}),n)return FS(t,n,i,o);if(i&&!i.main.eq(r)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:e,userEvent:n}),!0}return!1}function FS(t,e,n,i=-1){if(Uw.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Uw.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&" "==t.state.sliceDoc(e.from,r.from))&&1==e.insert.length&&2==e.insert.lines&&Pw(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&0==e.insert.length||8==i&&e.insert.length<e.to-e.from&&e.to>r.head)&&Pw(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&0==e.insert.length&&Pw(t.contentDOM,"Delete",46)))return!0;let o,s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a=()=>o||(o=function(t,e,n){let i,r=t.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=o.from<e.from?r.sliceDoc(o.from,e.from):"",s=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=r.changes(e),a=n&&n.main.to<=s.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let l,c=t.state.sliceDoc(e.from,e.to),h=n&&CS(t,n.main.head);if(h){let t=e.insert.length-(e.to-e.from);l={from:h.from,to:h.to-t}}else l=t.state.doc.lineAt(o.head);let u=o.to-e.to,d=o.to-o.from;i=r.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let i=n.to-u,h=i-c.length;if(n.to-n.from!=d||t.state.sliceDoc(h,i)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=r.changes({from:h,to:i,insert:e.insert}),p=n.to-o.to;return{changes:f,range:a?ef.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else i={changes:s,selection:a&&r.selection.replaceRange(a)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:s,scrollIntoView:!0})}(t,e,n));return t.state.facet(YO).some((n=>n(t,e.from,e.to,s,a)))||t.dispatch(a()),!0}class qS{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,Uw.safari&&t.contentDOM.addEventListener("input",(()=>null)),Uw.gecko&&function(t){bx.has(t)||(bx.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,i=e.target;i!=t.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=Lw.get(i))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||(0!=this.view.updateState?Promise.resolve().then((()=>this.runHandlers(t.type,t))):this.runHandlers(t.type,t)))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=function(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let i in t.domEventHandlers){let r=t.domEventHandlers[i];r&&n(i).handlers.push(XS(e.value,r))}if(t&&t.domEventObservers)for(let i in t.domEventObservers){let r=t.domEventObservers[i];r&&n(i).observers.push(XS(e.value,r))}}for(let t in JS)n(t).handlers.push(JS[t]);for(let t in tx)n(t).observers.push(tx[t]);return e}(t),n=this.handlers,i=this.view.contentDOM;for(let t in e)if("scroll"!=t){let r=!e[t].handlers.length,o=n[t];o&&r!=!o.handlers.length&&(i.removeEventListener(t,this.handleEvent),o=null),o||i.addEventListener(t,this.handleEvent,{passive:r})}for(let t in n)"scroll"==t||e[t]||i.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=t.keyCode&&YS.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),Uw.android&&Uw.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!Uw.ios||t.synthetic||t.altKey||t.metaKey||!((e=KS.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||ZS.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&!("Enter"==e.key&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString()))&&(this.pendingIOSKey=void 0,Pw(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(Uw.safari&&!Uw.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function XS(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(t){sS(n.state,t)}}}const KS=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ZS="dthko",YS=[16,17,18,20,91,92,224,225];function GS(t){return.7*Math.max(0,t)+8}class US{constructor(t,e,n,i){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=function(t){let e,n,i=t.ownerDocument;for(let r=t.parentNode;r&&!(r==i.body||e&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:e,y:n}}(t.contentDOM),this.atoms=t.state.facet(mS).map((e=>e(t)));let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Hf.allowMultipleSelections)&&function(t,e){let n=t.state.facet(FO);return n.length?n[0](e):Uw.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=dw(t.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let t=0;t<r.length;t++){let n=r[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=dx(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(e=this.startEvent,n=t,Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))<10))return;var e,n;this.select(this.lastEvent=t);let i=0,r=0,o=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=wS(this.view);t.clientX-c.left<=o+6?i=-GS(o-t.clientX):t.clientX+c.right>=a-6&&(i=GS(t.clientX-a)),t.clientY-c.top<=s+6?r=-GS(s-t.clientY):t.clientY+c.bottom>=l-6&&(r=GS(t.clientY-l)),this.setScrollSpeed(i,r)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n],r=null;if(i.empty){let t=jS(this.atoms,i.from,0);t!=i.from&&(r=ef.cursor(t,-1))}else{let t=jS(this.atoms,i.from,-1),e=jS(this.atoms,i.to,1);t==i.from&&e==i.to||(r=ef.range(i.from==i.anchor?t:e,i.from==i.head?t:e))}r&&(e||(e=t.ranges.slice()),e[n]=r)}return e?ef.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&n.eq(e.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some((t=>t.isUserEvent("input.type")))?this.destroy():this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const JS=Object.create(null),tx=Object.create(null),ex=Uw.ie&&Uw.ie_version<15||Uw.ios&&Uw.webkit_version<604;function nx(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function ix(t,e){e=nx(t.state,UO,e);let n,{state:i}=t,r=1,o=i.toText(e),s=o.lines==i.selection.ranges.length;if(null!=px&&i.selection.ranges.every((t=>t.empty))&&px==o.toString()){let t=-1;n=i.changeByRange((n=>{let a=i.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=i.toText((s?o.line(r++).text:e)+i.lineBreak);return{changes:{from:a.from,insert:l},range:ef.cursor(n.from+l.length)}}))}else n=s?i.changeByRange((t=>{let e=o.line(r++);return{changes:{from:t.from,to:t.to,insert:e.text},range:ef.cursor(t.from+e.length)}})):i.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function rx(t,e,n,i){if(1==i)return ef.cursor(e,n);if(2==i)return function(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),o=e-r.from;if(0==r.length)return ef.cursor(e);0==o?n=1:o==r.length&&(n=-1);let s=o,a=o;n<0?s=zd(r.text,o,!1):a=zd(r.text,o);let l=i(r.text.slice(s,a));for(;s>0;){let t=zd(r.text,s,!1);if(i(r.text.slice(t,s))!=l)break;s=t}for(;a<r.length;){let t=zd(r.text,a);if(i(r.text.slice(a,t))!=l)break;a=t}return ef.range(s+r.from,a+r.from)}(t.state,e,n);{let n=wO.find(t.docView,e),i=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:i.from,o=n?n.posAtEnd:i.to;return o<t.state.doc.length&&o==i.to&&o++,ef.range(r,o)}}tx.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},JS.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&0!=t.inputState.tabFocusMode&&(t.inputState.tabFocusMode=Date.now()+2e3),!1),tx.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},tx.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},JS.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(XO))if(n=i(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=ax(t,e),i=dx(e),r=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),r=r.map(t.changes))},get(e,o,s){let a,l=ax(t,e),c=rx(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let e=rx(t,n.pos,n.bias,i),r=Math.min(e.from,c.from),o=Math.max(e.to,c.to);c=r<c.from?ef.range(r,o):ef.range(o,r)}return o?r.replaceRange(r.main.extend(c.from,c.to)):s&&1==i&&r.ranges.length>1&&(a=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ef.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(r,l.pos))?a:s?r.addRange(c):ef.create([c])}}}(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new US(t,e,n,i)),i&&t.observer.ignore((()=>{Mw(t.contentDOM);let e=t.root.activeElement;e&&!e.contains(t.contentDOM)&&e.blur()}));let r=t.inputState.mouseSelection;if(r)return r.start(e),!1===r.dragging}return!1};let ox=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function sx(t,e,n,i){let r=wO.find(t.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&ox(n,i,s))return-1;let a=r.coordsAt(o,1);return a&&ox(n,i,a)?1:s&&s.bottom>=i?-1:1}function ax(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:sx(t,n,e.clientX,e.clientY)}}const lx=Uw.ie&&Uw.ie_version<=11;let cx=null,hx=0,ux=0;function dx(t){if(!lx)return t.detail;let e=cx,n=ux;return cx=t,ux=Date.now(),hx=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(hx+1)%3:1}function fx(t,e,n,i){if(!(n=nx(t.state,UO,n)))return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=i&&o&&function(t,e){let n=t.state.facet(qO);return n.length?n[0](e):Uw.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:o.from,to:o.to}:null,a={from:r,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}JS.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let t=i.posAtStart,e=t+i.length;(t>=n.to||e<=n.from)&&(n=ef.range(t,e))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",nx(t.state,JO,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1},JS.dragend=t=>(t.inputState.draggedContent=null,!1),JS.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,o=()=>{++r==n.length&&fx(t,e,i.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return fx(t,e,n,!0),!0}return!1},JS.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=ex?null:e.clipboardData;return n?(ix(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),ix(t,n.value)}),50)}(t),!1)};let px=null;JS.copy=JS.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=function(t){let e=[],n=[],i=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:nx(t,JO,e.join(t.lineBreak)),ranges:n,linewise:i}}(t.state);if(!n&&!r)return!1;px=r?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=ex?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout((()=>{i.remove(),t.focus()}),50)}(t,n),!1)};const gx=Ef.define();function mx(t,e){let n=[];for(let i of t.facet(GO)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:gx.of(!0)}):null}function vx(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=mx(t.state,e);n?t.dispatch(n):t.update([])}}),10)}tx.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),vx(t)},tx.blur=t=>{t.observer.clearSelectionRange(),vx(t)},tx.compositionstart=tx.compositionupdate=t=>{t.observer.editContext||(null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))},tx.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Uw.chrome&&Uw.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50))},tx.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},JS.beforeinput=(t,e)=>{var n,i;if("insertReplacementText"==e.inputType&&t.observer.editContext){let i=null===(n=e.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),r=e.getTargetRanges();if(i&&r.length){let e=r[0],n=t.posAtDOM(e.startContainer,e.startOffset),o=t.posAtDOM(e.endContainer,e.endOffset);return FS(t,{from:n,to:o,insert:t.state.toText(i)},null),!0}}let r;if(Uw.chrome&&Uw.android&&(r=KS.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return Uw.ios&&"deleteContentForward"==e.inputType&&t.observer.flushSoon(),Uw.safari&&"insertText"==e.inputType&&t.inputState.composing>=0&&setTimeout((()=>tx.compositionend(t,e)),20),!1};const bx=new Set,yx=["pre-wrap","normal","pre-line","break-spaces"];let wx=!1;function Ox(){wx=!1}class Sx{constructor(t){this.lineWrapping=t,this.doc=Td.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return yx.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e}refresh(t,e,n,i,r,o){let s=yx.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let t=0;t<o.length;t++){let e=o[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return a}}class xx{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class kx{constructor(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?fO.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof vO?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new kx(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Cx=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Cx||(Cx={}));const Ax=.001;class Mx{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>Ax&&(wx=!0),this.height=t)}replace(t,e,n){return Mx.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,i){let r=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:h}=i[s],u=r.lineAt(a,Cx.ByPosNoHeight,n.setDoc(e),0,0),d=u.to>=l?u:r.lineAt(l,Cx.ByPosNoHeight,n,0,0);for(h+=d.to-l,l=d.to;s>0&&u.from<=i[s-1].toA;)a=i[s-1].fromA,c=i[s-1].fromB,s--,a<u.from&&(u=r.lineAt(a,Cx.ByPosNoHeight,n,0,0));c+=u.from-a,a=u.from;let f=Bx.build(n.setDoc(o),t,c,h);r=Ex(r,r.replace(a,l,f))}return r.updateHeight(n,0)}static empty(){return new Tx(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,i=0,r=0;for(;;)if(e==n)if(i>2*r){let r=t[e-1];r.break?t.splice(--e,1,r.left,null,r.right):t.splice(--e,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,r-=e.size}}else if(i<r){let n=t[e++];n&&(i+=n.size)}else{let e=t[--n];e&&(r+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new Dx(Mx.of(t.slice(0,e)),o,Mx.of(t.slice(n)))}}function Ex(t,e){return t==e?t:(t.constructor!=e.constructor&&(wx=!0),e)}Mx.prototype.size=1;class Px extends Mx{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,i){return new kx(i,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(t,e,n,i,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,n,i,r))}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Tx extends Px{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,i){return new kx(i,this.length,n,this.height,this.breaks)}replace(t,e,n){let i=n[0];return 1==n.length&&(i instanceof Tx||i instanceof $x&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof $x?i=new Tx(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Mx.of(n)}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class $x extends Mx{constructor(t){super(t,0)}heightMetrics(t,e){let n,i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-i+1,s=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*o);n=e/o,this.length>o+1&&(s=(this.height-e)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:s}}blockAt(t,e,n,i){let{firstLine:r,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(e,i);if(e.lineWrapping){let r=i+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),o=e.doc.lineAt(r),l=s+o.length*a,c=Math.max(n,t-l/2);return new kx(o.from,o.length,c,l,0)}{let i=Math.max(0,Math.min(o-r,Math.floor((t-n)/s))),{from:a,length:l}=e.doc.line(r+i);return new kx(a,l,n+s*i,s,0)}}lineAt(t,e,n,i,r){if(e==Cx.ByHeight)return this.blockAt(t,n,i,r);if(e==Cx.ByPosNoHeight){let{from:e,to:i}=n.doc.lineAt(t);return new kx(e,i-e,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,r),l=n.doc.lineAt(t),c=s+l.length*a,h=l.number-o,u=i+s*h+a*(l.from-r-h);return new kx(l.from,l.length,Math.max(i,Math.min(u,i+this.height-c)),c,0)}forEachLine(t,e,n,i,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,r);for(let c=t,h=i;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-s;h+=a*n+l*(t-r-n)}let i=a+l*e.length;o(new kx(e.from,e.length,h,i,0)),h+=i,c=e.to+1}}replace(t,e,n){let i=this.length-e;if(i>0){let t=n[n.length-1];t instanceof $x?n[n.length-1]=new $x(t.length+i):n.push(null,new $x(i-1))}if(t>0){let e=n[0];e instanceof $x?n[0]=new $x(t+e.length):n.unshift(new $x(t-1),null)}return Mx.of(n)}decomposeLeft(t,e){e.push(new $x(t-1),null)}decomposeRight(t,e){e.push(null,new $x(this.length-t-1))}updateHeight(t,e=0,n=!1,i){let r=e+this.length;if(i&&i.from<=e+this.length&&i.more){let n=[],o=Math.max(e,i.from),s=-1;for(i.from>e&&n.push(new $x(i.from-e-1).updateHeight(t,e));o<=r&&i.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==s?s=r:Math.abs(r-s)>=Ax&&(s=-2);let a=new Tx(e,r);a.outdated=!1,n.push(a),o+=e+1}o<=r&&n.push(null,new $x(r-o).updateHeight(t,o));let a=Mx.of(n);return(s<0||Math.abs(a.height-this.height)>=Ax||Math.abs(s-this.heightMetrics(t,e).perLine)>=Ax)&&(wx=!0),Ex(this,a)}return(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Dx extends Mx{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,i){let r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)}lineAt(t,e,n,i,r){let o=i+this.left.height,s=r+this.left.length+this.break,a=e==Cx.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==Cx.ByPosNoHeight?Cx.ByPosNoHeight:Cx.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,r).join(l)}forEachLine(t,e,n,i,r,o){let s=i+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,i,r,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{let l=this.lineAt(a,Cx.ByPos,n,i,r);t<l.from&&this.left.forEachLine(t,l.from-1,n,i,r,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}}replace(t,e,n){let i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let t of n)r.push(t);if(t>0&&Rx(r,o-1),e<this.length){let t=r.length;this.decomposeRight(e,r),Rx(r,t)}return Mx.of(r)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?Mx.of(this.break?[t,null,e]:[t,e]):(this.left=Ex(this.left,t),this.right=Ex(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,i){let{left:r,right:o}=this,s=e+r.length+this.break,a=null;return i&&i.from<=e+r.length&&i.more?a=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=s+o.length&&i.more?a=o=o.updateHeight(t,s,n,i):o.updateHeight(t,s,n),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Rx(t,e){let n,i;null==t[e]&&(n=t[e-1])instanceof $x&&(i=t[e+1])instanceof $x&&t.splice(e-1,3,new $x(n.length+1+i.length))}class Bx{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Tx?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new Tx(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=e-t;n.block?this.addBlock(new Px(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Tx(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new $x(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Tx)return t;let e=new Tx(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),i.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof Tx||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Tx(0,-1));let n=t;for(let t of this.nodes)t instanceof Tx&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,i){let r=new Bx(n,t);return Kf.spans(e,n,i,r,0),r.finish(n)}}class Nx{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&yO(t,e,this.changes,5)}}function Lx(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=i.body;)if(1==e.nodeType){let n=e,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();o=Math.max(o,i.left),s=Math.min(s,i.right),a=Math.max(a,i.top),l=Math.min(e==t.parentNode?r.innerHeight:l,i.bottom)}e="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function jx(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class _x{constructor(t,e,n,i){this.from=t,this.to=e,this.size=n,this.displaySize=i}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(t,e){return pO.replace({widget:new Ix(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class Ix extends dO{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class zx{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Wx,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=AO.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(fS).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new Sx(e),this.stateDeco=t.facet(pS).filter((t=>"function"!=typeof t)),this.heightMap=Mx.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle.setDoc(t.doc),[new SS(0,0,0,t.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=pO.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let i=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>i>=t&&i<=e))){let{from:e,to:n}=this.lineBlockAt(i);t.push(new Qx(e,n))}}return this.viewports=t.sort(((t,e)=>t.from-e.from)),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?Wx:new Fx(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(qx(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(pS).filter((t=>"function"!=typeof t));let i=t.changedRanges,r=SS.extendWithRanges(i,function(t,e,n){let i=new Nx;return Kf.compare(t,e,n,i,0),i.changes}(n,this.stateDeco,t?t.changes:Xd.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Ox(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||wx)&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,t.flags|=this.updateForViewport(),(l||!t.changes.empty||2&t.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(eS)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?AO.RTL:AO.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),s=e.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:t,scaleY:n}=xw(e,s);(t>.005&&Math.abs(this.scaleX-t)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=t,this.scaleY=n,l|=16,o=a=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,u=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==u||(this.paddingTop=h,this.paddingBottom=u,l|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=16);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=$w(t.scrollDOM);let f=(this.printing?jx:Lx)(e,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!function(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}(t.dom))return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=t.scrollDOM.clientHeight,l|=16),a){let e=t.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(e)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=t.docView.measureTextSize();o=n>0&&i.refresh(r,n,s,a,v/s,e),o&&(t.docView.minWidth=0,l|=16)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),Ox();for(let n of this.viewports){let r=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(o?Mx.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle,[new SS(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new xx(n.from,r))}wx&&(l|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new Qx(i.lineAt(o-1e3*n,Cx.ByHeight,r,0,0).from,i.lineAt(s+1e3*(1-n),Cx.ByHeight,r,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=i.lineAt(t,Cx.ByPos,r,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-o,a=new Qx(i.lineAt(n-500,Cx.ByHeight,r,0,0).from,i.lineAt(n+o+500,Cx.ByHeight,r,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new Qx(this.heightMap.lineAt(n,Cx.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Cx.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,Cx.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,Cx.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||i<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||r>=s+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let i of t)e.touchesRange(i.from,i.to)||n.push(new _x(e.mapPos(i.from),e.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=AO.LTR&&!n)return[];let s=[],a=(i,o,l,c)=>{if(o-i<r)return;let h=this.state.selection.main,u=[h.from];h.empty||u.push(h.to);for(let t of u)if(t>i&&t<o)return a(i,t-10,l,c),void a(t+10,o,l,c);let d=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-i)<r&&Math.abs(t.to-o)<r&&!u.some((e=>t.from<e&&t.to>e))));if(!d){if(o<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=o&&t.to>=o))){let t=e.moveToLineBoundary(ef.cursor(o),!1,!0).head;t>i&&(o=t)}let t=this.gapSize(l,i,o,c);d=new _x(i,o,t,n||t<2e6?t:2e6)}s.push(d)},l=e=>{if(e.length<o||e.type!=fO.Text)return;let r=function(t,e,n){let i=[],r=t,o=0;return Kf.spans(n,t,e,{span(){},point(t,e){t>r&&(i.push({from:r,to:t}),o+=t-r),r=e}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}(e.from,e.to,this.stateDeco);if(r.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let t,n,o=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let i=Vx(r,c),s=((this.visibleBottom-this.visibleTop)/2+o)/e.height;t=i-s,n=i+s}else t=(this.visibleTop-e.top-o)/e.height,n=(this.visibleBottom-e.top+o)/e.height;s=Hx(r,t),l=Hx(r,n)}else{let n=r.total*this.heightOracle.charWidth,o=i*this.heightOracle.charWidth,a=0;if(n>2e6)for(let n of t)n.from>=e.from&&n.from<e.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let h,u,d=this.pixelViewport.left+a,f=this.pixelViewport.right+a;if(null!=c){let t=Vx(r,c),e=((f-d)/2+o)/n;h=t-e,u=t+e}else h=(d-o)/n,u=(f+o)/n;s=Hx(r,h),l=Hx(r,u)}s>e.from&&a(e.from,s,e,r),l<e.to&&a(l,e.to,e,r)};for(let t of this.viewportLines)Array.isArray(t.type)?t.type.forEach(l):l(t);return s}gapSize(t,e,n,i){let r=Vx(i,n)-Vx(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(t){_x.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=pO.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Kf.spans(e,this.viewport.from,this.viewport.to,{span(t,e){n.push({from:t,to:e})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let e=0;e<n.length&&!(8&i);e++){let r=this.visibleRanges[e],o=n[e];r.from==o.from&&r.to==o.to||(i|=4,t&&t.mapPos(r.from,-1)==o.from&&t.mapPos(r.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||qx(this.heightMap.lineAt(t,Cx.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((e=>e.top<=t&&e.bottom>=t))||qx(this.heightMap.lineAt(this.scaler.fromDOM(t),Cx.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return qx(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Qx{constructor(t,e){this.from=t,this.to=e}}function Hx({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:r}=e[t],o=r-n;if(i<=o)return n+i;i-=o}}function Vx(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}const Wx={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Fx{constructor(t,e,n){let i=0,r=0,o=0;this.viewports=n.map((({from:n,to:r})=>{let o=e.lineAt(n,Cx.ByPos,t,0,0).top,s=e.lineAt(r,Cx.ByPos,t,0,0).bottom;return i+=s-o,{from:n,to:r,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(e.height-i);for(let t of this.viewports)t.domTop=o+(t.top-r)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),r=t.bottom}toDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}}fromDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}}eq(t){return t instanceof Fx&&this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every(((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to))}}function qx(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new kx(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map((t=>qx(t,e))):t._content)}const Xx=of.define({combine:t=>t.join(" ")}),Kx=of.define({combine:t=>t.indexOf(!0)>-1}),Zx=up.newName(),Yx=up.newName(),Gx=up.newName(),Ux={"&light":"."+Yx,"&dark":"."+Gx};function Jx(t,e,n){return new up(e,{finish(e){return/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e}})}const tk=Jx("."+Zx,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ux),ek={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},nk=Uw.ie&&Uw.ie_version<=11;class ik{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new kw,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(Uw.ie&&Uw.ie_version<=11||Uw.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===t.constructor.EDIT_CONTEXT||Uw.chrome&&Uw.chrome_version<126||(this.editContext=new sk(t),t.state.facet(aS)&&(t.contentDOM.editContext=this.editContext.editContext)),nk&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(t){("change"!=t.type&&t.type||t.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(aS)?n.root.activeElement!=this.dom:!pw(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(t)?e||(this.selectionChanged=!1):(Uw.ie&&Uw.ie_version<=11||Uw.android&&Uw.chrome)&&!n.state.selection.main.empty&&i.focusNode&&mw(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=dw(t.root);if(!e)return!1;let n=Uw.safari&&11==t.root.nodeType&&t.root.activeElement==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return ok(t,n)}let n=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?ok(t,n):null}(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let i=pw(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,ww(n));;)if(i){if(1!=n.nodeType)return!1;let t=n.childNodes[i-1];"false"==t.contentEditable?i--:(n=t,i=ww(n))}else{if(n==t)return!0;i=vw(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ek),nk&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),nk&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&Pw(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,i=!1;for(let r of t){let t=this.readMutation(r);t&&(t.typeOver&&(i=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:i}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),i=this.selectionChanged&&pw(this.dom,this.selectionRange);if(t<0&&!i)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new VS(this.view,t,e,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,i=WS(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=rk(e,t.previousSibling||t.target.previousSibling,-1),i=rk(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(aS)!=t.state.facet(aS)&&(t.view.contentDOM.editContext=t.state.facet(aS)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function rk(t,e,n){for(;e;){let i=Lw.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function ok(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return mw(s.node,s.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}class sk{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=e=>{let n=t.state.selection.main,{anchor:i,head:r}=n,o=this.toEditorPos(e.updateRangeStart),s=this.toEditorPos(e.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:e.updateRangeStart,editorBase:o,drifted:!1});let a={from:o,to:s,insert:Td.of(e.text.split("\n"))};if(a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),a.from!=a.to||a.insert.length){if((Uw.mac||Uw.android)&&a.from==r-1&&/^\. ?$/.test(e.text)&&"off"==t.contentDOM.getAttribute("autocorrect")&&(a={from:o,to:s,insert:Td.of([e.text.replace("."," ")])}),this.pendingContextChange=a,!t.state.readOnly){let n=this.to-this.from+(a.to-a.from+a.insert.length);FS(t,a,ef.single(this.toEditorPos(e.selectionStart,n),this.toEditorPos(e.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))}else{let i=ef.single(this.toEditorPos(e.selectionStart),this.toEditorPos(e.selectionEnd));i.main.eq(n)||t.dispatch({selection:i,userEvent:"select"})}},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let e=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);e<o;e++){let n=t.coordsForChar(e);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}e.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=e=>{let n=[];for(let t of e.getTextFormats()){let e=t.underlineStyle,i=t.underlineThickness;if("None"!=e&&"None"!=i){let r=this.toEditorPos(t.rangeStart),o=this.toEditorPos(t.rangeEnd);if(r<o){let t=`text-decoration: underline ${"Dashed"==e?"dashed ":"Squiggle"==e?"wavy ":""}${"Thin"==i?1:2}px`;n.push(pO.mark({attributes:{style:t}}).range(r,o))}}}t.dispatch({effects:oS.of(pO.set(n))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:e}=this.composing;this.composing=null,e&&this.reset(t.state)}};for(let t in this.handlers)e.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let e=dw(t.root);e&&e.rangeCount&&this.editContext.updateSelectionBounds(e.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,i=this.pendingContextChange;return t.changes.iterChanges(((r,o,s,a,l)=>{if(n)return;let c=l.length-(o-r);if(i&&o>=i.to){if(i.from==r&&i.to==o&&i.insert.eq(l))return i=this.pendingContextChange=null,e+=c,void(this.to+=c);i=null,this.revertPending(t.state)}if(r+=e,(o+=e)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),l.toString()),this.to+=c}e+=c})),i&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some((t=>!t.isUserEvent("input.type")&&t.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):this.applyEdits(t)&&this.rangeIsValid(t.state)?(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state):(this.pendingContextChange=null,this.reset(t.state)),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),i=this.toContextPos(e.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>3e4)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class ak{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(t=>t.forEach((t=>n(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new zx(t.state||Hf.create(t)),t.scrollTo&&t.scrollTo.is(rS)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(cS).map((t=>new uS(t)));for(let t of this.plugins)t.update(this);this.observer=new ik(this),this.inputState=new qS(this),this.inputState.ensureHandlers(this.plugins),this.docView=new kS(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(e=document.fonts)||void 0===e?void 0:e.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...t){let e=1==t.length&&t[0]instanceof Df?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,i=!1,r=this.state;for(let e of t){if(e.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=e.state}if(this.destroyed)return void(this.viewState.state=r);let o=this.hasFocus,s=0,a=null;t.some((t=>t.annotation(gx)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=mx(r,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(Hf.phrases)!=this.state.facet(Hf.phrases))return this.setState(r);e=xS.create(this,r,t),e.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(h&&(h=h.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;h=new iS(t.empty?t:ef.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(rS)&&(h=t.value.clip(this.state))}this.viewState.update(e,h),this.bidiCache=hk.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(OS)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(Xx)!=e.state.facet(Xx)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!e.empty)for(let t of this.state.facet(ZO))try{t(e)}catch(t){sS(this.state,t,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!WS(this,c)&&l.force&&Pw(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new zx(t),this.plugins=t.facet(cS).map((t=>new uS(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new kS(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(cS),n=t.state.facet(cS);if(e!=n){let i=[];for(let r of n){let n=e.indexOf(r);if(n<0)i.push(new uS(r));else{let e=this.plugins[n];e.mustUpdate=t,i.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(t){sS(this.state,t,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(o<0)if($w(n))r=-1,o=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(i);r=t.from,o=t.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((t=>{try{return t.read(this)}catch(t){return sS(this.state,t),ck}})),c=xS.create(this,this.state,[]),h=!1;c.flags|=s,e?e.flags|=s:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let t=0;t<a.length;t++)if(l[t]!=ck)try{let e=a[t];e.write&&e.write(l[t],this)}catch(t){sS(this.state,t)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let t=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(t>1||t<-1){i+=t,n.scrollTop=i/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(ZO))t(e)}get themeClasses(){return Zx+" "+(this.state.facet(Kx)?Gx:Yx)+" "+this.state.facet(Xx)}updateAttrs(){let t=uk(this,dS,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(aS)?"true":"false",class:"cm-content",style:`${Uw.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),uk(this,fS,e);let n=this.observer.ignore((()=>{let n=hO(this.contentDOM,this.contentAttrs,e),i=hO(this.dom,this.editorAttrs,t);return n||i}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(ak.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(OS);let t=this.state.facet(ak.cspNonce);up.mount(this.root,this.styleModules.concat(tk).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return _S(this,t,LS(this,t,e,n))}moveByGroup(t,e){return _S(this,t,LS(this,t,e,(e=>function(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return t=>{let e=i(t);return r==If.Space&&(r=e),r==e}}(this,t.head,e))))}visualLineSide(t,e){let n=this.bidiSpans(t),i=this.textDirectionAt(t.from),r=n[e?n.length-1:0];return ef.cursor(r.side(e,i)+t.from,r.forward(!e,i)?1:-1)}moveToLineBoundary(t,e,n=!0){return function(t,e,n,i){let r=function(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let t;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;t&&(r.type!=fO.Text||t.type==r.type&&!(n<0?r.from<e:r.to>e))||(t=r)}}return t||i}return i}(t,e.head,e.assoc||-1),o=i&&r.type==fO.Text&&(t.lineWrapping||r.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),i=t.textDirectionAt(r.from),s=t.posAtCoords({x:n==(i==AO.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return ef.cursor(s,n?-1:1)}return ef.cursor(n?r.to:r.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return _S(this,t,function(t,e,n,i){let r=e.head,o=n?1:-1;if(r==(n?t.state.doc.length:0))return ef.cursor(r,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),h=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-e.from))),s=(o<0?e.top:e.bottom)+h}let u=l.left+a,d=null!=i?i:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(d+e)*o,i=BS(t,{x:u,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?i<r:i>r)){let e=t.docView.coordsForChar(i),r=!e||n<e.top?-1:1;return ef.cursor(i,r,void 0,a)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),BS(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),r=this.bidiSpans(i);return Ow(n,r[LO.find(r,t-i.from,-1,e)].dir==AO.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(tS)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>lk)return QO(t.length);let e,n=this.textDirectionAt(t.from);for(let i of this.bidiCache)if(i.from==t.from&&i.dir==n&&(i.fresh||jO(i.isolates,e=bS(this,t))))return i.order;e||(e=bS(this,t));let i=function(t,e,n){if(!t)return[new LO(0,0,e==EO?1:0)];if(e==MO&&!n.length&&!NO.test(t))return QO(t.length);if(n.length)for(;t.length>_O.length;)_O[_O.length]=256;let i=[],r=e==MO?0:1;return zO(t,r,r,n,0,t.length,i),i}(t.text,n,e);return this.bidiCache.push(new hk(t.from,t.to,n,e,!0,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||Uw.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Mw(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return rS.of(new iS("number"==typeof t?ef.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return rS.of(new iS(ef.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){null==t?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof t?this.inputState.tabFocusMode=t?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return hS.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return hS.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=up.newName(),i=[Xx.of(n),OS.of(Jx(`.${n}`,t))];return e&&e.dark&&i.push(Kx.of(!0)),i}static baseTheme(t){return pf.lowest(OS.of(Jx("."+Zx,t,Ux)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),i=n&&Lw.get(n)||Lw.get(t);return(null===(e=null==i?void 0:i.rootView)||void 0===e?void 0:e.view)||null}}ak.styleModule=OS,ak.inputHandler=YO,ak.clipboardInputFilter=UO,ak.clipboardOutputFilter=JO,ak.scrollHandler=nS,ak.focusChangeEffect=GO,ak.perLineTextDirection=tS,ak.exceptionSink=KO,ak.updateListener=ZO,ak.editable=aS,ak.mouseSelectionStyle=XO,ak.dragMovesSelection=qO,ak.clickAddsSelectionRange=FO,ak.decorations=pS,ak.outerDecorations=gS,ak.atomicRanges=mS,ak.bidiIsolatedRanges=vS,ak.scrollMargins=yS,ak.darkTheme=Kx,ak.cspNonce=of.define({combine:t=>t.length?t[0]:""}),ak.contentAttributes=fS,ak.editorAttributes=dS,ak.lineWrapping=ak.contentAttributes.of({class:"cm-lineWrapping"}),ak.announce=$f.define();const lk=4096,ck={};class hk{constructor(t,e,n,i,r,o){this.from=t,this.to=e,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],i=t.length?t[t.length-1].dir:AO.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir!=i||e.touchesRange(o.from,o.to)||n.push(new hk(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function uk(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let e=i[r],o="function"==typeof e?e(t):e;o&&aO(o,n)}return n}class dk extends Wf{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}function fk(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function pk(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function gk(t,e){if(!e.anchorNode)return!1;try{return pk(t,e.anchorNode)}catch(t){return!1}}function mk(t){return 3==t.nodeType?Pk(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function vk(t,e,n,i){return!!n&&(wk(t,e,n,i,-1)||wk(t,e,n,i,1))}function bk(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function yk(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function wk(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Ok(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=bk(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(r<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=r<0?Ok(t):0}}}function Ok(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Sk(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function xk(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function kk(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}dk.prototype.elementClass="",dk.prototype.toDOM=void 0,dk.prototype.mapMode=Fd.TrackBefore,dk.prototype.startSide=dk.prototype.endSide=-1,dk.prototype.point=!0;class Ck{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?Ok(e):0),n,Math.min(t.focusOffset,n?Ok(n):0))}set(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i}}let Ak,Mk=null;function Ek(t){if(t.setActive)return t.setActive();if(Mk)return t.focus(Mk);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==Mk?{get preventScroll(){return Mk={preventScroll:!0},!0}}:void 0),!Mk){Mk=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function Pk(t,e,n=e){let i=Ak||(Ak=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Tk(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function $k(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Dk(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Rk(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=Ok(n)}else{if(!n.parentNode||yk(n))return null;i=bk(n),n=n.parentNode}}}function Bk(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||yk(n))return null;i=bk(n)+1,n=n.parentNode}}}class Nk{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new Nk(t.parentNode,bk(t),e)}static after(t,e){return new Nk(t.parentNode,bk(t)+1,e)}}const Lk=[];class jk{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,i=this.dom,r=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let t=jk.get(n);(!t||!t.parent&&t.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(t,e),o.flags&=-8}if(n=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&n!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=_k(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&e&&e.node==i&&(e.written=!0);n;)n=_k(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let i=0==Ok(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==i&&e.firstChild!=e.lastChild&&(i=t==e.firstChild?-1:1),t=e}n=i<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!jk.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let i=this.children[t];if(i.dom==n)return e;e+=i.length+i.breakAfter}}domBoundsAround(t,e,n=0){let i=-1,r=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],h=l+n.length;if(l<t&&h>e)return n.domBoundsAround(t,e,l);if(h>=t&&-1==i&&(i=a,r=l),l>e&&n.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+n.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=Lk){this.markDirty();for(let i=t;i<e;i++){let t=this.children[i];t.parent==this&&n.indexOf(t)<0&&t.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new Ik(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,i,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function _k(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}jk.prototype.breakAfter=0;class Ik{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function zk(t,e,n,i,r,o,s,a,l){let{children:c}=t,h=c.length?c[e]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(e==i&&h&&!s&&!d&&o.length<2&&h.merge(n,r,o.length?u:null,0==n,a,l))){if(i<c.length){let t=c[i];t&&(r<t.length||t.breakAfter&&(null==u?void 0:u.breakAfter))?(e==i&&(t=t.split(r),r=0),!d&&u&&t.merge(0,r,u,!0,0,l)?o[o.length-1]=t:((r||t.children.length&&!t.children[0].length)&&t.merge(0,r,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(u?u.breakAfter=1:s=1),i++}for(h&&(h.breakAfter=s,n>0&&(!s&&o.length&&h.merge(n,h.length,o[0],!1,a,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,a,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function Qk(t,e,n,i,r,o){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:h}=s.findPos(e,-1),u=e-n;for(let t of i)u+=t.length;t.length+=u,zk(t,c,h,a,l,i,0,r,o)}let Hk="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Vk="undefined"!=typeof document?document:{documentElement:{style:{}}};const Wk=/Edge\/(\d+)/.exec(Hk.userAgent),Fk=/MSIE \d/.test(Hk.userAgent),qk=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Hk.userAgent),Xk=!!(Fk||qk||Wk),Kk=!Xk&&/gecko\/(\d+)/i.test(Hk.userAgent),Zk=!Xk&&/Chrome\/(\d+)/.exec(Hk.userAgent),Yk="webkitFontSmoothing"in Vk.documentElement.style,Gk=!Xk&&/Apple Computer/.test(Hk.vendor),Uk=Gk&&(/Mobile\/\w+/.test(Hk.userAgent)||Hk.maxTouchPoints>2);var Jk={mac:Uk||/Mac/.test(Hk.platform),windows:/Win/.test(Hk.platform),linux:/Linux|X11/.test(Hk.platform),ie:Xk,ie_version:Fk?Vk.documentMode||6:qk?+qk[1]:Wk?+Wk[1]:0,gecko:Kk,gecko_version:Kk?+(/Firefox\/(\d+)/.exec(Hk.userAgent)||[0,0])[1]:0,chrome:!!Zk,chrome_version:Zk?+Zk[1]:0,ios:Uk,android:/Android\b/.test(Hk.userAgent),webkit:Yk,safari:Gk,webkit_version:Yk?+(/\bAppleWebKit\/(\d+)/.exec(Hk.userAgent)||[0,0])[1]:0,tabSize:null!=Vk.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class tC extends jk{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof tC)||this.length-(e-t)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),0))}split(t){let e=new tC(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new Nk(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;0==e&&n<0||e==i&&n>=0?Jk.chrome||Jk.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let a=Pk(t,r,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return Jk.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l),s?Sk(l,s<0):l||null}(this.dom,t,e)}}class eC extends jk{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if($k(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof eC&&n.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0)||(Qk(this,t,e,n?n.children.slice():[],r-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>t&&e.push(n<t?o.split(t-n):o),i<0&&n>=t&&(i=r),n=s,r++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new eC(this.mark,e,o)}domAtPos(t){return rC(this,t)}coordsAt(t,e){return sC(this,t,e)}}class nC extends jk{static create(t,e,n){return new nC(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=nC.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof nC&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t instanceof nC&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return Td.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Td.empty}domAtPos(t){return(this.length?0==t:this.side>0)?Nk.before(this.dom):Nk.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:t>0;for(let e=o?i.length-1:0;r=i[e],!(t>0?0==e:e==i.length-1||r.top<r.bottom);e+=o?-1:1);return Sk(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class iC extends jk{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof iC&&t.side==this.side}split(){return new iC(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?Nk.before(this.dom):Nk.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Td.empty}get isHidden(){return!0}}function rC(t,e){let n=t.dom,{children:i}=t,r=0;for(let t=0;r<i.length;r++){let o=i[r],s=t+o.length;if(!(s==t&&o.getSide()<=0)){if(e>t&&e<s&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=r;t>0;t--){let e=i[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=r;t<i.length;t++){let e=i[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new Nk(n,0)}function oC(t,e,n){let i,{children:r}=t;n>0&&e instanceof eC&&r.length&&(i=r[r.length-1])instanceof eC&&i.mark.eq(e.mark)?oC(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function sC(t,e,n){let i=null,r=-1,o=null,s=-1;!function t(e,a){for(let l=0,c=0;l<e.children.length&&c<=a;l++){let h=e.children[l],u=c+h.length;u>=a&&(h.children.length?t(h,a-c):(!o||o.isHidden&&(n>0||aC(o,h)))&&(u>a||c==u&&h.getSide()>0)?(o=h,s=a-c):(c<a||c==u&&h.getSide()<0&&!h.isHidden)&&(i=h,r=a-c)),c=u}}(t,e);let a=(n<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?r:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=mk(e);return n[n.length-1]||null}(t)}function aC(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function lC(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}tC.prototype.children=nC.prototype.children=iC.prototype.children=Lk;const cC=Object.create(null);function hC(t,e,n){if(t==e)return!0;t||(t=cC),e||(e=cC);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(-1==r.indexOf(o)||t[o]!==e[o]))return!1;return!0}function uC(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,"style"==r?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,"style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function dC(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class fC{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var pC=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(pC||(pC={}));class gC extends Wf{constructor(t,e,n,i){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new mC(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new bC(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,i=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:r,end:o}=yC(t,i);e=(r?i?-3e8:-1:5e8)-1,n=1+(o?i?2e8:1:-6e8)}return new bC(t,e,n,i,t.widget||null,!0)}static line(t){return new vC(t)}static set(t,e=!1){return Kf.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}gC.none=Kf.empty;class mC extends gC{constructor(t){let{start:e,end:n}=yC(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof mC&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&hC(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}mC.prototype.point=!1;class vC extends gC{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof vC&&this.spec.class==t.spec.class&&hC(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}vC.prototype.mapMode=Fd.TrackBefore,vC.prototype.point=!0;class bC extends gC{constructor(t,e,n,i,r,o){super(e,n,r,t),this.block=i,this.isReplace=o,this.mapMode=i?e<=0?Fd.TrackBefore:Fd.TrackAfter:Fd.TrackDel}get type(){return this.startSide!=this.endSide?pC.WidgetRange:this.startSide<=0?pC.WidgetBefore:pC.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof bC&&((e=this.widget)==(n=t.widget)||!!(e&&n&&e.compare(n)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,n}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function yC(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!=n?n:e,end:null!=i?i:e}}function wC(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}bC.prototype.point=!0;class OC extends jk{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,i,r,o){if(n){if(!(n instanceof OC))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),Qk(this,t,e,n?n.children.slice():[],r,o),!0}split(t){let e=new OC;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:i}=this.childPos(t);i&&(e.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){hC(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){oC(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=lC(e,this.attrs||{})),n&&(this.attrs=lC({class:n},this.attrs||{}))}domAtPos(t){return rC(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?4&this.flags&&($k(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(uC(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let i=this.dom.lastChild;for(;i&&jk.get(i)instanceof eC;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=jk.get(i))||void 0===n?void 0:n.isEditable)||Jk.ios&&this.children.some((t=>t instanceof tC))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof tC)||/[^ -~]/.test(n.text))return null;let i=mk(n.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=sC(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let i=(e-t.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(t){return t instanceof OC&&0==this.children.length&&0==t.children.length&&hC(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,i=0;n<t.children.length;n++){let r=t.children[n],o=i+r.length;if(o>=e){if(r instanceof OC)return r;if(o>e)break}i=o+r.breakAfter}return null}}class SC extends jk{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof SC&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?Nk.before(this.dom):Nk.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new SC(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Lk}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Td.empty}domBoundsAround(){return null}become(t){return t instanceof SC&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)||(this.widget instanceof xC?null:Sk(this.dom.getBoundingClientRect(),this.length?0==t:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class xC extends fC{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class kC{constructor(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof SC&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new OC),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(CC(new iC(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof SC||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(CC(new tC(this.text.slice(this.textOff,this.textOff+i)),e),n),this.atCursorPos=!0,this.textOff+=i,t-=i,n=0}}span(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)}point(t,e,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof bC){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof bC)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new SC(n.widget||AC.block,s,n));else{let o=nC.create(n.widget||AC.inline,s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&r<=i.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||r>i.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(c.append(CC(new iC(1),i),r),r=i.length+Math.max(0,r-i.length)),c.append(CC(o,i),r),this.atCursorPos=l,this.pendingBuffer=l?t<e||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,n,i,r){let o=new kC(t,e,n,r);return o.openEnd=Kf.spans(i,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function CC(t,e){for(let n of e)t=new eC(n,[t],t.length);return t}class AC extends fC{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}AC.inline=new AC("span"),AC.block=new AC("div");var MC=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(MC||(MC={}));const EC=MC.LTR,PC=MC.RTL;function TC(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const $C=TC("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),DC=TC("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),RC=Object.create(null),BC=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);RC[e]=n,RC[n]=-e}function NC(t){return t<=247?$C[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?DC[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const LC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class jC{get dir(){return this.level%2?PC:EC}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,i){let r=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<e:s.to>e:t[r].level>s.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function _C(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!_C(i.inner,r.inner))return!1}return!0}const IC=[];function zC(t,e,n,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let e=!0,h=!1;if(c==o.length||l<o[c].from){let t=IC[l];t!=a&&(e=!1,h=16==t)}let u=e||1!=a?null:[],d=e?i:i+1,f=l;t:for(;;)if(c<o.length&&f==o[c].from){if(h)break t;let p=o[c];if(!e)for(let t=p.to,e=c+1;;){if(t==n)break t;if(!(e<o.length&&o[e].from==t)){if(IC[t]==a)break t;break}t=o[e++].to}c++,u?u.push(p):(p.from>l&&s.push(new jC(l,p.from,d)),QC(t,p.direction==EC!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.to),f=p.to}else{if(f==n||(e?IC[f]!=a:IC[f]==a))break;f++}u?zC(t,l,f,i+1,r,u,s):l<f&&s.push(new jC(l,f,d)),l=f}else for(let l=n,c=o.length;l>e;){let n=!0,h=!1;if(!c||l>o[c-1].to){let t=IC[l-1];t!=a&&(n=!1,h=16==t)}let u=n||1!=a?null:[],d=n?i:i+1,f=l;t:for(;;)if(c&&f==o[c-1].to){if(h)break t;let p=o[--c];if(!n)for(let t=p.from,n=c;;){if(t==e)break t;if(!n||o[n-1].to!=t){if(IC[t-1]==a)break t;break}t=o[--n].from}u?u.push(p):(p.to<l&&s.push(new jC(p.to,l,d)),QC(t,p.direction==EC!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.from),f=p.from}else{if(f==e||(n?IC[f-1]!=a:IC[f-1]==a))break;f--}u?zC(t,f,l,i+1,r,u,s):f<l&&s.push(new jC(f,l,d)),l=f}}function QC(t,e,n,i,r,o,s){let a=e%2?2:1;!function(t,e,n,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:n,l=o?256:r;for(let e=s,n=l,i=l;e<a;e++){let r=NC(t.charCodeAt(e));512==r?r=n:8==r&&4==i&&(r=16),IC[e]=4==r?2:r,7&r&&(i=r),n=r}for(let t=s,e=l,i=l;t<a;t++){let r=IC[t];if(128==r)t<a-1&&e==IC[t+1]&&24&e?r=IC[t]=e:IC[t]=256;else if(64==r){let r=t+1;for(;r<a&&64==IC[r];)r++;let o=t&&8==e||r<n&&8==IC[r]?1==i?1:8:256;for(let e=t;e<r;e++)IC[e]=o;t=r-1}else 8==r&&1==i&&(IC[t]=1);e=r,7&r&&(i=r)}}}(t,r,o,i,a),function(t,e,n,i,r){let o=1==r?2:1;for(let s=0,a=0,l=0;s<=i.length;s++){let c=s?i[s-1].to:e,h=s<i.length?i[s].from:n;for(let e,n,i,s=c;s<h;s++)if(n=RC[e=t.charCodeAt(s)])if(n<0){for(let t=a-3;t>=0;t-=3)if(BC[t+1]==-n){let e=BC[t+2],n=2&e?r:4&e?1&e?o:r:0;n&&(IC[s]=IC[BC[t]]=n),a=t;break}}else{if(189==BC.length)break;BC[a++]=s,BC[a++]=e,BC[a++]=l}else if(2==(i=IC[s])||1==i){let t=i==r;l=t?0:1;for(let e=a-3;e>=0;e-=3){let n=BC[e+2];if(2&n)break;if(t)BC[e+2]|=2;else{if(4&n)break;BC[e+2]|=4}}}}}(t,r,o,i,a),function(t,e,n,i){for(let r=0,o=i;r<=n.length;r++){let s=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=s;l<a;){let s=IC[l];if(256==s){let s=l+1;for(;;)if(s==a){if(r==n.length)break;s=n[r++].to,a=r<n.length?n[r].from:e}else{if(256!=IC[s])break;s++}let c=1==o,h=c==(1==(s<e?IC[s]:i))?c?1:2:i;for(let e=s,i=r,o=i?n[i-1].to:t;e>l;)e==o&&(e=n[--i].from,o=i?n[i-1].to:t),IC[--e]=h;l=s}else o=s,l++}}}(r,o,i,a),zC(t,r,o,e,n,i,s)}function HC(t){return[new jC(0,t,0)]}let VC="";function WC(t,e,n,i,r){var o;let s=i.head-t.from,a=jC.find(e,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc),l=e[a],c=l.side(r,n);if(s==c){let t=a+=r?1:-1;if(t<0||t>=e.length)return null;l=e[a=t],s=l.side(!r,n),c=l.side(r,n)}let h=zd(t.text,s,l.forward(r,n));(h<l.from||h>l.to)&&(h=c),VC=t.text.slice(Math.min(s,h),Math.max(s,h));let u=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return u&&h==c&&u.level+(r?0:1)<l.level?ef.cursor(u.side(!r,n)+t.from,u.forward(r,n)?1:-1,u.level):ef.cursor(h+t.from,l.forward(r,n)?-1:1,l.level)}function FC(t,e,n){for(let i=e;i<n;i++){let e=NC(t.charCodeAt(i));if(1==e)return EC;if(2==e||4==e)return PC}return EC}const qC=of.define(),XC=of.define(),KC=of.define(),ZC=of.define(),YC=of.define(),GC=of.define(),UC=of.define(),JC=of.define(),tA=of.define(),eA=of.define({combine:t=>t.some((t=>t))}),nA=of.define({combine:t=>t.some((t=>t))}),iA=of.define();class rA{constructor(t,e="nearest",n="nearest",i=5,r=5,o=!1){this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new rA(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new rA(ef.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const oA=$f.define({map:(t,e)=>t.map(e)}),sA=$f.define();function aA(t,e,n){let i=t.facet(ZC);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const lA=of.define({combine:t=>!t.length||t[0]});let cA=0;const hA=of.define();class uA{constructor(t,e,n,i,r){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(t,e){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=e||{};return new uA(cA++,t,n,i,(t=>{let e=[hA.of(t)];return o&&e.push(gA.of((e=>{let n=e.plugin(t);return n?o(n):gC.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return uA.define((e=>new t(e)),e)}}class dA{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(aA(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){aA(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){aA(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const fA=of.define(),pA=of.define(),gA=of.define(),mA=of.define(),vA=of.define(),bA=of.define();function yA(t,e){let n=t.state.facet(bA);if(!n.length)return n;let i=n.map((e=>e instanceof Function?e(t):e)),r=[];return Kf.spans(i,e.from,e.to,{point(){},span(t,n,i,o){let s=t-e.from,a=n-e.from,l=r;for(let t=i.length-1;t>=0;t--,o--){let n,r=i[t].spec.bidiIsolate;if(null==r&&(r=FC(e.text,s,a)),o>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==r)n.to=a,l=n.inner;else{let t={from:s,to:a,direction:r,inner:[]};l.push(t),l=t.inner}}}}),r}const wA=of.define();function OA(t){let e=0,n=0,i=0,r=0;for(let o of t.state.facet(wA)){let s=o(t);s&&(null!=s.left&&(e=Math.max(e,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(i=Math.max(i,s.top)),null!=s.bottom&&(r=Math.max(r,s.bottom)))}return{left:e,right:n,top:i,bottom:r}}const SA=of.define();class xA{constructor(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}join(t){return new xA(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let i=0,r=0,o=0,s=0;;i++){let a=i==t.length?null:t[i],l=o-s,c=a?a.fromB:1e9;for(;r<e.length&&e[r]<c;){let t=e[r],i=e[r+1],o=Math.max(s,t),a=Math.min(c,i);if(o<=a&&new xA(o+l,a+l,o,a).addToSet(n),i>c)break;r+=2}if(!a)return n;new xA(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class kA{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Xd.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let i=[];this.changes.iterChangedRanges(((t,e,n,r)=>i.push(new xA(t,e,n,r)))),this.changedRanges=i}static create(t,e,n){return new kA(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class CA extends jk{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=gC.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new OC],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new xA(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?i=this.domChanged.newSel.head:function(t,e){let n=!1;return e&&t.iterChangedRanges(((t,i)=>{t<e.to&&i>e.from&&(n=!0)})),n}(t.changes,this.hasComposition)||t.selectionSet||(i=t.state.selection.main.head));let r=i>-1?function(t,e,n){let i=AA(t,n);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new xA(l.mapPos(o),l.mapPos(s),o,s),h=[];for(let e=r.parentNode;;e=e.parentNode){let n=jk.get(e);if(n instanceof eC)h.push({node:e,deco:n.mark});else{if(n instanceof OC||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:r,marks:h,line:e};if(e==t.contentDOM)return null;h.push({node:e,deco:new mC({inclusive:!0,attributes:dC(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:i}=this.hasComposition;n=new xA(e,i,t.changes.mapPos(e,-1),t.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Jk.ie||Jk.chrome)&&!r&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=function(t,e,n){let i=new MA;return Kf.compare(t,e,n,i),i.changes}(this.decorations,this.updateDeco(),t.changes);return n=xA.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,r),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=Jk.chrome||Jk.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=-8,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof SC&&t.widget instanceof xC&&r.push(t.dom);i.updateGaps(r)}updateChildren(t,e,n){let i=n?n.range.addToSet(t.slice()):t,r=this.childCursor(e);for(let t=i.length-1;;t--){let e=t>=0?i[t]:null;if(!e)break;let o,s,a,l,{fromA:c,toA:h,fromB:u,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>u){let t=kC.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=kC.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);s=t.breakAtStart,a=t.openStart,l=e.openEnd;let i=this.compositionView(n);e.breakAtStart?i.breakAfter=1:e.content.length&&i.merge(i.length,i.length,e.content[0],!1,e.openStart,0)&&(i.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&i.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),o=t.content.concat(i).concat(e.content)}else({content:o,breakAtStart:s,openStart:a,openEnd:l}=kC.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(h,1),{i:g,off:m}=r.findPos(c,-1);zk(this,g,m,f,p,o,s,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let t of e.effects)t.is(sA)&&(this.editContextFormatting=t.value)}compositionView(t){let e=new tC(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new eC(n,[e],e.length);let n=new OC;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=jk.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),i=this.children[n.i];e(t.line,i);for(let r=t.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],e(r>=0?t.marks[r].node:t.text,i)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet(lA)||this.dom.tabIndex>-1)&&gk(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||e||r))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(Jk.gecko&&s.empty&&!this.hasComposition&&1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(t,a.node.childNodes[a.offset]||null))),a=l=new Nk(t,0),o=!0}var c;let h=this.view.observer.selectionRange;!o&&h.focusNode&&(vk(a.node,a.offset,h.anchorNode,h.anchorOffset)&&vk(l.node,l.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,s))||(this.view.observer.ignore((()=>{Jk.android&&Jk.chrome&&this.dom.contains(h.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=fk(this.view.root);if(t)if(s.empty){if(Jk.gecko){let t=(e=a.node,i=a.offset,1!=e.nodeType?0:(i&&"false"==e.childNodes[i-1].contentEditable?1:0)|(i<e.childNodes.length&&"false"==e.childNodes[i].contentEditable?2:0));if(t&&3!=t){let e=(1==t?Rk:Bk)(a.node,a.offset);e&&(a=new Nk(e.node,e.offset))}}t.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(a.node,a.offset);try{t.extend(l.node,l.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),e.setEnd(l.node,l.offset),e.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(e)}var e,i;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new Nk(h.anchorNode,h.anchorOffset),this.impreciseHead=l.precise?null:new Nk(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&vk(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=fk(t.root),{anchorNode:i,anchorOffset:r}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=OC.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let h=t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=e.from&&n.collapse(i,r)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let i=t.offset;!e&&i<n.childNodes.length;i++){let t=jk.get(n.childNodes[i]);t instanceof OC&&(e=t.domAtPos(0))}for(let i=t.offset-1;!e&&i>=0;i--){let t=jk.get(n.childNodes[i]);t instanceof OC&&(e=t.domAtPos(t.length))}return e?new Nk(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=jk.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof OC)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=r-s.breakAfter,l=a-s.length;if(a<t)break;if(l<=t&&(l<t||s.covers(-1))&&(a>t||s.covers(1))&&(!n||s instanceof OC&&!(n instanceof OC&&e>=0)))n=s,i=l;else if(n&&l==t&&a==t&&s instanceof SC&&Math.abs(e)<2){if(s.deco.startSide<0)break;o&&(n=null)}r=l}return n?n.coordsAt(t-i,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),i=this.children[e];if(!(i instanceof OC))return null;for(;i.children.length;){let{i:t,off:e}=i.childPos(n,1);for(;;t++){if(t==i.children.length)return null;if((i=i.children[t]).length)break}n=e}if(!(i instanceof tC))return null;let r=zd(i.text,n);if(r==n)return null;let o=Pk(i.dom,n,r).getClientRects();for(let t=0;t<o.length;t++){let e=o[t];if(t==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:i}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==MC.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],h=t+c.length;if(h>i)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),o){let e=c.dom.lastChild,i=e?mk(e):[];if(i.length){let e=i[i.length-1],o=a?e.right-n.left:n.right-e.left;o>s&&(s=o,this.minWidth=r,this.minWidthFrom=t,this.minWidthTo=h)}}}t=h+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?MC.RTL:MC.LTR}measureTextSize(){for(let t of this.children)if(t instanceof OC){let e=t.measureTextSize();if(e)return e}let t,e,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=mk(i.firstChild)[0];t=i.getBoundingClientRect().height,e=r?r.width/27:7,n=r?r.height:t,i.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new Ik(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,i=0;;i++){let r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=(e.lineBlockAt(o).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(gC.replace({widget:new xC(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return gC.set(t)}updateDeco(){let t=1,e=this.view.state.facet(gA).map((e=>(this.dynamicDecorationMap[t++]="function"==typeof e)?e(this.view):e)),n=!1,i=this.view.state.facet(mA).map(((t,e)=>{let i="function"==typeof t;return i&&(n=!0),i?t(this.view):t}));for(i.length&&(this.dynamicDecorationMap[t++]=n,e.push(Kf.join(i))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}for(let e of this.view.state.facet(iA))try{if(e(this.view,t.range,t))return!0}catch(t){aA(this.view.state,t,"scroll handler")}let e,{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});let r=OA(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(t,e,n,i,r,o,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let h=t,u=!1;h&&!u;)if(1==h.nodeType){let t,d=h==l.body,f=1,p=1;if(d)t=xk(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let e=h.getBoundingClientRect();({scaleX:f,scaleY:p}=kk(h,e)),t={left:e.left,right:e.left+h.clientWidth*f,top:e.top,bottom:e.top+h.clientHeight*p}}let g=0,m=0;if("nearest"==r)e.top<t.top?(m=e.top-(t.top+s),n>0&&e.bottom>t.bottom+m&&(m=e.bottom-t.bottom+s)):e.bottom>t.bottom&&(m=e.bottom-t.bottom+s,n<0&&e.top-m<t.top&&(m=e.top-(t.top+s)));else{let i=e.bottom-e.top,o=t.bottom-t.top;m=("center"==r&&i<=o?e.top+i/2-o/2:"start"==r||"center"==r&&n<0?e.top-s:e.bottom-o+s)-t.top}if("nearest"==i?e.left<t.left?(g=e.left-(t.left+o),n>0&&e.right>t.right+g&&(g=e.right-t.right+o)):e.right>t.right&&(g=e.right-t.right+o,n<0&&e.left<t.left+g&&(g=e.left-(t.left+o))):g=("center"==i?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==i==a?e.left-o:e.right-(t.right-t.left)+o)-t.left,g||m)if(d)c.scrollBy(g,m);else{let t=0,n=0;if(m){let t=h.scrollTop;h.scrollTop+=m/p,n=(h.scrollTop-t)*p}if(g){let e=h.scrollLeft;h.scrollLeft+=g/f,t=(h.scrollLeft-e)*f}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(i="nearest"),n&&Math.abs(n-m)<1&&(r="nearest")}if(d)break;(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)&&(e={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)}),h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,s),-s),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==MC.LTR)}}function AA(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=Rk(n.focusNode,n.focusOffset),r=Bk(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let e=jk.get(r.node);if(!e||e instanceof tC&&e.text!=r.node.nodeValue)o=r;else if(t.docView.lastCompositionAfterCursor){let t=jk.get(i.node);!t||t instanceof tC&&t.text!=i.node.nodeValue||(o=r)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let MA=class{constructor(){this.changes=[]}compareRange(t,e){wC(t,e,this.changes)}comparePoint(t,e){wC(t,e,this.changes)}boundChange(t){wC(t,t,this.changes)}};function EA(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function PA(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function TA(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function $A(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function DA(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function RA(t,e,n){let i,r,o,s,a,l,c,h,u=!1;for(let d=t.firstChild;d;d=d.nextSibling){let t=mk(d);for(let f=0;f<t.length;f++){let p=t[f];r&&TA(r,p)&&(p=$A(DA(p,r.bottom),r.top));let g=EA(e,p),m=PA(n,p);if(0==g&&0==m)return 3==d.nodeType?BA(d,e,n):RA(d,e,n);if(!i||s>m||s==m&&o>g){i=d,r=p,o=g,s=m;let a=m?n<p.top?-1:1:g?e<p.left?-1:1:0;u=!a||(a>0?f<t.length-1:f>0)}0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=d,c=p):n<p.top&&(!h||h.top>p.top)&&(l=d,h=p):c&&TA(c,p)?c=DA(c,p.bottom):h&&TA(h,p)&&(h=$A(h,p.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=l,r=h),!i)return{node:t,offset:0};let d=Math.max(r.left,Math.min(r.right,e));return 3==i.nodeType?BA(i,d,n):u&&"false"!=i.contentEditable?RA(i,d,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0)}}function BA(t,e,n){let i=t.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let i=Pk(t,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<o){let n=e>=(c.left+c.right)/2,i=n;if((Jk.chrome||Jk.gecko)&&Pk(t,a).getBoundingClientRect().left==c.right&&(i=!n),h<=0)return{node:t,offset:a+(i?1:0)};r=a+(i?1:0),o=h}}}return{node:t,offset:r>-1?r:s>0?t.nodeValue.length:0}}function NA(t,e,n,i=-1){var r,o;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:h,y:u}=e,d=u-l;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,r=!1;s=t.elementAtHeight(d),s.type!=pC.Text;)for(;d=i>0?s.bottom+e:s.top-e,!(d>=0&&d<=c);){if(r)return n?null:0;r=!0,i=-i}u=l+d;let f=s.from;if(f<t.viewport.from)return 0==t.viewport.from?0:n?null:LA(t,a,s,h,u);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:LA(t,a,s,h,u);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,m=g.elementFromPoint(h,u);m&&!t.contentDOM.contains(m)&&(m=null),m||(h=Math.max(a.left+1,Math.min(a.right-1,h)),m=g.elementFromPoint(h,u),m&&!t.contentDOM.contains(m)&&(m=null));let v,b=-1;if(m&&0!=(null===(r=t.docView.nearest(m))||void 0===r?void 0:r.isEditable)){if(p.caretPositionFromPoint){let t=p.caretPositionFromPoint(h,u);t&&({offsetNode:v,offset:b}=t)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(h,u);e&&(({startContainer:v,startOffset:b}=e),(!t.contentDOM.contains(v)||Jk.safari&&function(t,e,n){let i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return Pk(t,i-1,i).getBoundingClientRect().left>n}(v,b,h)||Jk.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():Pk(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(v,b,h))&&(v=void 0))}v&&(b=Math.min(Ok(v),b))}if(!v||!t.docView.dom.contains(v)){let e=OC.find(t.docView,f);if(!e)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:b}=RA(e.dom,h,u))}let y=t.docView.nearest(v);if(!y)return null;if(y.isWidget&&1==(null===(o=y.dom)||void 0===o?void 0:o.nodeType)){let t=y.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?y.posAtStart:y.posAtEnd}return y.localPosFromDOM(v,b)+y.posAtStart}function LA(t,e,n,i,r){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;o+=Math.floor((r-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+ap(s,o,t.state.tabSize)}function jA(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),s=t.textDirectionAt(r.from);for(let a=e,l=null;;){let e=WC(r,o,s,a,n),c=VC;if(!e){if(r.number==(n?t.state.doc.lines:1))return a;c="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),e=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return e;l=i(c)}a=e}}function _A(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,((t,r,o)=>{if(e>t&&e<r){let o=i||n||(e-t<r-e?-1:1);e=o<0?t:r,i=o}}));if(!i)return e}}function IA(t,e,n){let i=_A(t.state.facet(vA).map((e=>e(t))),n.from,e.head>n.from?-1:1);return i==n.from?n:ef.cursor(i,i<n.from?1:-1)}const zA="￿";class QA{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Hf.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=zA}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i);let t=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==e)break;let o=jk.get(i),s=jk.get(r);(o&&s?o.breakAfter:(o?o.breakAfter:yk(i))||yk(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>t)&&this.lineBreak(),i=r}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(r=i.exec(e))&&(o=r.index,s=r[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=jk.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(HA(t,n.node,n.offset)?e:0))}}function HA(t,e,n){for(;;){if(!e||n<Ok(e))return!1;if(e==t)return!0;n=bk(e)+1,e=e.parentNode}}class VA{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class WA{constructor(t,e,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=r||o?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new VA(n,i)),r==n&&o==i||e.push(new VA(r,o))),e}(t),n=new QA(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?ef.single(n+e,i+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=r&&r.node==e.focusNode&&r.offset==e.focusOffset||!pk(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),i=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!pk(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset),s=t.viewport;if((Jk.ios||Jk.chrome)&&t.state.selection.main.empty&&n!=i&&(s.from>0||s.to<t.state.doc.length)){let e=Math.min(n,i),r=Math.max(n,i),o=s.from-e,a=s.to-r;0!=o&&1!=o&&0!=e||0!=a&&-1!=a&&r!=t.state.doc.length||(n=0,i=t.state.doc.length)}this.newSel=ef.single(i,n)}}}function FA(t,e){let n,{newSel:i}=e,r=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:i,to:s}=e.bounds,a=r.from,l=null;(8===o||Jk.android&&e.text.length<s-i)&&(a=r.to,l="end");let c=function(t,e,n,i){let r=Math.min(t.length,e.length),o=0;for(;o<r&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;return"end"==i&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(t.state.doc.sliceString(i,s,zA),e.text,a-i,l);c&&(Jk.chrome&&13==o&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==zA+zA&&c.toB--,n={from:i+c.from,to:i+c.toA,insert:Td.of(e.text.slice(c.from,c.toB).split(zA))})}else i&&(!t.hasFocus&&t.state.facet(lA)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(Jk.mac||Jk.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Td.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:Jk.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(i&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Td.of([" "])}),n)return qA(t,n,i,o);if(i&&!i.main.eq(r)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:e,userEvent:n}),!0}return!1}function qA(t,e,n,i=-1){if(Jk.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Jk.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&" "==t.state.sliceDoc(e.from,r.from))&&1==e.insert.length&&2==e.insert.lines&&Tk(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&0==e.insert.length||8==i&&e.insert.length<e.to-e.from&&e.to>r.head)&&Tk(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&0==e.insert.length&&Tk(t.contentDOM,"Delete",46)))return!0;let o,s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a=()=>o||(o=function(t,e,n){let i,r=t.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=o.from<e.from?r.sliceDoc(o.from,e.from):"",s=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=r.changes(e),a=n&&n.main.to<=s.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let l,c=t.state.sliceDoc(e.from,e.to),h=n&&AA(t,n.main.head);if(h){let t=e.insert.length-(e.to-e.from);l={from:h.from,to:h.to-t}}else l=t.state.doc.lineAt(o.head);let u=o.to-e.to,d=o.to-o.from;i=r.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let i=n.to-u,h=i-c.length;if(n.to-n.from!=d||t.state.sliceDoc(h,i)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=r.changes({from:h,to:i,insert:e.insert}),p=n.to-o.to;return{changes:f,range:a?ef.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else i={changes:s,selection:a&&r.selection.replaceRange(a)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:s,scrollIntoView:!0})}(t,e,n));return t.state.facet(GC).some((n=>n(t,e.from,e.to,s,a)))||t.dispatch(a()),!0}class XA{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,Jk.safari&&t.contentDOM.addEventListener("input",(()=>null)),Jk.gecko&&function(t){yM.has(t)||(yM.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,i=e.target;i!=t.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=jk.get(i))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||(0!=this.view.updateState?Promise.resolve().then((()=>this.runHandlers(t.type,t))):this.runHandlers(t.type,t)))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=function(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let i in t.domEventHandlers){let r=t.domEventHandlers[i];r&&n(i).handlers.push(KA(e.value,r))}if(t&&t.domEventObservers)for(let i in t.domEventObservers){let r=t.domEventObservers[i];r&&n(i).observers.push(KA(e.value,r))}}for(let t in tM)n(t).handlers.push(tM[t]);for(let t in eM)n(t).observers.push(eM[t]);return e}(t),n=this.handlers,i=this.view.contentDOM;for(let t in e)if("scroll"!=t){let r=!e[t].handlers.length,o=n[t];o&&r!=!o.handlers.length&&(i.removeEventListener(t,this.handleEvent),o=null),o||i.addEventListener(t,this.handleEvent,{passive:r})}for(let t in n)"scroll"==t||e[t]||i.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=t.keyCode&&GA.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),Jk.android&&Jk.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!Jk.ios||t.synthetic||t.altKey||t.metaKey||!((e=ZA.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||YA.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&!("Enter"==e.key&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString()))&&(this.pendingIOSKey=void 0,Tk(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(Jk.safari&&!Jk.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function KA(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(t){aA(n.state,t)}}}const ZA=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],YA="dthko",GA=[16,17,18,20,91,92,224,225];function UA(t){return.7*Math.max(0,t)+8}class JA{constructor(t,e,n,i){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=function(t){let e,n,i=t.ownerDocument;for(let r=t.parentNode;r&&!(r==i.body||e&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:e,y:n}}(t.contentDOM),this.atoms=t.state.facet(vA).map((e=>e(t)));let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Hf.allowMultipleSelections)&&function(t,e){let n=t.state.facet(qC);return n.length?n[0](e):Jk.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=fk(t.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let t=0;t<r.length;t++){let n=r[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=fM(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(e=this.startEvent,n=t,Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))<10))return;var e,n;this.select(this.lastEvent=t);let i=0,r=0,o=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=OA(this.view);t.clientX-c.left<=o+6?i=-UA(o-t.clientX):t.clientX+c.right>=a-6&&(i=UA(t.clientX-a)),t.clientY-c.top<=s+6?r=-UA(s-t.clientY):t.clientY+c.bottom>=l-6&&(r=UA(t.clientY-l)),this.setScrollSpeed(i,r)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n],r=null;if(i.empty){let t=_A(this.atoms,i.from,0);t!=i.from&&(r=ef.cursor(t,-1))}else{let t=_A(this.atoms,i.from,-1),e=_A(this.atoms,i.to,1);t==i.from&&e==i.to||(r=ef.range(i.from==i.anchor?t:e,i.from==i.head?t:e))}r&&(e||(e=t.ranges.slice()),e[n]=r)}return e?ef.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&n.eq(e.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some((t=>t.isUserEvent("input.type")))?this.destroy():this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const tM=Object.create(null),eM=Object.create(null),nM=Jk.ie&&Jk.ie_version<15||Jk.ios&&Jk.webkit_version<604;function iM(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function rM(t,e){e=iM(t.state,JC,e);let n,{state:i}=t,r=1,o=i.toText(e),s=o.lines==i.selection.ranges.length;if(null!=gM&&i.selection.ranges.every((t=>t.empty))&&gM==o.toString()){let t=-1;n=i.changeByRange((n=>{let a=i.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=i.toText((s?o.line(r++).text:e)+i.lineBreak);return{changes:{from:a.from,insert:l},range:ef.cursor(n.from+l.length)}}))}else n=s?i.changeByRange((t=>{let e=o.line(r++);return{changes:{from:t.from,to:t.to,insert:e.text},range:ef.cursor(t.from+e.length)}})):i.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function oM(t,e,n,i){if(1==i)return ef.cursor(e,n);if(2==i)return function(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),o=e-r.from;if(0==r.length)return ef.cursor(e);0==o?n=1:o==r.length&&(n=-1);let s=o,a=o;n<0?s=zd(r.text,o,!1):a=zd(r.text,o);let l=i(r.text.slice(s,a));for(;s>0;){let t=zd(r.text,s,!1);if(i(r.text.slice(t,s))!=l)break;s=t}for(;a<r.length;){let t=zd(r.text,a);if(i(r.text.slice(a,t))!=l)break;a=t}return ef.range(s+r.from,a+r.from)}(t.state,e,n);{let n=OC.find(t.docView,e),i=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:i.from,o=n?n.posAtEnd:i.to;return o<t.state.doc.length&&o==i.to&&o++,ef.range(r,o)}}eM.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},tM.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&0!=t.inputState.tabFocusMode&&(t.inputState.tabFocusMode=Date.now()+2e3),!1),eM.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},eM.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},tM.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(KC))if(n=i(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=lM(t,e),i=fM(e),r=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),r=r.map(t.changes))},get(e,o,s){let a,l=lM(t,e),c=oM(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let e=oM(t,n.pos,n.bias,i),r=Math.min(e.from,c.from),o=Math.max(e.to,c.to);c=r<c.from?ef.range(r,o):ef.range(o,r)}return o?r.replaceRange(r.main.extend(c.from,c.to)):s&&1==i&&r.ranges.length>1&&(a=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ef.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(r,l.pos))?a:s?r.addRange(c):ef.create([c])}}}(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new JA(t,e,n,i)),i&&t.observer.ignore((()=>{Ek(t.contentDOM);let e=t.root.activeElement;e&&!e.contains(t.contentDOM)&&e.blur()}));let r=t.inputState.mouseSelection;if(r)return r.start(e),!1===r.dragging}return!1};let sM=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function aM(t,e,n,i){let r=OC.find(t.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&sM(n,i,s))return-1;let a=r.coordsAt(o,1);return a&&sM(n,i,a)?1:s&&s.bottom>=i?-1:1}function lM(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:aM(t,n,e.clientX,e.clientY)}}const cM=Jk.ie&&Jk.ie_version<=11;let hM=null,uM=0,dM=0;function fM(t){if(!cM)return t.detail;let e=hM,n=dM;return hM=t,dM=Date.now(),uM=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(uM+1)%3:1}function pM(t,e,n,i){if(!(n=iM(t.state,JC,n)))return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=i&&o&&function(t,e){let n=t.state.facet(XC);return n.length?n[0](e):Jk.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:o.from,to:o.to}:null,a={from:r,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}tM.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let t=i.posAtStart,e=t+i.length;(t>=n.to||e<=n.from)&&(n=ef.range(t,e))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",iM(t.state,tA,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1},tM.dragend=t=>(t.inputState.draggedContent=null,!1),tM.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,o=()=>{++r==n.length&&pM(t,e,i.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return pM(t,e,n,!0),!0}return!1},tM.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=nM?null:e.clipboardData;return n?(rM(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),rM(t,n.value)}),50)}(t),!1)};let gM=null;tM.copy=tM.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=function(t){let e=[],n=[],i=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:iM(t,tA,e.join(t.lineBreak)),ranges:n,linewise:i}}(t.state);if(!n&&!r)return!1;gM=r?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=nM?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout((()=>{i.remove(),t.focus()}),50)}(t,n),!1)};const mM=Ef.define();function vM(t,e){let n=[];for(let i of t.facet(UC)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:mM.of(!0)}):null}function bM(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=vM(t.state,e);n?t.dispatch(n):t.update([])}}),10)}eM.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),bM(t)},eM.blur=t=>{t.observer.clearSelectionRange(),bM(t)},eM.compositionstart=eM.compositionupdate=t=>{t.observer.editContext||(null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))},eM.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Jk.chrome&&Jk.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50))},eM.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},tM.beforeinput=(t,e)=>{var n,i;if("insertReplacementText"==e.inputType&&t.observer.editContext){let i=null===(n=e.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),r=e.getTargetRanges();if(i&&r.length){let e=r[0],n=t.posAtDOM(e.startContainer,e.startOffset),o=t.posAtDOM(e.endContainer,e.endOffset);return qA(t,{from:n,to:o,insert:t.state.toText(i)},null),!0}}let r;if(Jk.chrome&&Jk.android&&(r=ZA.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return Jk.ios&&"deleteContentForward"==e.inputType&&t.observer.flushSoon(),Jk.safari&&"insertText"==e.inputType&&t.inputState.composing>=0&&setTimeout((()=>eM.compositionend(t,e)),20),!1};const yM=new Set,wM=["pre-wrap","normal","pre-line","break-spaces"];let OM=!1;function SM(){OM=!1}class xM{constructor(t){this.lineWrapping=t,this.doc=Td.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return wM.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e}refresh(t,e,n,i,r,o){let s=wM.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let t=0;t<o.length;t++){let e=o[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return a}}class kM{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class CM{constructor(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?pC.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof bC?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new CM(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var AM=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(AM||(AM={}));const MM=.001;class EM{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>MM&&(OM=!0),this.height=t)}replace(t,e,n){return EM.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,i){let r=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:h}=i[s],u=r.lineAt(a,AM.ByPosNoHeight,n.setDoc(e),0,0),d=u.to>=l?u:r.lineAt(l,AM.ByPosNoHeight,n,0,0);for(h+=d.to-l,l=d.to;s>0&&u.from<=i[s-1].toA;)a=i[s-1].fromA,c=i[s-1].fromB,s--,a<u.from&&(u=r.lineAt(a,AM.ByPosNoHeight,n,0,0));c+=u.from-a,a=u.from;let f=NM.build(n.setDoc(o),t,c,h);r=PM(r,r.replace(a,l,f))}return r.updateHeight(n,0)}static empty(){return new $M(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,i=0,r=0;for(;;)if(e==n)if(i>2*r){let r=t[e-1];r.break?t.splice(--e,1,r.left,null,r.right):t.splice(--e,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,r-=e.size}}else if(i<r){let n=t[e++];n&&(i+=n.size)}else{let e=t[--n];e&&(r+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new RM(EM.of(t.slice(0,e)),o,EM.of(t.slice(n)))}}function PM(t,e){return t==e?t:(t.constructor!=e.constructor&&(OM=!0),e)}EM.prototype.size=1;class TM extends EM{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,i){return new CM(i,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(t,e,n,i,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,n,i,r))}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class $M extends TM{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,i){return new CM(i,this.length,n,this.height,this.breaks)}replace(t,e,n){let i=n[0];return 1==n.length&&(i instanceof $M||i instanceof DM&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof DM?i=new $M(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):EM.of(n)}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class DM extends EM{constructor(t){super(t,0)}heightMetrics(t,e){let n,i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-i+1,s=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*o);n=e/o,this.length>o+1&&(s=(this.height-e)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:s}}blockAt(t,e,n,i){let{firstLine:r,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(e,i);if(e.lineWrapping){let r=i+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),o=e.doc.lineAt(r),l=s+o.length*a,c=Math.max(n,t-l/2);return new CM(o.from,o.length,c,l,0)}{let i=Math.max(0,Math.min(o-r,Math.floor((t-n)/s))),{from:a,length:l}=e.doc.line(r+i);return new CM(a,l,n+s*i,s,0)}}lineAt(t,e,n,i,r){if(e==AM.ByHeight)return this.blockAt(t,n,i,r);if(e==AM.ByPosNoHeight){let{from:e,to:i}=n.doc.lineAt(t);return new CM(e,i-e,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,r),l=n.doc.lineAt(t),c=s+l.length*a,h=l.number-o,u=i+s*h+a*(l.from-r-h);return new CM(l.from,l.length,Math.max(i,Math.min(u,i+this.height-c)),c,0)}forEachLine(t,e,n,i,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,r);for(let c=t,h=i;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-s;h+=a*n+l*(t-r-n)}let i=a+l*e.length;o(new CM(e.from,e.length,h,i,0)),h+=i,c=e.to+1}}replace(t,e,n){let i=this.length-e;if(i>0){let t=n[n.length-1];t instanceof DM?n[n.length-1]=new DM(t.length+i):n.push(null,new DM(i-1))}if(t>0){let e=n[0];e instanceof DM?n[0]=new DM(t+e.length):n.unshift(new DM(t-1),null)}return EM.of(n)}decomposeLeft(t,e){e.push(new DM(t-1),null)}decomposeRight(t,e){e.push(null,new DM(this.length-t-1))}updateHeight(t,e=0,n=!1,i){let r=e+this.length;if(i&&i.from<=e+this.length&&i.more){let n=[],o=Math.max(e,i.from),s=-1;for(i.from>e&&n.push(new DM(i.from-e-1).updateHeight(t,e));o<=r&&i.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==s?s=r:Math.abs(r-s)>=MM&&(s=-2);let a=new $M(e,r);a.outdated=!1,n.push(a),o+=e+1}o<=r&&n.push(null,new DM(r-o).updateHeight(t,o));let a=EM.of(n);return(s<0||Math.abs(a.height-this.height)>=MM||Math.abs(s-this.heightMetrics(t,e).perLine)>=MM)&&(OM=!0),PM(this,a)}return(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class RM extends EM{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,i){let r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)}lineAt(t,e,n,i,r){let o=i+this.left.height,s=r+this.left.length+this.break,a=e==AM.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==AM.ByPosNoHeight?AM.ByPosNoHeight:AM.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,r).join(l)}forEachLine(t,e,n,i,r,o){let s=i+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,i,r,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{let l=this.lineAt(a,AM.ByPos,n,i,r);t<l.from&&this.left.forEachLine(t,l.from-1,n,i,r,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}}replace(t,e,n){let i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let t of n)r.push(t);if(t>0&&BM(r,o-1),e<this.length){let t=r.length;this.decomposeRight(e,r),BM(r,t)}return EM.of(r)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?EM.of(this.break?[t,null,e]:[t,e]):(this.left=PM(this.left,t),this.right=PM(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,i){let{left:r,right:o}=this,s=e+r.length+this.break,a=null;return i&&i.from<=e+r.length&&i.more?a=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=s+o.length&&i.more?a=o=o.updateHeight(t,s,n,i):o.updateHeight(t,s,n),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function BM(t,e){let n,i;null==t[e]&&(n=t[e-1])instanceof DM&&(i=t[e+1])instanceof DM&&t.splice(e-1,3,new DM(n.length+1+i.length))}class NM{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof $M?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new $M(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=e-t;n.block?this.addBlock(new TM(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new $M(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new DM(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof $M)return t;let e=new $M(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),i.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof $M||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new $M(0,-1));let n=t;for(let t of this.nodes)t instanceof $M&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,i){let r=new NM(n,t);return Kf.spans(e,n,i,r,0),r.finish(n)}}class LM{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&wC(t,e,this.changes,5)}}function jM(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=i.body;)if(1==e.nodeType){let n=e,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();o=Math.max(o,i.left),s=Math.min(s,i.right),a=Math.max(a,i.top),l=Math.min(e==t.parentNode?r.innerHeight:l,i.bottom)}e="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function _M(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class IM{constructor(t,e,n,i){this.from=t,this.to=e,this.size=n,this.displaySize=i}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(t,e){return gC.replace({widget:new zM(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class zM extends fC{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class QM{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=FM,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=MC.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(pA).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new xM(e),this.stateDeco=t.facet(gA).filter((t=>"function"!=typeof t)),this.heightMap=EM.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle.setDoc(t.doc),[new xA(0,0,0,t.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=gC.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let i=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>i>=t&&i<=e))){let{from:e,to:n}=this.lineBlockAt(i);t.push(new HM(e,n))}}return this.viewports=t.sort(((t,e)=>t.from-e.from)),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?FM:new qM(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(XM(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(gA).filter((t=>"function"!=typeof t));let i=t.changedRanges,r=xA.extendWithRanges(i,function(t,e,n){let i=new LM;return Kf.compare(t,e,n,i,0),i.changes}(n,this.stateDeco,t?t.changes:Xd.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);SM(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||OM)&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,t.flags|=this.updateForViewport(),(l||!t.changes.empty||2&t.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(nA)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?MC.RTL:MC.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),s=e.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:t,scaleY:n}=kk(e,s);(t>.005&&Math.abs(this.scaleX-t)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=t,this.scaleY=n,l|=16,o=a=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,u=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==u||(this.paddingTop=h,this.paddingBottom=u,l|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=16);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=Dk(t.scrollDOM);let f=(this.printing?_M:jM)(e,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!function(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}(t.dom))return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=t.scrollDOM.clientHeight,l|=16),a){let e=t.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(e)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=t.docView.measureTextSize();o=n>0&&i.refresh(r,n,s,a,v/s,e),o&&(t.docView.minWidth=0,l|=16)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),SM();for(let n of this.viewports){let r=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(o?EM.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle,[new xA(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new kM(n.from,r))}OM&&(l|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new HM(i.lineAt(o-1e3*n,AM.ByHeight,r,0,0).from,i.lineAt(s+1e3*(1-n),AM.ByHeight,r,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=i.lineAt(t,AM.ByPos,r,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-o,a=new HM(i.lineAt(n-500,AM.ByHeight,r,0,0).from,i.lineAt(n+o+500,AM.ByHeight,r,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new HM(this.heightMap.lineAt(n,AM.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,AM.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,AM.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,AM.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||i<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||r>=s+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let i of t)e.touchesRange(i.from,i.to)||n.push(new IM(e.mapPos(i.from),e.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=MC.LTR&&!n)return[];let s=[],a=(i,o,l,c)=>{if(o-i<r)return;let h=this.state.selection.main,u=[h.from];h.empty||u.push(h.to);for(let t of u)if(t>i&&t<o)return a(i,t-10,l,c),void a(t+10,o,l,c);let d=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-i)<r&&Math.abs(t.to-o)<r&&!u.some((e=>t.from<e&&t.to>e))));if(!d){if(o<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=o&&t.to>=o))){let t=e.moveToLineBoundary(ef.cursor(o),!1,!0).head;t>i&&(o=t)}let t=this.gapSize(l,i,o,c);d=new IM(i,o,t,n||t<2e6?t:2e6)}s.push(d)},l=e=>{if(e.length<o||e.type!=pC.Text)return;let r=function(t,e,n){let i=[],r=t,o=0;return Kf.spans(n,t,e,{span(){},point(t,e){t>r&&(i.push({from:r,to:t}),o+=t-r),r=e}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}(e.from,e.to,this.stateDeco);if(r.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let t,n,o=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let i=WM(r,c),s=((this.visibleBottom-this.visibleTop)/2+o)/e.height;t=i-s,n=i+s}else t=(this.visibleTop-e.top-o)/e.height,n=(this.visibleBottom-e.top+o)/e.height;s=VM(r,t),l=VM(r,n)}else{let n=r.total*this.heightOracle.charWidth,o=i*this.heightOracle.charWidth,a=0;if(n>2e6)for(let n of t)n.from>=e.from&&n.from<e.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let h,u,d=this.pixelViewport.left+a,f=this.pixelViewport.right+a;if(null!=c){let t=WM(r,c),e=((f-d)/2+o)/n;h=t-e,u=t+e}else h=(d-o)/n,u=(f+o)/n;s=VM(r,h),l=VM(r,u)}s>e.from&&a(e.from,s,e,r),l<e.to&&a(l,e.to,e,r)};for(let t of this.viewportLines)Array.isArray(t.type)?t.type.forEach(l):l(t);return s}gapSize(t,e,n,i){let r=WM(i,n)-WM(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(t){IM.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=gC.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Kf.spans(e,this.viewport.from,this.viewport.to,{span(t,e){n.push({from:t,to:e})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let e=0;e<n.length&&!(8&i);e++){let r=this.visibleRanges[e],o=n[e];r.from==o.from&&r.to==o.to||(i|=4,t&&t.mapPos(r.from,-1)==o.from&&t.mapPos(r.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||XM(this.heightMap.lineAt(t,AM.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((e=>e.top<=t&&e.bottom>=t))||XM(this.heightMap.lineAt(this.scaler.fromDOM(t),AM.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return XM(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class HM{constructor(t,e){this.from=t,this.to=e}}function VM({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:r}=e[t],o=r-n;if(i<=o)return n+i;i-=o}}function WM(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}const FM={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class qM{constructor(t,e,n){let i=0,r=0,o=0;this.viewports=n.map((({from:n,to:r})=>{let o=e.lineAt(n,AM.ByPos,t,0,0).top,s=e.lineAt(r,AM.ByPos,t,0,0).bottom;return i+=s-o,{from:n,to:r,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(e.height-i);for(let t of this.viewports)t.domTop=o+(t.top-r)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),r=t.bottom}toDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}}fromDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}}eq(t){return t instanceof qM&&this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every(((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to))}}function XM(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new CM(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map((t=>XM(t,e))):t._content)}const KM=of.define({combine:t=>t.join(" ")}),ZM=of.define({combine:t=>t.indexOf(!0)>-1}),YM=up.newName(),GM=up.newName(),UM=up.newName(),JM={"&light":"."+GM,"&dark":"."+UM};function tE(t,e,n){return new up(e,{finish(e){return/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e}})}const eE=tE("."+YM,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},JM),nE={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},iE=Jk.ie&&Jk.ie_version<=11;class rE{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new Ck,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(Jk.ie&&Jk.ie_version<=11||Jk.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===t.constructor.EDIT_CONTEXT||Jk.chrome&&Jk.chrome_version<126||(this.editContext=new aE(t),t.state.facet(lA)&&(t.contentDOM.editContext=this.editContext.editContext)),iE&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(t){("change"!=t.type&&t.type||t.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(lA)?n.root.activeElement!=this.dom:!gk(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(t)?e||(this.selectionChanged=!1):(Jk.ie&&Jk.ie_version<=11||Jk.android&&Jk.chrome)&&!n.state.selection.main.empty&&i.focusNode&&vk(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=fk(t.root);if(!e)return!1;let n=Jk.safari&&11==t.root.nodeType&&t.root.activeElement==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return sE(t,n)}let n=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?sE(t,n):null}(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let i=gk(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,Ok(n));;)if(i){if(1!=n.nodeType)return!1;let t=n.childNodes[i-1];"false"==t.contentEditable?i--:(n=t,i=Ok(n))}else{if(n==t)return!0;i=bk(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,nE),iE&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),iE&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&Tk(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,i=!1;for(let r of t){let t=this.readMutation(r);t&&(t.typeOver&&(i=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:i}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),i=this.selectionChanged&&gk(this.dom,this.selectionRange);if(t<0&&!i)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new WA(this.view,t,e,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,i=FA(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=oE(e,t.previousSibling||t.target.previousSibling,-1),i=oE(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(lA)!=t.state.facet(lA)&&(t.view.contentDOM.editContext=t.state.facet(lA)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function oE(t,e,n){for(;e;){let i=jk.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function sE(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return vk(s.node,s.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}class aE{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=e=>{let n=t.state.selection.main,{anchor:i,head:r}=n,o=this.toEditorPos(e.updateRangeStart),s=this.toEditorPos(e.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:e.updateRangeStart,editorBase:o,drifted:!1});let a={from:o,to:s,insert:Td.of(e.text.split("\n"))};if(a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),a.from!=a.to||a.insert.length){if((Jk.mac||Jk.android)&&a.from==r-1&&/^\. ?$/.test(e.text)&&"off"==t.contentDOM.getAttribute("autocorrect")&&(a={from:o,to:s,insert:Td.of([e.text.replace("."," ")])}),this.pendingContextChange=a,!t.state.readOnly){let n=this.to-this.from+(a.to-a.from+a.insert.length);qA(t,a,ef.single(this.toEditorPos(e.selectionStart,n),this.toEditorPos(e.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))}else{let i=ef.single(this.toEditorPos(e.selectionStart),this.toEditorPos(e.selectionEnd));i.main.eq(n)||t.dispatch({selection:i,userEvent:"select"})}},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let e=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);e<o;e++){let n=t.coordsForChar(e);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}e.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=e=>{let n=[];for(let t of e.getTextFormats()){let e=t.underlineStyle,i=t.underlineThickness;if("None"!=e&&"None"!=i){let r=this.toEditorPos(t.rangeStart),o=this.toEditorPos(t.rangeEnd);if(r<o){let t=`text-decoration: underline ${"Dashed"==e?"dashed ":"Squiggle"==e?"wavy ":""}${"Thin"==i?1:2}px`;n.push(gC.mark({attributes:{style:t}}).range(r,o))}}}t.dispatch({effects:sA.of(gC.set(n))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:e}=this.composing;this.composing=null,e&&this.reset(t.state)}};for(let t in this.handlers)e.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let e=fk(t.root);e&&e.rangeCount&&this.editContext.updateSelectionBounds(e.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,i=this.pendingContextChange;return t.changes.iterChanges(((r,o,s,a,l)=>{if(n)return;let c=l.length-(o-r);if(i&&o>=i.to){if(i.from==r&&i.to==o&&i.insert.eq(l))return i=this.pendingContextChange=null,e+=c,void(this.to+=c);i=null,this.revertPending(t.state)}if(r+=e,(o+=e)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),l.toString()),this.to+=c}e+=c})),i&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some((t=>!t.isUserEvent("input.type")&&t.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):this.applyEdits(t)&&this.rangeIsValid(t.state)?(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state):(this.pendingContextChange=null,this.reset(t.state)),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),i=this.toContextPos(e.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>3e4)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class lE{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(t=>t.forEach((t=>n(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new QM(t.state||Hf.create(t)),t.scrollTo&&t.scrollTo.is(oA)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(hA).map((t=>new dA(t)));for(let t of this.plugins)t.update(this);this.observer=new rE(this),this.inputState=new XA(this),this.inputState.ensureHandlers(this.plugins),this.docView=new CA(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(e=document.fonts)||void 0===e?void 0:e.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...t){let e=1==t.length&&t[0]instanceof Df?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,i=!1,r=this.state;for(let e of t){if(e.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=e.state}if(this.destroyed)return void(this.viewState.state=r);let o=this.hasFocus,s=0,a=null;t.some((t=>t.annotation(mM)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=vM(r,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(Hf.phrases)!=this.state.facet(Hf.phrases))return this.setState(r);e=kA.create(this,r,t),e.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(h&&(h=h.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;h=new rA(t.empty?t:ef.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(oA)&&(h=t.value.clip(this.state))}this.viewState.update(e,h),this.bidiCache=uE.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(SA)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(KM)!=e.state.facet(KM)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!e.empty)for(let t of this.state.facet(YC))try{t(e)}catch(t){aA(this.state,t,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!FA(this,c)&&l.force&&Tk(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new QM(t),this.plugins=t.facet(hA).map((t=>new dA(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new CA(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(hA),n=t.state.facet(hA);if(e!=n){let i=[];for(let r of n){let n=e.indexOf(r);if(n<0)i.push(new dA(r));else{let e=this.plugins[n];e.mustUpdate=t,i.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(t){aA(this.state,t,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(o<0)if(Dk(n))r=-1,o=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(i);r=t.from,o=t.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((t=>{try{return t.read(this)}catch(t){return aA(this.state,t),hE}})),c=kA.create(this,this.state,[]),h=!1;c.flags|=s,e?e.flags|=s:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let t=0;t<a.length;t++)if(l[t]!=hE)try{let e=a[t];e.write&&e.write(l[t],this)}catch(t){aA(this.state,t)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let t=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(t>1||t<-1){i+=t,n.scrollTop=i/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(YC))t(e)}get themeClasses(){return YM+" "+(this.state.facet(ZM)?UM:GM)+" "+this.state.facet(KM)}updateAttrs(){let t=dE(this,fA,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(lA)?"true":"false",class:"cm-content",style:`${Jk.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),dE(this,pA,e);let n=this.observer.ignore((()=>{let n=uC(this.contentDOM,this.contentAttrs,e),i=uC(this.dom,this.editorAttrs,t);return n||i}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(lE.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(SA);let t=this.state.facet(lE.cspNonce);up.mount(this.root,this.styleModules.concat(eE).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return IA(this,t,jA(this,t,e,n))}moveByGroup(t,e){return IA(this,t,jA(this,t,e,(e=>function(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return t=>{let e=i(t);return r==If.Space&&(r=e),r==e}}(this,t.head,e))))}visualLineSide(t,e){let n=this.bidiSpans(t),i=this.textDirectionAt(t.from),r=n[e?n.length-1:0];return ef.cursor(r.side(e,i)+t.from,r.forward(!e,i)?1:-1)}moveToLineBoundary(t,e,n=!0){return function(t,e,n,i){let r=function(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let t;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;t&&(r.type!=pC.Text||t.type==r.type&&!(n<0?r.from<e:r.to>e))||(t=r)}}return t||i}return i}(t,e.head,e.assoc||-1),o=i&&r.type==pC.Text&&(t.lineWrapping||r.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),i=t.textDirectionAt(r.from),s=t.posAtCoords({x:n==(i==MC.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return ef.cursor(s,n?-1:1)}return ef.cursor(n?r.to:r.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return IA(this,t,function(t,e,n,i){let r=e.head,o=n?1:-1;if(r==(n?t.state.doc.length:0))return ef.cursor(r,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),h=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-e.from))),s=(o<0?e.top:e.bottom)+h}let u=l.left+a,d=null!=i?i:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(d+e)*o,i=NA(t,{x:u,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?i<r:i>r)){let e=t.docView.coordsForChar(i),r=!e||n<e.top?-1:1;return ef.cursor(i,r,void 0,a)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),NA(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),r=this.bidiSpans(i);return Sk(n,r[jC.find(r,t-i.from,-1,e)].dir==MC.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(eA)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>cE)return HC(t.length);let e,n=this.textDirectionAt(t.from);for(let i of this.bidiCache)if(i.from==t.from&&i.dir==n&&(i.fresh||_C(i.isolates,e=yA(this,t))))return i.order;e||(e=yA(this,t));let i=function(t,e,n){if(!t)return[new jC(0,0,e==PC?1:0)];if(e==EC&&!n.length&&!LC.test(t))return HC(t.length);if(n.length)for(;t.length>IC.length;)IC[IC.length]=256;let i=[],r=e==EC?0:1;return QC(t,r,r,n,0,t.length,i),i}(t.text,n,e);return this.bidiCache.push(new uE(t.from,t.to,n,e,!0,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||Jk.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Ek(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return oA.of(new rA("number"==typeof t?ef.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return oA.of(new rA(ef.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){null==t?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof t?this.inputState.tabFocusMode=t?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return uA.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return uA.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=up.newName(),i=[KM.of(n),SA.of(tE(`.${n}`,t))];return e&&e.dark&&i.push(ZM.of(!0)),i}static baseTheme(t){return pf.lowest(SA.of(tE("."+YM,t,JM)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),i=n&&jk.get(n)||jk.get(t);return(null===(e=null==i?void 0:i.rootView)||void 0===e?void 0:e.view)||null}}lE.styleModule=SA,lE.inputHandler=GC,lE.clipboardInputFilter=JC,lE.clipboardOutputFilter=tA,lE.scrollHandler=iA,lE.focusChangeEffect=UC,lE.perLineTextDirection=eA,lE.exceptionSink=ZC,lE.updateListener=YC,lE.editable=lA,lE.mouseSelectionStyle=KC,lE.dragMovesSelection=XC,lE.clickAddsSelectionRange=qC,lE.decorations=gA,lE.outerDecorations=mA,lE.atomicRanges=vA,lE.bidiIsolatedRanges=bA,lE.scrollMargins=wA,lE.darkTheme=ZM,lE.cspNonce=of.define({combine:t=>t.length?t[0]:""}),lE.contentAttributes=pA,lE.editorAttributes=fA,lE.lineWrapping=lE.contentAttributes.of({class:"cm-lineWrapping"}),lE.announce=$f.define();const cE=4096,hE={};class uE{constructor(t,e,n,i,r,o){this.from=t,this.to=e,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],i=t.length?t[t.length-1].dir:MC.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir!=i||e.touchesRange(o.from,o.to)||n.push(new uE(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function dE(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let e=i[r],o="function"==typeof e?e(t):e;o&&lC(o,n)}return n}const fE=Jk.mac?"mac":Jk.windows?"win":Jk.linux?"linux":"key";function pE(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}const gE=pf.default(lE.domEventHandlers({keydown(t,e){return function(t,e,n,i){wE=e;let r=wp(e),o=Vd(Qd(r,0))==r.length&&" "!=r,s="",a=!1,l=!1,c=!1;bE&&bE.view==n&&bE.scope==i&&(s=bE.prefix+" ",GA.indexOf(e.keyCode)<0&&(l=!0,bE=null));let h,u,d=new Set,f=t=>{if(t){for(let e of t.run)if(!d.has(e)&&(d.add(e),e(n)))return t.stopPropagation&&(c=!0),!0;t.preventDefault&&(t.stopPropagation&&(c=!0),l=!0)}return!1},p=t[i];return p&&(f(p[s+pE(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Jk.windows&&e.ctrlKey&&e.altKey)&&(h=pp[e.keyCode])&&h!=r?(f(p[s+pE(h,e,!0)])||e.shiftKey&&(u=gp[e.keyCode])!=r&&u!=h&&f(p[s+pE(u,e,!1)]))&&(a=!0):o&&e.shiftKey&&f(p[s+pE(r,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),l&&(a=!0),a&&c&&e.stopPropagation(),wE=null,a}(function(t){let e=t.facet(mE),n=vE.get(e);return n||vE.set(e,n=function(t,e=fE){let n=Object.create(null),i=Object.create(null),r=(t,e)=>{let n=i[t];if(null==n)i[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},o=(t,i,o,s,a)=>{var l,c;let h=n[t]||(n[t]=Object.create(null)),u=i.split(/ (?!$)/).map((t=>function(t,e){const n=t.split(/-(?!$)/);let i,r,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let t=0;t<n.length-1;++t){const a=n[t];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))i=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==e?s=!0:r=!0}}return i&&(a="Alt-"+a),r&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(t,e)));for(let e=1;e<u.length;e++){let n=u.slice(0,e).join(" ");r(n,!0),h[n]||(h[n]={preventDefault:!0,stopPropagation:!1,run:[e=>{let i=bE={view:e,prefix:n,scope:t};return setTimeout((()=>{bE==i&&(bE=null)}),yE),!0}]})}let d=u.join(" ");r(d,!1);let f=h[d]||(h[d]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=h._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});o&&f.run.push(o),s&&(f.preventDefault=!0),a&&(f.stopPropagation=!0)};for(let i of t){let t=i.scope?i.scope.split(" "):["editor"];if(i.any)for(let e of t){let t=n[e]||(n[e]=Object.create(null));t._any||(t._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:r}=i;for(let e in t)t[e].run.push((t=>r(t,wE)))}let r=i[e]||i.key;if(r)for(let e of t)o(e,r,i.run,i.preventDefault,i.stopPropagation),i.shift&&o(e,"Shift-"+r,i.shift,i.preventDefault,i.stopPropagation)}return n}(e.reduce(((t,e)=>t.concat(e)),[]))),n}(e.state),t,e,"editor")}})),mE=of.define({enables:gE}),vE=new WeakMap;let bE=null;const yE=4e3;let wE=null;const OE="-10000px";class SE{constructor(t,e,n,i){this.facet=e,this.createTooltipView=n,this.removeTooltipView=i,this.input=t.state.facet(e),this.tooltips=this.input.filter((t=>t));let r=null;this.tooltipViews=this.tooltips.map((t=>r=n(t,r)))}update(t,e){var n;let i=t.state.facet(this.facet),r=i.filter((t=>t));if(i===this.input){for(let e of this.tooltipViews)e.update&&e.update(t);return!1}let o=[],s=e?[]:null;for(let n=0;n<r.length;n++){let i=r[n],a=-1;if(i){for(let t=0;t<this.tooltips.length;t++){let e=this.tooltips[t];e&&e.create==i.create&&(a=t)}if(a<0)o[n]=this.createTooltipView(i,n?o[n-1]:null),s&&(s[n]=!!i.above);else{let i=o[n]=this.tooltipViews[a];s&&(s[n]=e[a]),i.update&&i.update(t)}}}for(let t of this.tooltipViews)o.indexOf(t)<0&&(this.removeTooltipView(t),null===(n=t.destroy)||void 0===n||n.call(t));return e&&(s.forEach(((t,n)=>e[n]=t)),e.length=s.length),this.input=i,this.tooltips=r,this.tooltipViews=o,!0}}function xE(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const kE=of.define({combine:t=>{var e,n,i;return{position:Jk.ios?"absolute":(null===(e=t.find((t=>t.position)))||void 0===e?void 0:e.position)||"fixed",parent:(null===(n=t.find((t=>t.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=t.find((t=>t.tooltipSpace)))||void 0===i?void 0:i.tooltipSpace)||xE}}}),CE=new WeakMap,AE=uA.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(kE);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((()=>this.measureSoon())):null,this.manager=new SE(t,TE,((t,e)=>this.createTooltip(t,e)),(t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()})),this.above=this.manager.tooltips.map((t=>!!t.above)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(kE);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let t of this.manager.tooltipViews)t.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let t of this.manager.tooltipViews)this.container.appendChild(t.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",n.dom.appendChild(t)}return n.dom.style.position=this.position,n.dom.style.top=OE,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let e of this.manager.tooltipViews)e.dom.remove(),null===(t=e.destroy)||void 0===t||t.call(e);this.parent&&this.container.remove(),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:t}=this.manager.tooltipViews[0];if(Jk.gecko)n=t.offsetParent!=this.container.ownerDocument.body;else if(t.style.top==OE&&"0px"==t.style.left){let e=t.getBoundingClientRect();n=Math.abs(e.top+1e4)>1||Math.abs(e.left)>1}}if(n||"absolute"==this.position)if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(t=n.width/this.parent.offsetWidth,e=n.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=OA(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map(((t,e)=>{let n=this.manager.tooltipViews[e];return n.getCoords?n.getCoords(t.pos):this.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((({dom:t})=>t.getBoundingClientRect())),space:this.view.state.facet(kE).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let t of this.manager.tooltipViews)t.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:o}=t,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:h}=c,u=t.pos[a],d=t.size[a];if(!u||!1!==l.clip&&(u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1)){h.style.top=OE;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=d.right-d.left,m=null!==(e=CE.get(c))&&void 0!==e?e:d.bottom-d.top,v=c.offset||PE,b=this.view.textDirection==MC.LTR,y=d.width>i.right-i.left?b?i.left:i.right-d.width:b?Math.max(i.left,Math.min(u.left-(f?14:0)+v.x,i.right-g)):Math.min(Math.max(i.left,u.left-g+(f?14:0)-v.x),i.right-g),w=this.above[a];!l.strictSide&&(w?u.top-m-p-v.y<i.top:u.bottom+m+p+v.y>i.bottom)&&w==i.bottom-u.bottom>u.top-i.top&&(w=this.above[a]=!w);let O=(w?u.top-i.top:i.bottom-u.bottom)-p;if(O<m&&!1!==c.resize){if(O<this.view.defaultLineHeight){h.style.top=OE;continue}CE.set(c,m),h.style.height=(m=O)/o+"px"}else h.style.height&&(h.style.height="");let S=w?u.top-m-p-v.y:u.bottom+p+v.y,x=y+g;if(!0!==c.overlap)for(let t of s)t.left<x&&t.right>y&&t.top<S+m&&t.bottom>S&&(S=w?t.top-m-2-p:t.bottom+p+2);if("absolute"==this.position?(h.style.top=(S-t.parent.top)/o+"px",ME(h,(y-t.parent.left)/r)):(h.style.top=S/o+"px",ME(h,y/r)),f){let t=u.left+(b?v.x:-v.x)-(y+14-7);f.style.left=t/r+"px"}!0!==c.overlap&&s.push({left:y,top:S,right:x,bottom:S+m}),h.classList.toggle("cm-tooltip-above",w),h.classList.toggle("cm-tooltip-below",!w),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=OE}},{eventObservers:{scroll(){this.maybeMeasure()}}});function ME(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const EE=lE.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),PE={x:0,y:0},TE=of.define({enables:[AE,EE]});function $E(t,e){let n=t.plugin(AE);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}class DE extends Wf{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}DE.prototype.elementClass="",DE.prototype.toDOM=void 0,DE.prototype.mapMode=Fd.TrackBefore,DE.prototype.startSide=DE.prototype.endSide=-1,DE.prototype.point=!0;class RE{constructor(t,e,n,i){this.state=t,this.pos=e,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let e=Vb(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),i=e.text.slice(n-e.from,this.pos-e.from),r=i.search(_E(t,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}}get aborted(){return null==this.abortListeners}addEventListener(t,e,n){"abort"==t&&this.abortListeners&&(this.abortListeners.push(e),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function BE(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function NE(t){let e=t.map((t=>"string"==typeof t?{label:t}:t)),[n,i]=e.every((t=>/^\w+$/.test(t.label)))?[/\w*$/,/\w+$/]:function(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let t=1;t<i.length;t++)n[i[t]]=!0}let i=BE(e)+BE(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}(e);return t=>{let r=t.matchBefore(i);return r||t.explicit?{from:r?r.from:t.pos,options:e,validFor:n}:null}}class LE{constructor(t,e,n,i){this.completion=t,this.source=e,this.match=n,this.score=i}}function jE(t){return t.selection.main.from}function _E(t,e){var n;let{source:i}=t,r=e&&"^"!=i[0],o="$"!=i[i.length-1];return r||o?new RegExp(`${r?"^":""}(?:${i})${o?"$":""}`,null!==(n=t.flags)&&void 0!==n?n:t.ignoreCase?"i":""):t}const IE=Ef.define(),zE=new WeakMap;function QE(t){if(!Array.isArray(t))return t;let e=zE.get(t);return e||zE.set(t,e=NE(t)),e}const HE=$f.define(),VE=$f.define();class WE{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let e=0;e<t.length;){let n=Qd(t,e),i=Vd(n);this.chars.push(n);let r=t.slice(e,e+i),o=r.toUpperCase();this.folded.push(Qd(o==r?r.toLowerCase():o,0)),e+=i}this.astral=t.length!=this.chars.length}ret(t,e){return this.score=t,this.matched=e,this}match(t){if(0==this.pattern.length)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:e,folded:n,any:i,precise:r,byWord:o}=this;if(1==e.length){let i=Qd(t,0),r=Vd(i),o=r==t.length?0:-100;if(i==e[0]);else{if(i!=n[0])return null;o+=-200}return this.ret(o,[0,r])}let s=t.indexOf(this.pattern);if(0==s)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=e.length,l=0;if(s<0){for(let r=0,o=Math.min(t.length,200);r<o&&l<a;){let o=Qd(t,r);o!=e[l]&&o!=n[l]||(i[l++]=r),r+=Vd(o)}if(l<a)return null}let c=0,h=0,u=!1,d=0,f=-1,p=-1,g=/[a-z]/.test(t),m=!0;for(let i=0,l=Math.min(t.length,200),v=0;i<l&&h<a;){let l=Qd(t,i);s<0&&(c<a&&l==e[c]&&(r[c++]=i),d<a&&(l==e[d]||l==n[d]?(0==d&&(f=i),p=i+1,d++):d=0));let b,y=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(b=Hd(l))!=b.toLowerCase()?1:b!=b.toUpperCase()?2:0;(!i||1==y&&g||0==v&&0!=y)&&(e[h]==l||n[h]==l&&(u=!0)?o[h++]=i:o.length&&(m=!1)),v=y,i+=Vd(l)}return h==a&&0==o[0]&&m?this.result((u?-200:0)-100,o,t):d==a&&0==f?this.ret(-200-t.length+(p==t.length?0:-100),[0,p]):s>-1?this.ret(-700-t.length,[s,s+this.pattern.length]):d==a?this.ret(-900-t.length,[f,p]):h==a?this.result((u?-200:0)-100-700+(m?0:-1100),o,t):2==e.length?null:this.result((i[0]?-700:0)-200-1100,i,t)}result(t,e,n){let i=[],r=0;for(let t of e){let e=t+(this.astral?Vd(Qd(n,t)):1);r&&i[r-1]==t?i[r-1]=e:(i[r++]=t,i[r++]=e)}return this.ret(t-n.length,i)}}class FE{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let e=t.slice(0,this.pattern.length),n=e==this.pattern?0:e.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,e.length],this.score=n+(t.length==this.pattern.length?0:-100),this)}}const qE=of.define({combine(t){return Vf(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:KE,filterStrict:!1,compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>n=>XE(t(n),e(n)),optionClass:(t,e)=>n=>XE(t(n),e(n)),addToOptions:(t,e)=>t.concat(e),filterStrict:(t,e)=>t||e})}});function XE(t,e){return t?e?t+" "+e:t:e}function KE(t,e,n,i,r,o){let s,a,l=t.textDirection==MC.RTL,c=l,h=!1,u="top",d=e.left-r.left,f=r.right-e.right,p=i.right-i.left,g=i.bottom-i.top;if(c&&d<Math.min(p,f)?c=!1:!c&&f<Math.min(p,d)&&(c=!0),p<=(c?d:f))s=Math.max(r.top,Math.min(n.top,r.bottom-g))-e.top,a=Math.min(400,c?d:f);else{h=!0,a=Math.min(400,(l?e.right:r.right-e.left)-30);let t=r.bottom-e.bottom;t>=g||t>e.top?s=n.bottom-e.top:(u="bottom",s=e.bottom-n.top)}return{style:`${u}: ${s/((e.bottom-e.top)/o.offsetHeight)}px; max-width: ${a/((e.right-e.left)/o.offsetWidth)}px`,class:"cm-completionInfo-"+(h?l?"left-narrow":"right-narrow":c?"left":"right")}}function ZE(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let t=Math.floor(e/n);return{from:t*n,to:(t+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class YE{constructor(t,e,n){this.view=t,this.stateField=e,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:t=>this.placeInfo(t),key:this},this.space=null,this.currentClass="";let i=t.state.field(e),{options:r,selected:o}=i.open,s=t.state.facet(qE);this.optionContent=function(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(t){let e=document.createElement("div");return e.classList.add("cm-completionIcon"),t.type&&e.classList.add(...t.type.split(/\s+/g).map((t=>"cm-completionIcon-"+t))),e.setAttribute("aria-hidden","true"),e},position:20}),e.push({render(t,e,n,i){let r=document.createElement("span");r.className="cm-completionLabel";let o=t.displayLabel||t.label,s=0;for(let t=0;t<i.length;){let e=i[t++],n=i[t++];e>s&&r.appendChild(document.createTextNode(o.slice(s,e)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(o.slice(e,n))),a.className="cm-completionMatchedText",s=n}return s<o.length&&r.appendChild(document.createTextNode(o.slice(s))),r},position:50},{render(t){if(!t.detail)return null;let e=document.createElement("span");return e.className="cm-completionDetail",e.textContent=t.detail,e},position:80}),e.sort(((t,e)=>t.position-e.position)).map((t=>t.render))}(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=ZE(r.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",(n=>{let{options:i}=t.state.field(e).open;for(let e,r=n.target;r&&r!=this.dom;r=r.parentNode)if("LI"==r.nodeName&&(e=/-(\d+)$/.exec(r.id))&&+e[1]<i.length)return this.applyCompletion(t,i[+e[1]]),void n.preventDefault()})),this.dom.addEventListener("focusout",(e=>{let n=t.state.field(this.stateField,!1);n&&n.tooltip&&t.state.facet(qE).closeOnBlur&&e.relatedTarget!=t.contentDOM&&t.dispatch({effects:VE.of(null)})})),this.showOptions(r,i.id)}mount(){this.updateSel()}showOptions(t,e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}update(t){var e;let n=t.state.field(this.stateField),i=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),n!=i){let{options:r,selected:o,disabled:s}=n.open;i.open&&i.open.options==r||(this.range=ZE(r.length,o,t.state.facet(qE).maxRenderedOptions),this.showOptions(r,n.id)),this.updateSel(),s!=(null===(e=i.open)||void 0===e?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let t of this.currentClass.split(" "))t&&this.dom.classList.remove(t);for(let t of e.split(" "))t&&this.dom.classList.add(t);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=ZE(e.options.length,e.selected,this.view.state.facet(qE).maxRenderedOptions),this.showOptions(e.options,t.id)),this.updateSelectedOption(e.selected)){this.destroyInfo();let{completion:n}=e.options[e.selected],{info:i}=n;if(!i)return;let r="string"==typeof i?document.createTextNode(i):i(n);if(!r)return;"then"in r?r.then((e=>{e&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(e,n)})).catch((t=>aA(this.view.state,t,"completion info"))):this.addInfoPane(r,n)}}addInfoPane(t,e){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=t.nodeType)n.appendChild(t),this.infoDestroy=null;else{let{dom:e,destroy:i}=t;n.appendChild(e),this.infoDestroy=i||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)"LI"==n.nodeName&&n.id?i==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):i--;return e&&function(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=t.getBoundingClientRect(),r=this.space;if(!r){let t=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:t.clientWidth,bottom:t.clientHeight}}return i.top>Math.min(r.bottom,e.bottom)-10||i.bottom<Math.max(r.top,e.top)+10?null:this.view.state.facet(qE).positionInfo(this.view,e,i,n,r,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,n){const i=document.createElement("ul");i.id=e,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",(t=>{t.target==i&&t.preventDefault()}));let r=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:a}=t[o],{section:l}=s;if(l){let t="string"==typeof l?l:l.name;t!=r&&(o>n.from||0==n.from)&&(r=t,"string"!=typeof l&&l.header?i.appendChild(l.header(l)):i.appendChild(document.createElement("completion-section")).textContent=t)}const c=i.appendChild(document.createElement("li"));c.id=e+"-"+o,c.setAttribute("role","option");let h=this.optionClass(s);h&&(c.className=h);for(let t of this.optionContent){let e=t(s,this.view.state,this.view,a);e&&c.appendChild(e)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function GE(t,e){return n=>new YE(n,t,e)}function UE(t){return 100*(t.boost||0)+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}class JE{constructor(t,e,n,i,r,o){this.options=t,this.attrs=e,this.tooltip=n,this.timestamp=i,this.selected=r,this.disabled=o}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new JE(this.options,iP(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,n,i,r,o){if(i&&!o&&t.some((t=>t.isPending)))return i.setDisabled();let s=function(t,e){let n=[],i=null,r=t=>{n.push(t);let{section:e}=t.completion;if(e){i||(i=[]);let t="string"==typeof e?e:e.name;i.some((e=>e.name==t))||i.push("string"==typeof e?{name:t}:e)}},o=e.facet(qE);for(let i of t)if(i.hasResult()){let t=i.result.getMatch;if(!1===i.result.filter)for(let e of i.result.options)r(new LE(e,i.source,t?t(e):[],1e9-n.length));else{let n,s=e.sliceDoc(i.from,i.to),a=o.filterStrict?new FE(s):new WE(s);for(let e of i.result.options)if(n=a.match(e.label)){let o=e.displayLabel?t?t(e,n.matched):[]:n.matched;r(new LE(e,i.source,o,n.score+(e.boost||0)))}}}if(i){let t=Object.create(null),e=0,r=(t,e)=>{var n,i;return(null!==(n=t.rank)&&void 0!==n?n:1e9)-(null!==(i=e.rank)&&void 0!==i?i:1e9)||(t.name<e.name?-1:1)};for(let n of i.sort(r))e-=1e5,t[n.name]=e;for(let e of n){let{section:n}=e.completion;n&&(e.score+=t["string"==typeof n?n:n.name])}}let s=[],a=null,l=o.compareCompletions;for(let t of n.sort(((t,e)=>e.score-t.score||l(t.completion,e.completion)))){let e=t.completion;!a||a.label!=e.label||a.detail!=e.detail||null!=a.type&&null!=e.type&&a.type!=e.type||a.apply!=e.apply||a.boost!=e.boost?s.push(t):UE(t.completion)>UE(a)&&(s[s.length-1]=t),a=t.completion}return s}(t,e);if(!s.length)return i&&t.some((t=>t.isPending))?i.setDisabled():null;let a=e.facet(qE).selectOnOpen?0:-1;if(i&&i.selected!=a&&-1!=i.selected){let t=i.options[i.selected].completion;for(let e=0;e<s.length;e++)if(s[e].completion==t){a=e;break}}return new JE(s,iP(n,a),{pos:t.reduce(((t,e)=>e.hasResult()?Math.min(t,e.from):t),1e8),create:dP,above:r.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(t){return new JE(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new JE(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class tP{constructor(t,e,n){this.active=t,this.id=e,this.open=n}static start(){return new tP(rP,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(t){let{state:e}=t,n=e.facet(qE),i=(n.override||e.languageDataAt("autocomplete",jE(e)).map(QE)).map((e=>(this.active.find((t=>t.source==e))||new sP(e,this.active.some((t=>0!=t.state))?1:0)).update(t,n)));i.length==this.active.length&&i.every(((t,e)=>t==this.active[e]))&&(i=this.active);let r=this.open,o=t.effects.some((t=>t.is(lP)));r&&t.docChanged&&(r=r.map(t.changes)),t.selection||i.some((e=>e.hasResult()&&t.changes.touchesRange(e.from,e.to)))||!function(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,o=i==e.length;if(r||o)return r==o;if(t[n++].result!=e[i++].result)return!1}}(i,this.active)||o?r=JE.build(i,e,this.id,r,n,o):r&&r.disabled&&!i.some((t=>t.isPending))&&(r=null),!r&&i.every((t=>!t.isPending))&&i.some((t=>t.hasResult()))&&(i=i.map((t=>t.hasResult()?new sP(t.source,0):t)));for(let e of t.effects)e.is(cP)&&(r=r&&r.setSelected(e.value,this.id));return i==this.active&&r==this.open?this:new tP(i,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?eP:nP}}const eP={"aria-autocomplete":"list"},nP={};function iP(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const rP=[];function oP(t,e){if(t.isUserEvent("input.complete")){let n=t.annotation(IE);if(n&&e.activateOnCompletion(n))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class sP{constructor(t,e,n=!1){this.source=t,this.state=e,this.explicit=n}hasResult(){return!1}get isPending(){return 1==this.state}update(t,e){let n=oP(t,e),i=this;(8&n||16&n&&this.touches(t))&&(i=new sP(i.source,0)),4&n&&0==i.state&&(i=new sP(this.source,1)),i=i.updateFor(t,n);for(let e of t.effects)if(e.is(HE))i=new sP(i.source,1,e.value);else if(e.is(VE))i=new sP(i.source,0);else if(e.is(lP))for(let t of e.value)t.source==i.source&&(i=t);return i}updateFor(t,e){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(jE(t.state))}}class aP extends sP{constructor(t,e,n,i,r,o){super(t,3,e),this.limit=n,this.result=i,this.from=r,this.to=o}hasResult(){return!0}updateFor(t,e){var n;if(!(3&e))return this.map(t.changes);let i=this.result;i.map&&!t.changes.empty&&(i=i.map(i,t.changes));let r=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),s=jE(t.state);if(s>o||!i||2&e&&(jE(t.startState)==this.from||s<this.limit))return new sP(this.source,4&e?1:0);let a=t.changes.mapPos(this.limit);return function(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return"function"==typeof t?t(r,n,i,e):_E(t,!0).test(r)}(i.validFor,t.state,r,o)?new aP(this.source,this.explicit,a,i,r,o):i.update&&(i=i.update(i,r,o,new RE(t.state,s,!1)))?new aP(this.source,this.explicit,a,i,i.from,null!==(n=i.to)&&void 0!==n?n:jE(t.state)):new sP(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new aP(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new sP(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}}const lP=$f.define({map(t,e){return t.map((t=>t.map(e)))}}),cP=$f.define(),hP=df.define({create(){return tP.start()},update(t,e){return t.update(e)},provide:t=>[TE.from(t,(t=>t.tooltip)),lE.contentAttributes.from(t,(t=>t.attrs))]});function uP(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(hP).active.find((t=>t.source==e.source));return i instanceof aP&&("string"==typeof n?t.dispatch(Object.assign(Object.assign({},function(t,e,n,i){let{main:r}=t.selection,o=n-r.from,s=i-r.from;return Object.assign(Object.assign({},t.changeByRange((a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+o,a.from+s)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+o,to:i==r.from?a.to:a.from+s,insert:l},range:ef.cursor(a.from+o+l.length)}}))),{scrollIntoView:!0,userEvent:"input.complete"})}(t.state,n,i.from,i.to)),{annotations:IE.of(e.completion)})):n(t,e.completion,i.from,i.to),!0)}const dP=GE(hP,uP);function fP(t,e="option"){return n=>{let i=n.state.field(hP,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(qE).interactionDelay)return!1;let r,o=1;"page"==e&&(r=$E(n,i.open.tooltip))&&(o=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,a=i.open.selected>-1?i.open.selected+o*(t?1:-1):t?0:s-1;return a<0?a="page"==e?0:s-1:a>=s&&(a="page"==e?s-1:0),n.dispatch({effects:cP.of(a)}),!0}}const pP=t=>!!t.state.field(hP,!1)&&(t.dispatch({effects:HE.of(!0)}),!0);class gP{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const mP=uA.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(hP).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(hP),n=t.state.facet(qE);if(!t.selectionSet&&!t.docChanged&&t.startState.field(hP)==e)return;let i=t.transactions.some((t=>{let e=oP(t,n);return 8&e||(t.selection||t.docChanged)&&!(3&e)}));for(let e=0;e<this.running.length;e++){let n=this.running[e];if(i||n.context.abortOnDocChange&&t.docChanged||n.updates.length+t.transactions.length>50&&Date.now()-n.time>1e3){for(let t of n.context.abortListeners)try{t()}catch(t){aA(this.view.state,t)}n.context.abortListeners=null,this.running.splice(e--,1)}else n.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some((t=>t.effects.some((t=>t.is(HE)))))&&(this.pendingStart=!0);let r=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some((t=>t.isPending&&!this.running.some((e=>e.active.source==t.source))))?setTimeout((()=>this.startUpdate()),r):-1,0!=this.composing)for(let e of t.transactions)e.isUserEvent("input.type")?this.composing=2:2==this.composing&&e.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(hP);for(let t of e.active)t.isPending&&!this.running.some((e=>e.active.source==t.source))&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(qE).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=jE(e),i=new RE(e,n,t.explicit,this.view),r=new gP(t,i);this.running.push(r),Promise.resolve(t.source(i)).then((t=>{r.context.aborted||(r.done=t||null,this.scheduleAccept())}),(t=>{this.view.dispatch({effects:VE.of(null)}),aA(this.view.state,t)}))}scheduleAccept(){this.running.every((t=>void 0!==t.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(qE).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(qE),i=this.view.state.field(hP);for(let r=0;r<this.running.length;r++){let o=this.running[r];if(void 0===o.done)continue;if(this.running.splice(r--,1),o.done){let i=jE(o.updates.length?o.updates[0].startState:this.view.state),r=Math.min(i,o.done.from+(o.active.explicit?0:1)),s=new aP(o.active.source,o.active.explicit,r,o.done,o.done.from,null!==(t=o.done.to)&&void 0!==t?t:i);for(let t of o.updates)s=s.update(t,n);if(s.hasResult()){e.push(s);continue}}let s=i.active.find((t=>t.source==o.active.source));if(s&&s.isPending)if(null==o.done){let t=new sP(o.active.source,0);for(let e of o.updates)t=t.update(e,n);t.isPending||e.push(t)}else this.startQuery(s)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:lP.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(hP,!1);if(e&&e.tooltip&&this.view.state.facet(qE).closeOnBlur){let n=e.open&&$E(this.view,e.open.tooltip);n&&n.dom.contains(t.relatedTarget)||setTimeout((()=>this.view.dispatch({effects:VE.of(null)})),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:HE.of(!1)})),20),this.composing=0}}}),vP="object"==typeof navigator&&/Win/.test(navigator.platform),bP=pf.highest(lE.domEventHandlers({keydown(t,e){let n=e.state.field(hP,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&(!vP||!t.altKey)||t.metaKey)return!1;let i=n.open.options[n.open.selected],r=n.active.find((t=>t.source==i.source)),o=i.completion.commitCharacters||r.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&uP(e,i),!1}})),yP=lE.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class wP{constructor(t,e,n,i){this.field=t,this.line=e,this.from=n,this.to=i}}class OP{constructor(t,e,n){this.field=t,this.from=e,this.to=n}map(t){let e=t.mapPos(this.from,-1,Fd.TrackDel),n=t.mapPos(this.to,1,Fd.TrackDel);return null==e||null==n?null:new OP(this.field,e,n)}}class SP{constructor(t,e){this.lines=t,this.fieldPositions=e}instantiate(t,e){let n=[],i=[e],r=t.doc.lineAt(e),o=/^\s*/.exec(r.text)[0];for(let r of this.lines){if(n.length){let n=o,s=/^\t*/.exec(r)[0].length;for(let e=0;e<s;e++)n+=t.facet(ey);i.push(e+n.length-s),r=n+r.slice(s)}n.push(r),e+=r.length+1}let s=this.fieldPositions.map((t=>new OP(t.field,i[t.line]+t.from,i[t.line]+t.to)));return{text:n,ranges:s}}static parse(t){let e,n=[],i=[],r=[];for(let o of t.split(/\r\n?|\n/)){for(;e=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let t=e[1]?+e[1]:null,s=e[2]||e[3]||"",a=-1,l=s.replace(/\\[{}]/g,(t=>t[1]));for(let e=0;e<n.length;e++)(null!=t?n[e].seq==t:l&&n[e].name==l)&&(a=e);if(a<0){let e=0;for(;e<n.length&&(null==t||null!=n[e].seq&&n[e].seq<t);)e++;n.splice(e,0,{seq:t,name:l}),a=e;for(let t of r)t.field>=a&&t.field++}r.push(new wP(a,i.length,e.index,e.index+l.length)),o=o.slice(0,e.index)+s+o.slice(e.index+e[0].length)}o=o.replace(/\\([{}])/g,((t,e,n)=>{for(let t of r)t.line==i.length&&t.from>n&&(t.from--,t.to--);return e})),i.push(o)}return new SP(i,r)}}let xP=gC.widget({widget:new class extends fC{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),kP=gC.mark({class:"cm-snippetField"});class CP{constructor(t,e){this.ranges=t,this.active=e,this.deco=gC.set(t.map((t=>(t.from==t.to?xP:kP).range(t.from,t.to))))}map(t){let e=[];for(let n of this.ranges){let i=n.map(t);if(!i)return null;e.push(i)}return new CP(e,this.active)}selectionInsideField(t){return t.ranges.every((t=>this.ranges.some((e=>e.field==this.active&&e.from<=t.from&&e.to>=t.to))))}}const AP=$f.define({map(t,e){return t&&t.map(e)}}),MP=$f.define(),EP=df.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(AP))return n.value;if(n.is(MP)&&t)return new CP(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>lE.decorations.from(t,(t=>t?t.deco:gC.none))});function PP(t,e){return ef.create(t.filter((t=>t.field==e)).map((t=>ef.range(t.from,t.to))))}function TP(t){let e=SP.parse(t);return(t,n,i,r)=>{let{text:o,ranges:s}=e.instantiate(t.state,i),{main:a}=t.state.selection,l={changes:{from:i,to:r==a.from?a.to:r,insert:Td.of(o)},scrollIntoView:!0,annotations:n?[IE.of(n),Df.userEvent.of("input.complete")]:void 0};if(s.length&&(l.selection=PP(s,0)),s.some((t=>t.field>0))){let e=new CP(s,0),n=l.effects=[AP.of(e)];void 0===t.state.field(EP,!1)&&n.push($f.appendConfig.of([EP,BP,LP,yP]))}t.dispatch(t.state.update(l))}}function $P(t){return({state:e,dispatch:n})=>{let i=e.field(EP,!1);if(!i||t<0&&0==i.active)return!1;let r=i.active+t,o=t>0&&!i.ranges.some((e=>e.field==r+t));return n(e.update({selection:PP(i.ranges,r),effects:AP.of(o?null:new CP(i.ranges,r)),scrollIntoView:!0})),!0}}const DP=[{key:"Tab",run:$P(1),shift:$P(-1)},{key:"Escape",run:({state:t,dispatch:e})=>!!t.field(EP,!1)&&(e(t.update({effects:AP.of(null)})),!0)}],RP=of.define({combine(t){return t.length?t[0]:DP}}),BP=pf.highest(mE.compute([RP],(t=>t.facet(RP))));function NP(t,e){return Object.assign(Object.assign({},e),{apply:TP(t)})}const LP=lE.domEventHandlers({mousedown(t,e){let n,i=e.state.field(EP,!1);if(!i||null==(n=e.posAtCoords({x:t.clientX,y:t.clientY})))return!1;let r=i.ranges.find((t=>t.from<=n&&t.to>=n));return!(!r||r.field==i.active||(e.dispatch({selection:PP(i.ranges,r.field),effects:AP.of(i.ranges.some((t=>t.field>r.field))?new CP(i.ranges,r.field):null),scrollIntoView:!0}),0))}}),jP={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},_P=$f.define({map(t,e){let n=e.mapPos(t,-1,Fd.TrackAfter);return null==n?void 0:n}}),IP=new class extends Wf{};IP.startSide=1,IP.endSide=-1;const zP=df.define({create(){return Kf.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:t=>t>=n.from&&t<=n.to})}for(let n of e.effects)n.is(_P)&&(t=t.update({add:[IP.range(n.value,n.value+1)]}));return t}}),QP="()[]{}<>«»»«［］｛｝";function HP(t){for(let e=0;e<16;e+=2)if(QP.charCodeAt(e)==t)return QP.charAt(e+1);return Hd(t<128?t:t+1)}function VP(t,e){return t.languageDataAt("closeBrackets",e)[0]||jP}const WP="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),FP=lE.inputHandler.of(((t,e,n,i)=>{if((WP?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let r=t.state.selection.main;if(i.length>2||2==i.length&&1==Vd(Qd(i,0))||e!=r.from||n!=r.to)return!1;let o=function(t,e){let n=VP(t,t.selection.main.head),i=n.brackets||jP.brackets;for(let r of i){let o=HP(Qd(r,0));if(e==r)return o==r?GP(t,r,i.indexOf(r+r+r)>-1,n):ZP(t,r,o,n.before||jP.before);if(e==o&&XP(t,t.selection.main.from))return YP(t,0,o)}return null}(t.state,i);return!!o&&(t.dispatch(o),!0)})),qP=[{key:"Backspace",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=VP(t,t.selection.main.head).brackets||jP.brackets,i=null,r=t.changeByRange((e=>{if(e.empty){let i=function(t,e){let n=t.sliceString(e-2,e);return Vd(Qd(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let r of n)if(r==i&&KP(t.doc,e.head)==HP(Qd(r,0)))return{changes:{from:e.head-r.length,to:e.head+r.length},range:ef.cursor(e.head-r.length)}}return{range:i=e}}));return i||e(t.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!i}}];function XP(t,e){let n=!1;return t.field(zP).between(0,t.doc.length,(t=>{t==e&&(n=!0)})),n}function KP(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Vd(Qd(n,0)))}function ZP(t,e,n,i){let r=null,o=t.changeByRange((o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:_P.of(o.to+e.length),range:ef.range(o.anchor+e.length,o.head+e.length)};let s=KP(t.doc,o.head);return!s||/\s/.test(s)||i.indexOf(s)>-1?{changes:{insert:e+n,from:o.head},effects:_P.of(o.head+e.length),range:ef.cursor(o.head+e.length)}:{range:r=o}}));return r?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function YP(t,e,n){let i=null,r=t.changeByRange((e=>e.empty&&KP(t.doc,e.head)==n?{changes:{from:e.head,to:e.head+n.length,insert:n},range:ef.cursor(e.head+n.length)}:i={range:e}));return i?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function GP(t,e,n,i){let r=i.stringPrefixes||jP.stringPrefixes,o=null,s=t.changeByRange((i=>{if(!i.empty)return{changes:[{insert:e,from:i.from},{insert:e,from:i.to}],effects:_P.of(i.to+e.length),range:ef.range(i.anchor+e.length,i.head+e.length)};let s,a=i.head,l=KP(t.doc,a);if(l==e){if(UP(t,a))return{changes:{insert:e+e,from:a},effects:_P.of(a+e.length),range:ef.cursor(a+e.length)};if(XP(t,a)){let i=n&&t.sliceDoc(a,a+3*e.length)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+i.length,insert:i},range:ef.cursor(a+i.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(s=JP(t,a-2*e.length,r))>-1&&UP(t,s))return{changes:{insert:e+e+e+e,from:a},effects:_P.of(a+e.length),range:ef.cursor(a+e.length)};if(t.charCategorizer(a)(l)!=If.Word&&JP(t,a,r)>-1&&!function(t,e,n,i){let r=Vb(t).resolveInner(e,-1),o=i.reduce(((t,e)=>Math.max(t,e.length)),0);for(let s=0;s<5;s++){let s=t.sliceDoc(r.from,Math.min(r.to,r.from+n.length+o)),a=s.indexOf(n);if(!a||a>-1&&i.indexOf(s.slice(0,a))>-1){let e=r.firstChild;for(;e&&e.from==r.from&&e.to-e.from>n.length+a;){if(t.sliceDoc(e.to-n.length,e.to)==n)return!1;e=e.firstChild}return!0}let l=r.to==e&&r.parent;if(!l)break;r=l}return!1}(t,a,e,r))return{changes:{insert:e+e,from:a},effects:_P.of(a+e.length),range:ef.cursor(a+e.length)}}return{range:o=i}}));return o?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function UP(t,e){let n=Vb(t).resolveInner(e+1);return n.parent&&n.from==e}function JP(t,e,n){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=If.Word)return e;for(let r of n){let n=e-r.length;if(t.sliceDoc(n,e)==r&&i(t.sliceDoc(n-1,n))!=If.Word)return n}return-1}const tT=[{key:"Ctrl-Space",run:pP},{mac:"Alt-`",run:pP},{key:"Escape",run:t=>{let e=t.state.field(hP,!1);return!(!e||!e.active.some((t=>0!=t.state))||(t.dispatch({effects:VE.of(null)}),0))}},{key:"ArrowDown",run:fP(!0)},{key:"ArrowUp",run:fP(!1)},{key:"PageDown",run:fP(!0,"page")},{key:"PageUp",run:fP(!1,"page")},{key:"Enter",run:t=>{let e=t.state.field(hP,!1);return!(t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(qE).interactionDelay)&&uP(t,e.open.options[e.open.selected])}}],eT=pf.highest(mE.computeN([qE],(t=>t.facet(qE).defaultKeymap?[tT]:[]))),nT=[NP("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),NP("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),NP("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),NP("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),NP("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),NP("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),NP("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),NP("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),NP("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),NP('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),NP('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],iT=nT.concat([NP("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),NP("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),NP("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),rT=new ru,oT=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function sT(t){return(e,n)=>{let i=e.node.getChild("VariableDefinition");return i&&n(i,t),!0}}const aT=["FunctionDeclaration"],lT={FunctionDeclaration:sT("function"),ClassDeclaration:sT("class"),ClassExpression:()=>!0,EnumDeclaration:sT("constant"),TypeAliasDeclaration:sT("type"),NamespaceDeclaration:sT("namespace"),VariableDefinition(t,e){t.matchContext(aT)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function cT(t,e){let n=rT.get(e);if(n)return n;let i=[],r=!0;function o(e,n){let r=t.sliceString(e.from,e.to);i.push({label:r,type:n})}return e.cursor(Ih.IncludeAnonymous).iterate((e=>{if(r)r=!1;else if(e.name){let t=lT[e.name];if(t&&t(e,o)||oT.has(e.name))return!1}else if(e.to-e.from>8192){for(let n of cT(t,e.node))i.push(n);return!1}})),rT.set(e,i),i}const hT=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,uT=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function dT(t){let e=Vb(t.state).resolveInner(t.pos,-1);if(uT.indexOf(e.name)>-1)return null;let n="VariableName"==e.name||e.to-e.from<20&&hT.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let i=[];for(let n=e;n;n=n.parent)oT.has(n.name)&&(i=i.concat(cT(t.state.doc,n)));return{options:i,from:n?e.from:t.pos,validFor:hT}}const fT=Hb.define({name:"javascript",parser:bd.configure({props:[sy.add({IfStatement:py({except:/^\s*({|else\b)/}),TryStatement:py({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:t=>t.baseIndent,SwitchBody:t=>{let e=t.textAfter,n=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return t.baseIndent+(n?0:i?1:2)*t.unit},Block:dy({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":py({except:/^{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag"(t){return t.column(t.node.from)+t.unit}}),my.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":function(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null},BlockComment(t){return{from:t.from+2,to:t.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),pT={test:t=>/^JSX/.test(t.name),facet:_b({commentTokens:{block:{open:"{/*",close:"*/}"}}})},gT=fT.configure({dialect:"ts"},"typescript"),mT=fT.configure({dialect:"jsx",props:[Ib.add((t=>t.isTop?[pT]:void 0))]}),vT=fT.configure({dialect:"jsx ts",props:[Ib.add((t=>t.isTop?[pT]:void 0))]},"typescript");let bT=t=>({label:t,type:"keyword"});const yT="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(bT),wT=yT.concat(["declare","implements","private","protected","public"].map(bT));function OT(t={}){let e=t.jsx?t.typescript?vT:mT:t.typescript?gT:fT,n=t.typescript?iT.concat(wT):nT.concat(yT);return new Jb(e,[fT.data.of({autocomplete:(i=uT,r=NE(n),t=>{for(let e=Vb(t.state).resolveInner(t.pos,-1);e;e=e.parent){if(i.indexOf(e.name)>-1)return null;if(e.type.isTop)break}return r(t)})}),fT.data.of({autocomplete:dT}),t.jsx?kT:[]]);var i,r}function ST(t,e,n=t.length){for(let i=null==e?void 0:e.firstChild;i;i=i.nextSibling)if("JSXIdentifier"==i.name||"JSXBuiltin"==i.name||"JSXNamespacedName"==i.name||"JSXMemberExpression"==i.name)return t.sliceString(i.from,Math.min(i.to,n));return""}const xT="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),kT=ak.inputHandler.of(((t,e,n,i,r)=>{if((xT?t.composing:t.compositionStarted)||t.state.readOnly||e!=n||">"!=i&&"/"!=i||!fT.isActiveAt(t.state,e,-1))return!1;let o=r(),{state:s}=o,a=s.changeByRange((t=>{var e;let n,{head:r}=t,o=Vb(s).resolveInner(r-1,-1);if("JSXStartTag"==o.name&&(o=o.parent),s.doc.sliceString(r-1,r)!=i||"JSXAttributeValue"==o.name&&o.to>r);else{if(">"==i&&"JSXFragmentTag"==o.name)return{range:t,changes:{from:r,insert:"</>"}};if("/"==i&&"JSXStartCloseTag"==o.name){let t=o.parent,i=t.parent;if(i&&t.from==r-2&&((n=ST(s.doc,i.firstChild,r))||"JSXFragmentTag"==(null===(e=i.firstChild)||void 0===e?void 0:e.name))){let t=`${n}>`;return{range:ef.cursor(r+t.length,-1),changes:{from:r,insert:t}}}}else if(">"==i){let e=function(t){for(;;){if("JSXOpenTag"==t.name||"JSXSelfClosingTag"==t.name||"JSXFragmentTag"==t.name)return t;if("JSXEscape"==t.name||!t.parent)return null;t=t.parent}}(o);if(e&&"JSXOpenTag"==e.name&&!/^\/?>|^<\//.test(s.doc.sliceString(r,r+2))&&(n=ST(s.doc,e,r)))return{range:t,changes:{from:r,insert:`</${n}>`}}}}return{range:t}}));return!a.changes.empty&&(t.dispatch([o,s.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}));function CT(){return CT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},CT.apply(null,arguments)}function AT(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function MT(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function ET(t,e){if(!e.anchorNode)return!1;try{return MT(t,e.anchorNode)}catch(t){return!1}}function PT(t){return 3==t.nodeType?HT(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function TT(t,e,n,i){return!!n&&(RT(t,e,n,i,-1)||RT(t,e,n,i,1))}function $T(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function DT(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function RT(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:BT(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=$T(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(r<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=r<0?BT(t):0}}}function BT(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function NT(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function LT(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function jT(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}class _T{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?BT(e):0),n,Math.min(t.focusOffset,n?BT(n):0))}set(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i}}let IT,zT=null;function QT(t){if(t.setActive)return t.setActive();if(zT)return t.focus(zT);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==zT?{get preventScroll(){return zT={preventScroll:!0},!0}}:void 0),!zT){zT=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function HT(t,e,n=e){let i=IT||(IT=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function VT(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function WT(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function FT(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function qT(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=BT(n)}else{if(!n.parentNode||DT(n))return null;i=$T(n),n=n.parentNode}}}function XT(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||DT(n))return null;i=$T(n)+1,n=n.parentNode}}}class KT{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new KT(t.parentNode,$T(t),e)}static after(t,e){return new KT(t.parentNode,$T(t)+1,e)}}const ZT=[];class YT{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,i=this.dom,r=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let t=YT.get(n);(!t||!t.parent&&t.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(t,e),o.flags&=-8}if(n=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&n!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=GT(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&e&&e.node==i&&(e.written=!0);n;)n=GT(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let i=0==BT(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==i&&e.firstChild!=e.lastChild&&(i=t==e.firstChild?-1:1),t=e}n=i<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!YT.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let i=this.children[t];if(i.dom==n)return e;e+=i.length+i.breakAfter}}domBoundsAround(t,e,n=0){let i=-1,r=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],h=l+n.length;if(l<t&&h>e)return n.domBoundsAround(t,e,l);if(h>=t&&-1==i&&(i=a,r=l),l>e&&n.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+n.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=ZT){this.markDirty();for(let i=t;i<e;i++){let t=this.children[i];t.parent==this&&n.indexOf(t)<0&&t.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new UT(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,i,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function GT(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}YT.prototype.breakAfter=0;class UT{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function JT(t,e,n,i,r,o,s,a,l){let{children:c}=t,h=c.length?c[e]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(e==i&&h&&!s&&!d&&o.length<2&&h.merge(n,r,o.length?u:null,0==n,a,l))){if(i<c.length){let t=c[i];t&&(r<t.length||t.breakAfter&&(null==u?void 0:u.breakAfter))?(e==i&&(t=t.split(r),r=0),!d&&u&&t.merge(0,r,u,!0,0,l)?o[o.length-1]=t:((r||t.children.length&&!t.children[0].length)&&t.merge(0,r,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(u?u.breakAfter=1:s=1),i++}for(h&&(h.breakAfter=s,n>0&&(!s&&o.length&&h.merge(n,h.length,o[0],!1,a,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,a,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function t$(t,e,n,i,r,o){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:h}=s.findPos(e,-1),u=e-n;for(let t of i)u+=t.length;t.length+=u,JT(t,c,h,a,l,i,0,r,o)}let e$="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},n$="undefined"!=typeof document?document:{documentElement:{style:{}}};const i$=/Edge\/(\d+)/.exec(e$.userAgent),r$=/MSIE \d/.test(e$.userAgent),o$=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e$.userAgent),s$=!!(r$||o$||i$),a$=!s$&&/gecko\/(\d+)/i.test(e$.userAgent),l$=!s$&&/Chrome\/(\d+)/.exec(e$.userAgent),c$="webkitFontSmoothing"in n$.documentElement.style,h$=!s$&&/Apple Computer/.test(e$.vendor),u$=h$&&(/Mobile\/\w+/.test(e$.userAgent)||e$.maxTouchPoints>2);var d$={mac:u$||/Mac/.test(e$.platform),windows:/Win/.test(e$.platform),linux:/Linux|X11/.test(e$.platform),ie:s$,ie_version:r$?n$.documentMode||6:o$?+o$[1]:i$?+i$[1]:0,gecko:a$,gecko_version:a$?+(/Firefox\/(\d+)/.exec(e$.userAgent)||[0,0])[1]:0,chrome:!!l$,chrome_version:l$?+l$[1]:0,ios:u$,android:/Android\b/.test(e$.userAgent),webkit:c$,safari:h$,webkit_version:c$?+(/\bAppleWebKit\/(\d+)/.exec(e$.userAgent)||[0,0])[1]:0,tabSize:null!=n$.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class f$ extends YT{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof f$)||this.length-(e-t)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),0))}split(t){let e=new f$(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new KT(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;0==e&&n<0||e==i&&n>=0?d$.chrome||d$.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let a=HT(t,r,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return d$.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l),s?NT(l,s<0):l||null}(this.dom,t,e)}}class p$ extends YT{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(WT(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof p$&&n.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0)||(t$(this,t,e,n?n.children.slice():[],r-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>t&&e.push(n<t?o.split(t-n):o),i<0&&n>=t&&(i=r),n=s,r++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new p$(this.mark,e,o)}domAtPos(t){return v$(this,t)}coordsAt(t,e){return y$(this,t,e)}}class g$ extends YT{static create(t,e,n){return new g$(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=g$.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof g$&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t instanceof g$&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return Td.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Td.empty}domAtPos(t){return(this.length?0==t:this.side>0)?KT.before(this.dom):KT.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:t>0;for(let e=o?i.length-1:0;r=i[e],!(t>0?0==e:e==i.length-1||r.top<r.bottom);e+=o?-1:1);return NT(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class m$ extends YT{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof m$&&t.side==this.side}split(){return new m$(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?KT.before(this.dom):KT.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Td.empty}get isHidden(){return!0}}function v$(t,e){let n=t.dom,{children:i}=t,r=0;for(let t=0;r<i.length;r++){let o=i[r],s=t+o.length;if(!(s==t&&o.getSide()<=0)){if(e>t&&e<s&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=r;t>0;t--){let e=i[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=r;t<i.length;t++){let e=i[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new KT(n,0)}function b$(t,e,n){let i,{children:r}=t;n>0&&e instanceof p$&&r.length&&(i=r[r.length-1])instanceof p$&&i.mark.eq(e.mark)?b$(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function y$(t,e,n){let i=null,r=-1,o=null,s=-1;!function t(e,a){for(let l=0,c=0;l<e.children.length&&c<=a;l++){let h=e.children[l],u=c+h.length;u>=a&&(h.children.length?t(h,a-c):(!o||o.isHidden&&n>0)&&(u>a||c==u&&h.getSide()>0)?(o=h,s=a-c):(c<a||c==u&&h.getSide()<0&&!h.isHidden)&&(i=h,r=a-c)),c=u}}(t,e);let a=(n<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?r:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=PT(e);return n[n.length-1]||null}(t)}function w$(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}f$.prototype.children=g$.prototype.children=m$.prototype.children=ZT;const O$=Object.create(null);function S$(t,e,n){if(t==e)return!0;t||(t=O$),e||(e=O$);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(-1==r.indexOf(o)||t[o]!==e[o]))return!1;return!0}function x$(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,"style"==r?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,"style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function k$(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class C${eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var A$=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(A$||(A$={}));class M$ extends Wf{constructor(t,e,n,i){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new E$(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new T$(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,i=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:r,end:o}=$$(t,i);e=(r?i?-3e8:-1:5e8)-1,n=1+(o?i?2e8:1:-6e8)}return new T$(t,e,n,i,t.widget||null,!0)}static line(t){return new P$(t)}static set(t,e=!1){return Kf.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}M$.none=Kf.empty;class E$ extends M${constructor(t){let{start:e,end:n}=$$(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof E$&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&S$(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}E$.prototype.point=!1;class P$ extends M${constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof P$&&this.spec.class==t.spec.class&&S$(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}P$.prototype.mapMode=Fd.TrackBefore,P$.prototype.point=!0;class T$ extends M${constructor(t,e,n,i,r,o){super(e,n,r,t),this.block=i,this.isReplace=o,this.mapMode=i?e<=0?Fd.TrackBefore:Fd.TrackAfter:Fd.TrackDel}get type(){return this.startSide!=this.endSide?A$.WidgetRange:this.startSide<=0?A$.WidgetBefore:A$.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof T$&&((e=this.widget)==(n=t.widget)||!!(e&&n&&e.compare(n)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,n}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function $$(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!=n?n:e,end:null!=i?i:e}}function D$(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}T$.prototype.point=!0;class R$ extends YT{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,i,r,o){if(n){if(!(n instanceof R$))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),t$(this,t,e,n?n.children.slice():[],r,o),!0}split(t){let e=new R$;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:i}=this.childPos(t);i&&(e.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){S$(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){b$(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=w$(e,this.attrs||{})),n&&(this.attrs=w$({class:n},this.attrs||{}))}domAtPos(t){return v$(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?4&this.flags&&(WT(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(x$(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let i=this.dom.lastChild;for(;i&&YT.get(i)instanceof p$;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=YT.get(i))||void 0===n?void 0:n.isEditable)||d$.ios&&this.children.some((t=>t instanceof f$))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof f$)||/[^ -~]/.test(n.text))return null;let i=PT(n.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=y$(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let i=(e-t.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(t){return t instanceof R$&&0==this.children.length&&0==t.children.length&&S$(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,i=0;n<t.children.length;n++){let r=t.children[n],o=i+r.length;if(o>=e){if(r instanceof R$)return r;if(o>e)break}i=o+r.breakAfter}return null}}class B$ extends YT{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof B$&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?KT.before(this.dom):KT.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new B$(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return ZT}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Td.empty}domBoundsAround(){return null}become(t){return t instanceof B$&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)||(this.widget instanceof N$?null:NT(this.dom.getBoundingClientRect(),this.length?0==t:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class N$ extends C${constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class L${constructor(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof B$&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new R$),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(j$(new m$(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof B$||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(j$(new f$(this.text.slice(this.textOff,this.textOff+i)),e),n),this.atCursorPos=!0,this.textOff+=i,t-=i,n=0}}span(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)}point(t,e,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof T$){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof T$)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new B$(n.widget||_$.block,s,n));else{let o=g$.create(n.widget||_$.inline,s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&r<=i.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||r>i.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(c.append(j$(new m$(1),i),r),r=i.length+Math.max(0,r-i.length)),c.append(j$(o,i),r),this.atCursorPos=l,this.pendingBuffer=l?t<e||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,n,i,r){let o=new L$(t,e,n,r);return o.openEnd=Kf.spans(i,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function j$(t,e){for(let n of e)t=new p$(n,[t],t.length);return t}class _$ extends C${constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}_$.inline=new _$("span"),_$.block=new _$("div");var I$=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(I$||(I$={}));const z$=I$.LTR,Q$=I$.RTL;function H$(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const V$=H$("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),W$=H$("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),F$=Object.create(null),q$=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);F$[e]=n,F$[n]=-e}function X$(t){return t<=247?V$[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?W$[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const K$=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Z${get dir(){return this.level%2?Q$:z$}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,i){let r=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<e:s.to>e:t[r].level>s.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function Y$(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Y$(i.inner,r.inner))return!1}return!0}const G$=[];function U$(t,e,n,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let e=!0,h=!1;if(c==o.length||l<o[c].from){let t=G$[l];t!=a&&(e=!1,h=16==t)}let u=e||1!=a?null:[],d=e?i:i+1,f=l;t:for(;;)if(c<o.length&&f==o[c].from){if(h)break t;let p=o[c];if(!e)for(let t=p.to,e=c+1;;){if(t==n)break t;if(!(e<o.length&&o[e].from==t)){if(G$[t]==a)break t;break}t=o[e++].to}c++,u?u.push(p):(p.from>l&&s.push(new Z$(l,p.from,d)),J$(t,p.direction==z$!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.to),f=p.to}else{if(f==n||(e?G$[f]!=a:G$[f]==a))break;f++}u?U$(t,l,f,i+1,r,u,s):l<f&&s.push(new Z$(l,f,d)),l=f}else for(let l=n,c=o.length;l>e;){let n=!0,h=!1;if(!c||l>o[c-1].to){let t=G$[l-1];t!=a&&(n=!1,h=16==t)}let u=n||1!=a?null:[],d=n?i:i+1,f=l;t:for(;;)if(c&&f==o[c-1].to){if(h)break t;let p=o[--c];if(!n)for(let t=p.from,n=c;;){if(t==e)break t;if(!n||o[n-1].to!=t){if(G$[t-1]==a)break t;break}t=o[--n].from}u?u.push(p):(p.to<l&&s.push(new Z$(p.to,l,d)),J$(t,p.direction==z$!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.from),f=p.from}else{if(f==e||(n?G$[f-1]!=a:G$[f-1]==a))break;f--}u?U$(t,f,l,i+1,r,u,s):f<l&&s.push(new Z$(f,l,d)),l=f}}function J$(t,e,n,i,r,o,s){let a=e%2?2:1;!function(t,e,n,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:n,l=o?256:r;for(let e=s,n=l,i=l;e<a;e++){let r=X$(t.charCodeAt(e));512==r?r=n:8==r&&4==i&&(r=16),G$[e]=4==r?2:r,7&r&&(i=r),n=r}for(let t=s,e=l,i=l;t<a;t++){let r=G$[t];if(128==r)t<a-1&&e==G$[t+1]&&24&e?r=G$[t]=e:G$[t]=256;else if(64==r){let r=t+1;for(;r<a&&64==G$[r];)r++;let o=t&&8==e||r<n&&8==G$[r]?1==i?1:8:256;for(let e=t;e<r;e++)G$[e]=o;t=r-1}else 8==r&&1==i&&(G$[t]=1);e=r,7&r&&(i=r)}}}(t,r,o,i,a),function(t,e,n,i,r){let o=1==r?2:1;for(let s=0,a=0,l=0;s<=i.length;s++){let c=s?i[s-1].to:e,h=s<i.length?i[s].from:n;for(let e,n,i,s=c;s<h;s++)if(n=F$[e=t.charCodeAt(s)])if(n<0){for(let t=a-3;t>=0;t-=3)if(q$[t+1]==-n){let e=q$[t+2],n=2&e?r:4&e?1&e?o:r:0;n&&(G$[s]=G$[q$[t]]=n),a=t;break}}else{if(189==q$.length)break;q$[a++]=s,q$[a++]=e,q$[a++]=l}else if(2==(i=G$[s])||1==i){let t=i==r;l=t?0:1;for(let e=a-3;e>=0;e-=3){let n=q$[e+2];if(2&n)break;if(t)q$[e+2]|=2;else{if(4&n)break;q$[e+2]|=4}}}}}(t,r,o,i,a),function(t,e,n,i){for(let r=0,o=i;r<=n.length;r++){let s=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=s;l<a;){let s=G$[l];if(256==s){let s=l+1;for(;;)if(s==a){if(r==n.length)break;s=n[r++].to,a=r<n.length?n[r].from:e}else{if(256!=G$[s])break;s++}let c=1==o,h=c==(1==(s<e?G$[s]:i))?c?1:2:i;for(let e=s,i=r,o=i?n[i-1].to:t;e>l;)e==o&&(e=n[--i].from,o=i?n[i-1].to:t),G$[--e]=h;l=s}else o=s,l++}}}(r,o,i,a),U$(t,r,o,e,n,i,s)}function tD(t){return[new Z$(0,t,0)]}let eD="";function nD(t,e,n,i,r){var o;let s=i.head-t.from,a=Z$.find(e,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc),l=e[a],c=l.side(r,n);if(s==c){let t=a+=r?1:-1;if(t<0||t>=e.length)return null;l=e[a=t],s=l.side(!r,n),c=l.side(r,n)}let h=zd(t.text,s,l.forward(r,n));(h<l.from||h>l.to)&&(h=c),eD=t.text.slice(Math.min(s,h),Math.max(s,h));let u=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return u&&h==c&&u.level+(r?0:1)<l.level?ef.cursor(u.side(!r,n)+t.from,u.forward(r,n)?1:-1,u.level):ef.cursor(h+t.from,l.forward(r,n)?-1:1,l.level)}function iD(t,e,n){for(let i=e;i<n;i++){let e=X$(t.charCodeAt(i));if(1==e)return z$;if(2==e||4==e)return Q$}return z$}const rD=of.define(),oD=of.define(),sD=of.define(),aD=of.define(),lD=of.define(),cD=of.define(),hD=of.define(),uD=of.define(),dD=of.define(),fD=of.define({combine:t=>t.some((t=>t))}),pD=of.define({combine:t=>t.some((t=>t))}),gD=of.define();class mD{constructor(t,e="nearest",n="nearest",i=5,r=5,o=!1){this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new mD(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new mD(ef.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const vD=$f.define({map:(t,e)=>t.map(e)}),bD=$f.define();function yD(t,e,n){let i=t.facet(aD);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const wD=of.define({combine:t=>!t.length||t[0]});let OD=0;const SD=of.define();class xD{constructor(t,e,n,i,r){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(t,e){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=e||{};return new xD(OD++,t,n,i,(t=>{let e=[SD.of(t)];return o&&e.push(MD.of((e=>{let n=e.plugin(t);return n?o(n):M$.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return xD.define((e=>new t(e)),e)}}class kD{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(yD(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){yD(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){yD(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const CD=of.define(),AD=of.define(),MD=of.define(),ED=of.define(),PD=of.define(),TD=of.define();function $D(t,e){let n=t.state.facet(TD);if(!n.length)return n;let i=n.map((e=>e instanceof Function?e(t):e)),r=[];return Kf.spans(i,e.from,e.to,{point(){},span(t,n,i,o){let s=t-e.from,a=n-e.from,l=r;for(let t=i.length-1;t>=0;t--,o--){let n,r=i[t].spec.bidiIsolate;if(null==r&&(r=iD(e.text,s,a)),o>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==r)n.to=a,l=n.inner;else{let t={from:s,to:a,direction:r,inner:[]};l.push(t),l=t.inner}}}}),r}const DD=of.define();function RD(t){let e=0,n=0,i=0,r=0;for(let o of t.state.facet(DD)){let s=o(t);s&&(null!=s.left&&(e=Math.max(e,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(i=Math.max(i,s.top)),null!=s.bottom&&(r=Math.max(r,s.bottom)))}return{left:e,right:n,top:i,bottom:r}}const BD=of.define();class ND{constructor(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}join(t){return new ND(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let i=0,r=0,o=0,s=0;;i++){let a=i==t.length?null:t[i],l=o-s,c=a?a.fromB:1e9;for(;r<e.length&&e[r]<c;){let t=e[r],i=e[r+1],o=Math.max(s,t),a=Math.min(c,i);if(o<=a&&new ND(o+l,a+l,o,a).addToSet(n),i>c)break;r+=2}if(!a)return n;new ND(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class LD{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Xd.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let i=[];this.changes.iterChangedRanges(((t,e,n,r)=>i.push(new ND(t,e,n,r)))),this.changedRanges=i}static create(t,e,n){return new LD(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class jD extends YT{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=M$.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new R$],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ND(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?i=this.domChanged.newSel.head:function(t,e){let n=!1;return e&&t.iterChangedRanges(((t,i)=>{t<e.to&&i>e.from&&(n=!0)})),n}(t.changes,this.hasComposition)||t.selectionSet||(i=t.state.selection.main.head));let r=i>-1?function(t,e,n){let i=_D(t,n);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new ND(l.mapPos(o),l.mapPos(s),o,s),h=[];for(let e=r.parentNode;;e=e.parentNode){let n=YT.get(e);if(n instanceof p$)h.push({node:e,deco:n.mark});else{if(n instanceof R$||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:r,marks:h,line:e};if(e==t.contentDOM)return null;h.push({node:e,deco:new E$({inclusive:!0,attributes:k$(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:i}=this.hasComposition;n=new ND(e,i,t.changes.mapPos(e,-1),t.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(d$.ie||d$.chrome)&&!r&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=function(t,e,n){let i=new ID;return Kf.compare(t,e,n,i),i.changes}(this.decorations,this.updateDeco(),t.changes);return n=ND.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,r),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=d$.chrome||d$.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=-8,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof B$&&t.widget instanceof N$&&r.push(t.dom);i.updateGaps(r)}updateChildren(t,e,n){let i=n?n.range.addToSet(t.slice()):t,r=this.childCursor(e);for(let t=i.length-1;;t--){let e=t>=0?i[t]:null;if(!e)break;let o,s,a,l,{fromA:c,toA:h,fromB:u,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>u){let t=L$.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=L$.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);s=t.breakAtStart,a=t.openStart,l=e.openEnd;let i=this.compositionView(n);e.breakAtStart?i.breakAfter=1:e.content.length&&i.merge(i.length,i.length,e.content[0],!1,e.openStart,0)&&(i.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&i.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),o=t.content.concat(i).concat(e.content)}else({content:o,breakAtStart:s,openStart:a,openEnd:l}=L$.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(h,1),{i:g,off:m}=r.findPos(c,-1);JT(this,g,m,f,p,o,s,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let t of e.effects)t.is(bD)&&(this.editContextFormatting=t.value)}compositionView(t){let e=new f$(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new p$(n,[e],e.length);let n=new R$;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=YT.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),i=this.children[n.i];e(t.line,i);for(let r=t.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],e(r>=0?t.marks[r].node:t.text,i)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet(wD)||this.dom.tabIndex>-1)&&ET(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||e||r))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(d$.gecko&&s.empty&&!this.hasComposition&&1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(t,a.node.childNodes[a.offset]||null))),a=l=new KT(t,0),o=!0}var c;let h=this.view.observer.selectionRange;!o&&h.focusNode&&(TT(a.node,a.offset,h.anchorNode,h.anchorOffset)&&TT(l.node,l.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,s))||(this.view.observer.ignore((()=>{d$.android&&d$.chrome&&this.dom.contains(h.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=AT(this.view.root);if(t)if(s.empty){if(d$.gecko){let t=(e=a.node,i=a.offset,1!=e.nodeType?0:(i&&"false"==e.childNodes[i-1].contentEditable?1:0)|(i<e.childNodes.length&&"false"==e.childNodes[i].contentEditable?2:0));if(t&&3!=t){let e=(1==t?qT:XT)(a.node,a.offset);e&&(a=new KT(e.node,e.offset))}}t.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(a.node,a.offset);try{t.extend(l.node,l.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),e.setEnd(l.node,l.offset),e.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(e)}var e,i;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new KT(h.anchorNode,h.anchorOffset),this.impreciseHead=l.precise?null:new KT(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&TT(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=AT(t.root),{anchorNode:i,anchorOffset:r}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=R$.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let h=t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=e.from&&n.collapse(i,r)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let i=t.offset;!e&&i<n.childNodes.length;i++){let t=YT.get(n.childNodes[i]);t instanceof R$&&(e=t.domAtPos(0))}for(let i=t.offset-1;!e&&i>=0;i--){let t=YT.get(n.childNodes[i]);t instanceof R$&&(e=t.domAtPos(t.length))}return e?new KT(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=YT.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof R$)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=r-s.breakAfter,l=a-s.length;if(a<t)break;if(l<=t&&(l<t||s.covers(-1))&&(a>t||s.covers(1))&&(!n||s instanceof R$&&!(n instanceof R$&&e>=0)))n=s,i=l;else if(n&&l==t&&a==t&&s instanceof B$&&Math.abs(e)<2){if(s.deco.startSide<0)break;o&&(n=null)}r=l}return n?n.coordsAt(t-i,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),i=this.children[e];if(!(i instanceof R$))return null;for(;i.children.length;){let{i:t,off:e}=i.childPos(n,1);for(;;t++){if(t==i.children.length)return null;if((i=i.children[t]).length)break}n=e}if(!(i instanceof f$))return null;let r=zd(i.text,n);if(r==n)return null;let o=HT(i.dom,n,r).getClientRects();for(let t=0;t<o.length;t++){let e=o[t];if(t==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:i}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==I$.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],h=t+c.length;if(h>i)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),o){let e=c.dom.lastChild,i=e?PT(e):[];if(i.length){let e=i[i.length-1],o=a?e.right-n.left:n.right-e.left;o>s&&(s=o,this.minWidth=r,this.minWidthFrom=t,this.minWidthTo=h)}}}t=h+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?I$.RTL:I$.LTR}measureTextSize(){for(let t of this.children)if(t instanceof R$){let e=t.measureTextSize();if(e)return e}let t,e,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=PT(i.firstChild)[0];t=i.getBoundingClientRect().height,e=r?r.width/27:7,n=r?r.height:t,i.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new UT(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,i=0;;i++){let r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=(e.lineBlockAt(o).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(M$.replace({widget:new N$(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return M$.set(t)}updateDeco(){let t=1,e=this.view.state.facet(MD).map((e=>(this.dynamicDecorationMap[t++]="function"==typeof e)?e(this.view):e)),n=!1,i=this.view.state.facet(ED).map(((t,e)=>{let i="function"==typeof t;return i&&(n=!0),i?t(this.view):t}));for(i.length&&(this.dynamicDecorationMap[t++]=n,e.push(Kf.join(i))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}for(let e of this.view.state.facet(gD))try{if(e(this.view,t.range,t))return!0}catch(t){yD(this.view.state,t,"scroll handler")}let e,{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});let r=RD(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(t,e,n,i,r,o,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let h=t,u=!1;h&&!u;)if(1==h.nodeType){let t,d=h==l.body,f=1,p=1;if(d)t=LT(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let e=h.getBoundingClientRect();({scaleX:f,scaleY:p}=jT(h,e)),t={left:e.left,right:e.left+h.clientWidth*f,top:e.top,bottom:e.top+h.clientHeight*p}}let g=0,m=0;if("nearest"==r)e.top<t.top?(m=e.top-(t.top+s),n>0&&e.bottom>t.bottom+m&&(m=e.bottom-t.bottom+s)):e.bottom>t.bottom&&(m=e.bottom-t.bottom+s,n<0&&e.top-m<t.top&&(m=e.top-(t.top+s)));else{let i=e.bottom-e.top,o=t.bottom-t.top;m=("center"==r&&i<=o?e.top+i/2-o/2:"start"==r||"center"==r&&n<0?e.top-s:e.bottom-o+s)-t.top}if("nearest"==i?e.left<t.left?(g=e.left-(t.left+o),n>0&&e.right>t.right+g&&(g=e.right-t.right+o)):e.right>t.right&&(g=e.right-t.right+o,n<0&&e.left<t.left+g&&(g=e.left-(t.left+o))):g=("center"==i?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==i==a?e.left-o:e.right-(t.right-t.left)+o)-t.left,g||m)if(d)c.scrollBy(g,m);else{let t=0,n=0;if(m){let t=h.scrollTop;h.scrollTop+=m/p,n=(h.scrollTop-t)*p}if(g){let e=h.scrollLeft;h.scrollLeft+=g/f,t=(h.scrollLeft-e)*f}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(i="nearest"),n&&Math.abs(n-m)<1&&(r="nearest")}if(d)break;(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)&&(e={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)}),h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,s),-s),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==I$.LTR)}}function _D(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=qT(n.focusNode,n.focusOffset),r=XT(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let e=YT.get(r.node);if(!e||e instanceof f$&&e.text!=r.node.nodeValue)o=r;else if(t.docView.lastCompositionAfterCursor){let t=YT.get(i.node);!t||t instanceof f$&&t.text!=i.node.nodeValue||(o=r)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let ID=class{constructor(){this.changes=[]}compareRange(t,e){D$(t,e,this.changes)}comparePoint(t,e){D$(t,e,this.changes)}boundChange(t){D$(t,t,this.changes)}};function zD(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function QD(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function HD(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function VD(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function WD(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function FD(t,e,n){let i,r,o,s,a,l,c,h,u=!1;for(let d=t.firstChild;d;d=d.nextSibling){let t=PT(d);for(let f=0;f<t.length;f++){let p=t[f];r&&HD(r,p)&&(p=VD(WD(p,r.bottom),r.top));let g=zD(e,p),m=QD(n,p);if(0==g&&0==m)return 3==d.nodeType?qD(d,e,n):FD(d,e,n);if(!i||s>m||s==m&&o>g){i=d,r=p,o=g,s=m;let a=m?n<p.top?-1:1:g?e<p.left?-1:1:0;u=!a||(a>0?f<t.length-1:f>0)}0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=d,c=p):n<p.top&&(!h||h.top>p.top)&&(l=d,h=p):c&&HD(c,p)?c=WD(c,p.bottom):h&&HD(h,p)&&(h=VD(h,p.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=l,r=h),!i)return{node:t,offset:0};let d=Math.max(r.left,Math.min(r.right,e));return 3==i.nodeType?qD(i,d,n):u&&"false"!=i.contentEditable?FD(i,d,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0)}}function qD(t,e,n){let i=t.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let i=HT(t,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<o){let n=e>=(c.left+c.right)/2,i=n;if((d$.chrome||d$.gecko)&&HT(t,a).getBoundingClientRect().left==c.right&&(i=!n),h<=0)return{node:t,offset:a+(i?1:0)};r=a+(i?1:0),o=h}}}return{node:t,offset:r>-1?r:s>0?t.nodeValue.length:0}}function XD(t,e,n,i=-1){var r,o;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:h,y:u}=e,d=u-l;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,r=!1;s=t.elementAtHeight(d),s.type!=A$.Text;)for(;d=i>0?s.bottom+e:s.top-e,!(d>=0&&d<=c);){if(r)return n?null:0;r=!0,i=-i}u=l+d;let f=s.from;if(f<t.viewport.from)return 0==t.viewport.from?0:n?null:KD(t,a,s,h,u);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:KD(t,a,s,h,u);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,m=g.elementFromPoint(h,u);m&&!t.contentDOM.contains(m)&&(m=null),m||(h=Math.max(a.left+1,Math.min(a.right-1,h)),m=g.elementFromPoint(h,u),m&&!t.contentDOM.contains(m)&&(m=null));let v,b=-1;if(m&&0!=(null===(r=t.docView.nearest(m))||void 0===r?void 0:r.isEditable)){if(p.caretPositionFromPoint){let t=p.caretPositionFromPoint(h,u);t&&({offsetNode:v,offset:b}=t)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(h,u);e&&(({startContainer:v,startOffset:b}=e),(!t.contentDOM.contains(v)||d$.safari&&function(t,e,n){let i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return HT(t,i-1,i).getBoundingClientRect().left>n}(v,b,h)||d$.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():HT(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(v,b,h))&&(v=void 0))}v&&(b=Math.min(BT(v),b))}if(!v||!t.docView.dom.contains(v)){let e=R$.find(t.docView,f);if(!e)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:b}=FD(e.dom,h,u))}let y=t.docView.nearest(v);if(!y)return null;if(y.isWidget&&1==(null===(o=y.dom)||void 0===o?void 0:o.nodeType)){let t=y.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?y.posAtStart:y.posAtEnd}return y.localPosFromDOM(v,b)+y.posAtStart}function KD(t,e,n,i,r){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;o+=Math.floor((r-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+ap(s,o,t.state.tabSize)}function ZD(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type))for(let t of n.type)if(t.to>e||t.to==e&&(t.to==n.to||t.type==A$.Text))return t;return n}function YD(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),s=t.textDirectionAt(r.from);for(let a=e,l=null;;){let e=nD(r,o,s,a,n),c=eD;if(!e){if(r.number==(n?t.state.doc.lines:1))return a;c="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),e=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return e;l=i(c)}a=e}}function GD(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,((t,r,o)=>{if(e>t&&e<r){let o=i||n||(e-t<r-e?-1:1);e=o<0?t:r,i=o}}));if(!i)return e}}function UD(t,e,n){let i=GD(t.state.facet(PD).map((e=>e(t))),n.from,e.head>n.from?-1:1);return i==n.from?n:ef.cursor(i,i<n.from?1:-1)}const JD="￿";class tR{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Hf.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=JD}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i);let t=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==e)break;let o=YT.get(i),s=YT.get(r);(o&&s?o.breakAfter:(o?o.breakAfter:DT(i))||DT(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>t)&&this.lineBreak(),i=r}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(r=i.exec(e))&&(o=r.index,s=r[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=YT.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(eR(t,n.node,n.offset)?e:0))}}function eR(t,e,n){for(;;){if(!e||n<BT(e))return!1;if(e==t)return!0;n=$T(e)+1,e=e.parentNode}}class nR{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class iR{constructor(t,e,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=r||o?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new nR(n,i)),r==n&&o==i||e.push(new nR(r,o))),e}(t),n=new tR(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?ef.single(n+e,i+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=r&&r.node==e.focusNode&&r.offset==e.focusOffset||!MT(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),i=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!MT(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset),s=t.viewport;if((d$.ios||d$.chrome)&&t.state.selection.main.empty&&n!=i&&(s.from>0||s.to<t.state.doc.length)){let e=Math.min(n,i),r=Math.max(n,i),o=s.from-e,a=s.to-r;0!=o&&1!=o&&0!=e||0!=a&&-1!=a&&r!=t.state.doc.length||(n=0,i=t.state.doc.length)}this.newSel=ef.single(i,n)}}}function rR(t,e){let n,{newSel:i}=e,r=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:i,to:s}=e.bounds,a=r.from,l=null;(8===o||d$.android&&e.text.length<s-i)&&(a=r.to,l="end");let c=function(t,e,n,i){let r=Math.min(t.length,e.length),o=0;for(;o<r&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;return"end"==i&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(t.state.doc.sliceString(i,s,JD),e.text,a-i,l);c&&(d$.chrome&&13==o&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==JD+JD&&c.toB--,n={from:i+c.from,to:i+c.toA,insert:Td.of(e.text.slice(c.from,c.toB).split(JD))})}else i&&(!t.hasFocus&&t.state.facet(wD)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(d$.mac||d$.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Td.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:d$.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(i&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Td.of([" "])}),n)return oR(t,n,i,o);if(i&&!i.main.eq(r)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:e,userEvent:n}),!0}return!1}function oR(t,e,n,i=-1){if(d$.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(d$.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&" "==t.state.sliceDoc(e.from,r.from))&&1==e.insert.length&&2==e.insert.lines&&VT(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&0==e.insert.length||8==i&&e.insert.length<e.to-e.from&&e.to>r.head)&&VT(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&0==e.insert.length&&VT(t.contentDOM,"Delete",46)))return!0;let o,s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a=()=>o||(o=function(t,e,n){let i,r=t.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=o.from<e.from?r.sliceDoc(o.from,e.from):"",s=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=r.changes(e),a=n&&n.main.to<=s.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let l,c=t.state.sliceDoc(e.from,e.to),h=n&&_D(t,n.main.head);if(h){let t=e.insert.length-(e.to-e.from);l={from:h.from,to:h.to-t}}else l=t.state.doc.lineAt(o.head);let u=o.to-e.to,d=o.to-o.from;i=r.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let i=n.to-u,h=i-c.length;if(n.to-n.from!=d||t.state.sliceDoc(h,i)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=r.changes({from:h,to:i,insert:e.insert}),p=n.to-o.to;return{changes:f,range:a?ef.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else i={changes:s,selection:a&&r.selection.replaceRange(a)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:s,scrollIntoView:!0})}(t,e,n));return t.state.facet(cD).some((n=>n(t,e.from,e.to,s,a)))||t.dispatch(a()),!0}class sR{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,d$.safari&&t.contentDOM.addEventListener("input",(()=>null)),d$.gecko&&function(t){DR.has(t)||(DR.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,i=e.target;i!=t.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=YT.get(i))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||(0!=this.view.updateState?Promise.resolve().then((()=>this.runHandlers(t.type,t))):this.runHandlers(t.type,t)))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=function(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let i in t.domEventHandlers){let r=t.domEventHandlers[i];r&&n(i).handlers.push(aR(e.value,r))}if(t&&t.domEventObservers)for(let i in t.domEventObservers){let r=t.domEventObservers[i];r&&n(i).observers.push(aR(e.value,r))}}for(let t in fR)n(t).handlers.push(fR[t]);for(let t in pR)n(t).observers.push(pR[t]);return e}(t),n=this.handlers,i=this.view.contentDOM;for(let t in e)if("scroll"!=t){let r=!e[t].handlers.length,o=n[t];o&&r!=!o.handlers.length&&(i.removeEventListener(t,this.handleEvent),o=null),o||i.addEventListener(t,this.handleEvent,{passive:r})}for(let t in n)"scroll"==t||e[t]||i.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=t.keyCode&&hR.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),d$.android&&d$.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!d$.ios||t.synthetic||t.altKey||t.metaKey||!((e=lR.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||cR.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&!("Enter"==e.key&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString()))&&(this.pendingIOSKey=void 0,VT(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(d$.safari&&!d$.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function aR(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(t){yD(n.state,t)}}}const lR=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],cR="dthko",hR=[16,17,18,20,91,92,224,225];function uR(t){return.7*Math.max(0,t)+8}class dR{constructor(t,e,n,i){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=function(t){let e,n,i=t.ownerDocument;for(let r=t.parentNode;r&&!(r==i.body||e&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:e,y:n}}(t.contentDOM),this.atoms=t.state.facet(PD).map((e=>e(t)));let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Hf.allowMultipleSelections)&&function(t,e){let n=t.state.facet(rD);return n.length?n[0](e):d$.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=AT(t.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let t=0;t<r.length;t++){let n=r[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=AR(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(e=this.startEvent,n=t,Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))<10))return;var e,n;this.select(this.lastEvent=t);let i=0,r=0,o=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=RD(this.view);t.clientX-c.left<=o+6?i=-uR(o-t.clientX):t.clientX+c.right>=a-6&&(i=uR(t.clientX-a)),t.clientY-c.top<=s+6?r=-uR(s-t.clientY):t.clientY+c.bottom>=l-6&&(r=uR(t.clientY-l)),this.setScrollSpeed(i,r)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n],r=null;if(i.empty){let t=GD(this.atoms,i.from,0);t!=i.from&&(r=ef.cursor(t,-1))}else{let t=GD(this.atoms,i.from,-1),e=GD(this.atoms,i.to,1);t==i.from&&e==i.to||(r=ef.range(i.from==i.anchor?t:e,i.from==i.head?t:e))}r&&(e||(e=t.ranges.slice()),e[n]=r)}return e?ef.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&n.eq(e.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some((t=>t.isUserEvent("input.type")))?this.destroy():this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const fR=Object.create(null),pR=Object.create(null),gR=d$.ie&&d$.ie_version<15||d$.ios&&d$.webkit_version<604;function mR(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function vR(t,e){e=mR(t.state,uD,e);let n,{state:i}=t,r=1,o=i.toText(e),s=o.lines==i.selection.ranges.length;if(null!=ER&&i.selection.ranges.every((t=>t.empty))&&ER==o.toString()){let t=-1;n=i.changeByRange((n=>{let a=i.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=i.toText((s?o.line(r++).text:e)+i.lineBreak);return{changes:{from:a.from,insert:l},range:ef.cursor(n.from+l.length)}}))}else n=s?i.changeByRange((t=>{let e=o.line(r++);return{changes:{from:t.from,to:t.to,insert:e.text},range:ef.cursor(t.from+e.length)}})):i.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function bR(t,e,n,i){if(1==i)return ef.cursor(e,n);if(2==i)return function(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),o=e-r.from;if(0==r.length)return ef.cursor(e);0==o?n=1:o==r.length&&(n=-1);let s=o,a=o;n<0?s=zd(r.text,o,!1):a=zd(r.text,o);let l=i(r.text.slice(s,a));for(;s>0;){let t=zd(r.text,s,!1);if(i(r.text.slice(t,s))!=l)break;s=t}for(;a<r.length;){let t=zd(r.text,a);if(i(r.text.slice(a,t))!=l)break;a=t}return ef.range(s+r.from,a+r.from)}(t.state,e,n);{let n=R$.find(t.docView,e),i=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:i.from,o=n?n.posAtEnd:i.to;return o<t.state.doc.length&&o==i.to&&o++,ef.range(r,o)}}pR.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},fR.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&0!=t.inputState.tabFocusMode&&(t.inputState.tabFocusMode=Date.now()+2e3),!1),pR.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},pR.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},fR.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(sD))if(n=i(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=OR(t,e),i=AR(e),r=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),r=r.map(t.changes))},get(e,o,s){let a,l=OR(t,e),c=bR(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let e=bR(t,n.pos,n.bias,i),r=Math.min(e.from,c.from),o=Math.max(e.to,c.to);c=r<c.from?ef.range(r,o):ef.range(o,r)}return o?r.replaceRange(r.main.extend(c.from,c.to)):s&&1==i&&r.ranges.length>1&&(a=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ef.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(r,l.pos))?a:s?r.addRange(c):ef.create([c])}}}(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new dR(t,e,n,i)),i&&t.observer.ignore((()=>{QT(t.contentDOM);let e=t.root.activeElement;e&&!e.contains(t.contentDOM)&&e.blur()}));let r=t.inputState.mouseSelection;if(r)return r.start(e),!1===r.dragging}return!1};let yR=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function wR(t,e,n,i){let r=R$.find(t.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&yR(n,i,s))return-1;let a=r.coordsAt(o,1);return a&&yR(n,i,a)?1:s&&s.bottom>=i?-1:1}function OR(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:wR(t,n,e.clientX,e.clientY)}}const SR=d$.ie&&d$.ie_version<=11;let xR=null,kR=0,CR=0;function AR(t){if(!SR)return t.detail;let e=xR,n=CR;return xR=t,CR=Date.now(),kR=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(kR+1)%3:1}function MR(t,e,n,i){if(!(n=mR(t.state,uD,n)))return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=i&&o&&function(t,e){let n=t.state.facet(oD);return n.length?n[0](e):d$.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:o.from,to:o.to}:null,a={from:r,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}fR.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let t=i.posAtStart,e=t+i.length;(t>=n.to||e<=n.from)&&(n=ef.range(t,e))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",mR(t.state,dD,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1},fR.dragend=t=>(t.inputState.draggedContent=null,!1),fR.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,o=()=>{++r==n.length&&MR(t,e,i.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return MR(t,e,n,!0),!0}return!1},fR.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=gR?null:e.clipboardData;return n?(vR(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),vR(t,n.value)}),50)}(t),!1)};let ER=null;fR.copy=fR.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=function(t){let e=[],n=[],i=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:mR(t,dD,e.join(t.lineBreak)),ranges:n,linewise:i}}(t.state);if(!n&&!r)return!1;ER=r?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=gR?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout((()=>{i.remove(),t.focus()}),50)}(t,n),!1)};const PR=Ef.define();function TR(t,e){let n=[];for(let i of t.facet(hD)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:PR.of(!0)}):null}function $R(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=TR(t.state,e);n?t.dispatch(n):t.update([])}}),10)}pR.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),$R(t)},pR.blur=t=>{t.observer.clearSelectionRange(),$R(t)},pR.compositionstart=pR.compositionupdate=t=>{t.observer.editContext||(null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))},pR.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,d$.chrome&&d$.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50))},pR.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},fR.beforeinput=(t,e)=>{var n,i;if("insertReplacementText"==e.inputType&&t.observer.editContext){let i=null===(n=e.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),r=e.getTargetRanges();if(i&&r.length){let e=r[0],n=t.posAtDOM(e.startContainer,e.startOffset),o=t.posAtDOM(e.endContainer,e.endOffset);return oR(t,{from:n,to:o,insert:t.state.toText(i)},null),!0}}let r;if(d$.chrome&&d$.android&&(r=lR.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return d$.ios&&"deleteContentForward"==e.inputType&&t.observer.flushSoon(),d$.safari&&"insertText"==e.inputType&&t.inputState.composing>=0&&setTimeout((()=>pR.compositionend(t,e)),20),!1};const DR=new Set,RR=["pre-wrap","normal","pre-line","break-spaces"];let BR=!1;function NR(){BR=!1}class LR{constructor(t){this.lineWrapping=t,this.doc=Td.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return RR.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e}refresh(t,e,n,i,r,o){let s=RR.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let t=0;t<o.length;t++){let e=o[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return a}}class jR{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class _R{constructor(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?A$.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof T$?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new _R(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var IR=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(IR||(IR={}));const zR=.001;class QR{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>zR&&(BR=!0),this.height=t)}replace(t,e,n){return QR.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,i){let r=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:h}=i[s],u=r.lineAt(a,IR.ByPosNoHeight,n.setDoc(e),0,0),d=u.to>=l?u:r.lineAt(l,IR.ByPosNoHeight,n,0,0);for(h+=d.to-l,l=d.to;s>0&&u.from<=i[s-1].toA;)a=i[s-1].fromA,c=i[s-1].fromB,s--,a<u.from&&(u=r.lineAt(a,IR.ByPosNoHeight,n,0,0));c+=u.from-a,a=u.from;let f=KR.build(n.setDoc(o),t,c,h);r=HR(r,r.replace(a,l,f))}return r.updateHeight(n,0)}static empty(){return new WR(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,i=0,r=0;for(;;)if(e==n)if(i>2*r){let r=t[e-1];r.break?t.splice(--e,1,r.left,null,r.right):t.splice(--e,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,r-=e.size}}else if(i<r){let n=t[e++];n&&(i+=n.size)}else{let e=t[--n];e&&(r+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new qR(QR.of(t.slice(0,e)),o,QR.of(t.slice(n)))}}function HR(t,e){return t==e?t:(t.constructor!=e.constructor&&(BR=!0),e)}QR.prototype.size=1;class VR extends QR{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,i){return new _R(i,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(t,e,n,i,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,n,i,r))}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class WR extends VR{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,i){return new _R(i,this.length,n,this.height,this.breaks)}replace(t,e,n){let i=n[0];return 1==n.length&&(i instanceof WR||i instanceof FR&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof FR?i=new WR(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):QR.of(n)}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class FR extends QR{constructor(t){super(t,0)}heightMetrics(t,e){let n,i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-i+1,s=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*o);n=e/o,this.length>o+1&&(s=(this.height-e)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:s}}blockAt(t,e,n,i){let{firstLine:r,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(e,i);if(e.lineWrapping){let r=i+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),o=e.doc.lineAt(r),l=s+o.length*a,c=Math.max(n,t-l/2);return new _R(o.from,o.length,c,l,0)}{let i=Math.max(0,Math.min(o-r,Math.floor((t-n)/s))),{from:a,length:l}=e.doc.line(r+i);return new _R(a,l,n+s*i,s,0)}}lineAt(t,e,n,i,r){if(e==IR.ByHeight)return this.blockAt(t,n,i,r);if(e==IR.ByPosNoHeight){let{from:e,to:i}=n.doc.lineAt(t);return new _R(e,i-e,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,r),l=n.doc.lineAt(t),c=s+l.length*a,h=l.number-o,u=i+s*h+a*(l.from-r-h);return new _R(l.from,l.length,Math.max(i,Math.min(u,i+this.height-c)),c,0)}forEachLine(t,e,n,i,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,r);for(let c=t,h=i;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-s;h+=a*n+l*(t-r-n)}let i=a+l*e.length;o(new _R(e.from,e.length,h,i,0)),h+=i,c=e.to+1}}replace(t,e,n){let i=this.length-e;if(i>0){let t=n[n.length-1];t instanceof FR?n[n.length-1]=new FR(t.length+i):n.push(null,new FR(i-1))}if(t>0){let e=n[0];e instanceof FR?n[0]=new FR(t+e.length):n.unshift(new FR(t-1),null)}return QR.of(n)}decomposeLeft(t,e){e.push(new FR(t-1),null)}decomposeRight(t,e){e.push(null,new FR(this.length-t-1))}updateHeight(t,e=0,n=!1,i){let r=e+this.length;if(i&&i.from<=e+this.length&&i.more){let n=[],o=Math.max(e,i.from),s=-1;for(i.from>e&&n.push(new FR(i.from-e-1).updateHeight(t,e));o<=r&&i.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==s?s=r:Math.abs(r-s)>=zR&&(s=-2);let a=new WR(e,r);a.outdated=!1,n.push(a),o+=e+1}o<=r&&n.push(null,new FR(r-o).updateHeight(t,o));let a=QR.of(n);return(s<0||Math.abs(a.height-this.height)>=zR||Math.abs(s-this.heightMetrics(t,e).perLine)>=zR)&&(BR=!0),HR(this,a)}return(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class qR extends QR{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,i){let r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)}lineAt(t,e,n,i,r){let o=i+this.left.height,s=r+this.left.length+this.break,a=e==IR.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==IR.ByPosNoHeight?IR.ByPosNoHeight:IR.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,r).join(l)}forEachLine(t,e,n,i,r,o){let s=i+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,i,r,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{let l=this.lineAt(a,IR.ByPos,n,i,r);t<l.from&&this.left.forEachLine(t,l.from-1,n,i,r,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}}replace(t,e,n){let i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let t of n)r.push(t);if(t>0&&XR(r,o-1),e<this.length){let t=r.length;this.decomposeRight(e,r),XR(r,t)}return QR.of(r)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?QR.of(this.break?[t,null,e]:[t,e]):(this.left=HR(this.left,t),this.right=HR(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,i){let{left:r,right:o}=this,s=e+r.length+this.break,a=null;return i&&i.from<=e+r.length&&i.more?a=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=s+o.length&&i.more?a=o=o.updateHeight(t,s,n,i):o.updateHeight(t,s,n),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function XR(t,e){let n,i;null==t[e]&&(n=t[e-1])instanceof FR&&(i=t[e+1])instanceof FR&&t.splice(e-1,3,new FR(n.length+1+i.length))}class KR{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof WR?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new WR(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=e-t;n.block?this.addBlock(new VR(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new WR(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new FR(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof WR)return t;let e=new WR(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),i.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof WR||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new WR(0,-1));let n=t;for(let t of this.nodes)t instanceof WR&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,i){let r=new KR(n,t);return Kf.spans(e,n,i,r,0),r.finish(n)}}class ZR{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&D$(t,e,this.changes,5)}}function YR(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=i.body;)if(1==e.nodeType){let n=e,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();o=Math.max(o,i.left),s=Math.min(s,i.right),a=Math.max(a,i.top),l=Math.min(e==t.parentNode?r.innerHeight:l,i.bottom)}e="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function GR(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class UR{constructor(t,e,n,i){this.from=t,this.to=e,this.size=n,this.displaySize=i}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(t,e){return M$.replace({widget:new JR(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class JR extends C${constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class tB{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=rB,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=I$.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(AD).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new LR(e),this.stateDeco=t.facet(MD).filter((t=>"function"!=typeof t)),this.heightMap=QR.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle.setDoc(t.doc),[new ND(0,0,0,t.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=M$.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let i=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>i>=t&&i<=e))){let{from:e,to:n}=this.lineBlockAt(i);t.push(new eB(e,n))}}return this.viewports=t.sort(((t,e)=>t.from-e.from)),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?rB:new oB(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(sB(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(MD).filter((t=>"function"!=typeof t));let i=t.changedRanges,r=ND.extendWithRanges(i,function(t,e,n){let i=new ZR;return Kf.compare(t,e,n,i,0),i.changes}(n,this.stateDeco,t?t.changes:Xd.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);NR(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||BR)&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,t.flags|=this.updateForViewport(),(l||!t.changes.empty||2&t.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(pD)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?I$.RTL:I$.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),s=e.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:t,scaleY:n}=jT(e,s);(t>.005&&Math.abs(this.scaleX-t)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=t,this.scaleY=n,l|=16,o=a=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,u=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==u||(this.paddingTop=h,this.paddingBottom=u,l|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=16);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=FT(t.scrollDOM);let f=(this.printing?GR:YR)(e,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!function(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}(t.dom))return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=t.scrollDOM.clientHeight,l|=16),a){let e=t.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(e)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=t.docView.measureTextSize();o=n>0&&i.refresh(r,n,s,a,v/s,e),o&&(t.docView.minWidth=0,l|=16)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),NR();for(let n of this.viewports){let r=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(o?QR.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle,[new ND(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new jR(n.from,r))}BR&&(l|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new eB(i.lineAt(o-1e3*n,IR.ByHeight,r,0,0).from,i.lineAt(s+1e3*(1-n),IR.ByHeight,r,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=i.lineAt(t,IR.ByPos,r,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-o,a=new eB(i.lineAt(n-500,IR.ByHeight,r,0,0).from,i.lineAt(n+o+500,IR.ByHeight,r,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new eB(this.heightMap.lineAt(n,IR.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,IR.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,IR.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,IR.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||i<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||r>=s+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let i of t)e.touchesRange(i.from,i.to)||n.push(new UR(e.mapPos(i.from),e.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=I$.LTR&&!n)return[];let s=[],a=(i,o,l,c)=>{if(o-i<r)return;let h=this.state.selection.main,u=[h.from];h.empty||u.push(h.to);for(let t of u)if(t>i&&t<o)return a(i,t-10,l,c),void a(t+10,o,l,c);let d=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-i)<r&&Math.abs(t.to-o)<r&&!u.some((e=>t.from<e&&t.to>e))));if(!d){if(o<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=o&&t.to>=o))){let t=e.moveToLineBoundary(ef.cursor(o),!1,!0).head;t>i&&(o=t)}let t=this.gapSize(l,i,o,c);d=new UR(i,o,t,n||t<2e6?t:2e6)}s.push(d)},l=e=>{if(e.length<o||e.type!=A$.Text)return;let r=function(t,e,n){let i=[],r=t,o=0;return Kf.spans(n,t,e,{span(){},point(t,e){t>r&&(i.push({from:r,to:t}),o+=t-r),r=e}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}(e.from,e.to,this.stateDeco);if(r.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let t,n,o=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let i=iB(r,c),s=((this.visibleBottom-this.visibleTop)/2+o)/e.height;t=i-s,n=i+s}else t=(this.visibleTop-e.top-o)/e.height,n=(this.visibleBottom-e.top+o)/e.height;s=nB(r,t),l=nB(r,n)}else{let n=r.total*this.heightOracle.charWidth,o=i*this.heightOracle.charWidth,a=0;if(n>2e6)for(let n of t)n.from>=e.from&&n.from<e.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let h,u,d=this.pixelViewport.left+a,f=this.pixelViewport.right+a;if(null!=c){let t=iB(r,c),e=((f-d)/2+o)/n;h=t-e,u=t+e}else h=(d-o)/n,u=(f+o)/n;s=nB(r,h),l=nB(r,u)}s>e.from&&a(e.from,s,e,r),l<e.to&&a(l,e.to,e,r)};for(let t of this.viewportLines)Array.isArray(t.type)?t.type.forEach(l):l(t);return s}gapSize(t,e,n,i){let r=iB(i,n)-iB(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(t){UR.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=M$.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Kf.spans(e,this.viewport.from,this.viewport.to,{span(t,e){n.push({from:t,to:e})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let e=0;e<n.length&&!(8&i);e++){let r=this.visibleRanges[e],o=n[e];r.from==o.from&&r.to==o.to||(i|=4,t&&t.mapPos(r.from,-1)==o.from&&t.mapPos(r.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||sB(this.heightMap.lineAt(t,IR.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((e=>e.top<=t&&e.bottom>=t))||sB(this.heightMap.lineAt(this.scaler.fromDOM(t),IR.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return sB(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class eB{constructor(t,e){this.from=t,this.to=e}}function nB({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:r}=e[t],o=r-n;if(i<=o)return n+i;i-=o}}function iB(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}const rB={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class oB{constructor(t,e,n){let i=0,r=0,o=0;this.viewports=n.map((({from:n,to:r})=>{let o=e.lineAt(n,IR.ByPos,t,0,0).top,s=e.lineAt(r,IR.ByPos,t,0,0).bottom;return i+=s-o,{from:n,to:r,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(e.height-i);for(let t of this.viewports)t.domTop=o+(t.top-r)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),r=t.bottom}toDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}}fromDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}}eq(t){return t instanceof oB&&this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every(((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to))}}function sB(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new _R(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map((t=>sB(t,e))):t._content)}const aB=of.define({combine:t=>t.join(" ")}),lB=of.define({combine:t=>t.indexOf(!0)>-1}),cB=up.newName(),hB=up.newName(),uB=up.newName(),dB={"&light":"."+hB,"&dark":"."+uB};function fB(t,e,n){return new up(e,{finish(e){return/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e}})}const pB=fB("."+cB,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},dB),gB={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},mB=d$.ie&&d$.ie_version<=11;class vB{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new _T,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(d$.ie&&d$.ie_version<=11||d$.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===t.constructor.EDIT_CONTEXT||d$.chrome&&d$.chrome_version<126||(this.editContext=new wB(t),t.state.facet(wD)&&(t.contentDOM.editContext=this.editContext.editContext)),mB&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(t){("change"!=t.type&&t.type||t.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(wD)?n.root.activeElement!=this.dom:!ET(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(t)?e||(this.selectionChanged=!1):(d$.ie&&d$.ie_version<=11||d$.android&&d$.chrome)&&!n.state.selection.main.empty&&i.focusNode&&TT(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=AT(t.root);if(!e)return!1;let n=d$.safari&&11==t.root.nodeType&&t.root.activeElement==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return yB(t,n)}let n=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?yB(t,n):null}(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let i=ET(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,BT(n));;)if(i){if(1!=n.nodeType)return!1;let t=n.childNodes[i-1];"false"==t.contentEditable?i--:(n=t,i=BT(n))}else{if(n==t)return!0;i=$T(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,gB),mB&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),mB&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&VT(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,i=!1;for(let r of t){let t=this.readMutation(r);t&&(t.typeOver&&(i=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:i}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),i=this.selectionChanged&&ET(this.dom,this.selectionRange);if(t<0&&!i)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new iR(this.view,t,e,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,i=rR(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=bB(e,t.previousSibling||t.target.previousSibling,-1),i=bB(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(wD)!=t.state.facet(wD)&&(t.view.contentDOM.editContext=t.state.facet(wD)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function bB(t,e,n){for(;e;){let i=YT.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function yB(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return TT(s.node,s.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}class wB{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=e=>{let n=t.state.selection.main,{anchor:i,head:r}=n,o=this.toEditorPos(e.updateRangeStart),s=this.toEditorPos(e.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:e.updateRangeStart,editorBase:o,drifted:!1});let a={from:o,to:s,insert:Td.of(e.text.split("\n"))};if(a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),a.from!=a.to||a.insert.length){if((d$.mac||d$.android)&&a.from==r-1&&/^\. ?$/.test(e.text)&&"off"==t.contentDOM.getAttribute("autocorrect")&&(a={from:o,to:s,insert:Td.of([e.text.replace("."," ")])}),this.pendingContextChange=a,!t.state.readOnly){let n=this.to-this.from+(a.to-a.from+a.insert.length);oR(t,a,ef.single(this.toEditorPos(e.selectionStart,n),this.toEditorPos(e.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))}else{let i=ef.single(this.toEditorPos(e.selectionStart),this.toEditorPos(e.selectionEnd));i.main.eq(n)||t.dispatch({selection:i,userEvent:"select"})}},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let e=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);e<o;e++){let n=t.coordsForChar(e);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}e.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=e=>{let n=[];for(let t of e.getTextFormats()){let e=t.underlineStyle,i=t.underlineThickness;if("None"!=e&&"None"!=i){let r=this.toEditorPos(t.rangeStart),o=this.toEditorPos(t.rangeEnd);if(r<o){let t=`text-decoration: underline ${"Dashed"==e?"dashed ":"Squiggle"==e?"wavy ":""}${"Thin"==i?1:2}px`;n.push(M$.mark({attributes:{style:t}}).range(r,o))}}}t.dispatch({effects:bD.of(M$.set(n))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:e}=this.composing;this.composing=null,e&&this.reset(t.state)}};for(let t in this.handlers)e.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let e=AT(t.root);e&&e.rangeCount&&this.editContext.updateSelectionBounds(e.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,i=this.pendingContextChange;return t.changes.iterChanges(((r,o,s,a,l)=>{if(n)return;let c=l.length-(o-r);if(i&&o>=i.to){if(i.from==r&&i.to==o&&i.insert.eq(l))return i=this.pendingContextChange=null,e+=c,void(this.to+=c);i=null,this.revertPending(t.state)}if(r+=e,(o+=e)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),l.toString()),this.to+=c}e+=c})),i&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some((t=>!t.isUserEvent("input.type")&&t.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):this.applyEdits(t)&&this.rangeIsValid(t.state)?(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state):(this.pendingContextChange=null,this.reset(t.state)),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),i=this.toContextPos(e.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>3e4)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class OB{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(t=>t.forEach((t=>n(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new tB(t.state||Hf.create(t)),t.scrollTo&&t.scrollTo.is(vD)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(SD).map((t=>new kD(t)));for(let t of this.plugins)t.update(this);this.observer=new vB(this),this.inputState=new sR(this),this.inputState.ensureHandlers(this.plugins),this.docView=new jD(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(e=document.fonts)||void 0===e?void 0:e.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...t){let e=1==t.length&&t[0]instanceof Df?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,i=!1,r=this.state;for(let e of t){if(e.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=e.state}if(this.destroyed)return void(this.viewState.state=r);let o=this.hasFocus,s=0,a=null;t.some((t=>t.annotation(PR)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=TR(r,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(Hf.phrases)!=this.state.facet(Hf.phrases))return this.setState(r);e=LD.create(this,r,t),e.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(h&&(h=h.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;h=new mD(t.empty?t:ef.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(vD)&&(h=t.value.clip(this.state))}this.viewState.update(e,h),this.bidiCache=kB.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(BD)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(aB)!=e.state.facet(aB)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!e.empty)for(let t of this.state.facet(lD))try{t(e)}catch(t){yD(this.state,t,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!rR(this,c)&&l.force&&VT(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new tB(t),this.plugins=t.facet(SD).map((t=>new kD(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new jD(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(SD),n=t.state.facet(SD);if(e!=n){let i=[];for(let r of n){let n=e.indexOf(r);if(n<0)i.push(new kD(r));else{let e=this.plugins[n];e.mustUpdate=t,i.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(t){yD(this.state,t,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(o<0)if(FT(n))r=-1,o=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(i);r=t.from,o=t.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((t=>{try{return t.read(this)}catch(t){return yD(this.state,t),xB}})),c=LD.create(this,this.state,[]),h=!1;c.flags|=s,e?e.flags|=s:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let t=0;t<a.length;t++)if(l[t]!=xB)try{let e=a[t];e.write&&e.write(l[t],this)}catch(t){yD(this.state,t)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let t=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(t>1||t<-1){i+=t,n.scrollTop=i/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(lD))t(e)}get themeClasses(){return cB+" "+(this.state.facet(lB)?uB:hB)+" "+this.state.facet(aB)}updateAttrs(){let t=CB(this,CD,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(wD)?"true":"false",class:"cm-content",style:`${d$.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),CB(this,AD,e);let n=this.observer.ignore((()=>{let n=x$(this.contentDOM,this.contentAttrs,e),i=x$(this.dom,this.editorAttrs,t);return n||i}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(OB.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(BD);let t=this.state.facet(OB.cspNonce);up.mount(this.root,this.styleModules.concat(pB).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return UD(this,t,YD(this,t,e,n))}moveByGroup(t,e){return UD(this,t,YD(this,t,e,(e=>function(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return t=>{let e=i(t);return r==If.Space&&(r=e),r==e}}(this,t.head,e))))}visualLineSide(t,e){let n=this.bidiSpans(t),i=this.textDirectionAt(t.from),r=n[e?n.length-1:0];return ef.cursor(r.side(e,i)+t.from,r.forward(!e,i)?1:-1)}moveToLineBoundary(t,e,n=!0){return function(t,e,n,i){let r=ZD(t,e.head),o=i&&r.type==A$.Text&&(t.lineWrapping||r.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),i=t.textDirectionAt(r.from),s=t.posAtCoords({x:n==(i==I$.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return ef.cursor(s,n?-1:1)}return ef.cursor(n?r.to:r.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return UD(this,t,function(t,e,n,i){let r=e.head,o=n?1:-1;if(r==(n?t.state.doc.length:0))return ef.cursor(r,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),h=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-e.from))),s=(o<0?e.top:e.bottom)+h}let u=l.left+a,d=null!=i?i:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(d+e)*o,i=XD(t,{x:u,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?i<r:i>r)){let e=t.docView.coordsForChar(i),r=!e||n<e.top?-1:1;return ef.cursor(i,r,void 0,a)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),XD(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),r=this.bidiSpans(i);return NT(n,r[Z$.find(r,t-i.from,-1,e)].dir==I$.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(fD)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>SB)return tD(t.length);let e,n=this.textDirectionAt(t.from);for(let i of this.bidiCache)if(i.from==t.from&&i.dir==n&&(i.fresh||Y$(i.isolates,e=$D(this,t))))return i.order;e||(e=$D(this,t));let i=function(t,e,n){if(!t)return[new Z$(0,0,e==Q$?1:0)];if(e==z$&&!n.length&&!K$.test(t))return tD(t.length);if(n.length)for(;t.length>G$.length;)G$[G$.length]=256;let i=[],r=e==z$?0:1;return J$(t,r,r,n,0,t.length,i),i}(t.text,n,e);return this.bidiCache.push(new kB(t.from,t.to,n,e,!0,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||d$.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{QT(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return vD.of(new mD("number"==typeof t?ef.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return vD.of(new mD(ef.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){null==t?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof t?this.inputState.tabFocusMode=t?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return xD.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return xD.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=up.newName(),i=[aB.of(n),BD.of(fB(`.${n}`,t))];return e&&e.dark&&i.push(lB.of(!0)),i}static baseTheme(t){return pf.lowest(BD.of(fB("."+cB,t,dB)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),i=n&&YT.get(n)||YT.get(t);return(null===(e=null==i?void 0:i.rootView)||void 0===e?void 0:e.view)||null}}OB.styleModule=BD,OB.inputHandler=cD,OB.clipboardInputFilter=uD,OB.clipboardOutputFilter=dD,OB.scrollHandler=gD,OB.focusChangeEffect=hD,OB.perLineTextDirection=fD,OB.exceptionSink=aD,OB.updateListener=lD,OB.editable=wD,OB.mouseSelectionStyle=sD,OB.dragMovesSelection=oD,OB.clickAddsSelectionRange=rD,OB.decorations=MD,OB.outerDecorations=ED,OB.atomicRanges=PD,OB.bidiIsolatedRanges=TD,OB.scrollMargins=DD,OB.darkTheme=lB,OB.cspNonce=of.define({combine:t=>t.length?t[0]:""}),OB.contentAttributes=AD,OB.editorAttributes=CD,OB.lineWrapping=OB.contentAttributes.of({class:"cm-lineWrapping"}),OB.announce=$f.define();const SB=4096,xB={};class kB{constructor(t,e,n,i,r,o){this.from=t,this.to=e,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],i=t.length?t[t.length-1].dir:I$.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir!=i||e.touchesRange(o.from,o.to)||n.push(new kB(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function CB(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let e=i[r],o="function"==typeof e?e(t):e;o&&w$(o,n)}return n}const AB=d$.mac?"mac":d$.windows?"win":d$.linux?"linux":"key";function MB(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}const EB=pf.default(OB.domEventHandlers({keydown(t,e){return function(t,e,n,i){RB=e;let r=wp(e),o=Vd(Qd(r,0))==r.length&&" "!=r,s="",a=!1,l=!1,c=!1;$B&&$B.view==n&&$B.scope==i&&(s=$B.prefix+" ",hR.indexOf(e.keyCode)<0&&(l=!0,$B=null));let h,u,d=new Set,f=t=>{if(t){for(let e of t.run)if(!d.has(e)&&(d.add(e),e(n)))return t.stopPropagation&&(c=!0),!0;t.preventDefault&&(t.stopPropagation&&(c=!0),l=!0)}return!1},p=t[i];return p&&(f(p[s+MB(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(d$.windows&&e.ctrlKey&&e.altKey)&&(h=pp[e.keyCode])&&h!=r?(f(p[s+MB(h,e,!0)])||e.shiftKey&&(u=gp[e.keyCode])!=r&&u!=h&&f(p[s+MB(u,e,!1)]))&&(a=!0):o&&e.shiftKey&&f(p[s+MB(r,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),l&&(a=!0),a&&c&&e.stopPropagation(),RB=null,a}(function(t){let e=t.facet(PB),n=TB.get(e);return n||TB.set(e,n=function(t,e=AB){let n=Object.create(null),i=Object.create(null),r=(t,e)=>{let n=i[t];if(null==n)i[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},o=(t,i,o,s,a)=>{var l,c;let h=n[t]||(n[t]=Object.create(null)),u=i.split(/ (?!$)/).map((t=>function(t,e){const n=t.split(/-(?!$)/);let i,r,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let t=0;t<n.length-1;++t){const a=n[t];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))i=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==e?s=!0:r=!0}}return i&&(a="Alt-"+a),r&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(t,e)));for(let e=1;e<u.length;e++){let n=u.slice(0,e).join(" ");r(n,!0),h[n]||(h[n]={preventDefault:!0,stopPropagation:!1,run:[e=>{let i=$B={view:e,prefix:n,scope:t};return setTimeout((()=>{$B==i&&($B=null)}),DB),!0}]})}let d=u.join(" ");r(d,!1);let f=h[d]||(h[d]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=h._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});o&&f.run.push(o),s&&(f.preventDefault=!0),a&&(f.stopPropagation=!0)};for(let i of t){let t=i.scope?i.scope.split(" "):["editor"];if(i.any)for(let e of t){let t=n[e]||(n[e]=Object.create(null));t._any||(t._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:r}=i;for(let e in t)t[e].run.push((t=>r(t,RB)))}let r=i[e]||i.key;if(r)for(let e of t)o(e,r,i.run,i.preventDefault,i.stopPropagation),i.shift&&o(e,"Shift-"+r,i.shift,i.preventDefault,i.stopPropagation)}return n}(e.reduce(((t,e)=>t.concat(e)),[]))),n}(e.state),t,e,"editor")}})),PB=of.define({enables:EB}),TB=new WeakMap;let $B=null;const DB=4e3;let RB=null;class BB{constructor(t,e,n,i,r){this.className=t,this.left=e,this.top=n,this.width=i,this.height=r}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className==this.className&&(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",null!=this.width&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,n){if(n.empty){let i=t.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let r=NB(t);return[new BB(e,i.left-r.left,i.top-r.top,null,i.bottom-i.top)]}return function(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),o=t.textDirection==I$.LTR,s=t.contentDOM,a=s.getBoundingClientRect(),l=NB(t),c=s.querySelector(".cm-line"),h=c&&window.getComputedStyle(c),u=a.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),d=a.right-(h?parseInt(h.paddingRight):0),f=ZD(t,i),p=ZD(t,r),g=f.type==A$.Text?f:null,m=p.type==A$.Text?p:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=LB(t,i,1,g)),m&&(t.lineWrapping||p.widgetLineBreaks)&&(m=LB(t,r,-1,m)),g&&m&&g.from==m.from&&g.to==m.to)return b(y(n.from,n.to,g));{let e=g?y(n.from,null,g):w(f,!1),i=m?y(null,n.to,m):w(p,!0),r=[];return(g||f).to<(m||p).from-(g&&m?1:0)||f.widgetLineBreaks>1&&e.bottom+t.defaultLineHeight/2<i.top?r.push(v(u,e.bottom,d,i.top)):e.bottom<i.top&&t.elementAtHeight((e.bottom+i.top)/2).type==A$.Text&&(e.bottom=i.top=(e.bottom+i.top)/2),b(e).concat(r).concat(b(i))}function v(t,n,i,r){return new BB(e,t-l.left,n-l.top,i-t,r-n)}function b({top:t,bottom:e,horizontal:n}){let i=[];for(let r=0;r<n.length;r+=2)i.push(v(n[r],t,n[r+1],e));return i}function y(e,n,i){let r=1e9,s=-1e9,a=[];function l(e,n,l,c,h){let f=t.coordsAtPos(e,e==i.to?-2:2),p=t.coordsAtPos(l,l==i.from?2:-2);f&&p&&(r=Math.min(f.top,p.top,r),s=Math.max(f.bottom,p.bottom,s),h==I$.LTR?a.push(o&&n?u:f.left,o&&c?d:p.right):a.push(!o&&c?u:p.left,!o&&n?d:f.right))}let c=null!=e?e:i.from,h=null!=n?n:i.to;for(let i of t.visibleRanges)if(i.to>c&&i.from<h)for(let r=Math.max(i.from,c),o=Math.min(i.to,h);;){let i=t.state.doc.lineAt(r);for(let s of t.bidiSpans(i)){let t=s.from+i.from,a=s.to+i.from;if(t>=o)break;a>r&&l(Math.max(t,r),null==e&&t<=c,Math.min(a,o),null==n&&a>=h,s.dir)}if(r=i.to+1,r>=o)break}return 0==a.length&&l(c,null==e,h,null==n,t.textDirection),{top:r,bottom:s,horizontal:a}}function w(t,e){let n=a.top+(e?t.top:t.bottom);return{top:n,bottom:n,horizontal:[]}}}(t,e,n)}}function NB(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==I$.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function LB(t,e,n,i){let r=t.coordsAtPos(e,2*n);if(!r)return i;let o=t.dom.getBoundingClientRect(),s=(r.top+r.bottom)/2,a=t.posAtCoords({x:o.left+1,y:s}),l=t.posAtCoords({x:o.right-1,y:s});return null==a||null==l?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}class jB{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(_B)!=t.state.facet(_B)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){!1!==this.layer.updateOnDocViewUpdate&&t.requestMeasure(this.measureReq)}setOrder(t){let e=0,n=t.facet(_B);for(;e<n.length&&n[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;t==this.scaleX&&e==this.scaleY||(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some(((t,e)=>{return n=t,i=this.drawn[e],!(n.constructor==i.constructor&&n.eq(i));var n,i}))){let e=this.dom.firstChild,n=0;for(let i of t)i.update&&e&&i.constructor&&this.drawn[n].constructor&&i.update(e,this.drawn[n])?(e=e.nextSibling,n++):this.dom.insertBefore(i.draw(),e);for(;e;){let t=e.nextSibling;e.remove(),e=t}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const _B=of.define();function IB(t){return[xD.define((e=>new jB(e,t))),_B.of(t)]}const zB=!(d$.ios&&d$.webkit&&d$.webkit_version<534),QB=of.define({combine(t){return Vf(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})}});function HB(t){return t.startState.facet(QB)!=t.state.facet(QB)}const VB=IB({above:!0,markers(t){let{state:e}=t,n=e.facet(QB),i=[];for(let r of e.selection.ranges){let o=r==e.selection.main;if(r.empty?!o||zB:n.drawRangeCursor){let e=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=r.empty?r:ef.cursor(r.head,r.head>r.anchor?-1:1);for(let r of BB.forRange(t,e,n))i.push(r)}}return i},update(t,e){t.transactions.some((t=>t.selection))&&(e.style.animationName="cm-blink"==e.style.animationName?"cm-blink2":"cm-blink");let n=HB(t);return n&&WB(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){WB(e.state,t)},class:"cm-cursorLayer"});function WB(t,e){e.style.animationDuration=t.facet(QB).cursorBlinkRate+"ms"}const FB=IB({above:!1,markers(t){return t.state.selection.ranges.map((e=>e.empty?[]:BB.forRange(t,"cm-selectionBackground",e))).reduce(((t,e)=>t.concat(e)))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||HB(t)},class:"cm-selectionLayer"}),qB={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};zB&&(qB[".cm-line"].caretColor=qB[".cm-content"].caretColor="transparent !important");const XB=pf.highest(OB.theme(qB)),KB=$f.define({map(t,e){return null==t?null:e.mapPos(t)}}),ZB=df.define({create(){return null},update(t,e){return null!=t&&(t=e.changes.mapPos(t)),e.effects.reduce(((t,e)=>e.is(KB)?e.value:t),t)}}),YB=xD.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(ZB);null==n?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(ZB)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(ZB),n=null!=e&&t.coordsAtPos(e);if(!n)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(ZB)!=t&&this.view.dispatch({effects:KB.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){t.target!=this.view.contentDOM&&this.view.contentDOM.contains(t.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function GB(t,e,n,i,r){e.lastIndex=0;for(let o,s=t.iterRange(n,i),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=e.exec(s.value);)r(a+o.index,o)}class UB{constructor(t){const{regexp:e,decoration:n,decorate:i,boundary:r,maxLength:o=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,i)this.addMatch=(t,e,n,r)=>i(r,n,n+t[0].length,t,e);else if("function"==typeof n)this.addMatch=(t,e,i,r)=>{let o=n(t,e,i);o&&r(i,i+t[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(t,e,i,r)=>r(i,i+t[0].length,n)}this.boundary=r,this.maxLength=o}createDeco(t){let e=new Zf,n=e.add.bind(e);for(let{from:e,to:i}of function(t,e){let n=t.visibleRanges;if(1==n.length&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:o}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=o:i.push({from:r,to:o});return i}(t,this.maxLength))GB(t.state.doc,this.regexp,e,i,((e,i)=>this.addMatch(i,t,e,n)));return e.finish()}updateDeco(t,e){let n=1e9,i=-1;return t.docChanged&&t.changes.iterChanges(((e,r,o,s)=>{s>=t.view.viewport.from&&o<=t.view.viewport.to&&(n=Math.min(o,n),i=Math.max(s,i))})),t.viewportMoved||i-n>1e3?this.createDeco(t.view):i>-1?this.updateRange(t.view,e.map(t.changes),n,i):e}updateRange(t,e,n,i){for(let r of t.visibleRanges){let o=Math.max(r.from,n),s=Math.min(r.to,i);if(s>o){let n=t.state.doc.lineAt(o),i=n.to<s?t.state.doc.lineAt(s):n,a=Math.max(r.from,n.from),l=Math.min(r.to,i.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<i.to;s++)if(this.boundary.test(i.text[s-i.from])){l=s;break}}let c,h=[],u=(t,e,n)=>h.push(n.range(t,e));if(n==i)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,t,c.index+n.from,u);else GB(t.state.doc,this.regexp,a,l,((e,n)=>this.addMatch(n,t,e,u)));e=e.update({filterFrom:a,filterTo:l,filter:(t,e)=>t<a||e>l,add:h})}}return e}}const JB=null!=/x/.unicode?"gu":"g",tN=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",JB),eN={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let nN=null;const iN=of.define({combine(t){let e=Vf(t,{render:null,specialChars:tN,addSpecialChars:null});return(e.replaceTabs=!function(){var t;if(null==nN&&"undefined"!=typeof document&&document.body){let e=document.body.style;nN=null!=(null!==(t=e.tabSize)&&void 0!==t?t:e.MozTabSize)}return nN||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,JB)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,JB)),e}});let rN=null;class oN extends C${constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=function(t){return t>=32?"•":10==t?"␤":String.fromCharCode(9216+t)}(this.code),n=t.state.phrase("Control character")+" "+(eN[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,e);if(i)return i;let r=document.createElement("span");return r.textContent=e,r.title=n,r.setAttribute("aria-label",n),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class sN extends C${constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="\t",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}const aN=M$.line({class:"cm-activeLine"}),lN=xD.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(aN.range(r.from)),e=r.from)}return M$.set(n)}},{decorations:t=>t.decorations});class cN extends C${constructor(t){super(),this.content=t}toDOM(t){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(t):this.content.cloneNode(!0)),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(t){let e=t.firstChild?PT(t.firstChild):[];if(!e.length)return null;let n=window.getComputedStyle(t.parentNode),i=NT(e[0],"rtl"!=n.direction),r=parseInt(n.lineHeight);return i.bottom-i.top>1.5*r?{left:i.left,right:i.right,top:i.top,bottom:i.top+r}:i}ignoreEvent(){return!1}}const hN=2e3;function uN(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(n),r=n-i.from,o=r>hN?-1:r==i.length?function(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):sp(i.text,t.state.tabSize,n-i.from);return{line:i.number,col:o,off:r}}const dN={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},fN={style:"cursor: crosshair"};class pN extends Wf{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}pN.prototype.elementClass="",pN.prototype.toDOM=void 0,pN.prototype.mapMode=Fd.TrackBefore,pN.prototype.startSide=pN.prototype.endSide=-1,pN.prototype.point=!0;const gN=of.define(),mN=of.define(),vN=of.define(),bN=of.define({combine:t=>t.some((t=>t))});function yN(t){let e=[wN];return t&&!1===t.fixed&&e.push(bN.of(!0)),e}const wN=xD.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(vN).map((e=>new kN(t,e)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!t.state.facet(bN),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<.8*(n.to-n.from))}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(bN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Kf.iter(this.view.state.facet(gN),this.view.viewport.from),i=[],r=this.gutters.map((t=>new xN(t,this.view.viewport,-this.view.documentPadding.top)));for(let t of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(t.type)){let e=!0;for(let o of t.type)if(o.type==A$.Text&&e){SN(n,i,o.from);for(let t of r)t.line(this.view,o,i);e=!1}else if(o.widget)for(let t of r)t.widget(this.view,o)}else if(t.type==A$.Text){SN(n,i,t.from);for(let e of r)e.line(this.view,t,i)}else if(t.widget)for(let e of r)e.widget(this.view,t);for(let t of r)t.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(vN),n=t.state.facet(vN),i=t.docChanged||t.heightChanged||t.viewportChanged||!Kf.eq(t.startState.facet(gN),t.state.facet(gN),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let e of this.gutters)e.update(t)&&(i=!0);else{i=!0;let r=[];for(let i of n){let n=e.indexOf(i);n<0?r.push(new kN(this.view,i)):(this.gutters[n].update(t),r.push(this.gutters[n]))}for(let t of this.gutters)t.dom.remove(),r.indexOf(t)<0&&t.destroy();for(let t of r)this.dom.appendChild(t.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>OB.scrollMargins.of((e=>{let n=e.plugin(t);return n&&0!=n.gutters.length&&n.fixed?e.textDirection==I$.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}:null}))});function ON(t){return Array.isArray(t)?t:[t]}function SN(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class xN{constructor(t,e,n){this.gutter=t,this.height=n,this.i=0,this.cursor=Kf.iter(t.markers,e.from)}addElement(t,e,n){let{gutter:i}=this,r=(e.top-this.height)/t.scaleY,o=e.height/t.scaleY;if(this.i==i.elements.length){let e=new CN(t,o,r,n);i.elements.push(e),i.dom.appendChild(e.dom)}else i.elements[this.i].update(t,o,r,n);this.height=e.bottom,this.i++}line(t,e,n){let i=[];SN(this.cursor,i,e.from),n.length&&(i=i.concat(n));let r=this.gutter.config.lineMarker(t,e,i);r&&i.unshift(r);let o=this.gutter;(0!=i.length||o.config.renderEmptyElements)&&this.addElement(t,e,i)}widget(t,e){let n=this.gutter.config.widgetMarker(t,e.widget,e),i=n?[n]:null;for(let n of t.state.facet(mN)){let r=n(t,e.widget,e);r&&(i||(i=[])).push(r)}i&&this.addElement(t,e,i)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class kN{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in e.domEventHandlers)this.dom.addEventListener(n,(i=>{let r,o=i.target;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let t=o.getBoundingClientRect();r=(t.top+t.bottom)/2}else r=i.clientY;let s=t.lineBlockAtHeight(r-t.documentTop);e.domEventHandlers[n](t,s,i)&&i.preventDefault()}));this.markers=ON(e.markers(t)),e.initialSpacer&&(this.spacer=new CN(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=ON(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let e=this.config.updateSpacer(this.spacer.markers[0],t);e!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[e])}let n=t.view.viewport;return!Kf.eq(this.markers,e,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(t)}destroy(){for(let t of this.elements)t.destroy()}}class CN{constructor(t,e,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,n,i)}update(t,e,n,i){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}(this.markers,i)||this.setMarkers(t,i)}setMarkers(t,e){let n="cm-gutterElement",i=this.dom.firstChild;for(let r=0,o=0;;){let s=o,a=r<e.length?e[r++]:null,l=!1;if(a){let t=a.elementClass;t&&(n+=" "+t);for(let t=o;t<this.markers.length;t++)if(this.markers[t].compare(a)){s=t,l=!0;break}}else s=this.markers.length;for(;o<s;){let t=this.markers[o++];if(t.toDOM){t.destroy(i);let e=i.nextSibling;i.remove(),i=e}}if(!a)break;a.toDOM&&(l?i=i.nextSibling:this.dom.insertBefore(a.toDOM(t),i)),l&&o++}this.dom.className=n,this.markers=e}destroy(){this.setMarkers(null,[])}}const AN=of.define(),MN=of.define(),EN=of.define({combine(t){return Vf(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let n=Object.assign({},t);for(let t in e){let i=n[t],r=e[t];n[t]=i?(t,e,n)=>i(t,e,n)||r(t,e,n):r}return n}})}});class PN extends pN{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function TN(t,e){return t.state.facet(EN).formatNumber(e,t.state)}const $N=vN.compute([EN],(t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(AN)},lineMarker(t,e,n){return n.some((t=>t.toDOM))?null:new PN(TN(t,t.state.doc.lineAt(e.from).number))},widgetMarker:(t,e,n)=>{for(let i of t.state.facet(MN)){let r=i(t,e,n);if(r)return r}return null},lineMarkerChange:t=>t.startState.facet(EN)!=t.state.facet(EN),initialSpacer(t){return new PN(TN(t,DN(t.state.doc.lines)))},updateSpacer(t,e){let n=TN(e.view,DN(e.view.state.doc.lines));return n==t.number?t:new PN(n)},domEventHandlers:t.facet(EN).domEventHandlers})));function DN(t){let e=9;for(;e<t;)e=10*e+9;return e}const RN=new class extends pN{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},BN=gN.compute(["selection"],(t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(RN.range(r)))}return Kf.of(e)}));function NN(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function LN(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function jN(t,e){if(!e.anchorNode)return!1;try{return LN(t,e.anchorNode)}catch(t){return!1}}function _N(t){return 3==t.nodeType?GN(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function IN(t,e,n,i){return!!n&&(HN(t,e,n,i,-1)||HN(t,e,n,i,1))}function zN(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function QN(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function HN(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:VN(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=zN(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(r<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=r<0?VN(t):0}}}function VN(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function WN(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function FN(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function qN(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}class XN{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?VN(e):0),n,Math.min(t.focusOffset,n?VN(n):0))}set(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i}}let KN,ZN=null;function YN(t){if(t.setActive)return t.setActive();if(ZN)return t.focus(ZN);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==ZN?{get preventScroll(){return ZN={preventScroll:!0},!0}}:void 0),!ZN){ZN=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function GN(t,e,n=e){let i=KN||(KN=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function UN(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function JN(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function tL(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function eL(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=VN(n)}else{if(!n.parentNode||QN(n))return null;i=zN(n),n=n.parentNode}}}function nL(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||QN(n))return null;i=zN(n)+1,n=n.parentNode}}}class iL{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new iL(t.parentNode,zN(t),e)}static after(t,e){return new iL(t.parentNode,zN(t)+1,e)}}const rL=[];class oL{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,i=this.dom,r=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let t=oL.get(n);(!t||!t.parent&&t.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(t,e),o.flags&=-8}if(n=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&n!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=sL(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&e&&e.node==i&&(e.written=!0);n;)n=sL(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let i=0==VN(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==i&&e.firstChild!=e.lastChild&&(i=t==e.firstChild?-1:1),t=e}n=i<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!oL.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let i=this.children[t];if(i.dom==n)return e;e+=i.length+i.breakAfter}}domBoundsAround(t,e,n=0){let i=-1,r=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],h=l+n.length;if(l<t&&h>e)return n.domBoundsAround(t,e,l);if(h>=t&&-1==i&&(i=a,r=l),l>e&&n.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+n.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=rL){this.markDirty();for(let i=t;i<e;i++){let t=this.children[i];t.parent==this&&n.indexOf(t)<0&&t.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new aL(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,i,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function sL(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}oL.prototype.breakAfter=0;class aL{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function lL(t,e,n,i,r,o,s,a,l){let{children:c}=t,h=c.length?c[e]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(e==i&&h&&!s&&!d&&o.length<2&&h.merge(n,r,o.length?u:null,0==n,a,l))){if(i<c.length){let t=c[i];t&&(r<t.length||t.breakAfter&&(null==u?void 0:u.breakAfter))?(e==i&&(t=t.split(r),r=0),!d&&u&&t.merge(0,r,u,!0,0,l)?o[o.length-1]=t:((r||t.children.length&&!t.children[0].length)&&t.merge(0,r,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(u?u.breakAfter=1:s=1),i++}for(h&&(h.breakAfter=s,n>0&&(!s&&o.length&&h.merge(n,h.length,o[0],!1,a,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,a,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function cL(t,e,n,i,r,o){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:h}=s.findPos(e,-1),u=e-n;for(let t of i)u+=t.length;t.length+=u,lL(t,c,h,a,l,i,0,r,o)}let hL="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},uL="undefined"!=typeof document?document:{documentElement:{style:{}}};const dL=/Edge\/(\d+)/.exec(hL.userAgent),fL=/MSIE \d/.test(hL.userAgent),pL=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(hL.userAgent),gL=!!(fL||pL||dL),mL=!gL&&/gecko\/(\d+)/i.test(hL.userAgent),vL=!gL&&/Chrome\/(\d+)/.exec(hL.userAgent),bL="webkitFontSmoothing"in uL.documentElement.style,yL=!gL&&/Apple Computer/.test(hL.vendor),wL=yL&&(/Mobile\/\w+/.test(hL.userAgent)||hL.maxTouchPoints>2);var OL={mac:wL||/Mac/.test(hL.platform),windows:/Win/.test(hL.platform),linux:/Linux|X11/.test(hL.platform),ie:gL,ie_version:fL?uL.documentMode||6:pL?+pL[1]:dL?+dL[1]:0,gecko:mL,gecko_version:mL?+(/Firefox\/(\d+)/.exec(hL.userAgent)||[0,0])[1]:0,chrome:!!vL,chrome_version:vL?+vL[1]:0,ios:wL,android:/Android\b/.test(hL.userAgent),webkit:bL,safari:yL,webkit_version:bL?+(/\bAppleWebKit\/(\d+)/.exec(hL.userAgent)||[0,0])[1]:0,tabSize:null!=uL.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class SL extends oL{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof SL)||this.length-(e-t)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),0))}split(t){let e=new SL(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new iL(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;0==e&&n<0||e==i&&n>=0?OL.chrome||OL.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let a=GN(t,r,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return OL.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l),s?WN(l,s<0):l||null}(this.dom,t,e)}}class xL extends oL{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(JN(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof xL&&n.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0)||(cL(this,t,e,n?n.children.slice():[],r-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>t&&e.push(n<t?o.split(t-n):o),i<0&&n>=t&&(i=r),n=s,r++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new xL(this.mark,e,o)}domAtPos(t){return AL(this,t)}coordsAt(t,e){return EL(this,t,e)}}class kL extends oL{static create(t,e,n){return new kL(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=kL.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof kL&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t instanceof kL&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return Td.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Td.empty}domAtPos(t){return(this.length?0==t:this.side>0)?iL.before(this.dom):iL.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:t>0;for(let e=o?i.length-1:0;r=i[e],!(t>0?0==e:e==i.length-1||r.top<r.bottom);e+=o?-1:1);return WN(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class CL extends oL{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof CL&&t.side==this.side}split(){return new CL(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?iL.before(this.dom):iL.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Td.empty}get isHidden(){return!0}}function AL(t,e){let n=t.dom,{children:i}=t,r=0;for(let t=0;r<i.length;r++){let o=i[r],s=t+o.length;if(!(s==t&&o.getSide()<=0)){if(e>t&&e<s&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=r;t>0;t--){let e=i[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=r;t<i.length;t++){let e=i[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new iL(n,0)}function ML(t,e,n){let i,{children:r}=t;n>0&&e instanceof xL&&r.length&&(i=r[r.length-1])instanceof xL&&i.mark.eq(e.mark)?ML(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function EL(t,e,n){let i=null,r=-1,o=null,s=-1;!function t(e,a){for(let l=0,c=0;l<e.children.length&&c<=a;l++){let h=e.children[l],u=c+h.length;u>=a&&(h.children.length?t(h,a-c):(!o||o.isHidden&&(n>0||PL(o,h)))&&(u>a||c==u&&h.getSide()>0)?(o=h,s=a-c):(c<a||c==u&&h.getSide()<0&&!h.isHidden)&&(i=h,r=a-c)),c=u}}(t,e);let a=(n<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?r:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=_N(e);return n[n.length-1]||null}(t)}function PL(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function TL(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}SL.prototype.children=kL.prototype.children=CL.prototype.children=rL;const $L=Object.create(null);function DL(t,e,n){if(t==e)return!0;t||(t=$L),e||(e=$L);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(-1==r.indexOf(o)||t[o]!==e[o]))return!1;return!0}function RL(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,"style"==r?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,"style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function BL(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class NL{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var LL=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(LL||(LL={}));class jL extends Wf{constructor(t,e,n,i){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new _L(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new zL(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,i=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:r,end:o}=QL(t,i);e=(r?i?-3e8:-1:5e8)-1,n=1+(o?i?2e8:1:-6e8)}return new zL(t,e,n,i,t.widget||null,!0)}static line(t){return new IL(t)}static set(t,e=!1){return Kf.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}jL.none=Kf.empty;class _L extends jL{constructor(t){let{start:e,end:n}=QL(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof _L&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&DL(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}_L.prototype.point=!1;class IL extends jL{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof IL&&this.spec.class==t.spec.class&&DL(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}IL.prototype.mapMode=Fd.TrackBefore,IL.prototype.point=!0;class zL extends jL{constructor(t,e,n,i,r,o){super(e,n,r,t),this.block=i,this.isReplace=o,this.mapMode=i?e<=0?Fd.TrackBefore:Fd.TrackAfter:Fd.TrackDel}get type(){return this.startSide!=this.endSide?LL.WidgetRange:this.startSide<=0?LL.WidgetBefore:LL.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof zL&&((e=this.widget)==(n=t.widget)||!!(e&&n&&e.compare(n)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,n}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function QL(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!=n?n:e,end:null!=i?i:e}}function HL(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}zL.prototype.point=!0;class VL extends oL{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,i,r,o){if(n){if(!(n instanceof VL))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),cL(this,t,e,n?n.children.slice():[],r,o),!0}split(t){let e=new VL;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:i}=this.childPos(t);i&&(e.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){DL(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){ML(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=TL(e,this.attrs||{})),n&&(this.attrs=TL({class:n},this.attrs||{}))}domAtPos(t){return AL(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?4&this.flags&&(JN(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(RL(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let i=this.dom.lastChild;for(;i&&oL.get(i)instanceof xL;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=oL.get(i))||void 0===n?void 0:n.isEditable)||OL.ios&&this.children.some((t=>t instanceof SL))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof SL)||/[^ -~]/.test(n.text))return null;let i=_N(n.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=EL(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let i=(e-t.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(t){return t instanceof VL&&0==this.children.length&&0==t.children.length&&DL(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,i=0;n<t.children.length;n++){let r=t.children[n],o=i+r.length;if(o>=e){if(r instanceof VL)return r;if(o>e)break}i=o+r.breakAfter}return null}}class WL extends oL{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof WL&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?iL.before(this.dom):iL.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new WL(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return rL}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Td.empty}domBoundsAround(){return null}become(t){return t instanceof WL&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)||(this.widget instanceof FL?null:WN(this.dom.getBoundingClientRect(),this.length?0==t:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class FL extends NL{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class qL{constructor(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof WL&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new VL),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(XL(new CL(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof WL||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(XL(new SL(this.text.slice(this.textOff,this.textOff+i)),e),n),this.atCursorPos=!0,this.textOff+=i,t-=i,n=0}}span(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)}point(t,e,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof zL){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof zL)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new WL(n.widget||KL.block,s,n));else{let o=kL.create(n.widget||KL.inline,s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&r<=i.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||r>i.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(c.append(XL(new CL(1),i),r),r=i.length+Math.max(0,r-i.length)),c.append(XL(o,i),r),this.atCursorPos=l,this.pendingBuffer=l?t<e||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,n,i,r){let o=new qL(t,e,n,r);return o.openEnd=Kf.spans(i,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function XL(t,e){for(let n of e)t=new xL(n,[t],t.length);return t}class KL extends NL{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}KL.inline=new KL("span"),KL.block=new KL("div");var ZL=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(ZL||(ZL={}));const YL=ZL.LTR,GL=ZL.RTL;function UL(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const JL=UL("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),tj=UL("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ej=Object.create(null),nj=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);ej[e]=n,ej[n]=-e}function ij(t){return t<=247?JL[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?tj[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const rj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class oj{get dir(){return this.level%2?GL:YL}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,i){let r=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<e:s.to>e:t[r].level>s.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function sj(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!sj(i.inner,r.inner))return!1}return!0}const aj=[];function lj(t,e,n,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let e=!0,h=!1;if(c==o.length||l<o[c].from){let t=aj[l];t!=a&&(e=!1,h=16==t)}let u=e||1!=a?null:[],d=e?i:i+1,f=l;t:for(;;)if(c<o.length&&f==o[c].from){if(h)break t;let p=o[c];if(!e)for(let t=p.to,e=c+1;;){if(t==n)break t;if(!(e<o.length&&o[e].from==t)){if(aj[t]==a)break t;break}t=o[e++].to}c++,u?u.push(p):(p.from>l&&s.push(new oj(l,p.from,d)),cj(t,p.direction==YL!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.to),f=p.to}else{if(f==n||(e?aj[f]!=a:aj[f]==a))break;f++}u?lj(t,l,f,i+1,r,u,s):l<f&&s.push(new oj(l,f,d)),l=f}else for(let l=n,c=o.length;l>e;){let n=!0,h=!1;if(!c||l>o[c-1].to){let t=aj[l-1];t!=a&&(n=!1,h=16==t)}let u=n||1!=a?null:[],d=n?i:i+1,f=l;t:for(;;)if(c&&f==o[c-1].to){if(h)break t;let p=o[--c];if(!n)for(let t=p.from,n=c;;){if(t==e)break t;if(!n||o[n-1].to!=t){if(aj[t-1]==a)break t;break}t=o[--n].from}u?u.push(p):(p.to<l&&s.push(new oj(p.to,l,d)),cj(t,p.direction==YL!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.from),f=p.from}else{if(f==e||(n?aj[f-1]!=a:aj[f-1]==a))break;f--}u?lj(t,f,l,i+1,r,u,s):f<l&&s.push(new oj(f,l,d)),l=f}}function cj(t,e,n,i,r,o,s){let a=e%2?2:1;!function(t,e,n,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:n,l=o?256:r;for(let e=s,n=l,i=l;e<a;e++){let r=ij(t.charCodeAt(e));512==r?r=n:8==r&&4==i&&(r=16),aj[e]=4==r?2:r,7&r&&(i=r),n=r}for(let t=s,e=l,i=l;t<a;t++){let r=aj[t];if(128==r)t<a-1&&e==aj[t+1]&&24&e?r=aj[t]=e:aj[t]=256;else if(64==r){let r=t+1;for(;r<a&&64==aj[r];)r++;let o=t&&8==e||r<n&&8==aj[r]?1==i?1:8:256;for(let e=t;e<r;e++)aj[e]=o;t=r-1}else 8==r&&1==i&&(aj[t]=1);e=r,7&r&&(i=r)}}}(t,r,o,i,a),function(t,e,n,i,r){let o=1==r?2:1;for(let s=0,a=0,l=0;s<=i.length;s++){let c=s?i[s-1].to:e,h=s<i.length?i[s].from:n;for(let e,n,i,s=c;s<h;s++)if(n=ej[e=t.charCodeAt(s)])if(n<0){for(let t=a-3;t>=0;t-=3)if(nj[t+1]==-n){let e=nj[t+2],n=2&e?r:4&e?1&e?o:r:0;n&&(aj[s]=aj[nj[t]]=n),a=t;break}}else{if(189==nj.length)break;nj[a++]=s,nj[a++]=e,nj[a++]=l}else if(2==(i=aj[s])||1==i){let t=i==r;l=t?0:1;for(let e=a-3;e>=0;e-=3){let n=nj[e+2];if(2&n)break;if(t)nj[e+2]|=2;else{if(4&n)break;nj[e+2]|=4}}}}}(t,r,o,i,a),function(t,e,n,i){for(let r=0,o=i;r<=n.length;r++){let s=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=s;l<a;){let s=aj[l];if(256==s){let s=l+1;for(;;)if(s==a){if(r==n.length)break;s=n[r++].to,a=r<n.length?n[r].from:e}else{if(256!=aj[s])break;s++}let c=1==o,h=c==(1==(s<e?aj[s]:i))?c?1:2:i;for(let e=s,i=r,o=i?n[i-1].to:t;e>l;)e==o&&(e=n[--i].from,o=i?n[i-1].to:t),aj[--e]=h;l=s}else o=s,l++}}}(r,o,i,a),lj(t,r,o,e,n,i,s)}function hj(t){return[new oj(0,t,0)]}let uj="";function dj(t,e,n,i,r){var o;let s=i.head-t.from,a=oj.find(e,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc),l=e[a],c=l.side(r,n);if(s==c){let t=a+=r?1:-1;if(t<0||t>=e.length)return null;l=e[a=t],s=l.side(!r,n),c=l.side(r,n)}let h=zd(t.text,s,l.forward(r,n));(h<l.from||h>l.to)&&(h=c),uj=t.text.slice(Math.min(s,h),Math.max(s,h));let u=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return u&&h==c&&u.level+(r?0:1)<l.level?ef.cursor(u.side(!r,n)+t.from,u.forward(r,n)?1:-1,u.level):ef.cursor(h+t.from,l.forward(r,n)?-1:1,l.level)}function fj(t,e,n){for(let i=e;i<n;i++){let e=ij(t.charCodeAt(i));if(1==e)return YL;if(2==e||4==e)return GL}return YL}const pj=of.define(),gj=of.define(),mj=of.define(),vj=of.define(),bj=of.define(),yj=of.define(),wj=of.define(),Oj=of.define(),Sj=of.define(),xj=of.define({combine:t=>t.some((t=>t))}),kj=of.define({combine:t=>t.some((t=>t))}),Cj=of.define();class Aj{constructor(t,e="nearest",n="nearest",i=5,r=5,o=!1){this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new Aj(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new Aj(ef.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Mj=$f.define({map:(t,e)=>t.map(e)}),Ej=$f.define();function Pj(t,e,n){let i=t.facet(vj);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Tj=of.define({combine:t=>!t.length||t[0]});let $j=0;const Dj=of.define();class Rj{constructor(t,e,n,i,r){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(t,e){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=e||{};return new Rj($j++,t,n,i,(t=>{let e=[Dj.of(t)];return o&&e.push(jj.of((e=>{let n=e.plugin(t);return n?o(n):jL.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return Rj.define((e=>new t(e)),e)}}class Bj{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(Pj(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){Pj(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){Pj(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Nj=of.define(),Lj=of.define(),jj=of.define(),_j=of.define(),Ij=of.define(),zj=of.define();function Qj(t,e){let n=t.state.facet(zj);if(!n.length)return n;let i=n.map((e=>e instanceof Function?e(t):e)),r=[];return Kf.spans(i,e.from,e.to,{point(){},span(t,n,i,o){let s=t-e.from,a=n-e.from,l=r;for(let t=i.length-1;t>=0;t--,o--){let n,r=i[t].spec.bidiIsolate;if(null==r&&(r=fj(e.text,s,a)),o>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==r)n.to=a,l=n.inner;else{let t={from:s,to:a,direction:r,inner:[]};l.push(t),l=t.inner}}}}),r}const Hj=of.define();function Vj(t){let e=0,n=0,i=0,r=0;for(let o of t.state.facet(Hj)){let s=o(t);s&&(null!=s.left&&(e=Math.max(e,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(i=Math.max(i,s.top)),null!=s.bottom&&(r=Math.max(r,s.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Wj=of.define();class Fj{constructor(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}join(t){return new Fj(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let i=0,r=0,o=0,s=0;;i++){let a=i==t.length?null:t[i],l=o-s,c=a?a.fromB:1e9;for(;r<e.length&&e[r]<c;){let t=e[r],i=e[r+1],o=Math.max(s,t),a=Math.min(c,i);if(o<=a&&new Fj(o+l,a+l,o,a).addToSet(n),i>c)break;r+=2}if(!a)return n;new Fj(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class qj{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Xd.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let i=[];this.changes.iterChangedRanges(((t,e,n,r)=>i.push(new Fj(t,e,n,r)))),this.changedRanges=i}static create(t,e,n){return new qj(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class Xj extends oL{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=jL.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new VL],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Fj(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?i=this.domChanged.newSel.head:function(t,e){let n=!1;return e&&t.iterChangedRanges(((t,i)=>{t<e.to&&i>e.from&&(n=!0)})),n}(t.changes,this.hasComposition)||t.selectionSet||(i=t.state.selection.main.head));let r=i>-1?function(t,e,n){let i=Kj(t,n);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new Fj(l.mapPos(o),l.mapPos(s),o,s),h=[];for(let e=r.parentNode;;e=e.parentNode){let n=oL.get(e);if(n instanceof xL)h.push({node:e,deco:n.mark});else{if(n instanceof VL||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:r,marks:h,line:e};if(e==t.contentDOM)return null;h.push({node:e,deco:new _L({inclusive:!0,attributes:BL(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:i}=this.hasComposition;n=new Fj(e,i,t.changes.mapPos(e,-1),t.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(OL.ie||OL.chrome)&&!r&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=function(t,e,n){let i=new Zj;return Kf.compare(t,e,n,i),i.changes}(this.decorations,this.updateDeco(),t.changes);return n=Fj.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,r),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=OL.chrome||OL.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=-8,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof WL&&t.widget instanceof FL&&r.push(t.dom);i.updateGaps(r)}updateChildren(t,e,n){let i=n?n.range.addToSet(t.slice()):t,r=this.childCursor(e);for(let t=i.length-1;;t--){let e=t>=0?i[t]:null;if(!e)break;let o,s,a,l,{fromA:c,toA:h,fromB:u,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>u){let t=qL.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=qL.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);s=t.breakAtStart,a=t.openStart,l=e.openEnd;let i=this.compositionView(n);e.breakAtStart?i.breakAfter=1:e.content.length&&i.merge(i.length,i.length,e.content[0],!1,e.openStart,0)&&(i.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&i.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),o=t.content.concat(i).concat(e.content)}else({content:o,breakAtStart:s,openStart:a,openEnd:l}=qL.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(h,1),{i:g,off:m}=r.findPos(c,-1);lL(this,g,m,f,p,o,s,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let t of e.effects)t.is(Ej)&&(this.editContextFormatting=t.value)}compositionView(t){let e=new SL(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new xL(n,[e],e.length);let n=new VL;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=oL.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),i=this.children[n.i];e(t.line,i);for(let r=t.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],e(r>=0?t.marks[r].node:t.text,i)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet(Tj)||this.dom.tabIndex>-1)&&jN(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||e||r))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(OL.gecko&&s.empty&&!this.hasComposition&&1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(t,a.node.childNodes[a.offset]||null))),a=l=new iL(t,0),o=!0}var c;let h=this.view.observer.selectionRange;!o&&h.focusNode&&(IN(a.node,a.offset,h.anchorNode,h.anchorOffset)&&IN(l.node,l.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,s))||(this.view.observer.ignore((()=>{OL.android&&OL.chrome&&this.dom.contains(h.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=NN(this.view.root);if(t)if(s.empty){if(OL.gecko){let t=(e=a.node,i=a.offset,1!=e.nodeType?0:(i&&"false"==e.childNodes[i-1].contentEditable?1:0)|(i<e.childNodes.length&&"false"==e.childNodes[i].contentEditable?2:0));if(t&&3!=t){let e=(1==t?eL:nL)(a.node,a.offset);e&&(a=new iL(e.node,e.offset))}}t.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(a.node,a.offset);try{t.extend(l.node,l.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),e.setEnd(l.node,l.offset),e.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(e)}var e,i;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new iL(h.anchorNode,h.anchorOffset),this.impreciseHead=l.precise?null:new iL(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&IN(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=NN(t.root),{anchorNode:i,anchorOffset:r}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=VL.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let h=t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=e.from&&n.collapse(i,r)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let i=t.offset;!e&&i<n.childNodes.length;i++){let t=oL.get(n.childNodes[i]);t instanceof VL&&(e=t.domAtPos(0))}for(let i=t.offset-1;!e&&i>=0;i--){let t=oL.get(n.childNodes[i]);t instanceof VL&&(e=t.domAtPos(t.length))}return e?new iL(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=oL.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof VL)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=r-s.breakAfter,l=a-s.length;if(a<t)break;if(l<=t&&(l<t||s.covers(-1))&&(a>t||s.covers(1))&&(!n||s instanceof VL&&!(n instanceof VL&&e>=0)))n=s,i=l;else if(n&&l==t&&a==t&&s instanceof WL&&Math.abs(e)<2){if(s.deco.startSide<0)break;o&&(n=null)}r=l}return n?n.coordsAt(t-i,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),i=this.children[e];if(!(i instanceof VL))return null;for(;i.children.length;){let{i:t,off:e}=i.childPos(n,1);for(;;t++){if(t==i.children.length)return null;if((i=i.children[t]).length)break}n=e}if(!(i instanceof SL))return null;let r=zd(i.text,n);if(r==n)return null;let o=GN(i.dom,n,r).getClientRects();for(let t=0;t<o.length;t++){let e=o[t];if(t==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:i}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==ZL.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],h=t+c.length;if(h>i)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),o){let e=c.dom.lastChild,i=e?_N(e):[];if(i.length){let e=i[i.length-1],o=a?e.right-n.left:n.right-e.left;o>s&&(s=o,this.minWidth=r,this.minWidthFrom=t,this.minWidthTo=h)}}}t=h+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?ZL.RTL:ZL.LTR}measureTextSize(){for(let t of this.children)if(t instanceof VL){let e=t.measureTextSize();if(e)return e}let t,e,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=_N(i.firstChild)[0];t=i.getBoundingClientRect().height,e=r?r.width/27:7,n=r?r.height:t,i.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new aL(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,i=0;;i++){let r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=(e.lineBlockAt(o).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(jL.replace({widget:new FL(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return jL.set(t)}updateDeco(){let t=1,e=this.view.state.facet(jj).map((e=>(this.dynamicDecorationMap[t++]="function"==typeof e)?e(this.view):e)),n=!1,i=this.view.state.facet(_j).map(((t,e)=>{let i="function"==typeof t;return i&&(n=!0),i?t(this.view):t}));for(i.length&&(this.dynamicDecorationMap[t++]=n,e.push(Kf.join(i))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}for(let e of this.view.state.facet(Cj))try{if(e(this.view,t.range,t))return!0}catch(t){Pj(this.view.state,t,"scroll handler")}let e,{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});let r=Vj(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(t,e,n,i,r,o,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let h=t,u=!1;h&&!u;)if(1==h.nodeType){let t,d=h==l.body,f=1,p=1;if(d)t=FN(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let e=h.getBoundingClientRect();({scaleX:f,scaleY:p}=qN(h,e)),t={left:e.left,right:e.left+h.clientWidth*f,top:e.top,bottom:e.top+h.clientHeight*p}}let g=0,m=0;if("nearest"==r)e.top<t.top?(m=e.top-(t.top+s),n>0&&e.bottom>t.bottom+m&&(m=e.bottom-t.bottom+s)):e.bottom>t.bottom&&(m=e.bottom-t.bottom+s,n<0&&e.top-m<t.top&&(m=e.top-(t.top+s)));else{let i=e.bottom-e.top,o=t.bottom-t.top;m=("center"==r&&i<=o?e.top+i/2-o/2:"start"==r||"center"==r&&n<0?e.top-s:e.bottom-o+s)-t.top}if("nearest"==i?e.left<t.left?(g=e.left-(t.left+o),n>0&&e.right>t.right+g&&(g=e.right-t.right+o)):e.right>t.right&&(g=e.right-t.right+o,n<0&&e.left<t.left+g&&(g=e.left-(t.left+o))):g=("center"==i?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==i==a?e.left-o:e.right-(t.right-t.left)+o)-t.left,g||m)if(d)c.scrollBy(g,m);else{let t=0,n=0;if(m){let t=h.scrollTop;h.scrollTop+=m/p,n=(h.scrollTop-t)*p}if(g){let e=h.scrollLeft;h.scrollLeft+=g/f,t=(h.scrollLeft-e)*f}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(i="nearest"),n&&Math.abs(n-m)<1&&(r="nearest")}if(d)break;(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)&&(e={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)}),h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,s),-s),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==ZL.LTR)}}function Kj(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=eL(n.focusNode,n.focusOffset),r=nL(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let e=oL.get(r.node);if(!e||e instanceof SL&&e.text!=r.node.nodeValue)o=r;else if(t.docView.lastCompositionAfterCursor){let t=oL.get(i.node);!t||t instanceof SL&&t.text!=i.node.nodeValue||(o=r)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let Zj=class{constructor(){this.changes=[]}compareRange(t,e){HL(t,e,this.changes)}comparePoint(t,e){HL(t,e,this.changes)}boundChange(t){HL(t,t,this.changes)}};function Yj(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Gj(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Uj(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Jj(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function t_(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function e_(t,e,n){let i,r,o,s,a,l,c,h,u=!1;for(let d=t.firstChild;d;d=d.nextSibling){let t=_N(d);for(let f=0;f<t.length;f++){let p=t[f];r&&Uj(r,p)&&(p=Jj(t_(p,r.bottom),r.top));let g=Yj(e,p),m=Gj(n,p);if(0==g&&0==m)return 3==d.nodeType?n_(d,e,n):e_(d,e,n);if(!i||s>m||s==m&&o>g){i=d,r=p,o=g,s=m;let a=m?n<p.top?-1:1:g?e<p.left?-1:1:0;u=!a||(a>0?f<t.length-1:f>0)}0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=d,c=p):n<p.top&&(!h||h.top>p.top)&&(l=d,h=p):c&&Uj(c,p)?c=t_(c,p.bottom):h&&Uj(h,p)&&(h=Jj(h,p.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=l,r=h),!i)return{node:t,offset:0};let d=Math.max(r.left,Math.min(r.right,e));return 3==i.nodeType?n_(i,d,n):u&&"false"!=i.contentEditable?e_(i,d,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0)}}function n_(t,e,n){let i=t.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let i=GN(t,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<o){let n=e>=(c.left+c.right)/2,i=n;if((OL.chrome||OL.gecko)&&GN(t,a).getBoundingClientRect().left==c.right&&(i=!n),h<=0)return{node:t,offset:a+(i?1:0)};r=a+(i?1:0),o=h}}}return{node:t,offset:r>-1?r:s>0?t.nodeValue.length:0}}function i_(t,e,n,i=-1){var r,o;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:h,y:u}=e,d=u-l;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,r=!1;s=t.elementAtHeight(d),s.type!=LL.Text;)for(;d=i>0?s.bottom+e:s.top-e,!(d>=0&&d<=c);){if(r)return n?null:0;r=!0,i=-i}u=l+d;let f=s.from;if(f<t.viewport.from)return 0==t.viewport.from?0:n?null:r_(t,a,s,h,u);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:r_(t,a,s,h,u);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,m=g.elementFromPoint(h,u);m&&!t.contentDOM.contains(m)&&(m=null),m||(h=Math.max(a.left+1,Math.min(a.right-1,h)),m=g.elementFromPoint(h,u),m&&!t.contentDOM.contains(m)&&(m=null));let v,b=-1;if(m&&0!=(null===(r=t.docView.nearest(m))||void 0===r?void 0:r.isEditable)){if(p.caretPositionFromPoint){let t=p.caretPositionFromPoint(h,u);t&&({offsetNode:v,offset:b}=t)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(h,u);e&&(({startContainer:v,startOffset:b}=e),(!t.contentDOM.contains(v)||OL.safari&&function(t,e,n){let i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return GN(t,i-1,i).getBoundingClientRect().left>n}(v,b,h)||OL.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():GN(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(v,b,h))&&(v=void 0))}v&&(b=Math.min(VN(v),b))}if(!v||!t.docView.dom.contains(v)){let e=VL.find(t.docView,f);if(!e)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:b}=e_(e.dom,h,u))}let y=t.docView.nearest(v);if(!y)return null;if(y.isWidget&&1==(null===(o=y.dom)||void 0===o?void 0:o.nodeType)){let t=y.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?y.posAtStart:y.posAtEnd}return y.localPosFromDOM(v,b)+y.posAtStart}function r_(t,e,n,i,r){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;o+=Math.floor((r-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+ap(s,o,t.state.tabSize)}function o_(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),s=t.textDirectionAt(r.from);for(let a=e,l=null;;){let e=dj(r,o,s,a,n),c=uj;if(!e){if(r.number==(n?t.state.doc.lines:1))return a;c="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),e=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return e;l=i(c)}a=e}}function s_(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,((t,r,o)=>{if(e>t&&e<r){let o=i||n||(e-t<r-e?-1:1);e=o<0?t:r,i=o}}));if(!i)return e}}function a_(t,e,n){let i=s_(t.state.facet(Ij).map((e=>e(t))),n.from,e.head>n.from?-1:1);return i==n.from?n:ef.cursor(i,i<n.from?1:-1)}const l_="￿";class c_{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Hf.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=l_}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i);let t=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==e)break;let o=oL.get(i),s=oL.get(r);(o&&s?o.breakAfter:(o?o.breakAfter:QN(i))||QN(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>t)&&this.lineBreak(),i=r}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(r=i.exec(e))&&(o=r.index,s=r[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=oL.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(h_(t,n.node,n.offset)?e:0))}}function h_(t,e,n){for(;;){if(!e||n<VN(e))return!1;if(e==t)return!0;n=zN(e)+1,e=e.parentNode}}class u_{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class d_{constructor(t,e,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=r||o?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new u_(n,i)),r==n&&o==i||e.push(new u_(r,o))),e}(t),n=new c_(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?ef.single(n+e,i+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=r&&r.node==e.focusNode&&r.offset==e.focusOffset||!LN(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),i=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!LN(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset),s=t.viewport;if((OL.ios||OL.chrome)&&t.state.selection.main.empty&&n!=i&&(s.from>0||s.to<t.state.doc.length)){let e=Math.min(n,i),r=Math.max(n,i),o=s.from-e,a=s.to-r;0!=o&&1!=o&&0!=e||0!=a&&-1!=a&&r!=t.state.doc.length||(n=0,i=t.state.doc.length)}this.newSel=ef.single(i,n)}}}function f_(t,e){let n,{newSel:i}=e,r=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:i,to:s}=e.bounds,a=r.from,l=null;(8===o||OL.android&&e.text.length<s-i)&&(a=r.to,l="end");let c=function(t,e,n,i){let r=Math.min(t.length,e.length),o=0;for(;o<r&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;return"end"==i&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(t.state.doc.sliceString(i,s,l_),e.text,a-i,l);c&&(OL.chrome&&13==o&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==l_+l_&&c.toB--,n={from:i+c.from,to:i+c.toA,insert:Td.of(e.text.slice(c.from,c.toB).split(l_))})}else i&&(!t.hasFocus&&t.state.facet(Tj)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(OL.mac||OL.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Td.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:OL.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(i&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Td.of([" "])}),n)return p_(t,n,i,o);if(i&&!i.main.eq(r)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:e,userEvent:n}),!0}return!1}function p_(t,e,n,i=-1){if(OL.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(OL.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&" "==t.state.sliceDoc(e.from,r.from))&&1==e.insert.length&&2==e.insert.lines&&UN(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&0==e.insert.length||8==i&&e.insert.length<e.to-e.from&&e.to>r.head)&&UN(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&0==e.insert.length&&UN(t.contentDOM,"Delete",46)))return!0;let o,s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a=()=>o||(o=function(t,e,n){let i,r=t.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=o.from<e.from?r.sliceDoc(o.from,e.from):"",s=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=r.changes(e),a=n&&n.main.to<=s.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let l,c=t.state.sliceDoc(e.from,e.to),h=n&&Kj(t,n.main.head);if(h){let t=e.insert.length-(e.to-e.from);l={from:h.from,to:h.to-t}}else l=t.state.doc.lineAt(o.head);let u=o.to-e.to,d=o.to-o.from;i=r.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let i=n.to-u,h=i-c.length;if(n.to-n.from!=d||t.state.sliceDoc(h,i)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=r.changes({from:h,to:i,insert:e.insert}),p=n.to-o.to;return{changes:f,range:a?ef.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else i={changes:s,selection:a&&r.selection.replaceRange(a)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:s,scrollIntoView:!0})}(t,e,n));return t.state.facet(yj).some((n=>n(t,e.from,e.to,s,a)))||t.dispatch(a()),!0}class g_{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,OL.safari&&t.contentDOM.addEventListener("input",(()=>null)),OL.gecko&&function(t){Q_.has(t)||(Q_.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,i=e.target;i!=t.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=oL.get(i))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||(0!=this.view.updateState?Promise.resolve().then((()=>this.runHandlers(t.type,t))):this.runHandlers(t.type,t)))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=function(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let i in t.domEventHandlers){let r=t.domEventHandlers[i];r&&n(i).handlers.push(m_(e.value,r))}if(t&&t.domEventObservers)for(let i in t.domEventObservers){let r=t.domEventObservers[i];r&&n(i).observers.push(m_(e.value,r))}}for(let t in S_)n(t).handlers.push(S_[t]);for(let t in x_)n(t).observers.push(x_[t]);return e}(t),n=this.handlers,i=this.view.contentDOM;for(let t in e)if("scroll"!=t){let r=!e[t].handlers.length,o=n[t];o&&r!=!o.handlers.length&&(i.removeEventListener(t,this.handleEvent),o=null),o||i.addEventListener(t,this.handleEvent,{passive:r})}for(let t in n)"scroll"==t||e[t]||i.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=t.keyCode&&y_.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),OL.android&&OL.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!OL.ios||t.synthetic||t.altKey||t.metaKey||!((e=v_.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||b_.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&!("Enter"==e.key&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString()))&&(this.pendingIOSKey=void 0,UN(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(OL.safari&&!OL.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function m_(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(t){Pj(n.state,t)}}}const v_=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],b_="dthko",y_=[16,17,18,20,91,92,224,225];function w_(t){return.7*Math.max(0,t)+8}class O_{constructor(t,e,n,i){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=function(t){let e,n,i=t.ownerDocument;for(let r=t.parentNode;r&&!(r==i.body||e&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:e,y:n}}(t.contentDOM),this.atoms=t.state.facet(Ij).map((e=>e(t)));let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Hf.allowMultipleSelections)&&function(t,e){let n=t.state.facet(pj);return n.length?n[0](e):OL.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=NN(t.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let t=0;t<r.length;t++){let n=r[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=N_(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(e=this.startEvent,n=t,Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))<10))return;var e,n;this.select(this.lastEvent=t);let i=0,r=0,o=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=Vj(this.view);t.clientX-c.left<=o+6?i=-w_(o-t.clientX):t.clientX+c.right>=a-6&&(i=w_(t.clientX-a)),t.clientY-c.top<=s+6?r=-w_(s-t.clientY):t.clientY+c.bottom>=l-6&&(r=w_(t.clientY-l)),this.setScrollSpeed(i,r)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n],r=null;if(i.empty){let t=s_(this.atoms,i.from,0);t!=i.from&&(r=ef.cursor(t,-1))}else{let t=s_(this.atoms,i.from,-1),e=s_(this.atoms,i.to,1);t==i.from&&e==i.to||(r=ef.range(i.from==i.anchor?t:e,i.from==i.head?t:e))}r&&(e||(e=t.ranges.slice()),e[n]=r)}return e?ef.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&n.eq(e.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some((t=>t.isUserEvent("input.type")))?this.destroy():this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const S_=Object.create(null),x_=Object.create(null),k_=OL.ie&&OL.ie_version<15||OL.ios&&OL.webkit_version<604;function C_(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function A_(t,e){e=C_(t.state,Oj,e);let n,{state:i}=t,r=1,o=i.toText(e),s=o.lines==i.selection.ranges.length;if(null!=j_&&i.selection.ranges.every((t=>t.empty))&&j_==o.toString()){let t=-1;n=i.changeByRange((n=>{let a=i.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=i.toText((s?o.line(r++).text:e)+i.lineBreak);return{changes:{from:a.from,insert:l},range:ef.cursor(n.from+l.length)}}))}else n=s?i.changeByRange((t=>{let e=o.line(r++);return{changes:{from:t.from,to:t.to,insert:e.text},range:ef.cursor(t.from+e.length)}})):i.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function M_(t,e,n,i){if(1==i)return ef.cursor(e,n);if(2==i)return function(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),o=e-r.from;if(0==r.length)return ef.cursor(e);0==o?n=1:o==r.length&&(n=-1);let s=o,a=o;n<0?s=zd(r.text,o,!1):a=zd(r.text,o);let l=i(r.text.slice(s,a));for(;s>0;){let t=zd(r.text,s,!1);if(i(r.text.slice(t,s))!=l)break;s=t}for(;a<r.length;){let t=zd(r.text,a);if(i(r.text.slice(a,t))!=l)break;a=t}return ef.range(s+r.from,a+r.from)}(t.state,e,n);{let n=VL.find(t.docView,e),i=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:i.from,o=n?n.posAtEnd:i.to;return o<t.state.doc.length&&o==i.to&&o++,ef.range(r,o)}}x_.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},S_.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&0!=t.inputState.tabFocusMode&&(t.inputState.tabFocusMode=Date.now()+2e3),!1),x_.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},x_.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},S_.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(mj))if(n=i(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=T_(t,e),i=N_(e),r=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),r=r.map(t.changes))},get(e,o,s){let a,l=T_(t,e),c=M_(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let e=M_(t,n.pos,n.bias,i),r=Math.min(e.from,c.from),o=Math.max(e.to,c.to);c=r<c.from?ef.range(r,o):ef.range(o,r)}return o?r.replaceRange(r.main.extend(c.from,c.to)):s&&1==i&&r.ranges.length>1&&(a=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ef.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(r,l.pos))?a:s?r.addRange(c):ef.create([c])}}}(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new O_(t,e,n,i)),i&&t.observer.ignore((()=>{YN(t.contentDOM);let e=t.root.activeElement;e&&!e.contains(t.contentDOM)&&e.blur()}));let r=t.inputState.mouseSelection;if(r)return r.start(e),!1===r.dragging}return!1};let E_=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function P_(t,e,n,i){let r=VL.find(t.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&E_(n,i,s))return-1;let a=r.coordsAt(o,1);return a&&E_(n,i,a)?1:s&&s.bottom>=i?-1:1}function T_(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:P_(t,n,e.clientX,e.clientY)}}const $_=OL.ie&&OL.ie_version<=11;let D_=null,R_=0,B_=0;function N_(t){if(!$_)return t.detail;let e=D_,n=B_;return D_=t,B_=Date.now(),R_=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(R_+1)%3:1}function L_(t,e,n,i){if(!(n=C_(t.state,Oj,n)))return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=i&&o&&function(t,e){let n=t.state.facet(gj);return n.length?n[0](e):OL.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:o.from,to:o.to}:null,a={from:r,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}S_.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let t=i.posAtStart,e=t+i.length;(t>=n.to||e<=n.from)&&(n=ef.range(t,e))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",C_(t.state,Sj,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1},S_.dragend=t=>(t.inputState.draggedContent=null,!1),S_.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,o=()=>{++r==n.length&&L_(t,e,i.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return L_(t,e,n,!0),!0}return!1},S_.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=k_?null:e.clipboardData;return n?(A_(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),A_(t,n.value)}),50)}(t),!1)};let j_=null;S_.copy=S_.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=function(t){let e=[],n=[],i=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:C_(t,Sj,e.join(t.lineBreak)),ranges:n,linewise:i}}(t.state);if(!n&&!r)return!1;j_=r?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=k_?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout((()=>{i.remove(),t.focus()}),50)}(t,n),!1)};const __=Ef.define();function I_(t,e){let n=[];for(let i of t.facet(wj)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:__.of(!0)}):null}function z_(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=I_(t.state,e);n?t.dispatch(n):t.update([])}}),10)}x_.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),z_(t)},x_.blur=t=>{t.observer.clearSelectionRange(),z_(t)},x_.compositionstart=x_.compositionupdate=t=>{t.observer.editContext||(null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))},x_.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,OL.chrome&&OL.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50))},x_.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},S_.beforeinput=(t,e)=>{var n,i;if("insertReplacementText"==e.inputType&&t.observer.editContext){let i=null===(n=e.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),r=e.getTargetRanges();if(i&&r.length){let e=r[0],n=t.posAtDOM(e.startContainer,e.startOffset),o=t.posAtDOM(e.endContainer,e.endOffset);return p_(t,{from:n,to:o,insert:t.state.toText(i)},null),!0}}let r;if(OL.chrome&&OL.android&&(r=v_.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return OL.ios&&"deleteContentForward"==e.inputType&&t.observer.flushSoon(),OL.safari&&"insertText"==e.inputType&&t.inputState.composing>=0&&setTimeout((()=>x_.compositionend(t,e)),20),!1};const Q_=new Set,H_=["pre-wrap","normal","pre-line","break-spaces"];let V_=!1;function W_(){V_=!1}class F_{constructor(t){this.lineWrapping=t,this.doc=Td.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return H_.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e}refresh(t,e,n,i,r,o){let s=H_.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let t=0;t<o.length;t++){let e=o[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return a}}class q_{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class X_{constructor(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?LL.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof zL?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new X_(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var K_=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(K_||(K_={}));const Z_=.001;class Y_{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>Z_&&(V_=!0),this.height=t)}replace(t,e,n){return Y_.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,i){let r=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:h}=i[s],u=r.lineAt(a,K_.ByPosNoHeight,n.setDoc(e),0,0),d=u.to>=l?u:r.lineAt(l,K_.ByPosNoHeight,n,0,0);for(h+=d.to-l,l=d.to;s>0&&u.from<=i[s-1].toA;)a=i[s-1].fromA,c=i[s-1].fromB,s--,a<u.from&&(u=r.lineAt(a,K_.ByPosNoHeight,n,0,0));c+=u.from-a,a=u.from;let f=iI.build(n.setDoc(o),t,c,h);r=G_(r,r.replace(a,l,f))}return r.updateHeight(n,0)}static empty(){return new J_(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,i=0,r=0;for(;;)if(e==n)if(i>2*r){let r=t[e-1];r.break?t.splice(--e,1,r.left,null,r.right):t.splice(--e,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,r-=e.size}}else if(i<r){let n=t[e++];n&&(i+=n.size)}else{let e=t[--n];e&&(r+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new eI(Y_.of(t.slice(0,e)),o,Y_.of(t.slice(n)))}}function G_(t,e){return t==e?t:(t.constructor!=e.constructor&&(V_=!0),e)}Y_.prototype.size=1;class U_ extends Y_{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,i){return new X_(i,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(t,e,n,i,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,n,i,r))}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class J_ extends U_{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,i){return new X_(i,this.length,n,this.height,this.breaks)}replace(t,e,n){let i=n[0];return 1==n.length&&(i instanceof J_||i instanceof tI&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof tI?i=new J_(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Y_.of(n)}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class tI extends Y_{constructor(t){super(t,0)}heightMetrics(t,e){let n,i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-i+1,s=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*o);n=e/o,this.length>o+1&&(s=(this.height-e)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:s}}blockAt(t,e,n,i){let{firstLine:r,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(e,i);if(e.lineWrapping){let r=i+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),o=e.doc.lineAt(r),l=s+o.length*a,c=Math.max(n,t-l/2);return new X_(o.from,o.length,c,l,0)}{let i=Math.max(0,Math.min(o-r,Math.floor((t-n)/s))),{from:a,length:l}=e.doc.line(r+i);return new X_(a,l,n+s*i,s,0)}}lineAt(t,e,n,i,r){if(e==K_.ByHeight)return this.blockAt(t,n,i,r);if(e==K_.ByPosNoHeight){let{from:e,to:i}=n.doc.lineAt(t);return new X_(e,i-e,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,r),l=n.doc.lineAt(t),c=s+l.length*a,h=l.number-o,u=i+s*h+a*(l.from-r-h);return new X_(l.from,l.length,Math.max(i,Math.min(u,i+this.height-c)),c,0)}forEachLine(t,e,n,i,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,r);for(let c=t,h=i;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-s;h+=a*n+l*(t-r-n)}let i=a+l*e.length;o(new X_(e.from,e.length,h,i,0)),h+=i,c=e.to+1}}replace(t,e,n){let i=this.length-e;if(i>0){let t=n[n.length-1];t instanceof tI?n[n.length-1]=new tI(t.length+i):n.push(null,new tI(i-1))}if(t>0){let e=n[0];e instanceof tI?n[0]=new tI(t+e.length):n.unshift(new tI(t-1),null)}return Y_.of(n)}decomposeLeft(t,e){e.push(new tI(t-1),null)}decomposeRight(t,e){e.push(null,new tI(this.length-t-1))}updateHeight(t,e=0,n=!1,i){let r=e+this.length;if(i&&i.from<=e+this.length&&i.more){let n=[],o=Math.max(e,i.from),s=-1;for(i.from>e&&n.push(new tI(i.from-e-1).updateHeight(t,e));o<=r&&i.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==s?s=r:Math.abs(r-s)>=Z_&&(s=-2);let a=new J_(e,r);a.outdated=!1,n.push(a),o+=e+1}o<=r&&n.push(null,new tI(r-o).updateHeight(t,o));let a=Y_.of(n);return(s<0||Math.abs(a.height-this.height)>=Z_||Math.abs(s-this.heightMetrics(t,e).perLine)>=Z_)&&(V_=!0),G_(this,a)}return(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class eI extends Y_{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,i){let r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)}lineAt(t,e,n,i,r){let o=i+this.left.height,s=r+this.left.length+this.break,a=e==K_.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==K_.ByPosNoHeight?K_.ByPosNoHeight:K_.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,r).join(l)}forEachLine(t,e,n,i,r,o){let s=i+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,i,r,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{let l=this.lineAt(a,K_.ByPos,n,i,r);t<l.from&&this.left.forEachLine(t,l.from-1,n,i,r,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}}replace(t,e,n){let i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let t of n)r.push(t);if(t>0&&nI(r,o-1),e<this.length){let t=r.length;this.decomposeRight(e,r),nI(r,t)}return Y_.of(r)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?Y_.of(this.break?[t,null,e]:[t,e]):(this.left=G_(this.left,t),this.right=G_(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,i){let{left:r,right:o}=this,s=e+r.length+this.break,a=null;return i&&i.from<=e+r.length&&i.more?a=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=s+o.length&&i.more?a=o=o.updateHeight(t,s,n,i):o.updateHeight(t,s,n),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function nI(t,e){let n,i;null==t[e]&&(n=t[e-1])instanceof tI&&(i=t[e+1])instanceof tI&&t.splice(e-1,3,new tI(n.length+1+i.length))}class iI{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof J_?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new J_(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=e-t;n.block?this.addBlock(new U_(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new J_(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new tI(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof J_)return t;let e=new J_(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),i.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof J_||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new J_(0,-1));let n=t;for(let t of this.nodes)t instanceof J_&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,i){let r=new iI(n,t);return Kf.spans(e,n,i,r,0),r.finish(n)}}class rI{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&HL(t,e,this.changes,5)}}function oI(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=i.body;)if(1==e.nodeType){let n=e,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();o=Math.max(o,i.left),s=Math.min(s,i.right),a=Math.max(a,i.top),l=Math.min(e==t.parentNode?r.innerHeight:l,i.bottom)}e="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function sI(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class aI{constructor(t,e,n,i){this.from=t,this.to=e,this.size=n,this.displaySize=i}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(t,e){return jL.replace({widget:new lI(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class lI extends NL{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class cI{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=fI,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ZL.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(Lj).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new F_(e),this.stateDeco=t.facet(jj).filter((t=>"function"!=typeof t)),this.heightMap=Y_.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle.setDoc(t.doc),[new Fj(0,0,0,t.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=jL.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let i=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>i>=t&&i<=e))){let{from:e,to:n}=this.lineBlockAt(i);t.push(new hI(e,n))}}return this.viewports=t.sort(((t,e)=>t.from-e.from)),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?fI:new pI(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(gI(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(jj).filter((t=>"function"!=typeof t));let i=t.changedRanges,r=Fj.extendWithRanges(i,function(t,e,n){let i=new rI;return Kf.compare(t,e,n,i,0),i.changes}(n,this.stateDeco,t?t.changes:Xd.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);W_(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||V_)&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,t.flags|=this.updateForViewport(),(l||!t.changes.empty||2&t.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(kj)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?ZL.RTL:ZL.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),s=e.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:t,scaleY:n}=qN(e,s);(t>.005&&Math.abs(this.scaleX-t)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=t,this.scaleY=n,l|=16,o=a=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,u=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==u||(this.paddingTop=h,this.paddingBottom=u,l|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=16);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=tL(t.scrollDOM);let f=(this.printing?sI:oI)(e,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!function(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}(t.dom))return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=t.scrollDOM.clientHeight,l|=16),a){let e=t.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(e)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=t.docView.measureTextSize();o=n>0&&i.refresh(r,n,s,a,v/s,e),o&&(t.docView.minWidth=0,l|=16)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),W_();for(let n of this.viewports){let r=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(o?Y_.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle,[new Fj(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new q_(n.from,r))}V_&&(l|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new hI(i.lineAt(o-1e3*n,K_.ByHeight,r,0,0).from,i.lineAt(s+1e3*(1-n),K_.ByHeight,r,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=i.lineAt(t,K_.ByPos,r,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-o,a=new hI(i.lineAt(n-500,K_.ByHeight,r,0,0).from,i.lineAt(n+o+500,K_.ByHeight,r,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new hI(this.heightMap.lineAt(n,K_.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,K_.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,K_.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,K_.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||i<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||r>=s+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let i of t)e.touchesRange(i.from,i.to)||n.push(new aI(e.mapPos(i.from),e.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=ZL.LTR&&!n)return[];let s=[],a=(i,o,l,c)=>{if(o-i<r)return;let h=this.state.selection.main,u=[h.from];h.empty||u.push(h.to);for(let t of u)if(t>i&&t<o)return a(i,t-10,l,c),void a(t+10,o,l,c);let d=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-i)<r&&Math.abs(t.to-o)<r&&!u.some((e=>t.from<e&&t.to>e))));if(!d){if(o<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=o&&t.to>=o))){let t=e.moveToLineBoundary(ef.cursor(o),!1,!0).head;t>i&&(o=t)}let t=this.gapSize(l,i,o,c);d=new aI(i,o,t,n||t<2e6?t:2e6)}s.push(d)},l=e=>{if(e.length<o||e.type!=LL.Text)return;let r=function(t,e,n){let i=[],r=t,o=0;return Kf.spans(n,t,e,{span(){},point(t,e){t>r&&(i.push({from:r,to:t}),o+=t-r),r=e}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}(e.from,e.to,this.stateDeco);if(r.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let t,n,o=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let i=dI(r,c),s=((this.visibleBottom-this.visibleTop)/2+o)/e.height;t=i-s,n=i+s}else t=(this.visibleTop-e.top-o)/e.height,n=(this.visibleBottom-e.top+o)/e.height;s=uI(r,t),l=uI(r,n)}else{let n=r.total*this.heightOracle.charWidth,o=i*this.heightOracle.charWidth,a=0;if(n>2e6)for(let n of t)n.from>=e.from&&n.from<e.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let h,u,d=this.pixelViewport.left+a,f=this.pixelViewport.right+a;if(null!=c){let t=dI(r,c),e=((f-d)/2+o)/n;h=t-e,u=t+e}else h=(d-o)/n,u=(f+o)/n;s=uI(r,h),l=uI(r,u)}s>e.from&&a(e.from,s,e,r),l<e.to&&a(l,e.to,e,r)};for(let t of this.viewportLines)Array.isArray(t.type)?t.type.forEach(l):l(t);return s}gapSize(t,e,n,i){let r=dI(i,n)-dI(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(t){aI.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=jL.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Kf.spans(e,this.viewport.from,this.viewport.to,{span(t,e){n.push({from:t,to:e})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let e=0;e<n.length&&!(8&i);e++){let r=this.visibleRanges[e],o=n[e];r.from==o.from&&r.to==o.to||(i|=4,t&&t.mapPos(r.from,-1)==o.from&&t.mapPos(r.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||gI(this.heightMap.lineAt(t,K_.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((e=>e.top<=t&&e.bottom>=t))||gI(this.heightMap.lineAt(this.scaler.fromDOM(t),K_.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return gI(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class hI{constructor(t,e){this.from=t,this.to=e}}function uI({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:r}=e[t],o=r-n;if(i<=o)return n+i;i-=o}}function dI(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}const fI={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class pI{constructor(t,e,n){let i=0,r=0,o=0;this.viewports=n.map((({from:n,to:r})=>{let o=e.lineAt(n,K_.ByPos,t,0,0).top,s=e.lineAt(r,K_.ByPos,t,0,0).bottom;return i+=s-o,{from:n,to:r,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(e.height-i);for(let t of this.viewports)t.domTop=o+(t.top-r)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),r=t.bottom}toDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}}fromDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}}eq(t){return t instanceof pI&&this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every(((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to))}}function gI(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new X_(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map((t=>gI(t,e))):t._content)}const mI=of.define({combine:t=>t.join(" ")}),vI=of.define({combine:t=>t.indexOf(!0)>-1}),bI=up.newName(),yI=up.newName(),wI=up.newName(),OI={"&light":"."+yI,"&dark":"."+wI};function SI(t,e,n){return new up(e,{finish(e){return/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e}})}const xI=SI("."+bI,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},OI),kI={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},CI=OL.ie&&OL.ie_version<=11;class AI{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new XN,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(OL.ie&&OL.ie_version<=11||OL.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===t.constructor.EDIT_CONTEXT||OL.chrome&&OL.chrome_version<126||(this.editContext=new PI(t),t.state.facet(Tj)&&(t.contentDOM.editContext=this.editContext.editContext)),CI&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(t){("change"!=t.type&&t.type||t.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(Tj)?n.root.activeElement!=this.dom:!jN(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(t)?e||(this.selectionChanged=!1):(OL.ie&&OL.ie_version<=11||OL.android&&OL.chrome)&&!n.state.selection.main.empty&&i.focusNode&&IN(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=NN(t.root);if(!e)return!1;let n=OL.safari&&11==t.root.nodeType&&t.root.activeElement==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return EI(t,n)}let n=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?EI(t,n):null}(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let i=jN(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,VN(n));;)if(i){if(1!=n.nodeType)return!1;let t=n.childNodes[i-1];"false"==t.contentEditable?i--:(n=t,i=VN(n))}else{if(n==t)return!0;i=zN(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,kI),CI&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),CI&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&UN(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,i=!1;for(let r of t){let t=this.readMutation(r);t&&(t.typeOver&&(i=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:i}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),i=this.selectionChanged&&jN(this.dom,this.selectionRange);if(t<0&&!i)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new d_(this.view,t,e,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,i=f_(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=MI(e,t.previousSibling||t.target.previousSibling,-1),i=MI(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(Tj)!=t.state.facet(Tj)&&(t.view.contentDOM.editContext=t.state.facet(Tj)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function MI(t,e,n){for(;e;){let i=oL.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function EI(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return IN(s.node,s.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}class PI{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=e=>{let n=t.state.selection.main,{anchor:i,head:r}=n,o=this.toEditorPos(e.updateRangeStart),s=this.toEditorPos(e.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:e.updateRangeStart,editorBase:o,drifted:!1});let a={from:o,to:s,insert:Td.of(e.text.split("\n"))};if(a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),a.from!=a.to||a.insert.length){if((OL.mac||OL.android)&&a.from==r-1&&/^\. ?$/.test(e.text)&&"off"==t.contentDOM.getAttribute("autocorrect")&&(a={from:o,to:s,insert:Td.of([e.text.replace("."," ")])}),this.pendingContextChange=a,!t.state.readOnly){let n=this.to-this.from+(a.to-a.from+a.insert.length);p_(t,a,ef.single(this.toEditorPos(e.selectionStart,n),this.toEditorPos(e.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))}else{let i=ef.single(this.toEditorPos(e.selectionStart),this.toEditorPos(e.selectionEnd));i.main.eq(n)||t.dispatch({selection:i,userEvent:"select"})}},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let e=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);e<o;e++){let n=t.coordsForChar(e);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}e.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=e=>{let n=[];for(let t of e.getTextFormats()){let e=t.underlineStyle,i=t.underlineThickness;if("None"!=e&&"None"!=i){let r=this.toEditorPos(t.rangeStart),o=this.toEditorPos(t.rangeEnd);if(r<o){let t=`text-decoration: underline ${"Dashed"==e?"dashed ":"Squiggle"==e?"wavy ":""}${"Thin"==i?1:2}px`;n.push(jL.mark({attributes:{style:t}}).range(r,o))}}}t.dispatch({effects:Ej.of(jL.set(n))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:e}=this.composing;this.composing=null,e&&this.reset(t.state)}};for(let t in this.handlers)e.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let e=NN(t.root);e&&e.rangeCount&&this.editContext.updateSelectionBounds(e.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,i=this.pendingContextChange;return t.changes.iterChanges(((r,o,s,a,l)=>{if(n)return;let c=l.length-(o-r);if(i&&o>=i.to){if(i.from==r&&i.to==o&&i.insert.eq(l))return i=this.pendingContextChange=null,e+=c,void(this.to+=c);i=null,this.revertPending(t.state)}if(r+=e,(o+=e)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),l.toString()),this.to+=c}e+=c})),i&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some((t=>!t.isUserEvent("input.type")&&t.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):this.applyEdits(t)&&this.rangeIsValid(t.state)?(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state):(this.pendingContextChange=null,this.reset(t.state)),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),i=this.toContextPos(e.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>3e4)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class TI{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(t=>t.forEach((t=>n(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new cI(t.state||Hf.create(t)),t.scrollTo&&t.scrollTo.is(Mj)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Dj).map((t=>new Bj(t)));for(let t of this.plugins)t.update(this);this.observer=new AI(this),this.inputState=new g_(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Xj(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(e=document.fonts)||void 0===e?void 0:e.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...t){let e=1==t.length&&t[0]instanceof Df?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,i=!1,r=this.state;for(let e of t){if(e.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=e.state}if(this.destroyed)return void(this.viewState.state=r);let o=this.hasFocus,s=0,a=null;t.some((t=>t.annotation(__)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=I_(r,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(Hf.phrases)!=this.state.facet(Hf.phrases))return this.setState(r);e=qj.create(this,r,t),e.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(h&&(h=h.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;h=new Aj(t.empty?t:ef.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(Mj)&&(h=t.value.clip(this.state))}this.viewState.update(e,h),this.bidiCache=RI.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(Wj)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(mI)!=e.state.facet(mI)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!e.empty)for(let t of this.state.facet(bj))try{t(e)}catch(t){Pj(this.state,t,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!f_(this,c)&&l.force&&UN(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new cI(t),this.plugins=t.facet(Dj).map((t=>new Bj(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new Xj(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(Dj),n=t.state.facet(Dj);if(e!=n){let i=[];for(let r of n){let n=e.indexOf(r);if(n<0)i.push(new Bj(r));else{let e=this.plugins[n];e.mustUpdate=t,i.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(t){Pj(this.state,t,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(o<0)if(tL(n))r=-1,o=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(i);r=t.from,o=t.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((t=>{try{return t.read(this)}catch(t){return Pj(this.state,t),DI}})),c=qj.create(this,this.state,[]),h=!1;c.flags|=s,e?e.flags|=s:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let t=0;t<a.length;t++)if(l[t]!=DI)try{let e=a[t];e.write&&e.write(l[t],this)}catch(t){Pj(this.state,t)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let t=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(t>1||t<-1){i+=t,n.scrollTop=i/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(bj))t(e)}get themeClasses(){return bI+" "+(this.state.facet(vI)?wI:yI)+" "+this.state.facet(mI)}updateAttrs(){let t=BI(this,Nj,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Tj)?"true":"false",class:"cm-content",style:`${OL.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),BI(this,Lj,e);let n=this.observer.ignore((()=>{let n=RL(this.contentDOM,this.contentAttrs,e),i=RL(this.dom,this.editorAttrs,t);return n||i}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(TI.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(Wj);let t=this.state.facet(TI.cspNonce);up.mount(this.root,this.styleModules.concat(xI).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return a_(this,t,o_(this,t,e,n))}moveByGroup(t,e){return a_(this,t,o_(this,t,e,(e=>function(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return t=>{let e=i(t);return r==If.Space&&(r=e),r==e}}(this,t.head,e))))}visualLineSide(t,e){let n=this.bidiSpans(t),i=this.textDirectionAt(t.from),r=n[e?n.length-1:0];return ef.cursor(r.side(e,i)+t.from,r.forward(!e,i)?1:-1)}moveToLineBoundary(t,e,n=!0){return function(t,e,n,i){let r=function(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let t;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;t&&(r.type!=LL.Text||t.type==r.type&&!(n<0?r.from<e:r.to>e))||(t=r)}}return t||i}return i}(t,e.head,e.assoc||-1),o=i&&r.type==LL.Text&&(t.lineWrapping||r.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),i=t.textDirectionAt(r.from),s=t.posAtCoords({x:n==(i==ZL.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return ef.cursor(s,n?-1:1)}return ef.cursor(n?r.to:r.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return a_(this,t,function(t,e,n,i){let r=e.head,o=n?1:-1;if(r==(n?t.state.doc.length:0))return ef.cursor(r,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),h=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-e.from))),s=(o<0?e.top:e.bottom)+h}let u=l.left+a,d=null!=i?i:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(d+e)*o,i=i_(t,{x:u,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?i<r:i>r)){let e=t.docView.coordsForChar(i),r=!e||n<e.top?-1:1;return ef.cursor(i,r,void 0,a)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),i_(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),r=this.bidiSpans(i);return WN(n,r[oj.find(r,t-i.from,-1,e)].dir==ZL.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(xj)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>$I)return hj(t.length);let e,n=this.textDirectionAt(t.from);for(let i of this.bidiCache)if(i.from==t.from&&i.dir==n&&(i.fresh||sj(i.isolates,e=Qj(this,t))))return i.order;e||(e=Qj(this,t));let i=function(t,e,n){if(!t)return[new oj(0,0,e==GL?1:0)];if(e==YL&&!n.length&&!rj.test(t))return hj(t.length);if(n.length)for(;t.length>aj.length;)aj[aj.length]=256;let i=[],r=e==YL?0:1;return cj(t,r,r,n,0,t.length,i),i}(t.text,n,e);return this.bidiCache.push(new RI(t.from,t.to,n,e,!0,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||OL.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{YN(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return Mj.of(new Aj("number"==typeof t?ef.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return Mj.of(new Aj(ef.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){null==t?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof t?this.inputState.tabFocusMode=t?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return Rj.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return Rj.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=up.newName(),i=[mI.of(n),Wj.of(SI(`.${n}`,t))];return e&&e.dark&&i.push(vI.of(!0)),i}static baseTheme(t){return pf.lowest(Wj.of(SI("."+bI,t,OI)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),i=n&&oL.get(n)||oL.get(t);return(null===(e=null==i?void 0:i.rootView)||void 0===e?void 0:e.view)||null}}TI.styleModule=Wj,TI.inputHandler=yj,TI.clipboardInputFilter=Oj,TI.clipboardOutputFilter=Sj,TI.scrollHandler=Cj,TI.focusChangeEffect=wj,TI.perLineTextDirection=xj,TI.exceptionSink=vj,TI.updateListener=bj,TI.editable=Tj,TI.mouseSelectionStyle=mj,TI.dragMovesSelection=gj,TI.clickAddsSelectionRange=pj,TI.decorations=jj,TI.outerDecorations=_j,TI.atomicRanges=Ij,TI.bidiIsolatedRanges=zj,TI.scrollMargins=Hj,TI.darkTheme=vI,TI.cspNonce=of.define({combine:t=>t.length?t[0]:""}),TI.contentAttributes=Lj,TI.editorAttributes=Nj,TI.lineWrapping=TI.contentAttributes.of({class:"cm-lineWrapping"}),TI.announce=$f.define();const $I=4096,DI={};class RI{constructor(t,e,n,i,r,o){this.from=t,this.to=e,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],i=t.length?t[t.length-1].dir:ZL.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir!=i||e.touchesRange(o.from,o.to)||n.push(new RI(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function BI(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let e=i[r],o="function"==typeof e?e(t):e;o&&TL(o,n)}return n}class NI extends Wf{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}function LI(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return!!r&&(i(n.update(r)),!0)}}NI.prototype.elementClass="",NI.prototype.toDOM=void 0,NI.prototype.mapMode=Fd.TrackBefore,NI.prototype.startSide=NI.prototype.endSide=-1,NI.prototype.point=!0;const jI=LI(VI,0),_I=LI(HI,0),II=LI(((t,e)=>HI(t,e,function(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}(e))),0);function zI(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const QI=50;function HI(t,e,n=e.selection.ranges){let i=n.map((t=>zI(e,t.from).block));if(!i.every((t=>t)))return null;let r=n.map(((t,n)=>function(t,{open:e,close:n},i,r){let o,s,a=t.sliceDoc(i-QI,i),l=t.sliceDoc(r,r+QI),c=/\s*$/.exec(a)[0].length,h=/^\s*/.exec(l)[0].length,u=a.length-c;if(a.slice(u-e.length,u)==e&&l.slice(h,h+n.length)==n)return{open:{pos:i-c,margin:c&&1},close:{pos:r+h,margin:h&&1}};r-i<=2*QI?o=s=t.sliceDoc(i,r):(o=t.sliceDoc(i,i+QI),s=t.sliceDoc(r-QI,r));let d=/^\s*/.exec(o)[0].length,f=/\s*$/.exec(s)[0].length,p=s.length-f-n.length;return o.slice(d,d+e.length)==e&&s.slice(p,p+n.length)==n?{open:{pos:i+d+e.length,margin:/\s/.test(o.charAt(d+e.length))?1:0},close:{pos:r-f-n.length,margin:/\s/.test(s.charAt(p-1))?1:0}}:null}(e,i[n],t.from,t.to)));if(2!=t&&!r.every((t=>t)))return{changes:e.changes(n.map(((t,e)=>r[e]?[]:[{from:t.from,insert:i[e].open+" "},{from:t.to,insert:" "+i[e].close}])))};if(1!=t&&r.some((t=>t))){let t=[];for(let e,n=0;n<r.length;n++)if(e=r[n]){let r=i[n],{open:o,close:s}=e;t.push({from:o.pos-r.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+r.close.length})}return{changes:t}}return null}function VI(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:t,to:o}of n){let n=i.length,s=1e9,a=zI(e,t).line;if(a){for(let n=t;n<=o;){let l=e.doc.lineAt(n);if(l.from>r&&(t==o||o>l.from)){r=l.from;let t=/^\s*/.exec(l.text)[0].length,e=t==l.length,n=l.text.slice(t,t+a.length)==a?t:-1;t<l.text.length&&t<s&&(s=t),i.push({line:l,comment:n,token:a,indent:t,empty:e,single:!1})}n=l.to+1}if(s<1e9)for(let t=n;t<i.length;t++)i[t].indent<i[t].line.text.length&&(i[t].indent=s);i.length==n+1&&(i[n].single=!0)}}if(2!=t&&i.some((t=>t.comment<0&&(!t.empty||t.single)))){let t=[];for(let{line:e,token:n,indent:r,empty:o,single:s}of i)!s&&o||t.push({from:e.from+r,insert:n+" "});let n=e.changes(t);return{changes:n,selection:e.selection.map(n,1)}}if(1!=t&&i.some((t=>t.comment>=0))){let t=[];for(let{line:e,comment:n,token:r}of i)if(n>=0){let i=e.from+n,o=i+r.length;" "==e.text[o-e.from]&&o++,t.push({from:i,to:o})}return{changes:t}}return null}const WI=Ef.define(),FI=Ef.define(),qI=of.define(),XI=of.define({combine(t){return Vf(t,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(n,i)=>t(n,i)||e(n,i)})}}),KI=df.define({create(){return hz.empty},update(t,e){let n=e.state.facet(XI),i=e.annotation(WI);if(i){let r=tz.fromTransaction(e,i.selection),o=i.side,s=0==o?t.undone:t.done;return s=r?ez(s,s.length,n.minDepth,r):oz(s,e.startState.selection),new hz(0==o?i.rest:s,0==o?s:i.rest)}let r=e.annotation(FI);if("full"!=r&&"before"!=r||(t=t.isolate()),!1===e.annotation(Df.addToHistory))return e.changes.empty?t:t.addMapping(e.changes.desc);let o=tz.fromTransaction(e),s=e.annotation(Df.time),a=e.annotation(Df.userEvent);return o?t=t.addChanges(o,s,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,s,a,n.newGroupDelay)),"full"!=r&&"after"!=r||(t=t.isolate()),t},toJSON(t){return{done:t.done.map((t=>t.toJSON())),undone:t.undone.map((t=>t.toJSON()))}},fromJSON(t){return new hz(t.done.map(tz.fromJSON),t.undone.map(tz.fromJSON))}});function ZI(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(KI,!1);if(!r)return!1;let o=r.pop(t,n,e);return!!o&&(i(o),!0)}}const YI=ZI(0,!1),GI=ZI(1,!1),UI=ZI(0,!0),JI=ZI(1,!0);class tz{constructor(t,e,n,i,r){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}setSelAfter(t){return new tz(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,n;return{changes:null===(t=this.changes)||void 0===t?void 0:t.toJSON(),mapped:null===(e=this.mapped)||void 0===e?void 0:e.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((t=>t.toJSON()))}}static fromJSON(t){return new tz(t.changes&&Xd.fromJSON(t.changes),[],t.mapped&&qd.fromJSON(t.mapped),t.startSelection&&ef.fromJSON(t.startSelection),t.selectionsAfter.map(ef.fromJSON))}static fromTransaction(t,e){let n=iz;for(let e of t.startState.facet(qI)){let i=e(t);i.length&&(n=n.concat(i))}return!n.length&&t.changes.empty?null:new tz(t.changes.invert(t.startState.doc),n,void 0,e||t.startState.selection,iz)}static selection(t){return new tz(void 0,iz,void 0,void 0,t)}}function ez(t,e,n,i){let r=e+1>n+20?e-n-1:0,o=t.slice(r,e);return o.push(i),o}function nz(t,e){return t.length?e.length?t.concat(e):t:e}const iz=[],rz=200;function oz(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-rz));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),ez(t,t.length-1,1e9,n.setSelAfter(i)))}return[tz.selection([e])]}function sz(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function az(t,e){if(!t.length)return t;let n=t.length,i=iz;for(;n;){let r=lz(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let e=t.slice(0,n);return e[n-1]=r,e}e=r.mapped,n--,i=r.selectionsAfter}return i.length?[tz.selection(i)]:iz}function lz(t,e,n){let i=nz(t.selectionsAfter.length?t.selectionsAfter.map((t=>t.map(e))):iz,n);if(!t.changes)return tz.selection(i);let r=t.changes.map(e),o=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(o):o;return new tz(r,$f.mapEffects(t.effects,e),s,t.startSelection.map(o),i)}const cz=/^(input\.type|delete)($|\.)/;class hz{constructor(t,e,n=0,i=void 0){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new hz(this.done,this.undone):this}addChanges(t,e,n,i,r){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&t.changes&&(!n||cz.test(n))&&(!s.selectionsAfter.length&&e-this.prevTime<i.newGroupDelay&&i.joinToEvent(r,function(t,e){let n=[],i=!1;return t.iterChangedRanges(((t,e)=>n.push(t,e))),e.iterChangedRanges(((t,e,r,o)=>{for(let t=0;t<n.length;){let e=n[t++],s=n[t++];o>=e&&r<=s&&(i=!0)}})),i}(s.changes,t.changes))||"input.type.compose"==n)?ez(o,o.length-1,i.minDepth,new tz(t.changes.compose(s.changes),nz($f.mapEffects(t.effects,s.changes),s.effects),s.mapped,s.startSelection,iz)):ez(o,o.length,i.minDepth,t),new hz(o,iz,e,n)}addSelection(t,e,n,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:iz;return r.length>0&&e-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(o=r[r.length-1],s=t,o.ranges.length==s.ranges.length&&0===o.ranges.filter(((t,e)=>t.empty!=s.ranges[e].empty)).length)?this:new hz(oz(this.done,t),this.undone,e,n);var o,s}addMapping(t){return new hz(az(this.done,t),az(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let i=0==t?this.done:this.undone;if(0==i.length)return null;let r=i[i.length-1],o=r.selectionsAfter[0]||e.selection;if(n&&r.selectionsAfter.length)return e.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:WI.of({side:t,rest:sz(i),selection:o}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let n=1==i.length?iz:i.slice(0,i.length-1);return r.mapped&&(n=az(n,r.mapped)),e.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:WI.of({side:t,rest:n,selection:o}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}hz.empty=new hz(iz,iz);const uz=[{key:"Mod-z",run:YI,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:GI,preventDefault:!0},{linux:"Ctrl-Shift-z",run:GI,preventDefault:!0},{key:"Mod-u",run:UI,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:JI,preventDefault:!0}];function dz(t,e){return ef.create(t.ranges.map(e),t.mainIndex)}function fz(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function pz({state:t,dispatch:e},n){let i=dz(t.selection,n);return!i.eq(t.selection,!0)&&(e(fz(t,i)),!0)}function gz(t,e){return ef.cursor(e?t.to:t.from)}function mz(t,e){return pz(t,(n=>n.empty?t.moveByChar(n,e):gz(n,e)))}function vz(t){return t.textDirectionAt(t.state.selection.main.head)==ZL.LTR}const bz=t=>mz(t,!vz(t)),yz=t=>mz(t,vz(t));function wz(t,e){return pz(t,(n=>n.empty?t.moveByGroup(n,e):gz(n,e)))}function Oz(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Sz(t,e,n){let i,r,o=Vb(t).resolveInner(e.head),s=n?Dh.closedBy:Dh.openedBy;for(let i=e.head;;){let e=n?o.childAfter(i):o.childBefore(i);if(!e)break;Oz(t,e,s)?o=e:i=n?e.to:e.from}return r=o.type.prop(s)&&(i=n?iw(t,o.from,1):iw(t,o.to,-1))&&i.matched?n?i.end.to:i.end.from:n?o.to:o.from,ef.cursor(r,n?-1:1)}function xz(t,e){return pz(t,(n=>{if(!n.empty)return gz(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)}))}"undefined"!=typeof Intl&&Intl.Segmenter;const kz=t=>xz(t,!1),Cz=t=>xz(t,!0);function Az(t){let e,n=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,i=0,r=0;if(n){for(let e of t.state.facet(TI.scrollMargins)){let n=e(t);(null==n?void 0:n.top)&&(i=Math.max(null==n?void 0:n.top,i)),(null==n?void 0:n.bottom)&&(r=Math.max(null==n?void 0:n.bottom,r))}e=t.scrollDOM.clientHeight-i-r}else e=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:r,selfScroll:n,height:Math.max(t.defaultLineHeight,e-5)}}function Mz(t,e){let n,i=Az(t),{state:r}=t,o=dz(r.selection,(n=>n.empty?t.moveVertically(n,e,i.height):gz(n,e)));if(o.eq(r.selection))return!1;if(i.selfScroll){let e=t.coordsAtPos(r.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),a=s.top+i.marginTop,l=s.bottom-i.marginBottom;e&&e.top>a&&e.bottom<l&&(n=TI.scrollIntoView(o.main.head,{y:"start",yMargin:e.top-a}))}return t.dispatch(fz(r,o),{effects:n}),!0}const Ez=t=>Mz(t,!1),Pz=t=>Mz(t,!0);function Tz(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let n=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;n&&e.head!=i.from+n&&(r=ef.cursor(i.from+n))}return r}function $z(t,e){let n=dz(t.state.selection,(t=>{let n=e(t);return ef.range(t.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(t.state.selection)&&(t.dispatch(fz(t.state,n)),!0)}function Dz(t,e){return $z(t,(n=>t.moveByChar(n,e)))}const Rz=t=>Dz(t,!vz(t)),Bz=t=>Dz(t,vz(t));function Nz(t,e){return $z(t,(n=>t.moveByGroup(n,e)))}function Lz(t,e){return $z(t,(n=>t.moveVertically(n,e)))}const jz=t=>Lz(t,!1),_z=t=>Lz(t,!0);function Iz(t,e){return $z(t,(n=>t.moveVertically(n,e,Az(t).height)))}const zz=t=>Iz(t,!1),Qz=t=>Iz(t,!0),Hz=({state:t,dispatch:e})=>(e(fz(t,{anchor:0})),!0),Vz=({state:t,dispatch:e})=>(e(fz(t,{anchor:t.doc.length})),!0),Wz=({state:t,dispatch:e})=>(e(fz(t,{anchor:t.selection.main.anchor,head:0})),!0),Fz=({state:t,dispatch:e})=>(e(fz(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0);function qz(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange((i=>{let{from:r,to:o}=i;if(r==o){let s=e(i);s<r?(n="delete.backward",s=Xz(t,s,!1)):s>r&&(n="delete.forward",s=Xz(t,s,!0)),r=Math.min(r,s),o=Math.max(o,s)}else r=Xz(t,r,!1),o=Xz(t,o,!0);return r==o?{range:i}:{changes:{from:r,to:o},range:ef.cursor(r,r<i.head?-1:1)}}));return!r.changes.empty&&(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?TI.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Xz(t,e,n){if(t instanceof TI)for(let i of t.state.facet(TI.atomicRanges).map((e=>e(t))))i.between(e,e,((t,i)=>{t<e&&i>e&&(e=n?i:t)}));return e}const Kz=(t,e,n)=>qz(t,(i=>{let r,o,s=i.from,{state:a}=t,l=a.doc.lineAt(s);if(n&&!e&&s>l.from&&s<l.from+200&&!/[^ \t]/.test(r=l.text.slice(0,s-l.from))){if("\t"==r[r.length-1])return s-1;let t=sp(r,a.tabSize)%ny(a)||ny(a);for(let e=0;e<t&&" "==r[r.length-1-e];e++)s--;o=s}else o=zd(l.text,s-l.from,e,e)+l.from,o==s&&l.number!=(e?a.doc.lines:1)?o+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(o-l.from,s-l.from))&&(o=zd(l.text,o-l.from,!1,!1)+l.from);return o})),Zz=t=>Kz(t,!1,!0),Yz=t=>Kz(t,!0,!1),Gz=(t,e)=>qz(t,(n=>{let i=n.head,{state:r}=t,o=r.doc.lineAt(i),s=r.charCategorizer(i);for(let t=null;;){if(i==(e?o.to:o.from)){i==n.head&&o.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let a=zd(o.text,i-o.from,e)+o.from,l=o.text.slice(Math.min(i,a)-o.from,Math.max(i,a)-o.from),c=s(l);if(null!=t&&c!=t)break;" "==l&&i==n.head||(t=c),i=a}return i})),Uz=t=>Gz(t,!1);function Jz(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),o=t.doc.lineAt(i.to);if(i.empty||i.to!=o.from||(o=t.doc.lineAt(i.to-1)),n>=r.number){let t=e[e.length-1];t.to=o.to,t.ranges.push(i)}else e.push({from:r.from,to:o.to,ranges:[i]});n=o.number+1}return e}function tQ(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let e of Jz(t)){if(n?e.to==t.doc.length:0==e.from)continue;let o=t.doc.lineAt(n?e.to+1:e.from-1),s=o.length+1;if(n){i.push({from:e.to,to:o.to},{from:e.from,insert:o.text+t.lineBreak});for(let n of e.ranges)r.push(ef.range(Math.min(t.doc.length,n.anchor+s),Math.min(t.doc.length,n.head+s)))}else{i.push({from:o.from,to:e.from},{from:e.to,insert:t.lineBreak+o.text});for(let t of e.ranges)r.push(ef.range(t.anchor-s,t.head-s))}}return!!i.length&&(e(t.update({changes:i,scrollIntoView:!0,selection:ef.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0)}function eQ(t,e,n){if(t.readOnly)return!1;let i=[];for(let e of Jz(t))n?i.push({from:e.from,insert:t.doc.slice(e.from,e.to)+t.lineBreak}):i.push({from:e.to,insert:t.lineBreak+t.doc.slice(e.from,e.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const nQ=iQ(!1);function iQ(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange((n=>{let{from:i,to:r}=n,o=e.doc.lineAt(i),s=!t&&i==r&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n,i=Vb(t).resolveInner(e),r=i.childBefore(e),o=i.childAfter(e);return r&&o&&r.to<=e&&o.from>=e&&(n=r.type.prop(Dh.closedBy))&&n.indexOf(o.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(o.from).from&&!/\S/.test(t.sliceDoc(r.to,o.from))?{from:r.to,to:o.from}:null}(e,i);t&&(i=r=(r<=o.to?o:e.doc.lineAt(r)).to);let a=new oy(e,{simulateBreak:i,simulateDoubleBreak:!!s}),l=ry(a,i);for(null==l&&(l=sp(/^\s*/.exec(e.doc.lineAt(i).text)[0],e.tabSize));r<o.to&&/\s/.test(o.text[r-o.from]);)r++;s?({from:i,to:r}=s):i>o.from&&i<o.from+100&&!/\S/.test(o.text.slice(0,i))&&(i=o.from);let c=["",iy(e,l)];return s&&c.push(iy(e,a.lineIndent(o.from,-1))),{changes:{from:i,to:r,insert:Td.of(c)},range:ef.cursor(i+1+c[1].length)}}));return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function rQ(t,e){let n=-1;return t.changeByRange((i=>{let r=[];for(let o=i.from;o<=i.to;){let s=t.doc.lineAt(o);s.number>n&&(i.empty||i.to>s.from)&&(e(s,r,i),n=s.number),o=s.to+1}let o=t.changes(r);return{changes:r,range:ef.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}}))}const oQ=({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(rQ(t,((e,n)=>{n.push({from:e.from,insert:t.facet(ey)})})),{userEvent:"input.indent"})),!0),sQ=({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(rQ(t,((e,n)=>{let i=/^\s*/.exec(e.text)[0];if(!i)return;let r=sp(i,t.tabSize),o=0,s=iy(t,Math.max(0,r-ny(t)));for(;o<i.length&&o<s.length&&i.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:e.from+o,to:e.from+i.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0),aQ=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t=>pz(t,(e=>Sz(t.state,e,!vz(t)))),shift:t=>$z(t,(e=>Sz(t.state,e,!vz(t))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:t=>pz(t,(e=>Sz(t.state,e,vz(t)))),shift:t=>$z(t,(e=>Sz(t.state,e,vz(t))))},{key:"Alt-ArrowUp",run:({state:t,dispatch:e})=>tQ(t,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:t,dispatch:e})=>eQ(t,e,!1)},{key:"Alt-ArrowDown",run:({state:t,dispatch:e})=>tQ(t,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:t,dispatch:e})=>eQ(t,e,!0)},{key:"Escape",run:({state:t,dispatch:e})=>{let n=t.selection,i=null;return n.ranges.length>1?i=ef.create([n.main]):n.main.empty||(i=ef.create([ef.cursor(n.main.head)])),!!i&&(e(fz(t,i)),!0)}},{key:"Mod-Enter",run:iQ(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:t,dispatch:e})=>{let n=Jz(t).map((({from:e,to:n})=>ef.range(e,Math.min(n+1,t.doc.length))));return e(t.update({selection:ef.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:t,dispatch:e})=>{let n=dz(t.selection,(e=>{let n=Vb(t),i=n.resolveStack(e.from,1);if(e.empty){let t=n.resolveStack(e.from,-1);t.node.from>=i.node.from&&t.node.to<=i.node.to&&(i=t)}for(let t=i;t;t=t.next){let{node:n}=t;if((n.from<e.from&&n.to>=e.to||n.to>e.to&&n.from<=e.from)&&t.next)return ef.range(n.to,n.from)}return e}));return!n.eq(t.selection)&&(e(fz(t,n)),!0)},preventDefault:!0},{key:"Mod-[",run:sQ},{key:"Mod-]",run:oQ},{key:"Mod-Alt-\\",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new oy(t,{overrideIndentation:t=>{let e=n[t];return null==e?-1:e}}),r=rQ(t,((e,r,o)=>{let s=ry(i,e.from);if(null==s)return;/\S/.test(e.text)||(s=0);let a=/^\s*/.exec(e.text)[0],l=iy(t,s);(a!=l||o.from<e.from+a.length)&&(n[e.from]=s,r.push({from:e.from,to:e.from+a.length,insert:l}))}));return r.changes.empty||e(t.update(r,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Jz(e).map((({from:t,to:n})=>(t>0?t--:n<e.doc.length&&n++,{from:t,to:n})))),i=dz(e.selection,(e=>{let n;if(t.lineWrapping){let i=t.lineBlockAt(e.head),r=t.coordsAtPos(e.head,e.assoc||1);r&&(n=i.bottom+t.documentTop-r.bottom+t.defaultLineHeight/2)}return t.moveVertically(e,!0,n)})).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:t,dispatch:e})=>function(t,e,n){let i=!1,r=dz(t.selection,(e=>{let r=iw(t,e.head,-1)||iw(t,e.head,1)||e.head>0&&iw(t,e.head-1,1)||e.head<t.doc.length&&iw(t,e.head+1,-1);if(!r||!r.end)return e;i=!0;let o=r.start.from==e.head?r.end.to:r.end.from;return n?ef.range(e.anchor,o):ef.cursor(o)}));return!!i&&(e(fz(t,r)),!0)}(t,e,!1)},{key:"Mod-/",run:t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=zI(t.state,n.from);return i.line?jI(t):!!i.block&&II(t)}},{key:"Alt-A",run:_I},{key:"Ctrl-m",mac:"Shift-Alt-m",run:t=>(t.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:bz,shift:Rz,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:t=>wz(t,!vz(t)),shift:t=>Nz(t,!vz(t)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:t=>pz(t,(e=>Tz(t,e,!vz(t)))),shift:t=>$z(t,(e=>Tz(t,e,!vz(t)))),preventDefault:!0},{key:"ArrowRight",run:yz,shift:Bz,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:t=>wz(t,vz(t)),shift:t=>Nz(t,vz(t)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:t=>pz(t,(e=>Tz(t,e,vz(t)))),shift:t=>$z(t,(e=>Tz(t,e,vz(t)))),preventDefault:!0},{key:"ArrowUp",run:kz,shift:jz,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Hz,shift:Wz},{mac:"Ctrl-ArrowUp",run:Ez,shift:zz},{key:"ArrowDown",run:Cz,shift:_z,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Vz,shift:Fz},{mac:"Ctrl-ArrowDown",run:Pz,shift:Qz},{key:"PageUp",run:Ez,shift:zz},{key:"PageDown",run:Pz,shift:Qz},{key:"Home",run:t=>pz(t,(e=>Tz(t,e,!1))),shift:t=>$z(t,(e=>Tz(t,e,!1))),preventDefault:!0},{key:"Mod-Home",run:Hz,shift:Wz},{key:"End",run:t=>pz(t,(e=>Tz(t,e,!0))),shift:t=>$z(t,(e=>Tz(t,e,!0))),preventDefault:!0},{key:"Mod-End",run:Vz,shift:Fz},{key:"Enter",run:nQ,shift:nQ},{key:"Mod-a",run:({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Zz,shift:Zz},{key:"Delete",run:Yz},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Uz},{key:"Mod-Delete",mac:"Alt-Delete",run:t=>Gz(t,!0)},{mac:"Mod-Backspace",run:t=>qz(t,(e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}))},{mac:"Mod-Delete",run:t=>qz(t,(e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}))}].concat([{key:"Ctrl-b",run:bz,shift:Rz,preventDefault:!0},{key:"Ctrl-f",run:yz,shift:Bz},{key:"Ctrl-p",run:kz,shift:jz},{key:"Ctrl-n",run:Cz,shift:_z},{key:"Ctrl-a",run:t=>pz(t,(e=>ef.cursor(t.lineBlockAt(e.head).from,1))),shift:t=>$z(t,(e=>ef.cursor(t.lineBlockAt(e.head).from)))},{key:"Ctrl-e",run:t=>pz(t,(e=>ef.cursor(t.lineBlockAt(e.head).to,-1))),shift:t=>$z(t,(e=>ef.cursor(t.lineBlockAt(e.head).to)))},{key:"Ctrl-d",run:Yz},{key:"Ctrl-h",run:Zz},{key:"Ctrl-k",run:t=>qz(t,(e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}))},{key:"Ctrl-Alt-h",run:Uz},{key:"Ctrl-o",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:Td.of(["",""])},range:ef.cursor(t.from)})));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,i=t.doc.lineAt(n),r=n==i.from?n-1:zd(i.text,n-i.from,!1)+i.from,o=n==i.to?n+1:zd(i.text,n-i.from,!0)+i.from;return{changes:{from:r,to:o,insert:t.doc.slice(n,o).append(t.doc.slice(r,n))},range:ef.cursor(o)}}));return!n.changes.empty&&(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Pz}].map((t=>({mac:t.key,run:t.run,shift:t.shift}))))),lQ={key:"Tab",run:oQ,shift:sQ};function cQ(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function hQ(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function uQ(t,e){if(!e.anchorNode)return!1;try{return hQ(t,e.anchorNode)}catch(t){return!1}}function dQ(t){return 3==t.nodeType?CQ(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function fQ(t,e,n,i){return!!n&&(mQ(t,e,n,i,-1)||mQ(t,e,n,i,1))}function pQ(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function gQ(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function mQ(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:vQ(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=pQ(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(r<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=r<0?vQ(t):0}}}function vQ(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function bQ(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function yQ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function wQ(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}class OQ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?vQ(e):0),n,Math.min(t.focusOffset,n?vQ(n):0))}set(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i}}let SQ,xQ=null;function kQ(t){if(t.setActive)return t.setActive();if(xQ)return t.focus(xQ);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==xQ?{get preventScroll(){return xQ={preventScroll:!0},!0}}:void 0),!xQ){xQ=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function CQ(t,e,n=e){let i=SQ||(SQ=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function AQ(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function MQ(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function EQ(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function PQ(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=vQ(n)}else{if(!n.parentNode||gQ(n))return null;i=pQ(n),n=n.parentNode}}}function TQ(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||gQ(n))return null;i=pQ(n)+1,n=n.parentNode}}}class $Q{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new $Q(t.parentNode,pQ(t),e)}static after(t,e){return new $Q(t.parentNode,pQ(t)+1,e)}}const DQ=[];class RQ{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,i=this.dom,r=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let t=RQ.get(n);(!t||!t.parent&&t.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(t,e),o.flags&=-8}if(n=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&n!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=BQ(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&e&&e.node==i&&(e.written=!0);n;)n=BQ(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let i=0==vQ(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==i&&e.firstChild!=e.lastChild&&(i=t==e.firstChild?-1:1),t=e}n=i<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!RQ.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let i=this.children[t];if(i.dom==n)return e;e+=i.length+i.breakAfter}}domBoundsAround(t,e,n=0){let i=-1,r=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],h=l+n.length;if(l<t&&h>e)return n.domBoundsAround(t,e,l);if(h>=t&&-1==i&&(i=a,r=l),l>e&&n.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+n.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=DQ){this.markDirty();for(let i=t;i<e;i++){let t=this.children[i];t.parent==this&&n.indexOf(t)<0&&t.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new NQ(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,i,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function BQ(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}RQ.prototype.breakAfter=0;class NQ{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function LQ(t,e,n,i,r,o,s,a,l){let{children:c}=t,h=c.length?c[e]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(e==i&&h&&!s&&!d&&o.length<2&&h.merge(n,r,o.length?u:null,0==n,a,l))){if(i<c.length){let t=c[i];t&&(r<t.length||t.breakAfter&&(null==u?void 0:u.breakAfter))?(e==i&&(t=t.split(r),r=0),!d&&u&&t.merge(0,r,u,!0,0,l)?o[o.length-1]=t:((r||t.children.length&&!t.children[0].length)&&t.merge(0,r,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(u?u.breakAfter=1:s=1),i++}for(h&&(h.breakAfter=s,n>0&&(!s&&o.length&&h.merge(n,h.length,o[0],!1,a,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,a,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function jQ(t,e,n,i,r,o){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:h}=s.findPos(e,-1),u=e-n;for(let t of i)u+=t.length;t.length+=u,LQ(t,c,h,a,l,i,0,r,o)}let _Q="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},IQ="undefined"!=typeof document?document:{documentElement:{style:{}}};const zQ=/Edge\/(\d+)/.exec(_Q.userAgent),QQ=/MSIE \d/.test(_Q.userAgent),HQ=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_Q.userAgent),VQ=!!(QQ||HQ||zQ),WQ=!VQ&&/gecko\/(\d+)/i.test(_Q.userAgent),FQ=!VQ&&/Chrome\/(\d+)/.exec(_Q.userAgent),qQ="webkitFontSmoothing"in IQ.documentElement.style,XQ=!VQ&&/Apple Computer/.test(_Q.vendor),KQ=XQ&&(/Mobile\/\w+/.test(_Q.userAgent)||_Q.maxTouchPoints>2);var ZQ={mac:KQ||/Mac/.test(_Q.platform),windows:/Win/.test(_Q.platform),linux:/Linux|X11/.test(_Q.platform),ie:VQ,ie_version:QQ?IQ.documentMode||6:HQ?+HQ[1]:zQ?+zQ[1]:0,gecko:WQ,gecko_version:WQ?+(/Firefox\/(\d+)/.exec(_Q.userAgent)||[0,0])[1]:0,chrome:!!FQ,chrome_version:FQ?+FQ[1]:0,ios:KQ,android:/Android\b/.test(_Q.userAgent),webkit:qQ,safari:XQ,webkit_version:qQ?+(/\bAppleWebKit\/(\d+)/.exec(_Q.userAgent)||[0,0])[1]:0,tabSize:null!=IQ.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class YQ extends RQ{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof YQ)||this.length-(e-t)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),0))}split(t){let e=new YQ(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new $Q(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;0==e&&n<0||e==i&&n>=0?ZQ.chrome||ZQ.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let a=CQ(t,r,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return ZQ.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l),s?bQ(l,s<0):l||null}(this.dom,t,e)}}class GQ extends RQ{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(MQ(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof GQ&&n.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0)||(jQ(this,t,e,n?n.children.slice():[],r-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>t&&e.push(n<t?o.split(t-n):o),i<0&&n>=t&&(i=r),n=s,r++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new GQ(this.mark,e,o)}domAtPos(t){return tH(this,t)}coordsAt(t,e){return nH(this,t,e)}}class UQ extends RQ{static create(t,e,n){return new UQ(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=UQ.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof UQ&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t instanceof UQ&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return Td.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Td.empty}domAtPos(t){return(this.length?0==t:this.side>0)?$Q.before(this.dom):$Q.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:t>0;for(let e=o?i.length-1:0;r=i[e],!(t>0?0==e:e==i.length-1||r.top<r.bottom);e+=o?-1:1);return bQ(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class JQ extends RQ{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof JQ&&t.side==this.side}split(){return new JQ(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?$Q.before(this.dom):$Q.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Td.empty}get isHidden(){return!0}}function tH(t,e){let n=t.dom,{children:i}=t,r=0;for(let t=0;r<i.length;r++){let o=i[r],s=t+o.length;if(!(s==t&&o.getSide()<=0)){if(e>t&&e<s&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=r;t>0;t--){let e=i[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=r;t<i.length;t++){let e=i[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new $Q(n,0)}function eH(t,e,n){let i,{children:r}=t;n>0&&e instanceof GQ&&r.length&&(i=r[r.length-1])instanceof GQ&&i.mark.eq(e.mark)?eH(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function nH(t,e,n){let i=null,r=-1,o=null,s=-1;!function t(e,a){for(let l=0,c=0;l<e.children.length&&c<=a;l++){let h=e.children[l],u=c+h.length;u>=a&&(h.children.length?t(h,a-c):(!o||o.isHidden&&(n>0||iH(o,h)))&&(u>a||c==u&&h.getSide()>0)?(o=h,s=a-c):(c<a||c==u&&h.getSide()<0&&!h.isHidden)&&(i=h,r=a-c)),c=u}}(t,e);let a=(n<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?r:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=dQ(e);return n[n.length-1]||null}(t)}function iH(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function rH(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}YQ.prototype.children=UQ.prototype.children=JQ.prototype.children=DQ;const oH=Object.create(null);function sH(t,e,n){if(t==e)return!0;t||(t=oH),e||(e=oH);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(-1==r.indexOf(o)||t[o]!==e[o]))return!1;return!0}function aH(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,"style"==r?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,"style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function lH(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class cH{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var hH=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(hH||(hH={}));class uH extends Wf{constructor(t,e,n,i){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new dH(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new pH(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,i=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:r,end:o}=gH(t,i);e=(r?i?-3e8:-1:5e8)-1,n=1+(o?i?2e8:1:-6e8)}return new pH(t,e,n,i,t.widget||null,!0)}static line(t){return new fH(t)}static set(t,e=!1){return Kf.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}uH.none=Kf.empty;class dH extends uH{constructor(t){let{start:e,end:n}=gH(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof dH&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&sH(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}dH.prototype.point=!1;class fH extends uH{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof fH&&this.spec.class==t.spec.class&&sH(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}fH.prototype.mapMode=Fd.TrackBefore,fH.prototype.point=!0;class pH extends uH{constructor(t,e,n,i,r,o){super(e,n,r,t),this.block=i,this.isReplace=o,this.mapMode=i?e<=0?Fd.TrackBefore:Fd.TrackAfter:Fd.TrackDel}get type(){return this.startSide!=this.endSide?hH.WidgetRange:this.startSide<=0?hH.WidgetBefore:hH.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof pH&&((e=this.widget)==(n=t.widget)||!!(e&&n&&e.compare(n)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,n}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function gH(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!=n?n:e,end:null!=i?i:e}}function mH(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}pH.prototype.point=!0;class vH extends RQ{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,i,r,o){if(n){if(!(n instanceof vH))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),jQ(this,t,e,n?n.children.slice():[],r,o),!0}split(t){let e=new vH;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:i}=this.childPos(t);i&&(e.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){sH(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){eH(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=rH(e,this.attrs||{})),n&&(this.attrs=rH({class:n},this.attrs||{}))}domAtPos(t){return tH(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?4&this.flags&&(MQ(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(aH(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let i=this.dom.lastChild;for(;i&&RQ.get(i)instanceof GQ;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=RQ.get(i))||void 0===n?void 0:n.isEditable)||ZQ.ios&&this.children.some((t=>t instanceof YQ))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof YQ)||/[^ -~]/.test(n.text))return null;let i=dQ(n.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=nH(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let i=(e-t.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(t){return t instanceof vH&&0==this.children.length&&0==t.children.length&&sH(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,i=0;n<t.children.length;n++){let r=t.children[n],o=i+r.length;if(o>=e){if(r instanceof vH)return r;if(o>e)break}i=o+r.breakAfter}return null}}class bH extends RQ{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof bH&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?$Q.before(this.dom):$Q.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new bH(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return DQ}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Td.empty}domBoundsAround(){return null}become(t){return t instanceof bH&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)||(this.widget instanceof yH?null:bQ(this.dom.getBoundingClientRect(),this.length?0==t:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class yH extends cH{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class wH{constructor(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof bH&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new vH),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(OH(new JQ(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof bH||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(OH(new YQ(this.text.slice(this.textOff,this.textOff+i)),e),n),this.atCursorPos=!0,this.textOff+=i,t-=i,n=0}}span(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)}point(t,e,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof pH){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof pH)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new bH(n.widget||SH.block,s,n));else{let o=UQ.create(n.widget||SH.inline,s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&r<=i.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||r>i.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(c.append(OH(new JQ(1),i),r),r=i.length+Math.max(0,r-i.length)),c.append(OH(o,i),r),this.atCursorPos=l,this.pendingBuffer=l?t<e||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,n,i,r){let o=new wH(t,e,n,r);return o.openEnd=Kf.spans(i,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function OH(t,e){for(let n of e)t=new GQ(n,[t],t.length);return t}class SH extends cH{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}SH.inline=new SH("span"),SH.block=new SH("div");var xH=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(xH||(xH={}));const kH=xH.LTR,CH=xH.RTL;function AH(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const MH=AH("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),EH=AH("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),PH=Object.create(null),TH=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);PH[e]=n,PH[n]=-e}function $H(t){return t<=247?MH[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?EH[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const DH=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class RH{get dir(){return this.level%2?CH:kH}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,i){let r=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<e:s.to>e:t[r].level>s.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function BH(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!BH(i.inner,r.inner))return!1}return!0}const NH=[];function LH(t,e,n,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let e=!0,h=!1;if(c==o.length||l<o[c].from){let t=NH[l];t!=a&&(e=!1,h=16==t)}let u=e||1!=a?null:[],d=e?i:i+1,f=l;t:for(;;)if(c<o.length&&f==o[c].from){if(h)break t;let p=o[c];if(!e)for(let t=p.to,e=c+1;;){if(t==n)break t;if(!(e<o.length&&o[e].from==t)){if(NH[t]==a)break t;break}t=o[e++].to}c++,u?u.push(p):(p.from>l&&s.push(new RH(l,p.from,d)),jH(t,p.direction==kH!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.to),f=p.to}else{if(f==n||(e?NH[f]!=a:NH[f]==a))break;f++}u?LH(t,l,f,i+1,r,u,s):l<f&&s.push(new RH(l,f,d)),l=f}else for(let l=n,c=o.length;l>e;){let n=!0,h=!1;if(!c||l>o[c-1].to){let t=NH[l-1];t!=a&&(n=!1,h=16==t)}let u=n||1!=a?null:[],d=n?i:i+1,f=l;t:for(;;)if(c&&f==o[c-1].to){if(h)break t;let p=o[--c];if(!n)for(let t=p.from,n=c;;){if(t==e)break t;if(!n||o[n-1].to!=t){if(NH[t-1]==a)break t;break}t=o[--n].from}u?u.push(p):(p.to<l&&s.push(new RH(p.to,l,d)),jH(t,p.direction==kH!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.from),f=p.from}else{if(f==e||(n?NH[f-1]!=a:NH[f-1]==a))break;f--}u?LH(t,f,l,i+1,r,u,s):f<l&&s.push(new RH(f,l,d)),l=f}}function jH(t,e,n,i,r,o,s){let a=e%2?2:1;!function(t,e,n,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:n,l=o?256:r;for(let e=s,n=l,i=l;e<a;e++){let r=$H(t.charCodeAt(e));512==r?r=n:8==r&&4==i&&(r=16),NH[e]=4==r?2:r,7&r&&(i=r),n=r}for(let t=s,e=l,i=l;t<a;t++){let r=NH[t];if(128==r)t<a-1&&e==NH[t+1]&&24&e?r=NH[t]=e:NH[t]=256;else if(64==r){let r=t+1;for(;r<a&&64==NH[r];)r++;let o=t&&8==e||r<n&&8==NH[r]?1==i?1:8:256;for(let e=t;e<r;e++)NH[e]=o;t=r-1}else 8==r&&1==i&&(NH[t]=1);e=r,7&r&&(i=r)}}}(t,r,o,i,a),function(t,e,n,i,r){let o=1==r?2:1;for(let s=0,a=0,l=0;s<=i.length;s++){let c=s?i[s-1].to:e,h=s<i.length?i[s].from:n;for(let e,n,i,s=c;s<h;s++)if(n=PH[e=t.charCodeAt(s)])if(n<0){for(let t=a-3;t>=0;t-=3)if(TH[t+1]==-n){let e=TH[t+2],n=2&e?r:4&e?1&e?o:r:0;n&&(NH[s]=NH[TH[t]]=n),a=t;break}}else{if(189==TH.length)break;TH[a++]=s,TH[a++]=e,TH[a++]=l}else if(2==(i=NH[s])||1==i){let t=i==r;l=t?0:1;for(let e=a-3;e>=0;e-=3){let n=TH[e+2];if(2&n)break;if(t)TH[e+2]|=2;else{if(4&n)break;TH[e+2]|=4}}}}}(t,r,o,i,a),function(t,e,n,i){for(let r=0,o=i;r<=n.length;r++){let s=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=s;l<a;){let s=NH[l];if(256==s){let s=l+1;for(;;)if(s==a){if(r==n.length)break;s=n[r++].to,a=r<n.length?n[r].from:e}else{if(256!=NH[s])break;s++}let c=1==o,h=c==(1==(s<e?NH[s]:i))?c?1:2:i;for(let e=s,i=r,o=i?n[i-1].to:t;e>l;)e==o&&(e=n[--i].from,o=i?n[i-1].to:t),NH[--e]=h;l=s}else o=s,l++}}}(r,o,i,a),LH(t,r,o,e,n,i,s)}function _H(t){return[new RH(0,t,0)]}let IH="";function zH(t,e,n,i,r){var o;let s=i.head-t.from,a=RH.find(e,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc),l=e[a],c=l.side(r,n);if(s==c){let t=a+=r?1:-1;if(t<0||t>=e.length)return null;l=e[a=t],s=l.side(!r,n),c=l.side(r,n)}let h=zd(t.text,s,l.forward(r,n));(h<l.from||h>l.to)&&(h=c),IH=t.text.slice(Math.min(s,h),Math.max(s,h));let u=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return u&&h==c&&u.level+(r?0:1)<l.level?ef.cursor(u.side(!r,n)+t.from,u.forward(r,n)?1:-1,u.level):ef.cursor(h+t.from,l.forward(r,n)?-1:1,l.level)}function QH(t,e,n){for(let i=e;i<n;i++){let e=$H(t.charCodeAt(i));if(1==e)return kH;if(2==e||4==e)return CH}return kH}const HH=of.define(),VH=of.define(),WH=of.define(),FH=of.define(),qH=of.define(),XH=of.define(),KH=of.define(),ZH=of.define(),YH=of.define(),GH=of.define({combine:t=>t.some((t=>t))}),UH=of.define({combine:t=>t.some((t=>t))}),JH=of.define();class tV{constructor(t,e="nearest",n="nearest",i=5,r=5,o=!1){this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new tV(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new tV(ef.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const eV=$f.define({map:(t,e)=>t.map(e)}),nV=$f.define();function iV(t,e,n){let i=t.facet(FH);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const rV=of.define({combine:t=>!t.length||t[0]});let oV=0;const sV=of.define();class aV{constructor(t,e,n,i,r){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(t,e){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=e||{};return new aV(oV++,t,n,i,(t=>{let e=[sV.of(t)];return o&&e.push(uV.of((e=>{let n=e.plugin(t);return n?o(n):uH.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return aV.define((e=>new t(e)),e)}}class lV{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(iV(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){iV(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){iV(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const cV=of.define(),hV=of.define(),uV=of.define(),dV=of.define(),fV=of.define(),pV=of.define();function gV(t,e){let n=t.state.facet(pV);if(!n.length)return n;let i=n.map((e=>e instanceof Function?e(t):e)),r=[];return Kf.spans(i,e.from,e.to,{point(){},span(t,n,i,o){let s=t-e.from,a=n-e.from,l=r;for(let t=i.length-1;t>=0;t--,o--){let n,r=i[t].spec.bidiIsolate;if(null==r&&(r=QH(e.text,s,a)),o>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==r)n.to=a,l=n.inner;else{let t={from:s,to:a,direction:r,inner:[]};l.push(t),l=t.inner}}}}),r}const mV=of.define();function vV(t){let e=0,n=0,i=0,r=0;for(let o of t.state.facet(mV)){let s=o(t);s&&(null!=s.left&&(e=Math.max(e,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(i=Math.max(i,s.top)),null!=s.bottom&&(r=Math.max(r,s.bottom)))}return{left:e,right:n,top:i,bottom:r}}const bV=of.define();class yV{constructor(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}join(t){return new yV(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let i=0,r=0,o=0,s=0;;i++){let a=i==t.length?null:t[i],l=o-s,c=a?a.fromB:1e9;for(;r<e.length&&e[r]<c;){let t=e[r],i=e[r+1],o=Math.max(s,t),a=Math.min(c,i);if(o<=a&&new yV(o+l,a+l,o,a).addToSet(n),i>c)break;r+=2}if(!a)return n;new yV(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class wV{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Xd.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let i=[];this.changes.iterChangedRanges(((t,e,n,r)=>i.push(new yV(t,e,n,r)))),this.changedRanges=i}static create(t,e,n){return new wV(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class OV extends RQ{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=uH.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new vH],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new yV(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?i=this.domChanged.newSel.head:function(t,e){let n=!1;return e&&t.iterChangedRanges(((t,i)=>{t<e.to&&i>e.from&&(n=!0)})),n}(t.changes,this.hasComposition)||t.selectionSet||(i=t.state.selection.main.head));let r=i>-1?function(t,e,n){let i=SV(t,n);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new yV(l.mapPos(o),l.mapPos(s),o,s),h=[];for(let e=r.parentNode;;e=e.parentNode){let n=RQ.get(e);if(n instanceof GQ)h.push({node:e,deco:n.mark});else{if(n instanceof vH||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:r,marks:h,line:e};if(e==t.contentDOM)return null;h.push({node:e,deco:new dH({inclusive:!0,attributes:lH(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:i}=this.hasComposition;n=new yV(e,i,t.changes.mapPos(e,-1),t.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(ZQ.ie||ZQ.chrome)&&!r&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=function(t,e,n){let i=new xV;return Kf.compare(t,e,n,i),i.changes}(this.decorations,this.updateDeco(),t.changes);return n=yV.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,r),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=ZQ.chrome||ZQ.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=-8,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof bH&&t.widget instanceof yH&&r.push(t.dom);i.updateGaps(r)}updateChildren(t,e,n){let i=n?n.range.addToSet(t.slice()):t,r=this.childCursor(e);for(let t=i.length-1;;t--){let e=t>=0?i[t]:null;if(!e)break;let o,s,a,l,{fromA:c,toA:h,fromB:u,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>u){let t=wH.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=wH.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);s=t.breakAtStart,a=t.openStart,l=e.openEnd;let i=this.compositionView(n);e.breakAtStart?i.breakAfter=1:e.content.length&&i.merge(i.length,i.length,e.content[0],!1,e.openStart,0)&&(i.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&i.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),o=t.content.concat(i).concat(e.content)}else({content:o,breakAtStart:s,openStart:a,openEnd:l}=wH.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(h,1),{i:g,off:m}=r.findPos(c,-1);LQ(this,g,m,f,p,o,s,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let t of e.effects)t.is(nV)&&(this.editContextFormatting=t.value)}compositionView(t){let e=new YQ(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new GQ(n,[e],e.length);let n=new vH;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=RQ.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),i=this.children[n.i];e(t.line,i);for(let r=t.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],e(r>=0?t.marks[r].node:t.text,i)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet(rV)||this.dom.tabIndex>-1)&&uQ(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||e||r))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(ZQ.gecko&&s.empty&&!this.hasComposition&&1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(t,a.node.childNodes[a.offset]||null))),a=l=new $Q(t,0),o=!0}var c;let h=this.view.observer.selectionRange;!o&&h.focusNode&&(fQ(a.node,a.offset,h.anchorNode,h.anchorOffset)&&fQ(l.node,l.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,s))||(this.view.observer.ignore((()=>{ZQ.android&&ZQ.chrome&&this.dom.contains(h.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=cQ(this.view.root);if(t)if(s.empty){if(ZQ.gecko){let t=(e=a.node,i=a.offset,1!=e.nodeType?0:(i&&"false"==e.childNodes[i-1].contentEditable?1:0)|(i<e.childNodes.length&&"false"==e.childNodes[i].contentEditable?2:0));if(t&&3!=t){let e=(1==t?PQ:TQ)(a.node,a.offset);e&&(a=new $Q(e.node,e.offset))}}t.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(a.node,a.offset);try{t.extend(l.node,l.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),e.setEnd(l.node,l.offset),e.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(e)}var e,i;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new $Q(h.anchorNode,h.anchorOffset),this.impreciseHead=l.precise?null:new $Q(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&fQ(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=cQ(t.root),{anchorNode:i,anchorOffset:r}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=vH.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let h=t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=e.from&&n.collapse(i,r)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let i=t.offset;!e&&i<n.childNodes.length;i++){let t=RQ.get(n.childNodes[i]);t instanceof vH&&(e=t.domAtPos(0))}for(let i=t.offset-1;!e&&i>=0;i--){let t=RQ.get(n.childNodes[i]);t instanceof vH&&(e=t.domAtPos(t.length))}return e?new $Q(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=RQ.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof vH)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=r-s.breakAfter,l=a-s.length;if(a<t)break;if(l<=t&&(l<t||s.covers(-1))&&(a>t||s.covers(1))&&(!n||s instanceof vH&&!(n instanceof vH&&e>=0)))n=s,i=l;else if(n&&l==t&&a==t&&s instanceof bH&&Math.abs(e)<2){if(s.deco.startSide<0)break;o&&(n=null)}r=l}return n?n.coordsAt(t-i,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),i=this.children[e];if(!(i instanceof vH))return null;for(;i.children.length;){let{i:t,off:e}=i.childPos(n,1);for(;;t++){if(t==i.children.length)return null;if((i=i.children[t]).length)break}n=e}if(!(i instanceof YQ))return null;let r=zd(i.text,n);if(r==n)return null;let o=CQ(i.dom,n,r).getClientRects();for(let t=0;t<o.length;t++){let e=o[t];if(t==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:i}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==xH.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],h=t+c.length;if(h>i)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),o){let e=c.dom.lastChild,i=e?dQ(e):[];if(i.length){let e=i[i.length-1],o=a?e.right-n.left:n.right-e.left;o>s&&(s=o,this.minWidth=r,this.minWidthFrom=t,this.minWidthTo=h)}}}t=h+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?xH.RTL:xH.LTR}measureTextSize(){for(let t of this.children)if(t instanceof vH){let e=t.measureTextSize();if(e)return e}let t,e,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=dQ(i.firstChild)[0];t=i.getBoundingClientRect().height,e=r?r.width/27:7,n=r?r.height:t,i.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new NQ(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,i=0;;i++){let r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=(e.lineBlockAt(o).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(uH.replace({widget:new yH(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return uH.set(t)}updateDeco(){let t=1,e=this.view.state.facet(uV).map((e=>(this.dynamicDecorationMap[t++]="function"==typeof e)?e(this.view):e)),n=!1,i=this.view.state.facet(dV).map(((t,e)=>{let i="function"==typeof t;return i&&(n=!0),i?t(this.view):t}));for(i.length&&(this.dynamicDecorationMap[t++]=n,e.push(Kf.join(i))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}for(let e of this.view.state.facet(JH))try{if(e(this.view,t.range,t))return!0}catch(t){iV(this.view.state,t,"scroll handler")}let e,{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});let r=vV(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(t,e,n,i,r,o,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let h=t,u=!1;h&&!u;)if(1==h.nodeType){let t,d=h==l.body,f=1,p=1;if(d)t=yQ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let e=h.getBoundingClientRect();({scaleX:f,scaleY:p}=wQ(h,e)),t={left:e.left,right:e.left+h.clientWidth*f,top:e.top,bottom:e.top+h.clientHeight*p}}let g=0,m=0;if("nearest"==r)e.top<t.top?(m=e.top-(t.top+s),n>0&&e.bottom>t.bottom+m&&(m=e.bottom-t.bottom+s)):e.bottom>t.bottom&&(m=e.bottom-t.bottom+s,n<0&&e.top-m<t.top&&(m=e.top-(t.top+s)));else{let i=e.bottom-e.top,o=t.bottom-t.top;m=("center"==r&&i<=o?e.top+i/2-o/2:"start"==r||"center"==r&&n<0?e.top-s:e.bottom-o+s)-t.top}if("nearest"==i?e.left<t.left?(g=e.left-(t.left+o),n>0&&e.right>t.right+g&&(g=e.right-t.right+o)):e.right>t.right&&(g=e.right-t.right+o,n<0&&e.left<t.left+g&&(g=e.left-(t.left+o))):g=("center"==i?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==i==a?e.left-o:e.right-(t.right-t.left)+o)-t.left,g||m)if(d)c.scrollBy(g,m);else{let t=0,n=0;if(m){let t=h.scrollTop;h.scrollTop+=m/p,n=(h.scrollTop-t)*p}if(g){let e=h.scrollLeft;h.scrollLeft+=g/f,t=(h.scrollLeft-e)*f}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(i="nearest"),n&&Math.abs(n-m)<1&&(r="nearest")}if(d)break;(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)&&(e={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)}),h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,s),-s),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==xH.LTR)}}function SV(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=PQ(n.focusNode,n.focusOffset),r=TQ(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let e=RQ.get(r.node);if(!e||e instanceof YQ&&e.text!=r.node.nodeValue)o=r;else if(t.docView.lastCompositionAfterCursor){let t=RQ.get(i.node);!t||t instanceof YQ&&t.text!=i.node.nodeValue||(o=r)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let xV=class{constructor(){this.changes=[]}compareRange(t,e){mH(t,e,this.changes)}comparePoint(t,e){mH(t,e,this.changes)}boundChange(t){mH(t,t,this.changes)}};function kV(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function CV(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function AV(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function MV(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function EV(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function PV(t,e,n){let i,r,o,s,a,l,c,h,u=!1;for(let d=t.firstChild;d;d=d.nextSibling){let t=dQ(d);for(let f=0;f<t.length;f++){let p=t[f];r&&AV(r,p)&&(p=MV(EV(p,r.bottom),r.top));let g=kV(e,p),m=CV(n,p);if(0==g&&0==m)return 3==d.nodeType?TV(d,e,n):PV(d,e,n);if(!i||s>m||s==m&&o>g){i=d,r=p,o=g,s=m;let a=m?n<p.top?-1:1:g?e<p.left?-1:1:0;u=!a||(a>0?f<t.length-1:f>0)}0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=d,c=p):n<p.top&&(!h||h.top>p.top)&&(l=d,h=p):c&&AV(c,p)?c=EV(c,p.bottom):h&&AV(h,p)&&(h=MV(h,p.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=l,r=h),!i)return{node:t,offset:0};let d=Math.max(r.left,Math.min(r.right,e));return 3==i.nodeType?TV(i,d,n):u&&"false"!=i.contentEditable?PV(i,d,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0)}}function TV(t,e,n){let i=t.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let i=CQ(t,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<o){let n=e>=(c.left+c.right)/2,i=n;if((ZQ.chrome||ZQ.gecko)&&CQ(t,a).getBoundingClientRect().left==c.right&&(i=!n),h<=0)return{node:t,offset:a+(i?1:0)};r=a+(i?1:0),o=h}}}return{node:t,offset:r>-1?r:s>0?t.nodeValue.length:0}}function $V(t,e,n,i=-1){var r,o;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:h,y:u}=e,d=u-l;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,r=!1;s=t.elementAtHeight(d),s.type!=hH.Text;)for(;d=i>0?s.bottom+e:s.top-e,!(d>=0&&d<=c);){if(r)return n?null:0;r=!0,i=-i}u=l+d;let f=s.from;if(f<t.viewport.from)return 0==t.viewport.from?0:n?null:DV(t,a,s,h,u);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:DV(t,a,s,h,u);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,m=g.elementFromPoint(h,u);m&&!t.contentDOM.contains(m)&&(m=null),m||(h=Math.max(a.left+1,Math.min(a.right-1,h)),m=g.elementFromPoint(h,u),m&&!t.contentDOM.contains(m)&&(m=null));let v,b=-1;if(m&&0!=(null===(r=t.docView.nearest(m))||void 0===r?void 0:r.isEditable)){if(p.caretPositionFromPoint){let t=p.caretPositionFromPoint(h,u);t&&({offsetNode:v,offset:b}=t)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(h,u);e&&(({startContainer:v,startOffset:b}=e),(!t.contentDOM.contains(v)||ZQ.safari&&function(t,e,n){let i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return CQ(t,i-1,i).getBoundingClientRect().left>n}(v,b,h)||ZQ.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():CQ(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(v,b,h))&&(v=void 0))}v&&(b=Math.min(vQ(v),b))}if(!v||!t.docView.dom.contains(v)){let e=vH.find(t.docView,f);if(!e)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:b}=PV(e.dom,h,u))}let y=t.docView.nearest(v);if(!y)return null;if(y.isWidget&&1==(null===(o=y.dom)||void 0===o?void 0:o.nodeType)){let t=y.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?y.posAtStart:y.posAtEnd}return y.localPosFromDOM(v,b)+y.posAtStart}function DV(t,e,n,i,r){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;o+=Math.floor((r-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+ap(s,o,t.state.tabSize)}function RV(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),s=t.textDirectionAt(r.from);for(let a=e,l=null;;){let e=zH(r,o,s,a,n),c=IH;if(!e){if(r.number==(n?t.state.doc.lines:1))return a;c="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),e=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return e;l=i(c)}a=e}}function BV(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,((t,r,o)=>{if(e>t&&e<r){let o=i||n||(e-t<r-e?-1:1);e=o<0?t:r,i=o}}));if(!i)return e}}function NV(t,e,n){let i=BV(t.state.facet(fV).map((e=>e(t))),n.from,e.head>n.from?-1:1);return i==n.from?n:ef.cursor(i,i<n.from?1:-1)}const LV="￿";class jV{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Hf.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=LV}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i);let t=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==e)break;let o=RQ.get(i),s=RQ.get(r);(o&&s?o.breakAfter:(o?o.breakAfter:gQ(i))||gQ(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>t)&&this.lineBreak(),i=r}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(r=i.exec(e))&&(o=r.index,s=r[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=RQ.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(_V(t,n.node,n.offset)?e:0))}}function _V(t,e,n){for(;;){if(!e||n<vQ(e))return!1;if(e==t)return!0;n=pQ(e)+1,e=e.parentNode}}class IV{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class zV{constructor(t,e,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=r||o?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new IV(n,i)),r==n&&o==i||e.push(new IV(r,o))),e}(t),n=new jV(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?ef.single(n+e,i+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=r&&r.node==e.focusNode&&r.offset==e.focusOffset||!hQ(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),i=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!hQ(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset),s=t.viewport;if((ZQ.ios||ZQ.chrome)&&t.state.selection.main.empty&&n!=i&&(s.from>0||s.to<t.state.doc.length)){let e=Math.min(n,i),r=Math.max(n,i),o=s.from-e,a=s.to-r;0!=o&&1!=o&&0!=e||0!=a&&-1!=a&&r!=t.state.doc.length||(n=0,i=t.state.doc.length)}this.newSel=ef.single(i,n)}}}function QV(t,e){let n,{newSel:i}=e,r=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:i,to:s}=e.bounds,a=r.from,l=null;(8===o||ZQ.android&&e.text.length<s-i)&&(a=r.to,l="end");let c=function(t,e,n,i){let r=Math.min(t.length,e.length),o=0;for(;o<r&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;return"end"==i&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(t.state.doc.sliceString(i,s,LV),e.text,a-i,l);c&&(ZQ.chrome&&13==o&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==LV+LV&&c.toB--,n={from:i+c.from,to:i+c.toA,insert:Td.of(e.text.slice(c.from,c.toB).split(LV))})}else i&&(!t.hasFocus&&t.state.facet(rV)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(ZQ.mac||ZQ.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Td.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:ZQ.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(i&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Td.of([" "])}),n)return HV(t,n,i,o);if(i&&!i.main.eq(r)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:e,userEvent:n}),!0}return!1}function HV(t,e,n,i=-1){if(ZQ.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(ZQ.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&" "==t.state.sliceDoc(e.from,r.from))&&1==e.insert.length&&2==e.insert.lines&&AQ(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&0==e.insert.length||8==i&&e.insert.length<e.to-e.from&&e.to>r.head)&&AQ(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&0==e.insert.length&&AQ(t.contentDOM,"Delete",46)))return!0;let o,s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a=()=>o||(o=function(t,e,n){let i,r=t.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=o.from<e.from?r.sliceDoc(o.from,e.from):"",s=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=r.changes(e),a=n&&n.main.to<=s.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let l,c=t.state.sliceDoc(e.from,e.to),h=n&&SV(t,n.main.head);if(h){let t=e.insert.length-(e.to-e.from);l={from:h.from,to:h.to-t}}else l=t.state.doc.lineAt(o.head);let u=o.to-e.to,d=o.to-o.from;i=r.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let i=n.to-u,h=i-c.length;if(n.to-n.from!=d||t.state.sliceDoc(h,i)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=r.changes({from:h,to:i,insert:e.insert}),p=n.to-o.to;return{changes:f,range:a?ef.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else i={changes:s,selection:a&&r.selection.replaceRange(a)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:s,scrollIntoView:!0})}(t,e,n));return t.state.facet(XH).some((n=>n(t,e.from,e.to,s,a)))||t.dispatch(a()),!0}class VV{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,ZQ.safari&&t.contentDOM.addEventListener("input",(()=>null)),ZQ.gecko&&function(t){gW.has(t)||(gW.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,i=e.target;i!=t.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=RQ.get(i))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||(0!=this.view.updateState?Promise.resolve().then((()=>this.runHandlers(t.type,t))):this.runHandlers(t.type,t)))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=function(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let i in t.domEventHandlers){let r=t.domEventHandlers[i];r&&n(i).handlers.push(WV(e.value,r))}if(t&&t.domEventObservers)for(let i in t.domEventObservers){let r=t.domEventObservers[i];r&&n(i).observers.push(WV(e.value,r))}}for(let t in YV)n(t).handlers.push(YV[t]);for(let t in GV)n(t).observers.push(GV[t]);return e}(t),n=this.handlers,i=this.view.contentDOM;for(let t in e)if("scroll"!=t){let r=!e[t].handlers.length,o=n[t];o&&r!=!o.handlers.length&&(i.removeEventListener(t,this.handleEvent),o=null),o||i.addEventListener(t,this.handleEvent,{passive:r})}for(let t in n)"scroll"==t||e[t]||i.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=t.keyCode&&XV.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),ZQ.android&&ZQ.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!ZQ.ios||t.synthetic||t.altKey||t.metaKey||!((e=FV.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||qV.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&!("Enter"==e.key&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString()))&&(this.pendingIOSKey=void 0,AQ(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(ZQ.safari&&!ZQ.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function WV(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(t){iV(n.state,t)}}}const FV=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],qV="dthko",XV=[16,17,18,20,91,92,224,225];function KV(t){return.7*Math.max(0,t)+8}class ZV{constructor(t,e,n,i){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=function(t){let e,n,i=t.ownerDocument;for(let r=t.parentNode;r&&!(r==i.body||e&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:e,y:n}}(t.contentDOM),this.atoms=t.state.facet(fV).map((e=>e(t)));let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Hf.allowMultipleSelections)&&function(t,e){let n=t.state.facet(HH);return n.length?n[0](e):ZQ.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=cQ(t.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let t=0;t<r.length;t++){let n=r[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=cW(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(e=this.startEvent,n=t,Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))<10))return;var e,n;this.select(this.lastEvent=t);let i=0,r=0,o=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=vV(this.view);t.clientX-c.left<=o+6?i=-KV(o-t.clientX):t.clientX+c.right>=a-6&&(i=KV(t.clientX-a)),t.clientY-c.top<=s+6?r=-KV(s-t.clientY):t.clientY+c.bottom>=l-6&&(r=KV(t.clientY-l)),this.setScrollSpeed(i,r)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n],r=null;if(i.empty){let t=BV(this.atoms,i.from,0);t!=i.from&&(r=ef.cursor(t,-1))}else{let t=BV(this.atoms,i.from,-1),e=BV(this.atoms,i.to,1);t==i.from&&e==i.to||(r=ef.range(i.from==i.anchor?t:e,i.from==i.head?t:e))}r&&(e||(e=t.ranges.slice()),e[n]=r)}return e?ef.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&n.eq(e.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some((t=>t.isUserEvent("input.type")))?this.destroy():this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const YV=Object.create(null),GV=Object.create(null),UV=ZQ.ie&&ZQ.ie_version<15||ZQ.ios&&ZQ.webkit_version<604;function JV(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function tW(t,e){e=JV(t.state,ZH,e);let n,{state:i}=t,r=1,o=i.toText(e),s=o.lines==i.selection.ranges.length;if(null!=uW&&i.selection.ranges.every((t=>t.empty))&&uW==o.toString()){let t=-1;n=i.changeByRange((n=>{let a=i.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=i.toText((s?o.line(r++).text:e)+i.lineBreak);return{changes:{from:a.from,insert:l},range:ef.cursor(n.from+l.length)}}))}else n=s?i.changeByRange((t=>{let e=o.line(r++);return{changes:{from:t.from,to:t.to,insert:e.text},range:ef.cursor(t.from+e.length)}})):i.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function eW(t,e,n,i){if(1==i)return ef.cursor(e,n);if(2==i)return function(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),o=e-r.from;if(0==r.length)return ef.cursor(e);0==o?n=1:o==r.length&&(n=-1);let s=o,a=o;n<0?s=zd(r.text,o,!1):a=zd(r.text,o);let l=i(r.text.slice(s,a));for(;s>0;){let t=zd(r.text,s,!1);if(i(r.text.slice(t,s))!=l)break;s=t}for(;a<r.length;){let t=zd(r.text,a);if(i(r.text.slice(a,t))!=l)break;a=t}return ef.range(s+r.from,a+r.from)}(t.state,e,n);{let n=vH.find(t.docView,e),i=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:i.from,o=n?n.posAtEnd:i.to;return o<t.state.doc.length&&o==i.to&&o++,ef.range(r,o)}}GV.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},YV.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&0!=t.inputState.tabFocusMode&&(t.inputState.tabFocusMode=Date.now()+2e3),!1),GV.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},GV.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},YV.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(WH))if(n=i(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=rW(t,e),i=cW(e),r=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),r=r.map(t.changes))},get(e,o,s){let a,l=rW(t,e),c=eW(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let e=eW(t,n.pos,n.bias,i),r=Math.min(e.from,c.from),o=Math.max(e.to,c.to);c=r<c.from?ef.range(r,o):ef.range(o,r)}return o?r.replaceRange(r.main.extend(c.from,c.to)):s&&1==i&&r.ranges.length>1&&(a=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ef.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(r,l.pos))?a:s?r.addRange(c):ef.create([c])}}}(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new ZV(t,e,n,i)),i&&t.observer.ignore((()=>{kQ(t.contentDOM);let e=t.root.activeElement;e&&!e.contains(t.contentDOM)&&e.blur()}));let r=t.inputState.mouseSelection;if(r)return r.start(e),!1===r.dragging}return!1};let nW=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function iW(t,e,n,i){let r=vH.find(t.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&nW(n,i,s))return-1;let a=r.coordsAt(o,1);return a&&nW(n,i,a)?1:s&&s.bottom>=i?-1:1}function rW(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:iW(t,n,e.clientX,e.clientY)}}const oW=ZQ.ie&&ZQ.ie_version<=11;let sW=null,aW=0,lW=0;function cW(t){if(!oW)return t.detail;let e=sW,n=lW;return sW=t,lW=Date.now(),aW=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(aW+1)%3:1}function hW(t,e,n,i){if(!(n=JV(t.state,ZH,n)))return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=i&&o&&function(t,e){let n=t.state.facet(VH);return n.length?n[0](e):ZQ.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:o.from,to:o.to}:null,a={from:r,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}YV.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let t=i.posAtStart,e=t+i.length;(t>=n.to||e<=n.from)&&(n=ef.range(t,e))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",JV(t.state,YH,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1},YV.dragend=t=>(t.inputState.draggedContent=null,!1),YV.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,o=()=>{++r==n.length&&hW(t,e,i.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return hW(t,e,n,!0),!0}return!1},YV.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=UV?null:e.clipboardData;return n?(tW(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),tW(t,n.value)}),50)}(t),!1)};let uW=null;YV.copy=YV.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=function(t){let e=[],n=[],i=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:JV(t,YH,e.join(t.lineBreak)),ranges:n,linewise:i}}(t.state);if(!n&&!r)return!1;uW=r?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=UV?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout((()=>{i.remove(),t.focus()}),50)}(t,n),!1)};const dW=Ef.define();function fW(t,e){let n=[];for(let i of t.facet(KH)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:dW.of(!0)}):null}function pW(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=fW(t.state,e);n?t.dispatch(n):t.update([])}}),10)}GV.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),pW(t)},GV.blur=t=>{t.observer.clearSelectionRange(),pW(t)},GV.compositionstart=GV.compositionupdate=t=>{t.observer.editContext||(null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))},GV.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,ZQ.chrome&&ZQ.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50))},GV.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},YV.beforeinput=(t,e)=>{var n,i;if("insertReplacementText"==e.inputType&&t.observer.editContext){let i=null===(n=e.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),r=e.getTargetRanges();if(i&&r.length){let e=r[0],n=t.posAtDOM(e.startContainer,e.startOffset),o=t.posAtDOM(e.endContainer,e.endOffset);return HV(t,{from:n,to:o,insert:t.state.toText(i)},null),!0}}let r;if(ZQ.chrome&&ZQ.android&&(r=FV.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return ZQ.ios&&"deleteContentForward"==e.inputType&&t.observer.flushSoon(),ZQ.safari&&"insertText"==e.inputType&&t.inputState.composing>=0&&setTimeout((()=>GV.compositionend(t,e)),20),!1};const gW=new Set,mW=["pre-wrap","normal","pre-line","break-spaces"];let vW=!1;function bW(){vW=!1}class yW{constructor(t){this.lineWrapping=t,this.doc=Td.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return mW.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e}refresh(t,e,n,i,r,o){let s=mW.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let t=0;t<o.length;t++){let e=o[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return a}}class wW{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class OW{constructor(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?hH.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof pH?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new OW(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var SW=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(SW||(SW={}));const xW=.001;class kW{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>xW&&(vW=!0),this.height=t)}replace(t,e,n){return kW.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,i){let r=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:h}=i[s],u=r.lineAt(a,SW.ByPosNoHeight,n.setDoc(e),0,0),d=u.to>=l?u:r.lineAt(l,SW.ByPosNoHeight,n,0,0);for(h+=d.to-l,l=d.to;s>0&&u.from<=i[s-1].toA;)a=i[s-1].fromA,c=i[s-1].fromB,s--,a<u.from&&(u=r.lineAt(a,SW.ByPosNoHeight,n,0,0));c+=u.from-a,a=u.from;let f=$W.build(n.setDoc(o),t,c,h);r=CW(r,r.replace(a,l,f))}return r.updateHeight(n,0)}static empty(){return new MW(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,i=0,r=0;for(;;)if(e==n)if(i>2*r){let r=t[e-1];r.break?t.splice(--e,1,r.left,null,r.right):t.splice(--e,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,r-=e.size}}else if(i<r){let n=t[e++];n&&(i+=n.size)}else{let e=t[--n];e&&(r+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new PW(kW.of(t.slice(0,e)),o,kW.of(t.slice(n)))}}function CW(t,e){return t==e?t:(t.constructor!=e.constructor&&(vW=!0),e)}kW.prototype.size=1;class AW extends kW{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,i){return new OW(i,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(t,e,n,i,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,n,i,r))}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class MW extends AW{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,i){return new OW(i,this.length,n,this.height,this.breaks)}replace(t,e,n){let i=n[0];return 1==n.length&&(i instanceof MW||i instanceof EW&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof EW?i=new MW(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):kW.of(n)}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class EW extends kW{constructor(t){super(t,0)}heightMetrics(t,e){let n,i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-i+1,s=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*o);n=e/o,this.length>o+1&&(s=(this.height-e)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:s}}blockAt(t,e,n,i){let{firstLine:r,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(e,i);if(e.lineWrapping){let r=i+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),o=e.doc.lineAt(r),l=s+o.length*a,c=Math.max(n,t-l/2);return new OW(o.from,o.length,c,l,0)}{let i=Math.max(0,Math.min(o-r,Math.floor((t-n)/s))),{from:a,length:l}=e.doc.line(r+i);return new OW(a,l,n+s*i,s,0)}}lineAt(t,e,n,i,r){if(e==SW.ByHeight)return this.blockAt(t,n,i,r);if(e==SW.ByPosNoHeight){let{from:e,to:i}=n.doc.lineAt(t);return new OW(e,i-e,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,r),l=n.doc.lineAt(t),c=s+l.length*a,h=l.number-o,u=i+s*h+a*(l.from-r-h);return new OW(l.from,l.length,Math.max(i,Math.min(u,i+this.height-c)),c,0)}forEachLine(t,e,n,i,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,r);for(let c=t,h=i;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-s;h+=a*n+l*(t-r-n)}let i=a+l*e.length;o(new OW(e.from,e.length,h,i,0)),h+=i,c=e.to+1}}replace(t,e,n){let i=this.length-e;if(i>0){let t=n[n.length-1];t instanceof EW?n[n.length-1]=new EW(t.length+i):n.push(null,new EW(i-1))}if(t>0){let e=n[0];e instanceof EW?n[0]=new EW(t+e.length):n.unshift(new EW(t-1),null)}return kW.of(n)}decomposeLeft(t,e){e.push(new EW(t-1),null)}decomposeRight(t,e){e.push(null,new EW(this.length-t-1))}updateHeight(t,e=0,n=!1,i){let r=e+this.length;if(i&&i.from<=e+this.length&&i.more){let n=[],o=Math.max(e,i.from),s=-1;for(i.from>e&&n.push(new EW(i.from-e-1).updateHeight(t,e));o<=r&&i.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==s?s=r:Math.abs(r-s)>=xW&&(s=-2);let a=new MW(e,r);a.outdated=!1,n.push(a),o+=e+1}o<=r&&n.push(null,new EW(r-o).updateHeight(t,o));let a=kW.of(n);return(s<0||Math.abs(a.height-this.height)>=xW||Math.abs(s-this.heightMetrics(t,e).perLine)>=xW)&&(vW=!0),CW(this,a)}return(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class PW extends kW{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,i){let r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)}lineAt(t,e,n,i,r){let o=i+this.left.height,s=r+this.left.length+this.break,a=e==SW.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==SW.ByPosNoHeight?SW.ByPosNoHeight:SW.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,r).join(l)}forEachLine(t,e,n,i,r,o){let s=i+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,i,r,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{let l=this.lineAt(a,SW.ByPos,n,i,r);t<l.from&&this.left.forEachLine(t,l.from-1,n,i,r,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}}replace(t,e,n){let i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let t of n)r.push(t);if(t>0&&TW(r,o-1),e<this.length){let t=r.length;this.decomposeRight(e,r),TW(r,t)}return kW.of(r)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?kW.of(this.break?[t,null,e]:[t,e]):(this.left=CW(this.left,t),this.right=CW(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,i){let{left:r,right:o}=this,s=e+r.length+this.break,a=null;return i&&i.from<=e+r.length&&i.more?a=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=s+o.length&&i.more?a=o=o.updateHeight(t,s,n,i):o.updateHeight(t,s,n),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function TW(t,e){let n,i;null==t[e]&&(n=t[e-1])instanceof EW&&(i=t[e+1])instanceof EW&&t.splice(e-1,3,new EW(n.length+1+i.length))}class $W{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof MW?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new MW(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=e-t;n.block?this.addBlock(new AW(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new MW(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new EW(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof MW)return t;let e=new MW(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),i.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof MW||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new MW(0,-1));let n=t;for(let t of this.nodes)t instanceof MW&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,i){let r=new $W(n,t);return Kf.spans(e,n,i,r,0),r.finish(n)}}class DW{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&mH(t,e,this.changes,5)}}function RW(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=i.body;)if(1==e.nodeType){let n=e,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();o=Math.max(o,i.left),s=Math.min(s,i.right),a=Math.max(a,i.top),l=Math.min(e==t.parentNode?r.innerHeight:l,i.bottom)}e="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function BW(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class NW{constructor(t,e,n,i){this.from=t,this.to=e,this.size=n,this.displaySize=i}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(t,e){return uH.replace({widget:new LW(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class LW extends cH{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class jW{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=QW,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=xH.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(hV).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new yW(e),this.stateDeco=t.facet(uV).filter((t=>"function"!=typeof t)),this.heightMap=kW.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle.setDoc(t.doc),[new yV(0,0,0,t.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=uH.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let i=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>i>=t&&i<=e))){let{from:e,to:n}=this.lineBlockAt(i);t.push(new _W(e,n))}}return this.viewports=t.sort(((t,e)=>t.from-e.from)),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?QW:new HW(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(VW(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(uV).filter((t=>"function"!=typeof t));let i=t.changedRanges,r=yV.extendWithRanges(i,function(t,e,n){let i=new DW;return Kf.compare(t,e,n,i,0),i.changes}(n,this.stateDeco,t?t.changes:Xd.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);bW(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||vW)&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,t.flags|=this.updateForViewport(),(l||!t.changes.empty||2&t.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(UH)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?xH.RTL:xH.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),s=e.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:t,scaleY:n}=wQ(e,s);(t>.005&&Math.abs(this.scaleX-t)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=t,this.scaleY=n,l|=16,o=a=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,u=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==u||(this.paddingTop=h,this.paddingBottom=u,l|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=16);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=EQ(t.scrollDOM);let f=(this.printing?BW:RW)(e,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!function(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}(t.dom))return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=t.scrollDOM.clientHeight,l|=16),a){let e=t.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(e)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=t.docView.measureTextSize();o=n>0&&i.refresh(r,n,s,a,v/s,e),o&&(t.docView.minWidth=0,l|=16)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),bW();for(let n of this.viewports){let r=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(o?kW.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle,[new yV(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new wW(n.from,r))}vW&&(l|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new _W(i.lineAt(o-1e3*n,SW.ByHeight,r,0,0).from,i.lineAt(s+1e3*(1-n),SW.ByHeight,r,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=i.lineAt(t,SW.ByPos,r,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-o,a=new _W(i.lineAt(n-500,SW.ByHeight,r,0,0).from,i.lineAt(n+o+500,SW.ByHeight,r,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new _W(this.heightMap.lineAt(n,SW.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,SW.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,SW.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,SW.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||i<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||r>=s+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let i of t)e.touchesRange(i.from,i.to)||n.push(new NW(e.mapPos(i.from),e.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=xH.LTR&&!n)return[];let s=[],a=(i,o,l,c)=>{if(o-i<r)return;let h=this.state.selection.main,u=[h.from];h.empty||u.push(h.to);for(let t of u)if(t>i&&t<o)return a(i,t-10,l,c),void a(t+10,o,l,c);let d=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-i)<r&&Math.abs(t.to-o)<r&&!u.some((e=>t.from<e&&t.to>e))));if(!d){if(o<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=o&&t.to>=o))){let t=e.moveToLineBoundary(ef.cursor(o),!1,!0).head;t>i&&(o=t)}let t=this.gapSize(l,i,o,c);d=new NW(i,o,t,n||t<2e6?t:2e6)}s.push(d)},l=e=>{if(e.length<o||e.type!=hH.Text)return;let r=function(t,e,n){let i=[],r=t,o=0;return Kf.spans(n,t,e,{span(){},point(t,e){t>r&&(i.push({from:r,to:t}),o+=t-r),r=e}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}(e.from,e.to,this.stateDeco);if(r.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let t,n,o=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let i=zW(r,c),s=((this.visibleBottom-this.visibleTop)/2+o)/e.height;t=i-s,n=i+s}else t=(this.visibleTop-e.top-o)/e.height,n=(this.visibleBottom-e.top+o)/e.height;s=IW(r,t),l=IW(r,n)}else{let n=r.total*this.heightOracle.charWidth,o=i*this.heightOracle.charWidth,a=0;if(n>2e6)for(let n of t)n.from>=e.from&&n.from<e.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let h,u,d=this.pixelViewport.left+a,f=this.pixelViewport.right+a;if(null!=c){let t=zW(r,c),e=((f-d)/2+o)/n;h=t-e,u=t+e}else h=(d-o)/n,u=(f+o)/n;s=IW(r,h),l=IW(r,u)}s>e.from&&a(e.from,s,e,r),l<e.to&&a(l,e.to,e,r)};for(let t of this.viewportLines)Array.isArray(t.type)?t.type.forEach(l):l(t);return s}gapSize(t,e,n,i){let r=zW(i,n)-zW(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(t){NW.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=uH.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Kf.spans(e,this.viewport.from,this.viewport.to,{span(t,e){n.push({from:t,to:e})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let e=0;e<n.length&&!(8&i);e++){let r=this.visibleRanges[e],o=n[e];r.from==o.from&&r.to==o.to||(i|=4,t&&t.mapPos(r.from,-1)==o.from&&t.mapPos(r.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||VW(this.heightMap.lineAt(t,SW.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((e=>e.top<=t&&e.bottom>=t))||VW(this.heightMap.lineAt(this.scaler.fromDOM(t),SW.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return VW(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class _W{constructor(t,e){this.from=t,this.to=e}}function IW({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:r}=e[t],o=r-n;if(i<=o)return n+i;i-=o}}function zW(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}const QW={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class HW{constructor(t,e,n){let i=0,r=0,o=0;this.viewports=n.map((({from:n,to:r})=>{let o=e.lineAt(n,SW.ByPos,t,0,0).top,s=e.lineAt(r,SW.ByPos,t,0,0).bottom;return i+=s-o,{from:n,to:r,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(e.height-i);for(let t of this.viewports)t.domTop=o+(t.top-r)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),r=t.bottom}toDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}}fromDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}}eq(t){return t instanceof HW&&this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every(((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to))}}function VW(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new OW(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map((t=>VW(t,e))):t._content)}const WW=of.define({combine:t=>t.join(" ")}),FW=of.define({combine:t=>t.indexOf(!0)>-1}),qW=up.newName(),XW=up.newName(),KW=up.newName(),ZW={"&light":"."+XW,"&dark":"."+KW};function YW(t,e,n){return new up(e,{finish(e){return/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e}})}const GW=YW("."+qW,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ZW),UW={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},JW=ZQ.ie&&ZQ.ie_version<=11;class tF{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new OQ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(ZQ.ie&&ZQ.ie_version<=11||ZQ.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===t.constructor.EDIT_CONTEXT||ZQ.chrome&&ZQ.chrome_version<126||(this.editContext=new iF(t),t.state.facet(rV)&&(t.contentDOM.editContext=this.editContext.editContext)),JW&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(t){("change"!=t.type&&t.type||t.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(rV)?n.root.activeElement!=this.dom:!uQ(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(t)?e||(this.selectionChanged=!1):(ZQ.ie&&ZQ.ie_version<=11||ZQ.android&&ZQ.chrome)&&!n.state.selection.main.empty&&i.focusNode&&fQ(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=cQ(t.root);if(!e)return!1;let n=ZQ.safari&&11==t.root.nodeType&&t.root.activeElement==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return nF(t,n)}let n=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?nF(t,n):null}(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let i=uQ(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,vQ(n));;)if(i){if(1!=n.nodeType)return!1;let t=n.childNodes[i-1];"false"==t.contentEditable?i--:(n=t,i=vQ(n))}else{if(n==t)return!0;i=pQ(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,UW),JW&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),JW&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&AQ(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,i=!1;for(let r of t){let t=this.readMutation(r);t&&(t.typeOver&&(i=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:i}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),i=this.selectionChanged&&uQ(this.dom,this.selectionRange);if(t<0&&!i)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new zV(this.view,t,e,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,i=QV(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=eF(e,t.previousSibling||t.target.previousSibling,-1),i=eF(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(rV)!=t.state.facet(rV)&&(t.view.contentDOM.editContext=t.state.facet(rV)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function eF(t,e,n){for(;e;){let i=RQ.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function nF(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return fQ(s.node,s.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}class iF{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=e=>{let n=t.state.selection.main,{anchor:i,head:r}=n,o=this.toEditorPos(e.updateRangeStart),s=this.toEditorPos(e.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:e.updateRangeStart,editorBase:o,drifted:!1});let a={from:o,to:s,insert:Td.of(e.text.split("\n"))};if(a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),a.from!=a.to||a.insert.length){if((ZQ.mac||ZQ.android)&&a.from==r-1&&/^\. ?$/.test(e.text)&&"off"==t.contentDOM.getAttribute("autocorrect")&&(a={from:o,to:s,insert:Td.of([e.text.replace("."," ")])}),this.pendingContextChange=a,!t.state.readOnly){let n=this.to-this.from+(a.to-a.from+a.insert.length);HV(t,a,ef.single(this.toEditorPos(e.selectionStart,n),this.toEditorPos(e.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))}else{let i=ef.single(this.toEditorPos(e.selectionStart),this.toEditorPos(e.selectionEnd));i.main.eq(n)||t.dispatch({selection:i,userEvent:"select"})}},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let e=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);e<o;e++){let n=t.coordsForChar(e);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}e.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=e=>{let n=[];for(let t of e.getTextFormats()){let e=t.underlineStyle,i=t.underlineThickness;if("None"!=e&&"None"!=i){let r=this.toEditorPos(t.rangeStart),o=this.toEditorPos(t.rangeEnd);if(r<o){let t=`text-decoration: underline ${"Dashed"==e?"dashed ":"Squiggle"==e?"wavy ":""}${"Thin"==i?1:2}px`;n.push(uH.mark({attributes:{style:t}}).range(r,o))}}}t.dispatch({effects:nV.of(uH.set(n))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:e}=this.composing;this.composing=null,e&&this.reset(t.state)}};for(let t in this.handlers)e.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let e=cQ(t.root);e&&e.rangeCount&&this.editContext.updateSelectionBounds(e.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,i=this.pendingContextChange;return t.changes.iterChanges(((r,o,s,a,l)=>{if(n)return;let c=l.length-(o-r);if(i&&o>=i.to){if(i.from==r&&i.to==o&&i.insert.eq(l))return i=this.pendingContextChange=null,e+=c,void(this.to+=c);i=null,this.revertPending(t.state)}if(r+=e,(o+=e)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),l.toString()),this.to+=c}e+=c})),i&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some((t=>!t.isUserEvent("input.type")&&t.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):this.applyEdits(t)&&this.rangeIsValid(t.state)?(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state):(this.pendingContextChange=null,this.reset(t.state)),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),i=this.toContextPos(e.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>3e4)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class rF{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(t=>t.forEach((t=>n(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new jW(t.state||Hf.create(t)),t.scrollTo&&t.scrollTo.is(eV)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(sV).map((t=>new lV(t)));for(let t of this.plugins)t.update(this);this.observer=new tF(this),this.inputState=new VV(this),this.inputState.ensureHandlers(this.plugins),this.docView=new OV(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(e=document.fonts)||void 0===e?void 0:e.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...t){let e=1==t.length&&t[0]instanceof Df?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,i=!1,r=this.state;for(let e of t){if(e.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=e.state}if(this.destroyed)return void(this.viewState.state=r);let o=this.hasFocus,s=0,a=null;t.some((t=>t.annotation(dW)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=fW(r,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(Hf.phrases)!=this.state.facet(Hf.phrases))return this.setState(r);e=wV.create(this,r,t),e.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(h&&(h=h.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;h=new tV(t.empty?t:ef.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(eV)&&(h=t.value.clip(this.state))}this.viewState.update(e,h),this.bidiCache=aF.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(bV)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(WW)!=e.state.facet(WW)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!e.empty)for(let t of this.state.facet(qH))try{t(e)}catch(t){iV(this.state,t,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!QV(this,c)&&l.force&&AQ(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new jW(t),this.plugins=t.facet(sV).map((t=>new lV(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new OV(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(sV),n=t.state.facet(sV);if(e!=n){let i=[];for(let r of n){let n=e.indexOf(r);if(n<0)i.push(new lV(r));else{let e=this.plugins[n];e.mustUpdate=t,i.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(t){iV(this.state,t,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(o<0)if(EQ(n))r=-1,o=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(i);r=t.from,o=t.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((t=>{try{return t.read(this)}catch(t){return iV(this.state,t),sF}})),c=wV.create(this,this.state,[]),h=!1;c.flags|=s,e?e.flags|=s:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let t=0;t<a.length;t++)if(l[t]!=sF)try{let e=a[t];e.write&&e.write(l[t],this)}catch(t){iV(this.state,t)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let t=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(t>1||t<-1){i+=t,n.scrollTop=i/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(qH))t(e)}get themeClasses(){return qW+" "+(this.state.facet(FW)?KW:XW)+" "+this.state.facet(WW)}updateAttrs(){let t=lF(this,cV,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(rV)?"true":"false",class:"cm-content",style:`${ZQ.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),lF(this,hV,e);let n=this.observer.ignore((()=>{let n=aH(this.contentDOM,this.contentAttrs,e),i=aH(this.dom,this.editorAttrs,t);return n||i}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(rF.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(bV);let t=this.state.facet(rF.cspNonce);up.mount(this.root,this.styleModules.concat(GW).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return NV(this,t,RV(this,t,e,n))}moveByGroup(t,e){return NV(this,t,RV(this,t,e,(e=>function(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return t=>{let e=i(t);return r==If.Space&&(r=e),r==e}}(this,t.head,e))))}visualLineSide(t,e){let n=this.bidiSpans(t),i=this.textDirectionAt(t.from),r=n[e?n.length-1:0];return ef.cursor(r.side(e,i)+t.from,r.forward(!e,i)?1:-1)}moveToLineBoundary(t,e,n=!0){return function(t,e,n,i){let r=function(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let t;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;t&&(r.type!=hH.Text||t.type==r.type&&!(n<0?r.from<e:r.to>e))||(t=r)}}return t||i}return i}(t,e.head,e.assoc||-1),o=i&&r.type==hH.Text&&(t.lineWrapping||r.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),i=t.textDirectionAt(r.from),s=t.posAtCoords({x:n==(i==xH.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return ef.cursor(s,n?-1:1)}return ef.cursor(n?r.to:r.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return NV(this,t,function(t,e,n,i){let r=e.head,o=n?1:-1;if(r==(n?t.state.doc.length:0))return ef.cursor(r,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),h=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-e.from))),s=(o<0?e.top:e.bottom)+h}let u=l.left+a,d=null!=i?i:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(d+e)*o,i=$V(t,{x:u,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?i<r:i>r)){let e=t.docView.coordsForChar(i),r=!e||n<e.top?-1:1;return ef.cursor(i,r,void 0,a)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),$V(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),r=this.bidiSpans(i);return bQ(n,r[RH.find(r,t-i.from,-1,e)].dir==xH.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(GH)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>oF)return _H(t.length);let e,n=this.textDirectionAt(t.from);for(let i of this.bidiCache)if(i.from==t.from&&i.dir==n&&(i.fresh||BH(i.isolates,e=gV(this,t))))return i.order;e||(e=gV(this,t));let i=function(t,e,n){if(!t)return[new RH(0,0,e==CH?1:0)];if(e==kH&&!n.length&&!DH.test(t))return _H(t.length);if(n.length)for(;t.length>NH.length;)NH[NH.length]=256;let i=[],r=e==kH?0:1;return jH(t,r,r,n,0,t.length,i),i}(t.text,n,e);return this.bidiCache.push(new aF(t.from,t.to,n,e,!0,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||ZQ.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{kQ(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return eV.of(new tV("number"==typeof t?ef.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return eV.of(new tV(ef.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){null==t?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof t?this.inputState.tabFocusMode=t?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return aV.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return aV.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=up.newName(),i=[WW.of(n),bV.of(YW(`.${n}`,t))];return e&&e.dark&&i.push(FW.of(!0)),i}static baseTheme(t){return pf.lowest(bV.of(YW("."+qW,t,ZW)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),i=n&&RQ.get(n)||RQ.get(t);return(null===(e=null==i?void 0:i.rootView)||void 0===e?void 0:e.view)||null}}rF.styleModule=bV,rF.inputHandler=XH,rF.clipboardInputFilter=ZH,rF.clipboardOutputFilter=YH,rF.scrollHandler=JH,rF.focusChangeEffect=KH,rF.perLineTextDirection=GH,rF.exceptionSink=FH,rF.updateListener=qH,rF.editable=rV,rF.mouseSelectionStyle=WH,rF.dragMovesSelection=VH,rF.clickAddsSelectionRange=HH,rF.decorations=uV,rF.outerDecorations=dV,rF.atomicRanges=fV,rF.bidiIsolatedRanges=pV,rF.scrollMargins=mV,rF.darkTheme=FW,rF.cspNonce=of.define({combine:t=>t.length?t[0]:""}),rF.contentAttributes=hV,rF.editorAttributes=cV,rF.lineWrapping=rF.contentAttributes.of({class:"cm-lineWrapping"}),rF.announce=$f.define();const oF=4096,sF={};class aF{constructor(t,e,n,i,r,o){this.from=t,this.to=e,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],i=t.length?t[t.length-1].dir:xH.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir!=i||e.touchesRange(o.from,o.to)||n.push(new aF(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function lF(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let e=i[r],o="function"==typeof e?e(t):e;o&&rH(o,n)}return n}const cF=ZQ.mac?"mac":ZQ.windows?"win":ZQ.linux?"linux":"key";function hF(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}const uF=pf.default(rF.domEventHandlers({keydown(t,e){return bF(pF(e.state),t,e,"editor")}})),dF=of.define({enables:uF}),fF=new WeakMap;function pF(t){let e=t.facet(dF),n=fF.get(e);return n||fF.set(e,n=function(t,e=cF){let n=Object.create(null),i=Object.create(null),r=(t,e)=>{let n=i[t];if(null==n)i[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},o=(t,i,o,s,a)=>{var l,c;let h=n[t]||(n[t]=Object.create(null)),u=i.split(/ (?!$)/).map((t=>function(t,e){const n=t.split(/-(?!$)/);let i,r,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let t=0;t<n.length-1;++t){const a=n[t];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))i=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==e?s=!0:r=!0}}return i&&(a="Alt-"+a),r&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(t,e)));for(let e=1;e<u.length;e++){let n=u.slice(0,e).join(" ");r(n,!0),h[n]||(h[n]={preventDefault:!0,stopPropagation:!1,run:[e=>{let i=gF={view:e,prefix:n,scope:t};return setTimeout((()=>{gF==i&&(gF=null)}),mF),!0}]})}let d=u.join(" ");r(d,!1);let f=h[d]||(h[d]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=h._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});o&&f.run.push(o),s&&(f.preventDefault=!0),a&&(f.stopPropagation=!0)};for(let i of t){let t=i.scope?i.scope.split(" "):["editor"];if(i.any)for(let e of t){let t=n[e]||(n[e]=Object.create(null));t._any||(t._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:r}=i;for(let e in t)t[e].run.push((t=>r(t,vF)))}let r=i[e]||i.key;if(r)for(let e of t)o(e,r,i.run,i.preventDefault,i.stopPropagation),i.shift&&o(e,"Shift-"+r,i.shift,i.preventDefault,i.stopPropagation)}return n}(e.reduce(((t,e)=>t.concat(e)),[]))),n}let gF=null;const mF=4e3;let vF=null;function bF(t,e,n,i){vF=e;let r=wp(e),o=Vd(Qd(r,0))==r.length&&" "!=r,s="",a=!1,l=!1,c=!1;gF&&gF.view==n&&gF.scope==i&&(s=gF.prefix+" ",XV.indexOf(e.keyCode)<0&&(l=!0,gF=null));let h,u,d=new Set,f=t=>{if(t){for(let e of t.run)if(!d.has(e)&&(d.add(e),e(n)))return t.stopPropagation&&(c=!0),!0;t.preventDefault&&(t.stopPropagation&&(c=!0),l=!0)}return!1},p=t[i];return p&&(f(p[s+hF(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ZQ.windows&&e.ctrlKey&&e.altKey)&&(h=pp[e.keyCode])&&h!=r?(f(p[s+hF(h,e,!0)])||e.shiftKey&&(u=gp[e.keyCode])!=r&&u!=h&&f(p[s+hF(u,e,!1)]))&&(a=!0):o&&e.shiftKey&&f(p[s+hF(r,e,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),l&&(a=!0),a&&c&&e.stopPropagation(),vF=null,a}const yF=of.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function wF(t,e){let n=t.plugin(OF),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const OF=aV.fromClass(class{constructor(t){this.input=t.state.facet(kF),this.specs=this.input.filter((t=>t)),this.panels=this.specs.map((e=>e(t)));let e=t.state.facet(yF);this.top=new SF(t,!0,e.topContainer),this.bottom=new SF(t,!1,e.bottomContainer),this.top.sync(this.panels.filter((t=>t.top))),this.bottom.sync(this.panels.filter((t=>!t.top)));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(t){let e=t.state.facet(yF);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new SF(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new SF(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(kF);if(n!=this.input){let e=n.filter((t=>t)),i=[],r=[],o=[],s=[];for(let n of e){let e,a=this.specs.indexOf(n);a<0?(e=n(t.view),s.push(e)):(e=this.panels[a],e.update&&e.update(t)),i.push(e),(e.top?r:o).push(e)}this.specs=e,this.panels=i,this.top.sync(r),this.bottom.sync(o);for(let t of s)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}else for(let e of this.panels)e.update&&e.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>rF.scrollMargins.of((e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class SF{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=xF(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=xF(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function xF(t){let e=t.nextSibling;return t.remove(),e}const kF=of.define({enables:OF});class CF extends Wf{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}function AF(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];"string"==typeof r?t.setAttribute(i,r):null!=r&&(t[i]=r)}e++}for(;e<arguments.length;e++)MF(t,arguments[e]);return t}function MF(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var n=0;n<e.length;n++)MF(t,e[n])}}CF.prototype.elementClass="",CF.prototype.toDOM=void 0,CF.prototype.mapMode=Fd.TrackBefore,CF.prototype.startSide=CF.prototype.endSide=-1,CF.prototype.point=!0;const EF="function"==typeof String.prototype.normalize?t=>t.normalize("NFKD"):t=>t;class PF{constructor(t,e,n=0,i=t.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,i),this.bufferStart=n,this.normalize=r?t=>r(EF(t)):EF,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Qd(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=Hd(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=Vd(t);let i=this.normalize(e);if(i.length)for(let t=0,r=n;;t++){let o=i.charCodeAt(t),s=this.match(o,r,this.bufferPos+this.bufferStart);if(t==i.length-1){if(s)return this.value=s,this;break}r==n&&t<e.length&&e.charCodeAt(t)==o&&r++}}}match(t,e,n){let i=null;for(let e=0;e<this.matches.length;e+=2){let r=this.matches[e],o=!1;this.query.charCodeAt(r)==t&&(r==this.query.length-1?i={from:this.matches[e+1],to:n}:(this.matches[e]++,o=!0)),o||(this.matches.splice(e,2),e-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?i={from:e,to:n}:this.matches.push(1,e)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}"undefined"!=typeof Symbol&&(PF.prototype[Symbol.iterator]=function(){return this});const TF={from:-1,to:-1,match:/.*/.exec("")},$F="gm"+(null==/x/.unicode?"":"u");class DF{constructor(t,e,n,i=0,r=t.length){if(this.text=t,this.to=r,this.curLine="",this.done=!1,this.value=TF,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new NF(t,e,n,i,r);this.re=new RegExp(e,$F+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=t.iter();let o=t.lineAt(i);this.curLineStart=o.from,this.matchPos=LF(t,i),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let n=this.curLineStart+e.index,i=n+e[0].length;if(this.matchPos=LF(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,e)))return this.value={from:n,to:i,match:e},this;t=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),t=0}}}}const RF=new WeakMap;class BF{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,n){let i=RF.get(t);if(!i||i.from>=n||i.to<=e){let i=new BF(e,t.sliceString(e,n));return RF.set(t,i),i}if(i.from==e&&i.to==n)return i;let{text:r,from:o}=i;return o>e&&(r=t.sliceString(e,o)+r,o=e),i.to<n&&(r+=t.sliceString(i.to,n)),RF.set(t,new BF(o,r)),new BF(e,r.slice(e-o,n-o))}}class NF{constructor(t,e,n,i,r){this.text=t,this.to=r,this.done=!1,this.value=TF,this.matchPos=LF(t,i),this.re=new RegExp(e,$F+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=BF.get(t,i,this.chunkEnd(i+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let t=this.flat.from+e.index,n=t+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(t,n,e)))return this.value={from:t,to:n,match:e},this.matchPos=LF(this.text,n+(t==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=BF.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function LF(t,e){if(e>=t.length)return e;let n,i=t.lineAt(e);for(;e<i.to&&(n=i.text.charCodeAt(e-i.from))>=56320&&n<57344;)e++;return e}function jF(t){let e=AF("input",{class:"cm-textfield",name:"line",value:String(t.state.doc.lineAt(t.state.selection.main.head).number)});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!n)return;let{state:i}=t,r=i.doc.lineAt(i.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,h=s?+s:r.number;if(s&&l){let t=h/100;o&&(t=t*("-"==o?-1:1)+r.number/i.doc.lines),h=Math.round(i.doc.lines*t)}else s&&o&&(h=h*("-"==o?-1:1)+r.number);let u=i.doc.line(Math.max(1,Math.min(i.doc.lines,h))),d=ef.cursor(u.from+Math.max(0,Math.min(c,u.length)));t.dispatch({effects:[_F.of(!1),rF.scrollIntoView(d.from,{y:"center"})],selection:d}),t.focus()}return{dom:AF("form",{class:"cm-gotoLine",onkeydown:e=>{27==e.keyCode?(e.preventDefault(),t.dispatch({effects:_F.of(!1)}),t.focus()):13==e.keyCode&&(e.preventDefault(),n())},onsubmit:t=>{t.preventDefault(),n()}},AF("label",t.state.phrase("Go to line"),": ",e)," ",AF("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),AF("button",{name:"close",onclick:()=>{t.dispatch({effects:_F.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]))}}"undefined"!=typeof Symbol&&(DF.prototype[Symbol.iterator]=NF.prototype[Symbol.iterator]=function(){return this});const _F=$f.define(),IF=df.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(_F)&&(t=n.value);return t},provide:t=>kF.from(t,(t=>t?jF:null))}),zF=rF.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),QF={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},HF=of.define({combine(t){return Vf(t,QF,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})}}),VF=uH.mark({class:"cm-selectionMatch"}),WF=uH.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function FF(t,e,n,i){return!(0!=n&&t(e.sliceDoc(n-1,n))==If.Word||i!=e.doc.length&&t(e.sliceDoc(i,i+1))==If.Word)}const qF=aV.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(HF),{state:n}=t,i=n.selection;if(i.ranges.length>1)return uH.none;let r,o=i.main,s=null;if(o.empty){if(!e.highlightWordAroundCursor)return uH.none;let t=n.wordAt(o.head);if(!t)return uH.none;s=n.charCategorizer(o.head),r=n.sliceDoc(t.from,t.to)}else{let t=o.to-o.from;if(t<e.minSelectionLength||t>200)return uH.none;if(e.wholeWords){if(r=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!FF(s,n,o.from,o.to)||!function(t,e,n,i){return t(e.sliceDoc(n,n+1))==If.Word&&t(e.sliceDoc(i-1,i))==If.Word}(s,n,o.from,o.to))return uH.none}else if(r=n.sliceDoc(o.from,o.to),!r)return uH.none}let a=[];for(let i of t.visibleRanges){let t=new PF(n.doc,r,i.from,i.to);for(;!t.next().done;){let{from:i,to:r}=t.value;if((!s||FF(s,n,i,r))&&(o.empty&&i<=o.from&&r>=o.to?a.push(WF.range(i,r)):(i>=o.to||r<=o.from)&&a.push(VF.range(i,r)),a.length>e.maxMatches))return uH.none}}return uH.set(a)}},{decorations:t=>t.decorations}),XF=rF.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),KF=of.define({combine(t){return Vf(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new xq(t),scrollToMatch:t=>rF.scrollIntoView(t)})}});class ZF{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(t){try{return new RegExp(t,$F),!0}catch(t){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,((t,e)=>"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"))}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new nq(this):new UF(this)}getCursor(t,e=0,n){let i=t.doc?t:Hf.create({doc:t});return null==n&&(n=i.doc.length),this.regexp?JF(this,i,e,n):GF(this,i,e,n)}}class YF{constructor(t){this.spec=t}}function GF(t,e,n,i){return new PF(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:t=>t.toLowerCase(),t.wholeWord?function(t,e){return(n,i,r,o)=>((o>n||o+r.length<i)&&(o=Math.max(0,n-2),r=t.sliceString(o,Math.min(t.length,i+2))),!(e(tq(r,n-o))==If.Word&&e(eq(r,n-o))==If.Word||e(eq(r,i-o))==If.Word&&e(tq(r,i-o))==If.Word))}(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}class UF extends YF{constructor(t){super(t)}nextMatch(t,e,n){let i=GF(this.spec,t,n,t.doc.length).nextOverlapping();if(i.done){let n=Math.min(t.doc.length,e+this.spec.unquoted.length);i=GF(this.spec,t,0,n).nextOverlapping()}return i.done||i.value.from==e&&i.value.to==n?null:i.value}prevMatchInRange(t,e,n){for(let i=n;;){let n=Math.max(e,i-1e4-this.spec.unquoted.length),r=GF(this.spec,t,n,i),o=null;for(;!r.nextOverlapping().done;)o=r.value;if(o)return o;if(n==e)return null;i-=1e4}}prevMatch(t,e,n){let i=this.prevMatchInRange(t,0,e);return i||(i=this.prevMatchInRange(t,Math.max(0,n-this.spec.unquoted.length),t.doc.length)),!i||i.from==e&&i.to==n?null:i}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let n=GF(this.spec,t,0,t.doc.length),i=[];for(;!n.next().done;){if(i.length>=e)return null;i.push(n.value)}return i}highlight(t,e,n,i){let r=GF(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}function JF(t,e,n,i){return new DF(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?(r=e.charCategorizer(e.selection.main.head),(t,e,n)=>!n[0].length||(r(tq(n.input,n.index))!=If.Word||r(eq(n.input,n.index))!=If.Word)&&(r(eq(n.input,n.index+n[0].length))!=If.Word||r(tq(n.input,n.index+n[0].length))!=If.Word)):void 0},n,i);var r}function tq(t,e){return t.slice(zd(t,e,!1),e)}function eq(t,e){return t.slice(e,zd(t,e))}class nq extends YF{nextMatch(t,e,n){let i=JF(this.spec,t,n,t.doc.length).next();return i.done&&(i=JF(this.spec,t,0,e).next()),i.done?null:i.value}prevMatchInRange(t,e,n){for(let i=1;;i++){let r=Math.max(e,n-1e4*i),o=JF(this.spec,t,r,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(r==e||s.from>r+10))return s;if(r==e)return null}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,((e,n)=>{if("&"==n)return t.match[0];if("$"==n)return"$";for(let e=n.length;e>0;e--){let i=+n.slice(0,e);if(i>0&&i<t.match.length)return t.match[i]+n.slice(e)}return e}))}matchAll(t,e){let n=JF(this.spec,t,0,t.doc.length),i=[];for(;!n.next().done;){if(i.length>=e)return null;i.push(n.value)}return i}highlight(t,e,n,i){let r=JF(this.spec,t,Math.max(0,e-250),Math.min(n+250,t.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}const iq=$f.define(),rq=$f.define(),oq=df.define({create(t){return new sq(vq(t).create(),null)},update(t,e){for(let n of e.effects)n.is(iq)?t=new sq(n.value.create(),t.panel):n.is(rq)&&(t=new sq(t.query,n.value?mq:null));return t},provide:t=>kF.from(t,(t=>t.panel))});class sq{constructor(t,e){this.query=t,this.panel=e}}const aq=uH.mark({class:"cm-searchMatch"}),lq=uH.mark({class:"cm-searchMatch cm-searchMatch-selected"}),cq=aV.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(oq))}update(t){let e=t.state.field(oq);(e!=t.startState.field(oq)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return uH.none;let{view:n}=this,i=new Zf;for(let e=0,r=n.visibleRanges,o=r.length;e<o;e++){let{from:s,to:a}=r[e];for(;e<o-1&&a>r[e+1].from-500;)a=r[++e].to;t.highlight(n.state,s,a,((t,e)=>{let r=n.state.selection.ranges.some((n=>n.from==t&&n.to==e));i.add(t,e,r?lq:aq)}))}return i.finish()}},{decorations:t=>t.decorations});function hq(t){return e=>{let n=e.state.field(oq,!1);return n&&n.query.spec.valid?t(e,n):wq(e)}}const uq=hq(((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=ef.single(i.from,i.to),o=t.state.facet(KF);return t.dispatch({selection:r,effects:[Mq(t,i),o.scrollToMatch(r.main,t)],userEvent:"select.search"}),yq(t),!0})),dq=hq(((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let o=ef.single(r.from,r.to),s=t.state.facet(KF);return t.dispatch({selection:o,effects:[Mq(t,r),s.scrollToMatch(o.main,t)],userEvent:"select.search"}),yq(t),!0})),fq=hq(((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!(!n||!n.length||(t.dispatch({selection:ef.create(n.map((t=>ef.range(t.from,t.to)))),userEvent:"select.search.matches"}),0))})),pq=hq(((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,i,i);if(!o)return!1;let s,a,l=o,c=[],h=[];if(l.from==i&&l.to==r&&(a=n.toText(e.getReplacement(l)),c.push({from:l.from,to:l.to,insert:a}),l=e.nextMatch(n,l.from,l.to),h.push(rF.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),l){let e=0==c.length||c[0].from>=o.to?0:o.to-o.from-a.length;s=ef.single(l.from-e,l.to-e),h.push(Mq(t,l)),h.push(n.facet(KF).scrollToMatch(s.main,t))}return t.dispatch({changes:c,selection:s,effects:h,userEvent:"input.replace"}),!0})),gq=hq(((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map((t=>{let{from:n,to:i}=t;return{from:n,to:i,insert:e.getReplacement(t)}}));if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:rF.announce.of(i),userEvent:"input.replace.all"}),!0}));function mq(t){return t.state.facet(KF).createPanel(t)}function vq(t,e){var n,i,r,o,s;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(KF);return new ZF({search:(null!==(n=null==e?void 0:e.literal)&&void 0!==n?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(i=null==e?void 0:e.caseSensitive)&&void 0!==i?i:c.caseSensitive,literal:null!==(r=null==e?void 0:e.literal)&&void 0!==r?r:c.literal,regexp:null!==(o=null==e?void 0:e.regexp)&&void 0!==o?o:c.regexp,wholeWord:null!==(s=null==e?void 0:e.wholeWord)&&void 0!==s?s:c.wholeWord})}function bq(t){let e=wF(t,mq);return e&&e.dom.querySelector("[main-field]")}function yq(t){let e=bq(t);e&&e==t.root.activeElement&&e.select()}const wq=t=>{let e=t.state.field(oq,!1);if(e&&e.panel){let n=bq(t);if(n&&n!=t.root.activeElement){let i=vq(t.state,e.query.spec);i.valid&&t.dispatch({effects:iq.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[rq.of(!0),e?iq.of(vq(t.state,e.query.spec)):$f.appendConfig.of(Pq)]});return!0},Oq=t=>{let e=t.state.field(oq,!1);if(!e||!e.panel)return!1;let n=wF(t,mq);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:rq.of(!1)}),!0},Sq=[{key:"Mod-f",run:wq,scope:"editor search-panel"},{key:"F3",run:uq,shift:dq,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:uq,shift:dq,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Oq,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,o=[],s=0;for(let e=new PF(t.doc,t.sliceDoc(i,r));!e.next().done;){if(o.length>1e3)return!1;e.value.from==i&&(s=o.length),o.push(ef.range(e.value.from,e.value.to))}return e(t.update({selection:ef.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:t=>{let e=wF(t,jF);if(!e){let n=[_F.of(!0)];null==t.state.field(IF,!1)&&n.push($f.appendConfig.of([IF,zF])),t.dispatch({effects:n}),e=wF(t,jF)}return e&&e.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some((t=>t.from===t.to)))return(({state:t,dispatch:e})=>{let{selection:n}=t,i=ef.create(n.ranges.map((e=>t.wordAt(e.head)||ef.cursor(e.head))),n.mainIndex);return!i.eq(n)&&(e(t.update({selection:i})),!0)})({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=i)))return!1;let r=function(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),o=r&&r.from==n.from&&r.to==n.to;for(let n=!1,r=new PF(t.doc,e,i[i.length-1].to);;){if(r.next(),!r.done){if(n&&i.some((t=>t.from==r.value.from)))continue;if(o){let e=t.wordAt(r.value.from);if(!e||e.from!=r.value.from||e.to!=r.value.to)continue}return r.value}if(n)return null;r=new PF(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),n=!0}}(t,i);return!!r&&(e(t.update({selection:t.selection.addRange(ef.range(r.from,r.to),!1),effects:rF.scrollIntoView(r.to)})),!0)},preventDefault:!0}];class xq{constructor(t){this.view=t;let e=this.query=t.state.field(oq).query.spec;function n(t,e,n){return AF("button",{class:"cm-button",name:t,onclick:e,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=AF("input",{value:e.search,placeholder:kq(t,"Find"),"aria-label":kq(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=AF("input",{value:e.replace,placeholder:kq(t,"Replace"),"aria-label":kq(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=AF("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=AF("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=AF("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit}),this.dom=AF("div",{onkeydown:t=>this.keydown(t),class:"cm-search"},[this.searchField,n("next",(()=>uq(t)),[kq(t,"next")]),n("prev",(()=>dq(t)),[kq(t,"previous")]),n("select",(()=>fq(t)),[kq(t,"all")]),AF("label",null,[this.caseField,kq(t,"match case")]),AF("label",null,[this.reField,kq(t,"regexp")]),AF("label",null,[this.wordField,kq(t,"by word")]),...t.state.readOnly?[]:[AF("br"),this.replaceField,n("replace",(()=>pq(t)),[kq(t,"replace")]),n("replaceAll",(()=>gq(t)),[kq(t,"replace all")])],AF("button",{name:"close",onclick:()=>Oq(t),"aria-label":kq(t,"close"),type:"button"},["×"])])}commit(){let t=new ZF({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:iq.of(t)}))}keydown(t){var e,n;n=t,bF(pF((e=this.view).state),n,e,"search-panel")?t.preventDefault():13==t.keyCode&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?dq:uq)(this.view)):13==t.keyCode&&t.target==this.replaceField&&(t.preventDefault(),pq(this.view))}update(t){for(let e of t.transactions)for(let t of e.effects)t.is(iq)&&!t.value.eq(this.query)&&this.setQuery(t.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(KF).top}}function kq(t,e){return t.state.phrase(e)}const Cq=30,Aq=/[\s\.,:;?!]/;function Mq(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,o=Math.max(i.from,e-Cq),s=Math.min(r,n+Cq),a=t.state.sliceDoc(o,s);if(o!=i.from)for(let t=0;t<Cq;t++)if(!Aq.test(a[t+1])&&Aq.test(a[t])){a=a.slice(t);break}if(s!=r)for(let t=a.length-1;t>a.length-Cq;t--)if(!Aq.test(a[t-1])&&Aq.test(a[t])){a=a.slice(0,t);break}return rF.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const Eq=rF.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Pq=[oq,pf.low(cq),Eq];function Tq(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function $q(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function Dq(t,e){if(!e.anchorNode)return!1;try{return $q(t,e.anchorNode)}catch(t){return!1}}function Rq(t){return 3==t.nodeType?qq(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function Bq(t,e,n,i){return!!n&&(jq(t,e,n,i,-1)||jq(t,e,n,i,1))}function Nq(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function Lq(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function jq(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:_q(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=Nq(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(r<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=r<0?_q(t):0}}}function _q(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Iq(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function zq(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Qq(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}class Hq{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?_q(e):0),n,Math.min(t.focusOffset,n?_q(n):0))}set(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i}}let Vq,Wq=null;function Fq(t){if(t.setActive)return t.setActive();if(Wq)return t.focus(Wq);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==Wq?{get preventScroll(){return Wq={preventScroll:!0},!0}}:void 0),!Wq){Wq=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function qq(t,e,n=e){let i=Vq||(Vq=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Xq(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function Kq(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Zq(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Yq(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=_q(n)}else{if(!n.parentNode||Lq(n))return null;i=Nq(n),n=n.parentNode}}}function Gq(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||Lq(n))return null;i=Nq(n)+1,n=n.parentNode}}}class Uq{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new Uq(t.parentNode,Nq(t),e)}static after(t,e){return new Uq(t.parentNode,Nq(t)+1,e)}}const Jq=[];class tX{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,i=this.dom,r=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let t=tX.get(n);(!t||!t.parent&&t.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(t,e),o.flags&=-8}if(n=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&n!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=eX(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&e&&e.node==i&&(e.written=!0);n;)n=eX(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let i=0==_q(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==i&&e.firstChild!=e.lastChild&&(i=t==e.firstChild?-1:1),t=e}n=i<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!tX.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let i=this.children[t];if(i.dom==n)return e;e+=i.length+i.breakAfter}}domBoundsAround(t,e,n=0){let i=-1,r=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],h=l+n.length;if(l<t&&h>e)return n.domBoundsAround(t,e,l);if(h>=t&&-1==i&&(i=a,r=l),l>e&&n.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+n.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=Jq){this.markDirty();for(let i=t;i<e;i++){let t=this.children[i];t.parent==this&&n.indexOf(t)<0&&t.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new nX(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,i,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function eX(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}tX.prototype.breakAfter=0;class nX{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function iX(t,e,n,i,r,o,s,a,l){let{children:c}=t,h=c.length?c[e]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(e==i&&h&&!s&&!d&&o.length<2&&h.merge(n,r,o.length?u:null,0==n,a,l))){if(i<c.length){let t=c[i];t&&(r<t.length||t.breakAfter&&(null==u?void 0:u.breakAfter))?(e==i&&(t=t.split(r),r=0),!d&&u&&t.merge(0,r,u,!0,0,l)?o[o.length-1]=t:((r||t.children.length&&!t.children[0].length)&&t.merge(0,r,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(u?u.breakAfter=1:s=1),i++}for(h&&(h.breakAfter=s,n>0&&(!s&&o.length&&h.merge(n,h.length,o[0],!1,a,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,a,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function rX(t,e,n,i,r,o){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:h}=s.findPos(e,-1),u=e-n;for(let t of i)u+=t.length;t.length+=u,iX(t,c,h,a,l,i,0,r,o)}let oX="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},sX="undefined"!=typeof document?document:{documentElement:{style:{}}};const aX=/Edge\/(\d+)/.exec(oX.userAgent),lX=/MSIE \d/.test(oX.userAgent),cX=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(oX.userAgent),hX=!!(lX||cX||aX),uX=!hX&&/gecko\/(\d+)/i.test(oX.userAgent),dX=!hX&&/Chrome\/(\d+)/.exec(oX.userAgent),fX="webkitFontSmoothing"in sX.documentElement.style,pX=!hX&&/Apple Computer/.test(oX.vendor),gX=pX&&(/Mobile\/\w+/.test(oX.userAgent)||oX.maxTouchPoints>2);var mX={mac:gX||/Mac/.test(oX.platform),windows:/Win/.test(oX.platform),linux:/Linux|X11/.test(oX.platform),ie:hX,ie_version:lX?sX.documentMode||6:cX?+cX[1]:aX?+aX[1]:0,gecko:uX,gecko_version:uX?+(/Firefox\/(\d+)/.exec(oX.userAgent)||[0,0])[1]:0,chrome:!!dX,chrome_version:dX?+dX[1]:0,ios:gX,android:/Android\b/.test(oX.userAgent),webkit:fX,safari:pX,webkit_version:fX?+(/\bAppleWebKit\/(\d+)/.exec(oX.userAgent)||[0,0])[1]:0,tabSize:null!=sX.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class vX extends tX{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof vX)||this.length-(e-t)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),0))}split(t){let e=new vX(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new Uq(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;0==e&&n<0||e==i&&n>=0?mX.chrome||mX.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let a=qq(t,r,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return mX.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l),s?Iq(l,s<0):l||null}(this.dom,t,e)}}class bX extends tX{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(Kq(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof bX&&n.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0)||(rX(this,t,e,n?n.children.slice():[],r-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>t&&e.push(n<t?o.split(t-n):o),i<0&&n>=t&&(i=r),n=s,r++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new bX(this.mark,e,o)}domAtPos(t){return OX(this,t)}coordsAt(t,e){return xX(this,t,e)}}class yX extends tX{static create(t,e,n){return new yX(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=yX.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof yX&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t instanceof yX&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return Td.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Td.empty}domAtPos(t){return(this.length?0==t:this.side>0)?Uq.before(this.dom):Uq.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:t>0;for(let e=o?i.length-1:0;r=i[e],!(t>0?0==e:e==i.length-1||r.top<r.bottom);e+=o?-1:1);return Iq(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class wX extends tX{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof wX&&t.side==this.side}split(){return new wX(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?Uq.before(this.dom):Uq.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Td.empty}get isHidden(){return!0}}function OX(t,e){let n=t.dom,{children:i}=t,r=0;for(let t=0;r<i.length;r++){let o=i[r],s=t+o.length;if(!(s==t&&o.getSide()<=0)){if(e>t&&e<s&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=r;t>0;t--){let e=i[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=r;t<i.length;t++){let e=i[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new Uq(n,0)}function SX(t,e,n){let i,{children:r}=t;n>0&&e instanceof bX&&r.length&&(i=r[r.length-1])instanceof bX&&i.mark.eq(e.mark)?SX(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function xX(t,e,n){let i=null,r=-1,o=null,s=-1;!function t(e,a){for(let l=0,c=0;l<e.children.length&&c<=a;l++){let h=e.children[l],u=c+h.length;u>=a&&(h.children.length?t(h,a-c):(!o||o.isHidden&&(n>0||kX(o,h)))&&(u>a||c==u&&h.getSide()>0)?(o=h,s=a-c):(c<a||c==u&&h.getSide()<0&&!h.isHidden)&&(i=h,r=a-c)),c=u}}(t,e);let a=(n<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?r:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Rq(e);return n[n.length-1]||null}(t)}function kX(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function CX(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}vX.prototype.children=yX.prototype.children=wX.prototype.children=Jq;const AX=Object.create(null);function MX(t,e,n){if(t==e)return!0;t||(t=AX),e||(e=AX);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(-1==r.indexOf(o)||t[o]!==e[o]))return!1;return!0}function EX(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,"style"==r?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,"style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function PX(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class TX{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var $X=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}($X||($X={}));class DX extends Wf{constructor(t,e,n,i){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new RX(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new NX(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,i=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:r,end:o}=LX(t,i);e=(r?i?-3e8:-1:5e8)-1,n=1+(o?i?2e8:1:-6e8)}return new NX(t,e,n,i,t.widget||null,!0)}static line(t){return new BX(t)}static set(t,e=!1){return Kf.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}DX.none=Kf.empty;class RX extends DX{constructor(t){let{start:e,end:n}=LX(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof RX&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&MX(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}RX.prototype.point=!1;class BX extends DX{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof BX&&this.spec.class==t.spec.class&&MX(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}BX.prototype.mapMode=Fd.TrackBefore,BX.prototype.point=!0;class NX extends DX{constructor(t,e,n,i,r,o){super(e,n,r,t),this.block=i,this.isReplace=o,this.mapMode=i?e<=0?Fd.TrackBefore:Fd.TrackAfter:Fd.TrackDel}get type(){return this.startSide!=this.endSide?$X.WidgetRange:this.startSide<=0?$X.WidgetBefore:$X.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof NX&&((e=this.widget)==(n=t.widget)||!!(e&&n&&e.compare(n)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,n}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function LX(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!=n?n:e,end:null!=i?i:e}}function jX(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}NX.prototype.point=!0;class _X extends tX{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,i,r,o){if(n){if(!(n instanceof _X))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),rX(this,t,e,n?n.children.slice():[],r,o),!0}split(t){let e=new _X;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:i}=this.childPos(t);i&&(e.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){MX(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){SX(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=CX(e,this.attrs||{})),n&&(this.attrs=CX({class:n},this.attrs||{}))}domAtPos(t){return OX(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?4&this.flags&&(Kq(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(EX(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let i=this.dom.lastChild;for(;i&&tX.get(i)instanceof bX;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=tX.get(i))||void 0===n?void 0:n.isEditable)||mX.ios&&this.children.some((t=>t instanceof vX))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof vX)||/[^ -~]/.test(n.text))return null;let i=Rq(n.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=xX(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let i=(e-t.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(t){return t instanceof _X&&0==this.children.length&&0==t.children.length&&MX(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,i=0;n<t.children.length;n++){let r=t.children[n],o=i+r.length;if(o>=e){if(r instanceof _X)return r;if(o>e)break}i=o+r.breakAfter}return null}}class IX extends tX{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof IX&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?Uq.before(this.dom):Uq.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new IX(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Jq}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Td.empty}domBoundsAround(){return null}become(t){return t instanceof IX&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)||(this.widget instanceof zX?null:Iq(this.dom.getBoundingClientRect(),this.length?0==t:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class zX extends TX{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class QX{constructor(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof IX&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new _X),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(HX(new wX(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof IX||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(HX(new vX(this.text.slice(this.textOff,this.textOff+i)),e),n),this.atCursorPos=!0,this.textOff+=i,t-=i,n=0}}span(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)}point(t,e,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof NX){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof NX)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new IX(n.widget||VX.block,s,n));else{let o=yX.create(n.widget||VX.inline,s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&r<=i.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||r>i.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(c.append(HX(new wX(1),i),r),r=i.length+Math.max(0,r-i.length)),c.append(HX(o,i),r),this.atCursorPos=l,this.pendingBuffer=l?t<e||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,n,i,r){let o=new QX(t,e,n,r);return o.openEnd=Kf.spans(i,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function HX(t,e){for(let n of e)t=new bX(n,[t],t.length);return t}class VX extends TX{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}VX.inline=new VX("span"),VX.block=new VX("div");var WX=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(WX||(WX={}));const FX=WX.LTR,qX=WX.RTL;function XX(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const KX=XX("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ZX=XX("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),YX=Object.create(null),GX=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);YX[e]=n,YX[n]=-e}function UX(t){return t<=247?KX[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?ZX[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const JX=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class tK{get dir(){return this.level%2?qX:FX}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,i){let r=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<e:s.to>e:t[r].level>s.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function eK(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!eK(i.inner,r.inner))return!1}return!0}const nK=[];function iK(t,e,n,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let e=!0,h=!1;if(c==o.length||l<o[c].from){let t=nK[l];t!=a&&(e=!1,h=16==t)}let u=e||1!=a?null:[],d=e?i:i+1,f=l;t:for(;;)if(c<o.length&&f==o[c].from){if(h)break t;let p=o[c];if(!e)for(let t=p.to,e=c+1;;){if(t==n)break t;if(!(e<o.length&&o[e].from==t)){if(nK[t]==a)break t;break}t=o[e++].to}c++,u?u.push(p):(p.from>l&&s.push(new tK(l,p.from,d)),rK(t,p.direction==FX!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.to),f=p.to}else{if(f==n||(e?nK[f]!=a:nK[f]==a))break;f++}u?iK(t,l,f,i+1,r,u,s):l<f&&s.push(new tK(l,f,d)),l=f}else for(let l=n,c=o.length;l>e;){let n=!0,h=!1;if(!c||l>o[c-1].to){let t=nK[l-1];t!=a&&(n=!1,h=16==t)}let u=n||1!=a?null:[],d=n?i:i+1,f=l;t:for(;;)if(c&&f==o[c-1].to){if(h)break t;let p=o[--c];if(!n)for(let t=p.from,n=c;;){if(t==e)break t;if(!n||o[n-1].to!=t){if(nK[t-1]==a)break t;break}t=o[--n].from}u?u.push(p):(p.to<l&&s.push(new tK(p.to,l,d)),rK(t,p.direction==FX!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.from),f=p.from}else{if(f==e||(n?nK[f-1]!=a:nK[f-1]==a))break;f--}u?iK(t,f,l,i+1,r,u,s):f<l&&s.push(new tK(f,l,d)),l=f}}function rK(t,e,n,i,r,o,s){let a=e%2?2:1;!function(t,e,n,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:n,l=o?256:r;for(let e=s,n=l,i=l;e<a;e++){let r=UX(t.charCodeAt(e));512==r?r=n:8==r&&4==i&&(r=16),nK[e]=4==r?2:r,7&r&&(i=r),n=r}for(let t=s,e=l,i=l;t<a;t++){let r=nK[t];if(128==r)t<a-1&&e==nK[t+1]&&24&e?r=nK[t]=e:nK[t]=256;else if(64==r){let r=t+1;for(;r<a&&64==nK[r];)r++;let o=t&&8==e||r<n&&8==nK[r]?1==i?1:8:256;for(let e=t;e<r;e++)nK[e]=o;t=r-1}else 8==r&&1==i&&(nK[t]=1);e=r,7&r&&(i=r)}}}(t,r,o,i,a),function(t,e,n,i,r){let o=1==r?2:1;for(let s=0,a=0,l=0;s<=i.length;s++){let c=s?i[s-1].to:e,h=s<i.length?i[s].from:n;for(let e,n,i,s=c;s<h;s++)if(n=YX[e=t.charCodeAt(s)])if(n<0){for(let t=a-3;t>=0;t-=3)if(GX[t+1]==-n){let e=GX[t+2],n=2&e?r:4&e?1&e?o:r:0;n&&(nK[s]=nK[GX[t]]=n),a=t;break}}else{if(189==GX.length)break;GX[a++]=s,GX[a++]=e,GX[a++]=l}else if(2==(i=nK[s])||1==i){let t=i==r;l=t?0:1;for(let e=a-3;e>=0;e-=3){let n=GX[e+2];if(2&n)break;if(t)GX[e+2]|=2;else{if(4&n)break;GX[e+2]|=4}}}}}(t,r,o,i,a),function(t,e,n,i){for(let r=0,o=i;r<=n.length;r++){let s=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=s;l<a;){let s=nK[l];if(256==s){let s=l+1;for(;;)if(s==a){if(r==n.length)break;s=n[r++].to,a=r<n.length?n[r].from:e}else{if(256!=nK[s])break;s++}let c=1==o,h=c==(1==(s<e?nK[s]:i))?c?1:2:i;for(let e=s,i=r,o=i?n[i-1].to:t;e>l;)e==o&&(e=n[--i].from,o=i?n[i-1].to:t),nK[--e]=h;l=s}else o=s,l++}}}(r,o,i,a),iK(t,r,o,e,n,i,s)}function oK(t){return[new tK(0,t,0)]}let sK="";function aK(t,e,n,i,r){var o;let s=i.head-t.from,a=tK.find(e,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc),l=e[a],c=l.side(r,n);if(s==c){let t=a+=r?1:-1;if(t<0||t>=e.length)return null;l=e[a=t],s=l.side(!r,n),c=l.side(r,n)}let h=zd(t.text,s,l.forward(r,n));(h<l.from||h>l.to)&&(h=c),sK=t.text.slice(Math.min(s,h),Math.max(s,h));let u=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return u&&h==c&&u.level+(r?0:1)<l.level?ef.cursor(u.side(!r,n)+t.from,u.forward(r,n)?1:-1,u.level):ef.cursor(h+t.from,l.forward(r,n)?-1:1,l.level)}function lK(t,e,n){for(let i=e;i<n;i++){let e=UX(t.charCodeAt(i));if(1==e)return FX;if(2==e||4==e)return qX}return FX}const cK=of.define(),hK=of.define(),uK=of.define(),dK=of.define(),fK=of.define(),pK=of.define(),gK=of.define(),mK=of.define(),vK=of.define(),bK=of.define({combine:t=>t.some((t=>t))}),yK=of.define({combine:t=>t.some((t=>t))}),wK=of.define();class OK{constructor(t,e="nearest",n="nearest",i=5,r=5,o=!1){this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new OK(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new OK(ef.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const SK=$f.define({map:(t,e)=>t.map(e)}),xK=$f.define();function kK(t,e,n){let i=t.facet(dK);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const CK=of.define({combine:t=>!t.length||t[0]});let AK=0;const MK=of.define();class EK{constructor(t,e,n,i,r){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(t,e){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=e||{};return new EK(AK++,t,n,i,(t=>{let e=[MK.of(t)];return o&&e.push(DK.of((e=>{let n=e.plugin(t);return n?o(n):DX.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return EK.define((e=>new t(e)),e)}}class PK{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(kK(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){kK(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){kK(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const TK=of.define(),$K=of.define(),DK=of.define(),RK=of.define(),BK=of.define(),NK=of.define();function LK(t,e){let n=t.state.facet(NK);if(!n.length)return n;let i=n.map((e=>e instanceof Function?e(t):e)),r=[];return Kf.spans(i,e.from,e.to,{point(){},span(t,n,i,o){let s=t-e.from,a=n-e.from,l=r;for(let t=i.length-1;t>=0;t--,o--){let n,r=i[t].spec.bidiIsolate;if(null==r&&(r=lK(e.text,s,a)),o>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==r)n.to=a,l=n.inner;else{let t={from:s,to:a,direction:r,inner:[]};l.push(t),l=t.inner}}}}),r}const jK=of.define();function _K(t){let e=0,n=0,i=0,r=0;for(let o of t.state.facet(jK)){let s=o(t);s&&(null!=s.left&&(e=Math.max(e,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(i=Math.max(i,s.top)),null!=s.bottom&&(r=Math.max(r,s.bottom)))}return{left:e,right:n,top:i,bottom:r}}const IK=of.define();class zK{constructor(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}join(t){return new zK(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let i=0,r=0,o=0,s=0;;i++){let a=i==t.length?null:t[i],l=o-s,c=a?a.fromB:1e9;for(;r<e.length&&e[r]<c;){let t=e[r],i=e[r+1],o=Math.max(s,t),a=Math.min(c,i);if(o<=a&&new zK(o+l,a+l,o,a).addToSet(n),i>c)break;r+=2}if(!a)return n;new zK(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class QK{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Xd.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let i=[];this.changes.iterChangedRanges(((t,e,n,r)=>i.push(new zK(t,e,n,r)))),this.changedRanges=i}static create(t,e,n){return new QK(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class HK extends tX{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=DX.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new _X],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new zK(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?i=this.domChanged.newSel.head:function(t,e){let n=!1;return e&&t.iterChangedRanges(((t,i)=>{t<e.to&&i>e.from&&(n=!0)})),n}(t.changes,this.hasComposition)||t.selectionSet||(i=t.state.selection.main.head));let r=i>-1?function(t,e,n){let i=VK(t,n);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new zK(l.mapPos(o),l.mapPos(s),o,s),h=[];for(let e=r.parentNode;;e=e.parentNode){let n=tX.get(e);if(n instanceof bX)h.push({node:e,deco:n.mark});else{if(n instanceof _X||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:r,marks:h,line:e};if(e==t.contentDOM)return null;h.push({node:e,deco:new RX({inclusive:!0,attributes:PX(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:i}=this.hasComposition;n=new zK(e,i,t.changes.mapPos(e,-1),t.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(mX.ie||mX.chrome)&&!r&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=function(t,e,n){let i=new WK;return Kf.compare(t,e,n,i),i.changes}(this.decorations,this.updateDeco(),t.changes);return n=zK.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,r),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=mX.chrome||mX.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=-8,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof IX&&t.widget instanceof zX&&r.push(t.dom);i.updateGaps(r)}updateChildren(t,e,n){let i=n?n.range.addToSet(t.slice()):t,r=this.childCursor(e);for(let t=i.length-1;;t--){let e=t>=0?i[t]:null;if(!e)break;let o,s,a,l,{fromA:c,toA:h,fromB:u,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>u){let t=QX.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=QX.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);s=t.breakAtStart,a=t.openStart,l=e.openEnd;let i=this.compositionView(n);e.breakAtStart?i.breakAfter=1:e.content.length&&i.merge(i.length,i.length,e.content[0],!1,e.openStart,0)&&(i.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&i.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),o=t.content.concat(i).concat(e.content)}else({content:o,breakAtStart:s,openStart:a,openEnd:l}=QX.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(h,1),{i:g,off:m}=r.findPos(c,-1);iX(this,g,m,f,p,o,s,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let t of e.effects)t.is(xK)&&(this.editContextFormatting=t.value)}compositionView(t){let e=new vX(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new bX(n,[e],e.length);let n=new _X;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=tX.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),i=this.children[n.i];e(t.line,i);for(let r=t.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],e(r>=0?t.marks[r].node:t.text,i)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet(CK)||this.dom.tabIndex>-1)&&Dq(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||e||r))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(mX.gecko&&s.empty&&!this.hasComposition&&1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(t,a.node.childNodes[a.offset]||null))),a=l=new Uq(t,0),o=!0}var c;let h=this.view.observer.selectionRange;!o&&h.focusNode&&(Bq(a.node,a.offset,h.anchorNode,h.anchorOffset)&&Bq(l.node,l.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,s))||(this.view.observer.ignore((()=>{mX.android&&mX.chrome&&this.dom.contains(h.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=Tq(this.view.root);if(t)if(s.empty){if(mX.gecko){let t=(e=a.node,i=a.offset,1!=e.nodeType?0:(i&&"false"==e.childNodes[i-1].contentEditable?1:0)|(i<e.childNodes.length&&"false"==e.childNodes[i].contentEditable?2:0));if(t&&3!=t){let e=(1==t?Yq:Gq)(a.node,a.offset);e&&(a=new Uq(e.node,e.offset))}}t.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(a.node,a.offset);try{t.extend(l.node,l.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),e.setEnd(l.node,l.offset),e.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(e)}var e,i;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new Uq(h.anchorNode,h.anchorOffset),this.impreciseHead=l.precise?null:new Uq(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&Bq(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=Tq(t.root),{anchorNode:i,anchorOffset:r}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=_X.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let h=t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=e.from&&n.collapse(i,r)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let i=t.offset;!e&&i<n.childNodes.length;i++){let t=tX.get(n.childNodes[i]);t instanceof _X&&(e=t.domAtPos(0))}for(let i=t.offset-1;!e&&i>=0;i--){let t=tX.get(n.childNodes[i]);t instanceof _X&&(e=t.domAtPos(t.length))}return e?new Uq(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=tX.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof _X)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=r-s.breakAfter,l=a-s.length;if(a<t)break;if(l<=t&&(l<t||s.covers(-1))&&(a>t||s.covers(1))&&(!n||s instanceof _X&&!(n instanceof _X&&e>=0)))n=s,i=l;else if(n&&l==t&&a==t&&s instanceof IX&&Math.abs(e)<2){if(s.deco.startSide<0)break;o&&(n=null)}r=l}return n?n.coordsAt(t-i,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),i=this.children[e];if(!(i instanceof _X))return null;for(;i.children.length;){let{i:t,off:e}=i.childPos(n,1);for(;;t++){if(t==i.children.length)return null;if((i=i.children[t]).length)break}n=e}if(!(i instanceof vX))return null;let r=zd(i.text,n);if(r==n)return null;let o=qq(i.dom,n,r).getClientRects();for(let t=0;t<o.length;t++){let e=o[t];if(t==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:i}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==WX.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],h=t+c.length;if(h>i)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),o){let e=c.dom.lastChild,i=e?Rq(e):[];if(i.length){let e=i[i.length-1],o=a?e.right-n.left:n.right-e.left;o>s&&(s=o,this.minWidth=r,this.minWidthFrom=t,this.minWidthTo=h)}}}t=h+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?WX.RTL:WX.LTR}measureTextSize(){for(let t of this.children)if(t instanceof _X){let e=t.measureTextSize();if(e)return e}let t,e,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=Rq(i.firstChild)[0];t=i.getBoundingClientRect().height,e=r?r.width/27:7,n=r?r.height:t,i.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new nX(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,i=0;;i++){let r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=(e.lineBlockAt(o).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(DX.replace({widget:new zX(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return DX.set(t)}updateDeco(){let t=1,e=this.view.state.facet(DK).map((e=>(this.dynamicDecorationMap[t++]="function"==typeof e)?e(this.view):e)),n=!1,i=this.view.state.facet(RK).map(((t,e)=>{let i="function"==typeof t;return i&&(n=!0),i?t(this.view):t}));for(i.length&&(this.dynamicDecorationMap[t++]=n,e.push(Kf.join(i))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}for(let e of this.view.state.facet(wK))try{if(e(this.view,t.range,t))return!0}catch(t){kK(this.view.state,t,"scroll handler")}let e,{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});let r=_K(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(t,e,n,i,r,o,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let h=t,u=!1;h&&!u;)if(1==h.nodeType){let t,d=h==l.body,f=1,p=1;if(d)t=zq(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let e=h.getBoundingClientRect();({scaleX:f,scaleY:p}=Qq(h,e)),t={left:e.left,right:e.left+h.clientWidth*f,top:e.top,bottom:e.top+h.clientHeight*p}}let g=0,m=0;if("nearest"==r)e.top<t.top?(m=e.top-(t.top+s),n>0&&e.bottom>t.bottom+m&&(m=e.bottom-t.bottom+s)):e.bottom>t.bottom&&(m=e.bottom-t.bottom+s,n<0&&e.top-m<t.top&&(m=e.top-(t.top+s)));else{let i=e.bottom-e.top,o=t.bottom-t.top;m=("center"==r&&i<=o?e.top+i/2-o/2:"start"==r||"center"==r&&n<0?e.top-s:e.bottom-o+s)-t.top}if("nearest"==i?e.left<t.left?(g=e.left-(t.left+o),n>0&&e.right>t.right+g&&(g=e.right-t.right+o)):e.right>t.right&&(g=e.right-t.right+o,n<0&&e.left<t.left+g&&(g=e.left-(t.left+o))):g=("center"==i?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==i==a?e.left-o:e.right-(t.right-t.left)+o)-t.left,g||m)if(d)c.scrollBy(g,m);else{let t=0,n=0;if(m){let t=h.scrollTop;h.scrollTop+=m/p,n=(h.scrollTop-t)*p}if(g){let e=h.scrollLeft;h.scrollLeft+=g/f,t=(h.scrollLeft-e)*f}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(i="nearest"),n&&Math.abs(n-m)<1&&(r="nearest")}if(d)break;(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)&&(e={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)}),h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,s),-s),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==WX.LTR)}}function VK(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=Yq(n.focusNode,n.focusOffset),r=Gq(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let e=tX.get(r.node);if(!e||e instanceof vX&&e.text!=r.node.nodeValue)o=r;else if(t.docView.lastCompositionAfterCursor){let t=tX.get(i.node);!t||t instanceof vX&&t.text!=i.node.nodeValue||(o=r)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let WK=class{constructor(){this.changes=[]}compareRange(t,e){jX(t,e,this.changes)}comparePoint(t,e){jX(t,e,this.changes)}boundChange(t){jX(t,t,this.changes)}};function FK(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function qK(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function XK(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function KK(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function ZK(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function YK(t,e,n){let i,r,o,s,a,l,c,h,u=!1;for(let d=t.firstChild;d;d=d.nextSibling){let t=Rq(d);for(let f=0;f<t.length;f++){let p=t[f];r&&XK(r,p)&&(p=KK(ZK(p,r.bottom),r.top));let g=FK(e,p),m=qK(n,p);if(0==g&&0==m)return 3==d.nodeType?GK(d,e,n):YK(d,e,n);if(!i||s>m||s==m&&o>g){i=d,r=p,o=g,s=m;let a=m?n<p.top?-1:1:g?e<p.left?-1:1:0;u=!a||(a>0?f<t.length-1:f>0)}0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=d,c=p):n<p.top&&(!h||h.top>p.top)&&(l=d,h=p):c&&XK(c,p)?c=ZK(c,p.bottom):h&&XK(h,p)&&(h=KK(h,p.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=l,r=h),!i)return{node:t,offset:0};let d=Math.max(r.left,Math.min(r.right,e));return 3==i.nodeType?GK(i,d,n):u&&"false"!=i.contentEditable?YK(i,d,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0)}}function GK(t,e,n){let i=t.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let i=qq(t,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<o){let n=e>=(c.left+c.right)/2,i=n;if((mX.chrome||mX.gecko)&&qq(t,a).getBoundingClientRect().left==c.right&&(i=!n),h<=0)return{node:t,offset:a+(i?1:0)};r=a+(i?1:0),o=h}}}return{node:t,offset:r>-1?r:s>0?t.nodeValue.length:0}}function UK(t,e,n,i=-1){var r,o;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:h,y:u}=e,d=u-l;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,r=!1;s=t.elementAtHeight(d),s.type!=$X.Text;)for(;d=i>0?s.bottom+e:s.top-e,!(d>=0&&d<=c);){if(r)return n?null:0;r=!0,i=-i}u=l+d;let f=s.from;if(f<t.viewport.from)return 0==t.viewport.from?0:n?null:JK(t,a,s,h,u);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:JK(t,a,s,h,u);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,m=g.elementFromPoint(h,u);m&&!t.contentDOM.contains(m)&&(m=null),m||(h=Math.max(a.left+1,Math.min(a.right-1,h)),m=g.elementFromPoint(h,u),m&&!t.contentDOM.contains(m)&&(m=null));let v,b=-1;if(m&&0!=(null===(r=t.docView.nearest(m))||void 0===r?void 0:r.isEditable)){if(p.caretPositionFromPoint){let t=p.caretPositionFromPoint(h,u);t&&({offsetNode:v,offset:b}=t)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(h,u);e&&(({startContainer:v,startOffset:b}=e),(!t.contentDOM.contains(v)||mX.safari&&function(t,e,n){let i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return qq(t,i-1,i).getBoundingClientRect().left>n}(v,b,h)||mX.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():qq(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(v,b,h))&&(v=void 0))}v&&(b=Math.min(_q(v),b))}if(!v||!t.docView.dom.contains(v)){let e=_X.find(t.docView,f);if(!e)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:b}=YK(e.dom,h,u))}let y=t.docView.nearest(v);if(!y)return null;if(y.isWidget&&1==(null===(o=y.dom)||void 0===o?void 0:o.nodeType)){let t=y.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?y.posAtStart:y.posAtEnd}return y.localPosFromDOM(v,b)+y.posAtStart}function JK(t,e,n,i,r){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;o+=Math.floor((r-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+ap(s,o,t.state.tabSize)}function tZ(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),s=t.textDirectionAt(r.from);for(let a=e,l=null;;){let e=aK(r,o,s,a,n),c=sK;if(!e){if(r.number==(n?t.state.doc.lines:1))return a;c="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),e=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return e;l=i(c)}a=e}}function eZ(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,((t,r,o)=>{if(e>t&&e<r){let o=i||n||(e-t<r-e?-1:1);e=o<0?t:r,i=o}}));if(!i)return e}}function nZ(t,e,n){let i=eZ(t.state.facet(BK).map((e=>e(t))),n.from,e.head>n.from?-1:1);return i==n.from?n:ef.cursor(i,i<n.from?1:-1)}const iZ="￿";class rZ{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Hf.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=iZ}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i);let t=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==e)break;let o=tX.get(i),s=tX.get(r);(o&&s?o.breakAfter:(o?o.breakAfter:Lq(i))||Lq(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>t)&&this.lineBreak(),i=r}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(r=i.exec(e))&&(o=r.index,s=r[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=tX.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(oZ(t,n.node,n.offset)?e:0))}}function oZ(t,e,n){for(;;){if(!e||n<_q(e))return!1;if(e==t)return!0;n=Nq(e)+1,e=e.parentNode}}class sZ{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class aZ{constructor(t,e,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=r||o?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new sZ(n,i)),r==n&&o==i||e.push(new sZ(r,o))),e}(t),n=new rZ(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?ef.single(n+e,i+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=r&&r.node==e.focusNode&&r.offset==e.focusOffset||!$q(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),i=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!$q(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset),s=t.viewport;if((mX.ios||mX.chrome)&&t.state.selection.main.empty&&n!=i&&(s.from>0||s.to<t.state.doc.length)){let e=Math.min(n,i),r=Math.max(n,i),o=s.from-e,a=s.to-r;0!=o&&1!=o&&0!=e||0!=a&&-1!=a&&r!=t.state.doc.length||(n=0,i=t.state.doc.length)}this.newSel=ef.single(i,n)}}}function lZ(t,e){let n,{newSel:i}=e,r=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:i,to:s}=e.bounds,a=r.from,l=null;(8===o||mX.android&&e.text.length<s-i)&&(a=r.to,l="end");let c=function(t,e,n,i){let r=Math.min(t.length,e.length),o=0;for(;o<r&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;return"end"==i&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(t.state.doc.sliceString(i,s,iZ),e.text,a-i,l);c&&(mX.chrome&&13==o&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==iZ+iZ&&c.toB--,n={from:i+c.from,to:i+c.toA,insert:Td.of(e.text.slice(c.from,c.toB).split(iZ))})}else i&&(!t.hasFocus&&t.state.facet(CK)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(mX.mac||mX.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Td.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:mX.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(i&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Td.of([" "])}),n)return cZ(t,n,i,o);if(i&&!i.main.eq(r)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:e,userEvent:n}),!0}return!1}function cZ(t,e,n,i=-1){if(mX.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(mX.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&" "==t.state.sliceDoc(e.from,r.from))&&1==e.insert.length&&2==e.insert.lines&&Xq(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&0==e.insert.length||8==i&&e.insert.length<e.to-e.from&&e.to>r.head)&&Xq(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&0==e.insert.length&&Xq(t.contentDOM,"Delete",46)))return!0;let o,s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a=()=>o||(o=function(t,e,n){let i,r=t.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=o.from<e.from?r.sliceDoc(o.from,e.from):"",s=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=r.changes(e),a=n&&n.main.to<=s.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let l,c=t.state.sliceDoc(e.from,e.to),h=n&&VK(t,n.main.head);if(h){let t=e.insert.length-(e.to-e.from);l={from:h.from,to:h.to-t}}else l=t.state.doc.lineAt(o.head);let u=o.to-e.to,d=o.to-o.from;i=r.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let i=n.to-u,h=i-c.length;if(n.to-n.from!=d||t.state.sliceDoc(h,i)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=r.changes({from:h,to:i,insert:e.insert}),p=n.to-o.to;return{changes:f,range:a?ef.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else i={changes:s,selection:a&&r.selection.replaceRange(a)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:s,scrollIntoView:!0})}(t,e,n));return t.state.facet(pK).some((n=>n(t,e.from,e.to,s,a)))||t.dispatch(a()),!0}class hZ{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,mX.safari&&t.contentDOM.addEventListener("input",(()=>null)),mX.gecko&&function(t){LZ.has(t)||(LZ.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,i=e.target;i!=t.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=tX.get(i))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||(0!=this.view.updateState?Promise.resolve().then((()=>this.runHandlers(t.type,t))):this.runHandlers(t.type,t)))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=function(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let i in t.domEventHandlers){let r=t.domEventHandlers[i];r&&n(i).handlers.push(uZ(e.value,r))}if(t&&t.domEventObservers)for(let i in t.domEventObservers){let r=t.domEventObservers[i];r&&n(i).observers.push(uZ(e.value,r))}}for(let t in vZ)n(t).handlers.push(vZ[t]);for(let t in bZ)n(t).observers.push(bZ[t]);return e}(t),n=this.handlers,i=this.view.contentDOM;for(let t in e)if("scroll"!=t){let r=!e[t].handlers.length,o=n[t];o&&r!=!o.handlers.length&&(i.removeEventListener(t,this.handleEvent),o=null),o||i.addEventListener(t,this.handleEvent,{passive:r})}for(let t in n)"scroll"==t||e[t]||i.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=t.keyCode&&pZ.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),mX.android&&mX.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!mX.ios||t.synthetic||t.altKey||t.metaKey||!((e=dZ.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||fZ.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&!("Enter"==e.key&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString()))&&(this.pendingIOSKey=void 0,Xq(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(mX.safari&&!mX.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function uZ(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(t){kK(n.state,t)}}}const dZ=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],fZ="dthko",pZ=[16,17,18,20,91,92,224,225];function gZ(t){return.7*Math.max(0,t)+8}class mZ{constructor(t,e,n,i){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=function(t){let e,n,i=t.ownerDocument;for(let r=t.parentNode;r&&!(r==i.body||e&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:e,y:n}}(t.contentDOM),this.atoms=t.state.facet(BK).map((e=>e(t)));let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Hf.allowMultipleSelections)&&function(t,e){let n=t.state.facet(cK);return n.length?n[0](e):mX.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Tq(t.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let t=0;t<r.length;t++){let n=r[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=TZ(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(e=this.startEvent,n=t,Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))<10))return;var e,n;this.select(this.lastEvent=t);let i=0,r=0,o=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=_K(this.view);t.clientX-c.left<=o+6?i=-gZ(o-t.clientX):t.clientX+c.right>=a-6&&(i=gZ(t.clientX-a)),t.clientY-c.top<=s+6?r=-gZ(s-t.clientY):t.clientY+c.bottom>=l-6&&(r=gZ(t.clientY-l)),this.setScrollSpeed(i,r)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n],r=null;if(i.empty){let t=eZ(this.atoms,i.from,0);t!=i.from&&(r=ef.cursor(t,-1))}else{let t=eZ(this.atoms,i.from,-1),e=eZ(this.atoms,i.to,1);t==i.from&&e==i.to||(r=ef.range(i.from==i.anchor?t:e,i.from==i.head?t:e))}r&&(e||(e=t.ranges.slice()),e[n]=r)}return e?ef.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&n.eq(e.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some((t=>t.isUserEvent("input.type")))?this.destroy():this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const vZ=Object.create(null),bZ=Object.create(null),yZ=mX.ie&&mX.ie_version<15||mX.ios&&mX.webkit_version<604;function wZ(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function OZ(t,e){e=wZ(t.state,mK,e);let n,{state:i}=t,r=1,o=i.toText(e),s=o.lines==i.selection.ranges.length;if(null!=DZ&&i.selection.ranges.every((t=>t.empty))&&DZ==o.toString()){let t=-1;n=i.changeByRange((n=>{let a=i.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=i.toText((s?o.line(r++).text:e)+i.lineBreak);return{changes:{from:a.from,insert:l},range:ef.cursor(n.from+l.length)}}))}else n=s?i.changeByRange((t=>{let e=o.line(r++);return{changes:{from:t.from,to:t.to,insert:e.text},range:ef.cursor(t.from+e.length)}})):i.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function SZ(t,e,n,i){if(1==i)return ef.cursor(e,n);if(2==i)return function(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),o=e-r.from;if(0==r.length)return ef.cursor(e);0==o?n=1:o==r.length&&(n=-1);let s=o,a=o;n<0?s=zd(r.text,o,!1):a=zd(r.text,o);let l=i(r.text.slice(s,a));for(;s>0;){let t=zd(r.text,s,!1);if(i(r.text.slice(t,s))!=l)break;s=t}for(;a<r.length;){let t=zd(r.text,a);if(i(r.text.slice(a,t))!=l)break;a=t}return ef.range(s+r.from,a+r.from)}(t.state,e,n);{let n=_X.find(t.docView,e),i=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:i.from,o=n?n.posAtEnd:i.to;return o<t.state.doc.length&&o==i.to&&o++,ef.range(r,o)}}bZ.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},vZ.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&0!=t.inputState.tabFocusMode&&(t.inputState.tabFocusMode=Date.now()+2e3),!1),bZ.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},bZ.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},vZ.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(uK))if(n=i(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=CZ(t,e),i=TZ(e),r=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),r=r.map(t.changes))},get(e,o,s){let a,l=CZ(t,e),c=SZ(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let e=SZ(t,n.pos,n.bias,i),r=Math.min(e.from,c.from),o=Math.max(e.to,c.to);c=r<c.from?ef.range(r,o):ef.range(o,r)}return o?r.replaceRange(r.main.extend(c.from,c.to)):s&&1==i&&r.ranges.length>1&&(a=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ef.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(r,l.pos))?a:s?r.addRange(c):ef.create([c])}}}(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new mZ(t,e,n,i)),i&&t.observer.ignore((()=>{Fq(t.contentDOM);let e=t.root.activeElement;e&&!e.contains(t.contentDOM)&&e.blur()}));let r=t.inputState.mouseSelection;if(r)return r.start(e),!1===r.dragging}return!1};let xZ=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function kZ(t,e,n,i){let r=_X.find(t.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&xZ(n,i,s))return-1;let a=r.coordsAt(o,1);return a&&xZ(n,i,a)?1:s&&s.bottom>=i?-1:1}function CZ(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:kZ(t,n,e.clientX,e.clientY)}}const AZ=mX.ie&&mX.ie_version<=11;let MZ=null,EZ=0,PZ=0;function TZ(t){if(!AZ)return t.detail;let e=MZ,n=PZ;return MZ=t,PZ=Date.now(),EZ=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(EZ+1)%3:1}function $Z(t,e,n,i){if(!(n=wZ(t.state,mK,n)))return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=i&&o&&function(t,e){let n=t.state.facet(hK);return n.length?n[0](e):mX.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:o.from,to:o.to}:null,a={from:r,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}vZ.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let t=i.posAtStart,e=t+i.length;(t>=n.to||e<=n.from)&&(n=ef.range(t,e))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",wZ(t.state,vK,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1},vZ.dragend=t=>(t.inputState.draggedContent=null,!1),vZ.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,o=()=>{++r==n.length&&$Z(t,e,i.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return $Z(t,e,n,!0),!0}return!1},vZ.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=yZ?null:e.clipboardData;return n?(OZ(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),OZ(t,n.value)}),50)}(t),!1)};let DZ=null;vZ.copy=vZ.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=function(t){let e=[],n=[],i=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:wZ(t,vK,e.join(t.lineBreak)),ranges:n,linewise:i}}(t.state);if(!n&&!r)return!1;DZ=r?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=yZ?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout((()=>{i.remove(),t.focus()}),50)}(t,n),!1)};const RZ=Ef.define();function BZ(t,e){let n=[];for(let i of t.facet(gK)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:RZ.of(!0)}):null}function NZ(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=BZ(t.state,e);n?t.dispatch(n):t.update([])}}),10)}bZ.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),NZ(t)},bZ.blur=t=>{t.observer.clearSelectionRange(),NZ(t)},bZ.compositionstart=bZ.compositionupdate=t=>{t.observer.editContext||(null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))},bZ.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,mX.chrome&&mX.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50))},bZ.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},vZ.beforeinput=(t,e)=>{var n,i;if("insertReplacementText"==e.inputType&&t.observer.editContext){let i=null===(n=e.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),r=e.getTargetRanges();if(i&&r.length){let e=r[0],n=t.posAtDOM(e.startContainer,e.startOffset),o=t.posAtDOM(e.endContainer,e.endOffset);return cZ(t,{from:n,to:o,insert:t.state.toText(i)},null),!0}}let r;if(mX.chrome&&mX.android&&(r=dZ.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return mX.ios&&"deleteContentForward"==e.inputType&&t.observer.flushSoon(),mX.safari&&"insertText"==e.inputType&&t.inputState.composing>=0&&setTimeout((()=>bZ.compositionend(t,e)),20),!1};const LZ=new Set,jZ=["pre-wrap","normal","pre-line","break-spaces"];let _Z=!1;function IZ(){_Z=!1}class zZ{constructor(t){this.lineWrapping=t,this.doc=Td.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return jZ.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e}refresh(t,e,n,i,r,o){let s=jZ.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let t=0;t<o.length;t++){let e=o[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return a}}class QZ{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class HZ{constructor(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?$X.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof NX?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new HZ(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var VZ=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(VZ||(VZ={}));const WZ=.001;class FZ{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>WZ&&(_Z=!0),this.height=t)}replace(t,e,n){return FZ.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,i){let r=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:h}=i[s],u=r.lineAt(a,VZ.ByPosNoHeight,n.setDoc(e),0,0),d=u.to>=l?u:r.lineAt(l,VZ.ByPosNoHeight,n,0,0);for(h+=d.to-l,l=d.to;s>0&&u.from<=i[s-1].toA;)a=i[s-1].fromA,c=i[s-1].fromB,s--,a<u.from&&(u=r.lineAt(a,VZ.ByPosNoHeight,n,0,0));c+=u.from-a,a=u.from;let f=UZ.build(n.setDoc(o),t,c,h);r=qZ(r,r.replace(a,l,f))}return r.updateHeight(n,0)}static empty(){return new KZ(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,i=0,r=0;for(;;)if(e==n)if(i>2*r){let r=t[e-1];r.break?t.splice(--e,1,r.left,null,r.right):t.splice(--e,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,r-=e.size}}else if(i<r){let n=t[e++];n&&(i+=n.size)}else{let e=t[--n];e&&(r+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new YZ(FZ.of(t.slice(0,e)),o,FZ.of(t.slice(n)))}}function qZ(t,e){return t==e?t:(t.constructor!=e.constructor&&(_Z=!0),e)}FZ.prototype.size=1;class XZ extends FZ{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,i){return new HZ(i,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(t,e,n,i,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,n,i,r))}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class KZ extends XZ{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,i){return new HZ(i,this.length,n,this.height,this.breaks)}replace(t,e,n){let i=n[0];return 1==n.length&&(i instanceof KZ||i instanceof ZZ&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof ZZ?i=new KZ(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):FZ.of(n)}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ZZ extends FZ{constructor(t){super(t,0)}heightMetrics(t,e){let n,i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-i+1,s=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*o);n=e/o,this.length>o+1&&(s=(this.height-e)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:s}}blockAt(t,e,n,i){let{firstLine:r,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(e,i);if(e.lineWrapping){let r=i+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),o=e.doc.lineAt(r),l=s+o.length*a,c=Math.max(n,t-l/2);return new HZ(o.from,o.length,c,l,0)}{let i=Math.max(0,Math.min(o-r,Math.floor((t-n)/s))),{from:a,length:l}=e.doc.line(r+i);return new HZ(a,l,n+s*i,s,0)}}lineAt(t,e,n,i,r){if(e==VZ.ByHeight)return this.blockAt(t,n,i,r);if(e==VZ.ByPosNoHeight){let{from:e,to:i}=n.doc.lineAt(t);return new HZ(e,i-e,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,r),l=n.doc.lineAt(t),c=s+l.length*a,h=l.number-o,u=i+s*h+a*(l.from-r-h);return new HZ(l.from,l.length,Math.max(i,Math.min(u,i+this.height-c)),c,0)}forEachLine(t,e,n,i,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,r);for(let c=t,h=i;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-s;h+=a*n+l*(t-r-n)}let i=a+l*e.length;o(new HZ(e.from,e.length,h,i,0)),h+=i,c=e.to+1}}replace(t,e,n){let i=this.length-e;if(i>0){let t=n[n.length-1];t instanceof ZZ?n[n.length-1]=new ZZ(t.length+i):n.push(null,new ZZ(i-1))}if(t>0){let e=n[0];e instanceof ZZ?n[0]=new ZZ(t+e.length):n.unshift(new ZZ(t-1),null)}return FZ.of(n)}decomposeLeft(t,e){e.push(new ZZ(t-1),null)}decomposeRight(t,e){e.push(null,new ZZ(this.length-t-1))}updateHeight(t,e=0,n=!1,i){let r=e+this.length;if(i&&i.from<=e+this.length&&i.more){let n=[],o=Math.max(e,i.from),s=-1;for(i.from>e&&n.push(new ZZ(i.from-e-1).updateHeight(t,e));o<=r&&i.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==s?s=r:Math.abs(r-s)>=WZ&&(s=-2);let a=new KZ(e,r);a.outdated=!1,n.push(a),o+=e+1}o<=r&&n.push(null,new ZZ(r-o).updateHeight(t,o));let a=FZ.of(n);return(s<0||Math.abs(a.height-this.height)>=WZ||Math.abs(s-this.heightMetrics(t,e).perLine)>=WZ)&&(_Z=!0),qZ(this,a)}return(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class YZ extends FZ{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,i){let r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)}lineAt(t,e,n,i,r){let o=i+this.left.height,s=r+this.left.length+this.break,a=e==VZ.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==VZ.ByPosNoHeight?VZ.ByPosNoHeight:VZ.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,r).join(l)}forEachLine(t,e,n,i,r,o){let s=i+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,i,r,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{let l=this.lineAt(a,VZ.ByPos,n,i,r);t<l.from&&this.left.forEachLine(t,l.from-1,n,i,r,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}}replace(t,e,n){let i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let t of n)r.push(t);if(t>0&&GZ(r,o-1),e<this.length){let t=r.length;this.decomposeRight(e,r),GZ(r,t)}return FZ.of(r)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?FZ.of(this.break?[t,null,e]:[t,e]):(this.left=qZ(this.left,t),this.right=qZ(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,i){let{left:r,right:o}=this,s=e+r.length+this.break,a=null;return i&&i.from<=e+r.length&&i.more?a=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=s+o.length&&i.more?a=o=o.updateHeight(t,s,n,i):o.updateHeight(t,s,n),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function GZ(t,e){let n,i;null==t[e]&&(n=t[e-1])instanceof ZZ&&(i=t[e+1])instanceof ZZ&&t.splice(e-1,3,new ZZ(n.length+1+i.length))}class UZ{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof KZ?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new KZ(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=e-t;n.block?this.addBlock(new XZ(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new KZ(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new ZZ(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof KZ)return t;let e=new KZ(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),i.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof KZ||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new KZ(0,-1));let n=t;for(let t of this.nodes)t instanceof KZ&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,i){let r=new UZ(n,t);return Kf.spans(e,n,i,r,0),r.finish(n)}}class JZ{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&jX(t,e,this.changes,5)}}function tY(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=i.body;)if(1==e.nodeType){let n=e,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();o=Math.max(o,i.left),s=Math.min(s,i.right),a=Math.max(a,i.top),l=Math.min(e==t.parentNode?r.innerHeight:l,i.bottom)}e="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function eY(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class nY{constructor(t,e,n,i){this.from=t,this.to=e,this.size=n,this.displaySize=i}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(t,e){return DX.replace({widget:new iY(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class iY extends TX{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class rY{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=lY,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=WX.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet($K).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new zZ(e),this.stateDeco=t.facet(DK).filter((t=>"function"!=typeof t)),this.heightMap=FZ.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle.setDoc(t.doc),[new zK(0,0,0,t.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=DX.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let i=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>i>=t&&i<=e))){let{from:e,to:n}=this.lineBlockAt(i);t.push(new oY(e,n))}}return this.viewports=t.sort(((t,e)=>t.from-e.from)),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?lY:new cY(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(hY(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(DK).filter((t=>"function"!=typeof t));let i=t.changedRanges,r=zK.extendWithRanges(i,function(t,e,n){let i=new JZ;return Kf.compare(t,e,n,i,0),i.changes}(n,this.stateDeco,t?t.changes:Xd.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);IZ(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||_Z)&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,t.flags|=this.updateForViewport(),(l||!t.changes.empty||2&t.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(yK)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?WX.RTL:WX.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),s=e.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:t,scaleY:n}=Qq(e,s);(t>.005&&Math.abs(this.scaleX-t)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=t,this.scaleY=n,l|=16,o=a=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,u=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==u||(this.paddingTop=h,this.paddingBottom=u,l|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=16);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=Zq(t.scrollDOM);let f=(this.printing?eY:tY)(e,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!function(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}(t.dom))return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=t.scrollDOM.clientHeight,l|=16),a){let e=t.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(e)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=t.docView.measureTextSize();o=n>0&&i.refresh(r,n,s,a,v/s,e),o&&(t.docView.minWidth=0,l|=16)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),IZ();for(let n of this.viewports){let r=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(o?FZ.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle,[new zK(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new QZ(n.from,r))}_Z&&(l|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new oY(i.lineAt(o-1e3*n,VZ.ByHeight,r,0,0).from,i.lineAt(s+1e3*(1-n),VZ.ByHeight,r,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=i.lineAt(t,VZ.ByPos,r,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-o,a=new oY(i.lineAt(n-500,VZ.ByHeight,r,0,0).from,i.lineAt(n+o+500,VZ.ByHeight,r,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new oY(this.heightMap.lineAt(n,VZ.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,VZ.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,VZ.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,VZ.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||i<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||r>=s+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let i of t)e.touchesRange(i.from,i.to)||n.push(new nY(e.mapPos(i.from),e.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=WX.LTR&&!n)return[];let s=[],a=(i,o,l,c)=>{if(o-i<r)return;let h=this.state.selection.main,u=[h.from];h.empty||u.push(h.to);for(let t of u)if(t>i&&t<o)return a(i,t-10,l,c),void a(t+10,o,l,c);let d=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-i)<r&&Math.abs(t.to-o)<r&&!u.some((e=>t.from<e&&t.to>e))));if(!d){if(o<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=o&&t.to>=o))){let t=e.moveToLineBoundary(ef.cursor(o),!1,!0).head;t>i&&(o=t)}let t=this.gapSize(l,i,o,c);d=new nY(i,o,t,n||t<2e6?t:2e6)}s.push(d)},l=e=>{if(e.length<o||e.type!=$X.Text)return;let r=function(t,e,n){let i=[],r=t,o=0;return Kf.spans(n,t,e,{span(){},point(t,e){t>r&&(i.push({from:r,to:t}),o+=t-r),r=e}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}(e.from,e.to,this.stateDeco);if(r.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let t,n,o=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let i=aY(r,c),s=((this.visibleBottom-this.visibleTop)/2+o)/e.height;t=i-s,n=i+s}else t=(this.visibleTop-e.top-o)/e.height,n=(this.visibleBottom-e.top+o)/e.height;s=sY(r,t),l=sY(r,n)}else{let n=r.total*this.heightOracle.charWidth,o=i*this.heightOracle.charWidth,a=0;if(n>2e6)for(let n of t)n.from>=e.from&&n.from<e.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let h,u,d=this.pixelViewport.left+a,f=this.pixelViewport.right+a;if(null!=c){let t=aY(r,c),e=((f-d)/2+o)/n;h=t-e,u=t+e}else h=(d-o)/n,u=(f+o)/n;s=sY(r,h),l=sY(r,u)}s>e.from&&a(e.from,s,e,r),l<e.to&&a(l,e.to,e,r)};for(let t of this.viewportLines)Array.isArray(t.type)?t.type.forEach(l):l(t);return s}gapSize(t,e,n,i){let r=aY(i,n)-aY(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(t){nY.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=DX.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Kf.spans(e,this.viewport.from,this.viewport.to,{span(t,e){n.push({from:t,to:e})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let e=0;e<n.length&&!(8&i);e++){let r=this.visibleRanges[e],o=n[e];r.from==o.from&&r.to==o.to||(i|=4,t&&t.mapPos(r.from,-1)==o.from&&t.mapPos(r.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||hY(this.heightMap.lineAt(t,VZ.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((e=>e.top<=t&&e.bottom>=t))||hY(this.heightMap.lineAt(this.scaler.fromDOM(t),VZ.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return hY(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class oY{constructor(t,e){this.from=t,this.to=e}}function sY({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:r}=e[t],o=r-n;if(i<=o)return n+i;i-=o}}function aY(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}const lY={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class cY{constructor(t,e,n){let i=0,r=0,o=0;this.viewports=n.map((({from:n,to:r})=>{let o=e.lineAt(n,VZ.ByPos,t,0,0).top,s=e.lineAt(r,VZ.ByPos,t,0,0).bottom;return i+=s-o,{from:n,to:r,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(e.height-i);for(let t of this.viewports)t.domTop=o+(t.top-r)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),r=t.bottom}toDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}}fromDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}}eq(t){return t instanceof cY&&this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every(((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to))}}function hY(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new HZ(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map((t=>hY(t,e))):t._content)}const uY=of.define({combine:t=>t.join(" ")}),dY=of.define({combine:t=>t.indexOf(!0)>-1}),fY=up.newName(),pY=up.newName(),gY=up.newName(),mY={"&light":"."+pY,"&dark":"."+gY};function vY(t,e,n){return new up(e,{finish(e){return/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e}})}const bY=vY("."+fY,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},mY),yY={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},wY=mX.ie&&mX.ie_version<=11;class OY{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new Hq,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(mX.ie&&mX.ie_version<=11||mX.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===t.constructor.EDIT_CONTEXT||mX.chrome&&mX.chrome_version<126||(this.editContext=new kY(t),t.state.facet(CK)&&(t.contentDOM.editContext=this.editContext.editContext)),wY&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(t){("change"!=t.type&&t.type||t.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(CK)?n.root.activeElement!=this.dom:!Dq(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(t)?e||(this.selectionChanged=!1):(mX.ie&&mX.ie_version<=11||mX.android&&mX.chrome)&&!n.state.selection.main.empty&&i.focusNode&&Bq(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=Tq(t.root);if(!e)return!1;let n=mX.safari&&11==t.root.nodeType&&t.root.activeElement==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return xY(t,n)}let n=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?xY(t,n):null}(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let i=Dq(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,_q(n));;)if(i){if(1!=n.nodeType)return!1;let t=n.childNodes[i-1];"false"==t.contentEditable?i--:(n=t,i=_q(n))}else{if(n==t)return!0;i=Nq(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,yY),wY&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),wY&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&Xq(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,i=!1;for(let r of t){let t=this.readMutation(r);t&&(t.typeOver&&(i=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:i}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),i=this.selectionChanged&&Dq(this.dom,this.selectionRange);if(t<0&&!i)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new aZ(this.view,t,e,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,i=lZ(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=SY(e,t.previousSibling||t.target.previousSibling,-1),i=SY(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(CK)!=t.state.facet(CK)&&(t.view.contentDOM.editContext=t.state.facet(CK)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function SY(t,e,n){for(;e;){let i=tX.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function xY(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return Bq(s.node,s.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}class kY{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=e=>{let n=t.state.selection.main,{anchor:i,head:r}=n,o=this.toEditorPos(e.updateRangeStart),s=this.toEditorPos(e.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:e.updateRangeStart,editorBase:o,drifted:!1});let a={from:o,to:s,insert:Td.of(e.text.split("\n"))};if(a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),a.from!=a.to||a.insert.length){if((mX.mac||mX.android)&&a.from==r-1&&/^\. ?$/.test(e.text)&&"off"==t.contentDOM.getAttribute("autocorrect")&&(a={from:o,to:s,insert:Td.of([e.text.replace("."," ")])}),this.pendingContextChange=a,!t.state.readOnly){let n=this.to-this.from+(a.to-a.from+a.insert.length);cZ(t,a,ef.single(this.toEditorPos(e.selectionStart,n),this.toEditorPos(e.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))}else{let i=ef.single(this.toEditorPos(e.selectionStart),this.toEditorPos(e.selectionEnd));i.main.eq(n)||t.dispatch({selection:i,userEvent:"select"})}},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let e=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);e<o;e++){let n=t.coordsForChar(e);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}e.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=e=>{let n=[];for(let t of e.getTextFormats()){let e=t.underlineStyle,i=t.underlineThickness;if("None"!=e&&"None"!=i){let r=this.toEditorPos(t.rangeStart),o=this.toEditorPos(t.rangeEnd);if(r<o){let t=`text-decoration: underline ${"Dashed"==e?"dashed ":"Squiggle"==e?"wavy ":""}${"Thin"==i?1:2}px`;n.push(DX.mark({attributes:{style:t}}).range(r,o))}}}t.dispatch({effects:xK.of(DX.set(n))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:e}=this.composing;this.composing=null,e&&this.reset(t.state)}};for(let t in this.handlers)e.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let e=Tq(t.root);e&&e.rangeCount&&this.editContext.updateSelectionBounds(e.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,i=this.pendingContextChange;return t.changes.iterChanges(((r,o,s,a,l)=>{if(n)return;let c=l.length-(o-r);if(i&&o>=i.to){if(i.from==r&&i.to==o&&i.insert.eq(l))return i=this.pendingContextChange=null,e+=c,void(this.to+=c);i=null,this.revertPending(t.state)}if(r+=e,(o+=e)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),l.toString()),this.to+=c}e+=c})),i&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some((t=>!t.isUserEvent("input.type")&&t.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):this.applyEdits(t)&&this.rangeIsValid(t.state)?(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state):(this.pendingContextChange=null,this.reset(t.state)),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),i=this.toContextPos(e.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>3e4)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class CY{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(t=>t.forEach((t=>n(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new rY(t.state||Hf.create(t)),t.scrollTo&&t.scrollTo.is(SK)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(MK).map((t=>new PK(t)));for(let t of this.plugins)t.update(this);this.observer=new OY(this),this.inputState=new hZ(this),this.inputState.ensureHandlers(this.plugins),this.docView=new HK(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(e=document.fonts)||void 0===e?void 0:e.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...t){let e=1==t.length&&t[0]instanceof Df?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,i=!1,r=this.state;for(let e of t){if(e.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=e.state}if(this.destroyed)return void(this.viewState.state=r);let o=this.hasFocus,s=0,a=null;t.some((t=>t.annotation(RZ)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=BZ(r,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(Hf.phrases)!=this.state.facet(Hf.phrases))return this.setState(r);e=QK.create(this,r,t),e.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(h&&(h=h.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;h=new OK(t.empty?t:ef.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(SK)&&(h=t.value.clip(this.state))}this.viewState.update(e,h),this.bidiCache=EY.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(IK)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(uY)!=e.state.facet(uY)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!e.empty)for(let t of this.state.facet(fK))try{t(e)}catch(t){kK(this.state,t,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!lZ(this,c)&&l.force&&Xq(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new rY(t),this.plugins=t.facet(MK).map((t=>new PK(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new HK(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(MK),n=t.state.facet(MK);if(e!=n){let i=[];for(let r of n){let n=e.indexOf(r);if(n<0)i.push(new PK(r));else{let e=this.plugins[n];e.mustUpdate=t,i.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(t){kK(this.state,t,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(o<0)if(Zq(n))r=-1,o=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(i);r=t.from,o=t.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((t=>{try{return t.read(this)}catch(t){return kK(this.state,t),MY}})),c=QK.create(this,this.state,[]),h=!1;c.flags|=s,e?e.flags|=s:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let t=0;t<a.length;t++)if(l[t]!=MY)try{let e=a[t];e.write&&e.write(l[t],this)}catch(t){kK(this.state,t)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let t=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(t>1||t<-1){i+=t,n.scrollTop=i/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(fK))t(e)}get themeClasses(){return fY+" "+(this.state.facet(dY)?gY:pY)+" "+this.state.facet(uY)}updateAttrs(){let t=PY(this,TK,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(CK)?"true":"false",class:"cm-content",style:`${mX.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),PY(this,$K,e);let n=this.observer.ignore((()=>{let n=EX(this.contentDOM,this.contentAttrs,e),i=EX(this.dom,this.editorAttrs,t);return n||i}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(CY.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(IK);let t=this.state.facet(CY.cspNonce);up.mount(this.root,this.styleModules.concat(bY).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return nZ(this,t,tZ(this,t,e,n))}moveByGroup(t,e){return nZ(this,t,tZ(this,t,e,(e=>function(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return t=>{let e=i(t);return r==If.Space&&(r=e),r==e}}(this,t.head,e))))}visualLineSide(t,e){let n=this.bidiSpans(t),i=this.textDirectionAt(t.from),r=n[e?n.length-1:0];return ef.cursor(r.side(e,i)+t.from,r.forward(!e,i)?1:-1)}moveToLineBoundary(t,e,n=!0){return function(t,e,n,i){let r=function(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let t;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;t&&(r.type!=$X.Text||t.type==r.type&&!(n<0?r.from<e:r.to>e))||(t=r)}}return t||i}return i}(t,e.head,e.assoc||-1),o=i&&r.type==$X.Text&&(t.lineWrapping||r.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),i=t.textDirectionAt(r.from),s=t.posAtCoords({x:n==(i==WX.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return ef.cursor(s,n?-1:1)}return ef.cursor(n?r.to:r.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return nZ(this,t,function(t,e,n,i){let r=e.head,o=n?1:-1;if(r==(n?t.state.doc.length:0))return ef.cursor(r,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),h=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-e.from))),s=(o<0?e.top:e.bottom)+h}let u=l.left+a,d=null!=i?i:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(d+e)*o,i=UK(t,{x:u,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?i<r:i>r)){let e=t.docView.coordsForChar(i),r=!e||n<e.top?-1:1;return ef.cursor(i,r,void 0,a)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),UK(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),r=this.bidiSpans(i);return Iq(n,r[tK.find(r,t-i.from,-1,e)].dir==WX.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(bK)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>AY)return oK(t.length);let e,n=this.textDirectionAt(t.from);for(let i of this.bidiCache)if(i.from==t.from&&i.dir==n&&(i.fresh||eK(i.isolates,e=LK(this,t))))return i.order;e||(e=LK(this,t));let i=function(t,e,n){if(!t)return[new tK(0,0,e==qX?1:0)];if(e==FX&&!n.length&&!JX.test(t))return oK(t.length);if(n.length)for(;t.length>nK.length;)nK[nK.length]=256;let i=[],r=e==FX?0:1;return rK(t,r,r,n,0,t.length,i),i}(t.text,n,e);return this.bidiCache.push(new EY(t.from,t.to,n,e,!0,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||mX.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Fq(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return SK.of(new OK("number"==typeof t?ef.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return SK.of(new OK(ef.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){null==t?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof t?this.inputState.tabFocusMode=t?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return EK.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return EK.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=up.newName(),i=[uY.of(n),IK.of(vY(`.${n}`,t))];return e&&e.dark&&i.push(dY.of(!0)),i}static baseTheme(t){return pf.lowest(IK.of(vY("."+fY,t,mY)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),i=n&&tX.get(n)||tX.get(t);return(null===(e=null==i?void 0:i.rootView)||void 0===e?void 0:e.view)||null}}CY.styleModule=IK,CY.inputHandler=pK,CY.clipboardInputFilter=mK,CY.clipboardOutputFilter=vK,CY.scrollHandler=wK,CY.focusChangeEffect=gK,CY.perLineTextDirection=bK,CY.exceptionSink=dK,CY.updateListener=fK,CY.editable=CK,CY.mouseSelectionStyle=uK,CY.dragMovesSelection=hK,CY.clickAddsSelectionRange=cK,CY.decorations=DK,CY.outerDecorations=RK,CY.atomicRanges=BK,CY.bidiIsolatedRanges=NK,CY.scrollMargins=jK,CY.darkTheme=dY,CY.cspNonce=of.define({combine:t=>t.length?t[0]:""}),CY.contentAttributes=$K,CY.editorAttributes=TK,CY.lineWrapping=CY.contentAttributes.of({class:"cm-lineWrapping"}),CY.announce=$f.define();const AY=4096,MY={};class EY{constructor(t,e,n,i,r,o){this.from=t,this.to=e,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],i=t.length?t[t.length-1].dir:WX.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir!=i||e.touchesRange(o.from,o.to)||n.push(new EY(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function PY(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let e=i[r],o="function"==typeof e?e(t):e;o&&CX(o,n)}return n}const TY="-10000px";class $Y{constructor(t,e,n,i){this.facet=e,this.createTooltipView=n,this.removeTooltipView=i,this.input=t.state.facet(e),this.tooltips=this.input.filter((t=>t));let r=null;this.tooltipViews=this.tooltips.map((t=>r=n(t,r)))}update(t,e){var n;let i=t.state.facet(this.facet),r=i.filter((t=>t));if(i===this.input){for(let e of this.tooltipViews)e.update&&e.update(t);return!1}let o=[],s=e?[]:null;for(let n=0;n<r.length;n++){let i=r[n],a=-1;if(i){for(let t=0;t<this.tooltips.length;t++){let e=this.tooltips[t];e&&e.create==i.create&&(a=t)}if(a<0)o[n]=this.createTooltipView(i,n?o[n-1]:null),s&&(s[n]=!!i.above);else{let i=o[n]=this.tooltipViews[a];s&&(s[n]=e[a]),i.update&&i.update(t)}}}for(let t of this.tooltipViews)o.indexOf(t)<0&&(this.removeTooltipView(t),null===(n=t.destroy)||void 0===n||n.call(t));return e&&(s.forEach(((t,n)=>e[n]=t)),e.length=s.length),this.input=i,this.tooltips=r,this.tooltipViews=o,!0}}function DY(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const RY=of.define({combine:t=>{var e,n,i;return{position:mX.ios?"absolute":(null===(e=t.find((t=>t.position)))||void 0===e?void 0:e.position)||"fixed",parent:(null===(n=t.find((t=>t.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(i=t.find((t=>t.tooltipSpace)))||void 0===i?void 0:i.tooltipSpace)||DY}}}),BY=new WeakMap,NY=EK.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(RY);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((()=>this.measureSoon())):null,this.manager=new $Y(t,IY,((t,e)=>this.createTooltip(t,e)),(t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()})),this.above=this.manager.tooltips.map((t=>!!t.above)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(RY);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let t of this.manager.tooltipViews)t.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let t of this.manager.tooltipViews)this.container.appendChild(t.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",n.dom.appendChild(t)}return n.dom.style.position=this.position,n.dom.style.top=TY,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let e of this.manager.tooltipViews)e.dom.remove(),null===(t=e.destroy)||void 0===t||t.call(e);this.parent&&this.container.remove(),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:t}=this.manager.tooltipViews[0];if(mX.gecko)n=t.offsetParent!=this.container.ownerDocument.body;else if(t.style.top==TY&&"0px"==t.style.left){let e=t.getBoundingClientRect();n=Math.abs(e.top+1e4)>1||Math.abs(e.left)>1}}if(n||"absolute"==this.position)if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(t=n.width/this.parent.offsetWidth,e=n.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=_K(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map(((t,e)=>{let n=this.manager.tooltipViews[e];return n.getCoords?n.getCoords(t.pos):this.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((({dom:t})=>t.getBoundingClientRect())),space:this.view.state.facet(RY).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let t of this.manager.tooltipViews)t.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:o}=t,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:h}=c,u=t.pos[a],d=t.size[a];if(!u||!1!==l.clip&&(u.bottom<=Math.max(n.top,i.top)||u.top>=Math.min(n.bottom,i.bottom)||u.right<Math.max(n.left,i.left)-.1||u.left>Math.min(n.right,i.right)+.1)){h.style.top=TY;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=d.right-d.left,m=null!==(e=BY.get(c))&&void 0!==e?e:d.bottom-d.top,v=c.offset||_Y,b=this.view.textDirection==WX.LTR,y=d.width>i.right-i.left?b?i.left:i.right-d.width:b?Math.max(i.left,Math.min(u.left-(f?14:0)+v.x,i.right-g)):Math.min(Math.max(i.left,u.left-g+(f?14:0)-v.x),i.right-g),w=this.above[a];!l.strictSide&&(w?u.top-m-p-v.y<i.top:u.bottom+m+p+v.y>i.bottom)&&w==i.bottom-u.bottom>u.top-i.top&&(w=this.above[a]=!w);let O=(w?u.top-i.top:i.bottom-u.bottom)-p;if(O<m&&!1!==c.resize){if(O<this.view.defaultLineHeight){h.style.top=TY;continue}BY.set(c,m),h.style.height=(m=O)/o+"px"}else h.style.height&&(h.style.height="");let S=w?u.top-m-p-v.y:u.bottom+p+v.y,x=y+g;if(!0!==c.overlap)for(let t of s)t.left<x&&t.right>y&&t.top<S+m&&t.bottom>S&&(S=w?t.top-m-2-p:t.bottom+p+2);if("absolute"==this.position?(h.style.top=(S-t.parent.top)/o+"px",LY(h,(y-t.parent.left)/r)):(h.style.top=S/o+"px",LY(h,y/r)),f){let t=u.left+(b?v.x:-v.x)-(y+14-7);f.style.left=t/r+"px"}!0!==c.overlap&&s.push({left:y,top:S,right:x,bottom:S+m}),h.classList.toggle("cm-tooltip-above",w),h.classList.toggle("cm-tooltip-below",!w),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=TY}},{eventObservers:{scroll(){this.maybeMeasure()}}});function LY(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const jY=CY.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),_Y={x:0,y:0},IY=of.define({enables:[NY,jY]}),zY=of.define({combine:t=>t.reduce(((t,e)=>t.concat(e)),[])});class QY{static create(t){return new QY(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new $Y(t,zY,((t,e)=>this.createHostedView(t,e)),(t=>t.dom.remove()))}createHostedView(t,e){let n=t.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,e?e.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)null===(t=e.destroy)||void 0===t||t.call(e)}passProp(t){let e;for(let n of this.manager.tooltipViews){let i=n[t];if(void 0!==i)if(void 0===e)e=i;else if(e!==i)return}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const HY=IY.compute([zY],(t=>{let e=t.facet(zY);return 0===e.length?null:{pos:Math.min(...e.map((t=>t.pos))),end:Math.max(...e.map((t=>{var e;return null!==(e=t.end)&&void 0!==e?e:t.pos}))),create:QY.create,above:e[0].above,arrow:e.some((t=>t.arrow))}}));class VY{constructor(t,e,n,i,r){this.view=t,this.source=e,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,n=t.docView.nearest(e.target);if(!n)return;let i,r=1;if(n instanceof yX)i=n.posAtStart;else{if(i=t.posAtCoords(e),null==i)return;let n=t.coordsAtPos(i);if(!n||e.y<n.top||e.y>n.bottom||e.x<n.left-t.defaultCharacterWidth||e.x>n.right+t.defaultCharacterWidth)return;let o=t.bidiSpans(t.state.doc.lineAt(i)).find((t=>t.from<=i&&t.to>=i)),s=o&&o.dir==WX.RTL?-1:1;r=e.x<n.left?-s:s}let o=this.source(t,i,r);if(null==o?void 0:o.then){let e=this.pending={pos:i};o.then((n=>{this.pending==e&&(this.pending=null,!n||Array.isArray(n)&&!n.length||t.dispatch({effects:this.setHover.of(Array.isArray(n)?n:[n])}))}),(e=>kK(t.state,e,"hover tooltip")))}else!o||Array.isArray(o)&&!o.length||t.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let t=this.view.plugin(NY),e=t?t.manager.tooltips.findIndex((t=>t.create==QY.create)):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e,n;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:r}=this;if(i.length&&r&&!function(t,e){let n,{left:i,right:r,top:o,bottom:s}=t.getBoundingClientRect();if(n=t.querySelector(".cm-tooltip-arrow")){let t=n.getBoundingClientRect();o=Math.min(t.top,o),s=Math.max(t.bottom,s)}return e.clientX>=i-WY&&e.clientX<=r+WY&&e.clientY>=o-WY&&e.clientY<=s+WY}(r.dom,t)||this.pending){let{pos:r}=i[0]||this.pending,o=null!==(n=null===(e=i[0])||void 0===e?void 0:e.end)&&void 0!==n?n:r;(r==o?this.view.posAtCoords(this.lastMove)==r:function(t,e,n,i,r){let o=t.scrollDOM.getBoundingClientRect(),s=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,s)<r)return!1;let a=t.posAtCoords({x:i,y:r},!1);return a>=e&&a<=n}(this.view,r,o,t.clientX,t.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e.length){let{tooltip:e}=this;e&&e.dom.contains(t.relatedTarget)?this.watchTooltipLeave(e.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let e=n=>{t.removeEventListener("mouseleave",e),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const WY=4;function FY(t,e={}){let n=$f.define(),i=df.define({create(){return[]},update(t,i){if(t.length&&(e.hideOnChange&&(i.docChanged||i.selection)?t=[]:e.hideOn&&(t=t.filter((t=>!e.hideOn(i,t)))),i.docChanged)){let e=[];for(let n of t){let t=i.changes.mapPos(n.pos,-1,Fd.TrackDel);if(null!=t){let r=Object.assign(Object.create(null),n);r.pos=t,null!=r.end&&(r.end=i.changes.mapPos(r.end)),e.push(r)}}t=e}for(let e of i.effects)e.is(n)&&(t=e.value),e.is(qY)&&(t=[]);return t},provide:t=>zY.from(t)});return{active:i,extension:[i,EK.define((r=>new VY(r,t,i,n,e.hoverTime||300))),HY]}}const qY=$f.define(),XY=of.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}}),KY=EK.fromClass(class{constructor(t){this.input=t.state.facet(GY),this.specs=this.input.filter((t=>t)),this.panels=this.specs.map((e=>e(t)));let e=t.state.facet(XY);this.top=new ZY(t,!0,e.topContainer),this.bottom=new ZY(t,!1,e.bottomContainer),this.top.sync(this.panels.filter((t=>t.top))),this.bottom.sync(this.panels.filter((t=>!t.top)));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(t){let e=t.state.facet(XY);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ZY(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ZY(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(GY);if(n!=this.input){let e=n.filter((t=>t)),i=[],r=[],o=[],s=[];for(let n of e){let e,a=this.specs.indexOf(n);a<0?(e=n(t.view),s.push(e)):(e=this.panels[a],e.update&&e.update(t)),i.push(e),(e.top?r:o).push(e)}this.specs=e,this.panels=i,this.top.sync(r),this.bottom.sync(o);for(let t of s)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}else for(let e of this.panels)e.update&&e.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>CY.scrollMargins.of((e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class ZY{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=YY(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=YY(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function YY(t){let e=t.nextSibling;return t.remove(),e}const GY=of.define({enables:KY});class UY extends Wf{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}UY.prototype.elementClass="",UY.prototype.toDOM=void 0,UY.prototype.mapMode=Fd.TrackBefore,UY.prototype.startSide=UY.prototype.endSide=-1,UY.prototype.point=!0;class JY{constructor(t,e,n){this.from=t,this.to=e,this.diagnostic=n}}class tG{constructor(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}static init(t,e,n){let i=n.facet(uG).markerFilter;i&&(t=i(t,n));let r=t.slice().sort(((t,e)=>t.from-e.from||t.to-e.to)),o=new Zf,s=[],a=0;for(let t=0;;){let e,i,l=t==r.length?null:r[t];if(!l&&!s.length)break;for(s.length?(e=a,i=s.reduce(((t,e)=>Math.min(t,e.to)),l&&l.from>e?l.from:1e8)):(e=l.from,i=l.to,s.push(l),t++);t<r.length;){let n=r[t];if(n.from!=e||!(n.to>n.from||n.to==e)){i=Math.min(n.from,i);break}s.push(n),t++,i=Math.min(n.to,i)}let c=wG(s);if(s.some((t=>t.from==t.to||t.from==t.to-1&&n.doc.lineAt(t.from).to==t.from)))o.add(e,e,DX.widget({widget:new pG(c),diagnostics:s.slice()}));else{let t=s.reduce(((t,e)=>e.markClass?t+" "+e.markClass:t),"");o.add(e,i,DX.mark({class:"cm-lintRange cm-lintRange-"+c+t,diagnostics:s.slice(),inclusiveEnd:s.some((t=>t.to>i))}))}a=i;for(let t=0;t<s.length;t++)s[t].to<=a&&s.splice(t--,1)}let l=o.finish();return new tG(l,e,eG(l))}}function eG(t,e=null,n=0){let i=null;return t.between(n,1e9,((t,n,{spec:r})=>{if(!(e&&r.diagnostics.indexOf(e)<0))if(i){if(r.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new JY(i.from,n,i.diagnostic)}else i=new JY(t,n,e||r.diagnostics[0])})),i}const nG=$f.define(),iG=$f.define(),rG=$f.define(),oG=df.define({create(){return new tG(DX.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=eG(n,t.selected.diagnostic,r)||eG(n,null,r)}!n.size&&r&&e.state.facet(uG).autoPanel&&(r=null),t=new tG(n,r,i)}for(let n of e.effects)if(n.is(nG)){let i=e.state.facet(uG).autoPanel?n.value.length?mG.open:null:t.panel;t=tG.init(n.value,i,e.state)}else n.is(iG)?t=new tG(t.diagnostics,n.value?mG.open:null,t.selected):n.is(rG)&&(t=new tG(t.diagnostics,t.panel,n.value));return t},provide:t=>[GY.from(t,(t=>t.panel)),CY.decorations.from(t,(t=>t.diagnostics))]}),sG=DX.mark({class:"cm-lintRange cm-lintRange-active"});function aG(t,e,n){let i,{diagnostics:r}=t.state.field(oG),o=-1,s=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),((t,r,{spec:a})=>{if(e>=t&&e<=r&&(t==r||(e>t||n>0)&&(e<r||n<0)))return i=a.diagnostics,o=t,s=r,!1}));let a=t.state.facet(uG).tooltipFilter;return i&&a&&(i=a(i,t.state)),i?{pos:o,end:s,above:t.state.doc.lineAt(o).to<s,create(){return{dom:lG(t,i)}}}:null}function lG(t,e){return AF("ul",{class:"cm-tooltip-lint"},e.map((e=>fG(t,e,!1))))}const cG=t=>{let e=t.state.field(oG,!1);return!(!e||!e.panel||(t.dispatch({effects:iG.of(!1)}),0))},hG=[{key:"Mod-Shift-m",run:t=>{let e=t.state.field(oG,!1);var n,i;e&&e.panel||t.dispatch({effects:(n=t.state,i=[iG.of(!0)],n.field(oG,!1)?i:i.concat($f.appendConfig.of(OG)))});let r=function(t,e){let n=t.plugin(KY),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}(t,mG.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:t=>{let e=t.state.field(oG,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!(!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)||(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),0))}}],uG=of.define({combine(t){return Object.assign({sources:t.map((t=>t.source)).filter((t=>null!=t))},Vf(t.map((t=>t.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(t,e)=>t?e?n=>t(n)||e(n):t:e}))}});function dG(t){let e=[];if(t)t:for(let{name:n}of t){for(let t=0;t<n.length;t++){let i=n[t];if(/[a-zA-Z]/.test(i)&&!e.some((t=>t.toLowerCase()==i.toLowerCase()))){e.push(i);continue t}}e.push("")}return e}function fG(t,e,n){var i;let r=n?dG(e.actions):[];return AF("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},AF("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),null===(i=e.actions)||void 0===i?void 0:i.map(((n,i)=>{let o=!1,s=i=>{if(i.preventDefault(),o)return;o=!0;let r=eG(t.state.field(oG).diagnostics,e);r&&n.apply(t,r.from,r.to)},{name:a}=n,l=r[i]?a.indexOf(r[i]):-1,c=l<0?a:[a.slice(0,l),AF("u",a.slice(l,l+1)),a.slice(l+1)];return AF("button",{type:"button",class:"cm-diagnosticAction",onclick:s,onmousedown:s,"aria-label":` Action: ${a}${l<0?"":` (access key "${r[i]})"`}.`},c)})),e.source&&AF("div",{class:"cm-diagnosticSource"},e.source))}class pG extends TX{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return AF("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class gG{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=fG(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class mG{constructor(t){this.view=t,this.items=[],this.list=AF("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e=>{if(27==e.keyCode)cG(this.view),this.view.focus();else if(38==e.keyCode||33==e.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==e.keyCode||34==e.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==e.keyCode)this.moveSelection(0);else if(35==e.keyCode)this.moveSelection(this.items.length-1);else if(13==e.keyCode)this.view.focus();else{if(!(e.keyCode>=65&&e.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],i=dG(n.actions);for(let r=0;r<i.length;r++)if(i[r].toUpperCase().charCodeAt(0)==e.keyCode){let e=eG(this.view.state.field(oG).diagnostics,n);e&&n.actions[r].apply(t,e.from,e.to)}}}e.preventDefault()},onclick:t=>{for(let e=0;e<this.items.length;e++)this.items[e].dom.contains(t.target)&&this.moveSelection(e)}}),this.dom=AF("div",{class:"cm-panel-lint"},this.list,AF("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>cG(this.view)},"×")),this.update()}get selectedIndex(){let t=this.view.state.field(oG).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(oG),n=0,i=!1,r=null,o=new Set;for(t.between(0,this.view.state.doc.length,((t,s,{spec:a})=>{for(let t of a.diagnostics){if(o.has(t))continue;o.add(t);let s,a=-1;for(let e=n;e<this.items.length;e++)if(this.items[e].diagnostic==t){a=e;break}a<0?(s=new gG(this.view,t),this.items.splice(n,0,s),i=!0):(s=this.items[a],a>n&&(this.items.splice(n,a-n),i=!0)),e&&s.diagnostic==e.diagnostic?s.dom.hasAttribute("aria-selected")||(s.dom.setAttribute("aria-selected","true"),r=s):s.dom.hasAttribute("aria-selected")&&s.dom.removeAttribute("aria-selected"),n++}}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new gG(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:t,panel:e})=>{let n=e.height/this.list.offsetHeight;t.top<e.top?this.list.scrollTop-=(e.top-t.top)/n:t.bottom>e.bottom&&(this.list.scrollTop+=(t.bottom-e.bottom)/n)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let t=this.list.firstChild;function e(){let e=t;t=e.nextSibling,e.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)e();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=eG(this.view.state.field(oG).diagnostics,this.items[t].diagnostic);e&&this.view.dispatch({selection:{anchor:e.from,head:e.to},scrollIntoView:!0,effects:rG.of(e)})}static open(t){return new mG(t)}}function vG(t){return function(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const bG=CY.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:vG("#d11")},".cm-lintRange-warning":{backgroundImage:vG("orange")},".cm-lintRange-info":{backgroundImage:vG("#999")},".cm-lintRange-hint":{backgroundImage:vG("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function yG(t){return"error"==t?4:"warning"==t?3:"info"==t?2:1}function wG(t){let e="hint",n=1;for(let i of t){let t=yG(i.severity);t>n&&(n=t,e=i.severity)}return e}const OG=[oG,CY.decorations.compute([oG],(t=>{let{selected:e,panel:n}=t.field(oG);return e&&n&&e.from!=e.to?DX.set([sG.range(e.from,e.to)]):DX.none})),FY(aG,{hideOn:function(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(uG).hideOn(t,n,i);if(null!=r)return r;let o=t.startState.doc.lineAt(e.pos);return!(!t.effects.some((t=>t.is(nG)))&&!t.changes.touchesRange(o.from,Math.max(o.to,i)))}}),bG];var SG=function(t){void 0===t&&(t={});var{crosshairCursor:e=!1}=t,n=[];!1!==t.closeBracketsKeymap&&(n=n.concat(qP)),!1!==t.defaultKeymap&&(n=n.concat(aQ)),!1!==t.searchKeymap&&(n=n.concat(Sq)),!1!==t.historyKeymap&&(n=n.concat(uz)),!1!==t.foldKeymap&&(n=n.concat(Ey)),!1!==t.completionKeymap&&(n=n.concat(tT)),!1!==t.lintKeymap&&(n=n.concat(hG));var i=[];return!1!==t.lineNumbers&&i.push(function(t={}){return[EN.of(t),yN(),$N]}()),!1!==t.highlightActiveLineGutter&&i.push(BN),!1!==t.highlightSpecialChars&&i.push(function(t={}){return[iN.of(t),rN||(rN=xD.fromClass(class{constructor(t){this.view=t,this.decorations=M$.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(iN)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new UB({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,o=Qd(e[0],0);if(9==o){let t=r.lineAt(i),e=n.state.tabSize,o=sp(t.text,e,i-t.from);return M$.replace({widget:new sN((e-o%e)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=M$.replace({widget:new oN(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(iN);t.startState.facet(iN)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))]}()),!1!==t.history&&i.push(function(t={}){return[KI,XI.of(t),TI.domEventHandlers({beforeinput(t,e){let n="historyUndo"==t.inputType?YI:"historyRedo"==t.inputType?GI:null;return!!n&&(t.preventDefault(),n(e))}})]}()),!1!==t.foldGutter&&i.push(function(t={}){let e=Object.assign(Object.assign({},Ny),t),n=new Ly(e,!0),i=new Ly(e,!1),r=ym.fromClass(class{constructor(t){this.from=t.viewport.from,this.markers=this.buildMarkers(t)}update(t){(t.docChanged||t.viewportChanged||t.startState.facet(Ub)!=t.state.facet(Ub)||t.startState.field(xy,!1)!=t.state.field(xy,!1)||Vb(t.startState)!=Vb(t.state)||e.foldingChanged(t))&&(this.markers=this.buildMarkers(t.view))}buildMarkers(t){let e=new Zf;for(let r of t.viewportLineBlocks){let o=ky(t.state,r.from,r.to)?i:by(t.state,r.from,r.to)?n:null;o&&e.add(r.from,r.from,o)}return e.finish()}}),{domEventHandlers:o}=e;return[r,Mb({class:"cm-foldGutter",markers(t){var e;return(null===(e=t.plugin(r))||void 0===e?void 0:e.markers)||Kf.empty},initialSpacer(){return new Ly(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(t,e,n)=>{if(o.click&&o.click(t,e,n))return!0;let i=ky(t.state,e.from,e.to);if(i)return t.dispatch({effects:Oy.of(i)}),!0;let r=by(t.state,e.from,e.to);return!!r&&(t.dispatch({effects:wy.of(r)}),!0)}})}),$y()]}()),!1!==t.drawSelection&&i.push(function(t={}){return[QB.of(t),VB,FB,XB,pD.of(!0)]}()),!1!==t.dropCursor&&i.push([ZB,YB]),!1!==t.allowMultipleSelections&&i.push(Hf.allowMultipleSelections.of(!0)),!1!==t.indentOnInput&&i.push(Hf.transactionFilter.of((t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+200)return t;let o=n.sliceString(r.from,i);if(!e.some((t=>t.test(o))))return t;let{state:s}=t,a=-1,l=[];for(let{head:t}of s.selection.ranges){let e=s.doc.lineAt(t);if(e.from==a)continue;a=e.from;let n=ry(s,e.from);if(null==n)continue;let i=/^\s*/.exec(e.text)[0],r=iy(s,n);i!=r&&l.push({from:e.from,to:e.from+i.length,insert:r})}return l.length?[t,{changes:l,sequential:!0}]:t}))),!1!==t.syntaxHighlighting&&i.push(Hy(Fy,{fallback:!0})),!1!==t.bracketMatching&&i.push(function(t={}){return[Ky.of(t),Jy]}()),!1!==t.closeBrackets&&i.push([FP,zP]),!1!==t.autocompletion&&i.push(function(t={}){return[bP,hP,qE.of(t),mP,eT,yP]}()),!1!==t.rectangularSelection&&i.push(function(){let t=t=>t.altKey&&0==t.button;return OB.mouseSelectionStyle.of(((e,n)=>t(n)?function(t,e){let n=uN(t,e),i=t.state.selection;return n?{update(t){if(t.docChanged){let e=t.changes.mapPos(t.startState.doc.line(n.line).from),r=t.state.doc.lineAt(e);n={line:r.number,col:n.col,off:Math.min(n.off,r.length)},i=i.map(t.changes)}},get(e,r,o){let s=uN(t,e);if(!s)return i;let a=function(t,e,n){let i=Math.min(e.line,n.line),r=Math.max(e.line,n.line),o=[];if(e.off>hN||n.off>hN||e.col<0||n.col<0){let s=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let e=i;e<=r;e++){let n=t.doc.line(e);n.length<=a&&o.push(ef.range(n.from+s,n.to+a))}}else{let s=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let e=i;e<=r;e++){let n=t.doc.line(e),i=ap(n.text,s,t.tabSize,!0);if(i<0)o.push(ef.cursor(n.to));else{let e=ap(n.text,a,t.tabSize);o.push(ef.range(n.from+i,n.from+e))}}}return o}(t.state,n,s);return a.length?o?ef.create(a.concat(i.ranges)):ef.create(a):i}}:null}(e,n):null))}()),!1!==e&&i.push(function(t={}){let[e,n]=dN[t.key||"Alt"],i=xD.fromClass(class{constructor(t){this.view=t,this.isDown=!1}set(t){this.isDown!=t&&(this.isDown=t,this.view.update([]))}},{eventObservers:{keydown(t){this.set(t.keyCode==e||n(t))},keyup(t){t.keyCode!=e&&n(t)||this.set(!1)},mousemove(t){this.set(n(t))}}});return[i,OB.contentAttributes.of((t=>{var e;return(null===(e=t.plugin(i))||void 0===e?void 0:e.isDown)?fN:null}))]}()),!1!==t.highlightActiveLine&&i.push(lN),!1!==t.highlightSelectionMatches&&i.push(function(){let t=[XF,qF];return t}()),t.tabSize&&"number"==typeof t.tabSize&&i.push(ey.of(" ".repeat(t.tabSize))),i.concat([PB.of(n.flat())]).filter(Boolean)};function xG(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function kG(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function CG(t,e){if(!e.anchorNode)return!1;try{return kG(t,e.anchorNode)}catch(t){return!1}}function AG(t){return 3==t.nodeType?IG(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function MG(t,e,n,i){return!!n&&(TG(t,e,n,i,-1)||TG(t,e,n,i,1))}function EG(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function PG(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function TG(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:$G(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=EG(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(r<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=r<0?$G(t):0}}}function $G(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function DG(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function RG(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function BG(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}class NG{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?$G(e):0),n,Math.min(t.focusOffset,n?$G(n):0))}set(t,e,n,i){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=i}}let LG,jG=null;function _G(t){if(t.setActive)return t.setActive();if(jG)return t.focus(jG);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==jG?{get preventScroll(){return jG={preventScroll:!0},!0}}:void 0),!jG){jG=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}function IG(t,e,n=e){let i=LG||(LG=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function zG(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let o=new KeyboardEvent("keydown",r);o.synthetic=!0,t.dispatchEvent(o);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,t.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function QG(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function HG(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function VG(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i>0)return{node:n,offset:i};if(1==n.nodeType&&i>0){if("false"==n.contentEditable)return null;n=n.childNodes[i-1],i=$G(n)}else{if(!n.parentNode||PG(n))return null;i=EG(n),n=n.parentNode}}}function WG(t,e){for(let n=t,i=e;;){if(3==n.nodeType&&i<n.nodeValue.length)return{node:n,offset:i};if(1==n.nodeType&&i<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[i],i=0}else{if(!n.parentNode||PG(n))return null;i=EG(n)+1,n=n.parentNode}}}class FG{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new FG(t.parentNode,EG(t),e)}static after(t,e){return new FG(t.parentNode,EG(t)+1,e)}}const qG=[];class XG{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,i=this.dom,r=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=r?r.nextSibling:i.firstChild)){let t=XG.get(n);(!t||!t.parent&&t.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(t,e),o.flags&=-8}if(n=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&n!=o.dom&&(e.written=!0),o.dom.parentNode==i)for(;n&&n!=o.dom;)n=KG(n);else i.insertBefore(o.dom,n);r=o.dom}for(n=r?r.nextSibling:i.firstChild,n&&e&&e.node==i&&(e.written=!0);n;)n=KG(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=-8)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let i=0==$G(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==i&&e.firstChild!=e.lastChild&&(i=t==e.firstChild?-1:1),t=e}n=i<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!XG.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let i=this.children[t];if(i.dom==n)return e;e+=i.length+i.breakAfter}}domBoundsAround(t,e,n=0){let i=-1,r=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],h=l+n.length;if(l<t&&h>e)return n.domBoundsAround(t,e,l);if(h>=t&&-1==i&&(i=a,r=l),l>e&&n.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+n.breakAfter}return{from:r,to:s<0?n+this.length:s,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=qG){this.markDirty();for(let i=t;i<e;i++){let t=this.children[i];t.parent==this&&n.indexOf(t)<0&&t.destroy()}n.length<250?this.children.splice(t,e-t,...n):this.children=[].concat(this.children.slice(0,t),n,this.children.slice(e));for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new ZG(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,i,r,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function KG(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}XG.prototype.breakAfter=0;class ZG{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function YG(t,e,n,i,r,o,s,a,l){let{children:c}=t,h=c.length?c[e]:null,u=o.length?o[o.length-1]:null,d=u?u.breakAfter:s;if(!(e==i&&h&&!s&&!d&&o.length<2&&h.merge(n,r,o.length?u:null,0==n,a,l))){if(i<c.length){let t=c[i];t&&(r<t.length||t.breakAfter&&(null==u?void 0:u.breakAfter))?(e==i&&(t=t.split(r),r=0),!d&&u&&t.merge(0,r,u,!0,0,l)?o[o.length-1]=t:((r||t.children.length&&!t.children[0].length)&&t.merge(0,r,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(u?u.breakAfter=1:s=1),i++}for(h&&(h.breakAfter=s,n>0&&(!s&&o.length&&h.merge(n,h.length,o[0],!1,a,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,a,0),e++));e<i&&o.length;)if(c[i-1].become(o[o.length-1]))i--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||o.length)&&t.replaceChildren(e,i,o)}}function GG(t,e,n,i,r,o){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:h}=s.findPos(e,-1),u=e-n;for(let t of i)u+=t.length;t.length+=u,YG(t,c,h,a,l,i,0,r,o)}let UG="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},JG="undefined"!=typeof document?document:{documentElement:{style:{}}};const tU=/Edge\/(\d+)/.exec(UG.userAgent),eU=/MSIE \d/.test(UG.userAgent),nU=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(UG.userAgent),iU=!!(eU||nU||tU),rU=!iU&&/gecko\/(\d+)/i.test(UG.userAgent),oU=!iU&&/Chrome\/(\d+)/.exec(UG.userAgent),sU="webkitFontSmoothing"in JG.documentElement.style,aU=!iU&&/Apple Computer/.test(UG.vendor),lU=aU&&(/Mobile\/\w+/.test(UG.userAgent)||UG.maxTouchPoints>2);var cU={mac:lU||/Mac/.test(UG.platform),windows:/Win/.test(UG.platform),linux:/Linux|X11/.test(UG.platform),ie:iU,ie_version:eU?JG.documentMode||6:nU?+nU[1]:tU?+tU[1]:0,gecko:rU,gecko_version:rU?+(/Firefox\/(\d+)/.exec(UG.userAgent)||[0,0])[1]:0,chrome:!!oU,chrome_version:oU?+oU[1]:0,ios:lU,android:/Android\b/.test(UG.userAgent),webkit:sU,safari:aU,webkit_version:sU?+(/\bAppleWebKit\/(\d+)/.exec(UG.userAgent)||[0,0])[1]:0,tabSize:null!=JG.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class hU extends XG{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof hU)||this.length-(e-t)+n.length>256||8&n.flags)||(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),0))}split(t){let e=new hU(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new FG(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,o=e,s=0;0==e&&n<0||e==i&&n>=0?cU.chrome||cU.gecko||(e?(r--,s=1):o<i&&(o++,s=-1)):n<0?r--:o<i&&o++;let a=IG(t,r,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return cU.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l),s?DG(l,s<0):l||null}(this.dom,t,e)}}class uU extends XG{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(QG(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=6)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof uU&&n.mark.eq(this.mark))||t&&r<=0||e<this.length&&o<=0)||(GG(this,t,e,n?n.children.slice():[],r-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,i=-1,r=0;for(let o of this.children){let s=n+o.length;s>t&&e.push(n<t?o.split(t-n):o),i<0&&n>=t&&(i=r),n=s,r++}let o=this.length-t;return this.length=t,i>-1&&(this.children.length=i,this.markDirty()),new uU(this.mark,e,o)}domAtPos(t){return pU(this,t)}coordsAt(t,e){return mU(this,t,e)}}class dU extends XG{static create(t,e,n){return new dU(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=dU.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof dU&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t instanceof dU&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return Td.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Td.empty}domAtPos(t){return(this.length?0==t:this.side>0)?FG.before(this.dom):FG.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:t>0;for(let e=o?i.length-1:0;r=i[e],!(t>0?0==e:e==i.length-1||r.top<r.bottom);e+=o?-1:1);return DG(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class fU extends XG{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof fU&&t.side==this.side}split(){return new fU(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?FG.before(this.dom):FG.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Td.empty}get isHidden(){return!0}}function pU(t,e){let n=t.dom,{children:i}=t,r=0;for(let t=0;r<i.length;r++){let o=i[r],s=t+o.length;if(!(s==t&&o.getSide()<=0)){if(e>t&&e<s&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=r;t>0;t--){let e=i[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=r;t<i.length;t++){let e=i[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new FG(n,0)}function gU(t,e,n){let i,{children:r}=t;n>0&&e instanceof uU&&r.length&&(i=r[r.length-1])instanceof uU&&i.mark.eq(e.mark)?gU(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function mU(t,e,n){let i=null,r=-1,o=null,s=-1;!function t(e,a){for(let l=0,c=0;l<e.children.length&&c<=a;l++){let h=e.children[l],u=c+h.length;u>=a&&(h.children.length?t(h,a-c):(!o||o.isHidden&&(n>0||vU(o,h)))&&(u>a||c==u&&h.getSide()>0)?(o=h,s=a-c):(c<a||c==u&&h.getSide()<0&&!h.isHidden)&&(i=h,r=a-c)),c=u}}(t,e);let a=(n<0?i:o)||i||o;return a?a.coordsAt(Math.max(0,a==i?r:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=AG(e);return n[n.length-1]||null}(t)}function vU(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function bU(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}hU.prototype.children=dU.prototype.children=fU.prototype.children=qG;const yU=Object.create(null);function wU(t,e,n){if(t==e)return!0;t||(t=yU),e||(e=yU);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let o of i)if(o!=n&&(-1==r.indexOf(o)||t[o]!==e[o]))return!1;return!0}function OU(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,"style"==r?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,"style"==r?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function SU(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class xU{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var kU=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(kU||(kU={}));class CU extends Wf{constructor(t,e,n,i){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(t){return new AU(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new EU(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,i=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:r,end:o}=PU(t,i);e=(r?i?-3e8:-1:5e8)-1,n=1+(o?i?2e8:1:-6e8)}return new EU(t,e,n,i,t.widget||null,!0)}static line(t){return new MU(t)}static set(t,e=!1){return Kf.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}CU.none=Kf.empty;class AU extends CU{constructor(t){let{start:e,end:n}=PU(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof AU&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&wU(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}AU.prototype.point=!1;class MU extends CU{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof MU&&this.spec.class==t.spec.class&&wU(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}MU.prototype.mapMode=Fd.TrackBefore,MU.prototype.point=!0;class EU extends CU{constructor(t,e,n,i,r,o){super(e,n,r,t),this.block=i,this.isReplace=o,this.mapMode=i?e<=0?Fd.TrackBefore:Fd.TrackAfter:Fd.TrackDel}get type(){return this.startSide!=this.endSide?kU.WidgetRange:this.startSide<=0?kU.WidgetBefore:kU.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof EU&&((e=this.widget)==(n=t.widget)||!!(e&&n&&e.compare(n)))&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide;var e,n}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function PU(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return null==n&&(n=t.inclusive),null==i&&(i=t.inclusive),{start:null!=n?n:e,end:null!=i?i:e}}function TU(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}EU.prototype.point=!0;class $U extends XG{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,i,r,o){if(n){if(!(n instanceof $U))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),GG(this,t,e,n?n.children.slice():[],r,o),!0}split(t){let e=new $U;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:i}=this.childPos(t);i&&(e.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){wU(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){gU(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=bU(e,this.attrs||{})),n&&(this.attrs=bU({class:n},this.attrs||{}))}domAtPos(t){return pU(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=6)}sync(t,e){var n;this.dom?4&this.flags&&(QG(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(OU(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let i=this.dom.lastChild;for(;i&&XG.get(i)instanceof uU;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(n=XG.get(i))||void 0===n?void 0:n.isEditable)||cU.ios&&this.children.some((t=>t instanceof hU))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof hU)||/[^ -~]/.test(n.text))return null;let i=AG(n.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=mU(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let i=(e-t.textHeight)/2;return{top:n.top+i,bottom:n.bottom-i,left:n.left,right:n.left}}}return n}become(t){return t instanceof $U&&0==this.children.length&&0==t.children.length&&wU(this.attrs,t.attrs)&&this.breakAfter==t.breakAfter}covers(){return!0}static find(t,e){for(let n=0,i=0;n<t.children.length;n++){let r=t.children[n],o=i+r.length;if(o>=e){if(r instanceof $U)return r;if(o>e)break}i=o+r.breakAfter}return null}}class DU extends XG{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,i,r,o){return!(n&&(!(n instanceof DU&&this.widget.compare(n.widget))||t>0&&r<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?FG.before(this.dom):FG.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new DU(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return qG}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Td.empty}domBoundsAround(){return null}become(t){return t instanceof DU&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)||(this.widget instanceof RU?null:DG(this.dom.getBoundingClientRect(),this.length?0==t:e<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class RU extends xU{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class BU{constructor(t,e,n,i){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof DU&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new $U),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(NU(new fU(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof DU||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:i}=this.cursor.next(this.skip);if(this.skip=0,i)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let i=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(NU(new hU(this.text.slice(this.textOff,this.textOff+i)),e),n),this.atCursorPos=!0,this.textOff+=i,t-=i,n=0}}span(t,e,n,i){this.buildText(e-t,n,i),this.pos=e,this.openStart<0&&(this.openStart=i)}point(t,e,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof EU){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof EU)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new DU(n.widget||LU.block,s,n));else{let o=dU.create(n.widget||LU.inline,s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&r<=i.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||r>i.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(i),a&&(c.append(NU(new fU(1),i),r),r=i.length+Math.max(0,r-i.length)),c.append(NU(o,i),r),this.atCursorPos=l,this.pendingBuffer=l?t<e||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=r)}static build(t,e,n,i,r){let o=new BU(t,e,n,r);return o.openEnd=Kf.spans(i,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function NU(t,e){for(let n of e)t=new uU(n,[t],t.length);return t}class LU extends xU{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}LU.inline=new LU("span"),LU.block=new LU("div");var jU=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(jU||(jU={}));const _U=jU.LTR,IU=jU.RTL;function zU(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const QU=zU("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),HU=zU("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),VU=Object.create(null),WU=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);VU[e]=n,VU[n]=-e}function FU(t){return t<=247?QU[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?HU[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const qU=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class XU{get dir(){return this.level%2?IU:_U}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}forward(t,e){return t==(this.dir==e)}static find(t,e,n,i){let r=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(r<0||(0!=i?i<0?s.from<e:s.to>e:t[r].level>s.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function KU(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!KU(i.inner,r.inner))return!1}return!0}const ZU=[];function YU(t,e,n,i,r,o,s){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let e=!0,h=!1;if(c==o.length||l<o[c].from){let t=ZU[l];t!=a&&(e=!1,h=16==t)}let u=e||1!=a?null:[],d=e?i:i+1,f=l;t:for(;;)if(c<o.length&&f==o[c].from){if(h)break t;let p=o[c];if(!e)for(let t=p.to,e=c+1;;){if(t==n)break t;if(!(e<o.length&&o[e].from==t)){if(ZU[t]==a)break t;break}t=o[e++].to}c++,u?u.push(p):(p.from>l&&s.push(new XU(l,p.from,d)),GU(t,p.direction==_U!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.to),f=p.to}else{if(f==n||(e?ZU[f]!=a:ZU[f]==a))break;f++}u?YU(t,l,f,i+1,r,u,s):l<f&&s.push(new XU(l,f,d)),l=f}else for(let l=n,c=o.length;l>e;){let n=!0,h=!1;if(!c||l>o[c-1].to){let t=ZU[l-1];t!=a&&(n=!1,h=16==t)}let u=n||1!=a?null:[],d=n?i:i+1,f=l;t:for(;;)if(c&&f==o[c-1].to){if(h)break t;let p=o[--c];if(!n)for(let t=p.from,n=c;;){if(t==e)break t;if(!n||o[n-1].to!=t){if(ZU[t-1]==a)break t;break}t=o[--n].from}u?u.push(p):(p.to<l&&s.push(new XU(p.to,l,d)),GU(t,p.direction==_U!=!(d%2)?i+1:i,r,p.inner,p.from,p.to,s),l=p.from),f=p.from}else{if(f==e||(n?ZU[f-1]!=a:ZU[f-1]==a))break;f--}u?YU(t,f,l,i+1,r,u,s):f<l&&s.push(new XU(f,l,d)),l=f}}function GU(t,e,n,i,r,o,s){let a=e%2?2:1;!function(t,e,n,i,r){for(let o=0;o<=i.length;o++){let s=o?i[o-1].to:e,a=o<i.length?i[o].from:n,l=o?256:r;for(let e=s,n=l,i=l;e<a;e++){let r=FU(t.charCodeAt(e));512==r?r=n:8==r&&4==i&&(r=16),ZU[e]=4==r?2:r,7&r&&(i=r),n=r}for(let t=s,e=l,i=l;t<a;t++){let r=ZU[t];if(128==r)t<a-1&&e==ZU[t+1]&&24&e?r=ZU[t]=e:ZU[t]=256;else if(64==r){let r=t+1;for(;r<a&&64==ZU[r];)r++;let o=t&&8==e||r<n&&8==ZU[r]?1==i?1:8:256;for(let e=t;e<r;e++)ZU[e]=o;t=r-1}else 8==r&&1==i&&(ZU[t]=1);e=r,7&r&&(i=r)}}}(t,r,o,i,a),function(t,e,n,i,r){let o=1==r?2:1;for(let s=0,a=0,l=0;s<=i.length;s++){let c=s?i[s-1].to:e,h=s<i.length?i[s].from:n;for(let e,n,i,s=c;s<h;s++)if(n=VU[e=t.charCodeAt(s)])if(n<0){for(let t=a-3;t>=0;t-=3)if(WU[t+1]==-n){let e=WU[t+2],n=2&e?r:4&e?1&e?o:r:0;n&&(ZU[s]=ZU[WU[t]]=n),a=t;break}}else{if(189==WU.length)break;WU[a++]=s,WU[a++]=e,WU[a++]=l}else if(2==(i=ZU[s])||1==i){let t=i==r;l=t?0:1;for(let e=a-3;e>=0;e-=3){let n=WU[e+2];if(2&n)break;if(t)WU[e+2]|=2;else{if(4&n)break;WU[e+2]|=4}}}}}(t,r,o,i,a),function(t,e,n,i){for(let r=0,o=i;r<=n.length;r++){let s=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=s;l<a;){let s=ZU[l];if(256==s){let s=l+1;for(;;)if(s==a){if(r==n.length)break;s=n[r++].to,a=r<n.length?n[r].from:e}else{if(256!=ZU[s])break;s++}let c=1==o,h=c==(1==(s<e?ZU[s]:i))?c?1:2:i;for(let e=s,i=r,o=i?n[i-1].to:t;e>l;)e==o&&(e=n[--i].from,o=i?n[i-1].to:t),ZU[--e]=h;l=s}else o=s,l++}}}(r,o,i,a),YU(t,r,o,e,n,i,s)}function UU(t){return[new XU(0,t,0)]}let JU="";function tJ(t,e,n,i,r){var o;let s=i.head-t.from,a=XU.find(e,s,null!==(o=i.bidiLevel)&&void 0!==o?o:-1,i.assoc),l=e[a],c=l.side(r,n);if(s==c){let t=a+=r?1:-1;if(t<0||t>=e.length)return null;l=e[a=t],s=l.side(!r,n),c=l.side(r,n)}let h=zd(t.text,s,l.forward(r,n));(h<l.from||h>l.to)&&(h=c),JU=t.text.slice(Math.min(s,h),Math.max(s,h));let u=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return u&&h==c&&u.level+(r?0:1)<l.level?ef.cursor(u.side(!r,n)+t.from,u.forward(r,n)?1:-1,u.level):ef.cursor(h+t.from,l.forward(r,n)?-1:1,l.level)}function eJ(t,e,n){for(let i=e;i<n;i++){let e=FU(t.charCodeAt(i));if(1==e)return _U;if(2==e||4==e)return IU}return _U}const nJ=of.define(),iJ=of.define(),rJ=of.define(),oJ=of.define(),sJ=of.define(),aJ=of.define(),lJ=of.define(),cJ=of.define(),hJ=of.define(),uJ=of.define({combine:t=>t.some((t=>t))}),dJ=of.define({combine:t=>t.some((t=>t))}),fJ=of.define();class pJ{constructor(t,e="nearest",n="nearest",i=5,r=5,o=!1){this.range=t,this.y=e,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(t){return t.empty?this:new pJ(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new pJ(ef.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const gJ=$f.define({map:(t,e)=>t.map(e)}),mJ=$f.define();function vJ(t,e,n){let i=t.facet(oJ);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const bJ=of.define({combine:t=>!t.length||t[0]});let yJ=0;const wJ=of.define();class OJ{constructor(t,e,n,i,r){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=i,this.extension=r(this)}static define(t,e){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=e||{};return new OJ(yJ++,t,n,i,(t=>{let e=[wJ.of(t)];return o&&e.push(CJ.of((e=>{let n=e.plugin(t);return n?o(n):CU.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return OJ.define((e=>new t(e)),e)}}class SJ{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(vJ(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){vJ(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){vJ(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const xJ=of.define(),kJ=of.define(),CJ=of.define(),AJ=of.define(),MJ=of.define(),EJ=of.define();function PJ(t,e){let n=t.state.facet(EJ);if(!n.length)return n;let i=n.map((e=>e instanceof Function?e(t):e)),r=[];return Kf.spans(i,e.from,e.to,{point(){},span(t,n,i,o){let s=t-e.from,a=n-e.from,l=r;for(let t=i.length-1;t>=0;t--,o--){let n,r=i[t].spec.bidiIsolate;if(null==r&&(r=eJ(e.text,s,a)),o>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==r)n.to=a,l=n.inner;else{let t={from:s,to:a,direction:r,inner:[]};l.push(t),l=t.inner}}}}),r}const TJ=of.define();function $J(t){let e=0,n=0,i=0,r=0;for(let o of t.state.facet(TJ)){let s=o(t);s&&(null!=s.left&&(e=Math.max(e,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(i=Math.max(i,s.top)),null!=s.bottom&&(r=Math.max(r,s.bottom)))}return{left:e,right:n,top:i,bottom:r}}const DJ=of.define();class RJ{constructor(t,e,n,i){this.fromA=t,this.toA=e,this.fromB=n,this.toB=i}join(t){return new RJ(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let i=t[e-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let i=0,r=0,o=0,s=0;;i++){let a=i==t.length?null:t[i],l=o-s,c=a?a.fromB:1e9;for(;r<e.length&&e[r]<c;){let t=e[r],i=e[r+1],o=Math.max(s,t),a=Math.min(c,i);if(o<=a&&new RJ(o+l,a+l,o,a).addToSet(n),i>c)break;r+=2}if(!a)return n;new RJ(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class BJ{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Xd.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let i=[];this.changes.iterChangedRanges(((t,e,n,r)=>i.push(new RJ(t,e,n,r)))),this.changedRanges=i}static create(t,e,n){return new BJ(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class NJ extends XG{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=CU.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new $U],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new RJ(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?i=this.domChanged.newSel.head:function(t,e){let n=!1;return e&&t.iterChangedRanges(((t,i)=>{t<e.to&&i>e.from&&(n=!0)})),n}(t.changes,this.hasComposition)||t.selectionSet||(i=t.state.selection.main.head));let r=i>-1?function(t,e,n){let i=LJ(t,n);if(!i)return null;let{node:r,from:o,to:s}=i,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new RJ(l.mapPos(o),l.mapPos(s),o,s),h=[];for(let e=r.parentNode;;e=e.parentNode){let n=XG.get(e);if(n instanceof uU)h.push({node:e,deco:n.mark});else{if(n instanceof $U||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:r,marks:h,line:e};if(e==t.contentDOM)return null;h.push({node:e,deco:new AU({inclusive:!0,attributes:SU(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:i}=this.hasComposition;n=new RJ(e,i,t.changes.mapPos(e,-1),t.changes.mapPos(i,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(cU.ie||cU.chrome)&&!r&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let o=function(t,e,n){let i=new jJ;return Kf.compare(t,e,n,i),i.changes}(this.decorations,this.updateDeco(),t.changes);return n=RJ.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,r),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=cU.chrome||cU.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=-8,t&&(t.written||i.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof DU&&t.widget instanceof RU&&r.push(t.dom);i.updateGaps(r)}updateChildren(t,e,n){let i=n?n.range.addToSet(t.slice()):t,r=this.childCursor(e);for(let t=i.length-1;;t--){let e=t>=0?i[t]:null;if(!e)break;let o,s,a,l,{fromA:c,toA:h,fromB:u,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>u){let t=BU.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=BU.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);s=t.breakAtStart,a=t.openStart,l=e.openEnd;let i=this.compositionView(n);e.breakAtStart?i.breakAfter=1:e.content.length&&i.merge(i.length,i.length,e.content[0],!1,e.openStart,0)&&(i.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&i.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),o=t.content.concat(i).concat(e.content)}else({content:o,breakAtStart:s,openStart:a,openEnd:l}=BU.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=r.findPos(h,1),{i:g,off:m}=r.findPos(c,-1);YG(this,g,m,f,p,o,s,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let e of t.transactions)for(let t of e.effects)t.is(mJ)&&(this.editContextFormatting=t.value)}compositionView(t){let e=new hU(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new uU(n,[e],e.length);let n=new $U;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=XG.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),i=this.children[n.i];e(t.line,i);for(let r=t.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],e(r>=0?t.marks[r].node:t.text,i)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet(bJ)||this.dom.tabIndex>-1)&&CG(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||e||r))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(cU.gecko&&s.empty&&!this.hasComposition&&1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(t,a.node.childNodes[a.offset]||null))),a=l=new FG(t,0),o=!0}var c;let h=this.view.observer.selectionRange;!o&&h.focusNode&&(MG(a.node,a.offset,h.anchorNode,h.anchorOffset)&&MG(l.node,l.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,s))||(this.view.observer.ignore((()=>{cU.android&&cU.chrome&&this.dom.contains(h.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=xG(this.view.root);if(t)if(s.empty){if(cU.gecko){let t=(e=a.node,i=a.offset,1!=e.nodeType?0:(i&&"false"==e.childNodes[i-1].contentEditable?1:0)|(i<e.childNodes.length&&"false"==e.childNodes[i].contentEditable?2:0));if(t&&3!=t){let e=(1==t?VG:WG)(a.node,a.offset);e&&(a=new FG(e.node,e.offset))}}t.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(a.node,a.offset);try{t.extend(l.node,l.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),e.setEnd(l.node,l.offset),e.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(e)}var e,i;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new FG(h.anchorNode,h.anchorOffset),this.impreciseHead=l.precise?null:new FG(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(t,e){return this.hasComposition&&e.empty&&MG(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==e.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=xG(t.root),{anchorNode:i,anchorOffset:r}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=$U.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let h=t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=e.from&&n.collapse(i,r)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let i=t.offset;!e&&i<n.childNodes.length;i++){let t=XG.get(n.childNodes[i]);t instanceof $U&&(e=t.domAtPos(0))}for(let i=t.offset-1;!e&&i>=0;i--){let t=XG.get(n.childNodes[i]);t instanceof $U&&(e=t.domAtPos(t.length))}return e?new FG(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=XG.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof $U)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=r-s.breakAfter,l=a-s.length;if(a<t)break;if(l<=t&&(l<t||s.covers(-1))&&(a>t||s.covers(1))&&(!n||s instanceof $U&&!(n instanceof $U&&e>=0)))n=s,i=l;else if(n&&l==t&&a==t&&s instanceof DU&&Math.abs(e)<2){if(s.deco.startSide<0)break;o&&(n=null)}r=l}return n?n.coordsAt(t-i,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),i=this.children[e];if(!(i instanceof $U))return null;for(;i.children.length;){let{i:t,off:e}=i.childPos(n,1);for(;;t++){if(t==i.children.length)return null;if((i=i.children[t]).length)break}n=e}if(!(i instanceof hU))return null;let r=zd(i.text,n);if(r==n)return null;let o=IG(i.dom,n,r).getClientRects();for(let t=0;t<o.length;t++){let e=o[t];if(t==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:i}=t,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==jU.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],h=t+c.length;if(h>i)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),o){let e=c.dom.lastChild,i=e?AG(e):[];if(i.length){let e=i[i.length-1],o=a?e.right-n.left:n.right-e.left;o>s&&(s=o,this.minWidth=r,this.minWidthFrom=t,this.minWidthTo=h)}}}t=h+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?jU.RTL:jU.LTR}measureTextSize(){for(let t of this.children)if(t instanceof $U){let e=t.measureTextSize();if(e)return e}let t,e,n,i=document.createElement("div");return i.className="cm-line",i.style.width="99999px",i.style.position="absolute",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=AG(i.firstChild)[0];t=i.getBoundingClientRect().height,e=r?r.width/27:7,n=r?r.height:t,i.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new ZG(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,i=0;;i++){let r=i==e.viewports.length?null:e.viewports[i],o=r?r.from-1:this.length;if(o>n){let i=(e.lineBlockAt(o).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(CU.replace({widget:new RU(i),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return CU.set(t)}updateDeco(){let t=1,e=this.view.state.facet(CJ).map((e=>(this.dynamicDecorationMap[t++]="function"==typeof e)?e(this.view):e)),n=!1,i=this.view.state.facet(AJ).map(((t,e)=>{let i="function"==typeof t;return i&&(n=!0),i?t(this.view):t}));for(i.length&&(this.dynamicDecorationMap[t++]=n,e.push(Kf.join(i))),this.decorations=[this.editContextFormatting,...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;return this.decorations}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}for(let e of this.view.state.facet(fJ))try{if(e(this.view,t.range,t))return!0}catch(t){vJ(this.view.state,t,"scroll handler")}let e,{range:n}=t,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!i)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,e.left),top:Math.min(i.top,e.top),right:Math.max(i.right,e.right),bottom:Math.max(i.bottom,e.bottom)});let r=$J(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(t,e,n,i,r,o,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let h=t,u=!1;h&&!u;)if(1==h.nodeType){let t,d=h==l.body,f=1,p=1;if(d)t=RG(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(u=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let e=h.getBoundingClientRect();({scaleX:f,scaleY:p}=BG(h,e)),t={left:e.left,right:e.left+h.clientWidth*f,top:e.top,bottom:e.top+h.clientHeight*p}}let g=0,m=0;if("nearest"==r)e.top<t.top?(m=e.top-(t.top+s),n>0&&e.bottom>t.bottom+m&&(m=e.bottom-t.bottom+s)):e.bottom>t.bottom&&(m=e.bottom-t.bottom+s,n<0&&e.top-m<t.top&&(m=e.top-(t.top+s)));else{let i=e.bottom-e.top,o=t.bottom-t.top;m=("center"==r&&i<=o?e.top+i/2-o/2:"start"==r||"center"==r&&n<0?e.top-s:e.bottom-o+s)-t.top}if("nearest"==i?e.left<t.left?(g=e.left-(t.left+o),n>0&&e.right>t.right+g&&(g=e.right-t.right+o)):e.right>t.right&&(g=e.right-t.right+o,n<0&&e.left<t.left+g&&(g=e.left-(t.left+o))):g=("center"==i?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==i==a?e.left-o:e.right-(t.right-t.left)+o)-t.left,g||m)if(d)c.scrollBy(g,m);else{let t=0,n=0;if(m){let t=h.scrollTop;h.scrollTop+=m/p,n=(h.scrollTop-t)*p}if(g){let e=h.scrollLeft;h.scrollLeft+=g/f,t=(h.scrollLeft-e)*f}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(i="nearest"),n&&Math.abs(n-m)<1&&(r="nearest")}if(d)break;(e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)&&(e={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)}),h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,s),-s),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==jU.LTR)}}function LJ(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=VG(n.focusNode,n.focusOffset),r=WG(n.focusNode,n.focusOffset),o=i||r;if(r&&i&&r.node!=i.node){let e=XG.get(r.node);if(!e||e instanceof hU&&e.text!=r.node.nodeValue)o=r;else if(t.docView.lastCompositionAfterCursor){let t=XG.get(i.node);!t||t instanceof hU&&t.text!=i.node.nodeValue||(o=r)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let s=e-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let jJ=class{constructor(){this.changes=[]}compareRange(t,e){TU(t,e,this.changes)}comparePoint(t,e){TU(t,e,this.changes)}boundChange(t){TU(t,t,this.changes)}};function _J(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function IJ(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function zJ(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function QJ(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function HJ(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function VJ(t,e,n){let i,r,o,s,a,l,c,h,u=!1;for(let d=t.firstChild;d;d=d.nextSibling){let t=AG(d);for(let f=0;f<t.length;f++){let p=t[f];r&&zJ(r,p)&&(p=QJ(HJ(p,r.bottom),r.top));let g=_J(e,p),m=IJ(n,p);if(0==g&&0==m)return 3==d.nodeType?WJ(d,e,n):VJ(d,e,n);if(!i||s>m||s==m&&o>g){i=d,r=p,o=g,s=m;let a=m?n<p.top?-1:1:g?e<p.left?-1:1:0;u=!a||(a>0?f<t.length-1:f>0)}0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=d,c=p):n<p.top&&(!h||h.top>p.top)&&(l=d,h=p):c&&zJ(c,p)?c=HJ(c,p.bottom):h&&zJ(h,p)&&(h=QJ(h,p.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=l,r=h),!i)return{node:t,offset:0};let d=Math.max(r.left,Math.min(r.right,e));return 3==i.nodeType?WJ(i,d,n):u&&"false"!=i.contentEditable?VJ(i,d,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0)}}function WJ(t,e,n){let i=t.nodeValue.length,r=-1,o=1e9,s=0;for(let a=0;a<i;a++){let i=IG(t,a,a+1).getClientRects();for(let l=0;l<i.length;l++){let c=i[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<o){let n=e>=(c.left+c.right)/2,i=n;if((cU.chrome||cU.gecko)&&IG(t,a).getBoundingClientRect().left==c.right&&(i=!n),h<=0)return{node:t,offset:a+(i?1:0)};r=a+(i?1:0),o=h}}}return{node:t,offset:r>-1?r:s>0?t.nodeValue.length:0}}function FJ(t,e,n,i=-1){var r,o;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:h,y:u}=e,d=u-l;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,r=!1;s=t.elementAtHeight(d),s.type!=kU.Text;)for(;d=i>0?s.bottom+e:s.top-e,!(d>=0&&d<=c);){if(r)return n?null:0;r=!0,i=-i}u=l+d;let f=s.from;if(f<t.viewport.from)return 0==t.viewport.from?0:n?null:qJ(t,a,s,h,u);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:qJ(t,a,s,h,u);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,m=g.elementFromPoint(h,u);m&&!t.contentDOM.contains(m)&&(m=null),m||(h=Math.max(a.left+1,Math.min(a.right-1,h)),m=g.elementFromPoint(h,u),m&&!t.contentDOM.contains(m)&&(m=null));let v,b=-1;if(m&&0!=(null===(r=t.docView.nearest(m))||void 0===r?void 0:r.isEditable)){if(p.caretPositionFromPoint){let t=p.caretPositionFromPoint(h,u);t&&({offsetNode:v,offset:b}=t)}else if(p.caretRangeFromPoint){let e=p.caretRangeFromPoint(h,u);e&&(({startContainer:v,startOffset:b}=e),(!t.contentDOM.contains(v)||cU.safari&&function(t,e,n){let i;if(3!=t.nodeType||e!=(i=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return IG(t,i-1,i).getBoundingClientRect().left>n}(v,b,h)||cU.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():IG(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(v,b,h))&&(v=void 0))}v&&(b=Math.min($G(v),b))}if(!v||!t.docView.dom.contains(v)){let e=$U.find(t.docView,f);if(!e)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:b}=VJ(e.dom,h,u))}let y=t.docView.nearest(v);if(!y)return null;if(y.isWidget&&1==(null===(o=y.dom)||void 0===o?void 0:o.nodeType)){let t=y.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?y.posAtStart:y.posAtEnd}return y.localPosFromDOM(v,b)+y.posAtStart}function qJ(t,e,n,i,r){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;o+=Math.floor((r-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+ap(s,o,t.state.tabSize)}function XJ(t,e,n,i){let r=t.state.doc.lineAt(e.head),o=t.bidiSpans(r),s=t.textDirectionAt(r.from);for(let a=e,l=null;;){let e=tJ(r,o,s,a,n),c=JU;if(!e){if(r.number==(n?t.state.doc.lines:1))return a;c="\n",r=t.state.doc.line(r.number+(n?1:-1)),o=t.bidiSpans(r),e=t.visualLineSide(r,!n)}if(l){if(!l(c))return a}else{if(!i)return e;l=i(c)}a=e}}function KJ(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,((t,r,o)=>{if(e>t&&e<r){let o=i||n||(e-t<r-e?-1:1);e=o<0?t:r,i=o}}));if(!i)return e}}function ZJ(t,e,n){let i=KJ(t.state.facet(MJ).map((e=>e(t))),n.from,e.head>n.from?-1:1);return i==n.from?n:ef.cursor(i,i<n.from?1:-1)}const YJ="￿";class GJ{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Hf.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=YJ}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let i=t;;){this.findPointBefore(n,i);let t=this.text.length;this.readNode(i);let r=i.nextSibling;if(r==e)break;let o=XG.get(i),s=XG.get(r);(o&&s?o.breakAfter:(o?o.breakAfter:PG(i))||PG(r)&&("BR"!=i.nodeName||i.cmIgnore)&&this.text.length>t)&&this.lineBreak(),i=r}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(r=i.exec(e))&&(o=r.index,s=r[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=XG.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(UJ(t,n.node,n.offset)?e:0))}}function UJ(t,e,n){for(;;){if(!e||n<$G(e))return!1;if(e==t)return!0;n=EG(e)+1,e=e.parentNode}}class JJ{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class t0{constructor(t,e,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=e>-1;let{impreciseHead:r,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=r||o?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new JJ(n,i)),r==n&&o==i||e.push(new JJ(r,o))),e}(t),n=new GJ(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,i=2==t.length?t[1].pos:n;return n>-1&&i>-1?ef.single(n+e,i+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=r&&r.node==e.focusNode&&r.offset==e.focusOffset||!kG(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),i=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!kG(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset),s=t.viewport;if((cU.ios||cU.chrome)&&t.state.selection.main.empty&&n!=i&&(s.from>0||s.to<t.state.doc.length)){let e=Math.min(n,i),r=Math.max(n,i),o=s.from-e,a=s.to-r;0!=o&&1!=o&&0!=e||0!=a&&-1!=a&&r!=t.state.doc.length||(n=0,i=t.state.doc.length)}this.newSel=ef.single(i,n)}}}function e0(t,e){let n,{newSel:i}=e,r=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:i,to:s}=e.bounds,a=r.from,l=null;(8===o||cU.android&&e.text.length<s-i)&&(a=r.to,l="end");let c=function(t,e,n,i){let r=Math.min(t.length,e.length),o=0;for(;o<r&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==r&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;return"end"==i&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(t.state.doc.sliceString(i,s,YJ),e.text,a-i,l);c&&(cU.chrome&&13==o&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==YJ+YJ&&c.toB--,n={from:i+c.from,to:i+c.toA,insert:Td.of(e.text.slice(c.from,c.toB).split(YJ))})}else i&&(!t.hasFocus&&t.state.facet(bJ)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(cU.mac||cU.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(i&&2==n.insert.length&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Td.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:cU.chrome&&n&&n.from==n.to&&n.from==r.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(i&&(i=ef.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Td.of([" "])}),n)return n0(t,n,i,o);if(i&&!i.main.eq(r)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:e,userEvent:n}),!0}return!1}function n0(t,e,n,i=-1){if(cU.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(cU.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&" "==t.state.sliceDoc(e.from,r.from))&&1==e.insert.length&&2==e.insert.lines&&zG(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&0==e.insert.length||8==i&&e.insert.length<e.to-e.from&&e.to>r.head)&&zG(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&0==e.insert.length&&zG(t.contentDOM,"Delete",46)))return!0;let o,s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a=()=>o||(o=function(t,e,n){let i,r=t.state,o=r.selection.main;if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=o.from<e.from?r.sliceDoc(o.from,e.from):"",s=o.to>e.to?r.sliceDoc(e.to,o.to):"";i=r.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=r.changes(e),a=n&&n.main.to<=s.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=o.to&&e.to>=o.to-10){let l,c=t.state.sliceDoc(e.from,e.to),h=n&&LJ(t,n.main.head);if(h){let t=e.insert.length-(e.to-e.from);l={from:h.from,to:h.to-t}}else l=t.state.doc.lineAt(o.head);let u=o.to-e.to,d=o.to-o.from;i=r.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let i=n.to-u,h=i-c.length;if(n.to-n.from!=d||t.state.sliceDoc(h,i)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=r.changes({from:h,to:i,insert:e.insert}),p=n.to-o.to;return{changes:f,range:a?ef.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else i={changes:s,selection:a&&r.selection.replaceRange(a)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:s,scrollIntoView:!0})}(t,e,n));return t.state.facet(aJ).some((n=>n(t,e.from,e.to,s,a)))||t.dispatch(a()),!0}class i0{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,cU.safari&&t.contentDOM.addEventListener("input",(()=>null)),cU.gecko&&function(t){P0.has(t)||(P0.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,i=e.target;i!=t.contentDOM;i=i.parentNode)if(!i||11==i.nodeType||(n=XG.get(i))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||(0!=this.view.updateState?Promise.resolve().then((()=>this.runHandlers(t.type,t))):this.runHandlers(t.type,t)))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=function(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let i in t.domEventHandlers){let r=t.domEventHandlers[i];r&&n(i).handlers.push(r0(e.value,r))}if(t&&t.domEventObservers)for(let i in t.domEventObservers){let r=t.domEventObservers[i];r&&n(i).observers.push(r0(e.value,r))}}for(let t in h0)n(t).handlers.push(h0[t]);for(let t in u0)n(t).observers.push(u0[t]);return e}(t),n=this.handlers,i=this.view.contentDOM;for(let t in e)if("scroll"!=t){let r=!e[t].handlers.length,o=n[t];o&&r!=!o.handlers.length&&(i.removeEventListener(t,this.handleEvent),o=null),o||i.addEventListener(t,this.handleEvent,{passive:r})}for(let t in n)"scroll"==t||e[t]||i.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=t.keyCode&&a0.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),cU.android&&cU.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!cU.ios||t.synthetic||t.altKey||t.metaKey||!((e=o0.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||s0.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&!("Enter"==e.key&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString()))&&(this.pendingIOSKey=void 0,zG(this.view.contentDOM,e.key,e.keyCode,e instanceof KeyboardEvent?e:void 0))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(cU.safari&&!cU.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function r0(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(t){vJ(n.state,t)}}}const o0=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],s0="dthko",a0=[16,17,18,20,91,92,224,225];function l0(t){return.7*Math.max(0,t)+8}class c0{constructor(t,e,n,i){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParents=function(t){let e,n,i=t.ownerDocument;for(let r=t.parentNode;r&&!(r==i.body||e&&n);)if(1==r.nodeType)!n&&r.scrollHeight>r.clientHeight&&(n=r),!e&&r.scrollWidth>r.clientWidth&&(e=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:e,y:n}}(t.contentDOM),this.atoms=t.state.facet(MJ).map((e=>e(t)));let r=t.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Hf.allowMultipleSelections)&&function(t,e){let n=t.state.facet(nJ);return n.length?n[0](e):cU.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=xG(t.root);if(!i||0==i.rangeCount)return!0;let r=i.getRangeAt(0).getClientRects();for(let t=0;t<r.length;t++){let n=r[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=x0(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(e=this.startEvent,n=t,Math.max(Math.abs(e.clientX-n.clientX),Math.abs(e.clientY-n.clientY))<10))return;var e,n;this.select(this.lastEvent=t);let i=0,r=0,o=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:o,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=$J(this.view);t.clientX-c.left<=o+6?i=-l0(o-t.clientX):t.clientX+c.right>=a-6&&(i=l0(t.clientX-a)),t.clientY-c.top<=s+6?r=-l0(s-t.clientY):t.clientY+c.bottom>=l-6&&(r=l0(t.clientY-l)),this.setScrollSpeed(i,r)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:e}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),e&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=e,e=0),(t||e)&&this.view.win.scrollBy(t,e),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let i=t.ranges[n],r=null;if(i.empty){let t=KJ(this.atoms,i.from,0);t!=i.from&&(r=ef.cursor(t,-1))}else{let t=KJ(this.atoms,i.from,-1),e=KJ(this.atoms,i.to,1);t==i.from&&e==i.to||(r=ef.range(i.from==i.anchor?t:e,i.from==i.head?t:e))}r&&(e||(e=t.ranges.slice()),e[n]=r)}return e?ef.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));!this.mustSelect&&n.eq(e.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some((t=>t.isUserEvent("input.type")))?this.destroy():this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const h0=Object.create(null),u0=Object.create(null),d0=cU.ie&&cU.ie_version<15||cU.ios&&cU.webkit_version<604;function f0(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function p0(t,e){e=f0(t.state,cJ,e);let n,{state:i}=t,r=1,o=i.toText(e),s=o.lines==i.selection.ranges.length;if(null!=C0&&i.selection.ranges.every((t=>t.empty))&&C0==o.toString()){let t=-1;n=i.changeByRange((n=>{let a=i.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=i.toText((s?o.line(r++).text:e)+i.lineBreak);return{changes:{from:a.from,insert:l},range:ef.cursor(n.from+l.length)}}))}else n=s?i.changeByRange((t=>{let e=o.line(r++);return{changes:{from:t.from,to:t.to,insert:e.text},range:ef.cursor(t.from+e.length)}})):i.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function g0(t,e,n,i){if(1==i)return ef.cursor(e,n);if(2==i)return function(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),o=e-r.from;if(0==r.length)return ef.cursor(e);0==o?n=1:o==r.length&&(n=-1);let s=o,a=o;n<0?s=zd(r.text,o,!1):a=zd(r.text,o);let l=i(r.text.slice(s,a));for(;s>0;){let t=zd(r.text,s,!1);if(i(r.text.slice(t,s))!=l)break;s=t}for(;a<r.length;){let t=zd(r.text,a);if(i(r.text.slice(a,t))!=l)break;a=t}return ef.range(s+r.from,a+r.from)}(t.state,e,n);{let n=$U.find(t.docView,e),i=t.state.doc.lineAt(n?n.posAtEnd:e),r=n?n.posAtStart:i.from,o=n?n.posAtEnd:i.to;return o<t.state.doc.length&&o==i.to&&o++,ef.range(r,o)}}u0.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},h0.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&0!=t.inputState.tabFocusMode&&(t.inputState.tabFocusMode=Date.now()+2e3),!1),u0.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},u0.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},h0.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(rJ))if(n=i(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=b0(t,e),i=x0(e),r=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),r=r.map(t.changes))},get(e,o,s){let a,l=b0(t,e),c=g0(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let e=g0(t,n.pos,n.bias,i),r=Math.min(e.from,c.from),o=Math.max(e.to,c.to);c=r<c.from?ef.range(r,o):ef.range(o,r)}return o?r.replaceRange(r.main.extend(c.from,c.to)):s&&1==i&&r.ranges.length>1&&(a=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return ef.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(r,l.pos))?a:s?r.addRange(c):ef.create([c])}}}(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new c0(t,e,n,i)),i&&t.observer.ignore((()=>{_G(t.contentDOM);let e=t.root.activeElement;e&&!e.contains(t.contentDOM)&&e.blur()}));let r=t.inputState.mouseSelection;if(r)return r.start(e),!1===r.dragging}return!1};let m0=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function v0(t,e,n,i){let r=$U.find(t.docView,e);if(!r)return 1;let o=e-r.posAtStart;if(0==o)return 1;if(o==r.length)return-1;let s=r.coordsAt(o,-1);if(s&&m0(n,i,s))return-1;let a=r.coordsAt(o,1);return a&&m0(n,i,a)?1:s&&s.bottom>=i?-1:1}function b0(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:v0(t,n,e.clientX,e.clientY)}}const y0=cU.ie&&cU.ie_version<=11;let w0=null,O0=0,S0=0;function x0(t){if(!y0)return t.detail;let e=w0,n=S0;return w0=t,S0=Date.now(),O0=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(O0+1)%3:1}function k0(t,e,n,i){if(!(n=f0(t.state,cJ,n)))return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,s=i&&o&&function(t,e){let n=t.state.facet(iJ);return n.length?n[0](e):cU.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:o.from,to:o.to}:null,a={from:r,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}h0.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let t=i.posAtStart,e=t+i.length;(t>=n.to||e<=n.from)&&(n=ef.range(t,e))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",f0(t.state,hJ,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1},h0.dragend=t=>(t.inputState.draggedContent=null,!1),h0.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,o=()=>{++r==n.length&&k0(t,e,i.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(i[t]=e.result),o()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return k0(t,e,n,!0),!0}return!1},h0.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=d0?null:e.clipboardData;return n?(p0(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),p0(t,n.value)}),50)}(t),!1)};let C0=null;h0.copy=h0.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=function(t){let e=[],n=[],i=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let r=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:f0(t,hJ,e.join(t.lineBreak)),ranges:n,linewise:i}}(t.state);if(!n&&!r)return!1;C0=r?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let o=d0?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout((()=>{i.remove(),t.focus()}),50)}(t,n),!1)};const A0=Ef.define();function M0(t,e){let n=[];for(let i of t.facet(lJ)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:A0.of(!0)}):null}function E0(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=M0(t.state,e);n?t.dispatch(n):t.update([])}}),10)}u0.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),E0(t)},u0.blur=t=>{t.observer.clearSelectionRange(),E0(t)},u0.compositionstart=u0.compositionupdate=t=>{t.observer.editContext||(null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))},u0.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,cU.chrome&&cU.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50))},u0.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},h0.beforeinput=(t,e)=>{var n,i;if("insertReplacementText"==e.inputType&&t.observer.editContext){let i=null===(n=e.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),r=e.getTargetRanges();if(i&&r.length){let e=r[0],n=t.posAtDOM(e.startContainer,e.startOffset),o=t.posAtDOM(e.endContainer,e.endOffset);return n0(t,{from:n,to:o,insert:t.state.toText(i)},null),!0}}let r;if(cU.chrome&&cU.android&&(r=o0.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return cU.ios&&"deleteContentForward"==e.inputType&&t.observer.flushSoon(),cU.safari&&"insertText"==e.inputType&&t.inputState.composing>=0&&setTimeout((()=>u0.compositionend(t,e)),20),!1};const P0=new Set,T0=["pre-wrap","normal","pre-line","break-spaces"];let $0=!1;function D0(){$0=!1}class R0{constructor(t){this.lineWrapping=t,this.doc=Td.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return T0.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let i=t[n];i<0?n++:this.heightSamples[Math.floor(10*i)]||(e=!0,this.heightSamples[Math.floor(10*i)]=!0)}return e}refresh(t,e,n,i,r,o){let s=T0.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.textHeight=i,this.lineLength=r,a){this.heightSamples={};for(let t=0;t<o.length;t++){let e=o[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return a}}class B0{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class N0{constructor(t,e,n,i,r){this.from=t,this.length=e,this.top=n,this.height=i,this._content=r}get type(){return"number"==typeof this._content?kU.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof EU?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new N0(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var L0=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(L0||(L0={}));const j0=.001;class _0{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>j0&&($0=!0),this.height=t)}replace(t,e,n){return _0.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,i){let r=this,o=n.doc;for(let s=i.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:h}=i[s],u=r.lineAt(a,L0.ByPosNoHeight,n.setDoc(e),0,0),d=u.to>=l?u:r.lineAt(l,L0.ByPosNoHeight,n,0,0);for(h+=d.to-l,l=d.to;s>0&&u.from<=i[s-1].toA;)a=i[s-1].fromA,c=i[s-1].fromB,s--,a<u.from&&(u=r.lineAt(a,L0.ByPosNoHeight,n,0,0));c+=u.from-a,a=u.from;let f=F0.build(n.setDoc(o),t,c,h);r=I0(r,r.replace(a,l,f))}return r.updateHeight(n,0)}static empty(){return new Q0(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,i=0,r=0;for(;;)if(e==n)if(i>2*r){let r=t[e-1];r.break?t.splice(--e,1,r.left,null,r.right):t.splice(--e,1,r.left,r.right),n+=1+r.break,i-=r.size}else{if(!(r>2*i))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,r-=e.size}}else if(i<r){let n=t[e++];n&&(i+=n.size)}else{let e=t[--n];e&&(r+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new V0(_0.of(t.slice(0,e)),o,_0.of(t.slice(n)))}}function I0(t,e){return t==e?t:(t.constructor!=e.constructor&&($0=!0),e)}_0.prototype.size=1;class z0 extends _0{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,i){return new N0(i,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(t,e,n,i,r,o){t<=r+this.length&&e>=r&&o(this.blockAt(0,n,i,r))}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Q0 extends z0{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,i){return new N0(i,this.length,n,this.height,this.breaks)}replace(t,e,n){let i=n[0];return 1==n.length&&(i instanceof Q0||i instanceof H0&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof H0?i=new Q0(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):_0.of(n)}updateHeight(t,e=0,n=!1,i){return i&&i.from<=e&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class H0 extends _0{constructor(t){super(t,0)}heightMetrics(t,e){let n,i=t.doc.lineAt(e).number,r=t.doc.lineAt(e+this.length).number,o=r-i+1,s=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*o);n=e/o,this.length>o+1&&(s=(this.height-e)/(this.length-o-1))}else n=this.height/o;return{firstLine:i,lastLine:r,perLine:n,perChar:s}}blockAt(t,e,n,i){let{firstLine:r,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(e,i);if(e.lineWrapping){let r=i+(t<e.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length)),o=e.doc.lineAt(r),l=s+o.length*a,c=Math.max(n,t-l/2);return new N0(o.from,o.length,c,l,0)}{let i=Math.max(0,Math.min(o-r,Math.floor((t-n)/s))),{from:a,length:l}=e.doc.line(r+i);return new N0(a,l,n+s*i,s,0)}}lineAt(t,e,n,i,r){if(e==L0.ByHeight)return this.blockAt(t,n,i,r);if(e==L0.ByPosNoHeight){let{from:e,to:i}=n.doc.lineAt(t);return new N0(e,i-e,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,r),l=n.doc.lineAt(t),c=s+l.length*a,h=l.number-o,u=i+s*h+a*(l.from-r-h);return new N0(l.from,l.length,Math.max(i,Math.min(u,i+this.height-c)),c,0)}forEachLine(t,e,n,i,r,o){t=Math.max(t,r),e=Math.min(e,r+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,r);for(let c=t,h=i;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-s;h+=a*n+l*(t-r-n)}let i=a+l*e.length;o(new N0(e.from,e.length,h,i,0)),h+=i,c=e.to+1}}replace(t,e,n){let i=this.length-e;if(i>0){let t=n[n.length-1];t instanceof H0?n[n.length-1]=new H0(t.length+i):n.push(null,new H0(i-1))}if(t>0){let e=n[0];e instanceof H0?n[0]=new H0(t+e.length):n.unshift(new H0(t-1),null)}return _0.of(n)}decomposeLeft(t,e){e.push(new H0(t-1),null)}decomposeRight(t,e){e.push(null,new H0(this.length-t-1))}updateHeight(t,e=0,n=!1,i){let r=e+this.length;if(i&&i.from<=e+this.length&&i.more){let n=[],o=Math.max(e,i.from),s=-1;for(i.from>e&&n.push(new H0(i.from-e-1).updateHeight(t,e));o<=r&&i.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let r=i.heights[i.index++];-1==s?s=r:Math.abs(r-s)>=j0&&(s=-2);let a=new Q0(e,r);a.outdated=!1,n.push(a),o+=e+1}o<=r&&n.push(null,new H0(r-o).updateHeight(t,o));let a=_0.of(n);return(s<0||Math.abs(a.height-this.height)>=j0||Math.abs(s-this.heightMetrics(t,e).perLine)>=j0)&&($0=!0),I0(this,a)}return(n||this.outdated)&&(this.setHeight(t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class V0 extends _0{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,i){let r=n+this.left.height;return t<r?this.left.blockAt(t,e,n,i):this.right.blockAt(t,e,r,i+this.left.length+this.break)}lineAt(t,e,n,i,r){let o=i+this.left.height,s=r+this.left.length+this.break,a=e==L0.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,i,r):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==L0.ByPosNoHeight?L0.ByPosNoHeight:L0.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,i,r).join(l)}forEachLine(t,e,n,i,r,o){let s=i+this.left.height,a=r+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,i,r,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{let l=this.lineAt(a,L0.ByPos,n,i,r);t<l.from&&this.left.forEachLine(t,l.from-1,n,i,r,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}}replace(t,e,n){let i=this.left.length+this.break;if(e<i)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-i,e-i,n));let r=[];t>0&&this.decomposeLeft(t,r);let o=r.length;for(let t of n)r.push(t);if(t>0&&W0(r,o-1),e<this.length){let t=r.length;this.decomposeRight(e,r),W0(r,t)}return _0.of(r)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,i=n+this.break;if(t>=i)return this.right.decomposeRight(t-i,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<i&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?_0.of(this.break?[t,null,e]:[t,e]):(this.left=I0(this.left,t),this.right=I0(this.right,e),this.setHeight(t.height+e.height),this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,i){let{left:r,right:o}=this,s=e+r.length+this.break,a=null;return i&&i.from<=e+r.length&&i.more?a=r=r.updateHeight(t,e,n,i):r.updateHeight(t,e,n),i&&i.from<=s+o.length&&i.more?a=o=o.updateHeight(t,s,n,i):o.updateHeight(t,s,n),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function W0(t,e){let n,i;null==t[e]&&(n=t[e-1])instanceof H0&&(i=t[e+1])instanceof H0&&t.splice(e-1,3,new H0(n.length+1+i.length))}class F0{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Q0?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new Q0(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=e-t;n.block?this.addBlock(new z0(o,i,n)):(o||r||i>=5)&&this.addLineDeco(i,r,o)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Q0(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new H0(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Q0)return t;let e=new Q0(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,t),i.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof Q0||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Q0(0,-1));let n=t;for(let t of this.nodes)t instanceof Q0&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,i){let r=new F0(n,t);return Kf.spans(e,n,i,r,0),r.finish(n)}}class q0{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,i){(t<e||n&&n.heightRelevant||i&&i.heightRelevant)&&TU(t,e,this.changes,5)}}function X0(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,o=Math.max(0,n.left),s=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=i.body;)if(1==e.nodeType){let n=e,i=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=i.overflow){let i=n.getBoundingClientRect();o=Math.max(o,i.left),s=Math.min(s,i.right),a=Math.max(a,i.top),l=Math.min(e==t.parentNode?r.innerHeight:l,i.bottom)}e="absolute"==i.position||"fixed"==i.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function K0(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Z0{constructor(t,e,n,i){this.from=t,this.to=e,this.size=n,this.displaySize=i}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(t,e){return CU.replace({widget:new Y0(this.displaySize*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class Y0 extends xU{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class G0{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=e1,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=jU.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(kJ).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new R0(e),this.stateDeco=t.facet(CJ).filter((t=>"function"!=typeof t)),this.heightMap=_0.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle.setDoc(t.doc),[new RJ(0,0,0,t.doc.length)]);for(let t=0;t<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());t++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=CU.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let i=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>i>=t&&i<=e))){let{from:e,to:n}=this.lineBlockAt(i);t.push(new U0(e,n))}}return this.viewports=t.sort(((t,e)=>t.from-e.from)),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?e1:new n1(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(i1(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(CJ).filter((t=>"function"!=typeof t));let i=t.changedRanges,r=RJ.extendWithRanges(i,function(t,e,n){let i=new q0;return Kf.compare(t,e,n,i,0),i.changes}(n,this.stateDeco,t?t.changes:Xd.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);D0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||$0)&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,t.flags|=this.updateForViewport(),(l||!t.changes.empty||2&t.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(dJ)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?jU.RTL:jU.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),s=e.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:t,scaleY:n}=BG(e,s);(t>.005&&Math.abs(this.scaleX-t)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=t,this.scaleY=n,l|=16,o=a=!0)}let h=(parseInt(n.paddingTop)||0)*this.scaleY,u=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==u||(this.paddingTop=h,this.paddingBottom=u,l|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=16);let d=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=HG(t.scrollDOM);let f=(this.printing?K0:X0)(e,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!function(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}(t.dom))return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=t.scrollDOM.clientHeight,l|=16),a){let e=t.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(e)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=t.docView.measureTextSize();o=n>0&&i.refresh(r,n,s,a,v/s,e),o&&(t.docView.minWidth=0,l|=16)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),D0();for(let n of this.viewports){let r=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(o?_0.empty().applyChanges(this.stateDeco,Td.empty,this.heightOracle,[new RJ(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new B0(n.from,r))}$0&&(l|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new U0(i.lineAt(o-1e3*n,L0.ByHeight,r,0,0).from,i.lineAt(s+1e3*(1-n),L0.ByHeight,r,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=i.lineAt(t,L0.ByPos,r,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-o,a=new U0(i.lineAt(n-500,L0.ByHeight,r,0,0).from,i.lineAt(n+o+500,L0.ByHeight,r,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),i=e.mapPos(t.to,1);return new U0(this.heightMap.lineAt(n,L0.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,L0.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,L0.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(e,L0.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||i<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||r>=s+Math.max(10,Math.min(n,250)))&&i>o-2e3&&r<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let i of t)e.touchesRange(i.from,i.to)||n.push(new Z0(e.mapPos(i.from),e.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=jU.LTR&&!n)return[];let s=[],a=(i,o,l,c)=>{if(o-i<r)return;let h=this.state.selection.main,u=[h.from];h.empty||u.push(h.to);for(let t of u)if(t>i&&t<o)return a(i,t-10,l,c),void a(t+10,o,l,c);let d=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-i)<r&&Math.abs(t.to-o)<r&&!u.some((e=>t.from<e&&t.to>e))));if(!d){if(o<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=o&&t.to>=o))){let t=e.moveToLineBoundary(ef.cursor(o),!1,!0).head;t>i&&(o=t)}let t=this.gapSize(l,i,o,c);d=new Z0(i,o,t,n||t<2e6?t:2e6)}s.push(d)},l=e=>{if(e.length<o||e.type!=kU.Text)return;let r=function(t,e,n){let i=[],r=t,o=0;return Kf.spans(n,t,e,{span(){},point(t,e){t>r&&(i.push({from:r,to:t}),o+=t-r),r=e}},20),r<e&&(i.push({from:r,to:e}),o+=e-r),{total:o,ranges:i}}(e.from,e.to,this.stateDeco);if(r.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let t,n,o=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let i=t1(r,c),s=((this.visibleBottom-this.visibleTop)/2+o)/e.height;t=i-s,n=i+s}else t=(this.visibleTop-e.top-o)/e.height,n=(this.visibleBottom-e.top+o)/e.height;s=J0(r,t),l=J0(r,n)}else{let n=r.total*this.heightOracle.charWidth,o=i*this.heightOracle.charWidth,a=0;if(n>2e6)for(let n of t)n.from>=e.from&&n.from<e.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let h,u,d=this.pixelViewport.left+a,f=this.pixelViewport.right+a;if(null!=c){let t=t1(r,c),e=((f-d)/2+o)/n;h=t-e,u=t+e}else h=(d-o)/n,u=(f+o)/n;s=J0(r,h),l=J0(r,u)}s>e.from&&a(e.from,s,e,r),l<e.to&&a(l,e.to,e,r)};for(let t of this.viewportLines)Array.isArray(t.type)?t.type.forEach(l):l(t);return s}gapSize(t,e,n,i){let r=t1(i,n)-t1(i,e);return this.heightOracle.lineWrapping?t.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(t){Z0.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=CU.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(t){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];Kf.spans(e,this.viewport.from,this.viewport.to,{span(t,e){n.push({from:t,to:e})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let e=0;e<n.length&&!(8&i);e++){let r=this.visibleRanges[e],o=n[e];r.from==o.from&&r.to==o.to||(i|=4,t&&t.mapPos(r.from,-1)==o.from&&t.mapPos(r.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||i1(this.heightMap.lineAt(t,L0.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((e=>e.top<=t&&e.bottom>=t))||i1(this.heightMap.lineAt(this.scaler.fromDOM(t),L0.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return i1(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class U0{constructor(t,e){this.from=t,this.to=e}}function J0({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:r}=e[t],o=r-n;if(i<=o)return n+i;i-=o}}function t1(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}const e1={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class n1{constructor(t,e,n){let i=0,r=0,o=0;this.viewports=n.map((({from:n,to:r})=>{let o=e.lineAt(n,L0.ByPos,t,0,0).top,s=e.lineAt(r,L0.ByPos,t,0,0).bottom;return i+=s-o,{from:n,to:r,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(e.height-i);for(let t of this.viewports)t.domTop=o+(t.top-r)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),r=t.bottom}toDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.top)return i+(t-n)*this.scale;if(t<=r.bottom)return r.domTop+(t-r.top);n=r.bottom,i=r.domBottom}}fromDOM(t){for(let e=0,n=0,i=0;;e++){let r=e<this.viewports.length?this.viewports[e]:null;if(!r||t<r.domTop)return n+(t-i)/this.scale;if(t<=r.domBottom)return r.top+(t-r.domTop);n=r.bottom,i=r.domBottom}}eq(t){return t instanceof n1&&this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every(((e,n)=>e.from==t.viewports[n].from&&e.to==t.viewports[n].to))}}function i1(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new N0(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map((t=>i1(t,e))):t._content)}const r1=of.define({combine:t=>t.join(" ")}),o1=of.define({combine:t=>t.indexOf(!0)>-1}),s1=up.newName(),a1=up.newName(),l1=up.newName(),c1={"&light":"."+a1,"&dark":"."+l1};function h1(t,e,n){return new up(e,{finish(e){return/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e}})}const u1=h1("."+s1,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},c1),d1={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},f1=cU.ie&&cU.ie_version<=11;class p1{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new NG,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(cU.ie&&cU.ie_version<=11||cU.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===t.constructor.EDIT_CONTEXT||cU.chrome&&cU.chrome_version<126||(this.editContext=new v1(t),t.state.facet(bJ)&&(t.contentDOM.editContext=this.editContext.editContext)),f1&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(t){("change"!=t.type&&t.type||t.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(bJ)?n.root.activeElement!=this.dom:!CG(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);r&&r.ignoreEvent(t)?e||(this.selectionChanged=!1):(cU.ie&&cU.ie_version<=11||cU.android&&cU.chrome)&&!n.state.selection.main.empty&&i.focusNode&&MG(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=xG(t.root);if(!e)return!1;let n=cU.safari&&11==t.root.nodeType&&t.root.activeElement==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return m1(t,n)}let n=null;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?m1(t,n):null}(this.view,e)||e;if(!n||this.selectionRange.eq(n))return!1;let i=CG(this.dom,n);return i&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,$G(n));;)if(i){if(1!=n.nodeType)return!1;let t=n.childNodes[i-1];"false"==t.contentEditable?i--:(n=t,i=$G(n))}else{if(n==t)return!0;i=EG(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,d1),f1&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),f1&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&zG(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,i=!1;for(let r of t){let t=this.readMutation(r);t&&(t.typeOver&&(i=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:i}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),i=this.selectionChanged&&CG(this.dom,this.selectionRange);if(t<0&&!i)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new t0(this.view,t,e,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,i=e0(this.view,e);return this.view.state==n&&(e.domChanged||e.newSel&&!e.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=g1(e,t.previousSibling||t.target.previousSibling,-1),i=g1(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:i?e.posBefore(i):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(bJ)!=t.state.facet(bJ)&&(t.view.contentDOM.editContext=t.state.facet(bJ)?this.editContext.editContext:null))}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function g1(t,e,n){for(;e;){let i=XG.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function m1(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=t.docView.domAtPos(t.state.selection.main.anchor);return MG(s.node,s.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}class v1{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let e=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=e=>{let n=t.state.selection.main,{anchor:i,head:r}=n,o=this.toEditorPos(e.updateRangeStart),s=this.toEditorPos(e.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:e.updateRangeStart,editorBase:o,drifted:!1});let a={from:o,to:s,insert:Td.of(e.text.split("\n"))};if(a.from==this.from&&i<this.from?a.from=i:a.to==this.to&&i>this.to&&(a.to=i),a.from!=a.to||a.insert.length){if((cU.mac||cU.android)&&a.from==r-1&&/^\. ?$/.test(e.text)&&"off"==t.contentDOM.getAttribute("autocorrect")&&(a={from:o,to:s,insert:Td.of([e.text.replace("."," ")])}),this.pendingContextChange=a,!t.state.readOnly){let n=this.to-this.from+(a.to-a.from+a.insert.length);n0(t,a,ef.single(this.toEditorPos(e.selectionStart,n),this.toEditorPos(e.selectionEnd,n)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state))}else{let i=ef.single(this.toEditorPos(e.selectionStart),this.toEditorPos(e.selectionEnd));i.main.eq(n)||t.dispatch({selection:i,userEvent:"select"})}},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let e=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);e<o;e++){let n=t.coordsForChar(e);r=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||r||new DOMRect,i.push(r)}e.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=e=>{let n=[];for(let t of e.getTextFormats()){let e=t.underlineStyle,i=t.underlineThickness;if("None"!=e&&"None"!=i){let r=this.toEditorPos(t.rangeStart),o=this.toEditorPos(t.rangeEnd);if(r<o){let t=`text-decoration: underline ${"Dashed"==e?"dashed ":"Squiggle"==e?"wavy ":""}${"Thin"==i?1:2}px`;n.push(CU.mark({attributes:{style:t}}).range(r,o))}}}t.dispatch({effects:mJ.of(CU.set(n))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:e}=this.composing;this.composing=null,e&&this.reset(t.state)}};for(let t in this.handlers)e.addEventListener(t,this.handlers[t]);this.measureReq={read:t=>{this.editContext.updateControlBounds(t.contentDOM.getBoundingClientRect());let e=xG(t.root);e&&e.rangeCount&&this.editContext.updateSelectionBounds(e.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let e=0,n=!1,i=this.pendingContextChange;return t.changes.iterChanges(((r,o,s,a,l)=>{if(n)return;let c=l.length-(o-r);if(i&&o>=i.to){if(i.from==r&&i.to==o&&i.insert.eq(l))return i=this.pendingContextChange=null,e+=c,void(this.to+=c);i=null,this.revertPending(t.state)}if(r+=e,(o+=e)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),l.toString()),this.to+=c}e+=c})),i&&!n&&this.revertPending(t.state),!n}update(t){let e=this.pendingContextChange,n=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(n.from,n.to)&&t.transactions.some((t=>!t.isUserEvent("input.type")&&t.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):this.applyEdits(t)&&this.rangeIsValid(t.state)?(t.docChanged||t.selectionSet||e)&&this.setSelection(t.state):(this.pendingContextChange=null,this.reset(t.state)),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:e}=t.selection.main;this.from=Math.max(0,e-1e4),this.to=Math.min(t.doc.length,e+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let e=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(e.from),this.toContextPos(e.from+e.insert.length),t.doc.sliceString(e.from,e.to))}setSelection(t){let{main:e}=t.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,e.anchor))),i=this.toContextPos(e.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==i||this.editContext.updateSelection(n,i)}rangeIsValid(t){let{head:e}=t.selection.main;return!(this.from>0&&e-this.from<500||this.to<t.doc.length&&this.to-e<500||this.to-this.from>3e4)}toEditorPos(t,e=this.to-this.from){t=Math.min(t,e);let n=this.composing;return n&&n.drifted?n.editorBase+(t-n.contextBase):t+this.from}toContextPos(t){let e=this.composing;return e&&e.drifted?e.contextBase+(t-e.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class b1{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var e;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:n}=t;this.dispatchTransactions=t.dispatchTransactions||n&&(t=>t.forEach((t=>n(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new G0(t.state||Hf.create(t)),t.scrollTo&&t.scrollTo.is(gJ)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(wJ).map((t=>new SJ(t)));for(let t of this.plugins)t.update(this);this.observer=new p1(this),this.inputState=new i0(this),this.inputState.ensureHandlers(this.plugins),this.docView=new NJ(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(e=document.fonts)||void 0===e?void 0:e.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...t){let e=1==t.length&&t[0]instanceof Df?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,i=!1,r=this.state;for(let e of t){if(e.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=e.state}if(this.destroyed)return void(this.viewState.state=r);let o=this.hasFocus,s=0,a=null;t.some((t=>t.annotation(A0)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=M0(r,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(Hf.phrases)!=this.state.facet(Hf.phrases))return this.setState(r);e=BJ.create(this,r,t),e.flags|=s;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(h&&(h=h.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;h=new pJ(t.empty?t:ef.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(gJ)&&(h=t.value.clip(this.state))}this.viewState.update(e,h),this.bidiCache=O1.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(DJ)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(r1)!=e.state.facet(r1)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!e.empty)for(let t of this.state.facet(sJ))try{t(e)}catch(t){vJ(this.state,t,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!e0(this,c)&&l.force&&zG(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new G0(t),this.plugins=t.facet(wJ).map((t=>new SJ(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new NJ(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(wJ),n=t.state.facet(wJ);if(e!=n){let i=[];for(let r of n){let n=e.indexOf(r);if(n<0)i.push(new SJ(r));else{let e=this.plugins[n];e.mustUpdate=t,i.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let e=t.value;if(e&&e.docViewUpdate)try{e.docViewUpdate(this)}catch(t){vJ(this.state,t,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(o<0)if(HG(n))r=-1,o=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(i);r=t.from,o=t.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((t=>{try{return t.read(this)}catch(t){return vJ(this.state,t),w1}})),c=BJ.create(this,this.state,[]),h=!1;c.flags|=s,e?e.flags|=s:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let t=0;t<a.length;t++)if(l[t]!=w1)try{let e=a[t];e.write&&e.write(l[t],this)}catch(t){vJ(this.state,t)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let t=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(t>1||t<-1){i+=t,n.scrollTop=i/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(sJ))t(e)}get themeClasses(){return s1+" "+(this.state.facet(o1)?l1:a1)+" "+this.state.facet(r1)}updateAttrs(){let t=S1(this,xJ,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(bJ)?"true":"false",class:"cm-content",style:`${cU.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),S1(this,kJ,e);let n=this.observer.ignore((()=>{let n=OU(this.contentDOM,this.contentAttrs,e),i=OU(this.dom,this.editorAttrs,t);return n||i}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(b1.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(DJ);let t=this.state.facet(b1.cspNonce);up.mount(this.root,this.styleModules.concat(u1).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return ZJ(this,t,XJ(this,t,e,n))}moveByGroup(t,e){return ZJ(this,t,XJ(this,t,e,(e=>function(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return t=>{let e=i(t);return r==If.Space&&(r=e),r==e}}(this,t.head,e))))}visualLineSide(t,e){let n=this.bidiSpans(t),i=this.textDirectionAt(t.from),r=n[e?n.length-1:0];return ef.cursor(r.side(e,i)+t.from,r.forward(!e,i)?1:-1)}moveToLineBoundary(t,e,n=!0){return function(t,e,n,i){let r=function(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let t;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;t&&(r.type!=kU.Text||t.type==r.type&&!(n<0?r.from<e:r.to>e))||(t=r)}}return t||i}return i}(t,e.head,e.assoc||-1),o=i&&r.type==kU.Text&&(t.lineWrapping||r.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),i=t.textDirectionAt(r.from),s=t.posAtCoords({x:n==(i==jU.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return ef.cursor(s,n?-1:1)}return ef.cursor(n?r.to:r.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return ZJ(this,t,function(t,e,n,i){let r=e.head,o=n?1:-1;if(r==(n?t.state.doc.length:0))return ef.cursor(r,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),h=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-e.from))),s=(o<0?e.top:e.bottom)+h}let u=l.left+a,d=null!=i?i:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(d+e)*o,i=FJ(t,{x:u,y:n},!1,o);if(n<l.top||n>l.bottom||(o<0?i<r:i>r)){let e=t.docView.coordsForChar(i),r=!e||n<e.top?-1:1;return ef.cursor(i,r,void 0,a)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),FJ(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(t),r=this.bidiSpans(i);return DG(n,r[XU.find(r,t-i.from,-1,e)].dir==jU.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(uJ)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>y1)return UU(t.length);let e,n=this.textDirectionAt(t.from);for(let i of this.bidiCache)if(i.from==t.from&&i.dir==n&&(i.fresh||KU(i.isolates,e=PJ(this,t))))return i.order;e||(e=PJ(this,t));let i=function(t,e,n){if(!t)return[new XU(0,0,e==IU?1:0)];if(e==_U&&!n.length&&!qU.test(t))return UU(t.length);if(n.length)for(;t.length>ZU.length;)ZU[ZU.length]=256;let i=[],r=e==_U?0:1;return GU(t,r,r,n,0,t.length,i),i}(t.text,n,e);return this.bidiCache.push(new O1(t.from,t.to,n,e,!0,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||cU.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{_G(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return gJ.of(new pJ("number"==typeof t?ef.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return gJ.of(new pJ(ef.cursor(n.from),"start","start",n.top-t,e,!0))}setTabFocusMode(t){null==t?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof t?this.inputState.tabFocusMode=t?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return OJ.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return OJ.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=up.newName(),i=[r1.of(n),DJ.of(h1(`.${n}`,t))];return e&&e.dark&&i.push(o1.of(!0)),i}static baseTheme(t){return pf.lowest(DJ.of(h1("."+s1,t,c1)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),i=n&&XG.get(n)||XG.get(t);return(null===(e=null==i?void 0:i.rootView)||void 0===e?void 0:e.view)||null}}b1.styleModule=DJ,b1.inputHandler=aJ,b1.clipboardInputFilter=cJ,b1.clipboardOutputFilter=hJ,b1.scrollHandler=fJ,b1.focusChangeEffect=lJ,b1.perLineTextDirection=uJ,b1.exceptionSink=oJ,b1.updateListener=sJ,b1.editable=bJ,b1.mouseSelectionStyle=rJ,b1.dragMovesSelection=iJ,b1.clickAddsSelectionRange=nJ,b1.decorations=CJ,b1.outerDecorations=AJ,b1.atomicRanges=MJ,b1.bidiIsolatedRanges=EJ,b1.scrollMargins=TJ,b1.darkTheme=o1,b1.cspNonce=of.define({combine:t=>t.length?t[0]:""}),b1.contentAttributes=kJ,b1.editorAttributes=xJ,b1.lineWrapping=b1.contentAttributes.of({class:"cm-lineWrapping"}),b1.announce=$f.define();const y1=4096,w1={};class O1{constructor(t,e,n,i,r,o){this.from=t,this.to=e,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],i=t.length?t[t.length-1].dir:jU.LTR;for(let r=Math.max(0,t.length-10);r<t.length;r++){let o=t[r];o.dir!=i||e.touchesRange(o.from,o.to)||n.push(new O1(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function S1(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let e=i[r],o="function"==typeof e?e(t):e;o&&bU(o,n)}return n}class x1 extends Wf{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}x1.prototype.elementClass="",x1.prototype.toDOM=void 0,x1.prototype.mapMode=Fd.TrackBefore,x1.prototype.startSide=x1.prototype.endSide=-1,x1.prototype.point=!0;const k1="#e06c75",C1="#abb2bf",A1="#7d8799",M1="#d19a66",E1="#2c313a",P1="#282c34",T1="#353a42",$1="#528bff",D1=[b1.theme({"&":{color:C1,backgroundColor:P1},".cm-content":{caretColor:$1},".cm-cursor, .cm-dropCursor":{borderLeftColor:$1},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:C1},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:P1,color:A1,border:"none"},".cm-activeLineGutter":{backgroundColor:E1},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:T1},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:T1,borderBottomColor:T1},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:E1,color:C1}}},{dark:!0}),Hy(_y.define([{tag:od.keyword,color:"#c678dd"},{tag:[od.name,od.deleted,od.character,od.propertyName,od.macroName],color:k1},{tag:[od.function(od.variableName),od.labelName],color:"#61afef"},{tag:[od.color,od.constant(od.name),od.standard(od.name)],color:M1},{tag:[od.definition(od.name),od.separator],color:C1},{tag:[od.typeName,od.className,od.number,od.changed,od.annotation,od.modifier,od.self,od.namespace],color:"#e5c07b"},{tag:[od.operator,od.operatorKeyword,od.url,od.escape,od.regexp,od.link,od.special(od.string)],color:"#56b6c2"},{tag:[od.meta,od.comment],color:A1},{tag:od.strong,fontWeight:"bold"},{tag:od.emphasis,fontStyle:"italic"},{tag:od.strikethrough,textDecoration:"line-through"},{tag:od.link,color:A1,textDecoration:"underline"},{tag:od.heading,fontWeight:"bold",color:k1},{tag:[od.atom,od.bool,od.special(od.variableName)],color:M1},{tag:[od.processingInstruction,od.string,od.inserted],color:"#98c379"},{tag:od.invalid,color:"#ffffff"}]))];var R1=OB.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),B1=function(t){void 0===t&&(t={});var{indentWithTab:e=!0,editable:n=!0,readOnly:i=!1,theme:r="light",placeholder:o="",basicSetup:s=!0}=t,a=[];switch(e&&a.unshift(PB.of([lQ])),s&&("boolean"==typeof s?a.unshift(SG()):a.unshift(SG(s))),o&&a.unshift(function(t){return xD.fromClass(class{constructor(e){this.view=e,this.placeholder=t?M$.set([M$.widget({widget:new cN(t),side:1}).range(0)]):M$.none}get decorations(){return this.view.state.doc.length?M$.none:this.placeholder}},{decorations:t=>t.decorations})}(o)),r){case"light":a.push(R1);break;case"dark":a.push(D1);break;case"none":break;default:a.push(r)}return!1===n&&a.push(OB.editable.of(!1)),i&&a.push(Hf.readOnly.of(!0)),[...a]},N1=Ef.define(),L1=[],j1=__webpack_require__(4848),_1=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],I1=(0,n.forwardRef)(((t,e)=>{var{className:i,value:r="",selection:o,extensions:s=[],onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:h,autoFocus:u,theme:d="light",height:f,minHeight:p,maxHeight:g,width:m,minWidth:v,maxWidth:b,basicSetup:y,placeholder:w,indentWithTab:O,editable:S,readOnly:x,root:k,initialState:C}=t,A=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,_1),M=(0,n.useRef)(null),{state:E,view:P,container:T,setContainer:$}=function(t){var{value:e,selection:i,onChange:r,onStatistics:o,onCreateEditor:s,onUpdate:a,extensions:l=L1,autoFocus:c,theme:h="light",height:u=null,minHeight:d=null,maxHeight:f=null,width:p=null,minWidth:g=null,maxWidth:m=null,placeholder:v="",editable:b=!0,readOnly:y=!1,indentWithTab:w=!0,basicSetup:O=!0,root:S,initialState:x}=t,[k,C]=(0,n.useState)(),[A,M]=(0,n.useState)(),[E,P]=(0,n.useState)(),T=OB.theme({"&":{height:u,minHeight:d,maxHeight:f,width:p,minWidth:g,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),$=OB.updateListener.of((t=>{if(t.docChanged&&"function"==typeof r&&!t.transactions.some((t=>t.annotation(N1)))){var e=t.state.doc.toString();r(e,t)}o&&o((t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map((e=>t.state.sliceDoc(e.from,e.to))),selectedText:t.state.selection.ranges.some((t=>!t.empty))}))(t))})),D=[$,T,...B1({theme:h,editable:b,readOnly:y,placeholder:v,indentWithTab:w,basicSetup:O})];return a&&"function"==typeof a&&D.push(OB.updateListener.of(a)),D=D.concat(l),(0,n.useLayoutEffect)((()=>{if(k&&!E){var t={doc:e,selection:i,extensions:D},n=x?Hf.fromJSON(x.json,t,x.fields):Hf.create(t);if(P(n),!A){var r=new OB({state:n,parent:k,root:S});M(r),s&&s(r,n)}}return()=>{A&&(P(void 0),M(void 0))}}),[k,E]),(0,n.useEffect)((()=>{t.container&&C(t.container)}),[t.container]),(0,n.useEffect)((()=>()=>{A&&(A.destroy(),M(void 0))}),[A]),(0,n.useEffect)((()=>{c&&A&&A.focus()}),[c,A]),(0,n.useEffect)((()=>{A&&A.dispatch({effects:$f.reconfigure.of(D)})}),[h,l,u,d,f,p,g,m,v,b,y,w,O,r,a]),(0,n.useEffect)((()=>{if(void 0!==e){var t=A?A.state.doc.toString():"";A&&e!==t&&A.dispatch({changes:{from:0,to:t.length,insert:e||""},annotations:[N1.of(!0)]})}}),[e,A]),{state:E,setState:P,view:A,setView:M,container:k,setContainer:C}}({root:k,value:r,autoFocus:u,theme:d,height:f,minHeight:p,maxHeight:g,width:m,minWidth:v,maxWidth:b,basicSetup:y,placeholder:w,indentWithTab:O,editable:S,readOnly:x,selection:o,onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:h,extensions:s,initialState:C});(0,n.useImperativeHandle)(e,(()=>({editor:M.current,state:E,view:P})),[M,T,E,P]);var D=(0,n.useCallback)((t=>{M.current=t,$(t)}),[$]);if("string"!=typeof r)throw new Error("value must be typeof string but got "+typeof r);var R="string"==typeof d?"cm-theme-"+d:"cm-theme";return(0,j1.jsx)("div",CT({ref:D,className:R+(i?" "+i:"")},A))}));I1.displayName="CodeMirror";var z1,Q1,H1=I1,V1=(0,i.yz)(r.Mb,r.vo,(function(t,e){return{isVisible:t.isPropsEditorOpen,widgetProps:e,hasPropsError:t.hasPropsError}})),W1=(0,n.memo)((function(e){var l=e.trigger,c=(0,o.W)(),h=(0,i.GV)(V1),u=h.isVisible,d=h.widgetProps,f=h.hasPropsError,p=(0,n.useRef)(d),g=(0,i.jL)();return(0,n.useEffect)((function(){f&&(window.alert(c("Bathtub.PropEditor.ValidationError")),g(r.tR.clearPropsError()))}),[f]),(0,t.FD)(t.FK,{children:[l,(0,t.FD)(Ao,{open:u,onCancel:function(){return g(r.tR.setIsPropsEditorOpen(!1))},footer:[(0,t.FD)(s.A,{keyName:"esc",onKeyDown:function(){g(r.tR.setIsPropsEditorOpen(!1)),g(r.tR.clearPropsError())},children:[(0,t.Y)(a.Ay,{type:"primary",onClick:function(){p.current&&p.current!==d&&g(r.tR.setActiveWidgetProps(p.current))},"data-qa":"props-editor-update",children:c("Bathtub.PropEditor.Update")}),(0,t.Y)(a.Ay,{type:"primary",onClick:function(){return g(r.tR.setIsPropsEditorOpen(!1))},children:"Close"})]})],children:[(0,t.Y)(Kc.Title,{level:2,children:"Widget props"}),(0,t.Y)(H1,{theme:"dark",value:d,width:"100%",height:"50vh",extensions:[OT({jsx:!0})],onChange:function(t){p.current=t}})]})]})})),F1=__webpack_require__(7430),q1=(0,e.A)(xh.az)(z1||(z1=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  // box-shadow: 0px 2px 8px rgba(25, 24, 35, 0.15);\n  grid-area: header;\n"]))),X1=(0,n.memo)((function(){var e=(0,i.jL)(),l=(0,i.GV)(r.Xj),c=(0,o.W)();return(0,n.useEffect)((function(){var t;document.title=null!==(t=null==l?void 0:l.widgetId)&&void 0!==t?t:"@1fe/bathtub"}),[l]),(0,t.Y)(q1,{children:(0,t.FD)(xh.fI,{css:{gap:"16px",justifyContent:"flex-end",align:"center"},children:[(0,t.Y)(s.A,{keyName:"cmd+shift+c",onKeyDown:function(){l?navigator.clipboard.writeText("https://apps.dev.docusign.net/bathtub/?widget=".concat(l.widgetId)):navigator.clipboard.writeText(window.location.href)},children:(0,t.Y)(s.A,{keyName:"cmd+/",onKeyDown:function(){e(r.tR.setIsWidgetSwitcherOpen(!0))},children:(0,t.Y)(Eh,{trigger:(0,t.Y)(a.Ay,{type:"primary","data-qa":"widget-switcher-launch-button",onClick:function(){e(r.tR.setIsWidgetSwitcherOpen(!0))},children:c("Bathtub.Header.Waffle")})})})}),(0,t.Y)(s.A,{keyName:"cmd+p",onKeyDown:function(t,n){n.preventDefault(),n.stopImmediatePropagation(),e(r.tR.setIsPropsEditorOpen(!0))},children:(0,t.Y)(W1,{trigger:(0,t.Y)(a.Ay,{type:"primary","data-qa":"widget-prop-editor-button",onClick:function(){e(r.tR.setIsPropsEditorOpen(!0))},children:c("Bathtub.Header.Editor")})})}),(0,t.Y)(a.Ay,{type:"primary",onClick:function(){e(r.tR.reset())},children:c("Bathtub.Header.Reset")}),(0,t.Y)(a.Ay,{type:"primary",onClick:function(){e(r.tR.renderWidget())},children:c("Bathtub.Header.Render")})]})})})),K1=__webpack_require__(3561),Z1=__webpack_require__(5072),Y1=__webpack_require__.n(Z1),G1=__webpack_require__(7825),U1=__webpack_require__.n(G1),J1=__webpack_require__(7659),t2=__webpack_require__.n(J1),e2=__webpack_require__(5056),n2=__webpack_require__.n(e2),i2=__webpack_require__(540),r2=__webpack_require__.n(i2),o2=__webpack_require__(1113),s2=__webpack_require__.n(o2),a2=__webpack_require__(6479),l2={};function c2(t){return c2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c2(t)}function h2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h2(Object(n),!0).forEach((function(e){d2(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h2(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d2(t,e,n){return(e=function(t){var e=function(t){if("object"!=c2(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=c2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c2(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}l2.styleTagTransform=s2(),l2.setAttributes=n2(),l2.insert=t2().bind(null,"head"),l2.domAPI=U1(),l2.insertStyleElement=r2(),Y1()(a2.A,l2),a2.A&&a2.A.locals&&a2.A.locals;var f2=(0,e.A)(xh.az)(Q1||(Q1=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(["\n  height: 100%;\n\n  > div {\n    height: 100%;\n  }\n"]))),p2=__webpack_require__(3077),g2={},m2="rc-table-internal-hook";function v2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function b2(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return v2(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v2(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y2(t){var e=n.createContext(void 0);return{Context:e,Provider:function(t){var i=t.value,r=t.children,o=n.useRef(i);o.current=i;var s=b2(n.useState((function(){return{getValue:function(){return o.current},listeners:new Set}})),1)[0];return(0,se.A)((function(){(0,ne.unstable_batchedUpdates)((function(){s.listeners.forEach((function(t){t(i)}))}))}),[i]),n.createElement(e.Provider,{value:s},r)},defaultValue:t}}function w2(t,e){var i=(0,wr.A)("function"==typeof e?e:function(t){if(void 0===e)return t;if(!Array.isArray(e))return t[e];var n={};return e.forEach((function(e){n[e]=t[e]})),n}),r=n.useContext(null==t?void 0:t.Context),o=r||{},s=o.listeners,a=o.getValue,l=n.useRef();l.current=i(r?a():null==t?void 0:t.defaultValue);var c=b2(n.useState({}),2)[1];return(0,se.A)((function(){if(r)return s.add(t),function(){s.delete(t)};function t(t){var e=i(t);(0,F.A)(l.current,e,!0)||c({})}}),[r]),l.current}function O2(){return O2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},O2.apply(null,arguments)}function S2(){var t=n.createContext(null);function e(){return n.useContext(t)}return{makeImmutable:function(i,r){var o=(0,ie.f3)(i),s=function(s,a){var l=o?{ref:a}:{},c=n.useRef(0),h=n.useRef(s);return null!==e()?n.createElement(i,O2({},s,l)):(r&&!r(h.current,s)||(c.current+=1),h.current=s,n.createElement(t.Provider,{value:c.current},n.createElement(i,O2({},s,l))))};return o?n.forwardRef(s):s},responseImmutable:function(t,i){var r=(0,ie.f3)(t),o=function(i,o){var s=r?{ref:o}:{};return e(),n.createElement(t,O2({},i,s))};return r?n.memo(n.forwardRef(o),i):n.memo(o,i)},useImmutableMark:e}}var x2=S2(),k2=(x2.makeImmutable,x2.responseImmutable,x2.useImmutableMark,S2()),C2=k2.makeImmutable,A2=k2.responseImmutable,M2=k2.useImmutableMark,E2=y2();function P2(){return P2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},P2.apply(null,arguments)}function T2(t){return T2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T2(t)}function $2(t,e,n){return(e=function(t){var e=function(t){if("object"!=T2(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=T2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==T2(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function R2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D2(Object(n),!0).forEach((function(e){$2(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function B2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function N2(t,e){if(t){if("string"==typeof t)return B2(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B2(t,e):void 0}}function L2(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||N2(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j2=n.createContext({renderWithProps:!1});function _2(t){var e=[],n={};return t.forEach((function(t){for(var i,r=t||{},o=r.key,s=r.dataIndex,a=o||(i=s,null==i?[]:Array.isArray(i)?i:[i]).join("-")||"RC_TABLE_KEY";n[a];)a="".concat(a,"_next");n[a]=!0,e.push(a)})),e}function I2(t){return null!=t}var z2=__webpack_require__(1470);function Q2(t){var e,i,r,o,s,a,l,c,h=t.component,u=t.children,f=t.ellipsis,p=t.scope,g=t.prefixCls,m=t.className,v=t.align,b=t.record,y=t.render,w=t.dataIndex,O=t.renderIndex,S=t.shouldCellUpdate,x=t.index,k=t.rowType,C=t.colSpan,A=t.rowSpan,M=t.fixLeft,E=t.fixRight,P=t.firstFixLeft,T=t.lastFixLeft,$=t.firstFixRight,D=t.lastFixRight,R=t.appendNode,B=t.additionalProps,N=void 0===B?{}:B,L=t.isSticky,j="".concat(g,"-cell"),_=w2(E2,["supportSticky","allColumnsFixedLeft","rowHoverable"]),I=_.supportSticky,z=_.allColumnsFixedLeft,Q=_.rowHoverable,H=L2(function(t,e,i,r,o,s){var a=n.useContext(j2),l=M2();return(0,d.A)((function(){if(I2(r))return[r];var s,l=null==e||""===e?[]:Array.isArray(e)?e:[e],c=(0,gi.A)(t,l),h=c,u=void 0;if(o){var d=o(c,t,i);!(s=d)||"object"!==T2(s)||Array.isArray(s)||n.isValidElement(s)?h=d:(h=d.children,u=d.props,a.renderWithProps=!0)}return[h,u]}),[l,t,r,e,o,i],(function(t,e){if(s){var n=L2(t,2)[1],i=L2(e,2)[1];return s(i,n)}return!!a.renderWithProps||!(0,F.A)(t,e,!0)}))}(b,w,O,u,y,S),2),V=H[0],W=H[1],q={},X="number"==typeof M&&I,K="number"==typeof E&&I;X&&(q.position="sticky",q.left=M),K&&(q.position="sticky",q.right=E);var Z=null!==(e=null!==(i=null!==(r=null==W?void 0:W.colSpan)&&void 0!==r?r:N.colSpan)&&void 0!==i?i:C)&&void 0!==e?e:1,Y=null!==(o=null!==(s=null!==(a=null==W?void 0:W.rowSpan)&&void 0!==a?a:N.rowSpan)&&void 0!==s?s:A)&&void 0!==o?o:1,G=function(t,e){return w2(E2,(function(n){var i,r,o,s;return[(i=t,r=e||1,o=n.hoverStartRow,s=n.hoverEndRow,i<=s&&i+r-1>=o),n.onHover]}))}(x,Y),U=L2(G,2),J=U[0],tt=U[1],et=(0,z2._q)((function(t){var e;b&&tt(x,x+Y-1),null==N||null===(e=N.onMouseEnter)||void 0===e||e.call(N,t)})),nt=(0,z2._q)((function(t){var e;b&&tt(-1,-1),null==N||null===(e=N.onMouseLeave)||void 0===e||e.call(N,t)}));if(0===Z||0===Y)return null;var it=null!==(l=N.title)&&void 0!==l?l:function(t){var e,i=t.ellipsis,r=t.rowType,o=t.children,s=!0===i?{showTitle:!0}:i;return s&&(s.showTitle||"header"===r)&&("string"==typeof o||"number"==typeof o?e=o.toString():n.isValidElement(o)&&"string"==typeof o.props.children&&(e=o.props.children)),e}({rowType:k,ellipsis:f,children:V}),rt=At()(j,m,($2($2($2($2($2($2($2($2($2($2(c={},"".concat(j,"-fix-left"),X&&I),"".concat(j,"-fix-left-first"),P&&I),"".concat(j,"-fix-left-last"),T&&I),"".concat(j,"-fix-left-all"),T&&z&&I),"".concat(j,"-fix-right"),K&&I),"".concat(j,"-fix-right-first"),$&&I),"".concat(j,"-fix-right-last"),D&&I),"".concat(j,"-ellipsis"),f),"".concat(j,"-with-append"),R),"".concat(j,"-fix-sticky"),(X||K)&&L&&I),$2(c,"".concat(j,"-row-hover"),!W&&J)),N.className,null==W?void 0:W.className),ot={};v&&(ot.textAlign=v);var st=R2(R2(R2(R2({},null==W?void 0:W.style),q),ot),N.style),at=V;return"object"!==T2(at)||Array.isArray(at)||n.isValidElement(at)||(at=null),f&&(T||$)&&(at=n.createElement("span",{className:"".concat(j,"-content")},at)),n.createElement(h,P2({},W,N,{className:rt,style:st,title:it,scope:p,onMouseEnter:Q?et:void 0,onMouseLeave:Q?nt:void 0,colSpan:1!==Z?Z:null,rowSpan:1!==Y?Y:null}),R,at)}var H2=n.memo(Q2);function V2(t,e,n,i,r){var o,s,a=n[t]||{},l=n[e]||{};"left"===a.fixed?o=i.left["rtl"===r?e:t]:"right"===l.fixed&&(s=i.right["rtl"===r?t:e]);var c=!1,h=!1,u=!1,d=!1,f=n[e+1],p=n[t-1],g=f&&!f.fixed||p&&!p.fixed||n.every((function(t){return"left"===t.fixed}));return"rtl"===r?void 0!==o?d=!(p&&"left"===p.fixed)&&g:void 0!==s&&(u=!(f&&"right"===f.fixed)&&g):void 0!==o?c=!(f&&"left"===f.fixed)&&g:void 0!==s&&(h=!(p&&"right"===p.fixed)&&g),{fixLeft:o,fixRight:s,lastFixLeft:c,firstFixRight:h,lastFixRight:u,firstFixLeft:d,isSticky:i.isSticky}}var W2=n.createContext({});function F2(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var q2=["children"];function X2(t){return t.children}X2.Row=function(t){var e=t.children,i=F2(t,q2);return n.createElement("tr",i,e)},X2.Cell=function(t){var e=t.className,i=t.index,r=t.children,o=t.colSpan,s=void 0===o?1:o,a=t.rowSpan,l=t.align,c=w2(E2,["prefixCls","direction"]),h=c.prefixCls,u=c.direction,d=n.useContext(W2),f=d.scrollColumnIndex,p=d.stickyOffsets,g=i+s-1+1===f?s+1:s,m=V2(i,i+g-1,d.flattenColumns,p,u);return n.createElement(H2,P2({className:e,index:i,component:"td",prefixCls:h,record:null,dataIndex:null,align:l,colSpan:g,rowSpan:a,render:function(){return r}},m))};var K2=X2,Z2=A2((function(t){var e=t.children,i=t.stickyOffsets,r=t.flattenColumns,o=w2(E2,"prefixCls"),s=r.length-1,a=r[s],l=n.useMemo((function(){return{stickyOffsets:i,flattenColumns:r,scrollColumnIndex:null!=a&&a.scrollbar?s:null}}),[a,r,s,i]);return n.createElement(W2.Provider,{value:l},n.createElement("tfoot",{className:"".concat(o,"-summary")},e))})),Y2=K2;function G2(t,e,n,i,r,o,s){t.push({record:e,indent:n,index:s});var a=o(e),l=null==r?void 0:r.has(a);if(e&&Array.isArray(e[i])&&l)for(var c=0;c<e[i].length;c+=1)G2(t,e[i][c],n+1,i,r,o,c)}function U2(t,e,i,r){var o=n.useMemo((function(){if(null!=i&&i.size){for(var n=[],o=0;o<(null==t?void 0:t.length);o+=1)G2(n,t[o],0,e,i,r,o);return n}return null==t?void 0:t.map((function(t,e){return{record:t,indent:0,index:e}}))}),[t,e,i,r]);return o}function J2(t,e,n,i){var r,o=w2(E2,["prefixCls","fixedInfoList","flattenColumns","expandableType","expandRowByClick","onTriggerExpand","rowClassName","expandedRowClassName","indentSize","expandIcon","expandedRowRender","expandIconColumnIndex","expandedKeys","childrenColumnName","rowExpandable","onRow"]),s=o.flattenColumns,a=o.expandableType,l=o.expandedKeys,c=o.childrenColumnName,h=o.onTriggerExpand,u=o.rowExpandable,d=o.onRow,f=o.expandRowByClick,p=o.rowClassName,g="nest"===a,m="row"===a&&(!u||u(t)),v=m||g,b=l&&l.has(e),y=c&&t&&t[c],w=(0,z2._q)(h),O=null==d?void 0:d(t,n),S=null==O?void 0:O.onClick;"string"==typeof p?r=p:"function"==typeof p&&(r=p(t,n,i));var x=_2(s);return R2(R2({},o),{},{columnsKey:x,nestExpandable:g,expanded:b,hasNestChildren:y,record:t,onTriggerExpand:w,rowSupportExpand:m,expandable:v,rowProps:R2(R2({},O),{},{className:At()(r,null==O?void 0:O.className),onClick:function(e){f&&v&&h(t,e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];null==S||S.apply(void 0,[e].concat(i))}})})}var t5=function(t){var e=t.prefixCls,i=t.children,r=t.component,o=t.cellComponent,s=t.className,a=t.expanded,l=t.colSpan,c=t.isEmpty,h=w2(E2,["scrollbarSize","fixHeader","fixColumn","componentWidth","horizonScroll"]),u=h.scrollbarSize,d=h.fixHeader,f=h.fixColumn,p=h.componentWidth,g=h.horizonScroll,m=i;return(c?g&&p:f)&&(m=n.createElement("div",{style:{width:p-(d&&!c?u:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(e,"-expanded-row-fixed")},m)),n.createElement(r,{className:s,style:{display:a?null:"none"}},n.createElement(H2,{component:o,prefixCls:e,colSpan:l},m))};function e5(t){var e=t.prefixCls,i=t.record,r=t.onExpand,o=t.expanded,s=t.expandable,a="".concat(e,"-row-expand-icon");return s?n.createElement("span",{className:At()(a,$2($2({},"".concat(e,"-row-expanded"),o),"".concat(e,"-row-collapsed"),!o)),onClick:function(t){r(i,t),t.stopPropagation()}}):n.createElement("span",{className:At()(a,"".concat(e,"-row-spaced"))})}function n5(t,e,n,i){return"string"==typeof t?t:"function"==typeof t?t(e,n,i):""}function i5(t,e,i,r,o){var s,a,l=t.record,c=t.prefixCls,h=t.columnsKey,u=t.fixedInfoList,d=t.expandIconColumnIndex,f=t.nestExpandable,p=t.indentSize,g=t.expandIcon,m=t.expanded,v=t.hasNestChildren,b=t.onTriggerExpand,y=h[i],w=u[i];return i===(d||0)&&f&&(s=n.createElement(n.Fragment,null,n.createElement("span",{style:{paddingLeft:"".concat(p*r,"px")},className:"".concat(c,"-row-indent indent-level-").concat(r)}),g({prefixCls:c,expanded:m,expandable:v,record:l,onExpand:b}))),e.onCell&&(a=e.onCell(l,o)),{key:y,fixedInfo:w,appendCellNode:s,additionalCellProps:a||{}}}var r5=A2((function(t){var e=t.className,i=t.style,r=t.record,o=t.index,s=t.renderIndex,a=t.rowKey,l=t.indent,c=void 0===l?0:l,h=t.rowComponent,u=t.cellComponent,d=t.scopeCellComponent,f=J2(r,a,o,c),p=f.prefixCls,g=f.flattenColumns,m=f.expandedRowClassName,v=f.expandedRowRender,b=f.rowProps,y=f.expanded,w=f.rowSupportExpand,O=n.useRef(!1);O.current||(O.current=y);var S,x=n5(m,r,o,c),k=n.createElement(h,P2({},b,{"data-row-key":a,className:At()(e,"".concat(p,"-row"),"".concat(p,"-row-level-").concat(c),null==b?void 0:b.className,$2({},x,c>=1)),style:R2(R2({},i),null==b?void 0:b.style)}),g.map((function(t,e){var i=t.render,a=t.dataIndex,l=t.className,h=i5(f,t,e,c,o),g=h.key,m=h.fixedInfo,v=h.appendCellNode,b=h.additionalCellProps;return n.createElement(H2,P2({className:l,ellipsis:t.ellipsis,align:t.align,scope:t.rowScope,component:t.rowScope?d:u,prefixCls:p,key:g,record:r,index:o,renderIndex:s,dataIndex:a,render:i,shouldCellUpdate:t.shouldCellUpdate},m,{appendNode:v,additionalProps:b}))})));if(w&&(O.current||y)){var C=v(r,o,c+1,y);S=n.createElement(t5,{expanded:y,className:At()("".concat(p,"-expanded-row"),"".concat(p,"-expanded-row-level-").concat(c+1),x),prefixCls:p,component:h,cellComponent:u,colSpan:g.length,isEmpty:!1},C)}return n.createElement(n.Fragment,null,k,S)}));function o5(t){var e=t.columnKey,i=t.onColumnResize,r=n.useRef();return(0,se.A)((function(){r.current&&i(e,r.current.offsetWidth)}),[]),n.createElement(ms,{data:e},n.createElement("td",{ref:r,style:{padding:0,border:0,height:0}},n.createElement("div",{style:{height:0,overflow:"hidden"}}," ")))}function s5(t){var e=t.prefixCls,i=t.columnsKey,r=t.onColumnResize,o=n.useRef(null);return n.createElement("tr",{"aria-hidden":"true",className:"".concat(e,"-measure-row"),style:{height:0,fontSize:0},ref:o},n.createElement(ms.Collection,{onBatchResize:function(t){(0,Vs.A)(o.current)&&t.forEach((function(t){var e=t.data,n=t.size;r(e,n.offsetWidth)}))}},i.map((function(t){return n.createElement(o5,{key:t,columnKey:t,onColumnResize:r})}))))}var a5=A2((function(t){var e,i=t.data,r=t.measureColumnWidth,o=w2(E2,["prefixCls","getComponent","onColumnResize","flattenColumns","getRowKey","expandedKeys","childrenColumnName","emptyNode"]),s=o.prefixCls,a=o.getComponent,l=o.onColumnResize,c=o.flattenColumns,h=o.getRowKey,u=o.expandedKeys,d=o.childrenColumnName,f=o.emptyNode,p=U2(i,d,u,h),g=n.useRef({renderWithProps:!1}),m=a(["body","wrapper"],"tbody"),v=a(["body","row"],"tr"),b=a(["body","cell"],"td"),y=a(["body","cell"],"th");e=i.length?p.map((function(t,e){var i=t.record,r=t.indent,o=t.index,s=h(i,e);return n.createElement(r5,{key:s,rowKey:s,record:i,index:e,renderIndex:o,rowComponent:v,cellComponent:b,scopeCellComponent:y,indent:r})})):n.createElement(t5,{expanded:!0,className:"".concat(s,"-placeholder"),prefixCls:s,component:v,cellComponent:b,colSpan:c.length,isEmpty:!0},f);var w=_2(c);return n.createElement(j2.Provider,{value:g.current},n.createElement(m,{className:"".concat(s,"-tbody")},r&&n.createElement(s5,{prefixCls:s,columnsKey:w,onColumnResize:l}),e))})),l5=["expandable"],c5="RC_TABLE_INTERNAL_COL_DEFINE",h5=["columnType"],u5=function(t){for(var e=t.colWidths,i=t.columns,r=t.columCount,o=w2(E2,["tableLayout"]).tableLayout,s=[],a=!1,l=(r||i.length)-1;l>=0;l-=1){var c=e[l],h=i&&i[l],u=void 0,d=void 0;if(h&&(u=h[c5],"auto"===o&&(d=h.minWidth)),c||d||u||a){var f=u||{},p=(f.columnType,F2(f,h5));s.unshift(n.createElement("col",P2({key:l,style:{width:c,minWidth:d}},p))),a=!0}}return n.createElement("colgroup",null,s)};function d5(t){return function(t){if(Array.isArray(t))return B2(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||N2(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f5=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"],p5=n.forwardRef((function(t,e){var i=t.className,r=t.noData,o=t.columns,s=t.flattenColumns,a=t.colWidths,l=t.columCount,c=t.stickyOffsets,h=t.direction,u=t.fixHeader,d=t.stickyTopOffset,f=t.stickyBottomOffset,p=t.stickyClassName,g=t.onScroll,m=t.maxContentScroll,v=t.children,b=F2(t,f5),y=w2(E2,["prefixCls","scrollbarSize","isSticky","getComponent"]),w=y.prefixCls,O=y.scrollbarSize,S=y.isSticky,x=(0,y.getComponent)(["header","table"],"table"),k=S&&!u?0:O,C=n.useRef(null),A=n.useCallback((function(t){(0,ie.Xf)(e,t),(0,ie.Xf)(C,t)}),[]);n.useEffect((function(){var t;function e(t){var e=t,n=e.currentTarget,i=e.deltaX;i&&(g({currentTarget:n,scrollLeft:n.scrollLeft+i}),t.preventDefault())}return null===(t=C.current)||void 0===t||t.addEventListener("wheel",e,{passive:!1}),function(){var t;null===(t=C.current)||void 0===t||t.removeEventListener("wheel",e)}}),[]);var M=n.useMemo((function(){return s.every((function(t){return t.width}))}),[s]),E=s[s.length-1],P={fixed:E?E.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(w,"-cell-scrollbar")}}},T=(0,n.useMemo)((function(){return k?[].concat(d5(o),[P]):o}),[k,o]),$=(0,n.useMemo)((function(){return k?[].concat(d5(s),[P]):s}),[k,s]),D=(0,n.useMemo)((function(){var t=c.right,e=c.left;return R2(R2({},c),{},{left:"rtl"===h?[].concat(d5(e.map((function(t){return t+k}))),[0]):e,right:"rtl"===h?t:[].concat(d5(t.map((function(t){return t+k}))),[0]),isSticky:S})}),[k,c,S]),R=function(t,e){return(0,n.useMemo)((function(){for(var n=[],i=0;i<e;i+=1){var r=t[i];if(void 0===r)return null;n[i]=r}return n}),[t.join("_"),e])}(a,l);return n.createElement("div",{style:R2({overflow:"hidden"},S?{top:d,bottom:f}:{}),ref:A,className:At()(i,$2({},p,!!p))},n.createElement(x,{style:{tableLayout:"fixed",visibility:r||R?null:"hidden"}},(!r||!m||M)&&n.createElement(u5,{colWidths:R?[].concat(d5(R),[k]):[],columCount:l+1,columns:$}),v(R2(R2({},b),{},{stickyOffsets:D,columns:T,flattenColumns:$}))))})),g5=n.memo(p5),m5=function(t){var e,i=t.cells,r=t.stickyOffsets,o=t.flattenColumns,s=t.rowComponent,a=t.cellComponent,l=t.onHeaderRow,c=t.index,h=w2(E2,["prefixCls","direction"]),u=h.prefixCls,d=h.direction;l&&(e=l(i.map((function(t){return t.column})),c));var f=_2(i.map((function(t){return t.column})));return n.createElement(s,e,i.map((function(t,e){var i,s=t.column,l=V2(t.colStart,t.colEnd,o,r,d);return s&&s.onHeaderCell&&(i=t.column.onHeaderCell(s)),n.createElement(H2,P2({},t,{scope:s.title?t.colSpan>1?"colgroup":"col":null,ellipsis:s.ellipsis,align:s.align,component:a,prefixCls:u,key:f[e]},l,{additionalProps:i,rowType:"header"}))})))},v5=A2((function(t){var e=t.stickyOffsets,i=t.columns,r=t.flattenColumns,o=t.onHeaderRow,s=w2(E2,["prefixCls","getComponent"]),a=s.prefixCls,l=s.getComponent,c=n.useMemo((function(){return function(t){var e=[];!function t(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e[r]=e[r]||[];var o=i;return n.filter(Boolean).map((function(n){var i={key:n.key,className:n.className||"",children:n.title,column:n,colStart:o},s=1,a=n.children;return a&&a.length>0&&(s=t(a,o,r+1).reduce((function(t,e){return t+e}),0),i.hasSubColumns=!0),"colSpan"in n&&(s=n.colSpan),"rowSpan"in n&&(i.rowSpan=n.rowSpan),i.colSpan=s,i.colEnd=i.colStart+s-1,e[r].push(i),o+=s,s}))}(t,0);for(var n=e.length,i=function(t){e[t].forEach((function(e){"rowSpan"in e||e.hasSubColumns||(e.rowSpan=n-t)}))},r=0;r<n;r+=1)i(r);return e}(i)}),[i]),h=l(["header","wrapper"],"thead"),u=l(["header","row"],"tr"),d=l(["header","cell"],"th");return n.createElement(h,{className:"".concat(a,"-thead")},c.map((function(t,i){return n.createElement(m5,{key:i,flattenColumns:r,cells:t,stickyOffsets:e,rowComponent:u,cellComponent:d,onHeaderRow:o,index:i})})))}));function b5(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"number"==typeof e?e:e.endsWith("%")?t*parseFloat(e)/100:null}var y5=["children"],w5=["fixed"];function O5(t){return(0,fn.A)(t).filter((function(t){return n.isValidElement(t)})).map((function(t){var e=t.key,n=t.props,i=n.children,r=R2({key:e},F2(n,y5));return i&&(r.children=O5(i)),r}))}function S5(t){return t.filter((function(t){return t&&"object"===T2(t)&&!t.hidden})).map((function(t){var e=t.children;return e&&e.length>0?R2(R2({},t),{},{children:S5(e)}):t}))}function x5(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key";return t.filter((function(t){return t&&"object"===T2(t)})).reduce((function(t,n,i){var r=n.fixed,o=!0===r?"left":r,s="".concat(e,"-").concat(i),a=n.children;return a&&a.length>0?[].concat(d5(t),d5(x5(a,s).map((function(t){return R2({fixed:o},t)})))):[].concat(d5(t),[R2(R2({key:s},n),{},{fixed:o})])}),[])}var k5=function(t,e){var i=t.prefixCls,r=t.columns,o=t.children,s=t.expandable,a=t.expandedKeys,l=t.columnTitle,c=t.getRowKey,h=t.onTriggerExpand,u=t.expandIcon,d=t.rowExpandable,f=t.expandIconColumnIndex,p=t.direction,g=t.expandRowByClick,m=t.columnWidth,v=t.fixed,b=t.scrollWidth,y=t.clientWidth,w=n.useMemo((function(){return S5((r||O5(o)||[]).slice())}),[r,o]),O=n.useMemo((function(){if(s){var t=w.slice();if(!t.includes(g2)){var e=f||0;e>=0&&(e||"left"===v||!v)&&t.splice(e,0,g2),"right"===v&&t.splice(w.length,0,g2)}var r=t.indexOf(g2);t=t.filter((function(t,e){return t!==g2||e===r}));var o,p=w[r];o=v||(p?p.fixed:null);var b=$2($2($2($2($2($2({},c5,{className:"".concat(i,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),"title",l),"fixed",o),"className","".concat(i,"-row-expand-icon-cell")),"width",m),"render",(function(t,e,r){var o=c(e,r),s=a.has(o),l=!d||d(e),f=u({prefixCls:i,expanded:s,expandable:l,record:e,onExpand:h});return g?n.createElement("span",{onClick:function(t){return t.stopPropagation()}},f):f}));return t.map((function(t){return t===g2?b:t}))}return w.filter((function(t){return t!==g2}))}),[s,w,c,a,u,p]),S=n.useMemo((function(){var t=O;return e&&(t=e(t)),t.length||(t=[{render:function(){return null}}]),t}),[e,O,p]),x=n.useMemo((function(){return"rtl"===p?function(t){return t.map((function(t){var e=t.fixed,n=e;return"left"===e?n="right":"right"===e&&(n="left"),R2({fixed:n},F2(t,w5))}))}(x5(S)):x5(S)}),[S,p,b]),k=n.useMemo((function(){for(var t=-1,e=x.length-1;e>=0;e-=1){var n=x[e].fixed;if("left"===n||!0===n){t=e;break}}if(t>=0)for(var i=0;i<=t;i+=1){var r=x[i].fixed;if("left"!==r&&!0!==r)return!0}var o=x.findIndex((function(t){return"right"===t.fixed}));if(o>=0)for(var s=o;s<x.length;s+=1)if("right"!==x[s].fixed)return!0;return!1}),[x]),C=function(t,e,i){return n.useMemo((function(){if(e&&e>0){var n=0,r=0;t.forEach((function(t){var i=b5(e,t.width);i?n+=i:r+=1}));var o=Math.max(e,i),s=Math.max(o-n,r),a=r,l=s/r,c=0,h=t.map((function(t){var n=R2({},t),i=b5(e,n.width);if(i)n.width=i;else{var r=Math.floor(l);n.width=1===a?s:r,s-=r,a-=1}return c+=n.width,n}));if(c<o){var u=o/c;s=o,h.forEach((function(t,e){var n=Math.floor(t.width*u);t.width=e===h.length-1?s:n,s-=n}))}return[h,Math.max(c,o)]}return[t,e]}),[t,e,i])}(x,b,y),A=L2(C,2),M=A[0],E=A[1];return[S,M,E,k]};var C5=(0,z.A)()?window:null,A5=function(t){var e=t.className,i=t.children;return n.createElement("div",{className:e},i)};function M5(t,e,n,i){var r=ne.default.unstable_batchedUpdates?function(t){ne.default.unstable_batchedUpdates(n,t)}:n;return null!=t&&t.addEventListener&&t.addEventListener(e,r,i),{remove:function(){null!=t&&t.removeEventListener&&t.removeEventListener(e,r,i)}}}function E5(t){var e=(0,Lo.rb)(t).getBoundingClientRect(),n=document.documentElement;return{left:e.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}var P5=function(t,e){var i,r,o,s,a,l,c,h=t.scrollBodyRef,u=t.onScroll,d=t.offsetScroll,f=t.container,p=t.direction,g=w2(E2,"prefixCls"),m=(null===(i=h.current)||void 0===i?void 0:i.scrollWidth)||0,v=(null===(r=h.current)||void 0===r?void 0:r.clientWidth)||0,b=m&&v*(v/m),y=n.useRef(),w=(o={scrollLeft:0,isHiddenScrollBar:!0},s=(0,n.useRef)(o),a=L2((0,n.useState)({}),2)[1],l=(0,n.useRef)(null),c=(0,n.useRef)([]),(0,n.useEffect)((function(){return function(){l.current=null}}),[]),[s.current,function(t){c.current.push(t);var e=Promise.resolve();l.current=e,e.then((function(){if(l.current===e){var t=c.current,n=s.current;c.current=[],t.forEach((function(t){s.current=t(s.current)})),l.current=null,n!==s.current&&a({})}}))}]),O=L2(w,2),S=O[0],x=O[1],k=n.useRef({delta:0,x:0}),C=L2(n.useState(!1),2),A=C[0],M=C[1],E=n.useRef(null);n.useEffect((function(){return function(){hl.A.cancel(E.current)}}),[]);var P=function(){M(!1)},T=function(t){var e,n=(t||(null===(e=window)||void 0===e?void 0:e.event)).buttons;if(A&&0!==n){var i=k.current.x+t.pageX-k.current.x-k.current.delta,r="rtl"===p;i=Math.max(r?b-v:0,Math.min(r?0:v-b,i)),(!r||Math.abs(i)+Math.abs(b)<v)&&(u({scrollLeft:i/v*(m+2)}),k.current.x=t.pageX)}else A&&M(!1)},$=function(){hl.A.cancel(E.current),E.current=(0,hl.A)((function(){if(h.current){var t=E5(h.current).top,e=t+h.current.offsetHeight,n=f===window?document.documentElement.scrollTop+window.innerHeight:E5(f).top+f.clientHeight;e-ce()<=n||t>=n-d?x((function(t){return R2(R2({},t),{},{isHiddenScrollBar:!0})})):x((function(t){return R2(R2({},t),{},{isHiddenScrollBar:!1})}))}}))},D=function(t){x((function(e){return R2(R2({},e),{},{scrollLeft:t/m*v||0})}))};return n.useImperativeHandle(e,(function(){return{setScrollLeft:D,checkScrollBarVisible:$}})),n.useEffect((function(){var t=M5(document.body,"mouseup",P,!1),e=M5(document.body,"mousemove",T,!1);return $(),function(){t.remove(),e.remove()}}),[b,A]),n.useEffect((function(){if(h.current){for(var t=[],e=(0,Lo.rb)(h.current);e;)t.push(e),e=e.parentElement;return t.forEach((function(t){return t.addEventListener("scroll",$,!1)})),window.addEventListener("resize",$,!1),window.addEventListener("scroll",$,!1),f.addEventListener("scroll",$,!1),function(){t.forEach((function(t){return t.removeEventListener("scroll",$)})),window.removeEventListener("resize",$),window.removeEventListener("scroll",$),f.removeEventListener("scroll",$)}}}),[f]),n.useEffect((function(){S.isHiddenScrollBar||x((function(t){var e=h.current;return e?R2(R2({},t),{},{scrollLeft:e.scrollLeft/e.scrollWidth*e.clientWidth}):t}))}),[S.isHiddenScrollBar]),m<=v||!b||S.isHiddenScrollBar?null:n.createElement("div",{style:{height:ce(),width:v,bottom:d},className:"".concat(g,"-sticky-scroll")},n.createElement("div",{onMouseDown:function(t){t.persist(),k.current.delta=t.pageX-S.scrollLeft,k.current.x=0,M(!0),t.preventDefault()},ref:y,className:At()("".concat(g,"-sticky-scroll-bar"),$2({},"".concat(g,"-sticky-scroll-bar-active"),A)),style:{width:"".concat(b,"px"),transform:"translate3d(".concat(S.scrollLeft,"px, 0, 0)")}}))},T5=n.forwardRef(P5),$5="rc-table",D5=[],R5={};function B5(){return"No Data"}function N5(t,e){var i=R2({rowKey:"key",prefixCls:$5,emptyText:B5},t),r=i.prefixCls,o=i.className,s=i.rowClassName,a=i.style,l=i.data,c=i.rowKey,h=i.scroll,u=i.tableLayout,f=i.direction,p=i.title,g=i.footer,m=i.summary,v=i.caption,b=i.id,y=i.showHeader,w=i.components,O=i.emptyText,S=i.onRow,x=i.onHeaderRow,k=i.onScroll,C=i.internalHooks,A=i.transformColumns,M=i.internalRefs,E=i.tailor,P=i.getContainerWidth,T=i.sticky,$=i.rowHoverable,D=void 0===$||$,R=l||D5,B=!!R.length,N=C===m2,L=n.useCallback((function(t,e){return(0,gi.A)(w,t)||e}),[w]),j=n.useMemo((function(){return"function"==typeof c?c:function(t){return t&&t[c]}}),[c]),_=L(["body"]),I=function(){var t=L2(n.useState(-1),2),e=t[0],i=t[1],r=L2(n.useState(-1),2),o=r[0],s=r[1];return[e,o,n.useCallback((function(t,e){i(t),s(e)}),[])]}(),z=L2(I,3),Q=z[0],H=z[1],V=z[2],W=L2(function(t,e,i){var r=function(t){var e,n=t.expandable,i=F2(t,l5);return!1===(e="expandable"in t?R2(R2({},i),n):i).showExpandColumn&&(e.expandIconColumnIndex=-1),e}(t),o=r.expandIcon,s=r.expandedRowKeys,a=r.defaultExpandedRowKeys,l=r.defaultExpandAllRows,c=r.expandedRowRender,h=r.onExpand,u=r.onExpandedRowsChange,d=o||e5,f=r.childrenColumnName||"children",p=n.useMemo((function(){return c?"row":!!(t.expandable&&t.internalHooks===m2&&t.expandable.__PARENT_RENDER_ICON__||e.some((function(t){return t&&"object"===T2(t)&&t[f]})))&&"nest"}),[!!c,e]),g=n.useState((function(){return a||(l?function(t,e,n){var i=[];return function t(r){(r||[]).forEach((function(r,o){i.push(e(r,o)),t(r[n])}))}(t),i}(e,i,f):[])})),m=L2(g,2),v=m[0],b=m[1],y=n.useMemo((function(){return new Set(s||v||[])}),[s,v]),w=n.useCallback((function(t){var n,r=i(t,e.indexOf(t)),o=y.has(r);o?(y.delete(r),n=d5(y)):n=[].concat(d5(y),[r]),b(n),h&&h(!o,t),u&&u(n)}),[i,y,e,h,u]);return[r,p,y,d,f,w]}(i,R,j),6),q=W[0],X=W[1],K=W[2],Z=W[3],Y=W[4],G=W[5],U=null==h?void 0:h.x,J=L2(n.useState(0),2),tt=J[0],et=J[1],nt=L2(k5(R2(R2(R2({},i),q),{},{expandable:!!q.expandedRowRender,columnTitle:q.columnTitle,expandedKeys:K,getRowKey:j,onTriggerExpand:G,expandIcon:Z,expandIconColumnIndex:q.expandIconColumnIndex,direction:f,scrollWidth:N&&E&&"number"==typeof U?U:null,clientWidth:tt}),N?A:null),4),it=nt[0],rt=nt[1],ot=nt[2],st=nt[3],at=null!=ot?ot:U,lt=n.useMemo((function(){return{columns:it,flattenColumns:rt}}),[it,rt]),ct=n.useRef(),ht=n.useRef(),ut=n.useRef(),dt=n.useRef();n.useImperativeHandle(e,(function(){return{nativeElement:ct.current,scrollTo:function(t){var e,n;if(ut.current instanceof HTMLElement){var i=t.index,r=t.top,o=t.key;if("number"!=typeof(n=r)||Number.isNaN(n)){var s,a=null!=o?o:j(R[i]);null===(s=ut.current.querySelector('[data-row-key="'.concat(a,'"]')))||void 0===s||s.scrollIntoView()}else{var l;null===(l=ut.current)||void 0===l||l.scrollTo({top:r})}}else null!==(e=ut.current)&&void 0!==e&&e.scrollTo&&ut.current.scrollTo(t)}}}));var ft,pt,gt,mt=n.useRef(),vt=L2(n.useState(!1),2),bt=vt[0],yt=vt[1],wt=L2(n.useState(!1),2),Ot=wt[0],St=wt[1],xt=L2(n.useState(new Map),2),kt=xt[0],Ct=xt[1],Mt=_2(rt).map((function(t){return kt.get(t)})),Et=n.useMemo((function(){return Mt}),[Mt.join("_")]),Pt=function(t,e,i){var r=(0,n.useMemo)((function(){var n=e.length,r=function(n,i,r){for(var o=[],s=0,a=n;a!==i;a+=r)o.push(s),e[a].fixed&&(s+=t[a]||0);return o},o=r(0,n,1),s=r(n-1,-1,-1).reverse();return"rtl"===i?{left:s,right:o}:{left:o,right:s}}),[t,e,i]);return r}(Et,rt,f),Tt=h&&I2(h.y),$t=h&&I2(at)||Boolean(q.fixed),Dt=$t&&rt.some((function(t){return t.fixed})),Rt=n.useRef(),Bt=function(t,e){var i="object"===T2(t)?t:{},r=i.offsetHeader,o=void 0===r?0:r,s=i.offsetSummary,a=void 0===s?0:s,l=i.offsetScroll,c=void 0===l?0:l,h=i.getContainer,u=(void 0===h?function(){return C5}:h)()||C5,d=!!t;return n.useMemo((function(){return{isSticky:d,stickyClassName:d?"".concat(e,"-sticky-holder"):"",offsetHeader:o,offsetSummary:a,offsetScroll:c,container:u}}),[d,c,o,a,e,u])}(T,r),Nt=Bt.isSticky,Lt=Bt.offsetHeader,jt=Bt.offsetSummary,_t=Bt.offsetScroll,It=Bt.stickyClassName,zt=Bt.container,Qt=n.useMemo((function(){return null==m?void 0:m(R)}),[m,R]),Ht=(Tt||Nt)&&n.isValidElement(Qt)&&Qt.type===K2&&Qt.props.fixed;Tt&&(pt={overflowY:B?"scroll":"auto",maxHeight:h.y}),$t&&(ft={overflowX:"auto"},Tt||(pt={overflowY:"hidden"}),gt={width:!0===at?"auto":at,minWidth:"100%"});var Vt=n.useCallback((function(t,e){Ct((function(n){if(n.get(t)!==e){var i=new Map(n);return i.set(t,e),i}return n}))}),[]),Wt=L2(function(){var t=(0,n.useRef)(null),e=(0,n.useRef)();function i(){window.clearTimeout(e.current)}return(0,n.useEffect)((function(){return i}),[]),[function(n){t.current=n,i(),e.current=window.setTimeout((function(){t.current=null,e.current=void 0}),100)},function(){return t.current}]}(),2),Ft=Wt[0],qt=Wt[1];function Xt(t,e){e&&("function"==typeof e?e(t):e.scrollLeft!==t&&(e.scrollLeft=t,e.scrollLeft!==t&&setTimeout((function(){e.scrollLeft=t}),0)))}var Kt=(0,wr.A)((function(t){var e,n=t.currentTarget,i=t.scrollLeft,r="rtl"===f,o="number"==typeof i?i:n.scrollLeft,s=n||R5;qt()&&qt()!==s||(Ft(s),Xt(o,ht.current),Xt(o,ut.current),Xt(o,mt.current),Xt(o,null===(e=Rt.current)||void 0===e?void 0:e.setScrollLeft));var a=n||ht.current;if(a){var l=N&&E&&"number"==typeof at?at:a.scrollWidth,c=a.clientWidth;if(l===c)return yt(!1),void St(!1);r?(yt(-o<l-c),St(-o>0)):(yt(o>0),St(o<l-c))}})),Zt=(0,wr.A)((function(t){Kt(t),null==k||k(t)})),Yt=function(){var t;$t&&ut.current?Kt({currentTarget:(0,Lo.rb)(ut.current),scrollLeft:null===(t=ut.current)||void 0===t?void 0:t.scrollLeft}):(yt(!1),St(!1))},Gt=n.useRef(!1);n.useEffect((function(){Gt.current&&Yt()}),[$t,l,it.length]),n.useEffect((function(){Gt.current=!0}),[]);var Ut=L2(n.useState(0),2),Jt=Ut[0],te=Ut[1],ee=L2(n.useState(!0),2),ne=ee[0],ie=ee[1];(0,se.A)((function(){E&&N||(ut.current instanceof Element?te(he(ut.current).width):te(he(dt.current).width)),ie(bs("position","sticky"))}),[]),n.useEffect((function(){N&&M&&(M.body.current=ut.current)}));var re,oe=n.useCallback((function(t){return n.createElement(n.Fragment,null,n.createElement(v5,t),"top"===Ht&&n.createElement(Z2,t,Qt))}),[Ht,Qt]),ae=n.useCallback((function(t){return n.createElement(Z2,t,Qt)}),[Qt]),le=L(["table"],"table"),ce=n.useMemo((function(){return u||(Dt?"max-content"===at?"auto":"fixed":Tt||Nt||rt.some((function(t){return t.ellipsis}))?"fixed":"auto")}),[Tt,Dt,rt,u,Nt]),ue={colWidths:Et,columCount:rt.length,stickyOffsets:Pt,onHeaderRow:x,fixHeader:Tt,scroll:h},de=n.useMemo((function(){return B?null:"function"==typeof O?O():O}),[B,O]),fe=n.createElement(a5,{data:R,measureColumnWidth:Tt||$t||Nt}),pe=n.createElement(u5,{colWidths:rt.map((function(t){return t.width})),columns:rt}),ge=null!=v?n.createElement("caption",{className:"".concat(r,"-caption")},v):void 0,me=De(i,{data:!0}),ve=De(i,{aria:!0});if(Tt||Nt){var be;"function"==typeof _?(be=_(R,{scrollbarSize:Jt,ref:ut,onScroll:Kt}),ue.colWidths=rt.map((function(t,e){var n=t.width,i=e===rt.length-1?n-Jt:n;return"number"!=typeof i||Number.isNaN(i)?0:i}))):be=n.createElement("div",{style:R2(R2({},ft),pt),onScroll:Zt,ref:ut,className:At()("".concat(r,"-body"))},n.createElement(le,P2({style:R2(R2({},gt),{},{tableLayout:ce})},ve),ge,pe,fe,!Ht&&Qt&&n.createElement(Z2,{stickyOffsets:Pt,flattenColumns:rt},Qt)));var ye=R2(R2(R2({noData:!R.length,maxContentScroll:$t&&"max-content"===at},ue),lt),{},{direction:f,stickyClassName:It,onScroll:Kt});re=n.createElement(n.Fragment,null,!1!==y&&n.createElement(g5,P2({},ye,{stickyTopOffset:Lt,className:"".concat(r,"-header"),ref:ht}),oe),be,Ht&&"top"!==Ht&&n.createElement(g5,P2({},ye,{stickyBottomOffset:jt,className:"".concat(r,"-summary"),ref:mt}),ae),Nt&&ut.current&&ut.current instanceof Element&&n.createElement(T5,{ref:Rt,offsetScroll:_t,scrollBodyRef:ut,onScroll:Kt,container:zt,direction:f}))}else re=n.createElement("div",{style:R2(R2({},ft),pt),className:At()("".concat(r,"-content")),onScroll:Kt,ref:ut},n.createElement(le,P2({style:R2(R2({},gt),{},{tableLayout:ce})},ve),ge,pe,!1!==y&&n.createElement(v5,P2({},ue,lt)),fe,Qt&&n.createElement(Z2,{stickyOffsets:Pt,flattenColumns:rt},Qt)));var we=n.createElement("div",P2({className:At()(r,o,$2($2($2($2($2($2($2($2($2($2({},"".concat(r,"-rtl"),"rtl"===f),"".concat(r,"-ping-left"),bt),"".concat(r,"-ping-right"),Ot),"".concat(r,"-layout-fixed"),"fixed"===u),"".concat(r,"-fixed-header"),Tt),"".concat(r,"-fixed-column"),Dt),"".concat(r,"-fixed-column-gapped"),Dt&&st),"".concat(r,"-scroll-horizontal"),$t),"".concat(r,"-has-fix-left"),rt[0]&&rt[0].fixed),"".concat(r,"-has-fix-right"),rt[rt.length-1]&&"right"===rt[rt.length-1].fixed)),style:a,id:b,ref:ct},me),p&&n.createElement(A5,{className:"".concat(r,"-title")},p(R)),n.createElement("div",{ref:dt,className:"".concat(r,"-container")},re),g&&n.createElement(A5,{className:"".concat(r,"-footer")},g(R)));$t&&(we=n.createElement(ms,{onResize:function(t){var e,n=t.width;null===(e=Rt.current)||void 0===e||e.checkScrollBarVisible();var i=ct.current?ct.current.offsetWidth:n;N&&P&&ct.current&&(i=P(ct.current,i)||i),i!==tt&&(Yt(),et(i))}},we));var Oe=function(t,e,n){var i=t.map((function(i,r){return V2(r,r,t,e,n)}));return(0,d.A)((function(){return i}),[i],(function(t,e){return!(0,F.A)(t,e)}))}(rt,Pt,f),Se=n.useMemo((function(){return{scrollX:at,prefixCls:r,getComponent:L,scrollbarSize:Jt,direction:f,fixedInfoList:Oe,isSticky:Nt,supportSticky:ne,componentWidth:tt,fixHeader:Tt,fixColumn:Dt,horizonScroll:$t,tableLayout:ce,rowClassName:s,expandedRowClassName:q.expandedRowClassName,expandIcon:Z,expandableType:X,expandRowByClick:q.expandRowByClick,expandedRowRender:q.expandedRowRender,onTriggerExpand:G,expandIconColumnIndex:q.expandIconColumnIndex,indentSize:q.indentSize,allColumnsFixedLeft:rt.every((function(t){return"left"===t.fixed})),emptyNode:de,columns:it,flattenColumns:rt,onColumnResize:Vt,hoverStartRow:Q,hoverEndRow:H,onHover:V,rowExpandable:q.rowExpandable,onRow:S,getRowKey:j,expandedKeys:K,childrenColumnName:Y,rowHoverable:D}}),[at,r,L,Jt,f,Oe,Nt,ne,tt,Tt,Dt,$t,ce,s,q.expandedRowClassName,Z,X,q.expandRowByClick,q.expandedRowRender,G,q.expandIconColumnIndex,q.indentSize,de,it,rt,Vt,Q,H,V,q.rowExpandable,S,j,K,Y,D]);return n.createElement(E2.Provider,{value:Se},we)}var L5=n.forwardRef(N5);function j5(t){return C2(L5,t)}var _5=j5();_5.EXPAND_COLUMN=g2,_5.INTERNAL_HOOKS=m2,_5.Column=function(t){return null},_5.ColumnGroup=function(t){return null},_5.Summary=Y2;var I5=_5;function z5(){return z5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},z5.apply(null,arguments)}function Q5(t){return Q5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q5(t)}function H5(t){var e=function(t){if("object"!=Q5(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Q5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Q5(e)?e:e+""}function V5(t,e,n){return(e=H5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function F5(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W5(Object(n),!0).forEach((function(e){V5(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function X5(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return q5(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q5(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var K5=n.forwardRef((function(t,e){var i=t.height,r=t.offsetY,o=t.offsetX,s=t.children,a=t.prefixCls,l=t.onInnerResize,c=t.innerProps,h=t.rtl,u=t.extra,d={},f={display:"flex",flexDirection:"column"};return void 0!==r&&(d={height:i,position:"relative",overflow:"hidden"},f=F5(F5({},f),{},V5(V5(V5(V5(V5({transform:"translateY(".concat(r,"px)")},h?"marginRight":"marginLeft",-o),"position","absolute"),"left",0),"right",0),"top",0))),n.createElement("div",{style:d},n.createElement(ms,{onResize:function(t){t.offsetHeight&&l&&l()}},n.createElement("div",z5({style:f,className:At()(V5({},"".concat(a,"-holder-inner"),a)),ref:e},c),s,u)))}));K5.displayName="Filler";var Z5=K5;function Y5(t){var e=t.children,i=t.setRef,r=n.useCallback((function(t){i(t)}),[]);return n.cloneElement(e,{ref:r})}var G5="object"===("undefined"==typeof navigator?"undefined":Q5(navigator))&&/Firefox/i.test(navigator.userAgent),U5=function(t,e,i,r){var o=(0,n.useRef)(!1),s=(0,n.useRef)(null),a=(0,n.useRef)({top:t,bottom:e,left:i,right:r});return a.current.top=t,a.current.bottom=e,a.current.left=i,a.current.right=r,function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t?e<0&&a.current.left||e>0&&a.current.right:e<0&&a.current.top||e>0&&a.current.bottom;return n&&i?(clearTimeout(s.current),o.current=!1):i&&!o.current||(clearTimeout(s.current),o.current=!0,s.current=setTimeout((function(){o.current=!1}),50)),!o.current&&i}};function J5(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,H5(i.key),i)}}var t8=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),V5(this,"maps",void 0),V5(this,"id",0),V5(this,"diffRecords",new Map),this.maps=Object.create(null)}return e=t,(n=[{key:"set",value:function(t,e){this.diffRecords.set(t,this.maps[t]),this.maps[t]=e,this.id+=1}},{key:"get",value:function(t){return this.maps[t]}},{key:"resetRecord",value:function(){this.diffRecords.clear()}},{key:"getRecord",value:function(){return this.diffRecords}}])&&J5(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t;var e,n}();function e8(t){var e=parseFloat(t);return isNaN(e)?0:e}var n8=14/15;function i8(t){return Math.floor(Math.pow(t,.5))}function r8(t,e){return("touches"in t?t.touches[0]:t)[e?"pageX":"pageY"]-window[e?"scrollX":"scrollY"]}var o8=n.forwardRef((function(t,e){var i=t.prefixCls,r=t.rtl,o=t.scrollOffset,s=t.scrollRange,a=t.onStartMove,l=t.onStopMove,c=t.onScroll,h=t.horizontal,u=t.spinSize,d=t.containerSize,f=t.style,p=t.thumbStyle,g=t.showScrollBar,m=X5(n.useState(!1),2),v=m[0],b=m[1],y=X5(n.useState(null),2),w=y[0],O=y[1],S=X5(n.useState(null),2),x=S[0],k=S[1],C=!r,A=n.useRef(),M=n.useRef(),E=X5(n.useState(g),2),P=E[0],T=E[1],$=n.useRef(),D=function(){!0!==g&&!1!==g&&(clearTimeout($.current),T(!0),$.current=setTimeout((function(){T(!1)}),3e3))},R=s-d||0,B=d-u||0,N=n.useMemo((function(){return 0===o||0===R?0:o/R*B}),[o,R,B]),L=n.useRef({top:N,dragging:v,pageY:w,startTop:x});L.current={top:N,dragging:v,pageY:w,startTop:x};var j=function(t){b(!0),O(r8(t,h)),k(L.current.top),a(),t.stopPropagation(),t.preventDefault()};n.useEffect((function(){var t=function(t){t.preventDefault()},e=A.current,n=M.current;return e.addEventListener("touchstart",t,{passive:!1}),n.addEventListener("touchstart",j,{passive:!1}),function(){e.removeEventListener("touchstart",t),n.removeEventListener("touchstart",j)}}),[]);var _=n.useRef();_.current=R;var I=n.useRef();I.current=B,n.useEffect((function(){if(v){var t,e=function(e){var n=L.current,i=n.dragging,r=n.pageY,o=n.startTop;hl.A.cancel(t);var s=A.current.getBoundingClientRect(),a=d/(h?s.width:s.height);if(i){var l=(r8(e,h)-r)*a,u=o;!C&&h?u-=l:u+=l;var f=_.current,p=I.current,g=p?u/p:0,m=Math.ceil(g*f);m=Math.max(m,0),m=Math.min(m,f),t=(0,hl.A)((function(){c(m,h)}))}},n=function(){b(!1),l()};return window.addEventListener("mousemove",e,{passive:!0}),window.addEventListener("touchmove",e,{passive:!0}),window.addEventListener("mouseup",n,{passive:!0}),window.addEventListener("touchend",n,{passive:!0}),function(){window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",e),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),hl.A.cancel(t)}}}),[v]),n.useEffect((function(){return D(),function(){clearTimeout($.current)}}),[o]),n.useImperativeHandle(e,(function(){return{delayHidden:D}}));var z="".concat(i,"-scrollbar"),Q={position:"absolute",visibility:P?null:"hidden"},H={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return h?(Q.height=8,Q.left=0,Q.right=0,Q.bottom=0,H.height="100%",H.width=u,C?H.left=N:H.right=N):(Q.width=8,Q.top=0,Q.bottom=0,C?Q.right=0:Q.left=0,H.width="100%",H.height=u,H.top=N),n.createElement("div",{ref:A,className:At()(z,V5(V5(V5({},"".concat(z,"-horizontal"),h),"".concat(z,"-vertical"),!h),"".concat(z,"-visible"),P)),style:F5(F5({},Q),f),onMouseDown:function(t){t.stopPropagation(),t.preventDefault()},onMouseMove:D},n.createElement("div",{ref:M,className:At()("".concat(z,"-thumb"),V5({},"".concat(z,"-thumb-moving"),v)),style:F5(F5({},H),p),onMouseDown:j}))})),s8=o8;function a8(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=t/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*t;return isNaN(e)&&(e=0),e=Math.max(e,20),Math.floor(e)}var l8=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],c8=[],h8={overflowY:"auto",overflowAnchor:"none"};function u8(t,e){var i=t.prefixCls,r=void 0===i?"rc-virtual-list":i,o=t.className,s=t.height,a=t.itemHeight,l=t.fullHeight,c=void 0===l||l,h=t.style,u=t.data,d=t.children,f=t.itemKey,p=t.virtual,g=t.direction,m=t.scrollWidth,v=t.component,b=void 0===v?"div":v,y=t.onScroll,w=t.onVirtualScroll,O=t.onVisibleChange,S=t.innerProps,x=t.extraRender,k=t.styles,C=t.showScrollBar,A=void 0===C?"optional":C,M=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,l8),E=n.useCallback((function(t){return"function"==typeof f?f(t):null==t?void 0:t[f]}),[f]),P=function(t){var e=X5(n.useState(0),2),i=e[0],r=e[1],o=(0,n.useRef)(new Map),s=(0,n.useRef)(new t8),a=(0,n.useRef)(0);function l(){a.current+=1}function c(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l();var e=function(){var t=!1;o.current.forEach((function(e,n){if(e&&e.offsetParent){var i=e.offsetHeight,r=getComputedStyle(e),o=r.marginTop,a=r.marginBottom,l=i+e8(o)+e8(a);s.current.get(n)!==l&&(s.current.set(n,l),t=!0)}})),t&&r((function(t){return t+1}))};if(t)e();else{a.current+=1;var n=a.current;Promise.resolve().then((function(){n===a.current&&e()}))}}return(0,n.useEffect)((function(){return l}),[]),[function(e,n){var i=t(e);o.current.get(i);n?(o.current.set(i,n),c()):o.current.delete(i)},c,s.current,i]}(E),T=X5(P,4),$=T[0],D=T[1],R=T[2],B=T[3],N=!(!1===p||!s||!a),L=n.useMemo((function(){return Object.values(R.maps).reduce((function(t,e){return t+e}),0)}),[R.id,R.maps]),j=N&&u&&(Math.max(a*u.length,L)>s||!!m),_="rtl"===g,I=At()(r,V5({},"".concat(r,"-rtl"),_),o),z=u||c8,Q=(0,n.useRef)(),H=(0,n.useRef)(),V=(0,n.useRef)(),W=X5((0,n.useState)(0),2),F=W[0],q=W[1],X=X5((0,n.useState)(0),2),K=X[0],Z=X[1],Y=X5((0,n.useState)(!1),2),G=Y[0],U=Y[1],J=function(){U(!0)},tt=function(){U(!1)},et={getKey:E};function nt(t){q((function(e){var n=function(t){var e=t;return Number.isNaN(yt.current)||(e=Math.min(e,yt.current)),e=Math.max(e,0)}("function"==typeof t?t(e):t);return Q.current.scrollTop=n,n}))}var it=(0,n.useRef)({start:0,end:z.length}),rt=(0,n.useRef)(),ot=X5(function(t,e,i){var r=X5(n.useState(t),2),o=r[0],s=r[1],a=X5(n.useState(null),2),l=a[0],c=a[1];return n.useEffect((function(){var n=function(t,e,n){var i,r,o=t.length,s=e.length;if(0===o&&0===s)return null;o<s?(i=t,r=e):(i=e,r=t);var a={__EMPTY_ITEM__:!0};function l(t){return void 0!==t?n(t):a}for(var c=null,h=1!==Math.abs(o-s),u=0;u<r.length;u+=1){var d=l(i[u]);if(d!==l(r[u])){c=u,h=h||d!==l(r[u+1]);break}}return null===c?null:{index:c,multiple:h}}(o||[],t||[],e);void 0!==(null==n?void 0:n.index)&&(null==i||i(n.index),c(t[n.index])),s(t)}),[t]),[l]}(z,E),1)[0];rt.current=ot;var st=n.useMemo((function(){if(!N)return{scrollHeight:void 0,start:0,end:z.length-1,offset:void 0};var t;if(!j)return{scrollHeight:(null===(t=H.current)||void 0===t?void 0:t.offsetHeight)||0,start:0,end:z.length-1,offset:void 0};for(var e,n,i,r=0,o=z.length,l=0;l<o;l+=1){var c=z[l],h=E(c),u=R.get(h),d=r+(void 0===u?a:u);d>=F&&void 0===e&&(e=l,n=r),d>F+s&&void 0===i&&(i=l),r=d}return void 0===e&&(e=0,n=0,i=Math.ceil(s/a)),void 0===i&&(i=z.length-1),{scrollHeight:r,start:e,end:i=Math.min(i+1,z.length-1),offset:n}}),[j,N,F,z,B,s]),at=st.scrollHeight,lt=st.start,ct=st.end,ht=st.offset;it.current.start=lt,it.current.end=ct,n.useLayoutEffect((function(){var t=R.getRecord();if(1===t.size){var e=Array.from(t.keys())[0],n=t.get(e),i=z[lt];if(i&&void 0===n&&E(i)===e){var r=R.get(e)-a;nt((function(t){return t+r}))}}R.resetRecord()}),[at]);var ut=X5(n.useState({width:0,height:s}),2),dt=ut[0],ft=ut[1],pt=(0,n.useRef)(),gt=(0,n.useRef)(),mt=n.useMemo((function(){return a8(dt.width,m)}),[dt.width,m]),vt=n.useMemo((function(){return a8(dt.height,at)}),[dt.height,at]),bt=at-s,yt=(0,n.useRef)(bt);yt.current=bt;var wt=F<=0,Ot=F>=bt,St=K<=0,xt=K>=m,kt=U5(wt,Ot,St,xt),Ct=function(){return{x:_?-K:K,y:F}},Mt=(0,n.useRef)(Ct()),Et=(0,z2._q)((function(t){if(w){var e=F5(F5({},Ct()),t);Mt.current.x===e.x&&Mt.current.y===e.y||(w(e),Mt.current=e)}}));function Pt(t,e){var n=t;e?((0,ne.flushSync)((function(){Z(n)})),Et()):nt(n)}var Tt=function(t){var e=t,n=m?m-dt.width:0;return e=Math.max(e,0),Math.min(e,n)},$t=(0,z2._q)((function(t,e){e?((0,ne.flushSync)((function(){Z((function(e){return Tt(e+(_?-t:t))}))})),Et()):nt((function(e){return e+t}))})),Dt=X5(function(t,e,i,r,o,s,a){var l=(0,n.useRef)(0),c=(0,n.useRef)(null),h=(0,n.useRef)(null),u=(0,n.useRef)(!1),d=U5(e,i,r,o),f=(0,n.useRef)(null),p=(0,n.useRef)(null);return[function(e){if(t){hl.A.cancel(p.current),p.current=(0,hl.A)((function(){f.current=null}),2);var n=e.deltaX,i=e.deltaY,r=e.shiftKey,o=n,g=i;("sx"===f.current||!f.current&&r&&i&&!n)&&(o=i,g=0,f.current="sx");var m=Math.abs(o),v=Math.abs(g);null===f.current&&(f.current=s&&m>v?"x":"y"),"y"===f.current?function(t,e){if(hl.A.cancel(c.current),!d(!1,e)){var n=t;n._virtualHandled||(n._virtualHandled=!0,l.current+=e,h.current=e,G5||n.preventDefault(),c.current=(0,hl.A)((function(){var t=u.current?10:1;a(l.current*t,!1),l.current=0})))}}(e,g):function(t,e){a(e,!0),G5||t.preventDefault()}(e,o)}},function(e){t&&(u.current=e.detail===h.current)}]}(N,wt,Ot,St,xt,!!m,$t),2),Rt=Dt[0],Bt=Dt[1];!function(t,e,i){var r,o=(0,n.useRef)(!1),s=(0,n.useRef)(0),a=(0,n.useRef)(0),l=(0,n.useRef)(null),c=(0,n.useRef)(null),h=function(t){if(o.current){var e=Math.ceil(t.touches[0].pageX),n=Math.ceil(t.touches[0].pageY),r=s.current-e,l=a.current-n,h=Math.abs(r)>Math.abs(l);h?s.current=e:a.current=n;var u=i(h,h?r:l,!1,t);u&&t.preventDefault(),clearInterval(c.current),u&&(c.current=setInterval((function(){h?r*=n8:l*=n8;var t=Math.floor(h?r:l);(!i(h,t,!0)||Math.abs(t)<=.1)&&clearInterval(c.current)}),16))}},u=function(){o.current=!1,r()},d=function(t){r(),1!==t.touches.length||o.current||(o.current=!0,s.current=Math.ceil(t.touches[0].pageX),a.current=Math.ceil(t.touches[0].pageY),l.current=t.target,l.current.addEventListener("touchmove",h,{passive:!1}),l.current.addEventListener("touchend",u,{passive:!0}))};r=function(){l.current&&(l.current.removeEventListener("touchmove",h),l.current.removeEventListener("touchend",u))},(0,se.A)((function(){return t&&e.current.addEventListener("touchstart",d,{passive:!0}),function(){var t;null===(t=e.current)||void 0===t||t.removeEventListener("touchstart",d),r(),clearInterval(c.current)}}),[t])}(N,Q,(function(t,e,n,i){var r=i;return!(kt(t,e,n)||r&&r._virtualHandled||(r&&(r._virtualHandled=!0),Rt({preventDefault:function(){},deltaX:t?e:0,deltaY:t?0:e}),0))})),function(t,e){n.useEffect((function(){var n=e.current;if(t&&n){var i,r,o=!1,s=function(){hl.A.cancel(i)},a=function t(){s(),i=(0,hl.A)((function(){var e;e=r,nt((function(t){return t+e})),t()}))},l=function(t){if(!t.target.draggable&&0===t.button){var e=t;e._virtualHandled||(e._virtualHandled=!0,o=!0)}},c=function(){o=!1,s()},h=function(t){if(o){var e=r8(t,!1),i=n.getBoundingClientRect(),l=i.top,c=i.bottom;e<=l?(r=-i8(l-e),a()):e>=c?(r=i8(e-c),a()):s()}};return n.addEventListener("mousedown",l),n.ownerDocument.addEventListener("mouseup",c),n.ownerDocument.addEventListener("mousemove",h),function(){n.removeEventListener("mousedown",l),n.ownerDocument.removeEventListener("mouseup",c),n.ownerDocument.removeEventListener("mousemove",h),s()}}}),[t])}(j,Q),(0,se.A)((function(){function t(t){var e=wt&&t.detail<0,n=Ot&&t.detail>0;!N||e||n||t.preventDefault()}var e=Q.current;return e.addEventListener("wheel",Rt,{passive:!1}),e.addEventListener("DOMMouseScroll",Bt,{passive:!0}),e.addEventListener("MozMousePixelScroll",t,{passive:!1}),function(){e.removeEventListener("wheel",Rt),e.removeEventListener("DOMMouseScroll",Bt),e.removeEventListener("MozMousePixelScroll",t)}}),[N,wt,Ot]),(0,se.A)((function(){if(m){var t=Tt(K);Z(t),Et({x:t})}}),[dt.width,m]);var Nt=function(){var t,e;null===(t=pt.current)||void 0===t||t.delayHidden(),null===(e=gt.current)||void 0===e||e.delayHidden()},Lt=function(t,e,i,r,o,s,a,l){var c=n.useRef(),h=X5(n.useState(null),2),u=h[0],d=h[1];return(0,se.A)((function(){if(u&&u.times<10){if(!t.current)return void d((function(t){return F5({},t)}));s();var n=u.targetAlign,l=u.originAlign,c=u.index,h=u.offset,f=t.current.clientHeight,p=!1,g=n,m=null;if(f){for(var v=n||l,b=0,y=0,w=0,O=Math.min(e.length-1,c),S=0;S<=O;S+=1){var x=o(e[S]);y=b;var k=i.get(x);b=w=y+(void 0===k?r:k)}for(var C="top"===v?h:f-h,A=O;A>=0;A-=1){var M=o(e[A]),E=i.get(M);if(void 0===E){p=!0;break}if((C-=E)<=0)break}switch(v){case"top":m=y-h;break;case"bottom":m=w-f+h;break;default:var P=t.current.scrollTop;y<P?g="top":w>P+f&&(g="bottom")}null!==m&&a(m),m!==u.lastTop&&(p=!0)}p&&d(F5(F5({},u),{},{times:u.times+1,targetAlign:g,lastTop:m}))}}),[u,t.current]),function(t){if(null!=t){if(hl.A.cancel(c.current),"number"==typeof t)a(t);else if(t&&"object"===Q5(t)){var n,i=t.align;n="index"in t?t.index:e.findIndex((function(e){return o(e)===t.key}));var r=t.offset;d({times:0,index:n,offset:void 0===r?0:r,originAlign:i})}}else l()}}(Q,z,R,a,E,(function(){return D(!0)}),nt,Nt);n.useImperativeHandle(e,(function(){return{nativeElement:V.current,getScrollInfo:Ct,scrollTo:function(t){var e;(e=t)&&"object"===Q5(e)&&("left"in e||"top"in e)?(void 0!==t.left&&Z(Tt(t.left)),Lt(t.top)):Lt(t)}}})),(0,se.A)((function(){if(O){var t=z.slice(lt,ct+1);O(t,z)}}),[lt,ct,z]);var jt=function(t,e,i,r){var o=X5(n.useMemo((function(){return[new Map,[]]}),[t,i.id,r]),2),s=o[0],a=o[1];return function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,l=s.get(n),c=s.get(o);if(void 0===l||void 0===c)for(var h=t.length,u=a.length;u<h;u+=1){var d,f=t[u],p=e(f);s.set(p,u);var g=null!==(d=i.get(p))&&void 0!==d?d:r;if(a[u]=(a[u-1]||0)+g,p===n&&(l=u),p===o&&(c=u),void 0!==l&&void 0!==c)break}return{top:a[l-1]||0,bottom:a[c]}}}(z,E,R,a),_t=null==x?void 0:x({start:lt,end:ct,virtual:j,offsetX:K,offsetY:ht,rtl:_,getSize:jt}),It=function(t,e,i,r,o,s,a,l){var c=l.getKey;return t.slice(e,i+1).map((function(t,i){var l=a(t,e+i,{style:{width:r},offsetX:o}),h=c(t);return n.createElement(Y5,{key:h,setRef:function(e){return s(t,e)}},l)}))}(z,lt,ct,m,K,$,d,et),zt=null;s&&(zt=F5(V5({},c?"height":"maxHeight",s),h8),N&&(zt.overflowY="hidden",m&&(zt.overflowX="hidden"),G&&(zt.pointerEvents="none")));var Qt={};return _&&(Qt.dir="rtl"),n.createElement("div",z5({ref:V,style:F5(F5({},h),{},{position:"relative"}),className:I},Qt,M),n.createElement(ms,{onResize:function(t){ft({width:t.offsetWidth,height:t.offsetHeight})}},n.createElement(b,{className:"".concat(r,"-holder"),style:zt,ref:Q,onScroll:function(t){var e=t.currentTarget.scrollTop;e!==F&&nt(e),null==y||y(t),Et()},onMouseEnter:Nt},n.createElement(Z5,{prefixCls:r,height:at,offsetX:K,offsetY:ht,scrollWidth:m,onInnerResize:D,ref:H,innerProps:S,rtl:_,extra:_t},It))),j&&at>s&&n.createElement(s8,{ref:pt,prefixCls:r,scrollOffset:F,scrollRange:at,rtl:_,onScroll:Pt,onStartMove:J,onStopMove:tt,spinSize:vt,containerSize:dt.height,style:null==k?void 0:k.verticalScrollBar,thumbStyle:null==k?void 0:k.verticalScrollBarThumb,showScrollBar:A}),j&&m>dt.width&&n.createElement(s8,{ref:gt,prefixCls:r,scrollOffset:K,scrollRange:m,rtl:_,onScroll:Pt,onStartMove:J,onStopMove:tt,spinSize:mt,containerSize:dt.width,horizontal:!0,style:null==k?void 0:k.horizontalScrollBar,thumbStyle:null==k?void 0:k.horizontalScrollBarThumb,showScrollBar:A}))}var d8=n.forwardRef(u8);d8.displayName="List";var f8=d8,p8=y2(null),g8=y2(null),m8=function(t){var e=t.rowInfo,i=t.column,r=t.colIndex,o=t.indent,s=t.index,a=t.component,l=t.renderIndex,c=t.record,h=t.style,u=t.className,d=t.inverse,f=t.getHeight,p=i.render,g=i.dataIndex,m=i.className,v=i.width,b=w2(g8,["columnsOffset"]).columnsOffset,y=i5(e,i,r,o,s),w=y.key,O=y.fixedInfo,S=y.appendCellNode,x=y.additionalCellProps,k=x.style,C=x.colSpan,A=void 0===C?1:C,M=x.rowSpan,E=void 0===M?1:M,P=function(t,e,n){return n[t+(e||1)]-(n[t]||0)}(r-1,A,b),T=A>1?v-P:0,$=R2(R2(R2({},k),h),{},{flex:"0 0 ".concat(P,"px"),width:"".concat(P,"px"),marginRight:T,pointerEvents:"auto"}),D=n.useMemo((function(){return d?E<=1:0===A||0===E||E>1}),[E,A,d]);D?$.visibility="hidden":d&&($.height=null==f?void 0:f(E));var R=D?function(){return null}:p,B={};return 0!==E&&0!==A||(B.rowSpan=1,B.colSpan=1),n.createElement(H2,P2({className:At()(m,u),ellipsis:i.ellipsis,align:i.align,scope:i.rowScope,component:a,prefixCls:e.prefixCls,key:w,record:c,index:s,renderIndex:l,dataIndex:g,render:R,shouldCellUpdate:i.shouldCellUpdate},O,{appendNode:S,additionalProps:R2(R2({},x),{},{style:$},B)}))},v8=["data","index","className","rowKey","style","extra","getHeight"],b8=n.forwardRef((function(t,e){var i,r=t.data,o=t.index,s=t.className,a=t.rowKey,l=t.style,c=t.extra,h=t.getHeight,u=F2(t,v8),d=r.record,f=r.indent,p=r.index,g=w2(E2,["prefixCls","flattenColumns","fixColumn","componentWidth","scrollX"]),m=g.scrollX,v=g.flattenColumns,b=g.prefixCls,y=g.fixColumn,w=g.componentWidth,O=w2(p8,["getComponent"]).getComponent,S=J2(d,a,o,f),x=O(["body","row"],"div"),k=O(["body","cell"],"div"),C=S.rowSupportExpand,A=S.expanded,M=S.rowProps,E=S.expandedRowRender,P=S.expandedRowClassName;if(C&&A){var T=E(d,o,f+1,A),$=n5(P,d,o,f),D={};y&&(D={style:$2({},"--virtual-width","".concat(w,"px"))});var R="".concat(b,"-expanded-row-cell");i=n.createElement(x,{className:At()("".concat(b,"-expanded-row"),"".concat(b,"-expanded-row-level-").concat(f+1),$)},n.createElement(H2,{component:k,prefixCls:b,className:At()(R,$2({},"".concat(R,"-fixed"),y)),additionalProps:D},T))}var B=R2(R2({},l),{},{width:m});c&&(B.position="absolute",B.pointerEvents="none");var N=n.createElement(x,P2({},M,u,{"data-row-key":a,ref:C?null:e,className:At()(s,"".concat(b,"-row"),null==M?void 0:M.className,$2({},"".concat(b,"-row-extra"),c)),style:R2(R2({},B),null==M?void 0:M.style)}),v.map((function(t,e){return n.createElement(m8,{key:e,component:k,rowInfo:S,column:t,colIndex:e,indent:f,index:o,renderIndex:p,record:d,inverse:c,getHeight:h})})));return C?n.createElement("div",{ref:e},N,i):N})),y8=A2(b8),w8=n.forwardRef((function(t,e){var i=t.data,r=t.onScroll,o=w2(E2,["flattenColumns","onColumnResize","getRowKey","prefixCls","expandedKeys","childrenColumnName","scrollX","direction"]),s=o.flattenColumns,a=o.onColumnResize,l=o.getRowKey,c=o.expandedKeys,h=o.prefixCls,u=o.childrenColumnName,d=o.scrollX,f=o.direction,p=w2(p8),g=p.sticky,m=p.scrollY,v=p.listItemHeight,b=p.getComponent,y=p.onScroll,w=n.useRef(),O=U2(i,u,c,l),S=n.useMemo((function(){var t=0;return s.map((function(e){var n=e.width;return[e.key,n,t+=n]}))}),[s]),x=n.useMemo((function(){return S.map((function(t){return t[2]}))}),[S]);n.useEffect((function(){S.forEach((function(t){var e=L2(t,2),n=e[0],i=e[1];a(n,i)}))}),[S]),n.useImperativeHandle(e,(function(){var t,e={scrollTo:function(t){var e;null===(e=w.current)||void 0===e||e.scrollTo(t)},nativeElement:null===(t=w.current)||void 0===t?void 0:t.nativeElement};return Object.defineProperty(e,"scrollLeft",{get:function(){var t;return(null===(t=w.current)||void 0===t?void 0:t.getScrollInfo().x)||0},set:function(t){var e;null===(e=w.current)||void 0===e||e.scrollTo({left:t})}}),e}));var k=function(t,e){var n,i=null===(n=O[e])||void 0===n?void 0:n.record,r=t.onCell;if(r){var o,s=r(i,e);return null!==(o=null==s?void 0:s.rowSpan)&&void 0!==o?o:1}return 1},C=n.useMemo((function(){return{columnsOffset:x}}),[x]),A="".concat(h,"-tbody"),M=b(["body","wrapper"]),E={};return g&&(E.position="sticky",E.bottom=0,"object"===T2(g)&&g.offsetScroll&&(E.bottom=g.offsetScroll)),n.createElement(g8.Provider,{value:C},n.createElement(f8,{fullHeight:!1,ref:w,prefixCls:"".concat(A,"-virtual"),styles:{horizontalScrollBar:E},className:A,height:m,itemHeight:v||24,data:O,itemKey:function(t){return l(t.record)},component:M,scrollWidth:d,direction:f,onVirtualScroll:function(t){var e,n=t.x;r({currentTarget:null===(e=w.current)||void 0===e?void 0:e.nativeElement,scrollLeft:n})},onScroll:y,extraRender:function(t){var e=t.start,i=t.end,r=t.getSize,o=t.offsetY;if(i<0)return null;for(var a=s.filter((function(t){return 0===k(t,e)})),c=e,h=function(t){if(!(a=a.filter((function(e){return 0===k(e,t)}))).length)return c=t,1},u=e;u>=0&&!h(u);u-=1);for(var d=s.filter((function(t){return 1!==k(t,i)})),f=i,p=function(t){if(!(d=d.filter((function(e){return 1!==k(e,t)}))).length)return f=Math.max(t-1,i),1},g=i;g<O.length&&!p(g);g+=1);for(var m=[],v=function(t){if(!O[t])return 1;s.some((function(e){return k(e,t)>1}))&&m.push(t)},b=c;b<=f;b+=1)v(b);return m.map((function(t){var e=O[t],i=l(e.record,t),s=r(i);return n.createElement(y8,{key:t,data:e,rowKey:i,index:t,style:{top:-o+s.top},extra:!0,getHeight:function(e){var n=t+e-1,o=l(O[n].record,n),s=r(i,o);return s.bottom-s.top}})}))}},(function(t,e,i){var r=l(t.record,e);return n.createElement(y8,{data:t,rowKey:r,index:e,style:i.style})})))})),O8=A2(w8),S8=function(t,e){var i=e.ref,r=e.onScroll;return n.createElement(O8,{ref:i,data:t,onScroll:r})};function x8(t,e){var i=t.data,r=t.columns,o=t.scroll,s=t.sticky,a=t.prefixCls,l=void 0===a?$5:a,c=t.className,h=t.listItemHeight,u=t.components,d=t.onScroll,f=o||{},p=f.x,g=f.y;"number"!=typeof p&&(p=1),"number"!=typeof g&&(g=500);var m=(0,z2._q)((function(t,e){return(0,gi.A)(u,t)||e})),v=(0,z2._q)(d),b=n.useMemo((function(){return{sticky:s,scrollY:g,listItemHeight:h,getComponent:m,onScroll:v}}),[s,g,h,m,v]);return n.createElement(p8.Provider,{value:b},n.createElement(I5,P2({},t,{className:At()(c,"".concat(l,"-virtual")),scroll:R2(R2({},o),{},{x:p}),components:R2(R2({},u),{},{body:null!=i&&i.length?S8:void 0}),columns:r,internalHooks:m2,tailor:!0,ref:e})))}var k8=n.forwardRef(x8);function C8(t){return C2(k8,t)}C8();var A8={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},M8=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:A8}))},E8=n.forwardRef(M8);function P8(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function T8(t,e){if(t){if("string"==typeof t)return P8(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P8(t,e):void 0}}function $8(t){return function(t){if(Array.isArray(t))return P8(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||T8(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D8(t){return D8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D8(t)}function R8(){return R8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},R8.apply(null,arguments)}function B8(t){var e=function(t){if("object"!=D8(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=D8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D8(e)?e:e+""}function N8(t,e,n){return(e=B8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function j8(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L8(Object(n),!0).forEach((function(e){N8(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L8(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _8(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||T8(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I8(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var z8=n.createContext(null),Q8=n.createContext({}),H8=function(t){for(var e=t.prefixCls,i=t.level,r=t.isStart,o=t.isEnd,s="".concat(e,"-indent-unit"),a=[],l=0;l<i;l+=1)a.push(n.createElement("span",{key:l,className:At()(s,N8(N8({},"".concat(s,"-start"),r[l]),"".concat(s,"-end"),o[l]))}));return n.createElement("span",{"aria-hidden":"true",className:"".concat(e,"-indent")},a)},V8=n.memo(H8);function W8(t,e){return t[e]}var F8=["children"];function q8(t,e){return"".concat(t,"-").concat(e)}function X8(t,e){return null!=t?t:e}function K8(t){var e=t||{},n=e.title||"title";return{title:n,_title:e._title||[n],key:e.key||"key",children:e.children||"children"}}function Z8(t){return function t(e){return(0,fn.A)(e).map((function(e){if(!function(t){return t&&t.type&&t.type.isTreeNode}(e))return(0,p.Ay)(!e,"Tree/TreeNode can only accept TreeNode as children."),null;var n=e.key,i=e.props,r=i.children,o=j8({key:n},I8(i,F8)),s=t(r);return s.length&&(o.children=s),o})).filter((function(t){return t}))}(t)}function Y8(t,e,n){var i=K8(n),r=i._title,o=i.key,s=i.children,a=new Set(!0===e?[]:e),l=[];return function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.map((function(c,h){for(var u,d=q8(i?i.pos:"0",h),f=X8(c[o],d),p=0;p<r.length;p+=1){var g=r[p];if(void 0!==c[g]){u=c[g];break}}var m=Object.assign((0,Yi.A)(c,[].concat($8(r),[o,s])),{title:u,key:f,parent:i,pos:d,children:null,data:c,isStart:[].concat($8(i?i.isStart:[]),[0===h]),isEnd:[].concat($8(i?i.isEnd:[]),[h===n.length-1])});return l.push(m),!0===e||a.has(f)?m.children=t(c[s]||[],m):m.children=[],m}))}(t),l}function G8(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.initWrapper,i=e.processEntity,r=e.onProcessFinished,o=e.externalGetKey,s=e.childrenPropName,a=e.fieldNames,l=o||(arguments.length>2?arguments[2]:void 0),c={},h={},u={posEntities:c,keyEntities:h};return n&&(u=n(u)||u),function(t,e,n){var r,o=("object"===D8(n)?n:{externalGetKey:n})||{},s=o.childrenPropName,a=o.externalGetKey,l=K8(o.fieldNames),d=l.key,f=l.children,p=s||f;a?"string"==typeof a?r=function(t){return t[a]}:"function"==typeof a&&(r=function(t){return a(t)}):r=function(t,e){return X8(t[d],e)},function e(n,o,s,a){var l=n?n[p]:t,d=n?q8(s.pos,o):"0",f=n?[].concat($8(a),[n]):[];if(n){var g=r(n,d);!function(t){var e=t.node,n=t.index,r=t.pos,o=t.key,s=t.parentPos,a=t.level,l={node:e,nodes:t.nodes,index:n,key:o,pos:r,level:a},d=X8(o,r);c[r]=l,h[d]=l,l.parent=c[s],l.parent&&(l.parent.children=l.parent.children||[],l.parent.children.push(l)),i&&i(l,u)}({node:n,index:o,pos:d,key:g,parentPos:s.node?s.pos:null,level:s.level+1,nodes:f})}l&&l.forEach((function(t,i){e(t,i,{node:n,pos:d,level:s?s.level+1:-1},f)}))}(null)}(t,0,{externalGetKey:l,childrenPropName:s,fieldNames:a}),r&&r(u),u}function U8(t,e){var n=e.expandedKeys,i=e.selectedKeys,r=e.loadedKeys,o=e.loadingKeys,s=e.checkedKeys,a=e.halfCheckedKeys,l=e.dragOverNodeKey,c=e.dropPosition,h=W8(e.keyEntities,t);return{eventKey:t,expanded:-1!==n.indexOf(t),selected:-1!==i.indexOf(t),loaded:-1!==r.indexOf(t),loading:-1!==o.indexOf(t),checked:-1!==s.indexOf(t),halfChecked:-1!==a.indexOf(t),pos:String(h?h.pos:""),dragOver:l===t&&0===c,dragOverGapTop:l===t&&-1===c,dragOverGapBottom:l===t&&1===c}}function J8(t){var e=t.data,n=t.expanded,i=t.selected,r=t.checked,o=t.loaded,s=t.loading,a=t.halfChecked,l=t.dragOver,c=t.dragOverGapTop,h=t.dragOverGapBottom,u=t.pos,d=t.active,f=t.eventKey,g=j8(j8({},e),{},{expanded:n,selected:i,checked:r,loaded:o,loading:s,halfChecked:a,dragOver:l,dragOverGapTop:c,dragOverGapBottom:h,pos:u,active:d,key:f});return"props"in g||Object.defineProperty(g,"props",{get:function(){return(0,p.Ay)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),t}}),g}var t3=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],e3="open",n3="close",i3=function(t){var e,i,r,o=t.eventKey,s=t.className,a=t.style,l=t.dragOver,c=t.dragOverGapTop,h=t.dragOverGapBottom,u=t.isLeaf,d=t.isStart,f=t.isEnd,p=t.expanded,g=t.selected,m=t.checked,v=t.halfChecked,b=t.loading,y=t.domRef,w=t.active,O=t.data,S=t.onMouseMove,x=t.selectable,k=I8(t,t3),C=n.default.useContext(z8),A=n.default.useContext(Q8),M=n.default.useRef(null),E=_8(n.default.useState(!1),2),P=E[0],T=E[1],$=!!(C.disabled||t.disabled||null!==(e=A.nodeDisabled)&&void 0!==e&&e.call(A,O)),D=n.default.useMemo((function(){return!(!C.checkable||!1===t.checkable)&&C.checkable}),[C.checkable,t.checkable]),R=function(e){$||D&&!t.disableCheckbox&&C.onNodeCheck(e,J8(t),!m)},B=n.default.useMemo((function(){return"boolean"==typeof x?x:C.selectable}),[x,C.selectable]),N=function(e){C.onNodeClick(e,J8(t)),B?function(e){$||C.onNodeSelect(e,J8(t))}(e):R(e)},L=function(e){C.onNodeDoubleClick(e,J8(t))},j=function(e){C.onNodeMouseEnter(e,J8(t))},_=function(e){C.onNodeMouseLeave(e,J8(t))},I=function(e){C.onNodeContextMenu(e,J8(t))},z=n.default.useMemo((function(){return!(!C.draggable||C.draggable.nodeDraggable&&!C.draggable.nodeDraggable(O))}),[C.draggable,O]),Q=function(e){b||C.onNodeExpand(e,J8(t))},H=n.default.useMemo((function(){var t=(W8(C.keyEntities,o)||{}).children;return Boolean((t||[]).length)}),[C.keyEntities,o]),V=n.default.useMemo((function(){return!1!==u&&(u||!C.loadData&&!H||C.loadData&&t.loaded&&!H)}),[u,C.loadData,H,t.loaded]);n.default.useEffect((function(){b||"function"!=typeof C.loadData||!p||V||t.loaded||C.onNodeLoad(J8(t))}),[b,C.loadData,C.onNodeLoad,p,V,t]);var W=n.default.useMemo((function(){var t;return null!==(t=C.draggable)&&void 0!==t&&t.icon?n.default.createElement("span",{className:"".concat(C.prefixCls,"-draggable-icon")},C.draggable.icon):null}),[C.draggable]),F=function(e){var n=t.switcherIcon||C.switcherIcon;return"function"==typeof n?n(j8(j8({},t),{},{isLeaf:e})):n},q=n.default.useMemo((function(){if(!D)return null;var e="boolean"!=typeof D?D:null;return n.default.createElement("span",{className:At()("".concat(C.prefixCls,"-checkbox"),N8(N8(N8({},"".concat(C.prefixCls,"-checkbox-checked"),m),"".concat(C.prefixCls,"-checkbox-indeterminate"),!m&&v),"".concat(C.prefixCls,"-checkbox-disabled"),$||t.disableCheckbox)),onClick:R,role:"checkbox","aria-checked":v?"mixed":m,"aria-disabled":$||t.disableCheckbox,"aria-label":"Select ".concat("string"==typeof t.title?t.title:"tree node")},e)}),[D,m,v,$,t.disableCheckbox,t.title]),X=n.default.useMemo((function(){return V?null:p?e3:n3}),[V,p]),K=n.default.useMemo((function(){return n.default.createElement("span",{className:At()("".concat(C.prefixCls,"-iconEle"),"".concat(C.prefixCls,"-icon__").concat(X||"docu"),N8({},"".concat(C.prefixCls,"-icon_loading"),b))})}),[C.prefixCls,X,b]),Z=n.default.useMemo((function(){var e=Boolean(C.draggable);return!t.disabled&&e&&C.dragOverNodeKey===o?C.dropIndicatorRender({dropPosition:C.dropPosition,dropLevelOffset:C.dropLevelOffset,indent:C.indent,prefixCls:C.prefixCls,direction:C.direction}):null}),[C.dropPosition,C.dropLevelOffset,C.indent,C.prefixCls,C.direction,C.draggable,C.dragOverNodeKey,C.dropIndicatorRender]),Y=n.default.useMemo((function(){var e,i,r=t.title,o=void 0===r?"---":r,s="".concat(C.prefixCls,"-node-content-wrapper");if(C.showIcon){var a=t.icon||C.icon;e=a?n.default.createElement("span",{className:At()("".concat(C.prefixCls,"-iconEle"),"".concat(C.prefixCls,"-icon__customize"))},"function"==typeof a?a(t):a):K}else C.loadData&&b&&(e=K);return i="function"==typeof o?o(O):C.titleRender?C.titleRender(O):o,n.default.createElement("span",{ref:M,title:"string"==typeof o?o:"",className:At()(s,"".concat(s,"-").concat(X||"normal"),N8({},"".concat(C.prefixCls,"-node-selected"),!$&&(g||P))),onMouseEnter:j,onMouseLeave:_,onContextMenu:I,onClick:N,onDoubleClick:L},e,n.default.createElement("span",{className:"".concat(C.prefixCls,"-title")},i),Z)}),[C.prefixCls,C.showIcon,t,C.icon,K,C.titleRender,O,X,j,_,I,N,L]),G=De(k,{aria:!0,data:!0}),U=(W8(C.keyEntities,o)||{}).level,J=f[f.length-1],tt=!$&&z,et=C.draggingNodeKey===o,nt=void 0!==x?{"aria-selected":!!x}:void 0;return n.default.createElement("div",R8({ref:y,role:"treeitem","aria-expanded":u?void 0:p,className:At()(s,"".concat(C.prefixCls,"-treenode"),(r={},N8(N8(N8(N8(N8(N8(N8(N8(N8(N8(r,"".concat(C.prefixCls,"-treenode-disabled"),$),"".concat(C.prefixCls,"-treenode-switcher-").concat(p?"open":"close"),!u),"".concat(C.prefixCls,"-treenode-checkbox-checked"),m),"".concat(C.prefixCls,"-treenode-checkbox-indeterminate"),v),"".concat(C.prefixCls,"-treenode-selected"),g),"".concat(C.prefixCls,"-treenode-loading"),b),"".concat(C.prefixCls,"-treenode-active"),w),"".concat(C.prefixCls,"-treenode-leaf-last"),J),"".concat(C.prefixCls,"-treenode-draggable"),z),"dragging",et),N8(N8(N8(N8(N8(N8(N8(r,"drop-target",C.dropTargetKey===o),"drop-container",C.dropContainerKey===o),"drag-over",!$&&l),"drag-over-gap-top",!$&&c),"drag-over-gap-bottom",!$&&h),"filter-node",null===(i=C.filterTreeNode)||void 0===i?void 0:i.call(C,J8(t))),"".concat(C.prefixCls,"-treenode-leaf"),V))),style:a,draggable:tt,onDragStart:tt?function(e){e.stopPropagation(),T(!0),C.onNodeDragStart(e,t);try{e.dataTransfer.setData("text/plain","")}catch(t){}}:void 0,onDragEnter:z?function(e){e.preventDefault(),e.stopPropagation(),C.onNodeDragEnter(e,t)}:void 0,onDragOver:z?function(e){e.preventDefault(),e.stopPropagation(),C.onNodeDragOver(e,t)}:void 0,onDragLeave:z?function(e){e.stopPropagation(),C.onNodeDragLeave(e,t)}:void 0,onDrop:z?function(e){e.preventDefault(),e.stopPropagation(),T(!1),C.onNodeDrop(e,t)}:void 0,onDragEnd:z?function(e){e.stopPropagation(),T(!1),C.onNodeDragEnd(e,t)}:void 0,onMouseMove:S},nt,G),n.default.createElement(V8,{prefixCls:C.prefixCls,level:U,isStart:d,isEnd:f}),W,function(){if(V){var t=F(!0);return!1!==t?n.default.createElement("span",{className:At()("".concat(C.prefixCls,"-switcher"),"".concat(C.prefixCls,"-switcher-noop"))},t):null}var e=F(!1);return!1!==e?n.default.createElement("span",{onClick:Q,className:At()("".concat(C.prefixCls,"-switcher"),"".concat(C.prefixCls,"-switcher_").concat(p?e3:n3))},e):null}(),q,Y)};i3.isTreeNode=1;var r3=i3;function o3(t,e){if(!t)return[];var n=t.slice(),i=n.indexOf(e);return i>=0&&n.splice(i,1),n}function s3(t,e){var n=(t||[]).slice();return-1===n.indexOf(e)&&n.push(e),n}function a3(t){return t.split("-")}function l3(t,e){var n=[];return function t(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){var i=e.key,r=e.children;n.push(i),t(r)}))}(W8(e,t).children),n}function c3(t){if(t.parent){var e=a3(t.pos);return Number(e[e.length-1])===t.parent.children.length-1}return!1}function h3(t,e,n,i,r,o,s,a,l,c){var h,u=t.clientX,d=t.clientY,f=t.target.getBoundingClientRect(),p=f.top,g=f.height,m=(("rtl"===c?-1:1)*(((null==r?void 0:r.x)||0)-u)-12)/i,v=l.filter((function(t){var e;return null===(e=a[t])||void 0===e||null===(e=e.children)||void 0===e?void 0:e.length})),b=W8(a,n.eventKey);if(d<p+g/2){var y=s.findIndex((function(t){return t.key===b.key})),w=s[y<=0?0:y-1].key;b=W8(a,w)}var O=b.key,S=b,x=b.key,k=0,C=0;if(!v.includes(O))for(var A=0;A<m&&c3(b);A+=1)b=b.parent,C+=1;var M,E=e.data,P=b.node,T=!0;return M=a3(b.pos),0===Number(M[M.length-1])&&0===b.level&&d<p+g/2&&o({dragNode:E,dropNode:P,dropPosition:-1})&&b.key===n.eventKey?k=-1:(S.children||[]).length&&v.includes(x)?o({dragNode:E,dropNode:P,dropPosition:0})?k=0:T=!1:0===C?m>-1.5?o({dragNode:E,dropNode:P,dropPosition:1})?k=1:T=!1:o({dragNode:E,dropNode:P,dropPosition:0})?k=0:o({dragNode:E,dropNode:P,dropPosition:1})?k=1:T=!1:o({dragNode:E,dropNode:P,dropPosition:1})?k=1:T=!1,{dropPosition:k,dropLevelOffset:C,dropTargetKey:b.key,dropTargetPos:b.pos,dragOverNodeKey:x,dropContainerKey:0===k?null:(null===(h=b.parent)||void 0===h?void 0:h.key)||null,dropAllowed:T}}function u3(t,e){if(t)return e.multiple?t.slice():t.length?[t[0]]:t}function d3(t){if(!t)return null;var e;if(Array.isArray(t))e={checkedKeys:t,halfCheckedKeys:void 0};else{if("object"!==D8(t))return(0,p.Ay)(!1,"`checkedKeys` is not an array or an object"),null;e={checkedKeys:t.checked||void 0,halfCheckedKeys:t.halfChecked||void 0}}return e}function f3(t,e){var n=new Set;function i(t){if(!n.has(t)){var r=W8(e,t);if(r){n.add(t);var o=r.parent;r.node.disabled||o&&i(o.key)}}}return(t||[]).forEach((function(t){i(t)})),$8(n)}function p3(t,e){var n=new Set;return t.forEach((function(t){e.has(t)||n.add(t)})),n}function g3(t){var e=t||{},n=e.disabled,i=e.disableCheckbox,r=e.checkable;return!(!n&&!i)||!1===r}function m3(t,e,n,i){var r,o=[];r=i||g3;var s,a=new Set(t.filter((function(t){var e=!!W8(n,t);return e||o.push(t),e}))),l=new Map,c=0;return Object.keys(n).forEach((function(t){var e=n[t],i=e.level,r=l.get(i);r||(r=new Set,l.set(i,r)),r.add(e),c=Math.max(c,i)})),(0,p.Ay)(!o.length,"Tree missing follow keys: ".concat(o.slice(0,100).map((function(t){return"'".concat(t,"'")})).join(", "))),s=!0===e?function(t,e,n,i){for(var r=new Set(t),o=new Set,s=0;s<=n;s+=1)(e.get(s)||new Set).forEach((function(t){var e=t.key,n=t.node,o=t.children,s=void 0===o?[]:o;r.has(e)&&!i(n)&&s.filter((function(t){return!i(t.node)})).forEach((function(t){r.add(t.key)}))}));for(var a=new Set,l=n;l>=0;l-=1)(e.get(l)||new Set).forEach((function(t){var e=t.parent,n=t.node;if(!i(n)&&t.parent&&!a.has(t.parent.key))if(i(t.parent.node))a.add(e.key);else{var s=!0,l=!1;(e.children||[]).filter((function(t){return!i(t.node)})).forEach((function(t){var e=t.key,n=r.has(e);s&&!n&&(s=!1),l||!n&&!o.has(e)||(l=!0)})),s&&r.add(e.key),l&&o.add(e.key),a.add(e.key)}}));return{checkedKeys:Array.from(r),halfCheckedKeys:Array.from(p3(o,r))}}(a,l,c,r):function(t,e,n,i,r){for(var o=new Set(t),s=new Set(e),a=0;a<=i;a+=1)(n.get(a)||new Set).forEach((function(t){var e=t.key,n=t.node,i=t.children,a=void 0===i?[]:i;o.has(e)||s.has(e)||r(n)||a.filter((function(t){return!r(t.node)})).forEach((function(t){o.delete(t.key)}))}));s=new Set;for(var l=new Set,c=i;c>=0;c-=1)(n.get(c)||new Set).forEach((function(t){var e=t.parent,n=t.node;if(!r(n)&&t.parent&&!l.has(t.parent.key))if(r(t.parent.node))l.add(e.key);else{var i=!0,a=!1;(e.children||[]).filter((function(t){return!r(t.node)})).forEach((function(t){var e=t.key,n=o.has(e);i&&!n&&(i=!1),a||!n&&!s.has(e)||(a=!0)})),i||o.delete(e.key),a&&s.add(e.key),l.add(e.key)}}));return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(p3(s,o))}}(a,e.halfCheckedKeys,l,c,r),s}function v3(){return v3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},v3.apply(null,arguments)}function b3(t){return b3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b3(t)}function y3(t,e,n){return(e=function(t){var e=function(t){if("object"!=b3(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=b3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b3(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function O3(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w3(Object(n),!0).forEach((function(e){y3(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w3(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function S3(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var x3=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],k3=(0,n.forwardRef)((function(t,e){var i,r,o=t.prefixCls,s=void 0===o?"rc-checkbox":o,a=t.className,l=t.style,c=t.checked,h=t.disabled,u=t.defaultChecked,d=void 0!==u&&u,f=t.type,p=void 0===f?"checkbox":f,g=t.title,m=t.onChange,v=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,x3),b=(0,n.useRef)(null),y=(0,n.useRef)(null),w=(i=(0,mo.A)(d,{value:c}),r=2,function(t){if(Array.isArray(t))return t}(i)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(i,r)||function(t,e){if(t){if("string"==typeof t)return S3(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S3(t,e):void 0}}(i,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),O=w[0],S=w[1];(0,n.useImperativeHandle)(e,(function(){return{focus:function(t){var e;null===(e=b.current)||void 0===e||e.focus(t)},blur:function(){var t;null===(t=b.current)||void 0===t||t.blur()},input:b.current,nativeElement:y.current}}));var x=At()(s,a,y3(y3({},"".concat(s,"-checked"),O),"".concat(s,"-disabled"),h));return n.createElement("span",{className:x,title:g,style:l,ref:y},n.createElement("input",v3({},v,{className:"".concat(s,"-input"),ref:b,onChange:function(e){h||("checked"in t||S(e.target.checked),null==m||m({target:O3(O3({},t),{},{type:p,checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},disabled:h,checked:!!O,type:p})),n.createElement("span",{className:"".concat(s,"-inner")}))})),C3=k3,A3=__webpack_require__(57),M3=__webpack_require__(4424),E3=n.default.createContext(null);const P3=t=>{const{checkboxCls:e}=t,n=`${e}-wrapper`;return[{[`${e}-group`]:Object.assign(Object.assign({},(0,J.dF)(t)),{display:"inline-flex",flexWrap:"wrap",columnGap:t.marginXS,[`> ${t.antCls}-row`]:{flex:1}}),[n]:Object.assign(Object.assign({},(0,J.dF)(t)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${n}`]:{marginInlineStart:0},[`&${n}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[e]:Object.assign(Object.assign({},(0,J.dF)(t)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:t.borderRadiusSM,alignSelf:"center",[`${e}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${e}-inner`]:Object.assign({},(0,J.jk)(t))},[`${e}-inner`]:{boxSizing:"border-box",display:"block",width:t.checkboxSize,height:t.checkboxSize,direction:"ltr",backgroundColor:t.colorBgContainer,border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusSM,borderCollapse:"separate",transition:`all ${t.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:t.calc(t.checkboxSize).div(14).mul(5).equal(),height:t.calc(t.checkboxSize).div(14).mul(8).equal(),border:`${(0,h.zA)(t.lineWidthBold)} solid ${t.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${t.motionDurationFast} ${t.motionEaseInBack}, opacity ${t.motionDurationFast}`}},"& + span":{paddingInlineStart:t.paddingXS,paddingInlineEnd:t.paddingXS}})},{[`\n        ${n}:not(${n}-disabled),\n        ${e}:not(${e}-disabled)\n      `]:{[`&:hover ${e}-inner`]:{borderColor:t.colorPrimary}},[`${n}:not(${n}-disabled)`]:{[`&:hover ${e}-checked:not(${e}-disabled) ${e}-inner`]:{backgroundColor:t.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${e}-checked:not(${e}-disabled):after`]:{borderColor:t.colorPrimaryHover}}},{[`${e}-checked`]:{[`${e}-inner`]:{backgroundColor:t.colorPrimary,borderColor:t.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${t.motionDurationMid} ${t.motionEaseOutBack} ${t.motionDurationFast}`}}},[`\n        ${n}-checked:not(${n}-disabled),\n        ${e}-checked:not(${e}-disabled)\n      `]:{[`&:hover ${e}-inner`]:{backgroundColor:t.colorPrimaryHover,borderColor:"transparent"}}},{[e]:{"&-indeterminate":{[`${e}-inner`]:{backgroundColor:`${t.colorBgContainer} !important`,borderColor:`${t.colorBorder} !important`,"&:after":{top:"50%",insetInlineStart:"50%",width:t.calc(t.fontSizeLG).div(2).equal(),height:t.calc(t.fontSizeLG).div(2).equal(),backgroundColor:t.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${e}-inner`]:{backgroundColor:`${t.colorBgContainer} !important`,borderColor:`${t.colorPrimary} !important`}}}},{[`${n}-disabled`]:{cursor:"not-allowed"},[`${e}-disabled`]:{[`&, ${e}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${e}-inner`]:{background:t.colorBgContainerDisabled,borderColor:t.colorBorder,"&:after":{borderColor:t.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:t.colorTextDisabled},[`&${e}-indeterminate ${e}-inner::after`]:{background:t.colorTextDisabled}}}]};function T3(t,e){const n=(0,Ji.oX)(e,{checkboxCls:`.${t}`,checkboxSize:e.controlInteractiveSize});return[P3(n)]}var $3=(0,Ui.OF)("Checkbox",((t,{prefixCls:e})=>[T3(e,t)]));function D3(t){const e=n.default.useRef(null),i=()=>{hl.A.cancel(e.current),e.current=null};return[()=>{i(),e.current=(0,hl.A)((()=>{e.current=null}))},n=>{e.current&&(n.stopPropagation(),i()),null==t||t(n)}]}const R3=(t,e)=>{var i;const{prefixCls:r,className:o,rootClassName:s,children:a,indeterminate:l=!1,style:h,onMouseEnter:u,onMouseLeave:d,skipGroup:f=!1,disabled:p}=t,g=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:m,direction:v,checkbox:b}=n.useContext(c.QO),y=n.useContext(E3),{isFormItemInput:w}=n.useContext(zi),O=n.useContext(V.A),S=null!==(i=(null==y?void 0:y.disabled)||p)&&void 0!==i?i:O,x=n.useRef(g.value),k=n.useRef(null),C=(0,ie.K4)(e,k);n.useEffect((()=>{null==y||y.registerValue(g.value)}),[]),n.useEffect((()=>{if(!f)return g.value!==x.current&&(null==y||y.cancelValue(x.current),null==y||y.registerValue(g.value),x.current=g.value),()=>null==y?void 0:y.cancelValue(g.value)}),[g.value]),n.useEffect((()=>{var t;(null===(t=k.current)||void 0===t?void 0:t.input)&&(k.current.input.indeterminate=l)}),[l]);const A=m("checkbox",r),M=Zi(A),[E,P,T]=$3(A,M),$=Object.assign({},g);y&&!f&&($.onChange=(...t)=>{g.onChange&&g.onChange.apply(g,t),y.toggleOption&&y.toggleOption({label:a,value:g.value})},$.name=y.name,$.checked=y.value.includes(g.value));const D=At()(`${A}-wrapper`,{[`${A}-rtl`]:"rtl"===v,[`${A}-wrapper-checked`]:$.checked,[`${A}-wrapper-disabled`]:S,[`${A}-wrapper-in-form-item`]:w},null==b?void 0:b.className,o,s,T,M,P),R=At()({[`${A}-indeterminate`]:l},M3.D,P),[B,N]=D3($.onClick);return E(n.createElement(A3.A,{component:"Checkbox",disabled:S},n.createElement("label",{className:D,style:Object.assign(Object.assign({},null==b?void 0:b.style),h),onMouseEnter:u,onMouseLeave:d,onClick:B},n.createElement(C3,Object.assign({},$,{onClick:N,prefixCls:A,className:R,disabled:S,ref:C})),null!=a&&n.createElement("span",{className:`${A}-label`},a))))};var B3=n.forwardRef(R3);const N3=n.forwardRef(((t,e)=>{const{defaultValue:i,children:r,options:o=[],prefixCls:s,className:a,rootClassName:h,style:u,onChange:d}=t,f=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:p,direction:g}=n.useContext(c.QO),[m,v]=n.useState(f.value||i||[]),[b,y]=n.useState([]);n.useEffect((()=>{"value"in f&&v(f.value||[])}),[f.value]);const w=n.useMemo((()=>o.map((t=>"string"==typeof t||"number"==typeof t?{label:t,value:t}:t))),[o]),O=t=>{y((e=>e.filter((e=>e!==t))))},S=t=>{y((e=>[].concat((0,l.A)(e),[t])))},x=t=>{const e=m.indexOf(t.value),n=(0,l.A)(m);-1===e?n.push(t.value):n.splice(e,1),"value"in f||v(n),null==d||d(n.filter((t=>b.includes(t))).sort(((t,e)=>w.findIndex((e=>e.value===t))-w.findIndex((t=>t.value===e)))))},k=p("checkbox",s),C=`${k}-group`,A=Zi(k),[M,E,P]=$3(k,A),T=(0,Yi.A)(f,["value","disabled"]),$=o.length?w.map((t=>n.createElement(B3,{prefixCls:k,key:t.value.toString(),disabled:"disabled"in t?t.disabled:f.disabled,value:t.value,checked:m.includes(t.value),onChange:t.onChange,className:At()(`${C}-item`,t.className),style:t.style,title:t.title,id:t.id,required:t.required},t.label))):r,D=n.useMemo((()=>({toggleOption:x,value:m,disabled:f.disabled,name:f.name,registerValue:S,cancelValue:O})),[x,m,f.disabled,f.name,S,O]),R=At()(C,{[`${C}-rtl`]:"rtl"===g},a,h,P,A,E);return M(n.createElement("div",Object.assign({className:R,style:u},T,{ref:e}),n.createElement(E3.Provider,{value:D},$)))}));var L3=N3;const j3=B3;j3.Group=L3,j3.__ANT_CHECKBOX=!0;var _3=j3,I3={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},z3=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:I3}))},Q3=n.forwardRef(z3),H3={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},V3=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:H3}))},W3=n.forwardRef(V3);function F3(){return F3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},F3.apply(null,arguments)}function q3(t){return q3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q3(t)}function X3(t,e,n){return(e=function(t){var e=function(t){if("object"!=q3(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=q3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==q3(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K3(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var Z3=Pe.ESC,Y3=Pe.TAB,G3=(0,n.forwardRef)((function(t,e){var i=t.overlay,r=t.arrow,o=t.prefixCls,s=(0,n.useMemo)((function(){return"function"==typeof i?i():i}),[i]),a=(0,ie.K4)(e,(0,ie.A9)(s));return n.default.createElement(n.default.Fragment,null,r&&n.default.createElement("div",{className:"".concat(o,"-arrow")}),n.default.cloneElement(s,{ref:(0,ie.f3)(s)?a:void 0}))})),U3={adjustX:1,adjustY:1},J3=[0,0],t4={topLeft:{points:["bl","tl"],overflow:U3,offset:[0,-4],targetOffset:J3},top:{points:["bc","tc"],overflow:U3,offset:[0,-4],targetOffset:J3},topRight:{points:["br","tr"],overflow:U3,offset:[0,-4],targetOffset:J3},bottomLeft:{points:["tl","bl"],overflow:U3,offset:[0,4],targetOffset:J3},bottom:{points:["tc","bc"],overflow:U3,offset:[0,4],targetOffset:J3},bottomRight:{points:["tr","br"],overflow:U3,offset:[0,4],targetOffset:J3}},e4=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function n4(t,e){var i,r,o,s=t.arrow,a=void 0!==s&&s,l=t.prefixCls,c=void 0===l?"rc-dropdown":l,h=t.transitionName,u=t.animation,d=t.align,f=t.placement,p=void 0===f?"bottomLeft":f,g=t.placements,m=void 0===g?t4:g,v=t.getPopupContainer,b=t.showAction,y=t.hideAction,w=t.overlayClassName,O=t.overlayStyle,S=t.visible,x=t.trigger,k=void 0===x?["hover"]:x,C=t.autoFocus,A=t.overlay,M=t.children,E=t.onVisibleChange,P=function(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,e4),T=(r=n.default.useState(),o=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(r,o)||function(t,e){if(t){if("string"==typeof t)return K3(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K3(t,e):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),$=T[0],D=T[1],R="visible"in t?S:$,B=n.default.useRef(null),N=n.default.useRef(null),L=n.default.useRef(null);n.default.useImperativeHandle(e,(function(){return B.current}));var j=function(t){D(t),null==E||E(t)};!function(t){var e=t.visible,i=t.triggerRef,r=t.onVisibleChange,o=t.autoFocus,s=t.overlayRef,a=n.useRef(!1),l=function(){var t,n;e&&(null===(t=i.current)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t),null==r||r(!1))},c=function(){var t;return!(null===(t=s.current)||void 0===t||!t.focus||(s.current.focus(),a.current=!0,0))},h=function(t){switch(t.keyCode){case Z3:l();break;case Y3:var e=!1;a.current||(e=c()),e?t.preventDefault():l()}};n.useEffect((function(){return e?(window.addEventListener("keydown",h),o&&(0,hl.A)(c,3),function(){window.removeEventListener("keydown",h),a.current=!1}):function(){a.current=!1}}),[e])}({visible:R,triggerRef:L,onVisibleChange:j,autoFocus:C,overlayRef:N});var _,I,z,Q=function(){return n.default.createElement(G3,{ref:N,overlay:A,prefixCls:c,arrow:a})},H=n.default.cloneElement(M,{className:At()(null===(i=M.props)||void 0===i?void 0:i.className,R&&(_=t.openClassName,void 0!==_?_:"".concat(c,"-open"))),ref:(0,ie.f3)(M)?(0,ie.K4)(L,(0,ie.A9)(M)):void 0}),V=y;return V||-1===k.indexOf("contextMenu")||(V=["click"]),n.default.createElement(ra,F3({builtinPlacements:m},P,{prefixCls:c,ref:B,popupClassName:At()(w,X3({},"".concat(c,"-show-arrow"),a)),popupStyle:O,action:k,showAction:b,hideAction:V,popupPlacement:p,popupAlign:d,popupTransitionName:h,popupAnimation:u,popupVisible:R,stretch:(I=t.minOverlayWidthMatchTrigger,z=t.alignPoint,("minOverlayWidthMatchTrigger"in t?I:!z)?"minWidth":""),popup:"function"==typeof A?Q:Q(),onPopupVisibleChange:j,onPopupClick:function(e){var n=t.onOverlayClick;D(!1),n&&n(e)},getPopupContainer:v}),H)}var i4=n.default.forwardRef(n4);function r4(){return r4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r4.apply(null,arguments)}function o4(t){return o4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o4(t)}function s4(t){var e=function(t){if("object"!=o4(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o4(e)?e:e+""}function a4(t,e,n){return(e=s4(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c4(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l4(Object(n),!0).forEach((function(e){a4(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l4(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h4(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function u4(t,e){if(t){if("string"==typeof t)return h4(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h4(t,e):void 0}}function d4(t){return function(t){if(Array.isArray(t))return h4(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||u4(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f4(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||u4(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p4(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function g4(){return g4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},g4.apply(null,arguments)}function m4(t){return m4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m4(t)}function v4(t,e,n){return(e=function(t){var e=function(t){if("object"!=m4(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=m4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m4(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y4(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b4(Object(n),!0).forEach((function(e){v4(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b4(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w4(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function O4(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return w4(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w4(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S4(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var x4=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],k4=void 0;function C4(t,e){var i=t.prefixCls,r=t.invalidate,o=t.item,s=t.renderItem,a=t.responsive,l=t.responsiveDisabled,c=t.registerSize,h=t.itemKey,u=t.className,d=t.style,f=t.children,p=t.display,g=t.order,m=t.component,v=void 0===m?"div":m,b=S4(t,x4),y=a&&!p;function w(t){c(h,t)}n.useEffect((function(){return function(){w(null)}}),[]);var O,S=s&&o!==k4?s(o,{index:g}):f;r||(O={opacity:y?0:1,height:y?0:k4,overflowY:y?"hidden":k4,order:a?g:k4,pointerEvents:y?"none":k4,position:y?"absolute":k4});var x={};y&&(x["aria-hidden"]=!0);var k=n.createElement(v,g4({className:At()(!r&&i,u),style:y4(y4({},O),d)},x,b,{ref:e}),S);return a&&(k=n.createElement(ms,{onResize:function(t){w(t.offsetWidth)},disabled:l},k)),k}var A4=n.forwardRef(C4);A4.displayName="Item";var M4=A4;function E4(t,e){var i=O4(n.useState(e),2),r=i[0],o=i[1];return[r,(0,wr.A)((function(e){t((function(){o(e)}))}))]}var P4=n.default.createContext(null),T4=["component"],$4=["className"],D4=["className"],R4=function(t,e){var i=n.useContext(P4);if(!i){var r=t.component,o=void 0===r?"div":r,s=S4(t,T4);return n.createElement(o,g4({},s,{ref:e}))}var a=i.className,l=S4(i,$4),c=t.className,h=S4(t,D4);return n.createElement(P4.Provider,{value:null},n.createElement(M4,g4({ref:e,className:At()(a,c)},l,h)))},B4=n.forwardRef(R4);B4.displayName="RawItem";var N4=B4,L4=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],j4="responsive",_4="invalidate";function I4(t){return"+ ".concat(t.length," ...")}function z4(t,e){var i,r=t.prefixCls,o=void 0===r?"rc-overflow":r,s=t.data,a=void 0===s?[]:s,l=t.renderItem,c=t.renderRawItem,h=t.itemKey,u=t.itemWidth,d=void 0===u?10:u,f=t.ssr,p=t.style,g=t.className,m=t.maxCount,v=t.renderRest,b=t.renderRawRest,y=t.suffix,w=t.component,O=void 0===w?"div":w,S=t.itemComponent,x=t.onVisibleChange,k=S4(t,L4),C="full"===f,A=(i=n.useRef(null),function(t){i.current||(i.current=[],function(t){if("undefined"==typeof MessageChannel)(0,hl.A)(t);else{var e=new MessageChannel;e.port1.onmessage=function(){return t()},e.port2.postMessage(void 0)}}((function(){(0,ne.unstable_batchedUpdates)((function(){i.current.forEach((function(t){t()})),i.current=null}))}))),i.current.push(t)}),M=O4(E4(A,null),2),E=M[0],P=M[1],T=E||0,$=O4(E4(A,new Map),2),D=$[0],R=$[1],B=O4(E4(A,0),2),N=B[0],L=B[1],j=O4(E4(A,0),2),_=j[0],I=j[1],z=O4(E4(A,0),2),Q=z[0],H=z[1],V=O4((0,n.useState)(null),2),W=V[0],F=V[1],q=O4((0,n.useState)(null),2),X=q[0],K=q[1],Z=n.useMemo((function(){return null===X&&C?Number.MAX_SAFE_INTEGER:X||0}),[X,E]),Y=O4((0,n.useState)(!1),2),G=Y[0],U=Y[1],J="".concat(o,"-item"),tt=Math.max(N,_),et=m===j4,nt=a.length&&et,it=m===_4,rt=nt||"number"==typeof m&&a.length>m,ot=(0,n.useMemo)((function(){var t=a;return nt?t=null===E&&C?a:a.slice(0,Math.min(a.length,T/d)):"number"==typeof m&&(t=a.slice(0,m)),t}),[a,d,E,m,nt]),st=(0,n.useMemo)((function(){return nt?a.slice(Z+1):a.slice(ot.length)}),[a,ot,nt,Z]),at=(0,n.useCallback)((function(t,e){var n;return"function"==typeof h?h(t):null!==(n=h&&(null==t?void 0:t[h]))&&void 0!==n?n:e}),[h]),lt=(0,n.useCallback)(l||function(t){return t},[l]);function ct(t,e,n){(X!==t||void 0!==e&&e!==W)&&(K(t),n||(U(t<a.length-1),null==x||x(t)),void 0!==e&&F(e))}function ht(t,e){R((function(n){var i=new Map(n);return null===e?i.delete(t):i.set(t,e),i}))}function ut(t){return D.get(at(ot[t],t))}(0,se.A)((function(){if(T&&"number"==typeof tt&&ot){var t=Q,e=ot.length,n=e-1;if(!e)return void ct(0,null);for(var i=0;i<e;i+=1){var r=ut(i);if(C&&(r=r||0),void 0===r){ct(i-1,void 0,!0);break}if(t+=r,0===n&&t<=T||i===n-1&&t+ut(n)<=T){ct(n,null);break}if(t+tt>T){ct(i-1,t-r-Q+_);break}}y&&ut(0)+Q>T&&F(null)}}),[T,D,_,Q,at,ot]);var dt=G&&!!st.length,ft={};null!==W&&nt&&(ft={position:"absolute",left:W,top:0});var pt={prefixCls:J,responsive:nt,component:S,invalidate:it},gt=c?function(t,e){var i=at(t,e);return n.createElement(P4.Provider,{key:i,value:y4(y4({},pt),{},{order:e,item:t,itemKey:i,registerSize:ht,display:e<=Z})},c(t,e))}:function(t,e){var i=at(t,e);return n.createElement(M4,g4({},pt,{order:e,key:i,item:t,renderItem:lt,itemKey:i,registerSize:ht,display:e<=Z}))},mt={order:dt?Z:Number.MAX_SAFE_INTEGER,className:"".concat(J,"-rest"),registerSize:function(t,e){I(e),L(_)},display:dt},vt=v||I4,bt=b?n.createElement(P4.Provider,{value:y4(y4({},pt),mt)},b(st)):n.createElement(M4,g4({},pt,mt),"function"==typeof vt?vt(st):vt),yt=n.createElement(O,g4({className:At()(!it&&o,g),style:p,ref:e},k),ot.map(gt),rt?bt:null,y&&n.createElement(M4,g4({},pt,{responsive:et,responsiveDisabled:!nt,order:Z,className:"".concat(J,"-suffix"),registerSize:function(t,e){H(e)},display:!0,style:ft}),y));return et?n.createElement(ms,{onResize:function(t,e){P(e.clientWidth)},disabled:!nt},yt):yt}var Q4=n.forwardRef(z4);Q4.displayName="Overflow",Q4.Item=N4,Q4.RESPONSIVE=j4,Q4.INVALIDATE=_4;var H4=Q4,V4=n.createContext(null);function W4(t,e){return void 0===t?null:"".concat(t,"-").concat(e)}function F4(t){return W4(n.useContext(V4),t)}var q4=["children","locked"],X4=n.createContext(null);function K4(t){var e=t.children,i=t.locked,r=p4(t,q4),o=n.useContext(X4),s=(0,d.A)((function(){return t=r,e=c4({},o),Object.keys(t).forEach((function(n){var i=t[n];void 0!==i&&(e[n]=i)})),e;var t,e}),[o,r],(function(t,e){return!(i||t[0]===e[0]&&(0,F.A)(t[1],e[1],!0))}));return n.createElement(X4.Provider,{value:s},e)}var Z4=[],Y4=n.createContext(null);function G4(){return n.useContext(Y4)}var U4=n.createContext(Z4);function J4(t){var e=n.useContext(U4);return n.useMemo((function(){return void 0!==t?[].concat(d4(e),[t]):e}),[e,t])}var t6=n.createContext(null),e6=n.createContext({}),n6=__webpack_require__(2490);function i6(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,Vs.A)(t)){var n=t.nodeName.toLowerCase(),i=["input","select","textarea","button"].includes(n)||t.isContentEditable||"a"===n&&!!t.getAttribute("href"),r=t.getAttribute("tabindex"),o=Number(r),s=null;return r&&!Number.isNaN(o)?s=o:i&&null===s&&(s=0),i&&t.disabled&&(s=null),null!==s&&(s>=0||e&&s<0)}return!1}var r6=Pe.LEFT,o6=Pe.RIGHT,s6=Pe.UP,a6=Pe.DOWN,l6=Pe.ENTER,c6=Pe.ESC,h6=Pe.HOME,u6=Pe.END,d6=[s6,a6,r6,o6];function f6(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,n6.A)(t.querySelectorAll("*")).filter((function(t){return i6(t,e)}));return i6(t,e)&&n.unshift(t),n}(t,!0).filter((function(t){return e.has(t)}))}function p6(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return null;var r=f6(t,e),o=r.length,s=r.findIndex((function(t){return n===t}));return i<0?-1===s?s=o-1:s-=1:i>0&&(s+=1),r[s=(s+o)%o]}var g6=function(t,e){var n=new Set,i=new Map,r=new Map;return t.forEach((function(t){var o=document.querySelector("[data-menu-id='".concat(W4(e,t),"']"));o&&(n.add(o),r.set(o,t),i.set(t,o))})),{elements:n,key2element:i,element2key:r}};var m6="__RC_UTIL_PATH_SPLIT__",v6=function(t){return t.join(m6)},b6="rc-menu-more";function y6(t){var e=n.useRef(t);e.current=t;var i=n.useCallback((function(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(i))}),[]);return t?i:void 0}var w6=Math.random().toFixed(5).toString().slice(2),O6=0;function S6(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,s4(i.key),i)}}function x6(t,e){return x6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x6(t,e)}function k6(t){return k6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k6(t)}function C6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C6=function(){return!!t})()}function A6(t,e,i,r){var o=n.useContext(X4),s=o.activeKey,a=o.onActive,l=o.onInactive,c={active:s===t};return e||(c.onMouseEnter=function(e){null==i||i({key:t,domEvent:e}),a(t)},c.onMouseLeave=function(e){null==r||r({key:t,domEvent:e}),l(t)}),c}function M6(t){var e=n.useContext(X4),i=e.mode,r=e.rtl,o=e.inlineIndent;return"inline"!==i?null:r?{paddingRight:t*o}:{paddingLeft:t*o}}function E6(t){var e,i=t.icon,r=t.props,o=t.children;return null===i||!1===i?null:("function"==typeof i?e=n.createElement(i,c4({},r)):"boolean"!=typeof i&&(e=i),e||o||null)}var P6=["item"];function T6(t){var e=t.item,n=p4(t,P6);return Object.defineProperty(n,"item",{get:function(){return(0,p.Ay)(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}var $6=["title","attribute","elementRef"],D6=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],R6=["active"],B6=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x6(t,e)}(o,t);var e,i,r=function(t){var e=C6();return function(){var n,i=k6(t);if(e){var r=k6(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"==o4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,(i=[{key:"render",value:function(){var t=this.props,e=t.title,i=t.attribute,r=t.elementRef,o=p4(t,$6),s=(0,Yi.A)(o,["eventKey","popupClassName","popupOffset","onTitleClick"]);return(0,p.Ay)(!i,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),n.createElement(H4.Item,r4({},i,{title:"string"==typeof e?e:void 0},s,{ref:r}))}}])&&S6(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(n.Component),N6=n.forwardRef((function(t,e){var i=t.style,r=t.className,o=t.eventKey,s=(t.warnKey,t.disabled),a=t.itemIcon,l=t.children,c=t.role,h=t.onMouseEnter,u=t.onMouseLeave,d=t.onClick,f=t.onKeyDown,p=t.onFocus,g=p4(t,D6),m=F4(o),v=n.useContext(X4),b=v.prefixCls,y=v.onItemClick,w=v.disabled,O=v.overflowDisabled,S=v.itemIcon,x=v.selectedKeys,k=v.onActive,C=n.useContext(e6)._internalRenderMenuItem,A="".concat(b,"-item"),M=n.useRef(),E=n.useRef(),P=w||s,T=(0,ie.xK)(e,E),$=J4(o),D=function(t){return{key:o,keyPath:d4($).reverse(),item:M.current,domEvent:t}},R=a||S,B=A6(o,P,h,u),N=B.active,L=p4(B,R6),j=x.includes(o),_=M6($.length),I={};"option"===t.role&&(I["aria-selected"]=j);var z=n.createElement(B6,r4({ref:M,elementRef:T,role:null===c?"none":c||"menuitem",tabIndex:s?null:-1,"data-menu-id":O&&m?null:m},(0,Yi.A)(g,["extra"]),L,I,{component:"li","aria-disabled":s,style:c4(c4({},_),i),className:At()(A,a4(a4(a4({},"".concat(A,"-active"),N),"".concat(A,"-selected"),j),"".concat(A,"-disabled"),P),r),onClick:function(t){if(!P){var e=D(t);null==d||d(T6(e)),y(e)}},onKeyDown:function(t){if(null==f||f(t),t.which===Pe.ENTER){var e=D(t);null==d||d(T6(e)),y(e)}},onFocus:function(t){k(o),null==p||p(t)}}),l,n.createElement(E6,{props:c4(c4({},t),{},{isSelected:j}),icon:R}));return C&&(z=C(z,t,{selected:j})),z}));function L6(t,e){var i=t.eventKey,r=G4(),o=J4(i);return n.useEffect((function(){if(r)return r.registerPath(i,o),function(){r.unregisterPath(i,o)}}),[o]),r?null:n.createElement(N6,r4({},t,{ref:e}))}var j6=n.forwardRef(L6),_6=["className","children"],I6=function(t,e){var i=t.className,r=t.children,o=p4(t,_6),s=n.useContext(X4),a=s.prefixCls,l=s.mode,c=s.rtl;return n.createElement("ul",r4({className:At()(a,c&&"".concat(a,"-rtl"),"".concat(a,"-sub"),"".concat(a,"-").concat("inline"===l?"inline":"vertical"),i),role:"menu"},o,{"data-menu-list":!0,ref:e}),r)},z6=n.forwardRef(I6);z6.displayName="SubMenuList";var Q6=z6;function H6(t,e){return(0,fn.A)(t).map((function(t,i){if(n.isValidElement(t)){var r,o,s=t.key,a=null!==(r=null===(o=t.props)||void 0===o?void 0:o.eventKey)&&void 0!==r?r:s;null==a&&(a="tmp_key-".concat([].concat(d4(e),[i]).join("-")));var l={key:a,eventKey:a};return n.cloneElement(t,l)}return t}))}var V6={adjustX:1,adjustY:1},W6={topLeft:{points:["bl","tl"],overflow:V6},topRight:{points:["br","tr"],overflow:V6},bottomLeft:{points:["tl","bl"],overflow:V6},bottomRight:{points:["tr","br"],overflow:V6},leftTop:{points:["tr","tl"],overflow:V6},leftBottom:{points:["br","bl"],overflow:V6},rightTop:{points:["tl","tr"],overflow:V6},rightBottom:{points:["bl","br"],overflow:V6}},F6={topLeft:{points:["bl","tl"],overflow:V6},topRight:{points:["br","tr"],overflow:V6},bottomLeft:{points:["tl","bl"],overflow:V6},bottomRight:{points:["tr","br"],overflow:V6},rightTop:{points:["tr","tl"],overflow:V6},rightBottom:{points:["br","bl"],overflow:V6},leftTop:{points:["tl","tr"],overflow:V6},leftBottom:{points:["bl","br"],overflow:V6}};function q6(t,e,n){return e||(n?n[t]||n.other:void 0)}var X6={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function K6(t){var e=t.prefixCls,i=t.visible,r=t.children,o=t.popup,s=t.popupStyle,a=t.popupClassName,l=t.popupOffset,c=t.disabled,h=t.mode,u=t.onVisibleChange,d=n.useContext(X4),f=d.getPopupContainer,p=d.rtl,g=d.subMenuOpenDelay,m=d.subMenuCloseDelay,v=d.builtinPlacements,b=d.triggerSubMenuAction,y=d.forceSubMenuRender,w=d.rootClassName,O=d.motion,S=d.defaultMotions,x=f4(n.useState(!1),2),k=x[0],C=x[1],A=c4(c4({},p?F6:W6),v),M=X6[h],E=q6(h,O,S),P=n.useRef(E);"inline"!==h&&(P.current=E);var T=c4(c4({},P.current),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),$=n.useRef();return n.useEffect((function(){return $.current=(0,hl.A)((function(){C(i)})),function(){hl.A.cancel($.current)}}),[i]),n.createElement(ra,{prefixCls:e,popupClassName:At()("".concat(e,"-popup"),a4({},"".concat(e,"-rtl"),p),a,w),stretch:"horizontal"===h?"minWidth":null,getPopupContainer:f,builtinPlacements:A,popupPlacement:M,popupVisible:k,popup:o,popupStyle:s,popupAlign:l&&{offset:l},action:c?[]:[b],mouseEnterDelay:g,mouseLeaveDelay:m,onPopupVisibleChange:u,forceRender:y,popupMotion:T,fresh:!0},r)}function Z6(t){var e=t.id,i=t.open,r=t.keyPath,o=t.children,s="inline",a=n.useContext(X4),l=a.prefixCls,c=a.forceSubMenuRender,h=a.motion,u=a.defaultMotions,d=a.mode,f=n.useRef(!1);f.current=d===s;var p=f4(n.useState(!f.current),2),g=p[0],m=p[1],v=!!f.current&&i;n.useEffect((function(){f.current&&m(!1)}),[d]);var b=c4({},q6(s,h,u));r.length>1&&(b.motionAppear=!1);var y=b.onVisibleChanged;return b.onVisibleChanged=function(t){return f.current||t||m(!0),null==y?void 0:y(t)},g?null:n.createElement(K4,{mode:s,locked:!f.current},n.createElement(Z.Ay,r4({visible:v},b,{forceRender:c,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),(function(t){var i=t.className,r=t.style;return n.createElement(Q6,{id:e,className:i,style:r},o)})))}var Y6=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],G6=["active"],U6=n.forwardRef((function(t,e){var i=t.style,r=t.className,o=t.title,s=t.eventKey,a=(t.warnKey,t.disabled),l=t.internalPopupClose,c=t.children,h=t.itemIcon,u=t.expandIcon,d=t.popupClassName,f=t.popupOffset,p=t.popupStyle,g=t.onClick,m=t.onMouseEnter,v=t.onMouseLeave,b=t.onTitleClick,y=t.onTitleMouseEnter,w=t.onTitleMouseLeave,O=p4(t,Y6),S=F4(s),x=n.useContext(X4),k=x.prefixCls,C=x.mode,A=x.openKeys,M=x.disabled,E=x.overflowDisabled,P=x.activeKey,T=x.selectedKeys,$=x.itemIcon,D=x.expandIcon,R=x.onItemClick,B=x.onOpenChange,N=x.onActive,L=n.useContext(e6)._internalRenderSubMenuItem,j=n.useContext(t6).isSubPathKey,_=J4(),I="".concat(k,"-submenu"),z=M||a,Q=n.useRef(),H=n.useRef(),V=null!=h?h:$,W=null!=u?u:D,F=A.includes(s),q=!E&&F,X=j(T,s),K=A6(s,z,y,w),Z=K.active,Y=p4(K,G6),G=f4(n.useState(!1),2),U=G[0],J=G[1],tt=function(t){z||J(t)},et=n.useMemo((function(){return Z||"inline"!==C&&(U||j([P],s))}),[C,Z,P,U,s,j]),nt=M6(_.length),it=y6((function(t){null==g||g(T6(t)),R(t)})),rt=S&&"".concat(S,"-popup"),ot=n.useMemo((function(){return n.createElement(E6,{icon:"horizontal"!==C?W:void 0,props:c4(c4({},t),{},{isOpen:q,isSubMenu:!0})},n.createElement("i",{className:"".concat(I,"-arrow")}))}),[C,W,t,q,I]),st=n.createElement("div",r4({role:"menuitem",style:nt,className:"".concat(I,"-title"),tabIndex:z?null:-1,ref:Q,title:"string"==typeof o?o:null,"data-menu-id":E&&S?null:S,"aria-expanded":q,"aria-haspopup":!0,"aria-controls":rt,"aria-disabled":z,onClick:function(t){z||(null==b||b({key:s,domEvent:t}),"inline"===C&&B(s,!F))},onFocus:function(){N(s)}},Y),o,ot),at=n.useRef(C);if("inline"!==C&&_.length>1?at.current="vertical":at.current=C,!E){var lt=at.current;st=n.createElement(K6,{mode:lt,prefixCls:I,visible:!l&&q&&"inline"!==C,popupClassName:d,popupOffset:f,popupStyle:p,popup:n.createElement(K4,{mode:"horizontal"===lt?"vertical":lt},n.createElement(Q6,{id:rt,ref:H},c)),disabled:z,onVisibleChange:function(t){"inline"!==C&&B(s,t)}},st)}var ct=n.createElement(H4.Item,r4({ref:e,role:"none"},O,{component:"li",style:i,className:At()(I,"".concat(I,"-").concat(C),r,a4(a4(a4(a4({},"".concat(I,"-open"),q),"".concat(I,"-active"),et),"".concat(I,"-selected"),X),"".concat(I,"-disabled"),z)),onMouseEnter:function(t){tt(!0),null==m||m({key:s,domEvent:t})},onMouseLeave:function(t){tt(!1),null==v||v({key:s,domEvent:t})}}),st,!E&&n.createElement(Z6,{id:rt,open:q,keyPath:_},c));return L&&(ct=L(ct,t,{selected:X,active:et,open:q,disabled:z})),n.createElement(K4,{onItemClick:it,mode:"horizontal"===C?"vertical":C,itemIcon:V,expandIcon:W},ct)})),J6=n.forwardRef((function(t,e){var i,r=t.eventKey,o=t.children,s=J4(r),a=H6(o,s),l=G4();return n.useEffect((function(){if(l)return l.registerPath(r,s),function(){l.unregisterPath(r,s)}}),[s]),i=l?a:n.createElement(U6,r4({ref:e},t),a),n.createElement(U4.Provider,{value:s},i)}));function t9(t){var e=t.className,i=t.style,r=n.useContext(X4).prefixCls;return G4()?null:n.createElement("li",{role:"separator",className:At()("".concat(r,"-item-divider"),e),style:i})}var e9=["className","title","eventKey","children"],n9=n.forwardRef((function(t,e){var i=t.className,r=t.title,o=(t.eventKey,t.children),s=p4(t,e9),a=n.useContext(X4).prefixCls,l="".concat(a,"-item-group");return n.createElement("li",r4({ref:e,role:"presentation"},s,{onClick:function(t){return t.stopPropagation()},className:At()(l,i)}),n.createElement("div",{role:"presentation",className:"".concat(l,"-title"),title:"string"==typeof r?r:void 0},r),n.createElement("ul",{role:"group",className:"".concat(l,"-list")},o))})),i9=n.forwardRef((function(t,e){var i=t.eventKey,r=H6(t.children,J4(i));return G4()?r:n.createElement(n9,r4({ref:e},(0,Yi.A)(t,["warnKey"])),r)})),r9=["label","children","key","type","extra"];function o9(t,e,i){var r=e.item,o=e.group,s=e.submenu,a=e.divider;return(t||[]).map((function(t,l){if(t&&"object"===o4(t)){var c=t,h=c.label,u=c.children,d=c.key,f=c.type,p=c.extra,g=p4(c,r9),m=null!=d?d:"tmp-".concat(l);return u||"group"===f?"group"===f?n.createElement(o,r4({key:m},g,{title:h}),o9(u,e,i)):n.createElement(s,r4({key:m},g,{title:h}),o9(u,e,i)):"divider"===f?n.createElement(a,r4({key:m},g)):n.createElement(r,r4({key:m},g,{extra:p}),h,(!!p||0===p)&&n.createElement("span",{className:"".concat(i,"-item-extra")},p))}return null})).filter((function(t){return t}))}function s9(t,e,n,i,r){var o=t,s=c4({divider:t9,item:j6,group:i9,submenu:J6},i);return e&&(o=o9(e,s,r)),H6(o,n)}var a9=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],l9=[],c9=n.forwardRef((function(t,e){var i,r=t,o=r.prefixCls,s=void 0===o?"rc-menu":o,a=r.rootClassName,l=r.style,c=r.className,h=r.tabIndex,u=void 0===h?0:h,d=r.items,f=r.children,p=r.direction,g=r.id,m=r.mode,v=void 0===m?"vertical":m,b=r.inlineCollapsed,y=r.disabled,w=r.disabledOverflow,O=r.subMenuOpenDelay,S=void 0===O?.1:O,x=r.subMenuCloseDelay,k=void 0===x?.1:x,C=r.forceSubMenuRender,A=r.defaultOpenKeys,M=r.openKeys,E=r.activeKey,P=r.defaultActiveFirst,T=r.selectable,$=void 0===T||T,D=r.multiple,R=void 0!==D&&D,B=r.defaultSelectedKeys,N=r.selectedKeys,L=r.onSelect,j=r.onDeselect,_=r.inlineIndent,I=void 0===_?24:_,z=r.motion,Q=r.defaultMotions,H=r.triggerSubMenuAction,V=void 0===H?"hover":H,W=r.builtinPlacements,q=r.itemIcon,X=r.expandIcon,K=r.overflowedIndicator,Z=void 0===K?"...":K,Y=r.overflowedIndicatorPopupClassName,G=r.getPopupContainer,U=r.onClick,J=r.onOpenChange,tt=r.onKeyDown,et=(r.openAnimation,r.openTransitionName,r._internalRenderMenuItem),nt=r._internalRenderSubMenuItem,it=r._internalComponents,rt=p4(r,a9),ot=f4(n.useMemo((function(){return[s9(f,d,l9,it,s),s9(f,d,l9,{},s)]}),[f,d,it]),2),st=ot[0],at=ot[1],lt=f4(n.useState(!1),2),ct=lt[0],ht=lt[1],ut=n.useRef(),dt=function(t){var e=f4((0,mo.A)(t,{value:t}),2),i=e[0],r=e[1];return n.useEffect((function(){O6+=1;var t="".concat(w6,"-").concat(O6);r("rc-menu-uuid-".concat(t))}),[]),i}(g),ft="rtl"===p,pt=f4((0,mo.A)(A,{value:M,postState:function(t){return t||l9}}),2),gt=pt[0],mt=pt[1],vt=function(t){function e(){mt(t),null==J||J(t)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,ne.flushSync)(e):e()},bt=f4(n.useState(gt),2),yt=bt[0],wt=bt[1],Ot=n.useRef(!1),St=f4(n.useMemo((function(){return"inline"!==v&&"vertical"!==v||!b?[v,!1]:["vertical",b]}),[v,b]),2),xt=St[0],kt=St[1],Ct="inline"===xt,Mt=f4(n.useState(xt),2),Et=Mt[0],Pt=Mt[1],Tt=f4(n.useState(kt),2),$t=Tt[0],Dt=Tt[1];n.useEffect((function(){Pt(xt),Dt(kt),Ot.current&&(Ct?mt(yt):vt(l9))}),[xt,kt]);var Rt=f4(n.useState(0),2),Bt=Rt[0],Nt=Rt[1],Lt=Bt>=st.length-1||"horizontal"!==Et||w;n.useEffect((function(){Ct&&wt(gt)}),[gt]),n.useEffect((function(){return Ot.current=!0,function(){Ot.current=!1}}),[]);var jt=function(){var t=f4(n.useState({}),2)[1],e=(0,n.useRef)(new Map),i=(0,n.useRef)(new Map),r=f4(n.useState([]),2),o=r[0],s=r[1],a=(0,n.useRef)(0),l=(0,n.useRef)(!1),c=(0,n.useCallback)((function(n,r){var o=v6(r);i.current.set(o,n),e.current.set(n,o),a.current+=1;var s,c=a.current;s=function(){c===a.current&&(l.current||t({}))},Promise.resolve().then(s)}),[]),h=(0,n.useCallback)((function(t,n){var r=v6(n);i.current.delete(r),e.current.delete(t)}),[]),u=(0,n.useCallback)((function(t){s(t)}),[]),d=(0,n.useCallback)((function(t,n){var i=(e.current.get(t)||"").split(m6);return n&&o.includes(i[0])&&i.unshift(b6),i}),[o]),f=(0,n.useCallback)((function(t,e){return t.filter((function(t){return void 0!==t})).some((function(t){return d(t,!0).includes(e)}))}),[d]),p=(0,n.useCallback)((function(t){var n="".concat(e.current.get(t)).concat(m6),r=new Set;return d4(i.current.keys()).forEach((function(t){t.startsWith(n)&&r.add(i.current.get(t))})),r}),[]);return n.useEffect((function(){return function(){l.current=!0}}),[]),{registerPath:c,unregisterPath:h,refreshOverflowKeys:u,isSubPathKey:f,getKeyPath:d,getKeys:function(){var t=d4(e.current.keys());return o.length&&t.push(b6),t},getSubPathKeys:p}}(),_t=jt.registerPath,It=jt.unregisterPath,zt=jt.refreshOverflowKeys,Qt=jt.isSubPathKey,Ht=jt.getKeyPath,Vt=jt.getKeys,Wt=jt.getSubPathKeys,Ft=n.useMemo((function(){return{registerPath:_t,unregisterPath:It}}),[_t,It]),qt=n.useMemo((function(){return{isSubPathKey:Qt}}),[Qt]);n.useEffect((function(){zt(Lt?l9:st.slice(Bt+1).map((function(t){return t.key})))}),[Bt,Lt]);var Xt=f4((0,mo.A)(E||P&&(null===(i=st[0])||void 0===i?void 0:i.key),{value:E}),2),Kt=Xt[0],Zt=Xt[1],Yt=y6((function(t){Zt(t)})),Gt=y6((function(){Zt(void 0)}));(0,n.useImperativeHandle)(e,(function(){return{list:ut.current,focus:function(t){var e,n,i=Vt(),r=g6(i,dt),o=r.elements,s=r.key2element,a=r.element2key,l=f6(ut.current,o),c=null!=Kt?Kt:l[0]?a.get(l[0]):null===(e=st.find((function(t){return!t.props.disabled})))||void 0===e?void 0:e.key,h=s.get(c);c&&h&&(null==h||null===(n=h.focus)||void 0===n||n.call(h,t))}}}));var Ut=f4((0,mo.A)(B||[],{value:N,postState:function(t){return Array.isArray(t)?t:null==t?l9:[t]}}),2),Jt=Ut[0],te=Ut[1],ee=y6((function(t){null==U||U(T6(t)),function(t){if($){var e,n=t.key,i=Jt.includes(n);e=R?i?Jt.filter((function(t){return t!==n})):[].concat(d4(Jt),[n]):[n],te(e);var r=c4(c4({},t),{},{selectedKeys:e});i?null==j||j(r):null==L||L(r)}!R&&gt.length&&"inline"!==Et&&vt(l9)}(t)})),ie=y6((function(t,e){var n=gt.filter((function(e){return e!==t}));if(e)n.push(t);else if("inline"!==Et){var i=Wt(t);n=n.filter((function(t){return!i.has(t)}))}(0,F.A)(gt,n,!0)||vt(n,!0)})),re=function(t,e,i,r,o,s,a,l,c,h){var u=n.useRef(),d=n.useRef();d.current=e;var f=function(){hl.A.cancel(u.current)};return n.useEffect((function(){return function(){f()}}),[]),function(n){var p=n.which;if([].concat(d6,[l6,c6,h6,u6]).includes(p)){var g=s(),m=g6(g,r),v=m,b=v.elements,y=v.key2element,w=v.element2key,O=function(t,e){for(var n=t||document.activeElement;n;){if(e.has(n))return n;n=n.parentElement}return null}(y.get(e),b),S=w.get(O),x=function(t,e,n,i){var r,o="prev",s="next",a="children",l="parent";if("inline"===t&&i===l6)return{inlineTrigger:!0};var c=a4(a4({},s6,o),a6,s),h=a4(a4(a4(a4({},r6,n?s:o),o6,n?o:s),a6,a),l6,a),u=a4(a4(a4(a4(a4(a4({},s6,o),a6,s),l6,a),c6,l),r6,n?a:l),o6,n?l:a);switch(null===(r={inline:c,horizontal:h,vertical:u,inlineSub:c,horizontalSub:u,verticalSub:u}["".concat(t).concat(e?"":"Sub")])||void 0===r?void 0:r[i]){case o:return{offset:-1,sibling:!0};case s:return{offset:1,sibling:!0};case l:return{offset:-1,sibling:!1};case a:return{offset:1,sibling:!1};default:return null}}(t,1===a(S,!0).length,i,p);if(!x&&p!==h6&&p!==u6)return;(d6.includes(p)||[h6,u6].includes(p))&&n.preventDefault();var k=function(t){if(t){var e=t,n=t.querySelector("a");null!=n&&n.getAttribute("href")&&(e=n);var i=w.get(t);l(i),f(),u.current=(0,hl.A)((function(){d.current===i&&e.focus()}))}};if([h6,u6].includes(p)||x.sibling||!O){var C,A,M=f6(C=O&&"inline"!==t?function(t){for(var e=t;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}(O):o.current,b);A=p===h6?M[0]:p===u6?M[M.length-1]:p6(C,b,O,x.offset),k(A)}else if(x.inlineTrigger)c(S);else if(x.offset>0)c(S,!0),f(),u.current=(0,hl.A)((function(){m=g6(g,r);var t=O.getAttribute("aria-controls"),e=p6(document.getElementById(t),m.elements);k(e)}),5);else if(x.offset<0){var E=a(S,!0),P=E[E.length-2],T=y.get(P);c(P,!1),k(T)}}null==h||h(n)}}(Et,Kt,ft,dt,ut,Vt,Ht,Zt,(function(t,e){var n=null!=e?e:!gt.includes(t);ie(t,n)}),tt);n.useEffect((function(){ht(!0)}),[]);var oe=n.useMemo((function(){return{_internalRenderMenuItem:et,_internalRenderSubMenuItem:nt}}),[et,nt]),se="horizontal"!==Et||w?st:st.map((function(t,e){return n.createElement(K4,{key:t.key,overflowDisabled:e>Bt},t)})),ae=n.createElement(H4,r4({id:g,ref:ut,prefixCls:"".concat(s,"-overflow"),component:"ul",itemComponent:j6,className:At()(s,"".concat(s,"-root"),"".concat(s,"-").concat(Et),c,a4(a4({},"".concat(s,"-inline-collapsed"),$t),"".concat(s,"-rtl"),ft),a),dir:p,style:l,role:"menu",tabIndex:u,data:se,renderRawItem:function(t){return t},renderRawRest:function(t){var e=t.length,i=e?st.slice(-e):null;return n.createElement(J6,{eventKey:b6,title:Z,disabled:Lt,internalPopupClose:0===e,popupClassName:Y},i)},maxCount:"horizontal"!==Et||w?H4.INVALIDATE:H4.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(t){Nt(t)},onKeyDown:re},rt));return n.createElement(e6.Provider,{value:oe},n.createElement(V4.Provider,{value:dt},n.createElement(K4,{prefixCls:s,rootClassName:a,mode:Et,openKeys:gt,rtl:ft,disabled:y,motion:ct?z:null,defaultMotions:ct?Q:null,activeKey:Kt,onActive:Yt,onInactive:Gt,selectedKeys:Jt,inlineIndent:I,subMenuOpenDelay:S,subMenuCloseDelay:k,forceSubMenuRender:C,builtinPlacements:W,triggerSubMenuAction:V,getPopupContainer:G,itemIcon:q,expandIcon:X,onItemClick:ee,onOpenChange:ie},n.createElement(t6.Provider,{value:qt},ae),n.createElement("div",{style:{display:"none"},"aria-hidden":!0},n.createElement(Y4.Provider,{value:Ft},at)))))})),h9=c9;h9.Item=j6,h9.SubMenu=J6,h9.ItemGroup=i9,h9.Divider=t9;var u9=h9;const d9=n.createContext({});var f9={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},p9=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:f9}))},g9=n.forwardRef(p9),m9=(0,n.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),v9=t=>{const{prefixCls:e,className:i,dashed:r}=t,o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","className","dashed"]),{getPrefixCls:s}=n.useContext(c.QO),a=s("menu",e),l=At()({[`${a}-item-divider-dashed`]:!!r},i);return n.createElement(t9,Object.assign({className:l},o))},b9=t=>{var e;const{className:i,children:r,icon:o,title:s,danger:a,extra:l}=t,{prefixCls:c,firstLevel:h,direction:u,disableMenuItemTitleTooltip:d,inlineCollapsed:f}=n.useContext(m9),{siderCollapsed:p}=n.useContext(d9);let g=s;void 0===s?g=h?r:"":!1===s&&(g="");const m={title:g};p||f||(m.title=null,m.open=!1);const v=(0,fn.A)(r).length;let b=n.createElement(j6,Object.assign({},(0,Yi.A)(t,["title","icon","danger"]),{className:At()({[`${c}-item-danger`]:a,[`${c}-item-only-child`]:1===(o?v+1:v)},i),title:"string"==typeof s?s:void 0}),(0,Oa.Ob)(o,{className:At()(n.isValidElement(o)?null===(e=o.props)||void 0===e?void 0:e.className:"",`${c}-item-icon`)}),(t=>{const e=null==r?void 0:r[0],i=n.createElement("span",{className:At()(`${c}-title-content`,{[`${c}-title-content-with-extra`]:!!l||0===l})},r);return(!o||n.isValidElement(r)&&"span"===r.type)&&r&&t&&h&&"string"==typeof e?n.createElement("div",{className:`${c}-inline-collapsed-noicon`},e.charAt(0)):i})(f));return d||(b=n.createElement($a,Object.assign({},m,{placement:"rtl"===u?"left":"right",classNames:{root:`${c}-inline-collapsed-tooltip`}}),b)),b};const y9=n.createContext(null),w9=n.forwardRef(((t,e)=>{const{children:i}=t,r=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["children"]),o=n.useContext(y9),s=n.useMemo((()=>Object.assign(Object.assign({},o),r)),[o,r.prefixCls,r.mode,r.selectable,r.rootClassName]),a=(0,ie.H3)(i),l=(0,ie.xK)(e,a?(0,ie.A9)(i):null);return n.createElement(y9.Provider,{value:s},n.createElement(Wi,{space:!0},a?n.cloneElement(i,{ref:l}):i))}));var O9=y9,S9=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},\n        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},\n        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}});const x9=new h.Mo("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),k9=new h.Mo("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),C9=new h.Mo("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),A9=new h.Mo("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),M9=new h.Mo("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),E9=new h.Mo("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),P9=new h.Mo("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),T9=new h.Mo("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),$9={"slide-up":{inKeyframes:x9,outKeyframes:k9},"slide-down":{inKeyframes:C9,outKeyframes:A9},"slide-left":{inKeyframes:M9,outKeyframes:E9},"slide-right":{inKeyframes:P9,outKeyframes:T9}},D9=(t,e)=>{const{antCls:n}=t,i=`${n}-${e}`,{inKeyframes:r,outKeyframes:o}=$9[e];return[Dr(i,r,o,t.motionDurationMid),{[`\n      ${i}-enter,\n      ${i}-appear\n    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${i}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]};var R9=t=>{const{componentCls:e,motionDurationSlow:n,horizontalLineHeight:i,colorSplit:r,lineWidth:o,lineType:s,itemPaddingInline:a}=t;return{[`${e}-horizontal`]:{lineHeight:i,border:0,borderBottom:`${(0,h.zA)(o)} ${s} ${r}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${e}-item, ${e}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:a},[`> ${e}-item:hover,\n        > ${e}-item-active,\n        > ${e}-submenu ${e}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${e}-item, ${e}-submenu-title`]:{transition:[`border-color ${n}`,`background ${n}`].join(",")},[`${e}-submenu-arrow`]:{display:"none"}}}},B9=({componentCls:t,menuArrowOffset:e,calc:n})=>({[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,\n    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${(0,h.zA)(n(e).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${(0,h.zA)(e)})`}}}});const N9=t=>Object.assign({},(0,J.jk)(t));var L9=(t,e)=>{const{componentCls:n,itemColor:i,itemSelectedColor:r,subMenuItemSelectedColor:o,groupTitleColor:s,itemBg:a,subMenuItemBg:l,itemSelectedBg:c,activeBarHeight:u,activeBarWidth:d,activeBarBorderWidth:f,motionDurationSlow:p,motionEaseInOut:g,motionEaseOut:m,itemPaddingInline:v,motionDurationMid:b,itemHoverColor:y,lineType:w,colorSplit:O,itemDisabledColor:S,dangerItemColor:x,dangerItemHoverColor:k,dangerItemSelectedColor:C,dangerItemActiveBg:A,dangerItemSelectedBg:M,popupBg:E,itemHoverBg:P,itemActiveBg:T,menuSubMenuBg:$,horizontalItemSelectedColor:D,horizontalItemSelectedBg:R,horizontalItemBorderRadius:B,horizontalItemHoverBg:N}=t;return{[`${n}-${e}, ${n}-${e} > ${n}`]:{color:i,background:a,[`&${n}-root:focus-visible`]:Object.assign({},N9(t)),[`${n}-item`]:{"&-group-title, &-extra":{color:s}},[`${n}-submenu-selected > ${n}-submenu-title`]:{color:o},[`${n}-item, ${n}-submenu-title`]:{color:i,[`&:not(${n}-item-disabled):focus-visible`]:Object.assign({},N9(t))},[`${n}-item-disabled, ${n}-submenu-disabled`]:{color:`${S} !important`},[`${n}-item:not(${n}-item-selected):not(${n}-submenu-selected)`]:{[`&:hover, > ${n}-submenu-title:hover`]:{color:y}},[`&:not(${n}-horizontal)`]:{[`${n}-item:not(${n}-item-selected)`]:{"&:hover":{backgroundColor:P},"&:active":{backgroundColor:T}},[`${n}-submenu-title`]:{"&:hover":{backgroundColor:P},"&:active":{backgroundColor:T}}},[`${n}-item-danger`]:{color:x,[`&${n}-item:hover`]:{[`&:not(${n}-item-selected):not(${n}-submenu-selected)`]:{color:k}},[`&${n}-item:active`]:{background:A}},[`${n}-item a`]:{"&, &:hover":{color:"inherit"}},[`${n}-item-selected`]:{color:r,[`&${n}-item-danger`]:{color:C},"a, a:hover":{color:"inherit"}},[`& ${n}-item-selected`]:{backgroundColor:c,[`&${n}-item-danger`]:{backgroundColor:M}},[`&${n}-submenu > ${n}`]:{backgroundColor:$},[`&${n}-popup > ${n}`]:{backgroundColor:E},[`&${n}-submenu-popup > ${n}`]:{backgroundColor:E},[`&${n}-horizontal`]:Object.assign(Object.assign({},"dark"===e?{borderBottom:0}:{}),{[`> ${n}-item, > ${n}-submenu`]:{top:f,marginTop:t.calc(f).mul(-1).equal(),marginBottom:0,borderRadius:B,"&::after":{position:"absolute",insetInline:v,bottom:0,borderBottom:`${(0,h.zA)(u)} solid transparent`,transition:`border-color ${p} ${g}`,content:'""'},"&:hover, &-active, &-open":{background:N,"&::after":{borderBottomWidth:u,borderBottomColor:D}},"&-selected":{color:D,backgroundColor:R,"&:hover":{backgroundColor:R},"&::after":{borderBottomWidth:u,borderBottomColor:D}}}}),[`&${n}-root`]:{[`&${n}-inline, &${n}-vertical`]:{borderInlineEnd:`${(0,h.zA)(f)} ${w} ${O}`}},[`&${n}-inline`]:{[`${n}-sub${n}-inline`]:{background:l},[`${n}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${(0,h.zA)(d)} solid ${r}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${b} ${m}`,`opacity ${b} ${m}`].join(","),content:'""'},[`&${n}-item-danger`]:{"&::after":{borderInlineEndColor:C}}},[`${n}-selected, ${n}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${b} ${g}`,`opacity ${b} ${g}`].join(",")}}}}}};const j9=t=>{const{componentCls:e,itemHeight:n,itemMarginInline:i,padding:r,menuArrowSize:o,marginXS:s,itemMarginBlock:a,itemWidth:l,itemPaddingInline:c}=t,u=t.calc(o).add(r).add(s).equal();return{[`${e}-item`]:{position:"relative",overflow:"hidden"},[`${e}-item, ${e}-submenu-title`]:{height:n,lineHeight:(0,h.zA)(n),paddingInline:c,overflow:"hidden",textOverflow:"ellipsis",marginInline:i,marginBlock:a,width:l},[`> ${e}-item,\n            > ${e}-submenu > ${e}-submenu-title`]:{height:n,lineHeight:(0,h.zA)(n)},[`${e}-item-group-list ${e}-submenu-title,\n            ${e}-submenu-title`]:{paddingInlineEnd:u}}};var _9=t=>{const{componentCls:e,iconCls:n,itemHeight:i,colorTextLightSolid:r,dropdownWidth:o,controlHeightLG:s,motionEaseOut:a,paddingXL:l,itemMarginInline:c,fontSizeLG:u,motionDurationFast:d,motionDurationSlow:f,paddingXS:p,boxShadowSecondary:g,collapsedWidth:m,collapsedIconSize:v}=t,b={height:i,lineHeight:(0,h.zA)(i),listStylePosition:"inside",listStyleType:"disc"};return[{[e]:{"&-inline, &-vertical":Object.assign({[`&${e}-root`]:{boxShadow:"none"}},j9(t))},[`${e}-submenu-popup`]:{[`${e}-vertical`]:Object.assign(Object.assign({},j9(t)),{boxShadow:g})}},{[`${e}-submenu-popup ${e}-vertical${e}-sub`]:{minWidth:o,maxHeight:`calc(100vh - ${(0,h.zA)(t.calc(s).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${e}-inline`]:{width:"100%",[`&${e}-root`]:{[`${e}-item, ${e}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${f}`,`background ${f}`,`padding ${d} ${a}`].join(","),[`> ${e}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${e}-sub${e}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${e}-submenu > ${e}-submenu-title`]:b,[`& ${e}-item-group-title`]:{paddingInlineStart:l}},[`${e}-item`]:b}},{[`${e}-inline-collapsed`]:{width:m,[`&${e}-root`]:{[`${e}-item, ${e}-submenu ${e}-submenu-title`]:{[`> ${e}-inline-collapsed-noicon`]:{fontSize:u,textAlign:"center"}}},[`> ${e}-item,\n          > ${e}-item-group > ${e}-item-group-list > ${e}-item,\n          > ${e}-item-group > ${e}-item-group-list > ${e}-submenu > ${e}-submenu-title,\n          > ${e}-submenu > ${e}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${(0,h.zA)(t.calc(v).div(2).equal())} - ${(0,h.zA)(c)})`,textOverflow:"clip",[`\n            ${e}-submenu-arrow,\n            ${e}-submenu-expand-icon\n          `]:{opacity:0},[`${e}-item-icon, ${n}`]:{margin:0,fontSize:v,lineHeight:(0,h.zA)(i),"+ span":{display:"inline-block",opacity:0}}},[`${e}-item-icon, ${n}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${e}-item-icon, ${n}`]:{display:"none"},"a, a:hover":{color:r}},[`${e}-item-group-title`]:Object.assign(Object.assign({},J.L9),{paddingInline:p})}}]};const I9=t=>{const{componentCls:e,motionDurationSlow:n,motionDurationMid:i,motionEaseInOut:r,motionEaseOut:o,iconCls:s,iconSize:a,iconMarginInlineEnd:l}=t;return{[`${e}-item, ${e}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${n}`,`background ${n}`,`padding calc(${n} + 0.1s) ${r}`].join(","),[`${e}-item-icon, ${s}`]:{minWidth:a,fontSize:a,transition:[`font-size ${i} ${o}`,`margin ${n} ${r}`,`color ${n}`].join(","),"+ span":{marginInlineStart:l,opacity:1,transition:[`opacity ${n} ${r}`,`margin ${n}`,`color ${n}`].join(",")}},[`${e}-item-icon`]:Object.assign({},(0,J.Nk)()),[`&${e}-item-only-child`]:{[`> ${s}, > ${e}-item-icon`]:{marginInlineEnd:0}}},[`${e}-item-disabled, ${e}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important",cursor:"not-allowed",pointerEvents:"none"},[`> ${e}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},z9=t=>{const{componentCls:e,motionDurationSlow:n,motionEaseInOut:i,borderRadius:r,menuArrowSize:o,menuArrowOffset:s}=t;return{[`${e}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:t.margin,width:o,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${n} ${i}, opacity ${n}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:t.calc(o).mul(.6).equal(),height:t.calc(o).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:r,transition:[`background ${n} ${i}`,`transform ${n} ${i}`,`top ${n} ${i}`,`color ${n} ${i}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${(0,h.zA)(t.calc(s).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${(0,h.zA)(s)})`}}}}},Q9=t=>{const{antCls:e,componentCls:n,fontSize:i,motionDurationSlow:r,motionDurationMid:o,motionEaseInOut:s,paddingXS:a,padding:l,colorSplit:c,lineWidth:u,zIndexPopup:d,borderRadiusLG:f,subMenuItemBorderRadius:p,menuArrowSize:g,menuArrowOffset:m,lineType:v,groupTitleLineHeight:b,groupTitleFontSize:y}=t;return[{"":{[n]:Object.assign(Object.assign({},(0,J.t6)()),{"&-hidden":{display:"none"}})},[`${n}-submenu-hidden`]:{display:"none"}},{[n]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,J.dF)(t)),(0,J.t6)()),{marginBottom:0,paddingInlineStart:0,fontSize:i,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${r} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${n}-item`]:{flex:"none"}},[`${n}-item, ${n}-submenu, ${n}-submenu-title`]:{borderRadius:t.itemBorderRadius},[`${n}-item-group-title`]:{padding:`${(0,h.zA)(a)} ${(0,h.zA)(l)}`,fontSize:y,lineHeight:b,transition:`all ${r}`},[`&-horizontal ${n}-submenu`]:{transition:[`border-color ${r} ${s}`,`background ${r} ${s}`].join(",")},[`${n}-submenu, ${n}-submenu-inline`]:{transition:[`border-color ${r} ${s}`,`background ${r} ${s}`,`padding ${o} ${s}`].join(",")},[`${n}-submenu ${n}-sub`]:{cursor:"initial",transition:[`background ${r} ${s}`,`padding ${r} ${s}`].join(",")},[`${n}-title-content`]:{transition:`color ${r}`,"&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},[`> ${e}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"},[`${n}-item-extra`]:{marginInlineStart:"auto",paddingInlineStart:t.padding}},[`${n}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${n}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:c,borderStyle:v,borderWidth:0,borderTopWidth:u,marginBlock:u,padding:0,"&-dashed":{borderStyle:"dashed"}}}),I9(t)),{[`${n}-item-group`]:{[`${n}-item-group-list`]:{margin:0,padding:0,[`${n}-item, ${n}-submenu-title`]:{paddingInline:`${(0,h.zA)(t.calc(i).mul(2).equal())} ${(0,h.zA)(l)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:d,borderRadius:f,boxShadow:"none",transformOrigin:"0 0",[`&${n}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${n}`]:Object.assign(Object.assign(Object.assign({borderRadius:f},I9(t)),z9(t)),{[`${n}-item, ${n}-submenu > ${n}-submenu-title`]:{borderRadius:p},[`${n}-submenu-title::after`]:{transition:`transform ${r} ${s}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:t.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:t.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:t.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:t.paddingXS}}}),z9(t)),{[`&-inline-collapsed ${n}-submenu-arrow,\n        &-inline ${n}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${(0,h.zA)(m)})`},"&::after":{transform:`rotate(45deg) translateX(${(0,h.zA)(t.calc(m).mul(-1).equal())})`}},[`${n}-submenu-open${n}-submenu-inline > ${n}-submenu-title > ${n}-submenu-arrow`]:{transform:`translateY(${(0,h.zA)(t.calc(g).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${(0,h.zA)(t.calc(m).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${(0,h.zA)(m)})`}}})},{[`${e}-layout-header`]:{[n]:{lineHeight:"inherit"}}}]},H9=t=>{var e,n,i;const{colorPrimary:r,colorError:o,colorTextDisabled:s,colorErrorBg:a,colorText:l,colorTextDescription:c,colorBgContainer:h,colorFillAlter:u,colorFillContent:d,lineWidth:f,lineWidthBold:p,controlItemBgActive:g,colorBgTextHover:m,controlHeightLG:v,lineHeight:b,colorBgElevated:y,marginXXS:w,padding:O,fontSize:S,controlHeightSM:x,fontSizeLG:k,colorTextLightSolid:C,colorErrorHover:A}=t,M=null!==(e=t.activeBarWidth)&&void 0!==e?e:0,E=null!==(n=t.activeBarBorderWidth)&&void 0!==n?n:f,P=null!==(i=t.itemMarginInline)&&void 0!==i?i:t.marginXXS,T=new I.Y(C).setA(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:t.zIndexPopupBase+50,radiusItem:t.borderRadiusLG,itemBorderRadius:t.borderRadiusLG,radiusSubMenuItem:t.borderRadiusSM,subMenuItemBorderRadius:t.borderRadiusSM,colorItemText:l,itemColor:l,colorItemTextHover:l,itemHoverColor:l,colorItemTextHoverHorizontal:r,horizontalItemHoverColor:r,colorGroupTitle:c,groupTitleColor:c,colorItemTextSelected:r,itemSelectedColor:r,subMenuItemSelectedColor:r,colorItemTextSelectedHorizontal:r,horizontalItemSelectedColor:r,colorItemBg:h,itemBg:h,colorItemBgHover:m,itemHoverBg:m,colorItemBgActive:d,itemActiveBg:g,colorSubItemBg:u,subMenuItemBg:u,colorItemBgSelected:g,itemSelectedBg:g,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:M,colorActiveBarHeight:p,activeBarHeight:p,colorActiveBarBorderSize:f,activeBarBorderWidth:E,colorItemTextDisabled:s,itemDisabledColor:s,colorDangerItemText:o,dangerItemColor:o,colorDangerItemTextHover:o,dangerItemHoverColor:o,colorDangerItemTextSelected:o,dangerItemSelectedColor:o,colorDangerItemBgActive:a,dangerItemActiveBg:a,colorDangerItemBgSelected:a,dangerItemSelectedBg:a,itemMarginInline:P,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:v,groupTitleLineHeight:b,collapsedWidth:2*v,popupBg:y,itemMarginBlock:w,itemPaddingInline:O,horizontalLineHeight:1.15*v+"px",iconSize:S,iconMarginInlineEnd:x-S,collapsedIconSize:k,groupTitleFontSize:S,darkItemDisabledColor:new I.Y(C).setA(.25).toRgbString(),darkItemColor:T,darkDangerItemColor:o,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:C,darkItemSelectedBg:r,darkDangerItemSelectedBg:o,darkItemHoverBg:"transparent",darkGroupTitleColor:T,darkItemHoverColor:C,darkDangerItemHoverColor:A,darkDangerItemSelectedColor:C,darkDangerItemActiveBg:o,itemWidth:M?`calc(100% + ${E}px)`:`calc(100% - ${2*P}px)`}};var V9=t=>{var e;const{popupClassName:i,icon:r,title:o,theme:s}=t,a=n.useContext(m9),{prefixCls:l,inlineCollapsed:c,theme:h}=a,u=J4();let d;if(r){const t=n.isValidElement(o)&&"span"===o.type;d=n.createElement(n.Fragment,null,(0,Oa.Ob)(r,{className:At()(n.isValidElement(r)?null===(e=r.props)||void 0===e?void 0:e.className:"",`${l}-item-icon`)}),t?o:n.createElement("span",{className:`${l}-title-content`},o))}else d=c&&!u.length&&o&&"string"==typeof o?n.createElement("div",{className:`${l}-inline-collapsed-noicon`},o.charAt(0)):n.createElement("span",{className:`${l}-title-content`},o);const f=n.useMemo((()=>Object.assign(Object.assign({},a),{firstLevel:!1})),[a]),[p]=$t("Menu");return n.createElement(m9.Provider,{value:f},n.createElement(J6,Object.assign({},(0,Yi.A)(t,["icon"]),{title:d,popupClassName:At()(l,i,`${l}-${s||h}`),popupStyle:Object.assign({zIndex:p},t.popupStyle)})))};function W9(t){return null===t||!1===t}const F9={item:b9,submenu:V9,divider:v9},q9=(0,n.forwardRef)(((t,e)=>{var i;const r=n.useContext(O9),o=r||{},{getPrefixCls:s,getPopupContainer:a,direction:l,menu:h}=n.useContext(c.QO),u=s(),{prefixCls:d,className:f,style:p,theme:g="light",expandIcon:m,_internalDisableMenuItemTitleTooltip:v,inlineCollapsed:b,siderCollapsed:y,rootClassName:w,mode:O,selectable:S,onClick:x,overflowedIndicatorPopupClassName:k}=t,C=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),A=(0,Yi.A)(C,["collapsedWidth"]);null===(i=o.validator)||void 0===i||i.call(o,{mode:O});const M=(0,wr.A)(((...t)=>{var e;null==x||x.apply(void 0,t),null===(e=o.onClick)||void 0===e||e.call(o)})),E=o.mode||O,P=null!=S?S:o.selectable,T=null!=b?b:y,$={horizontal:{motionName:`${u}-slide-up`},inline:jt(u),other:{motionName:`${u}-zoom-big`}},D=s("menu",d||o.prefixCls),R=Zi(D),[B,N,L]=((t,e=t,n=!0)=>(0,Ui.OF)("Menu",(t=>{const{colorBgElevated:e,controlHeightLG:n,fontSize:i,darkItemColor:r,darkDangerItemColor:o,darkItemBg:s,darkSubMenuItemBg:a,darkItemSelectedColor:l,darkItemSelectedBg:c,darkDangerItemSelectedBg:h,darkItemHoverBg:u,darkGroupTitleColor:d,darkItemHoverColor:f,darkItemDisabledColor:p,darkDangerItemHoverColor:g,darkDangerItemSelectedColor:m,darkDangerItemActiveBg:v,popupBg:b,darkPopupBg:y}=t,w=t.calc(i).div(7).mul(5).equal(),O=(0,Ji.oX)(t,{menuArrowSize:w,menuHorizontalHeight:t.calc(n).mul(1.15).equal(),menuArrowOffset:t.calc(w).mul(.25).equal(),menuSubMenuBg:e,calc:t.calc,popupBg:b}),S=(0,Ji.oX)(O,{itemColor:r,itemHoverColor:f,groupTitleColor:d,itemSelectedColor:l,subMenuItemSelectedColor:l,itemBg:s,popupBg:y,subMenuItemBg:a,itemActiveBg:"transparent",itemSelectedBg:c,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:u,itemDisabledColor:p,dangerItemColor:o,dangerItemHoverColor:g,dangerItemSelectedColor:m,dangerItemActiveBg:v,dangerItemSelectedBg:h,menuSubMenuBg:a,horizontalItemSelectedColor:l,horizontalItemSelectedBg:c});return[Q9(O),R9(O),_9(O),L9(O,"light"),L9(S,"dark"),B9(O),S9(O),D9(O,"slide-up"),D9(O,"slide-down"),Vr(O,"zoom-big")]}),H9,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:n,unitless:{groupTitleLineHeight:!0}})(t,e))(D,R,!r),j=At()(`${D}-${g}`,null==h?void 0:h.className,f),_=n.useMemo((()=>{var t,e;if("function"==typeof m||W9(m))return m||null;if("function"==typeof o.expandIcon||W9(o.expandIcon))return o.expandIcon||null;if("function"==typeof(null==h?void 0:h.expandIcon)||W9(null==h?void 0:h.expandIcon))return(null==h?void 0:h.expandIcon)||null;const i=null!==(t=null!=m?m:null==o?void 0:o.expandIcon)&&void 0!==t?t:null==h?void 0:h.expandIcon;return(0,Oa.Ob)(i,{className:At()(`${D}-submenu-expand-icon`,n.isValidElement(i)?null===(e=i.props)||void 0===e?void 0:e.className:void 0)})}),[m,null==o?void 0:o.expandIcon,null==h?void 0:h.expandIcon,D]),I=n.useMemo((()=>({prefixCls:D,inlineCollapsed:T||!1,direction:l,firstLevel:!0,theme:g,mode:E,disableMenuItemTitleTooltip:v})),[D,T,l,v,g]);return B(n.createElement(O9.Provider,{value:null},n.createElement(m9.Provider,{value:I},n.createElement(u9,Object.assign({getPopupContainer:a,overflowedIndicator:n.createElement(g9,null),overflowedIndicatorPopupClassName:At()(D,`${D}-${g}`,k),mode:E,selectable:P,onClick:M},A,{inlineCollapsed:T,style:Object.assign(Object.assign({},null==h?void 0:h.style),p),className:j,prefixCls:D,direction:l,defaultMotions:$,expandIcon:_,ref:e,rootClassName:At()(w,N,o.rootClassName,L,R),_internalComponents:F9})))))}));var X9=q9;const K9=(0,n.forwardRef)(((t,e)=>{const i=(0,n.useRef)(null),r=n.useContext(d9);return(0,n.useImperativeHandle)(e,(()=>({menu:i.current,focus:t=>{var e;null===(e=i.current)||void 0===e||e.focus(t)}}))),n.createElement(X9,Object.assign({ref:i},t,r))}));K9.Item=b9,K9.SubMenu=V9,K9.Divider=v9,K9.ItemGroup=i9;var Z9=K9;const Y9=new h.Mo("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),G9=new h.Mo("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),U9=new h.Mo("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),J9=new h.Mo("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),t7=new h.Mo("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),e7=new h.Mo("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),n7={"move-up":{inKeyframes:new h.Mo("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),outKeyframes:new h.Mo("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}})},"move-down":{inKeyframes:Y9,outKeyframes:G9},"move-left":{inKeyframes:U9,outKeyframes:J9},"move-right":{inKeyframes:t7,outKeyframes:e7}},i7=(t,e)=>{const{antCls:n}=t,i=`${n}-${e}`,{inKeyframes:r,outKeyframes:o}=n7[e];return[Dr(i,r,o,t.motionDurationMid),{[`\n        ${i}-enter,\n        ${i}-appear\n      `]:{opacity:0,animationTimingFunction:t.motionEaseOutCirc},[`${i}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]};var r7=t=>{const{componentCls:e,menuCls:n,colorError:i,colorTextLightSolid:r}=t,o=`${n}-item`;return{[`${e}, ${e}-menu-submenu`]:{[`${n} ${o}`]:{[`&${o}-danger:not(${o}-disabled)`]:{color:i,"&:hover":{color:r,backgroundColor:i}}}}}};const o7=t=>{const{componentCls:e,menuCls:n,zIndexPopup:i,dropdownArrowDistance:r,sizePopupArrow:o,antCls:s,iconCls:a,motionDurationMid:l,paddingBlock:c,fontSize:u,dropdownEdgeChildPadding:d,colorTextDisabled:f,fontSizeIcon:p,controlPaddingHorizontal:g,colorBgElevated:m}=t;return[{[e]:{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:i,display:"block","&::before":{position:"absolute",insetBlock:t.calc(o).div(2).sub(r).equal(),zIndex:-9999,opacity:1e-4,content:'""'},"&-menu-vertical":{maxHeight:"100vh",overflowY:"auto"},[`&-trigger${s}-btn`]:{[`& > ${a}-down, & > ${s}-btn-icon > ${a}-down`]:{fontSize:p}},[`${e}-wrap`]:{position:"relative",[`${s}-btn > ${a}-down`]:{fontSize:p},[`${a}-down::before`]:{transition:`transform ${l}`}},[`${e}-wrap-open`]:{[`${a}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${s}-slide-down-enter${s}-slide-down-enter-active${e}-placement-bottomLeft,\n          &${s}-slide-down-appear${s}-slide-down-appear-active${e}-placement-bottomLeft,\n          &${s}-slide-down-enter${s}-slide-down-enter-active${e}-placement-bottom,\n          &${s}-slide-down-appear${s}-slide-down-appear-active${e}-placement-bottom,\n          &${s}-slide-down-enter${s}-slide-down-enter-active${e}-placement-bottomRight,\n          &${s}-slide-down-appear${s}-slide-down-appear-active${e}-placement-bottomRight`]:{animationName:x9},[`&${s}-slide-up-enter${s}-slide-up-enter-active${e}-placement-topLeft,\n          &${s}-slide-up-appear${s}-slide-up-appear-active${e}-placement-topLeft,\n          &${s}-slide-up-enter${s}-slide-up-enter-active${e}-placement-top,\n          &${s}-slide-up-appear${s}-slide-up-appear-active${e}-placement-top,\n          &${s}-slide-up-enter${s}-slide-up-enter-active${e}-placement-topRight,\n          &${s}-slide-up-appear${s}-slide-up-appear-active${e}-placement-topRight`]:{animationName:C9},[`&${s}-slide-down-leave${s}-slide-down-leave-active${e}-placement-bottomLeft,\n          &${s}-slide-down-leave${s}-slide-down-leave-active${e}-placement-bottom,\n          &${s}-slide-down-leave${s}-slide-down-leave-active${e}-placement-bottomRight`]:{animationName:k9},[`&${s}-slide-up-leave${s}-slide-up-leave-active${e}-placement-topLeft,\n          &${s}-slide-up-leave${s}-slide-up-leave-active${e}-placement-top,\n          &${s}-slide-up-leave${s}-slide-up-leave-active${e}-placement-topRight`]:{animationName:A9}}},ma(t,m,{arrowPlacement:{top:!0,bottom:!0}}),{[`${e} ${n}`]:{position:"relative",margin:0},[`${n}-submenu-popup`]:{position:"absolute",zIndex:i,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${e}, ${e}-menu-submenu`]:Object.assign(Object.assign({},(0,J.dF)(t)),{[n]:Object.assign(Object.assign({padding:d,listStyleType:"none",backgroundColor:m,backgroundClip:"padding-box",borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary},(0,J.K8)(t)),{"&:empty":{padding:0,boxShadow:"none"},[`${n}-item-group-title`]:{padding:`${(0,h.zA)(c)} ${(0,h.zA)(g)}`,color:t.colorTextDescription,transition:`all ${l}`},[`${n}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${n}-item-icon`]:{minWidth:u,marginInlineEnd:t.marginXS,fontSize:t.fontSizeSM},[`${n}-title-content`]:{flex:"auto","&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},"> a":{color:"inherit",transition:`all ${l}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}},[`${n}-item-extra`]:{paddingInlineStart:t.padding,marginInlineStart:"auto",fontSize:t.fontSizeSM,color:t.colorTextDescription}},[`${n}-item, ${n}-submenu-title`]:Object.assign(Object.assign({display:"flex",margin:0,padding:`${(0,h.zA)(c)} ${(0,h.zA)(g)}`,color:t.colorText,fontWeight:"normal",fontSize:u,lineHeight:t.lineHeight,cursor:"pointer",transition:`all ${l}`,borderRadius:t.borderRadiusSM,"&:hover, &-active":{backgroundColor:t.controlItemBgHover}},(0,J.K8)(t)),{"&-selected":{color:t.colorPrimary,backgroundColor:t.controlItemBgActive,"&:hover, &-active":{backgroundColor:t.controlItemBgActiveHover}},"&-disabled":{color:f,cursor:"not-allowed","&:hover":{color:f,backgroundColor:m,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${(0,h.zA)(t.marginXXS)} 0`,overflow:"hidden",lineHeight:0,backgroundColor:t.colorSplit},[`${e}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:t.paddingXS,[`${e}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:t.colorIcon,fontSize:p,fontStyle:"normal"}}}),[`${n}-item-group-list`]:{margin:`0 ${(0,h.zA)(t.marginXS)}`,padding:0,listStyle:"none"},[`${n}-submenu-title`]:{paddingInlineEnd:t.calc(g).add(t.fontSizeSM).equal()},[`${n}-submenu-vertical`]:{position:"relative"},[`${n}-submenu${n}-submenu-disabled ${e}-menu-submenu-title`]:{[`&, ${e}-menu-submenu-arrow-icon`]:{color:f,backgroundColor:m,cursor:"not-allowed"}},[`${n}-submenu-selected ${e}-menu-submenu-title`]:{color:t.colorPrimary}})})},[D9(t,"slide-up"),D9(t,"slide-down"),i7(t,"move-up"),i7(t,"move-down"),Vr(t,"zoom-big")]]};var s7=(0,Ui.OF)("Dropdown",(t=>{const{marginXXS:e,sizePopupArrow:n,paddingXXS:i,componentCls:r}=t,o=(0,Ji.oX)(t,{menuCls:`${r}-menu`,dropdownArrowDistance:t.calc(n).div(2).add(e).equal(),dropdownEdgeChildPadding:i});return[o7(o),r7(o)]}),(t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+50,paddingBlock:(t.controlHeight-t.fontSize*t.lineHeight)/2},pa({contentRadius:t.borderRadiusLG,limitVerticalRadius:!0})),da(t))),{resetStyle:!1});const a7=t=>{var e;const{menu:i,arrow:r,prefixCls:o,children:s,trigger:a,disabled:l,dropdownRender:h,popupRender:u,getPopupContainer:d,overlayClassName:f,rootClassName:p,overlayStyle:g,open:m,onOpenChange:b,visible:y,onVisibleChange:w,mouseEnterDelay:O=.15,mouseLeaveDelay:S=.1,autoAdjustOverflow:x=!0,placement:k="",overlay:C,transitionName:A,destroyOnHidden:M,destroyPopupOnHide:E}=t,{getPopupContainer:P,getPrefixCls:T,direction:$,dropdown:D}=n.useContext(c.QO),R=u||h;v();const B=n.useMemo((()=>{const t=T();return void 0!==A?A:k.includes("top")?`${t}-slide-down`:`${t}-slide-up`}),[T,k,A]),N=n.useMemo((()=>k?k.includes("Center")?k.slice(0,k.indexOf("Center")):k:"rtl"===$?"bottomRight":"bottomLeft"),[k,$]),L=T("dropdown",o),j=Zi(L),[_,I,z]=s7(L,j),[,Q]=(0,Y.Ay)(),H=n.Children.only("object"!=typeof(et=s)&&"function"!=typeof et||null===et?n.createElement("span",null,s):s),V=(0,Oa.Ob)(H,{className:At()(`${L}-trigger`,{[`${L}-rtl`]:"rtl"===$},H.props.className),disabled:null!==(e=H.props.disabled)&&void 0!==e?e:l}),W=l?[]:a,F=!!(null==W?void 0:W.includes("contextMenu")),[q,X]=(0,mo.A)(!1,{value:null!=m?m:y}),K=(0,wr.A)((t=>{null==b||b(t,{source:"trigger"}),null==w||w(t),X(t)})),Z=At()(f,p,I,z,j,null==D?void 0:D.className,{[`${L}-rtl`]:"rtl"===$}),G=wa({arrowPointAtCenter:"object"==typeof r&&r.pointAtCenter,autoAdjustOverflow:x,offset:Q.marginXXS,arrowWidth:r?Q.sizePopupArrow:0,borderRadius:Q.borderRadius}),U=n.useCallback((()=>{(null==i?void 0:i.selectable)&&(null==i?void 0:i.multiple)||(null==b||b(!1,{source:"menu"}),X(!1))}),[null==i?void 0:i.selectable,null==i?void 0:i.multiple]),[J,tt]=$t("Dropdown",null==g?void 0:g.zIndex);var et;let nt=n.createElement(i4,Object.assign({alignPoint:F},(0,Yi.A)(t,["rootClassName"]),{mouseEnterDelay:O,mouseLeaveDelay:S,visible:q,builtinPlacements:G,arrow:!!r,overlayClassName:Z,prefixCls:L,getPopupContainer:d||P,transitionName:B,trigger:W,overlay:()=>{let t;return t=(null==i?void 0:i.items)?n.createElement(Z9,Object.assign({},i)):"function"==typeof C?C():C,R&&(t=R(t)),t=n.Children.only("string"==typeof t?n.createElement("span",null,t):t),n.createElement(w9,{prefixCls:`${L}-menu`,rootClassName:At()(z,j),expandIcon:n.createElement("span",{className:`${L}-menu-submenu-arrow`},"rtl"===$?n.createElement(Q3,{className:`${L}-menu-submenu-arrow-icon`}):n.createElement(W3,{className:`${L}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:U,validator:({mode:t})=>{}},t)},placement:N,onVisibleChange:K,overlayStyle:Object.assign(Object.assign(Object.assign({},null==D?void 0:D.style),g),{zIndex:J}),autoDestroy:null!=M?M:E}),V);return J&&(nt=n.createElement(Mt.Provider,{value:tt},nt)),_(nt)},l7=bo(a7,"align",void 0,"dropdown",(t=>t));a7._InternalPanelDoNotUseOrYouWillBeFired=t=>n.createElement(l7,Object.assign({},t),n.createElement("span",null));var c7=a7;function h7(t){return["small","middle","large"].includes(t)}function u7(t){return!!t&&"number"==typeof t&&!Number.isNaN(t)}const d7=n.default.createContext({latestIndex:0}),f7=d7.Provider;var p7=({className:t,index:e,children:i,split:r,style:o})=>{const{latestIndex:s}=n.useContext(d7);return null==i?null:n.createElement(n.Fragment,null,n.createElement("div",{className:t,style:o},i),e<s&&r&&n.createElement("span",{className:`${t}-split`},r))},g7=__webpack_require__(5447);const m7=n.forwardRef(((t,e)=>{var i;const{getPrefixCls:r,direction:o,size:s,className:a,style:l,classNames:h,styles:u}=(0,c.TP)("space"),{size:d=(null!=s?s:"small"),align:f,className:p,rootClassName:g,children:m,direction:v="horizontal",prefixCls:b,split:y,style:w,wrap:O=!1,classNames:S,styles:x}=t,k=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[C,A]=Array.isArray(d)?d:[d,d],M=h7(A),E=h7(C),P=u7(A),T=u7(C),$=(0,fn.A)(m,{keepEmpty:!0}),D=void 0===f&&"horizontal"===v?"center":f,R=r("space",b),[B,N,L]=(0,g7.A)(R),j=At()(R,a,N,`${R}-${v}`,{[`${R}-rtl`]:"rtl"===o,[`${R}-align-${D}`]:D,[`${R}-gap-row-${A}`]:M,[`${R}-gap-col-${C}`]:E},p,g,L),_=At()(`${R}-item`,null!==(i=null==S?void 0:S.item)&&void 0!==i?i:h.item);let I=0;const z=$.map(((t,e)=>{var i;null!=t&&(I=e);const r=(null==t?void 0:t.key)||`${_}-${e}`;return n.createElement(p7,{className:_,key:r,index:e,split:y,style:null!==(i=null==x?void 0:x.item)&&void 0!==i?i:u.item},t)})),Q=n.useMemo((()=>({latestIndex:I})),[I]);if(0===$.length)return null;const H={};return O&&(H.flexWrap="wrap"),!E&&T&&(H.columnGap=C),!M&&P&&(H.rowGap=A),B(n.createElement("div",Object.assign({ref:e,className:j,style:Object.assign(Object.assign(Object.assign({},H),l),w)},k),n.createElement(f7,{value:Q},z)))})),v7=m7;v7.Compact=Vi.Ay;var b7=v7;const y7=t=>{const{getPopupContainer:e,getPrefixCls:i,direction:r}=n.useContext(c.QO),{prefixCls:o,type:s="default",danger:l,disabled:h,loading:u,onClick:d,htmlType:f,children:p,className:g,menu:m,arrow:v,autoFocus:b,overlay:y,trigger:w,align:O,open:S,onOpenChange:x,placement:k,getPopupContainer:C,href:A,icon:M=n.createElement(g9,null),title:E,buttonsRender:P=t=>t,mouseEnterDelay:T,mouseLeaveDelay:$,overlayClassName:D,overlayStyle:R,destroyOnHidden:B,destroyPopupOnHide:N,dropdownRender:L,popupRender:j}=t,_=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyOnHidden","destroyPopupOnHide","dropdownRender","popupRender"]),I=i("dropdown",o),z=`${I}-button`,Q={menu:m,arrow:v,autoFocus:b,align:O,disabled:h,trigger:h?[]:w,onOpenChange:x,getPopupContainer:C||e,mouseEnterDelay:T,mouseLeaveDelay:$,overlayClassName:D,overlayStyle:R,destroyOnHidden:B,popupRender:j||L},{compactSize:H,compactItemClassnames:V}=(0,Vi.RQ)(I,r),W=At()(z,V,g);"destroyPopupOnHide"in t&&(Q.destroyPopupOnHide=N),"overlay"in t&&(Q.overlay=y),"open"in t&&(Q.open=S),Q.placement="placement"in t?k:"rtl"===r?"bottomLeft":"bottomRight";const F=n.createElement(a.Ay,{type:s,danger:l,disabled:h,loading:u,onClick:d,htmlType:f,href:A,title:E},p),q=n.createElement(a.Ay,{type:s,danger:l,icon:M}),[X,K]=P([F,q]);return n.createElement(b7.Compact,Object.assign({className:W,size:H,block:!0},_),X,n.createElement(c7,Object.assign({},Q),K))};y7.__ANT_BUTTON=!0;var w7=y7;const O7=c7;O7.Button=w7;var S7=O7;const x7=n.createContext(null),k7=x7.Provider;var C7=x7;const A7=n.createContext(null),M7=A7.Provider,E7=t=>{const{componentCls:e,antCls:n}=t,i=`${e}-group`;return{[i]:Object.assign(Object.assign({},(0,J.dF)(t)),{display:"inline-block",fontSize:0,[`&${i}-rtl`]:{direction:"rtl"},[`&${i}-block`]:{display:"flex"},[`${n}-badge ${n}-badge-count`]:{zIndex:1},[`> ${n}-badge:not(:first-child) > ${n}-button-wrapper`]:{borderInlineStart:"none"}})}},P7=t=>{const{componentCls:e,wrapperMarginInlineEnd:n,colorPrimary:i,radioSize:r,motionDurationSlow:o,motionDurationMid:s,motionEaseInOutCirc:a,colorBgContainer:l,colorBorder:c,lineWidth:u,colorBgContainerDisabled:d,colorTextDisabled:f,paddingXS:p,dotColorDisabled:g,lineType:m,radioColor:v,radioBgColor:b,calc:y}=t,w=`${e}-inner`,O=y(r).sub(y(4).mul(2)),S=y(1).mul(r).equal({unit:!0});return{[`${e}-wrapper`]:Object.assign(Object.assign({},(0,J.dF)(t)),{display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:n,cursor:"pointer","&:last-child":{marginInlineEnd:0},[`&${e}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:t.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},"&-block":{flex:1,justifyContent:"center"},[`${e}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${(0,h.zA)(u)} ${m} ${i}`,borderRadius:"50%",visibility:"hidden",opacity:0,content:'""'},[e]:Object.assign(Object.assign({},(0,J.dF)(t)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center",borderRadius:"50%"}),[`${e}-wrapper:hover &,\n        &:hover ${w}`]:{borderColor:i},[`${e}-input:focus-visible + ${w}`]:Object.assign({},(0,J.jk)(t)),[`${e}:hover::after, ${e}-wrapper:hover &::after`]:{visibility:"visible"},[`${e}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:S,height:S,marginBlockStart:y(1).mul(r).div(-2).equal({unit:!0}),marginInlineStart:y(1).mul(r).div(-2).equal({unit:!0}),backgroundColor:v,borderBlockStart:0,borderInlineStart:0,borderRadius:S,transform:"scale(0)",opacity:0,transition:`all ${o} ${a}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:S,height:S,backgroundColor:l,borderColor:c,borderStyle:"solid",borderWidth:u,borderRadius:"50%",transition:`all ${s}`},[`${e}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0},[`${e}-checked`]:{[w]:{borderColor:i,backgroundColor:b,"&::after":{transform:`scale(${t.calc(t.dotSize).div(r).equal()})`,opacity:1,transition:`all ${o} ${a}`}}},[`${e}-disabled`]:{cursor:"not-allowed",[w]:{backgroundColor:d,borderColor:c,cursor:"not-allowed","&::after":{backgroundColor:g}},[`${e}-input`]:{cursor:"not-allowed"},[`${e}-disabled + span`]:{color:f,cursor:"not-allowed"},[`&${e}-checked`]:{[w]:{"&::after":{transform:`scale(${y(O).div(r).equal()})`}}}},[`span${e} + *`]:{paddingInlineStart:p,paddingInlineEnd:p}})}},T7=t=>{const{buttonColor:e,controlHeight:n,componentCls:i,lineWidth:r,lineType:o,colorBorder:s,motionDurationSlow:a,motionDurationMid:l,buttonPaddingInline:c,fontSize:u,buttonBg:d,fontSizeLG:f,controlHeightLG:p,controlHeightSM:g,paddingXS:m,borderRadius:v,borderRadiusSM:b,borderRadiusLG:y,buttonCheckedBg:w,buttonSolidCheckedColor:O,colorTextDisabled:S,colorBgContainerDisabled:x,buttonCheckedBgDisabled:k,buttonCheckedColorDisabled:C,colorPrimary:A,colorPrimaryHover:M,colorPrimaryActive:E,buttonSolidCheckedBg:P,buttonSolidCheckedHoverBg:T,buttonSolidCheckedActiveBg:$,calc:D}=t;return{[`${i}-button-wrapper`]:{position:"relative",display:"inline-block",height:n,margin:0,paddingInline:c,paddingBlock:0,color:e,fontSize:u,lineHeight:(0,h.zA)(D(n).sub(D(r).mul(2)).equal()),background:d,border:`${(0,h.zA)(r)} ${o} ${s}`,borderBlockStartWidth:D(r).add(.02).equal(),borderInlineStartWidth:0,borderInlineEndWidth:r,cursor:"pointer",transition:[`color ${l}`,`background ${l}`,`box-shadow ${l}`].join(","),a:{color:e},[`> ${i}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:D(r).mul(-1).equal(),insetInlineStart:D(r).mul(-1).equal(),display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:r,paddingInline:0,backgroundColor:s,transition:`background-color ${a}`,content:'""'}},"&:first-child":{borderInlineStart:`${(0,h.zA)(r)} ${o} ${s}`,borderStartStartRadius:v,borderEndStartRadius:v},"&:last-child":{borderStartEndRadius:v,borderEndEndRadius:v},"&:first-child:last-child":{borderRadius:v},[`${i}-group-large &`]:{height:p,fontSize:f,lineHeight:(0,h.zA)(D(p).sub(D(r).mul(2)).equal()),"&:first-child":{borderStartStartRadius:y,borderEndStartRadius:y},"&:last-child":{borderStartEndRadius:y,borderEndEndRadius:y}},[`${i}-group-small &`]:{height:g,paddingInline:D(m).sub(r).equal(),paddingBlock:0,lineHeight:(0,h.zA)(D(g).sub(D(r).mul(2)).equal()),"&:first-child":{borderStartStartRadius:b,borderEndStartRadius:b},"&:last-child":{borderStartEndRadius:b,borderEndEndRadius:b}},"&:hover":{position:"relative",color:A},"&:has(:focus-visible)":Object.assign({},(0,J.jk)(t)),[`${i}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${i}-button-wrapper-disabled)`]:{zIndex:1,color:A,background:w,borderColor:A,"&::before":{backgroundColor:A},"&:first-child":{borderColor:A},"&:hover":{color:M,borderColor:M,"&::before":{backgroundColor:M}},"&:active":{color:E,borderColor:E,"&::before":{backgroundColor:E}}},[`${i}-group-solid &-checked:not(${i}-button-wrapper-disabled)`]:{color:O,background:P,borderColor:P,"&:hover":{color:O,background:T,borderColor:T},"&:active":{color:O,background:$,borderColor:$}},"&-disabled":{color:S,backgroundColor:x,borderColor:s,cursor:"not-allowed","&:first-child, &:hover":{color:S,backgroundColor:x,borderColor:s}},[`&-disabled${i}-button-wrapper-checked`]:{color:C,backgroundColor:k,borderColor:s,boxShadow:"none"},"&-block":{flex:1,textAlign:"center"}}}};var $7=(0,Ui.OF)("Radio",(t=>{const{controlOutline:e,controlOutlineWidth:n}=t,i=`0 0 0 ${(0,h.zA)(n)} ${e}`,r=i,o=(0,Ji.oX)(t,{radioFocusShadow:i,radioButtonFocusShadow:r});return[E7(o),P7(o),T7(o)]}),(t=>{const{wireframe:e,padding:n,marginXS:i,lineWidth:r,fontSizeLG:o,colorText:s,colorBgContainer:a,colorTextDisabled:l,controlItemBgActiveDisabled:c,colorTextLightSolid:h,colorPrimary:u,colorPrimaryHover:d,colorPrimaryActive:f,colorWhite:p}=t;return{radioSize:o,dotSize:e?o-8:o-2*(4+r),dotColorDisabled:l,buttonSolidCheckedColor:h,buttonSolidCheckedBg:u,buttonSolidCheckedHoverBg:d,buttonSolidCheckedActiveBg:f,buttonBg:a,buttonCheckedBg:a,buttonColor:s,buttonCheckedBgDisabled:c,buttonCheckedColorDisabled:l,buttonPaddingInline:n-r,wrapperMarginInlineEnd:i,radioColor:e?u:p,radioBgColor:e?a:u}}),{unitless:{radioSize:!0,dotSize:!0}});const D7=(t,e)=>{var i,r;const o=n.useContext(C7),s=n.useContext(A7),{getPrefixCls:a,direction:l,radio:h}=n.useContext(c.QO),u=n.useRef(null),d=(0,ie.K4)(e,u),{isFormItemInput:f}=n.useContext(zi),{prefixCls:p,className:g,rootClassName:m,children:v,style:b,title:y}=t,w=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","className","rootClassName","children","style","title"]),O=a("radio",p),S="button"===((null==o?void 0:o.optionType)||s),x=S?`${O}-button`:O,k=Zi(O),[C,A,M]=$7(O,k),E=Object.assign({},w),P=n.useContext(V.A);o&&(E.name=o.name,E.onChange=e=>{var n,i;null===(n=t.onChange)||void 0===n||n.call(t,e),null===(i=null==o?void 0:o.onChange)||void 0===i||i.call(o,e)},E.checked=t.value===o.value,E.disabled=null!==(i=E.disabled)&&void 0!==i?i:o.disabled),E.disabled=null!==(r=E.disabled)&&void 0!==r?r:P;const T=At()(`${x}-wrapper`,{[`${x}-wrapper-checked`]:E.checked,[`${x}-wrapper-disabled`]:E.disabled,[`${x}-wrapper-rtl`]:"rtl"===l,[`${x}-wrapper-in-form-item`]:f,[`${x}-wrapper-block`]:!!(null==o?void 0:o.block)},null==h?void 0:h.className,g,m,A,M,k),[$,D]=D3(E.onClick);return C(n.createElement(A3.A,{component:"Radio",disabled:E.disabled},n.createElement("label",{className:T,style:Object.assign(Object.assign({},null==h?void 0:h.style),b),onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,title:y,onClick:$},n.createElement(C3,Object.assign({},E,{className:At()(E.className,{[M3.D]:!S}),type:"radio",prefixCls:x,ref:d,onClick:D})),void 0!==v?n.createElement("span",{className:`${x}-label`},v):null)))};var R7=n.forwardRef(D7);const B7=n.forwardRef(((t,e)=>{const{getPrefixCls:i,direction:r}=n.useContext(c.QO),o=Me(),{prefixCls:s,className:a,rootClassName:l,options:h,buttonStyle:u="outline",disabled:d,children:f,size:p,style:g,id:m,optionType:v,name:b=o,defaultValue:y,value:w,block:O=!1,onChange:S,onMouseEnter:x,onMouseLeave:k,onFocus:C,onBlur:A}=t,[M,E]=(0,mo.A)(y,{value:w}),P=n.useCallback((e=>{const n=M,i=e.target.value;"value"in t||E(i),i!==n&&(null==S||S(e))}),[M,E,S]),T=i("radio",s),$=`${T}-group`,D=Zi(T),[R,B,N]=$7(T,D);let L=f;h&&h.length>0&&(L=h.map((t=>"string"==typeof t||"number"==typeof t?n.createElement(R7,{key:t.toString(),prefixCls:T,disabled:d,value:t,checked:M===t},t):n.createElement(R7,{key:`radio-group-value-options-${t.value}`,prefixCls:T,disabled:t.disabled||d,value:t.value,checked:M===t.value,title:t.title,style:t.style,className:t.className,id:t.id,required:t.required},t.label))));const j=(0,Sl.A)(p),_=At()($,`${$}-${u}`,{[`${$}-${j}`]:j,[`${$}-rtl`]:"rtl"===r,[`${$}-block`]:O},a,l,B,N,D),I=n.useMemo((()=>({onChange:P,value:M,disabled:d,name:b,optionType:v,block:O})),[P,M,d,b,v,O]);return R(n.createElement("div",Object.assign({},De(t,{aria:!0,data:!0}),{className:_,style:g,onMouseEnter:x,onMouseLeave:k,onFocus:C,onBlur:A,id:m,ref:e}),n.createElement(k7,{value:I},L)))}));var N7=n.memo(B7);const L7=(t,e)=>{const{getPrefixCls:i}=n.useContext(c.QO),{prefixCls:r}=t,o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls"]),s=i("radio",r);return n.createElement(M7,{value:"button"},n.createElement(R7,Object.assign({prefixCls:s},o,{type:"radio",ref:e})))};var j7=n.forwardRef(L7);const _7=R7;_7.Button=j7,_7.Group=N7,_7.__ANT_RADIO=!0;var I7=_7;const z7={},Q7="SELECT_ALL",H7="SELECT_INVERT",V7="SELECT_NONE",W7=[],F7=(t,e)=>{let n=[];return(e||[]).forEach((e=>{n.push(e),e&&"object"==typeof e&&t in e&&(n=[].concat((0,l.A)(n),(0,l.A)(F7(t,e[t]))))})),n};function q7(t){return null!=t&&t===t.window}var X7=()=>{const[,t]=(0,Y.Ay)(),[e]=_t("Empty"),i=new I.Y(t.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return n.createElement("svg",{style:i,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},n.createElement("title",null,(null==e?void 0:e.description)||"Empty"),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("g",{transform:"translate(24 31.67)"},n.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),n.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),n.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),n.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),n.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),n.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),n.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},n.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),n.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},K7=()=>{const[,t]=(0,Y.Ay)(),[e]=_t("Empty"),{colorFill:i,colorFillTertiary:r,colorFillQuaternary:o,colorBgContainer:s}=t,{borderColor:a,shadowColor:l,contentColor:c}=(0,n.useMemo)((()=>({borderColor:new I.Y(i).onBackground(s).toHexString(),shadowColor:new I.Y(r).onBackground(s).toHexString(),contentColor:new I.Y(o).onBackground(s).toHexString()})),[i,r,o,s]);return n.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},n.createElement("title",null,(null==e?void 0:e.description)||"Empty"),n.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},n.createElement("ellipse",{fill:l,cx:"32",cy:"33",rx:"32",ry:"7"}),n.createElement("g",{fillRule:"nonzero",stroke:a},n.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),n.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:c}))))};const Z7=t=>{const{componentCls:e,margin:n,marginXS:i,marginXL:r,fontSize:o,lineHeight:s}=t;return{[e]:{marginInline:i,fontSize:o,lineHeight:s,textAlign:"center",[`${e}-image`]:{height:t.emptyImgHeight,marginBottom:i,opacity:t.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${e}-description`]:{color:t.colorTextDescription},[`${e}-footer`]:{marginTop:n},"&-normal":{marginBlock:r,color:t.colorTextDescription,[`${e}-description`]:{color:t.colorTextDescription},[`${e}-image`]:{height:t.emptyImgHeightMD}},"&-small":{marginBlock:i,color:t.colorTextDescription,[`${e}-image`]:{height:t.emptyImgHeightSM}}}}};var Y7=(0,Ui.OF)("Empty",(t=>{const{componentCls:e,controlHeightLG:n,calc:i}=t,r=(0,Ji.oX)(t,{emptyImgCls:`${e}-img`,emptyImgHeight:i(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:i(n).mul(.875).equal()});return[Z7(r)]}));const G7=n.createElement(X7,null),U7=n.createElement(K7,null),J7=t=>{const{className:e,rootClassName:i,prefixCls:r,image:o=G7,description:s,children:a,imageStyle:l,style:h,classNames:u,styles:d}=t,f=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:p,direction:g,className:m,style:v,classNames:b,styles:y}=(0,c.TP)("empty"),w=p("empty",r),[O,S,x]=Y7(w),[k]=_t("Empty"),C=void 0!==s?s:null==k?void 0:k.description,A="string"==typeof C?C:"empty";let M=null;return M="string"==typeof o?n.createElement("img",{alt:A,src:o}):o,O(n.createElement("div",Object.assign({className:At()(S,x,w,m,{[`${w}-normal`]:o===U7,[`${w}-rtl`]:"rtl"===g},e,i,b.root,null==u?void 0:u.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},y.root),v),null==d?void 0:d.root),h)},f),n.createElement("div",{className:At()(`${w}-image`,b.image,null==u?void 0:u.image),style:Object.assign(Object.assign(Object.assign({},l),y.image),null==d?void 0:d.image)},M),C&&n.createElement("div",{className:At()(`${w}-description`,b.description,null==u?void 0:u.description),style:Object.assign(Object.assign({},y.description),null==d?void 0:d.description)},C),a&&n.createElement("div",{className:At()(`${w}-footer`,b.footer,null==u?void 0:u.footer),style:Object.assign(Object.assign({},y.footer),null==d?void 0:d.footer)},a)))};J7.PRESENTED_IMAGE_DEFAULT=G7,J7.PRESENTED_IMAGE_SIMPLE=U7;var ttt=J7,ett=t=>{const{componentName:e}=t,{getPrefixCls:i}=(0,n.useContext)(c.QO),r=i("empty");switch(e){case"Table":case"List":return n.default.createElement(ttt,{image:ttt.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return n.default.createElement(ttt,{image:ttt.PRESENTED_IMAGE_SIMPLE,className:`${r}-small`});case"Table.filter":return null;default:return n.default.createElement(ttt,null)}};function ntt(){const[,t]=n.useReducer((t=>t+1),0);return t}const itt=["xxl","xl","lg","md","sm","xs"];var rtt=()=>{const[,t]=(0,Y.Ay)(),e=(t=>({xs:`(max-width: ${t.screenXSMax}px)`,sm:`(min-width: ${t.screenSM}px)`,md:`(min-width: ${t.screenMD}px)`,lg:`(min-width: ${t.screenLG}px)`,xl:`(min-width: ${t.screenXL}px)`,xxl:`(min-width: ${t.screenXXL}px)`}))((t=>{const e=t,n=[].concat(itt).reverse();return n.forEach(((t,i)=>{const r=t.toUpperCase(),o=`screen${r}Min`,s=`screen${r}`;if(!(e[o]<=e[s]))throw new Error(`${o}<=${s} fails : !(${e[o]}<=${e[s]})`);if(i<n.length-1){const t=`screen${r}Max`;if(!(e[s]<=e[t]))throw new Error(`${s}<=${t} fails : !(${e[s]}<=${e[t]})`);const o=`screen${n[i+1].toUpperCase()}Min`;if(!(e[t]<=e[o]))throw new Error(`${t}<=${o} fails : !(${e[t]}<=${e[o]})`)}})),t})(t));return n.default.useMemo((()=>{const t=new Map;let n=-1,i={};return{responsiveMap:e,matchHandlers:{},dispatch(e){return i=e,t.forEach((t=>t(i))),t.size>=1},subscribe(e){return t.size||this.register(),n+=1,t.set(n,e),e(i),n},unsubscribe(e){t.delete(e),t.size||this.unregister()},register(){Object.entries(e).forEach((([t,e])=>{const n=({matches:e})=>{this.dispatch(Object.assign(Object.assign({},i),{[t]:e}))},r=window.matchMedia(e);((t,e)=>{void 0!==(null==t?void 0:t.addEventListener)?t.addEventListener("change",e):void 0!==(null==t?void 0:t.addListener)&&t.addListener(e)})(r,n),this.matchHandlers[e]={mql:r,listener:n},n(r)}))},unregister(){Object.values(e).forEach((t=>{const e=this.matchHandlers[t];((t,e)=>{void 0!==(null==t?void 0:t.removeEventListener)?t.removeEventListener("change",e):void 0!==(null==t?void 0:t.removeListener)&&t.removeListener(e)})(null==e?void 0:e.mql,null==e?void 0:e.listener)})),t.clear()}}}),[t])},ott=function(t=!0,e={}){const i=(0,n.useRef)(e),r=ntt(),o=rtt();return(0,se.A)((()=>{const e=o.subscribe((e=>{i.current=e,t&&r()}));return()=>o.unsubscribe(e)}),[]),i.current},stt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},att=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:stt}))},ltt=n.forwardRef(att),ctt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},htt=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:ctt}))},utt=n.forwardRef(htt);function dtt(t){return dtt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dtt(t)}function ftt(t,e,n){return(e=function(t){var e=function(t){if("object"!=dtt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=dtt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dtt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ptt(){return ptt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ptt.apply(null,arguments)}function gtt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function mtt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function vtt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return mtt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mtt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var btt={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},ytt=[10,20,50,100],wtt=function(t){var e=t.pageSizeOptions,i=void 0===e?ytt:e,r=t.locale,o=t.changeSize,s=t.pageSize,a=t.goButton,l=t.quickGo,c=t.rootPrefixCls,h=t.disabled,u=t.buildOptionText,d=t.showSizeChanger,f=t.sizeChangerRender,p=vtt(n.default.useState(""),2),g=p[0],m=p[1],v=function(){return!g||Number.isNaN(g)?void 0:Number(g)},b="function"==typeof u?u:function(t){return"".concat(t," ").concat(r.items_per_page)},y=function(t){""!==g&&(t.keyCode!==Pe.ENTER&&"click"!==t.type||(m(""),null==l||l(v())))},w="".concat(c,"-options");if(!d&&!l)return null;var O=null,S=null,x=null;return d&&f&&(O=f({disabled:h,size:s,onSizeChange:function(t){null==o||o(Number(t))},"aria-label":r.page_size,className:"".concat(w,"-size-changer"),options:(i.some((function(t){return t.toString()===s.toString()}))?i:i.concat([s]).sort((function(t,e){return(Number.isNaN(Number(t))?0:Number(t))-(Number.isNaN(Number(e))?0:Number(e))}))).map((function(t){return{label:b(t),value:t}}))})),l&&(a&&(x="boolean"==typeof a?n.default.createElement("button",{type:"button",onClick:y,onKeyUp:y,disabled:h,className:"".concat(w,"-quick-jumper-button")},r.jump_to_confirm):n.default.createElement("span",{onClick:y,onKeyUp:y},a)),S=n.default.createElement("div",{className:"".concat(w,"-quick-jumper")},r.jump_to,n.default.createElement("input",{disabled:h,type:"text",value:g,onChange:function(t){m(t.target.value)},onKeyUp:y,onBlur:function(t){a||""===g||(m(""),t.relatedTarget&&(t.relatedTarget.className.indexOf("".concat(c,"-item-link"))>=0||t.relatedTarget.className.indexOf("".concat(c,"-item"))>=0)||null==l||l(v()))},"aria-label":r.page}),r.page,x)),n.default.createElement("li",{className:w},O,S)},Ott=function(t){var e=t.rootPrefixCls,i=t.page,r=t.active,o=t.className,s=t.showTitle,a=t.onClick,l=t.onKeyPress,c=t.itemRender,h="".concat(e,"-item"),u=At()(h,"".concat(h,"-").concat(i),ftt(ftt({},"".concat(h,"-active"),r),"".concat(h,"-disabled"),!i),o),d=c(i,"page",n.default.createElement("a",{rel:"nofollow"},i));return d?n.default.createElement("li",{title:s?String(i):null,className:u,onClick:function(){a(i)},onKeyDown:function(t){l(t,a,i)},tabIndex:0},d):null},Stt=function(t,e,n){return n};function xtt(){}function ktt(t){var e=Number(t);return"number"==typeof e&&!Number.isNaN(e)&&isFinite(e)&&Math.floor(e)===e}function Ctt(t,e,n){var i=void 0===t?e:t;return Math.floor((n-1)/i)+1}var Att=function(t){var e=t.prefixCls,i=void 0===e?"rc-pagination":e,r=t.selectPrefixCls,o=void 0===r?"rc-select":r,s=t.className,a=t.current,l=t.defaultCurrent,c=void 0===l?1:l,h=t.total,u=void 0===h?0:h,d=t.pageSize,f=t.defaultPageSize,p=void 0===f?10:f,g=t.onChange,m=void 0===g?xtt:g,v=t.hideOnSinglePage,b=t.align,y=t.showPrevNextJumpers,w=void 0===y||y,O=t.showQuickJumper,S=t.showLessItems,x=t.showTitle,k=void 0===x||x,C=t.onShowSizeChange,A=void 0===C?xtt:C,M=t.locale,E=void 0===M?btt:M,P=t.style,T=t.totalBoundaryShowSizeChanger,$=void 0===T?50:T,D=t.disabled,R=t.simple,B=t.showTotal,N=t.showSizeChanger,L=void 0===N?u>$:N,j=t.sizeChangerRender,_=t.pageSizeOptions,I=t.itemRender,z=void 0===I?Stt:I,Q=t.jumpPrevIcon,H=t.jumpNextIcon,V=t.prevIcon,W=t.nextIcon,F=n.default.useRef(null),q=vtt((0,mo.A)(10,{value:d,defaultValue:p}),2),X=q[0],K=q[1],Z=vtt((0,mo.A)(1,{value:a,defaultValue:c,postState:function(t){return Math.max(1,Math.min(t,Ctt(void 0,X,u)))}}),2),Y=Z[0],G=Z[1],U=vtt(n.default.useState(Y),2),J=U[0],tt=U[1];(0,n.useEffect)((function(){tt(Y)}),[Y]);var et=Math.max(1,Y-(S?3:5)),nt=Math.min(Ctt(void 0,X,u),Y+(S?3:5));function it(e,r){var o=e||n.default.createElement("button",{type:"button","aria-label":r,className:"".concat(i,"-item-link")});return"function"==typeof e&&(o=n.default.createElement(e,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gtt(Object(n),!0).forEach((function(e){ftt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gtt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t))),o}function rt(t){var e=t.target.value,n=Ctt(void 0,X,u);return""===e?e:Number.isNaN(Number(e))?J:e>=n?n:Number(e)}var ot=u>X&&O;function st(t){var e=rt(t);switch(e!==J&&tt(e),t.keyCode){case Pe.ENTER:at(e);break;case Pe.UP:at(e-1);break;case Pe.DOWN:at(e+1)}}function at(t){if(function(t){return ktt(t)&&t!==Y&&ktt(u)&&u>0}(t)&&!D){var e=Ctt(void 0,X,u),n=t;return t>e?n=e:t<1&&(n=1),n!==J&&tt(n),G(n),null==m||m(n,X),n}return Y}var lt=Y>1,ct=Y<Ctt(void 0,X,u);function ht(){lt&&at(Y-1)}function ut(){ct&&at(Y+1)}function dt(){at(et)}function ft(){at(nt)}function pt(t,e){if("Enter"===t.key||t.charCode===Pe.ENTER||t.keyCode===Pe.ENTER){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];e.apply(void 0,i)}}function gt(t){"click"!==t.type&&t.keyCode!==Pe.ENTER||at(J)}var mt=null,vt=De(t,{aria:!0,data:!0}),bt=B&&n.default.createElement("li",{className:"".concat(i,"-total-text")},B(u,[0===u?0:(Y-1)*X+1,Y*X>u?u:Y*X])),yt=null,wt=Ctt(void 0,X,u);if(v&&u<=X)return null;var Ot=[],St={rootPrefixCls:i,onClick:at,onKeyPress:pt,showTitle:k,itemRender:z,page:-1},xt=Y-1>0?Y-1:0,kt=Y+1<wt?Y+1:wt,Ct=O&&O.goButton,Mt="object"===dtt(R)?R.readOnly:!R,Et=Ct,Pt=null;R&&(Ct&&(Et="boolean"==typeof Ct?n.default.createElement("button",{type:"button",onClick:gt,onKeyUp:gt},E.jump_to_confirm):n.default.createElement("span",{onClick:gt,onKeyUp:gt},Ct),Et=n.default.createElement("li",{title:k?"".concat(E.jump_to).concat(Y,"/").concat(wt):null,className:"".concat(i,"-simple-pager")},Et)),Pt=n.default.createElement("li",{title:k?"".concat(Y,"/").concat(wt):null,className:"".concat(i,"-simple-pager")},Mt?J:n.default.createElement("input",{type:"text","aria-label":E.jump_to,value:J,disabled:D,onKeyDown:function(t){t.keyCode!==Pe.UP&&t.keyCode!==Pe.DOWN||t.preventDefault()},onKeyUp:st,onChange:st,onBlur:function(t){at(rt(t))},size:3}),n.default.createElement("span",{className:"".concat(i,"-slash")},"/"),wt));var Tt=S?1:2;if(wt<=3+2*Tt){wt||Ot.push(n.default.createElement(Ott,ptt({},St,{key:"noPager",page:1,className:"".concat(i,"-item-disabled")})));for(var $t=1;$t<=wt;$t+=1)Ot.push(n.default.createElement(Ott,ptt({},St,{key:$t,page:$t,active:Y===$t})))}else{var Dt=S?E.prev_3:E.prev_5,Rt=S?E.next_3:E.next_5,Bt=z(et,"jump-prev",it(Q,"prev page")),Nt=z(nt,"jump-next",it(H,"next page"));w&&(mt=Bt?n.default.createElement("li",{title:k?Dt:null,key:"prev",onClick:dt,tabIndex:0,onKeyDown:function(t){pt(t,dt)},className:At()("".concat(i,"-jump-prev"),ftt({},"".concat(i,"-jump-prev-custom-icon"),!!Q))},Bt):null,yt=Nt?n.default.createElement("li",{title:k?Rt:null,key:"next",onClick:ft,tabIndex:0,onKeyDown:function(t){pt(t,ft)},className:At()("".concat(i,"-jump-next"),ftt({},"".concat(i,"-jump-next-custom-icon"),!!H))},Nt):null);var Lt=Math.max(1,Y-Tt),jt=Math.min(Y+Tt,wt);Y-1<=Tt&&(jt=1+2*Tt),wt-Y<=Tt&&(Lt=wt-2*Tt);for(var _t=Lt;_t<=jt;_t+=1)Ot.push(n.default.createElement(Ott,ptt({},St,{key:_t,page:_t,active:Y===_t})));if(Y-1>=2*Tt&&3!==Y&&(Ot[0]=n.default.cloneElement(Ot[0],{className:At()("".concat(i,"-item-after-jump-prev"),Ot[0].props.className)}),Ot.unshift(mt)),wt-Y>=2*Tt&&Y!==wt-2){var It=Ot[Ot.length-1];Ot[Ot.length-1]=n.default.cloneElement(It,{className:At()("".concat(i,"-item-before-jump-next"),It.props.className)}),Ot.push(yt)}1!==Lt&&Ot.unshift(n.default.createElement(Ott,ptt({},St,{key:1,page:1}))),jt!==wt&&Ot.push(n.default.createElement(Ott,ptt({},St,{key:wt,page:wt})))}var zt=function(t){var e=z(t,"prev",it(V,"prev page"));return n.default.isValidElement(e)?n.default.cloneElement(e,{disabled:!lt}):e}(xt);if(zt){var Qt=!lt||!wt;zt=n.default.createElement("li",{title:k?E.prev_page:null,onClick:ht,tabIndex:Qt?null:0,onKeyDown:function(t){pt(t,ht)},className:At()("".concat(i,"-prev"),ftt({},"".concat(i,"-disabled"),Qt)),"aria-disabled":Qt},zt)}var Ht,Vt,Wt=function(t){var e=z(t,"next",it(W,"next page"));return n.default.isValidElement(e)?n.default.cloneElement(e,{disabled:!ct}):e}(kt);Wt&&(R?(Ht=!ct,Vt=lt?0:null):Vt=(Ht=!ct||!wt)?null:0,Wt=n.default.createElement("li",{title:k?E.next_page:null,onClick:ut,tabIndex:Vt,onKeyDown:function(t){pt(t,ut)},className:At()("".concat(i,"-next"),ftt({},"".concat(i,"-disabled"),Ht)),"aria-disabled":Ht},Wt));var Ft=At()(i,s,ftt(ftt(ftt(ftt(ftt({},"".concat(i,"-start"),"start"===b),"".concat(i,"-center"),"center"===b),"".concat(i,"-end"),"end"===b),"".concat(i,"-simple"),R),"".concat(i,"-disabled"),D));return n.default.createElement("ul",ptt({className:Ft,style:P,ref:F},vt),bt,zt,R?Pt:Ot,Wt,n.default.createElement(wtt,{locale:E,rootPrefixCls:i,disabled:D,selectPrefixCls:o,changeSize:function(t){var e=Ctt(t,X,u),n=Y>e&&0!==e?e:Y;K(t),tt(n),null==A||A(Y,t),G(n),null==m||m(n,t)},pageSize:X,pageSizeOptions:_,quickGo:ot?at:null,goButton:Et,showSizeChanger:L,sizeChangerRender:j}))};function Mtt(){return Mtt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mtt.apply(null,arguments)}function Ett(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Ptt(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Ttt(t,e){if(t){if("string"==typeof t)return Ett(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ett(t,e):void 0}}function $tt(t){return function(t){if(Array.isArray(t))return Ett(t)}(t)||Ptt(t)||Ttt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dtt(t){return Dtt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dtt(t)}function Rtt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Dtt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Dtt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dtt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Btt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ntt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Btt(Object(n),!0).forEach((function(e){Rtt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Btt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ltt(t){if(Array.isArray(t))return t}function jtt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _tt(t,e){return Ltt(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw r}}return a}}(t,e)||Ttt(t,e)||jtt()}function Itt(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(-1!==e.indexOf(i))continue;n[i]=t[i]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var ztt=function(t){var e=t.className,i=t.customizeIcon,r=t.customizeIconProps,o=t.children,s=t.onMouseDown,a=t.onClick,l="function"==typeof i?i(r):i;return n.createElement("span",{className:e,onMouseDown:function(t){t.preventDefault(),null==s||s(t)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:a,"aria-hidden":!0},void 0!==l?l:n.createElement("span",{className:At()(e.split(/\s+/).map((function(t){return"".concat(t,"-icon")})))},o))},Qtt=n.createContext(null);function Htt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,e=n.useRef(null),i=n.useRef(null);return n.useEffect((function(){return function(){window.clearTimeout(i.current)}}),[]),[function(){return e.current},function(n){(n||null===e.current)&&(e.current=n),window.clearTimeout(i.current),i.current=window.setTimeout((function(){e.current=null}),t)}]}var Vtt=["prefixCls","id","inputElement","autoFocus","autoComplete","editable","activeDescendantId","value","open","attrs"],Wtt=function(t,e){var i=t.prefixCls,r=t.id,o=t.inputElement,s=t.autoFocus,a=t.autoComplete,l=t.editable,c=t.activeDescendantId,h=t.value,u=t.open,d=t.attrs,f=Itt(t,Vtt),g=o||n.createElement("input",null),m=g,v=m.ref,b=m.props;return(0,p.$e)(!("maxLength"in g.props),"Passing 'maxLength' to input element directly may not work because input in BaseSelect is controlled."),n.cloneElement(g,Ntt(Ntt(Ntt({type:"search"},function(t,e,n){var i=(0,ke.A)((0,ke.A)({},t),n?e:{});return Object.keys(e).forEach((function(n){var r=e[n];"function"==typeof r&&(i[n]=function(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r.apply(void 0,o),null===(e=t[n])||void 0===e?void 0:e.call.apply(e,[t].concat(o))})})),i}(f,b,!0)),{},{id:r,ref:(0,ie.K4)(e,v),autoComplete:a||"off",autoFocus:s,className:At()("".concat(i,"-selection-search-input"),null==b?void 0:b.className),role:"combobox","aria-expanded":u||!1,"aria-haspopup":"listbox","aria-owns":"".concat(r,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(r,"_list"),"aria-activedescendant":u?c:void 0},d),{},{value:l?h:"",readOnly:!l,unselectable:l?null:"on",style:Ntt(Ntt({},b.style),{},{opacity:l?null:0})}))},Ftt=n.forwardRef(Wtt);function qtt(t){return Array.isArray(t)?t:void 0!==t?[t]:[]}var Xtt="undefined"!=typeof window&&window.document&&window.document.documentElement;function Ktt(t){return["string","number"].includes(Dtt(t))}function Ztt(t){var e=void 0;return t&&(Ktt(t.title)?e=t.title.toString():Ktt(t.label)&&(e=t.label.toString())),e}function Ytt(t){var e;return null!==(e=t.key)&&void 0!==e?e:t.value}var Gtt=function(t){t.preventDefault(),t.stopPropagation()},Utt=function(t){var e,i,r=t.id,o=t.prefixCls,s=t.values,a=t.open,l=t.searchValue,c=t.autoClearSearchValue,h=t.inputRef,u=t.placeholder,d=t.disabled,f=t.mode,p=t.showSearch,g=t.autoFocus,m=t.autoComplete,v=t.activeDescendantId,b=t.tabIndex,y=t.removeIcon,w=t.maxTagCount,O=t.maxTagTextLength,S=t.maxTagPlaceholder,x=void 0===S?function(t){return"+ ".concat(t.length," ...")}:S,k=t.tagRender,C=t.onToggleOpen,A=t.onRemove,M=t.onInputChange,E=t.onInputPaste,P=t.onInputKeyDown,T=t.onInputMouseDown,$=t.onInputCompositionStart,D=t.onInputCompositionEnd,R=t.onInputBlur,B=n.useRef(null),N=_tt((0,n.useState)(0),2),L=N[0],j=N[1],_=_tt((0,n.useState)(!1),2),I=_[0],z=_[1],Q="".concat(o,"-selection"),H=a||"multiple"===f&&!1===c||"tags"===f?l:"",V="tags"===f||"multiple"===f&&!1===c||p&&(a||I);e=function(){j(B.current.scrollWidth)},i=[H],Xtt?n.useLayoutEffect(e,i):n.useEffect(e,i);var W=function(t,e,i,r,o){return n.createElement("span",{title:Ztt(t),className:At()("".concat(Q,"-item"),Rtt({},"".concat(Q,"-item-disabled"),i))},n.createElement("span",{className:"".concat(Q,"-item-content")},e),r&&n.createElement(ztt,{className:"".concat(Q,"-item-remove"),onMouseDown:Gtt,onClick:o,customizeIcon:y},"×"))},F=function(t,e,i,r,o,s){return n.createElement("span",{onMouseDown:function(t){Gtt(t),C(!a)}},k({label:e,value:t,disabled:i,closable:r,onClose:o,isMaxTag:!!s}))},q=n.createElement("div",{className:"".concat(Q,"-search"),style:{width:L},onFocus:function(){z(!0)},onBlur:function(){z(!1)}},n.createElement(Ftt,{ref:h,open:a,prefixCls:o,id:r,inputElement:null,disabled:d,autoFocus:g,autoComplete:m,editable:V,activeDescendantId:v,value:H,onKeyDown:P,onMouseDown:T,onChange:M,onPaste:E,onCompositionStart:$,onCompositionEnd:D,onBlur:R,tabIndex:b,attrs:De(t,!0)}),n.createElement("span",{ref:B,className:"".concat(Q,"-search-mirror"),"aria-hidden":!0},H," ")),X=n.createElement(H4,{prefixCls:"".concat(Q,"-overflow"),data:s,renderItem:function(t){var e=t.disabled,n=t.label,i=t.value,r=!d&&!e,o=n;if("number"==typeof O&&("string"==typeof n||"number"==typeof n)){var s=String(o);s.length>O&&(o="".concat(s.slice(0,O),"..."))}var a=function(e){e&&e.stopPropagation(),A(t)};return"function"==typeof k?F(i,o,e,r,a):W(t,o,e,r,a)},renderRest:function(t){if(!s.length)return null;var e="function"==typeof x?x(t):x;return"function"==typeof k?F(void 0,e,!1,!1,void 0,!0):W({title:e},e,!1)},suffix:q,itemKey:Ytt,maxCount:w});return n.createElement("span",{className:"".concat(Q,"-wrap")},X,!s.length&&!H&&n.createElement("span",{className:"".concat(Q,"-placeholder")},u))},Jtt=function(t){var e=t.inputElement,i=t.prefixCls,r=t.id,o=t.inputRef,s=t.disabled,a=t.autoFocus,l=t.autoComplete,c=t.activeDescendantId,h=t.mode,u=t.open,d=t.values,f=t.placeholder,p=t.tabIndex,g=t.showSearch,m=t.searchValue,v=t.activeValue,b=t.maxLength,y=t.onInputKeyDown,w=t.onInputMouseDown,O=t.onInputChange,S=t.onInputPaste,x=t.onInputCompositionStart,k=t.onInputCompositionEnd,C=t.onInputBlur,A=t.title,M=_tt(n.useState(!1),2),E=M[0],P=M[1],T="combobox"===h,$=T||g,D=d[0],R=m||"";T&&v&&!E&&(R=v),n.useEffect((function(){T&&P(!1)}),[T,v]);var B=!("combobox"!==h&&!u&&!g||!R),N=void 0===A?Ztt(D):A,L=n.useMemo((function(){return D?null:n.createElement("span",{className:"".concat(i,"-selection-placeholder"),style:B?{visibility:"hidden"}:void 0},f)}),[D,B,f,i]);return n.createElement("span",{className:"".concat(i,"-selection-wrap")},n.createElement("span",{className:"".concat(i,"-selection-search")},n.createElement(Ftt,{ref:o,prefixCls:i,id:r,open:u,inputElement:e,disabled:s,autoFocus:a,autoComplete:l,editable:$,activeDescendantId:c,value:R,onKeyDown:y,onMouseDown:w,onChange:function(t){P(!0),O(t)},onPaste:S,onCompositionStart:x,onCompositionEnd:k,onBlur:C,tabIndex:p,attrs:De(t,!0),maxLength:T?b:void 0})),!T&&D?n.createElement("span",{className:"".concat(i,"-selection-item"),title:N,style:B?{visibility:"hidden"}:void 0},D.label):null,L)},tet=function(t,e){var i=(0,n.useRef)(null),r=(0,n.useRef)(!1),o=t.prefixCls,s=t.open,a=t.mode,l=t.showSearch,c=t.tokenWithEnter,h=t.disabled,u=t.prefix,d=t.autoClearSearchValue,f=t.onSearch,p=t.onSearchSubmit,g=t.onToggleOpen,m=t.onInputKeyDown,v=t.onInputBlur,b=t.domRef;n.useImperativeHandle(e,(function(){return{focus:function(t){i.current.focus(t)},blur:function(){i.current.blur()}}}));var y=_tt(Htt(0),2),w=y[0],O=y[1],S=(0,n.useRef)(null),x=function(t){!1!==f(t,!0,r.current)&&g(!0)},k={inputRef:i,onInputKeyDown:function(t){var e,n=t.which,o=i.current instanceof HTMLTextAreaElement;o||!s||n!==Pe.UP&&n!==Pe.DOWN||t.preventDefault(),m&&m(t),n!==Pe.ENTER||"tags"!==a||r.current||s||null==p||p(t.target.value),o&&!s&&~[Pe.UP,Pe.DOWN,Pe.LEFT,Pe.RIGHT].indexOf(n)||(e=n)&&![Pe.ESC,Pe.SHIFT,Pe.BACKSPACE,Pe.TAB,Pe.WIN_KEY,Pe.ALT,Pe.META,Pe.WIN_KEY_RIGHT,Pe.CTRL,Pe.SEMICOLON,Pe.EQUALS,Pe.CAPS_LOCK,Pe.CONTEXT_MENU,Pe.F1,Pe.F2,Pe.F3,Pe.F4,Pe.F5,Pe.F6,Pe.F7,Pe.F8,Pe.F9,Pe.F10,Pe.F11,Pe.F12].includes(e)&&g(!0)},onInputMouseDown:function(){O(!0)},onInputChange:function(t){var e=t.target.value;if(c&&S.current&&/[\r\n]/.test(S.current)){var n=S.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");e=e.replace(n,S.current)}S.current=null,x(e)},onInputPaste:function(t){var e=t.clipboardData,n=null==e?void 0:e.getData("text");S.current=n||""},onInputCompositionStart:function(){r.current=!0},onInputCompositionEnd:function(t){r.current=!1,"combobox"!==a&&x(t.target.value)},onInputBlur:v},C="multiple"===a||"tags"===a?n.createElement(Utt,Mtt({},t,k)):n.createElement(Jtt,Mtt({},t,k));return n.createElement("div",{ref:b,className:"".concat(o,"-selector"),onClick:function(t){t.target!==i.current&&(void 0!==document.body.style.msTouchAction?setTimeout((function(){i.current.focus()})):i.current.focus())},onMouseDown:function(t){var e=w();t.target===i.current||e||"combobox"===a&&h||t.preventDefault(),("combobox"===a||l&&e)&&s||(s&&!1!==d&&f("",!0,!1),g())}},u&&n.createElement("div",{className:"".concat(o,"-prefix")},u),C)},eet=n.forwardRef(tet),net=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],iet=function(t,e){var i=t.prefixCls,r=(t.disabled,t.visible),o=t.children,s=t.popupElement,a=t.animation,l=t.transitionName,c=t.dropdownStyle,h=t.dropdownClassName,u=t.direction,d=void 0===u?"ltr":u,f=t.placement,p=t.builtinPlacements,g=t.dropdownMatchSelectWidth,m=t.dropdownRender,v=t.dropdownAlign,b=t.getPopupContainer,y=t.empty,w=t.getTriggerDOMNode,O=t.onPopupVisibleChange,S=t.onPopupMouseEnter,x=Itt(t,net),k="".concat(i,"-dropdown"),C=s;m&&(C=m(s));var A=n.useMemo((function(){return p||function(t){var e=!0===t?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:e,adjustY:1},htmlRegion:"scroll"}}}(g)}),[p,g]),M=a?"".concat(k,"-").concat(a):l,E="number"==typeof g,P=n.useMemo((function(){return E?null:!1===g?"minWidth":"width"}),[g,E]),T=c;E&&(T=Ntt(Ntt({},T),{},{width:g}));var $=n.useRef(null);return n.useImperativeHandle(e,(function(){return{getPopupElement:function(){var t;return null===(t=$.current)||void 0===t?void 0:t.popupElement}}})),n.createElement(ra,Mtt({},x,{showAction:O?["click"]:[],hideAction:O?["click"]:[],popupPlacement:f||("rtl"===d?"bottomRight":"bottomLeft"),builtinPlacements:A,prefixCls:k,popupTransitionName:M,popup:n.createElement("div",{onMouseEnter:S},C),ref:$,stretch:P,popupAlign:v,popupVisible:r,getPopupContainer:b,popupClassName:At()(h,Rtt({},"".concat(k,"-empty"),y)),popupStyle:T,getTriggerDOMNode:w,onPopupVisibleChange:O}),o)},ret=n.forwardRef(iet);function oet(t,e){var n,i=t.key;return"value"in t&&(n=t.value),null!=i?i:void 0!==n?n:"rc-index-key-".concat(e)}function set(t){return void 0!==t&&!Number.isNaN(t)}function aet(t,e){var n=t||{},i=n.label||(e?"children":"label");return{label:i,value:n.value||"value",options:n.options||"options",groupLabel:n.groupLabel||i}}function cet(t){var e=Ntt({},t);return"props"in e||Object.defineProperty(e,"props",{get:function(){return(0,p.Ay)(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var het=n.createContext(null);function uet(t){var e=t.visible,i=t.values;return e?n.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(i.slice(0,50).map((function(t){var e=t.label,n=t.value;return["number","string"].includes(Dtt(e))?e:n})).join(", ")),i.length>50?", ...":null):null}var det=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],fet=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],pet=function(t){return"tags"===t||"multiple"===t},get=n.forwardRef((function(t,e){var i,r=t.id,o=t.prefixCls,s=t.className,a=t.showSearch,l=t.tagRender,c=t.direction,h=t.omitDomProps,u=t.displayValues,d=t.onDisplayValuesChange,f=t.emptyOptions,p=t.notFoundContent,g=void 0===p?"Not Found":p,m=t.onClear,v=t.mode,b=t.disabled,y=t.loading,w=t.getInputElement,O=t.getRawInputElement,S=t.open,x=t.defaultOpen,k=t.onDropdownVisibleChange,C=t.activeValue,A=t.onActiveValueChange,M=t.activeDescendantId,E=t.searchValue,P=t.autoClearSearchValue,T=t.onSearch,$=t.onSearchSplit,D=t.tokenSeparators,R=t.allowClear,B=t.prefix,N=t.suffixIcon,L=t.clearIcon,j=t.OptionList,_=t.animation,I=t.transitionName,z=t.dropdownStyle,Q=t.dropdownClassName,H=t.dropdownMatchSelectWidth,V=t.dropdownRender,W=t.dropdownAlign,F=t.placement,q=t.builtinPlacements,X=t.getPopupContainer,K=t.showAction,Z=void 0===K?[]:K,Y=t.onFocus,G=t.onBlur,U=t.onKeyUp,J=t.onKeyDown,tt=t.onMouseDown,et=Itt(t,det),nt=pet(v),it=(void 0!==a?a:nt)||"combobox"===v,rt=Ntt({},et);fet.forEach((function(t){delete rt[t]})),null==h||h.forEach((function(t){delete rt[t]}));var ot=_tt(n.useState(!1),2),st=ot[0],at=ot[1];n.useEffect((function(){at(Rs())}),[]);var lt=n.useRef(null),ct=n.useRef(null),ht=n.useRef(null),ut=n.useRef(null),dt=n.useRef(null),ft=n.useRef(!1),pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=_tt(n.useState(!1),2),i=e[0],r=e[1],o=n.useRef(null),s=function(){window.clearTimeout(o.current)};return n.useEffect((function(){return s}),[]),[i,function(e,n){s(),o.current=window.setTimeout((function(){r(e),n&&n()}),t)},s]}(),gt=_tt(pt,3),mt=gt[0],vt=gt[1],bt=gt[2];n.useImperativeHandle(e,(function(){var t,e;return{focus:null===(t=ut.current)||void 0===t?void 0:t.focus,blur:null===(e=ut.current)||void 0===e?void 0:e.blur,scrollTo:function(t){var e;return null===(e=dt.current)||void 0===e?void 0:e.scrollTo(t)},nativeElement:lt.current||ct.current}}));var yt=n.useMemo((function(){var t;if("combobox"!==v)return E;var e=null===(t=u[0])||void 0===t?void 0:t.value;return"string"==typeof e||"number"==typeof e?String(e):""}),[E,v,u]),wt="combobox"===v&&"function"==typeof w&&w()||null,Ot="function"==typeof O&&O(),St=(0,ie.xK)(ct,null==Ot||null===(i=Ot.props)||void 0===i?void 0:i.ref),xt=_tt(n.useState(!1),2),kt=xt[0],Ct=xt[1];(0,se.A)((function(){Ct(!0)}),[]);var Mt=_tt((0,mo.A)(!1,{defaultValue:x,value:S}),2),Et=Mt[0],Pt=Mt[1],Tt=!!kt&&Et,$t=!g&&f;(b||$t&&Tt&&"combobox"===v)&&(Tt=!1);var Dt=!$t&&Tt,Rt=n.useCallback((function(t){var e=void 0!==t?t:!Tt;b||(Pt(e),Tt!==e&&(null==k||k(e)))}),[b,Tt,Pt,k]),Bt=n.useMemo((function(){return(D||[]).some((function(t){return["\n","\r\n"].includes(t)}))}),[D]),Nt=n.useContext(het)||{},Lt=Nt.maxCount,jt=Nt.rawValues,_t=function(t,e,n){if(!(nt&&set(Lt)&&(null==jt?void 0:jt.size)>=Lt)){var i=!0,r=t;null==A||A(null);var o=function(t,e,n){if(!e||!e.length)return null;var i=!1,r=function t(e,n){var r,o=Ltt(r=n)||Ptt(r)||Ttt(r)||jtt(),s=o[0],a=o.slice(1);if(!s)return[e];var l=e.split(s);return i=i||l.length>1,l.reduce((function(e,n){return[].concat($tt(e),$tt(t(n,a)))}),[]).filter(Boolean)}(t,e);return i?void 0!==n?r.slice(0,n):r:null}(t,D,set(Lt)?Lt-jt.size:void 0),s=n?null:o;return"combobox"!==v&&s&&(r="",null==$||$(s),Rt(!1),i=!1),T&&yt!==r&&T(r,{source:e?"typing":"effect"}),i}};n.useEffect((function(){Tt||nt||"combobox"===v||_t("",!1,!1)}),[Tt]),n.useEffect((function(){Et&&b&&Pt(!1),b&&!ft.current&&vt(!1)}),[b]);var It=_tt(Htt(),2),zt=It[0],Qt=It[1],Ht=n.useRef(!1),Vt=n.useRef(!1),Wt=[];n.useEffect((function(){return function(){Wt.forEach((function(t){return clearTimeout(t)})),Wt.splice(0,Wt.length)}}),[]);var Ft,qt=_tt(n.useState({}),2)[1];Ot&&(Ft=function(t){Rt(t)}),function(t,e,i,r){var o=n.useRef(null);o.current={open:e,triggerOpen:i,customizedTrigger:r},n.useEffect((function(){function t(t){var e,n;if(null===(e=o.current)||void 0===e||!e.customizedTrigger){var i=t.target;i.shadowRoot&&t.composed&&(i=t.composedPath()[0]||i),o.current.open&&[lt.current,null===(n=ht.current)||void 0===n?void 0:n.getPopupElement()].filter((function(t){return t})).every((function(t){return!t.contains(i)&&t!==i}))&&o.current.triggerOpen(!1)}}return window.addEventListener("mousedown",t),function(){return window.removeEventListener("mousedown",t)}}),[])}(0,Dt,Rt,!!Ot);var Xt,Kt=n.useMemo((function(){return Ntt(Ntt({},t),{},{notFoundContent:g,open:Tt,triggerOpen:Dt,id:r,showSearch:it,multiple:nt,toggleOpen:Rt})}),[t,g,Dt,Tt,r,it,nt,Rt]),Zt=!!N||y;Zt&&(Xt=n.createElement(ztt,{className:At()("".concat(o,"-arrow"),Rtt({},"".concat(o,"-arrow-loading"),y)),customizeIcon:N,customizeIconProps:{loading:y,searchValue:yt,open:Tt,focused:mt,showSearch:it}}));var Yt,Gt=function(t,e,i,r,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c=n.default.useMemo((function(){return"object"===Dtt(r)?r.clearIcon:o||void 0}),[r,o]);return{allowClear:n.default.useMemo((function(){return!(s||!r||!i.length&&!a||"combobox"===l&&""===a)}),[r,s,i.length,a,l]),clearIcon:n.default.createElement(ztt,{className:"".concat(t,"-clear"),onMouseDown:e,customizeIcon:c},"×")}}(o,(function(){var t;null==m||m(),null===(t=ut.current)||void 0===t||t.focus(),d([],{type:"clear",values:u}),_t("",!1,!1)}),u,R,L,b,yt,v),Ut=Gt.allowClear,Jt=Gt.clearIcon,te=n.createElement(j,{ref:dt}),ee=At()(o,s,Rtt(Rtt(Rtt(Rtt(Rtt(Rtt(Rtt(Rtt(Rtt(Rtt({},"".concat(o,"-focused"),mt),"".concat(o,"-multiple"),nt),"".concat(o,"-single"),!nt),"".concat(o,"-allow-clear"),R),"".concat(o,"-show-arrow"),Zt),"".concat(o,"-disabled"),b),"".concat(o,"-loading"),y),"".concat(o,"-open"),Tt),"".concat(o,"-customize-input"),wt),"".concat(o,"-show-search"),it)),ne=n.createElement(ret,{ref:ht,disabled:b,prefixCls:o,visible:Dt,popupElement:te,animation:_,transitionName:I,dropdownStyle:z,dropdownClassName:Q,direction:c,dropdownMatchSelectWidth:H,dropdownRender:V,dropdownAlign:W,placement:F,builtinPlacements:q,getPopupContainer:X,empty:f,getTriggerDOMNode:function(t){return ct.current||t},onPopupVisibleChange:Ft,onPopupMouseEnter:function(){qt({})}},Ot?n.cloneElement(Ot,{ref:St}):n.createElement(eet,Mtt({},t,{domRef:ct,prefixCls:o,inputElement:wt,ref:ut,id:r,prefix:B,showSearch:it,autoClearSearchValue:P,mode:v,activeDescendantId:M,tagRender:l,values:u,open:Tt,onToggleOpen:Rt,activeValue:C,searchValue:yt,onSearch:_t,onSearchSubmit:function(t){t&&t.trim()&&T(t,{source:"submit"})},onRemove:function(t){var e=u.filter((function(e){return e!==t}));d(e,{type:"remove",values:[t]})},tokenWithEnter:Bt,onInputBlur:function(){Ht.current=!1}})));return Yt=Ot?ne:n.createElement("div",Mtt({className:ee},rt,{ref:lt,onMouseDown:function(t){var e,n=t.target,i=null===(e=ht.current)||void 0===e?void 0:e.getPopupElement();if(i&&i.contains(n)){var r=setTimeout((function(){var t,e=Wt.indexOf(r);-1!==e&&Wt.splice(e,1),bt(),st||i.contains(document.activeElement)||null===(t=ut.current)||void 0===t||t.focus()}));Wt.push(r)}for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];null==tt||tt.apply(void 0,[t].concat(s))},onKeyDown:function(t){var e,n=zt(),i=t.key,r="Enter"===i;if(r&&("combobox"!==v&&t.preventDefault(),Tt||Rt(!0)),Qt(!!yt),"Backspace"===i&&!n&&nt&&!yt&&u.length){for(var o=$tt(u),s=null,a=o.length-1;a>=0;a-=1){var l=o[a];if(!l.disabled){o.splice(a,1),s=l;break}}s&&d(o,{type:"remove",values:[s]})}for(var c=arguments.length,h=new Array(c>1?c-1:0),f=1;f<c;f++)h[f-1]=arguments[f];!Tt||r&&Ht.current||(r&&(Ht.current=!0),null===(e=dt.current)||void 0===e||e.onKeyDown.apply(e,[t].concat(h))),null==J||J.apply(void 0,[t].concat(h))},onKeyUp:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r;Tt&&(null===(r=dt.current)||void 0===r||r.onKeyUp.apply(r,[t].concat(n))),"Enter"===t.key&&(Ht.current=!1),null==U||U.apply(void 0,[t].concat(n))},onFocus:function(){vt(!0),b||(Y&&!Vt.current&&Y.apply(void 0,arguments),Z.includes("focus")&&Rt(!0)),Vt.current=!0},onBlur:function(){ft.current=!0,vt(!1,(function(){Vt.current=!1,ft.current=!1,Rt(!1)})),b||(yt&&("tags"===v?T(yt,{source:"submit"}):"multiple"===v&&T("",{source:"blur"})),G&&G.apply(void 0,arguments))}}),n.createElement(uet,{visible:mt&&!Tt,values:u}),ne,Xt,Ut&&Jt),n.createElement(Qtt.Provider,{value:Kt},Yt)})),met=get,vet=function(){return null};vet.isSelectOptGroup=!0;var bet=vet,yet=function(){return null};yet.isSelectOption=!0;var wet=yet,Oet=["disabled","title","children","style","className"];function xet(t){return"string"==typeof t||"number"==typeof t}var ket=function(t,e){var i=n.useContext(Qtt),r=i.prefixCls,o=i.id,s=i.open,a=i.multiple,l=i.mode,c=i.searchValue,h=i.toggleOpen,u=i.notFoundContent,f=i.onPopupScroll,p=n.useContext(het),g=p.maxCount,m=p.flattenOptions,v=p.onActiveValue,b=p.defaultActiveFirstOption,y=p.onSelect,w=p.menuItemSelectedIcon,O=p.rawValues,S=p.fieldNames,x=p.virtual,k=p.direction,C=p.listHeight,A=p.listItemHeight,M=p.optionRender,E="".concat(r,"-item"),P=(0,d.A)((function(){return m}),[s,m],(function(t,e){return e[0]&&t[1]!==e[1]})),T=n.useRef(null),$=n.useMemo((function(){return a&&set(g)&&(null==O?void 0:O.size)>=g}),[a,g,null==O?void 0:O.size]),D=function(t){t.preventDefault()},R=function(t){var e;null===(e=T.current)||void 0===e||e.scrollTo("number"==typeof t?{index:t}:t)},B=n.useCallback((function(t){return"combobox"!==l&&O.has(t)}),[l,$tt(O).toString(),O.size]),N=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=P.length,i=0;i<n;i+=1){var r=(t+i*e+n)%n,o=P[r]||{},s=o.group,a=o.data;if(!s&&(null==a||!a.disabled)&&(B(a.value)||!$))return r}return-1},L=_tt(n.useState((function(){return N(0)})),2),j=L[0],_=L[1],I=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_(t);var n={source:e?"keyboard":"mouse"},i=P[t];i?v(i.value,t,n):v(null,-1,n)};(0,n.useEffect)((function(){I(!1!==b?N(0):-1)}),[P.length,c]);var z=n.useCallback((function(t){return"combobox"===l?String(t).toLowerCase()===c.toLowerCase():O.has(t)}),[l,c,$tt(O).toString(),O.size]);(0,n.useEffect)((function(){var t,e=setTimeout((function(){if(!a&&s&&1===O.size){var t=Array.from(O)[0],e=P.findIndex((function(e){var n=e.data;return c?String(n.value).startsWith(c):n.value===t}));-1!==e&&(I(e),R(e))}}));return s&&(null===(t=T.current)||void 0===t||t.scrollTo(void 0)),function(){return clearTimeout(e)}}),[s,c]);var Q=function(t){void 0!==t&&y(t,{selected:!O.has(t)}),a||h(!1)};if(n.useImperativeHandle(e,(function(){return{onKeyDown:function(t){var e=t.which,n=t.ctrlKey;switch(e){case Pe.N:case Pe.P:case Pe.UP:case Pe.DOWN:var i=0;if(e===Pe.UP?i=-1:e===Pe.DOWN?i=1:/(mac\sos|macintosh)/i.test(navigator.appVersion)&&n&&(e===Pe.N?i=1:e===Pe.P&&(i=-1)),0!==i){var r=N(j+i,i);R(r),I(r,!0)}break;case Pe.TAB:case Pe.ENTER:var o,a=P[j];!a||null!=a&&null!==(o=a.data)&&void 0!==o&&o.disabled||$?Q(void 0):Q(a.value),s&&t.preventDefault();break;case Pe.ESC:h(!1),s&&t.stopPropagation()}},onKeyUp:function(){},scrollTo:function(t){R(t)}}})),0===P.length)return n.createElement("div",{role:"listbox",id:"".concat(o,"_list"),className:"".concat(E,"-empty"),onMouseDown:D},u);var H=Object.keys(S).map((function(t){return S[t]})),V=function(t){return t.label};function W(t,e){return{role:t.group?"presentation":"option",id:"".concat(o,"_list_").concat(e)}}var F=function(t){var e=P[t];if(!e)return null;var i=e.data||{},r=i.value,o=e.group,s=De(i,!0),a=V(e);return e?n.createElement("div",Mtt({"aria-label":"string"!=typeof a||o?null:a},s,{key:t},W(e,t),{"aria-selected":z(r)}),r):null},q={role:"listbox",id:"".concat(o,"_list")};return n.createElement(n.Fragment,null,x&&n.createElement("div",Mtt({},q,{style:{height:0,width:0,overflow:"hidden"}}),F(j-1),F(j),F(j+1)),n.createElement(f8,{itemKey:"key",ref:T,data:P,height:C,itemHeight:A,fullHeight:!1,onMouseDown:D,onScroll:f,virtual:x,direction:k,innerProps:x?null:q},(function(t,e){var i=t.group,r=t.groupOption,o=t.data,s=t.label,a=t.value,l=o.key;if(i){var c,h=null!==(c=o.title)&&void 0!==c?c:xet(s)?s.toString():void 0;return n.createElement("div",{className:At()(E,"".concat(E,"-group"),o.className),title:h},void 0!==s?s:l)}var u=o.disabled,d=o.title,f=(o.children,o.style),p=o.className,g=Itt(o,Oet),m=(0,Yi.A)(g,H),v=B(a),b=u||!v&&$,y="".concat(E,"-option"),O=At()(E,y,p,Rtt(Rtt(Rtt(Rtt({},"".concat(y,"-grouped"),r),"".concat(y,"-active"),j===e&&!b),"".concat(y,"-disabled"),b),"".concat(y,"-selected"),v)),S=V(t),k=!w||"function"==typeof w||v,C="number"==typeof S?S:S||a,A=xet(C)?C.toString():void 0;return void 0!==d&&(A=d),n.createElement("div",Mtt({},De(m),x?{}:W(t,e),{"aria-selected":z(a),className:O,title:A,onMouseMove:function(){j===e||b||I(e)},onClick:function(){b||Q(a)},style:f}),n.createElement("div",{className:"".concat(y,"-content")},"function"==typeof M?M(t,{index:e}):C),n.isValidElement(w)||v,k&&n.createElement(ztt,{className:"".concat(E,"-option-state"),customizeIcon:w,customizeIconProps:{value:a,disabled:b,isSelected:v}},v?"✓":null))})))},Cet=n.forwardRef(ket);function Aet(t,e){return qtt(t).join("").toUpperCase().includes(e)}var Met=0,Eet=(0,z.A)();var Pet=["children","value"],Tet=["children"];function $et(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,fn.A)(t).map((function(t,i){if(!n.isValidElement(t)||!t.type)return null;var r=t,o=r.type.isSelectOptGroup,s=r.key,a=r.props,l=a.children,c=Itt(a,Tet);return e||!o?function(t){var e=t,n=e.key,i=e.props,r=i.children,o=i.value;return Ntt({key:n,value:void 0!==o?o:n,children:r},Itt(i,Pet))}(t):Ntt(Ntt({key:"__RC_SELECT_GRP__".concat(null===s?i:s,"__"),label:s},c),{},{options:$et(l)})})).filter((function(t){return t}))}var Det=function(t,e,i,r,o){return n.useMemo((function(){var n=t;!t&&(n=$et(e));var s=new Map,a=new Map,l=function(t,e,n){n&&"string"==typeof n&&t.set(e[n],e)};return function t(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=0;c<e.length;c+=1){var h=e[c];!h[i.options]||n?(s.set(h[i.value],h),l(a,h,i.label),l(a,h,r),l(a,h,o)):t(h[i.options],!0)}}(n),{options:n,valueOptions:s,labelOptions:a}}),[t,e,i,r,o])};function Ret(t){var e=n.useRef();e.current=t;var i=n.useCallback((function(){return e.current.apply(e,arguments)}),[]);return i}var Bet=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],Net=["inputValue"],Let=n.forwardRef((function(t,e){var i=t.id,r=t.mode,o=t.prefixCls,s=void 0===o?"rc-select":o,a=t.backfill,l=t.fieldNames,c=t.inputValue,h=t.searchValue,u=t.onSearch,d=t.autoClearSearchValue,f=void 0===d||d,p=t.onSelect,g=t.onDeselect,m=t.dropdownMatchSelectWidth,v=void 0===m||m,b=t.filterOption,y=t.filterSort,w=t.optionFilterProp,O=t.optionLabelProp,S=t.options,x=t.optionRender,k=t.children,C=t.defaultActiveFirstOption,A=t.menuItemSelectedIcon,M=t.virtual,E=t.direction,P=t.listHeight,T=void 0===P?200:P,$=t.listItemHeight,D=void 0===$?20:$,R=t.labelRender,B=t.value,N=t.defaultValue,L=t.labelInValue,j=t.onChange,_=t.maxCount,I=Itt(t,Bet),z=function(t){var e=_tt(n.useState(),2),i=e[0],r=e[1];return n.useEffect((function(){var t;r("rc_select_".concat((Eet?(t=Met,Met+=1):t="TEST_OR_SSR",t)))}),[]),t||i}(i),Q=pet(r),H=!(S||!k),V=n.useMemo((function(){return(void 0!==b||"combobox"!==r)&&b}),[b,r]),W=n.useMemo((function(){return aet(l,H)}),[JSON.stringify(l),H]),F=_tt((0,mo.A)("",{value:void 0!==h?h:c,postState:function(t){return t||""}}),2),q=F[0],X=F[1],K=Det(S,k,W,w,O),Z=K.valueOptions,Y=K.labelOptions,G=K.options,U=n.useCallback((function(t){return qtt(t).map((function(t){var e,n,i,r,o,s;!function(t){return!t||"object"!==Dtt(t)}(t)?(i=t.key,n=t.label,e=null!==(s=t.value)&&void 0!==s?s:i):e=t;var a,l=Z.get(e);return l&&(void 0===n&&(n=null==l?void 0:l[O||W.label]),void 0===i&&(i=null!==(a=null==l?void 0:l.key)&&void 0!==a?a:e),r=null==l?void 0:l.disabled,o=null==l?void 0:l.title),{label:n,value:e,key:i,disabled:r,title:o}}))}),[W,O,Z]),J=_tt((0,mo.A)(N,{value:B}),2),tt=J[0],et=J[1],nt=n.useMemo((function(){var t,e=U(Q&&null===tt?[]:tt);return"combobox"===r&&function(t){return!t&&0!==t}(null===(t=e[0])||void 0===t?void 0:t.value)?[]:e}),[tt,U,r,Q]),it=function(t,e){var i=n.useRef({values:new Map,options:new Map});return[n.useMemo((function(){var n=i.current,r=n.values,o=n.options,s=t.map((function(t){var e;return void 0===t.label?Ntt(Ntt({},t),{},{label:null===(e=r.get(t.value))||void 0===e?void 0:e.label}):t})),a=new Map,l=new Map;return s.forEach((function(t){a.set(t.value,t),l.set(t.value,e.get(t.value)||o.get(t.value))})),i.current.values=a,i.current.options=l,s}),[t,e]),n.useCallback((function(t){return e.get(t)||i.current.options.get(t)}),[e])]}(nt,Z),rt=_tt(it,2),ot=rt[0],st=rt[1],at=n.useMemo((function(){if(!r&&1===ot.length){var t=ot[0];if(null===t.value&&(null===t.label||void 0===t.label))return[]}return ot.map((function(t){var e;return Ntt(Ntt({},t),{},{label:null!==(e="function"==typeof R?R(t):t.label)&&void 0!==e?e:t.value})}))}),[r,ot,R]),lt=n.useMemo((function(){return new Set(ot.map((function(t){return t.value})))}),[ot]);n.useEffect((function(){if("combobox"===r){var t,e=null===(t=ot[0])||void 0===t?void 0:t.value;X(function(t){return null!=t}(e)?String(e):"")}}),[ot]);var ct=Ret((function(t,e){var n=null!=e?e:t;return Rtt(Rtt({},W.value,t),W.label,n)})),ht=function(t,e,i,r,o){return n.useMemo((function(){if(!i||!1===r)return t;var n=e.options,s=e.label,a=e.value,l=[],c="function"==typeof r,h=i.toUpperCase(),u=c?r:function(t,e){return o?Aet(e[o],h):e[n]?Aet(e["children"!==s?s:"label"],h):Aet(e[a],h)},d=c?function(t){return cet(t)}:function(t){return t};return t.forEach((function(t){if(t[n])if(u(i,d(t)))l.push(t);else{var e=t[n].filter((function(t){return u(i,d(t))}));e.length&&l.push(Ntt(Ntt({},t),{},Rtt({},n,e)))}else u(i,d(t))&&l.push(t)})),l}),[t,r,o,i,e])}(n.useMemo((function(){if("tags"!==r)return G;var t=$tt(G);return $tt(ot).sort((function(t,e){return t.value<e.value?-1:1})).forEach((function(e){var n=e.value;(function(t){return Z.has(t)})(n)||t.push(ct(n,e.label))})),t}),[ct,G,Z,ot,r]),W,q,V,w),ut=n.useMemo((function(){return"tags"!==r||!q||ht.some((function(t){return t[w||"value"]===q}))||ht.some((function(t){return t[W.value]===q}))?ht:[ct(q)].concat($tt(ht))}),[ct,w,r,ht,q,W]),dt=function t(e){return $tt(e).sort((function(t,e){return y(t,e,{searchValue:q})})).map((function(e){return Array.isArray(e.options)?Ntt(Ntt({},e),{},{options:e.options.length>0?t(e.options):e.options}):e}))},ft=n.useMemo((function(){return y?dt(ut):ut}),[ut,y,q]),pt=n.useMemo((function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.fieldNames,i=e.childrenAsData,r=[],o=aet(n,!1),s=o.label,a=o.value,l=o.options,c=o.groupLabel;return function t(e,n){Array.isArray(e)&&e.forEach((function(e){if(n||!(l in e)){var o=e[a];r.push({key:oet(e,r.length),groupOption:n,data:e,label:e[s],value:o})}else{var h=e[c];void 0===h&&i&&(h=e.label),r.push({key:oet(e,r.length),group:!0,data:e,label:h}),t(e[l],!0)}}))}(t,!1),r}(ft,{fieldNames:W,childrenAsData:H})}),[ft,W,H]),gt=function(t){var e=U(t);if(et(e),j&&(e.length!==ot.length||e.some((function(t,e){var n;return(null===(n=ot[e])||void 0===n?void 0:n.value)!==(null==t?void 0:t.value)})))){var n=L?e:e.map((function(t){return t.value})),i=e.map((function(t){return cet(st(t.value))}));j(Q?n:n[0],Q?i:i[0])}},mt=_tt(n.useState(null),2),vt=mt[0],bt=mt[1],yt=_tt(n.useState(0),2),wt=yt[0],Ot=yt[1],St=void 0!==C?C:"combobox"!==r,xt=n.useCallback((function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).source,i=void 0===n?"keyboard":n;Ot(e),a&&"combobox"===r&&null!==t&&"keyboard"===i&&bt(String(t))}),[a,r]),kt=function(t,e,n){var i=function(){var e,n=st(t);return[L?{label:null==n?void 0:n[W.label],value:t,key:null!==(e=null==n?void 0:n.key)&&void 0!==e?e:t}:t,cet(n)]};if(e&&p){var r=_tt(i(),2),o=r[0],s=r[1];p(o,s)}else if(!e&&g&&"clear"!==n){var a=_tt(i(),2),l=a[0],c=a[1];g(l,c)}},Ct=Ret((function(t,e){var n,i=!Q||e.selected;n=i?Q?[].concat($tt(ot),[t]):[t]:ot.filter((function(e){return e.value!==t})),gt(n),kt(t,i),"combobox"===r?bt(""):pet&&!f||(X(""),bt(""))})),At=n.useMemo((function(){var t=!1!==M&&!1!==v;return Ntt(Ntt({},K),{},{flattenOptions:pt,onActiveValue:xt,defaultActiveFirstOption:St,onSelect:Ct,menuItemSelectedIcon:A,rawValues:lt,fieldNames:W,virtual:t,direction:E,listHeight:T,listItemHeight:D,childrenAsData:H,maxCount:_,optionRender:x})}),[_,K,pt,xt,St,Ct,A,lt,W,M,v,E,T,D,H,x]);return n.createElement(het.Provider,{value:At},n.createElement(met,Mtt({},I,{id:z,prefixCls:s,ref:e,omitDomProps:Net,mode:r,displayValues:at,onDisplayValuesChange:function(t,e){gt(t);var n=e.type,i=e.values;"remove"!==n&&"clear"!==n||i.forEach((function(t){kt(t.value,!1,n)}))},direction:E,searchValue:q,onSearch:function(t,e){if(X(t),bt(null),"submit"!==e.source)"blur"!==e.source&&("combobox"===r&&gt(t),null==u||u(t));else{var n=(t||"").trim();if(n){var i=Array.from(new Set([].concat($tt(lt),[n])));gt(i),kt(n,!0),X("")}}},autoClearSearchValue:f,onSearchSplit:function(t){var e=t;"tags"!==r&&(e=t.map((function(t){var e=Y.get(t);return null==e?void 0:e.value})).filter((function(t){return void 0!==t})));var n=Array.from(new Set([].concat($tt(lt),$tt(e))));gt(n),n.forEach((function(t){kt(t,!0)}))},dropdownMatchSelectWidth:v,OptionList:Cet,emptyOptions:!pt.length,activeValue:vt,activeDescendantId:"".concat(z,"_list_").concat(wt)})))})),jet=Let;jet.Option=wet,jet.OptGroup=bet;var _et=jet,Iet=function(t,e){return t||(t=>{const e={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:"scroll"===t?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},e),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},e),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},e),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},e),{points:["br","tr"],offset:[0,-4]})}})(e)};const zet=t=>{const{optionHeight:e,optionFontSize:n,optionLineHeight:i,optionPadding:r}=t;return{position:"relative",display:"block",minHeight:e,padding:r,color:t.colorText,fontWeight:"normal",fontSize:n,lineHeight:i,boxSizing:"border-box"}};var Qet=t=>{const{antCls:e,componentCls:n}=t,i=`${n}-item`,r=`&${e}-slide-up-enter${e}-slide-up-enter-active`,o=`&${e}-slide-up-appear${e}-slide-up-appear-active`,s=`&${e}-slide-up-leave${e}-slide-up-leave-active`,a=`${n}-dropdown-placement-`,l=`${i}-option-selected`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},(0,J.dF)(t)),{position:"absolute",top:-9999,zIndex:t.zIndexPopup,boxSizing:"border-box",padding:t.paddingXXS,overflow:"hidden",fontSize:t.fontSize,fontVariant:"initial",backgroundColor:t.colorBgElevated,borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,[`\n          ${r}${a}bottomLeft,\n          ${o}${a}bottomLeft\n        `]:{animationName:x9},[`\n          ${r}${a}topLeft,\n          ${o}${a}topLeft,\n          ${r}${a}topRight,\n          ${o}${a}topRight\n        `]:{animationName:C9},[`${s}${a}bottomLeft`]:{animationName:k9},[`\n          ${s}${a}topLeft,\n          ${s}${a}topRight\n        `]:{animationName:A9},"&-hidden":{display:"none"},[i]:Object.assign(Object.assign({},zet(t)),{cursor:"pointer",transition:`background ${t.motionDurationSlow} ease`,borderRadius:t.borderRadiusSM,"&-group":{color:t.colorTextDescription,fontSize:t.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},J.L9),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${i}-option-disabled)`]:{backgroundColor:t.optionActiveBg},[`&-selected:not(${i}-option-disabled)`]:{color:t.optionSelectedColor,fontWeight:t.optionSelectedFontWeight,backgroundColor:t.optionSelectedBg,[`${i}-option-state`]:{color:t.colorPrimary}},"&-disabled":{[`&${i}-option-selected`]:{backgroundColor:t.colorBgContainerDisabled},color:t.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:t.calc(t.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},zet(t)),{color:t.colorTextDisabled})}),[`${l}:has(+ ${l})`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${l}`]:{borderStartStartRadius:0,borderStartEndRadius:0}},"&-rtl":{direction:"rtl"}})},D9(t,"slide-up"),D9(t,"slide-down"),i7(t,"move-up"),i7(t,"move-down")]};const Het=t=>{const{componentCls:e,iconCls:n,borderRadiusSM:i,motionDurationSlow:r,paddingXS:o,multipleItemColorDisabled:s,multipleItemBorderColorDisabled:a,colorIcon:l,colorIconHover:c,INTERNAL_FIXED_ITEM_MARGIN:h}=t,u=`${e}-selection-overflow`;return{[u]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${e}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:h,borderRadius:i,cursor:"default",transition:`font-size ${r}, line-height ${r}, height ${r}`,marginInlineEnd:t.calc(h).mul(2).equal(),paddingInlineStart:o,paddingInlineEnd:t.calc(o).div(2).equal(),[`${e}-disabled&`]:{color:s,borderColor:a,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:t.calc(o).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},(0,J.Nk)()),{display:"inline-flex",alignItems:"center",color:l,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${n}`]:{verticalAlign:"-0.2em"},"&:hover":{color:c}})}}}},Vet=(t,e)=>{const{componentCls:n,INTERNAL_FIXED_ITEM_MARGIN:i}=t,r=`${n}-selection-overflow`,o=t.multipleSelectItemHeight,s=(t=>{const{multipleSelectItemHeight:e,selectHeight:n,lineWidth:i}=t;return t.calc(n).sub(e).div(2).sub(i).equal()})(t),a=e?`${n}-${e}`:"",l=(t=>{const{multipleSelectItemHeight:e,paddingXXS:n,lineWidth:i,INTERNAL_FIXED_ITEM_MARGIN:r}=t,o=t.max(t.calc(n).sub(i).equal(),0);return{basePadding:o,containerPadding:t.max(t.calc(o).sub(r).equal(),0),itemHeight:(0,h.zA)(e),itemLineHeight:(0,h.zA)(t.calc(e).sub(t.calc(t.lineWidth).mul(2)).equal())}})(t);return{[`${n}-multiple${a}`]:Object.assign(Object.assign({},Het(t)),{[`${n}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:l.basePadding,paddingBlock:l.containerPadding,borderRadius:t.borderRadius,[`${n}-disabled&`]:{background:t.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${(0,h.zA)(i)} 0`,lineHeight:(0,h.zA)(o),visibility:"hidden",content:'"\\a0"'}},[`${n}-selection-item`]:{height:l.itemHeight,lineHeight:(0,h.zA)(l.itemLineHeight)},[`${n}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:(0,h.zA)(o),marginBlock:i}},[`${n}-prefix`]:{marginInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(l.basePadding).equal()},[`${r}-item + ${r}-item,\n        ${n}-prefix + ${n}-selection-wrap\n      `]:{[`${n}-selection-search`]:{marginInlineStart:0},[`${n}-selection-placeholder`]:{insetInlineStart:0}},[`${r}-item-suffix`]:{minHeight:l.itemHeight,marginBlock:i},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(s).equal(),"\n          &-input,\n          &-mirror\n        ":{height:o,fontFamily:t.fontFamily,lineHeight:(0,h.zA)(o),transition:`all ${t.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(l.basePadding).equal(),insetInlineEnd:t.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${t.motionDurationSlow}`}})}};function Wet(t,e){const{componentCls:n}=t,i=e?`${n}-${e}`:"",r={[`${n}-multiple${i}`]:{fontSize:t.fontSize,[`${n}-selector`]:{[`${n}-show-search&`]:{cursor:"text"}},[`\n        &${n}-show-arrow ${n}-selector,\n        &${n}-allow-clear ${n}-selector\n      `]:{paddingInlineEnd:t.calc(t.fontSizeIcon).add(t.controlPaddingHorizontal).equal()}}};return[Vet(t,e),r]}var Fet=t=>{const{componentCls:e}=t,n=(0,Ji.oX)(t,{selectHeight:t.controlHeightSM,multipleSelectItemHeight:t.multipleItemHeightSM,borderRadius:t.borderRadiusSM,borderRadiusSM:t.borderRadiusXS}),i=(0,Ji.oX)(t,{fontSize:t.fontSizeLG,selectHeight:t.controlHeightLG,multipleSelectItemHeight:t.multipleItemHeightLG,borderRadius:t.borderRadiusLG,borderRadiusSM:t.borderRadius});return[Wet(t),Wet(n,"sm"),{[`${e}-multiple${e}-sm`]:{[`${e}-selection-placeholder`]:{insetInline:t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal()},[`${e}-selection-search`]:{marginInlineStart:2}}},Wet(i,"lg")]};function qet(t,e){const{componentCls:n,inputPaddingHorizontalBase:i,borderRadius:r}=t,o=t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),s=e?`${n}-${e}`:"";return{[`${n}-single${s}`]:{fontSize:t.fontSize,height:t.controlHeight,[`${n}-selector`]:Object.assign(Object.assign({},(0,J.dF)(t,!0)),{display:"flex",borderRadius:r,flex:"1 1 auto",[`${n}-selection-wrap:after`]:{lineHeight:(0,h.zA)(o)},[`${n}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`\n          ${n}-selection-item,\n          ${n}-selection-placeholder\n        `]:{display:"block",padding:0,lineHeight:(0,h.zA)(o),transition:`all ${t.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${n}-selection-item:empty:after`,`${n}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`\n        &${n}-show-arrow ${n}-selection-item,\n        &${n}-show-arrow ${n}-selection-search,\n        &${n}-show-arrow ${n}-selection-placeholder\n      `]:{paddingInlineEnd:t.showArrowPaddingInlineEnd},[`&${n}-open ${n}-selection-item`]:{color:t.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${(0,h.zA)(i)}`,[`${n}-selection-search-input`]:{height:o,fontSize:t.fontSize},"&:after":{lineHeight:(0,h.zA)(o)}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${(0,h.zA)(i)}`,"&:after":{display:"none"}}}}}}}function Xet(t){const{componentCls:e}=t,n=t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal();return[qet(t),qet((0,Ji.oX)(t,{controlHeight:t.controlHeightSM,borderRadius:t.borderRadiusSM}),"sm"),{[`${e}-single${e}-sm`]:{[`&:not(${e}-customize-input)`]:{[`${e}-selector`]:{padding:`0 ${(0,h.zA)(n)}`},[`&${e}-show-arrow ${e}-selection-search`]:{insetInlineEnd:t.calc(n).add(t.calc(t.fontSize).mul(1.5)).equal()},[`\n            &${e}-show-arrow ${e}-selection-item,\n            &${e}-show-arrow ${e}-selection-placeholder\n          `]:{paddingInlineEnd:t.calc(t.fontSize).mul(1.5).equal()}}}},qet((0,Ji.oX)(t,{controlHeight:t.singleItemHeightLG,fontSize:t.fontSizeLG,borderRadius:t.borderRadiusLG}),"lg")]}const Ket=(t,e)=>{const{componentCls:n,antCls:i,controlOutlineWidth:r}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${e.borderColor}`,background:t.selectorBg},[`&:not(${n}-disabled):not(${n}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:e.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:e.activeBorderColor,boxShadow:`0 0 0 ${(0,h.zA)(r)} ${e.activeOutlineColor}`,outline:0},[`${n}-prefix`]:{color:e.color}}}},Zet=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},Ket(t,e))}),Yet=t=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},Ket(t,{borderColor:t.colorBorder,hoverBorderHover:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeOutlineColor:t.activeOutlineColor,color:t.colorText})),Zet(t,{status:"error",borderColor:t.colorError,hoverBorderHover:t.colorErrorHover,activeBorderColor:t.colorError,activeOutlineColor:t.colorErrorOutline,color:t.colorError})),Zet(t,{status:"warning",borderColor:t.colorWarning,hoverBorderHover:t.colorWarningHover,activeBorderColor:t.colorWarning,activeOutlineColor:t.colorWarningOutline,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{background:t.colorBgContainerDisabled,color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`}})}),Get=(t,e)=>{const{componentCls:n,antCls:i}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{background:e.bg,border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} transparent`,color:e.color},[`&:not(${n}-disabled):not(${n}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{background:e.hoverBg},[`${n}-focused& ${n}-selector`]:{background:t.selectorBg,borderColor:e.activeBorderColor,outline:0}}}},Uet=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},Get(t,e))}),Jet=t=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},Get(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.activeBorderColor,color:t.colorText})),Uet(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,color:t.colorError})),Uet(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{borderColor:t.colorBorder,background:t.colorBgContainerDisabled,color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.colorBgContainer,border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}})}),tnt=t=>({"&-borderless":{[`${t.componentCls}-selector`]:{background:"transparent",border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} transparent`},[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`},[`&${t.componentCls}-status-error`]:{[`${t.componentCls}-prefix, ${t.componentCls}-selection-item`]:{color:t.colorError}},[`&${t.componentCls}-status-warning`]:{[`${t.componentCls}-prefix, ${t.componentCls}-selection-item`]:{color:t.colorWarning}}}}),ent=(t,e)=>{const{componentCls:n,antCls:i}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{borderWidth:`0 0 ${(0,h.zA)(t.lineWidth)} 0`,borderStyle:`none none ${t.lineType} none`,borderColor:e.borderColor,background:t.selectorBg,borderRadius:0},[`&:not(${n}-disabled):not(${n}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:e.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:e.activeBorderColor,outline:0},[`${n}-prefix`]:{color:e.color}}}},nnt=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},ent(t,e))}),int=t=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign({},ent(t,{borderColor:t.colorBorder,hoverBorderHover:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeOutlineColor:t.activeOutlineColor,color:t.colorText})),nnt(t,{status:"error",borderColor:t.colorError,hoverBorderHover:t.colorErrorHover,activeBorderColor:t.colorError,activeOutlineColor:t.colorErrorOutline,color:t.colorError})),nnt(t,{status:"warning",borderColor:t.colorWarning,hoverBorderHover:t.colorWarningHover,activeBorderColor:t.colorWarning,activeOutlineColor:t.colorWarningOutline,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`}})});var rnt=t=>({[t.componentCls]:Object.assign(Object.assign(Object.assign(Object.assign({},Yet(t)),Jet(t)),tnt(t)),int(t))});const ont=t=>{const{componentCls:e}=t;return{position:"relative",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,input:{cursor:"pointer"},[`${e}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${e}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},snt=t=>{const{componentCls:e}=t;return{[`${e}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none",appearance:"none"}}}},ant=t=>{const{antCls:e,componentCls:n,inputPaddingHorizontalBase:i,iconCls:r}=t,o={[`${n}-clear`]:{opacity:1,background:t.colorBgBase,borderRadius:"50%"}};return{[n]:Object.assign(Object.assign({},(0,J.dF)(t)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${n}-customize-input) ${n}-selector`]:Object.assign(Object.assign({},ont(t)),snt(t)),[`${n}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},J.L9),{[`> ${e}-typography`]:{display:"inline"}}),[`${n}-selection-placeholder`]:Object.assign(Object.assign({},J.L9),{flex:1,color:t.colorTextPlaceholder,pointerEvents:"none"}),[`${n}-arrow`]:Object.assign(Object.assign({},(0,J.Nk)()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${t.motionDurationSlow} ease`,[r]:{verticalAlign:"top",transition:`transform ${t.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${n}-suffix)`]:{pointerEvents:"auto"}},[`${n}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${n}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${n}-prefix`]:{flex:"none",marginInlineEnd:t.selectAffixPadding},[`${n}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,zIndex:1,display:"inline-block",width:t.fontSizeIcon,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${t.motionDurationMid} ease, opacity ${t.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:t.colorIcon}},"@media(hover:none)":o,"&:hover":o}),[`${n}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${n}-has-feedback`]:{[`${n}-clear`]:{insetInlineEnd:t.calc(i).add(t.fontSize).add(t.paddingXS).equal()}}}}}},lnt=t=>{const{componentCls:e}=t;return[{[e]:{[`&${e}-in-form-item`]:{width:"100%"}}},ant(t),Xet(t),Fet(t),Qet(t),{[`${e}-rtl`]:{direction:"rtl"}},(0,kl.G)(t,{borderElCls:`${e}-selector`,focusElCls:`${e}-focused`})]};var cnt=(0,Ui.OF)("Select",((t,{rootPrefixCls:e})=>{const n=(0,Ji.oX)(t,{rootPrefixCls:e,inputPaddingHorizontalBase:t.calc(t.paddingSM).sub(1).equal(),multipleSelectItemHeight:t.multipleItemHeight,selectHeight:t.controlHeight});return[lnt(n),rnt(n)]}),(t=>{const{fontSize:e,lineHeight:n,lineWidth:i,controlHeight:r,controlHeightSM:o,controlHeightLG:s,paddingXXS:a,controlPaddingHorizontal:l,zIndexPopupBase:c,colorText:h,fontWeightStrong:u,controlItemBgActive:d,controlItemBgHover:f,colorBgContainer:p,colorFillSecondary:g,colorBgContainerDisabled:m,colorTextDisabled:v,colorPrimaryHover:b,colorPrimary:y,controlOutline:w}=t,O=2*a,S=2*i,x=Math.min(r-O,r-S),k=Math.min(o-O,o-S),C=Math.min(s-O,s-S);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(a/2),zIndexPopup:c+50,optionSelectedColor:h,optionSelectedFontWeight:u,optionSelectedBg:d,optionActiveBg:f,optionPadding:`${(r-e*n)/2}px ${l}px`,optionFontSize:e,optionLineHeight:n,optionHeight:r,selectorBg:p,clearBg:p,singleItemHeightLG:s,multipleItemBg:g,multipleItemBorderColor:"transparent",multipleItemHeight:x,multipleItemHeightSM:k,multipleItemHeightLG:C,multipleSelectorBgDisabled:m,multipleItemColorDisabled:v,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(1.25*t.fontSize),hoverBorderColor:b,activeBorderColor:y,activeOutlineColor:w,selectAffixPadding:a}}),{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});const hnt="SECRET_COMBOBOX_MODE_DO_NOT_USE",unt=(t,e)=>{var i,r,o,s,a;const{prefixCls:l,bordered:h,className:u,rootClassName:d,getPopupContainer:f,popupClassName:p,dropdownClassName:g,listHeight:m=256,placement:v,listItemHeight:b,size:y,disabled:w,notFoundContent:O,status:S,builtinPlacements:x,dropdownMatchSelectWidth:k,popupMatchSelectWidth:C,direction:A,style:M,allowClear:E,variant:P,dropdownStyle:T,transitionName:$,tagRender:D,maxCount:R,prefix:B,dropdownRender:N,popupRender:L,onDropdownVisibleChange:j,onOpenChange:_,styles:I,classNames:z}=t,Q=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix","dropdownRender","popupRender","onDropdownVisibleChange","onOpenChange","styles","classNames"]),{getPopupContainer:H,getPrefixCls:W,renderEmpty:F,direction:q,virtual:X,popupMatchSelectWidth:K,popupOverflow:Z}=n.useContext(c.QO),{showSearch:G,style:U,styles:J,className:tt,classNames:et}=(0,c.TP)("select"),[,nt]=(0,Y.Ay)(),it=null!=b?b:null==nt?void 0:nt.controlHeight,rt=W("select",l),ot=W(),st=null!=A?A:q,{compactSize:at,compactItemClassnames:lt}=(0,Vi.RQ)(rt,st),[ct,ht]=xl("select",P,h),ut=Zi(rt),[dt,ft,pt]=cnt(rt,ut),gt=n.useMemo((()=>{const{mode:e}=t;if("combobox"!==e)return e===hnt?"combobox":e}),[t.mode]),mt="multiple"===gt||"tags"===gt,vt=function(t,e){return void 0!==e?e:null!==t}(t.suffixIcon,t.showArrow),yt=null!==(i=null!=C?C:k)&&void 0!==i?i:K,wt=(null===(r=null==I?void 0:I.popup)||void 0===r?void 0:r.root)||(null===(o=J.popup)||void 0===o?void 0:o.root)||T,Ot=L||N,St=_||j,{status:xt,hasFeedback:kt,isFormItemInput:Ct,feedbackIcon:Mt}=n.useContext(zi),Et=Ol(xt,S);let Pt;Pt=void 0!==O?O:"combobox"===gt?null:(null==F?void 0:F("Select"))||n.createElement(ett,{componentName:"Select"});const{suffixIcon:Tt,itemIcon:Dt,removeIcon:Rt,clearIcon:Bt}=function({suffixIcon:t,clearIcon:e,menuItemSelectedIcon:i,removeIcon:r,loading:o,multiple:s,hasFeedback:a,prefixCls:l,showSuffixIcon:c,feedbackIcon:h,showArrow:u,componentName:d}){const f=null!=e?e:n.createElement(bt,null),p=e=>null!==t||a||u?n.createElement(n.Fragment,null,!1!==c&&e,a&&h):null;let g=null;if(void 0!==t)g=p(t);else if(o)g=p(n.createElement(Cc.A,{spin:!0}));else{const t=`${l}-suffix`;g=({open:e,showSearch:i})=>p(e&&i?n.createElement(bh,{className:t}):n.createElement(E8,{className:t}))}let m=null;m=void 0!==i?i:s?n.createElement(Oc,null):null;let v=null;return v=void 0!==r?r:n.createElement(Zt,null),{clearIcon:f,suffixIcon:g,itemIcon:m,removeIcon:v}}(Object.assign(Object.assign({},Q),{multiple:mt,hasFeedback:kt,feedbackIcon:Mt,showSuffixIcon:vt,prefixCls:rt,componentName:"Select"})),Nt=!0===E?{clearIcon:Bt}:E,jt=(0,Yi.A)(Q,["suffixIcon","itemIcon"]),_t=At()((null===(s=null==z?void 0:z.popup)||void 0===s?void 0:s.root)||(null===(a=null==et?void 0:et.popup)||void 0===a?void 0:a.root)||p||g,{[`${rt}-dropdown-${st}`]:"rtl"===st},d,et.root,null==z?void 0:z.root,pt,ut,ft),It=(0,Sl.A)((t=>{var e;return null!==(e=null!=y?y:at)&&void 0!==e?e:t})),zt=n.useContext(V.A),Qt=null!=w?w:zt,Ht=At()({[`${rt}-lg`]:"large"===It,[`${rt}-sm`]:"small"===It,[`${rt}-rtl`]:"rtl"===st,[`${rt}-${ct}`]:ht,[`${rt}-in-form-item`]:Ct},wl(rt,Et,kt),lt,tt,u,et.root,null==z?void 0:z.root,d,pt,ut,ft),Vt=n.useMemo((()=>void 0!==v?v:"rtl"===st?"bottomRight":"bottomLeft"),[v,st]),[Wt]=$t("SelectLike",null==wt?void 0:wt.zIndex);return dt(n.createElement(_et,Object.assign({ref:e,virtual:X,showSearch:G},jt,{style:Object.assign(Object.assign(Object.assign(Object.assign({},J.root),null==I?void 0:I.root),U),M),dropdownMatchSelectWidth:yt,transitionName:Lt(ot,"slide-up",$),builtinPlacements:Iet(x,Z),listHeight:m,listItemHeight:it,mode:gt,prefixCls:rt,placement:Vt,direction:st,prefix:B,suffixIcon:Tt,menuItemSelectedIcon:Dt,removeIcon:Rt,allowClear:Nt,notFoundContent:Pt,className:Ht,getPopupContainer:f||H,dropdownClassName:_t,disabled:Qt,dropdownStyle:Object.assign(Object.assign({},wt),{zIndex:Wt}),maxCount:mt?R:void 0,tagRender:mt?D:void 0,dropdownRender:Ot,onDropdownVisibleChange:St})))},dnt=n.forwardRef(unt),fnt=bo(dnt,"dropdownAlign");dnt.SECRET_COMBOBOX_MODE_DO_NOT_USE=hnt,dnt.Option=wet,dnt.OptGroup=bet,dnt._InternalPanelDoNotUseOrYouWillBeFired=fnt;var pnt=dnt;const gnt=t=>{const{componentCls:e}=t;return{[`${e}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${e}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${e}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}},[`&${e}-disabled`]:{cursor:"not-allowed",[`${e}-item`]:{cursor:"not-allowed",backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"},a:{color:t.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:t.colorBorder,backgroundColor:t.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:t.itemActiveBgDisabled},a:{color:t.itemActiveColorDisabled}}},[`${e}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${e}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${e}-simple-pager`]:{color:t.colorTextDisabled},[`${e}-jump-prev, ${e}-jump-next`]:{[`${e}-item-link-icon`]:{opacity:0},[`${e}-item-ellipsis`]:{opacity:1}}},[`&${e}-simple`]:{[`${e}-prev, ${e}-next`]:{[`&${e}-disabled ${e}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},mnt=t=>{const{componentCls:e}=t;return{[`&${e}-mini ${e}-total-text, &${e}-mini ${e}-simple-pager`]:{height:t.itemSizeSM,lineHeight:(0,h.zA)(t.itemSizeSM)},[`&${e}-mini ${e}-item`]:{minWidth:t.itemSizeSM,height:t.itemSizeSM,margin:0,lineHeight:(0,h.zA)(t.calc(t.itemSizeSM).sub(2).equal())},[`&${e}-mini ${e}-prev, &${e}-mini ${e}-next`]:{minWidth:t.itemSizeSM,height:t.itemSizeSM,margin:0,lineHeight:(0,h.zA)(t.itemSizeSM)},[`&${e}-mini:not(${e}-disabled)`]:{[`${e}-prev, ${e}-next`]:{[`&:hover ${e}-item-link`]:{backgroundColor:t.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:t.colorBgTextActive},[`&${e}-disabled:hover ${e}-item-link`]:{backgroundColor:"transparent"}}},[`\n    &${e}-mini ${e}-prev ${e}-item-link,\n    &${e}-mini ${e}-next ${e}-item-link\n    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:t.itemSizeSM,lineHeight:(0,h.zA)(t.itemSizeSM)}},[`&${e}-mini ${e}-jump-prev, &${e}-mini ${e}-jump-next`]:{height:t.itemSizeSM,marginInlineEnd:0,lineHeight:(0,h.zA)(t.itemSizeSM)},[`&${e}-mini ${e}-options`]:{marginInlineStart:t.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:t.miniOptionsSizeChangerTop},"&-quick-jumper":{height:t.itemSizeSM,lineHeight:(0,h.zA)(t.itemSizeSM),input:Object.assign(Object.assign({},Wl(t)),{width:t.paginationMiniQuickJumperInputWidth,height:t.controlHeightSM})}}}},vnt=t=>{const{componentCls:e}=t;return{[`\n    &${e}-simple ${e}-prev,\n    &${e}-simple ${e}-next\n    `]:{height:t.itemSizeSM,lineHeight:(0,h.zA)(t.itemSizeSM),verticalAlign:"top",[`${e}-item-link`]:{height:t.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive},"&::after":{height:t.itemSizeSM,lineHeight:(0,h.zA)(t.itemSizeSM)}}},[`&${e}-simple ${e}-simple-pager`]:{display:"inline-block",height:t.itemSizeSM,marginInlineEnd:t.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${(0,h.zA)(t.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:t.itemInputBg,border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadius,outline:"none",transition:`border-color ${t.motionDurationMid}`,color:"inherit","&:hover":{borderColor:t.colorPrimary},"&:focus":{borderColor:t.colorPrimaryHover,boxShadow:`${(0,h.zA)(t.inputOutlineOffset)} 0 ${(0,h.zA)(t.controlOutlineWidth)} ${t.controlOutline}`},"&[disabled]":{color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,cursor:"not-allowed"}}}}},bnt=t=>{const{componentCls:e}=t;return{[`${e}-jump-prev, ${e}-jump-next`]:{outline:0,[`${e}-item-container`]:{position:"relative",[`${e}-item-link-icon`]:{color:t.colorPrimary,fontSize:t.fontSizeSM,opacity:0,transition:`all ${t.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${e}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:t.colorTextDisabled,letterSpacing:t.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:t.paginationEllipsisTextIndent,opacity:1,transition:`all ${t.motionDurationMid}`}},"&:hover":{[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}}},[`\n    ${e}-prev,\n    ${e}-jump-prev,\n    ${e}-jump-next\n    `]:{marginInlineEnd:t.marginXS},[`\n    ${e}-prev,\n    ${e}-next,\n    ${e}-jump-prev,\n    ${e}-jump-next\n    `]:{display:"inline-block",minWidth:t.itemSize,height:t.itemSize,color:t.colorText,fontFamily:t.fontFamily,lineHeight:(0,h.zA)(t.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}`},[`${e}-prev, ${e}-next`]:{outline:0,button:{color:t.colorText,cursor:"pointer",userSelect:"none"},[`${e}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:t.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} transparent`,borderRadius:t.borderRadius,outline:"none",transition:`all ${t.motionDurationMid}`},[`&:hover ${e}-item-link`]:{backgroundColor:t.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:t.colorBgTextActive},[`&${e}-disabled:hover`]:{[`${e}-item-link`]:{backgroundColor:"transparent"}}},[`${e}-slash`]:{marginInlineEnd:t.paginationSlashMarginInlineEnd,marginInlineStart:t.paginationSlashMarginInlineStart},[`${e}-options`]:{display:"inline-block",marginInlineStart:t.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:t.controlHeight,marginInlineStart:t.marginXS,lineHeight:(0,h.zA)(t.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},Fl(t)),Pl(t,{borderColor:t.colorBorder,hoverBorderColor:t.colorPrimaryHover,activeBorderColor:t.colorPrimary,activeShadow:t.activeShadow})),{"&[disabled]":Object.assign({},El(t)),width:t.calc(t.controlHeightLG).mul(1.25).equal(),height:t.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:t.marginXS,marginInlineEnd:t.marginXS})}}}},ynt=t=>{const{componentCls:e}=t;return{[`${e}-item`]:{display:"inline-block",minWidth:t.itemSize,height:t.itemSize,marginInlineEnd:t.marginXS,fontFamily:t.fontFamily,lineHeight:(0,h.zA)(t.calc(t.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:t.itemBg,border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} transparent`,borderRadius:t.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${(0,h.zA)(t.paginationItemPaddingInline)}`,color:t.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${e}-item-active)`]:{"&:hover":{transition:`all ${t.motionDurationMid}`,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},"&-active":{fontWeight:t.fontWeightStrong,backgroundColor:t.itemActiveBg,borderColor:t.colorPrimary,a:{color:t.colorPrimary},"&:hover":{borderColor:t.colorPrimaryHover},"&:hover a":{color:t.colorPrimaryHover}}}}},wnt=t=>{const{componentCls:e}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,J.dF)(t)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${e}-total-text`]:{display:"inline-block",height:t.itemSize,marginInlineEnd:t.marginXS,lineHeight:(0,h.zA)(t.calc(t.itemSize).sub(2).equal()),verticalAlign:"middle"}}),ynt(t)),bnt(t)),vnt(t)),mnt(t)),gnt(t)),{[`@media only screen and (max-width: ${t.screenLG}px)`]:{[`${e}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${t.screenSM}px)`]:{[`${e}-options`]:{display:"none"}}}),[`&${t.componentCls}-rtl`]:{direction:"rtl"}}},Ont=t=>{const{componentCls:e}=t;return{[`${e}:not(${e}-disabled)`]:{[`${e}-item`]:Object.assign({},(0,J.K8)(t)),[`${e}-jump-prev, ${e}-jump-next`]:{"&:focus-visible":Object.assign({[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}},(0,J.jk)(t))},[`${e}-prev, ${e}-next`]:{[`&:focus-visible ${e}-item-link`]:Object.assign({},(0,J.jk)(t))}}}},Snt=t=>Object.assign({itemBg:t.colorBgContainer,itemSize:t.controlHeight,itemSizeSM:t.controlHeightSM,itemActiveBg:t.colorBgContainer,itemLinkBg:t.colorBgContainer,itemActiveColorDisabled:t.colorTextDisabled,itemActiveBgDisabled:t.controlItemBgActiveDisabled,itemInputBg:t.colorBgContainer,miniOptionsSizeChangerTop:0},Al(t)),xnt=t=>(0,Ji.oX)(t,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:t.calc(t.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:t.calc(t.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:t.calc(t.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:t.calc(t.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:t.marginSM,paginationSlashMarginInlineEnd:t.marginSM,paginationEllipsisTextIndent:"0.13em"},Cl(t));var knt=(0,Ui.OF)("Pagination",(t=>{const e=xnt(t);return[wnt(e),Ont(e)]}),Snt);const Cnt=t=>{const{componentCls:e}=t;return{[`${e}${e}-bordered${e}-disabled:not(${e}-mini)`]:{"&, &:hover":{[`${e}-item-link`]:{borderColor:t.colorBorder}},"&:focus-visible":{[`${e}-item-link`]:{borderColor:t.colorBorder}},[`${e}-item, ${e}-item-link`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,[`&:hover:not(${e}-item-active)`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,a:{color:t.colorTextDisabled}},[`&${e}-item-active`]:{backgroundColor:t.itemActiveBgDisabled}},[`${e}-prev, ${e}-next`]:{"&:hover button":{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,color:t.colorTextDisabled},[`${e}-item-link`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder}}},[`${e}${e}-bordered:not(${e}-mini)`]:{[`${e}-prev, ${e}-next`]:{"&:hover button":{borderColor:t.colorPrimaryHover,backgroundColor:t.itemBg},[`${e}-item-link`]:{backgroundColor:t.itemLinkBg,borderColor:t.colorBorder},[`&:hover ${e}-item-link`]:{borderColor:t.colorPrimary,backgroundColor:t.itemBg,color:t.colorPrimary},[`&${e}-disabled`]:{[`${e}-item-link`]:{borderColor:t.colorBorder,color:t.colorTextDisabled}}},[`${e}-item`]:{backgroundColor:t.itemBg,border:`${(0,h.zA)(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,[`&:hover:not(${e}-item-active)`]:{borderColor:t.colorPrimary,backgroundColor:t.itemBg,a:{color:t.colorPrimary}},"&-active":{borderColor:t.colorPrimary}}}}};var Ant=(0,Ui.bf)(["Pagination","bordered"],(t=>{const e=xnt(t);return[Cnt(e)]}),Snt);function Mnt(t){return(0,n.useMemo)((()=>"boolean"==typeof t?[t,{}]:t&&"object"==typeof t?[!0,t]:[void 0,void 0]),[t])}var Ent=t=>{const{align:e,prefixCls:i,selectPrefixCls:r,className:o,rootClassName:s,style:a,size:l,locale:h,responsive:u,showSizeChanger:d,selectComponentClass:f,pageSizeOptions:p}=t,g=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","responsive","showSizeChanger","selectComponentClass","pageSizeOptions"]),{xs:m}=ott(u),[,v]=(0,Y.Ay)(),{getPrefixCls:b,direction:w,showSizeChanger:O,className:S,style:x}=(0,c.TP)("pagination"),k=b("pagination",i),[C,A,M]=knt(k),E=(0,Sl.A)(l),P="small"===E||!(!m||E||!u),[T]=_t("Pagination",y),$=Object.assign(Object.assign({},T),h),[D,R]=Mnt(d),[B,N]=Mnt(O),L=null!=D?D:B,j=null!=R?R:N,_=f||pnt,I=n.useMemo((()=>p?p.map((t=>Number(t))):void 0),[p]),z=n.useMemo((()=>{const t=n.createElement("span",{className:`${k}-item-ellipsis`},"•••");return{prevIcon:n.createElement("button",{className:`${k}-item-link`,type:"button",tabIndex:-1},"rtl"===w?n.createElement(W3,null):n.createElement(Q3,null)),nextIcon:n.createElement("button",{className:`${k}-item-link`,type:"button",tabIndex:-1},"rtl"===w?n.createElement(Q3,null):n.createElement(W3,null)),jumpPrevIcon:n.createElement("a",{className:`${k}-item-link`},n.createElement("div",{className:`${k}-item-container`},"rtl"===w?n.createElement(utt,{className:`${k}-item-link-icon`}):n.createElement(ltt,{className:`${k}-item-link-icon`}),t)),jumpNextIcon:n.createElement("a",{className:`${k}-item-link`},n.createElement("div",{className:`${k}-item-container`},"rtl"===w?n.createElement(ltt,{className:`${k}-item-link-icon`}):n.createElement(utt,{className:`${k}-item-link-icon`}),t))}}),[w,k]),Q=b("select",r),H=At()({[`${k}-${e}`]:!!e,[`${k}-mini`]:P,[`${k}-rtl`]:"rtl"===w,[`${k}-bordered`]:v.wireframe},S,o,s,A,M),V=Object.assign(Object.assign({},x),a);return C(n.createElement(n.Fragment,null,v.wireframe&&n.createElement(Ant,{prefixCls:k}),n.createElement(Att,Object.assign({},z,g,{style:V,prefixCls:k,selectPrefixCls:Q,className:H,locale:$,pageSizeOptions:I,showSizeChanger:L,sizeChangerRender:t=>{var e;const{disabled:i,size:r,onSizeChange:o,"aria-label":s,className:a,options:l}=t,{className:c,onChange:h}=j||{},u=null===(e=l.find((t=>String(t.value)===String(r))))||void 0===e?void 0:e.value;return n.createElement(_,Object.assign({disabled:i,showSearch:!0,popupMatchSelectWidth:!1,getPopupContainer:t=>t.parentNode,"aria-label":s,options:l},j,{value:u,onChange:(t,e)=>{null==o||o(t),null==h||h(t,e)},size:P?"small":"middle",className:At()(a,c)}))}}))))};const Pnt=80*Math.PI,Tnt=t=>{const{dotClassName:e,style:i,hasCircleCls:r}=t;return n.createElement("circle",{className:At()(`${e}-circle`,{[`${e}-circle-bg`]:r}),r:40,cx:50,cy:50,strokeWidth:20,style:i})};var $nt=({percent:t,prefixCls:e})=>{const i=`${e}-dot`,r=`${i}-holder`,o=`${r}-hidden`,[s,a]=n.useState(!1);(0,se.A)((()=>{0!==t&&a(!0)}),[0!==t]);const l=Math.max(Math.min(t,100),0);if(!s)return null;const c={strokeDashoffset:""+Pnt/4,strokeDasharray:`${Pnt*l/100} ${Pnt*(100-l)/100}`};return n.createElement("span",{className:At()(r,`${i}-progress`,l<=0&&o)},n.createElement("svg",{viewBox:"0 0 100 100",role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":l},n.createElement(Tnt,{dotClassName:i,hasCircleCls:!0}),n.createElement(Tnt,{dotClassName:i,style:c})))};function Dnt(t){const{prefixCls:e,percent:i=0}=t,r=`${e}-dot`,o=`${r}-holder`,s=`${o}-hidden`;return n.createElement(n.Fragment,null,n.createElement("span",{className:At()(o,i>0&&s)},n.createElement("span",{className:At()(r,`${e}-dot-spin`)},[1,2,3,4].map((t=>n.createElement("i",{className:`${e}-dot-item`,key:t}))))),n.createElement($nt,{prefixCls:e,percent:i}))}function Rnt(t){const{prefixCls:e,indicator:i,percent:r}=t,o=`${e}-dot`;return i&&n.isValidElement(i)?(0,Oa.Ob)(i,{className:At()(i.props.className,o),percent:r}):n.createElement(Dnt,{prefixCls:e,percent:r})}const Bnt=new h.Mo("antSpinMove",{to:{opacity:1}}),Nnt=new h.Mo("antRotate",{to:{transform:"rotate(405deg)"}}),Lnt=t=>{const{componentCls:e,calc:n}=t;return{[e]:Object.assign(Object.assign({},(0,J.dF)(t)),{position:"absolute",display:"none",color:t.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${t.motionDurationSlow} ${t.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${e}-text`]:{fontSize:t.fontSize,paddingTop:n(n(t.dotSize).sub(t.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:t.colorBgMask,zIndex:t.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${t.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[e]:{[`${e}-dot-holder`]:{color:t.colorWhite},[`${e}-text`]:{color:t.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${e}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:t.contentHeight,[`${e}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:n(t.dotSize).mul(-1).div(2).equal()},[`${e}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${t.colorBgContainer}`},[`&${e}-show-text ${e}-dot`]:{marginTop:n(t.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${e}-dot`]:{margin:n(t.dotSizeSM).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:n(n(t.dotSizeSM).sub(t.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:n(t.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${e}-dot`]:{margin:n(t.dotSizeLG).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:n(n(t.dotSizeLG).sub(t.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:n(t.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${e}-container`]:{position:"relative",transition:`opacity ${t.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:t.colorBgContainer,opacity:0,transition:`all ${t.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:t.spinDotDefault},[`${e}-dot-holder`]:{width:"1em",height:"1em",fontSize:t.dotSize,display:"inline-block",transition:`transform ${t.motionDurationSlow} ease, opacity ${t.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:t.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${e}-dot-progress`]:{position:"absolute",inset:0},[`${e}-dot`]:{position:"relative",display:"inline-block",fontSize:t.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:n(t.dotSize).sub(n(t.marginXXS).div(2)).div(2).equal(),height:n(t.dotSize).sub(n(t.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:Bnt,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:Nnt,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map((e=>`${e} ${t.motionDurationSlow} ease`)).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:t.colorFillSecondary}},[`&-sm ${e}-dot`]:{"&, &-holder":{fontSize:t.dotSizeSM}},[`&-sm ${e}-dot-holder`]:{i:{width:n(n(t.dotSizeSM).sub(n(t.marginXXS).div(2))).div(2).equal(),height:n(n(t.dotSizeSM).sub(n(t.marginXXS).div(2))).div(2).equal()}},[`&-lg ${e}-dot`]:{"&, &-holder":{fontSize:t.dotSizeLG}},[`&-lg ${e}-dot-holder`]:{i:{width:n(n(t.dotSizeLG).sub(t.marginXXS)).div(2).equal(),height:n(n(t.dotSizeLG).sub(t.marginXXS)).div(2).equal()}},[`&${e}-show-text ${e}-text`]:{display:"block"}})}};var jnt=(0,Ui.OF)("Spin",(t=>{const e=(0,Ji.oX)(t,{spinDotDefault:t.colorTextDescription});return[Lnt(e)]}),(t=>{const{controlHeightLG:e,controlHeight:n}=t;return{contentHeight:400,dotSize:e/2,dotSizeSM:.35*e,dotSizeLG:n}}));const _nt=[[30,.05],[70,.03],[96,.01]];let Int;const znt=t=>{var e;const{prefixCls:i,spinning:r=!0,delay:o=0,className:s,rootClassName:a,size:l="default",tip:h,wrapperClassName:u,style:d,children:f,fullscreen:p=!1,indicator:g,percent:m}=t,v=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(t,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:b,direction:y,className:w,style:O,indicator:S}=(0,c.TP)("spin"),x=b("spin",i),[k,C,A]=jnt(x),[M,E]=n.useState((()=>r&&!function(t,e){return!!t&&!!e&&!Number.isNaN(Number(e))}(r,o))),P=function(t,e){const[i,r]=n.useState(0),o=n.useRef(null),s="auto"===e;return n.useEffect((()=>(s&&t&&(r(0),o.current=setInterval((()=>{r((t=>{const e=100-t;for(let n=0;n<_nt.length;n+=1){const[i,r]=_nt[n];if(t<=i)return t+e*r}return t}))}),200)),()=>{clearInterval(o.current)})),[s,t]),s?i:e}(M,m);n.useEffect((()=>{if(r){const t=function(t,e,n){var i=(n||{}).atBegin;return function(t,e,n){var i,r=n||{},o=r.noTrailing,s=void 0!==o&&o,a=r.noLeading,l=void 0!==a&&a,c=r.debounceMode,h=void 0===c?void 0:c,u=!1,d=0;function f(){i&&clearTimeout(i)}function p(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=this,c=Date.now()-d;function p(){d=Date.now(),e.apply(a,r)}function g(){i=void 0}u||(l||!h||i||p(),f(),void 0===h&&c>t?l?(d=Date.now(),s||(i=setTimeout(h?g:p,t))):p():!0!==s&&(i=setTimeout(h?g:p,void 0===h?t-c:t)))}return p.cancel=function(t){var e=(t||{}).upcomingOnly,n=void 0!==e&&e;f(),u=!n},p}(t,e,{debounceMode:!1!==(void 0!==i&&i)})}(o,(()=>{E(!0)}));return t(),()=>{var e;null===(e=null==t?void 0:t.cancel)||void 0===e||e.call(t)}}E(!1)}),[o,r]);const T=n.useMemo((()=>void 0!==f&&!p),[f,p]),$=At()(x,w,{[`${x}-sm`]:"small"===l,[`${x}-lg`]:"large"===l,[`${x}-spinning`]:M,[`${x}-show-text`]:!!h,[`${x}-rtl`]:"rtl"===y},s,!p&&a,C,A),D=At()(`${x}-container`,{[`${x}-blur`]:M}),R=null!==(e=null!=g?g:S)&&void 0!==e?e:Int,B=Object.assign(Object.assign({},O),d),N=n.createElement("div",Object.assign({},v,{style:B,className:$,"aria-live":"polite","aria-busy":M}),n.createElement(Rnt,{prefixCls:x,indicator:R,percent:P}),h&&(T||p)?n.createElement("div",{className:`${x}-text`},h):null);return k(T?n.createElement("div",Object.assign({},v,{className:At()(`${x}-nested-loading`,u,C,A)}),M&&n.createElement("div",{key:"loading"},N),n.createElement("div",{className:D,key:"container"},f)):p?n.createElement("div",{className:At()(`${x}-fullscreen`,{[`${x}-fullscreen-show`]:M},a,C,A)},N):N)};znt.setDefaultIndicator=t=>{Int=t};var Qnt=znt;const Hnt=(t,e)=>"key"in t&&void 0!==t.key&&null!==t.key?t.key:t.dataIndex?Array.isArray(t.dataIndex)?t.dataIndex.join("."):t.dataIndex:e;function Vnt(t,e){return e?`${e}-${t}`:`${t}`}const Wnt=(t,e)=>"function"==typeof t?t(e):t;var Fnt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"},qnt=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:Fnt}))},Xnt=n.forwardRef(qnt);function Knt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,B8(i.key),i)}}function Znt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ynt(t,e){return Ynt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ynt(t,e)}function Gnt(t){return Gnt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gnt(t)}function Unt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Unt=function(){return!!t})()}function Jnt(t){if(null==t)throw new TypeError("Cannot destructure "+t)}var tit=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],eit=n.forwardRef((function(t,e){var i=t.className,r=t.style,o=t.motion,s=t.motionNodes,a=t.motionType,l=t.onMotionStart,c=t.onMotionEnd,h=t.active,u=t.treeNodeRequiredProps,d=I8(t,tit),f=_8(n.useState(!0),2),p=f[0],g=f[1],m=n.useContext(z8).prefixCls,v=s&&"hide"!==a;(0,se.A)((function(){s&&v!==p&&g(v)}),[s]);var b=n.useRef(!1),y=function(){s&&!b.current&&(b.current=!0,c())};return function(t,e){var i=_8(n.useState(!1),2),r=i[0],o=i[1];(0,se.A)((function(){if(r)return t(),function(){e()}}),[r]),(0,se.A)((function(){return o(!0),function(){o(!1)}}),[])}((function(){s&&l()}),y),s?n.createElement(Z.Ay,R8({ref:e,visible:p},o,{motionAppear:"show"===a,onVisibleChanged:function(t){v===t&&y()}}),(function(t,e){var i=t.className,r=t.style;return n.createElement("div",{ref:e,className:At()("".concat(m,"-treenode-motion"),i),style:r},s.map((function(t){var e=Object.assign({},(Jnt(t.data),t.data)),i=t.title,r=t.key,o=t.isStart,s=t.isEnd;delete e.children;var a=U8(r,u);return n.createElement(r3,R8({},e,a,{title:i,active:h,data:t.data,key:r,isStart:o,isEnd:s}))})))})):n.createElement(r3,R8({domRef:e,className:i,style:r},d,{active:h}))})),nit=eit;function iit(t,e,n){var i=t.findIndex((function(t){return t.key===n})),r=t[i+1],o=e.findIndex((function(t){return t.key===n}));if(r){var s=e.findIndex((function(t){return t.key===r.key}));return e.slice(o+1,s)}return e.slice(o+1)}var rit=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],oit={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},sit=function(){},ait="RC_TREE_MOTION_".concat(Math.random()),lit={key:ait},cit={key:ait,level:0,index:0,pos:"0",node:lit,nodes:[lit]},hit={parent:null,children:[],pos:cit.pos,data:lit,title:null,key:ait,isStart:[],isEnd:[]};function uit(t,e,n,i){return!1!==e&&n?t.slice(0,Math.ceil(n/i)+1):t}function dit(t){return X8(t.key,t.pos)}var fit=n.forwardRef((function(t,e){var i=t.prefixCls,r=t.data,o=(t.selectable,t.checkable,t.expandedKeys),s=t.selectedKeys,a=t.checkedKeys,l=t.loadedKeys,c=t.loadingKeys,h=t.halfCheckedKeys,u=t.keyEntities,d=t.disabled,f=t.dragging,p=t.dragOverNodeKey,g=t.dropPosition,m=t.motion,v=t.height,b=t.itemHeight,y=t.virtual,w=t.scrollWidth,O=t.focusable,S=t.activeItem,x=t.focused,k=t.tabIndex,C=t.onKeyDown,A=t.onFocus,M=t.onBlur,E=t.onActiveChange,P=t.onListChangeStart,T=t.onListChangeEnd,$=I8(t,rit),D=n.useRef(null),R=n.useRef(null);n.useImperativeHandle(e,(function(){return{scrollTo:function(t){D.current.scrollTo(t)},getIndentWidth:function(){return R.current.offsetWidth}}}));var B=_8(n.useState(o),2),N=B[0],L=B[1],j=_8(n.useState(r),2),_=j[0],I=j[1],z=_8(n.useState(r),2),Q=z[0],H=z[1],V=_8(n.useState([]),2),W=V[0],F=V[1],q=_8(n.useState(null),2),X=q[0],K=q[1],Z=n.useRef(r);function Y(){var t=Z.current;I(t),H(t),F([]),K(null),T()}Z.current=r,(0,se.A)((function(){L(o);var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.length,i=e.length;if(1!==Math.abs(n-i))return{add:!1,key:null};function r(t,e){var n=new Map;t.forEach((function(t){n.set(t,!0)}));var i=e.filter((function(t){return!n.has(t)}));return 1===i.length?i[0]:null}return n<i?{add:!0,key:r(t,e)}:{add:!1,key:r(e,t)}}(N,o);if(null!==t.key)if(t.add){var e=_.findIndex((function(e){return e.key===t.key})),n=uit(iit(_,r,t.key),y,v,b),i=_.slice();i.splice(e+1,0,hit),H(i),F(n),K("show")}else{var s=r.findIndex((function(e){return e.key===t.key})),a=uit(iit(r,_,t.key),y,v,b),l=r.slice();l.splice(s+1,0,hit),H(l),F(a),K("hide")}else _!==r&&(I(r),H(r))}),[o,r]),n.useEffect((function(){f||Y()}),[f]);var G=m?Q:r,U={expandedKeys:o,selectedKeys:s,loadedKeys:l,loadingKeys:c,checkedKeys:a,halfCheckedKeys:h,dragOverNodeKey:p,dropPosition:g,keyEntities:u};return n.createElement(n.Fragment,null,x&&S&&n.createElement("span",{style:oit,"aria-live":"assertive"},function(t){for(var e=String(t.data.key),n=t;n.parent;)n=n.parent,e="".concat(n.data.key," > ").concat(e);return e}(S)),n.createElement("div",null,n.createElement("input",{style:oit,disabled:!1===O||d,tabIndex:!1!==O?k:null,onKeyDown:C,onFocus:A,onBlur:M,value:"",onChange:sit,"aria-label":"for screen reader"})),n.createElement("div",{className:"".concat(i,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},n.createElement("div",{className:"".concat(i,"-indent")},n.createElement("div",{ref:R,className:"".concat(i,"-indent-unit")}))),n.createElement(f8,R8({},$,{data:G,itemKey:dit,height:v,fullHeight:!1,virtual:y,itemHeight:b,scrollWidth:w,prefixCls:"".concat(i,"-list"),ref:D,role:"tree",onVisibleChange:function(t){t.every((function(t){return dit(t)!==ait}))&&Y()}}),(function(t){var e=t.pos,i=Object.assign({},(Jnt(t.data),t.data)),r=t.title,o=t.key,s=t.isStart,a=t.isEnd,l=X8(o,e);delete i.key,delete i.children;var c=U8(l,U);return n.createElement(nit,R8({},i,c,{title:r,active:!!S&&o===S.key,pos:e,data:t.data,isStart:s,isEnd:a,motion:m,motionNodes:o===ait?W:null,motionType:X,onMotionStart:P,onMotionEnd:Y,treeNodeRequiredProps:U,onMouseMove:function(){E(null)}}))})))})),pit=fit,git=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ynt(t,e)}(i,t);var e=function(t){var e=Unt();return function(){var n,i=Gnt(t);if(e){var r=Gnt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"==D8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Znt(t)}(this,n)}}(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return N8(Znt(t=e.call.apply(e,[this].concat(o))),"destroyed",!1),N8(Znt(t),"delayedDragEnterLogic",void 0),N8(Znt(t),"loadingRetryTimes",{}),N8(Znt(t),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:K8()}),N8(Znt(t),"dragStartMousePosition",null),N8(Znt(t),"dragNodeProps",null),N8(Znt(t),"currentMouseOverDroppableNodeKey",null),N8(Znt(t),"listRef",n.createRef()),N8(Znt(t),"onNodeDragStart",(function(e,n){var i=t.state,r=i.expandedKeys,o=i.keyEntities,s=t.props.onDragStart,a=n.eventKey;t.dragNodeProps=n,t.dragStartMousePosition={x:e.clientX,y:e.clientY};var l=o3(r,a);t.setState({draggingNodeKey:a,dragChildrenKeys:l3(a,o),indent:t.listRef.current.getIndentWidth()}),t.setExpandedKeys(l),window.addEventListener("dragend",t.onWindowDragEnd),null==s||s({event:e,node:J8(n)})})),N8(Znt(t),"onNodeDragEnter",(function(e,n){var i=t.state,r=i.expandedKeys,o=i.keyEntities,s=i.dragChildrenKeys,a=i.flattenNodes,l=i.indent,c=t.props,h=c.onDragEnter,u=c.onExpand,d=c.allowDrop,f=c.direction,p=n.pos,g=n.eventKey;if(t.currentMouseOverDroppableNodeKey!==g&&(t.currentMouseOverDroppableNodeKey=g),t.dragNodeProps){var m=h3(e,t.dragNodeProps,n,l,t.dragStartMousePosition,d,a,o,r,f),v=m.dropPosition,b=m.dropLevelOffset,y=m.dropTargetKey,w=m.dropContainerKey,O=m.dropTargetPos,S=m.dropAllowed,x=m.dragOverNodeKey;!s.includes(y)&&S?(t.delayedDragEnterLogic||(t.delayedDragEnterLogic={}),Object.keys(t.delayedDragEnterLogic).forEach((function(e){clearTimeout(t.delayedDragEnterLogic[e])})),t.dragNodeProps.eventKey!==n.eventKey&&(e.persist(),t.delayedDragEnterLogic[p]=window.setTimeout((function(){if(null!==t.state.draggingNodeKey){var i=$8(r),s=W8(o,n.eventKey);s&&(s.children||[]).length&&(i=s3(r,n.eventKey)),t.props.hasOwnProperty("expandedKeys")||t.setExpandedKeys(i),null==u||u(i,{node:J8(n),expanded:!0,nativeEvent:e.nativeEvent})}}),800)),t.dragNodeProps.eventKey!==y||0!==b?(t.setState({dragOverNodeKey:x,dropPosition:v,dropLevelOffset:b,dropTargetKey:y,dropContainerKey:w,dropTargetPos:O,dropAllowed:S}),null==h||h({event:e,node:J8(n),expandedKeys:r})):t.resetDragState()):t.resetDragState()}else t.resetDragState()})),N8(Znt(t),"onNodeDragOver",(function(e,n){var i=t.state,r=i.dragChildrenKeys,o=i.flattenNodes,s=i.keyEntities,a=i.expandedKeys,l=i.indent,c=t.props,h=c.onDragOver,u=c.allowDrop,d=c.direction;if(t.dragNodeProps){var f=h3(e,t.dragNodeProps,n,l,t.dragStartMousePosition,u,o,s,a,d),p=f.dropPosition,g=f.dropLevelOffset,m=f.dropTargetKey,v=f.dropContainerKey,b=f.dropTargetPos,y=f.dropAllowed,w=f.dragOverNodeKey;!r.includes(m)&&y&&(t.dragNodeProps.eventKey===m&&0===g?null===t.state.dropPosition&&null===t.state.dropLevelOffset&&null===t.state.dropTargetKey&&null===t.state.dropContainerKey&&null===t.state.dropTargetPos&&!1===t.state.dropAllowed&&null===t.state.dragOverNodeKey||t.resetDragState():p===t.state.dropPosition&&g===t.state.dropLevelOffset&&m===t.state.dropTargetKey&&v===t.state.dropContainerKey&&b===t.state.dropTargetPos&&y===t.state.dropAllowed&&w===t.state.dragOverNodeKey||t.setState({dropPosition:p,dropLevelOffset:g,dropTargetKey:m,dropContainerKey:v,dropTargetPos:b,dropAllowed:y,dragOverNodeKey:w}),null==h||h({event:e,node:J8(n)}))}})),N8(Znt(t),"onNodeDragLeave",(function(e,n){t.currentMouseOverDroppableNodeKey!==n.eventKey||e.currentTarget.contains(e.relatedTarget)||(t.resetDragState(),t.currentMouseOverDroppableNodeKey=null);var i=t.props.onDragLeave;null==i||i({event:e,node:J8(n)})})),N8(Znt(t),"onWindowDragEnd",(function(e){t.onNodeDragEnd(e,null,!0),window.removeEventListener("dragend",t.onWindowDragEnd)})),N8(Znt(t),"onNodeDragEnd",(function(e,n){var i=t.props.onDragEnd;t.setState({dragOverNodeKey:null}),t.cleanDragState(),null==i||i({event:e,node:J8(n)}),t.dragNodeProps=null,window.removeEventListener("dragend",t.onWindowDragEnd)})),N8(Znt(t),"onNodeDrop",(function(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.state,s=o.dragChildrenKeys,a=o.dropPosition,l=o.dropTargetKey,c=o.dropTargetPos;if(o.dropAllowed){var h=t.props.onDrop;if(t.setState({dragOverNodeKey:null}),t.cleanDragState(),null!==l){var u=j8(j8({},U8(l,t.getTreeNodeRequiredProps())),{},{active:(null===(i=t.getActiveItem())||void 0===i?void 0:i.key)===l,data:W8(t.state.keyEntities,l).node}),d=s.includes(l);(0,p.Ay)(!d,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var f=a3(c),g={event:e,node:J8(u),dragNode:t.dragNodeProps?J8(t.dragNodeProps):null,dragNodesKeys:[t.dragNodeProps.eventKey].concat(s),dropToGap:0!==a,dropPosition:a+Number(f[f.length-1])};r||null==h||h(g),t.dragNodeProps=null}}})),N8(Znt(t),"cleanDragState",(function(){null!==t.state.draggingNodeKey&&t.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),t.dragStartMousePosition=null,t.currentMouseOverDroppableNodeKey=null})),N8(Znt(t),"triggerExpandActionExpand",(function(e,n){var i=t.state,r=i.expandedKeys,o=i.flattenNodes,s=n.expanded,a=n.key;if(!(n.isLeaf||e.shiftKey||e.metaKey||e.ctrlKey)){var l=o.filter((function(t){return t.key===a}))[0],c=J8(j8(j8({},U8(a,t.getTreeNodeRequiredProps())),{},{data:l.data}));t.setExpandedKeys(s?o3(r,a):s3(r,a)),t.onNodeExpand(e,c)}})),N8(Znt(t),"onNodeClick",(function(e,n){var i=t.props,r=i.onClick;"click"===i.expandAction&&t.triggerExpandActionExpand(e,n),null==r||r(e,n)})),N8(Znt(t),"onNodeDoubleClick",(function(e,n){var i=t.props,r=i.onDoubleClick;"doubleClick"===i.expandAction&&t.triggerExpandActionExpand(e,n),null==r||r(e,n)})),N8(Znt(t),"onNodeSelect",(function(e,n){var i=t.state.selectedKeys,r=t.state,o=r.keyEntities,s=r.fieldNames,a=t.props,l=a.onSelect,c=a.multiple,h=n.selected,u=n[s.key],d=!h,f=(i=d?c?s3(i,u):[u]:o3(i,u)).map((function(t){var e=W8(o,t);return e?e.node:null})).filter(Boolean);t.setUncontrolledState({selectedKeys:i}),null==l||l(i,{event:"select",selected:d,node:n,selectedNodes:f,nativeEvent:e.nativeEvent})})),N8(Znt(t),"onNodeCheck",(function(e,n,i){var r,o=t.state,s=o.keyEntities,a=o.checkedKeys,l=o.halfCheckedKeys,c=t.props,h=c.checkStrictly,u=c.onCheck,d=n.key,f={event:"check",node:n,checked:i,nativeEvent:e.nativeEvent};if(h){var p=i?s3(a,d):o3(a,d);r={checked:p,halfChecked:o3(l,d)},f.checkedNodes=p.map((function(t){return W8(s,t)})).filter(Boolean).map((function(t){return t.node})),t.setUncontrolledState({checkedKeys:p})}else{var g=m3([].concat($8(a),[d]),!0,s),m=g.checkedKeys,v=g.halfCheckedKeys;if(!i){var b=new Set(m);b.delete(d);var y=m3(Array.from(b),{checked:!1,halfCheckedKeys:v},s);m=y.checkedKeys,v=y.halfCheckedKeys}r=m,f.checkedNodes=[],f.checkedNodesPositions=[],f.halfCheckedKeys=v,m.forEach((function(t){var e=W8(s,t);if(e){var n=e.node,i=e.pos;f.checkedNodes.push(n),f.checkedNodesPositions.push({node:n,pos:i})}})),t.setUncontrolledState({checkedKeys:m},!1,{halfCheckedKeys:v})}null==u||u(r,f)})),N8(Znt(t),"onNodeLoad",(function(e){var n,i=e.key,r=W8(t.state.keyEntities,i);if(null==r||null===(n=r.children)||void 0===n||!n.length){var o=new Promise((function(n,r){t.setState((function(o){var s=o.loadedKeys,a=void 0===s?[]:s,l=o.loadingKeys,c=void 0===l?[]:l,h=t.props,u=h.loadData,d=h.onLoad;return!u||a.includes(i)||c.includes(i)?null:(u(e).then((function(){var r=s3(t.state.loadedKeys,i);null==d||d(r,{event:"load",node:e}),t.setUncontrolledState({loadedKeys:r}),t.setState((function(t){return{loadingKeys:o3(t.loadingKeys,i)}})),n()})).catch((function(e){if(t.setState((function(t){return{loadingKeys:o3(t.loadingKeys,i)}})),t.loadingRetryTimes[i]=(t.loadingRetryTimes[i]||0)+1,t.loadingRetryTimes[i]>=10){var o=t.state.loadedKeys;(0,p.Ay)(!1,"Retry for `loadData` many times but still failed. No more retry."),t.setUncontrolledState({loadedKeys:s3(o,i)}),n()}r(e)})),{loadingKeys:s3(c,i)})}))}));return o.catch((function(){})),o}})),N8(Znt(t),"onNodeMouseEnter",(function(e,n){var i=t.props.onMouseEnter;null==i||i({event:e,node:n})})),N8(Znt(t),"onNodeMouseLeave",(function(e,n){var i=t.props.onMouseLeave;null==i||i({event:e,node:n})})),N8(Znt(t),"onNodeContextMenu",(function(e,n){var i=t.props.onRightClick;i&&(e.preventDefault(),i({event:e,node:n}))})),N8(Znt(t),"onFocus",(function(){var e=t.props.onFocus;t.setState({focused:!0});for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];null==e||e.apply(void 0,i)})),N8(Znt(t),"onBlur",(function(){var e=t.props.onBlur;t.setState({focused:!1}),t.onActiveChange(null);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];null==e||e.apply(void 0,i)})),N8(Znt(t),"getTreeNodeRequiredProps",(function(){var e=t.state;return{expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],loadedKeys:e.loadedKeys||[],loadingKeys:e.loadingKeys||[],checkedKeys:e.checkedKeys||[],halfCheckedKeys:e.halfCheckedKeys||[],dragOverNodeKey:e.dragOverNodeKey,dropPosition:e.dropPosition,keyEntities:e.keyEntities}})),N8(Znt(t),"setExpandedKeys",(function(e){var n=t.state,i=Y8(n.treeData,e,n.fieldNames);t.setUncontrolledState({expandedKeys:e,flattenNodes:i},!0)})),N8(Znt(t),"onNodeExpand",(function(e,n){var i=t.state.expandedKeys,r=t.state,o=r.listChanging,s=r.fieldNames,a=t.props,l=a.onExpand,c=a.loadData,h=n.expanded,u=n[s.key];if(!o){var d=i.includes(u),f=!h;if((0,p.Ay)(h&&d||!h&&!d,"Expand state not sync with index check"),i=f?s3(i,u):o3(i,u),t.setExpandedKeys(i),null==l||l(i,{node:n,expanded:f,nativeEvent:e.nativeEvent}),f&&c){var g=t.onNodeLoad(n);g&&g.then((function(){var e=Y8(t.state.treeData,i,s);t.setUncontrolledState({flattenNodes:e})})).catch((function(){var e=o3(t.state.expandedKeys,u);t.setExpandedKeys(e)}))}}})),N8(Znt(t),"onListChangeStart",(function(){t.setUncontrolledState({listChanging:!0})})),N8(Znt(t),"onListChangeEnd",(function(){setTimeout((function(){t.setUncontrolledState({listChanging:!1})}))})),N8(Znt(t),"onActiveChange",(function(e){var n=t.state.activeKey,i=t.props,r=i.onActiveChange,o=i.itemScrollOffset,s=void 0===o?0:o;n!==e&&(t.setState({activeKey:e}),null!==e&&t.scrollTo({key:e,offset:s}),null==r||r(e))})),N8(Znt(t),"getActiveItem",(function(){var e=t.state,n=e.activeKey,i=e.flattenNodes;return null===n?null:i.find((function(t){return t.key===n}))||null})),N8(Znt(t),"offsetActiveKey",(function(e){var n=t.state,i=n.flattenNodes,r=n.activeKey,o=i.findIndex((function(t){return t.key===r}));-1===o&&e<0&&(o=i.length);var s=i[o=(o+e+i.length)%i.length];if(s){var a=s.key;t.onActiveChange(a)}else t.onActiveChange(null)})),N8(Znt(t),"onKeyDown",(function(e){var n=t.state,i=n.activeKey,r=n.expandedKeys,o=n.checkedKeys,s=n.fieldNames,a=t.props,l=a.onKeyDown,c=a.checkable,h=a.selectable;switch(e.which){case Pe.UP:t.offsetActiveKey(-1),e.preventDefault();break;case Pe.DOWN:t.offsetActiveKey(1),e.preventDefault()}var u=t.getActiveItem();if(u&&u.data){var d=t.getTreeNodeRequiredProps(),f=!1===u.data.isLeaf||!!(u.data[s.children]||[]).length,p=J8(j8(j8({},U8(i,d)),{},{data:u.data,active:!0}));switch(e.which){case Pe.LEFT:f&&r.includes(i)?t.onNodeExpand({},p):u.parent&&t.onActiveChange(u.parent.key),e.preventDefault();break;case Pe.RIGHT:f&&!r.includes(i)?t.onNodeExpand({},p):u.children&&u.children.length&&t.onActiveChange(u.children[0].key),e.preventDefault();break;case Pe.ENTER:case Pe.SPACE:!c||p.disabled||!1===p.checkable||p.disableCheckbox?c||!h||p.disabled||!1===p.selectable||t.onNodeSelect({},p):t.onNodeCheck({},p,!o.includes(i))}}null==l||l(e)})),N8(Znt(t),"setUncontrolledState",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t.destroyed){var r=!1,o=!0,s={};Object.keys(e).forEach((function(n){t.props.hasOwnProperty(n)?o=!1:(r=!0,s[n]=e[n])})),!r||n&&!o||t.setState(j8(j8({},s),i))}})),N8(Znt(t),"scrollTo",(function(e){t.listRef.current.scrollTo(e)})),t}return function(t,e,n){e&&Knt(t.prototype,e),n&&Knt(t,n),Object.defineProperty(t,"prototype",{writable:!1})}(i,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var t=this.props,e=t.activeKey,n=t.itemScrollOffset,i=void 0===n?0:n;void 0!==e&&e!==this.state.activeKey&&(this.setState({activeKey:e}),null!==e&&this.scrollTo({key:e,offset:i}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var t,e=this.state,i=e.focused,r=e.flattenNodes,o=e.keyEntities,s=e.draggingNodeKey,a=e.activeKey,l=e.dropLevelOffset,c=e.dropContainerKey,h=e.dropTargetKey,u=e.dropPosition,d=e.dragOverNodeKey,f=e.indent,p=this.props,g=p.prefixCls,m=p.className,v=p.style,b=p.showLine,y=p.focusable,w=p.tabIndex,O=void 0===w?0:w,S=p.selectable,x=p.showIcon,k=p.icon,C=p.switcherIcon,A=p.draggable,M=p.checkable,E=p.checkStrictly,P=p.disabled,T=p.motion,$=p.loadData,D=p.filterTreeNode,R=p.height,B=p.itemHeight,N=p.scrollWidth,L=p.virtual,j=p.titleRender,_=p.dropIndicatorRender,I=p.onContextMenu,z=p.onScroll,Q=p.direction,H=p.rootClassName,V=p.rootStyle,W=De(this.props,{aria:!0,data:!0});A&&(t="object"===D8(A)?A:"function"==typeof A?{nodeDraggable:A}:{});var F={prefixCls:g,selectable:S,showIcon:x,icon:k,switcherIcon:C,draggable:t,draggingNodeKey:s,checkable:M,checkStrictly:E,disabled:P,keyEntities:o,dropLevelOffset:l,dropContainerKey:c,dropTargetKey:h,dropPosition:u,dragOverNodeKey:d,indent:f,direction:Q,dropIndicatorRender:_,loadData:$,filterTreeNode:D,titleRender:j,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return n.createElement(z8.Provider,{value:F},n.createElement("div",{className:At()(g,m,H,N8(N8(N8({},"".concat(g,"-show-line"),b),"".concat(g,"-focused"),i),"".concat(g,"-active-focused"),null!==a)),style:V},n.createElement(pit,R8({ref:this.listRef,prefixCls:g,style:v,data:r,disabled:P,selectable:S,checkable:!!M,motion:T,dragging:null!==s,height:R,itemHeight:B,virtual:L,focusable:y,focused:i,tabIndex:O,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:I,onScroll:z,scrollWidth:N},this.getTreeNodeRequiredProps(),W))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n,i=e.prevProps,r={prevProps:t};function o(e){return!i&&t.hasOwnProperty(e)||i&&i[e]!==t[e]}var s=e.fieldNames;if(o("fieldNames")&&(s=K8(t.fieldNames),r.fieldNames=s),o("treeData")?n=t.treeData:o("children")&&((0,p.Ay)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=Z8(t.children)),n){r.treeData=n;var a=G8(n,{fieldNames:s});r.keyEntities=j8(N8({},ait,cit),a.keyEntities)}var l,c=r.keyEntities||e.keyEntities;if(o("expandedKeys")||i&&o("autoExpandParent"))r.expandedKeys=t.autoExpandParent||!i&&t.defaultExpandParent?f3(t.expandedKeys,c):t.expandedKeys;else if(!i&&t.defaultExpandAll){var h=j8({},c);delete h[ait];var u=[];Object.keys(h).forEach((function(t){var e=h[t];e.children&&e.children.length&&u.push(e.key)})),r.expandedKeys=u}else!i&&t.defaultExpandedKeys&&(r.expandedKeys=t.autoExpandParent||t.defaultExpandParent?f3(t.defaultExpandedKeys,c):t.defaultExpandedKeys);if(r.expandedKeys||delete r.expandedKeys,n||r.expandedKeys){var d=Y8(n||e.treeData,r.expandedKeys||e.expandedKeys,s);r.flattenNodes=d}if(t.selectable&&(o("selectedKeys")?r.selectedKeys=u3(t.selectedKeys,t):!i&&t.defaultSelectedKeys&&(r.selectedKeys=u3(t.defaultSelectedKeys,t))),t.checkable&&(o("checkedKeys")?l=d3(t.checkedKeys)||{}:!i&&t.defaultCheckedKeys?l=d3(t.defaultCheckedKeys)||{}:n&&(l=d3(t.checkedKeys)||{checkedKeys:e.checkedKeys,halfCheckedKeys:e.halfCheckedKeys}),l)){var f=l,g=f.checkedKeys,m=void 0===g?[]:g,v=f.halfCheckedKeys,b=void 0===v?[]:v;if(!t.checkStrictly){var y=m3(m,!0,c);m=y.checkedKeys,b=y.halfCheckedKeys}r.checkedKeys=m,r.halfCheckedKeys=b}return o("loadedKeys")&&(r.loadedKeys=t.loadedKeys),r}}]),i}(n.Component);N8(git,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:function(t){var e=t.dropPosition,i=t.dropLevelOffset,r=t.indent,o={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(e){case-1:o.top=0,o.left=-i*r;break;case 1:o.bottom=0,o.left=-i*r;break;case 0:o.bottom=0,o.left=r}return n.default.createElement("div",{style:o})},allowDrop:function(){return!0},expandAction:!1}),N8(git,"TreeNode",r3);var mit=git,vit={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},bit=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:vit}))},yit=n.forwardRef(bit),wit={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},Oit=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:wit}))},Sit=n.forwardRef(Oit),xit={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},kit=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:xit}))},Cit=n.forwardRef(kit),Ait={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},Mit=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:Ait}))},Eit=n.forwardRef(Mit);const Pit=({treeCls:t,treeNodeCls:e,directoryNodeSelectedBg:n,directoryNodeSelectedColor:i,motionDurationMid:r,borderRadius:o,controlItemBgHover:s})=>({[`${t}${t}-directory ${e}`]:{[`${t}-node-content-wrapper`]:{position:"static",[`> *:not(${t}-drop-indicator)`]:{position:"relative"},"&:hover":{background:"transparent"},"&:before":{position:"absolute",inset:0,transition:`background-color ${r}`,content:'""',borderRadius:o},"&:hover:before":{background:s}},[`${t}-switcher, ${t}-checkbox, ${t}-draggable-icon`]:{zIndex:1},"&-selected":{[`${t}-switcher, ${t}-draggable-icon`]:{color:i},[`${t}-node-content-wrapper`]:{color:i,background:"transparent","&:before, &:hover:before":{background:n}}}}}),Tit=new h.Mo("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),$it=(t,e)=>({[`.${t}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${e.motionDurationSlow}`}}}),Dit=(t,e)=>({[`.${t}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:e.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${(0,h.zA)(e.lineWidthBold)} solid ${e.colorPrimary}`,borderRadius:"50%",content:'""'}}}),Rit=(t,e)=>{const{treeCls:n,treeNodeCls:i,treeNodePadding:r,titleHeight:o,indentSize:s,nodeSelectedBg:a,nodeHoverBg:l,colorTextQuaternary:c,controlItemBgActiveDisabled:u}=e;return{[n]:Object.assign(Object.assign({},(0,J.dF)(e)),{background:e.colorBgContainer,borderRadius:e.borderRadius,transition:`background-color ${e.motionDurationSlow}`,"&-rtl":{direction:"rtl"},[`&${n}-rtl ${n}-switcher_close ${n}-switcher-icon svg`]:{transform:"rotate(90deg)"},[`&-focused:not(:hover):not(${n}-active-focused)`]:Object.assign({},(0,J.jk)(e)),[`${n}-list-holder-inner`]:{alignItems:"flex-start"},[`&${n}-block-node`]:{[`${n}-list-holder-inner`]:{alignItems:"stretch",[`${n}-node-content-wrapper`]:{flex:"auto"},[`${i}.dragging:after`]:{position:"absolute",inset:0,border:`1px solid ${e.colorPrimary}`,opacity:0,animationName:Tit,animationDuration:e.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none",borderRadius:e.borderRadius}}},[i]:{display:"flex",alignItems:"flex-start",marginBottom:r,lineHeight:(0,h.zA)(o),position:"relative","&:before":{content:'""',position:"absolute",zIndex:1,insetInlineStart:0,width:"100%",top:"100%",height:r},[`&-disabled ${n}-node-content-wrapper`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}},[`${n}-checkbox-disabled + ${n}-node-selected,&${i}-disabled${i}-selected ${n}-node-content-wrapper`]:{backgroundColor:u},[`${n}-checkbox-disabled`]:{pointerEvents:"unset"},[`&:not(${i}-disabled)`]:{[`${n}-node-content-wrapper`]:{"&:hover":{color:e.nodeHoverColor}}},[`&-active ${n}-node-content-wrapper`]:{background:e.controlItemBgHover},[`&:not(${i}-disabled).filter-node ${n}-title`]:{color:e.colorPrimary,fontWeight:500},"&-draggable":{cursor:"grab",[`${n}-draggable-icon`]:{flexShrink:0,width:o,textAlign:"center",visibility:"visible",color:c},[`&${i}-disabled ${n}-draggable-icon`]:{visibility:"hidden"}}},[`${n}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:s}},[`${n}-draggable-icon`]:{visibility:"hidden"},[`${n}-switcher, ${n}-checkbox`]:{marginInlineEnd:e.calc(e.calc(o).sub(e.controlInteractiveSize)).div(2).equal()},[`${n}-switcher`]:Object.assign(Object.assign({},$it(t,e)),{position:"relative",flex:"none",alignSelf:"stretch",width:o,textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${e.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:o,height:o,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`},[`&:not(${n}-switcher-noop):hover:before`]:{backgroundColor:e.colorBgTextHover},[`&_close ${n}-switcher-icon svg`]:{transform:"rotate(-90deg)"},"&-loading-icon":{color:e.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:e.calc(o).div(2).equal(),bottom:e.calc(r).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${e.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:e.calc(e.calc(o).div(2).equal()).mul(.8).equal(),height:e.calc(o).div(2).equal(),borderBottom:`1px solid ${e.colorBorder}`,content:'""'}}}),[`${n}-node-content-wrapper`]:Object.assign(Object.assign({position:"relative",minHeight:o,paddingBlock:0,paddingInline:e.paddingXS,background:"transparent",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`},Dit(t,e)),{"&:hover":{backgroundColor:l},[`&${n}-node-selected`]:{color:e.nodeSelectedColor,backgroundColor:a},[`${n}-iconEle`]:{display:"inline-block",width:o,height:o,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}}),[`${n}-unselectable ${n}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${i}.drop-container > [draggable]`]:{boxShadow:`0 0 0 2px ${e.colorPrimary}`},"&-show-line":{[`${n}-indent-unit`]:{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:e.calc(o).div(2).equal(),bottom:e.calc(r).mul(-1).equal(),borderInlineEnd:`1px solid ${e.colorBorder}`,content:'""'},"&-end:before":{display:"none"}},[`${n}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${i}-leaf-last ${n}-switcher-leaf-line:before`]:{top:"auto !important",bottom:"auto !important",height:`${(0,h.zA)(e.calc(o).div(2).equal())} !important`}})}},Bit=(t,e,n=!0)=>{const i=`.${t}`,r=`${i}-treenode`,o=e.calc(e.paddingXS).div(2).equal(),s=(0,Ji.oX)(e,{treeCls:i,treeNodeCls:r,treeNodePadding:o});return[Rit(t,s),n&&Pit(s)].filter(Boolean)};var Nit=(0,Ui.OF)("Tree",((t,{prefixCls:e})=>[{[t.componentCls]:T3(`${e}-checkbox`,t)},Bit(e,t),S9(t)]),(t=>{const{colorTextLightSolid:e,colorPrimary:n}=t;return Object.assign(Object.assign({},(t=>{const{controlHeightSM:e,controlItemBgHover:n,controlItemBgActive:i}=t;return{titleHeight:e,indentSize:e,nodeHoverBg:n,nodeHoverColor:t.colorText,nodeSelectedBg:i,nodeSelectedColor:t.colorText}})(t)),{directoryNodeSelectedColor:e,directoryNodeSelectedBg:n})})),Lit=function(t){const{dropPosition:e,dropLevelOffset:i,prefixCls:r,indent:o,direction:s="ltr"}=t,a="ltr"===s?"left":"right",l="ltr"===s?"right":"left",c={[a]:-i*o+4,[l]:0};switch(e){case-1:c.top=-3;break;case 1:c.bottom=-3;break;default:c.bottom=-3,c[a]=o+4}return n.default.createElement("div",{style:c,className:`${r}-drop-indicator`})},jit={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},_it=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:jit}))},Iit=n.forwardRef(_it),zit={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},Qit=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:zit}))},Hit=n.forwardRef(Qit),Vit={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},Wit=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:Vit}))},Fit=n.forwardRef(Wit),qit=t=>{const{prefixCls:e,switcherIcon:i,treeNodeProps:r,showLine:o,switcherLoadingIcon:s}=t,{isLeaf:a,expanded:l,loading:c}=r;if(c)return n.isValidElement(s)?s:n.createElement(Cc.A,{className:`${e}-switcher-loading-icon`});let h;if(o&&"object"==typeof o&&(h=o.showLeafIcon),a){if(!o)return null;if("boolean"!=typeof h&&h){const t="function"==typeof h?h(r):h,i=`${e}-switcher-line-custom-icon`;return n.isValidElement(t)?(0,Oa.Ob)(t,{className:At()(t.props.className||"",i)}):t}return h?n.createElement(yit,{className:`${e}-switcher-line-icon`}):n.createElement("span",{className:`${e}-switcher-leaf-line`})}const u=`${e}-switcher-icon`,d="function"==typeof i?i(r):i;return n.isValidElement(d)?(0,Oa.Ob)(d,{className:At()(d.props.className||"",u)}):void 0!==d?d:o?l?n.createElement(Hit,{className:`${e}-switcher-line-icon`}):n.createElement(Fit,{className:`${e}-switcher-line-icon`}):n.createElement(Iit,{className:u})};const Xit=n.default.forwardRef(((t,e)=>{var i;const{getPrefixCls:r,direction:o,virtual:s,tree:a}=n.default.useContext(c.QO),{prefixCls:l,className:h,showIcon:u=!1,showLine:d,switcherIcon:f,switcherLoadingIcon:p,blockNode:g=!1,children:m,checkable:v=!1,selectable:b=!0,draggable:y,motion:w,style:O}=t,S=r("tree",l),x=r(),k=null!=w?w:Object.assign(Object.assign({},jt(x)),{motionAppear:!1}),C=Object.assign(Object.assign({},t),{checkable:v,selectable:b,showIcon:u,motion:k,blockNode:g,showLine:Boolean(d),dropIndicatorRender:Lit}),[A,M,E]=Nit(S),[,P]=(0,Y.Ay)(),T=P.paddingXS/2+((null===(i=P.Tree)||void 0===i?void 0:i.titleHeight)||P.controlHeightSM),$=n.default.useMemo((()=>{if(!y)return!1;let t={};switch(typeof y){case"function":t.nodeDraggable=y;break;case"object":t=Object.assign({},y)}return!1!==t.icon&&(t.icon=t.icon||n.default.createElement(Eit,null)),t}),[y]);return A(n.default.createElement(mit,Object.assign({itemHeight:T,ref:e,virtual:s},C,{style:Object.assign(Object.assign({},null==a?void 0:a.style),O),prefixCls:S,className:At()({[`${S}-icon-hide`]:!u,[`${S}-block-node`]:g,[`${S}-unselectable`]:!b,[`${S}-rtl`]:"rtl"===o},null==a?void 0:a.className,h,M,E),direction:o,checkable:v?n.default.createElement("span",{className:`${S}-checkbox-inner`}):v,selectable:b,switcherIcon:t=>n.default.createElement(qit,{prefixCls:S,switcherIcon:f,switcherLoadingIcon:p,treeNodeProps:t,showLine:d}),draggable:$}),m))}));var Kit=Xit;function Zit(t,e,n){const{key:i,children:r}=n;t.forEach((function(t){const o=t[i],s=t[r];!1!==e(o,t)&&Zit(s||[],e,n)}))}function Yit(t,e,n){const i=(0,l.A)(e),r=[];return Zit(t,((t,e)=>{const n=i.indexOf(t);return-1!==n&&(r.push(e),i.splice(n,1)),!!i.length}),K8(n)),r}var Git=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n};function Uit(t){const{isLeaf:e,expanded:i}=t;return e?n.createElement(yit,null):i?n.createElement(Sit,null):n.createElement(Cit,null)}function Jit({treeData:t,children:e}){return t||Z8(e)}const trt=(t,e)=>{var{defaultExpandAll:i,defaultExpandParent:r,defaultExpandedKeys:o}=t,s=Git(t,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const a=n.useRef(null),h=n.useRef(null),[u,d]=n.useState(s.selectedKeys||s.defaultSelectedKeys||[]),[f,p]=n.useState((()=>(()=>{const{keyEntities:t}=G8(Jit(s));let e;return e=i?Object.keys(t):r?f3(s.expandedKeys||o||[],t):s.expandedKeys||o||[],e})()));n.useEffect((()=>{"selectedKeys"in s&&d(s.selectedKeys)}),[s.selectedKeys]),n.useEffect((()=>{"expandedKeys"in s&&p(s.expandedKeys)}),[s.expandedKeys]);const{getPrefixCls:g,direction:m}=n.useContext(c.QO),{prefixCls:v,className:b,showIcon:y=!0,expandAction:w="click"}=s,O=Git(s,["prefixCls","className","showIcon","expandAction"]),S=g("tree",v),x=At()(`${S}-directory`,{[`${S}-directory-rtl`]:"rtl"===m},b);return n.createElement(Kit,Object.assign({icon:Uit,ref:e,blockNode:!0},O,{showIcon:y,expandAction:w,prefixCls:S,className:x,expandedKeys:f,selectedKeys:u,onSelect:(t,e)=>{var n;const{multiple:i,fieldNames:r}=s,{node:o,nativeEvent:c}=e,{key:u=""}=o,p=Jit(s),g=Object.assign(Object.assign({},e),{selected:!0}),m=(null==c?void 0:c.ctrlKey)||(null==c?void 0:c.metaKey),v=null==c?void 0:c.shiftKey;let b;i&&m?(b=t,a.current=u,h.current=b,g.selectedNodes=Yit(p,b,r)):i&&v?(b=Array.from(new Set([].concat((0,l.A)(h.current||[]),(0,l.A)(function({treeData:t,expandedKeys:e,startKey:n,endKey:i,fieldNames:r}){const o=[];let s=0;return n&&n===i?[n]:n&&i?(Zit(t,(t=>{if(2===s)return!1;if(function(t){return t===n||t===i}(t)){if(o.push(t),0===s)s=1;else if(1===s)return s=2,!1}else 1===s&&o.push(t);return e.includes(t)}),K8(r)),o):[]}({treeData:p,expandedKeys:f,startKey:u,endKey:a.current,fieldNames:r}))))),g.selectedNodes=Yit(p,b,r)):(b=[u],a.current=u,h.current=b,g.selectedNodes=Yit(p,b,r)),null===(n=s.onSelect)||void 0===n||n.call(s,b,g),"selectedKeys"in s||d(b)},onExpand:(t,e)=>{var n;return"expandedKeys"in s||p(t),null===(n=s.onExpand)||void 0===n?void 0:n.call(s,t,e)}}))};var ert=n.forwardRef(trt);const nrt=Kit;nrt.DirectoryTree=ert,nrt.TreeNode=r3;var irt=nrt,rrt=t=>{const{value:e,filterSearch:i,tablePrefixCls:r,locale:o,onChange:s}=t;return i?n.createElement("div",{className:`${r}-filter-dropdown-search`},n.createElement(Gc,{prefix:n.createElement(bh,null),placeholder:o.filterSearchPlaceholder,onChange:s,value:e,htmlSize:1,className:`${r}-filter-dropdown-search-input`})):null};const ort=t=>{const{keyCode:e}=t;e===Pe.ENTER&&t.stopPropagation()};var srt=n.forwardRef(((t,e)=>n.createElement("div",{className:t.className,onClick:t=>t.stopPropagation(),onKeyDown:ort,ref:e},t.children)));function art(t){let e=[];return(t||[]).forEach((({value:t,children:n})=>{e.push(t),n&&(e=[].concat((0,l.A)(e),(0,l.A)(art(n))))})),e}function lrt(t,e){return("string"==typeof e||"number"==typeof e)&&(null==e?void 0:e.toString().toLowerCase().includes(t.trim().toLowerCase()))}function crt({filters:t,prefixCls:e,filteredKeys:i,filterMultiple:r,searchValue:o,filterSearch:s}){return t.map(((t,a)=>{const l=String(t.value);if(t.children)return{key:l||a,label:t.text,popupClassName:`${e}-dropdown-submenu`,children:crt({filters:t.children,prefixCls:e,filteredKeys:i,filterMultiple:r,searchValue:o,filterSearch:s})};const c=r?_3:I7,h={key:void 0!==t.value?l:a,label:n.createElement(n.Fragment,null,n.createElement(c,{checked:i.includes(l)}),n.createElement("span",null,t.text))};return o.trim()?"function"==typeof s?s(o,t)?h:null:lrt(o,t.text)?h:null:h}))}function hrt(t){return t||[]}var urt=t=>{var e,i,r,o;const{tablePrefixCls:s,prefixCls:l,column:h,dropdownPrefixCls:u,columnKey:d,filterOnClose:f,filterMultiple:p,filterMode:g="menu",filterSearch:m=!1,filterState:v,triggerFilter:b,locale:y,children:w,getPopupContainer:O,rootClassName:S}=t,{filterResetToDefaultFilteredValue:x,defaultFilteredValue:k,filterDropdownProps:C={},filterDropdownOpen:A,filterDropdownVisible:M,onFilterDropdownVisibleChange:E,onFilterDropdownOpenChange:P}=h,[T,$]=n.useState(!1),D=!(!v||!(null===(e=v.filteredKeys)||void 0===e?void 0:e.length)&&!v.forceFiltered),R=t=>{var e;$(t),null===(e=C.onOpenChange)||void 0===e||e.call(C,t),null==P||P(t),null==E||E(t)},B=null!==(o=null!==(r=null!==(i=C.open)&&void 0!==i?i:A)&&void 0!==r?r:M)&&void 0!==o?o:T,N=null==v?void 0:v.filteredKeys,[L,j]=function(t){const e=n.useRef(t),i=ntt();return[()=>e.current,t=>{e.current=t,i()}]}(hrt(N)),_=({selectedKeys:t})=>{j(t)},I=(t,{node:e,checked:n})=>{_(p?{selectedKeys:t}:{selectedKeys:n&&e.key?[e.key]:[]})};n.useEffect((()=>{T&&_({selectedKeys:hrt(N)})}),[N]);const[z,Q]=n.useState([]),H=t=>{Q(t)},[V,W]=n.useState(""),q=t=>{const{value:e}=t.target;W(e)};n.useEffect((()=>{T||W("")}),[T]);const X=t=>{const e=(null==t?void 0:t.length)?t:null;return null!==e||v&&v.filteredKeys?(0,F.A)(e,null==v?void 0:v.filteredKeys,!0)?null:void b({column:h,key:d,filteredKeys:e}):null},K=()=>{R(!1),X(L())},Z=({confirm:t,closeDropdown:e}={confirm:!1,closeDropdown:!1})=>{t&&X([]),e&&R(!1),W(""),j(x?(k||[]).map((t=>String(t))):[])},Y=At()({[`${u}-menu-without-submenu`]:(G=h.filters||[],!G.some((({children:t})=>t)))});var G;const U=t=>{if(t.target.checked){const t=art(null==h?void 0:h.filters).map((t=>String(t)));j(t)}else j([])},J=({filters:t})=>(t||[]).map(((t,e)=>{const n=String(t.value),i={title:t.text,key:void 0!==t.value?n:String(e)};return t.children&&(i.children=J({filters:t.children})),i})),tt=t=>{var e;return Object.assign(Object.assign({},t),{text:t.title,value:t.key,children:(null===(e=t.children)||void 0===e?void 0:e.map((t=>tt(t))))||[]})};let et;const{direction:nt,renderEmpty:it}=n.useContext(c.QO);if("function"==typeof h.filterDropdown)et=h.filterDropdown({prefixCls:`${u}-custom`,setSelectedKeys:t=>_({selectedKeys:t}),selectedKeys:L(),confirm:({closeDropdown:t}={closeDropdown:!0})=>{t&&R(!1),X(L())},clearFilters:Z,filters:h.filters,visible:B,close:()=>{R(!1)}});else if(h.filterDropdown)et=h.filterDropdown;else{const t=L()||[],e=()=>{var e,i;const r=null!==(e=null==it?void 0:it("Table.filter"))&&void 0!==e?e:n.createElement(ttt,{image:ttt.PRESENTED_IMAGE_SIMPLE,description:y.filterEmptyText,styles:{image:{height:24}},style:{margin:0,padding:"16px 0"}});if(0===(h.filters||[]).length)return r;if("tree"===g)return n.createElement(n.Fragment,null,n.createElement(rrt,{filterSearch:m,value:V,onChange:q,tablePrefixCls:s,locale:y}),n.createElement("div",{className:`${s}-filter-dropdown-tree`},p?n.createElement(_3,{checked:t.length===art(h.filters).length,indeterminate:t.length>0&&t.length<art(h.filters).length,className:`${s}-filter-dropdown-checkall`,onChange:U},null!==(i=null==y?void 0:y.filterCheckall)&&void 0!==i?i:null==y?void 0:y.filterCheckAll):null,n.createElement(irt,{checkable:!0,selectable:!1,blockNode:!0,multiple:p,checkStrictly:!p,className:`${u}-menu`,onCheck:I,checkedKeys:t,selectedKeys:t,showIcon:!1,treeData:J({filters:h.filters}),autoExpandParent:!0,defaultExpandAll:!0,filterTreeNode:V.trim()?t=>"function"==typeof m?m(V,tt(t)):lrt(V,t.title):void 0})));const o=crt({filters:h.filters||[],filterSearch:m,prefixCls:l,filteredKeys:L(),filterMultiple:p,searchValue:V}),a=o.every((t=>null===t));return n.createElement(n.Fragment,null,n.createElement(rrt,{filterSearch:m,value:V,onChange:q,tablePrefixCls:s,locale:y}),a?r:n.createElement(Z9,{selectable:!0,multiple:p,prefixCls:`${u}-menu`,className:Y,onSelect:_,onDeselect:_,selectedKeys:t,getPopupContainer:O,openKeys:z,onOpenChange:H,items:o}))},i=()=>x?(0,F.A)((k||[]).map((t=>String(t))),t,!0):0===t.length;et=n.createElement(n.Fragment,null,e(),n.createElement("div",{className:`${l}-dropdown-btns`},n.createElement(a.Ay,{type:"link",size:"small",disabled:i(),onClick:()=>Z()},y.filterReset),n.createElement(a.Ay,{type:"primary",size:"small",onClick:K},y.filterConfirm)))}h.filterDropdown&&(et=n.createElement(w9,{selectable:void 0},et)),et=n.createElement(srt,{className:`${l}-dropdown`},et);const rt=Fi({trigger:["click"],placement:"rtl"===nt?"bottomLeft":"bottomRight",children:(()=>{let t;return t="function"==typeof h.filterIcon?h.filterIcon(D):h.filterIcon?h.filterIcon:n.createElement(Xnt,null),n.createElement("span",{role:"button",tabIndex:-1,className:At()(`${l}-trigger`,{active:D}),onClick:t=>{t.stopPropagation()}},t)})(),getPopupContainer:O},Object.assign(Object.assign({},C),{rootClassName:At()(S,C.rootClassName),open:B,onOpenChange:(t,e)=>{"trigger"===e.source&&(t&&void 0!==N&&j(hrt(N)),R(t),t||h.filterDropdown||!f||K())},popupRender:()=>"function"==typeof(null==C?void 0:C.dropdownRender)?C.dropdownRender(et):et}));return n.createElement("div",{className:`${l}-column`},n.createElement("span",{className:`${s}-column-title`},w),n.createElement(S7,Object.assign({},rt)))};const drt=(t,e,n)=>{let i=[];return(t||[]).forEach(((t,r)=>{var o;const s=Vnt(r,n),a=void 0!==t.filterDropdown;if(t.filters||a||"onFilter"in t)if("filteredValue"in t){let e=t.filteredValue;a||(e=null!==(o=null==e?void 0:e.map(String))&&void 0!==o?o:e),i.push({column:t,key:Hnt(t,s),filteredKeys:e,forceFiltered:t.filtered})}else i.push({column:t,key:Hnt(t,s),filteredKeys:e&&t.defaultFilteredValue?t.defaultFilteredValue:void 0,forceFiltered:t.filtered});"children"in t&&(i=[].concat((0,l.A)(i),(0,l.A)(drt(t.children,e,s))))})),i};function frt(t,e,i,r,o,s,a,l,c){return i.map(((i,h)=>{const u=Vnt(h,l),{filterOnClose:d=!0,filterMultiple:f=!0,filterMode:p,filterSearch:g}=i;let m=i;if(m.filters||m.filterDropdown){const l=Hnt(m,u),h=r.find((({key:t})=>l===t));m=Object.assign(Object.assign({},m),{title:r=>n.createElement(urt,{tablePrefixCls:t,prefixCls:`${t}-filter`,dropdownPrefixCls:e,column:m,columnKey:l,filterState:h,filterOnClose:d,filterMultiple:f,filterMode:p,filterSearch:g,triggerFilter:s,locale:o,getPopupContainer:a,rootClassName:c},Wnt(i.title,r))})}return"children"in m&&(m=Object.assign(Object.assign({},m),{children:frt(t,e,m.children,r,o,s,a,u,c)})),m}))}const prt=t=>{const e={};return t.forEach((({key:t,filteredKeys:n,column:i})=>{const r=t,{filters:o,filterDropdown:s}=i;if(s)e[r]=n||null;else if(Array.isArray(n)){const t=art(o);e[r]=t.filter((t=>n.includes(String(t))))}else e[r]=null})),e},grt=(t,e,n)=>e.reduce(((t,i)=>{const{column:{onFilter:r,filters:o},filteredKeys:s}=i;return r&&s&&s.length?t.map((t=>Object.assign({},t))).filter((t=>s.some((i=>{const s=art(o),a=s.findIndex((t=>String(t)===String(i))),l=-1!==a?s[a]:i;return t[n]&&(t[n]=grt(t[n],e,n)),r(l,t)})))):t}),t),mrt=t=>t.flatMap((t=>"children"in t?[t].concat((0,l.A)(mrt(t.children||[]))):[t]));var vrt=t=>{const{prefixCls:e,dropdownPrefixCls:i,mergedColumns:r,onFilterChange:o,getPopupContainer:s,locale:a,rootClassName:l}=t,c=(v(),n.useMemo((()=>mrt(r||[])),[r])),[h,u]=n.useState((()=>drt(c,!0))),d=n.useMemo((()=>{const t=drt(c,!1);if(0===t.length)return t;let e=!0,n=!0;if(t.forEach((({filteredKeys:t})=>{void 0!==t?e=!1:n=!1})),e){const t=(c||[]).map(((t,e)=>Hnt(t,Vnt(e))));return h.filter((({key:e})=>t.includes(e))).map((e=>{const n=c[t.findIndex((t=>t===e.key))];return Object.assign(Object.assign({},e),{column:Object.assign(Object.assign({},e.column),n),forceFiltered:n.filtered})}))}return t}),[c,h]),f=n.useMemo((()=>prt(d)),[d]),p=t=>{const e=d.filter((({key:e})=>e!==t.key));e.push(t),u(e),o(prt(e),e)};return[t=>frt(e,i,t,d,a,p,s,void 0,l),d,f]};const brt=10;var yrt=function(t,e,i){const r=i&&"object"==typeof i?i:{},{total:o=0}=r,s=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(r,["total"]),[a,l]=(0,n.useState)((()=>({current:"defaultCurrent"in s?s.defaultCurrent:1,pageSize:"defaultPageSize"in s?s.defaultPageSize:brt}))),c=Fi(a,s,{total:o>0?o:t}),h=Math.ceil((o||t)/c.pageSize);c.current>h&&(c.current=h||1);const u=(t,e)=>{l({current:null!=t?t:1,pageSize:e||c.pageSize})};return!1===i?[{},()=>{}]:[Object.assign(Object.assign({},c),{onChange:(t,n)=>{var r;i&&(null===(r=i.onChange)||void 0===r||r.call(i,t,n)),u(t,n),e(t,n||(null==c?void 0:c.pageSize))}}),u]},wrt={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},Ort=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:wrt}))},Srt=n.forwardRef(Ort),xrt={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},krt=function(t,e){return n.createElement(ft.A,(0,ut.A)({},t,{ref:e,icon:xrt}))},Crt=n.forwardRef(krt);const Art="ascend",Mrt="descend",Ert=t=>"object"==typeof t.sorter&&"number"==typeof t.sorter.multiple&&t.sorter.multiple,Prt=t=>"function"==typeof t?t:!(!t||"object"!=typeof t||!t.compare)&&t.compare,Trt=(t,e,n)=>{let i=[];const r=(t,e)=>{i.push({column:t,key:Hnt(t,e),multiplePriority:Ert(t),sortOrder:t.sortOrder})};return(t||[]).forEach(((t,o)=>{const s=Vnt(o,n);t.children?("sortOrder"in t&&r(t,s),i=[].concat((0,l.A)(i),(0,l.A)(Trt(t.children,e,s)))):t.sorter&&("sortOrder"in t?r(t,s):e&&t.defaultSortOrder&&i.push({column:t,key:Hnt(t,s),multiplePriority:Ert(t),sortOrder:t.defaultSortOrder}))})),i},$rt=(t,e,i,r,o,s,a,l)=>{const c=(e||[]).map(((e,c)=>{const h=Vnt(c,l);let u=e;if(u.sorter){const l=u.sortDirections||o,c=void 0===u.showSorterTooltip?a:u.showSorterTooltip,d=Hnt(u,h),f=i.find((({key:t})=>t===d)),p=f?f.sortOrder:null,g=((t,e)=>e?t[t.indexOf(e)+1]:t[0])(l,p);let m;if(e.sortIcon)m=e.sortIcon({sortOrder:p});else{const e=l.includes(Art)&&n.createElement(Crt,{className:At()(`${t}-column-sorter-up`,{active:p===Art})}),i=l.includes(Mrt)&&n.createElement(Srt,{className:At()(`${t}-column-sorter-down`,{active:p===Mrt})});m=n.createElement("span",{className:At()(`${t}-column-sorter`,{[`${t}-column-sorter-full`]:!(!e||!i)})},n.createElement("span",{className:`${t}-column-sorter-inner`,"aria-hidden":"true"},e,i))}const{cancelSort:v,triggerAsc:b,triggerDesc:y}=s||{};let w=v;g===Mrt?w=y:g===Art&&(w=b);const O="object"==typeof c?Object.assign({title:w},c):{title:w};u=Object.assign(Object.assign({},u),{className:At()(u.className,{[`${t}-column-sort`]:p}),title:i=>{const r=`${t}-column-sorters`,o=n.createElement("span",{className:`${t}-column-title`},Wnt(e.title,i)),s=n.createElement("div",{className:r},o,m);return c?"boolean"!=typeof c&&"sorter-icon"===(null==c?void 0:c.target)?n.createElement("div",{className:`${r} ${t}-column-sorters-tooltip-target-sorter`},o,n.createElement($a,Object.assign({},O),m)):n.createElement($a,Object.assign({},O),s):s},onHeaderCell:n=>{var i;const o=(null===(i=e.onHeaderCell)||void 0===i?void 0:i.call(e,n))||{},s=o.onClick,a=o.onKeyDown;o.onClick=t=>{r({column:e,key:d,sortOrder:g,multiplePriority:Ert(e)}),null==s||s(t)},o.onKeyDown=t=>{t.keyCode===Pe.ENTER&&(r({column:e,key:d,sortOrder:g,multiplePriority:Ert(e)}),null==a||a(t))};const l=(t=>{const e=Wnt(t,{});return"[object Object]"===Object.prototype.toString.call(e)?"":e})(e.title),c=null==l?void 0:l.toString();return p&&(o["aria-sort"]="ascend"===p?"ascending":"descending"),o["aria-label"]=c||"",o.className=At()(o.className,`${t}-column-has-sorters`),o.tabIndex=0,e.ellipsis&&(o.title=(null!=l?l:"").toString()),o}})}return"children"in u&&(u=Object.assign(Object.assign({},u),{children:$rt(t,u.children,i,r,o,s,a,h)})),u}));return c},Drt=t=>{const{column:e,sortOrder:n}=t;return{column:e,order:n,field:e.dataIndex,columnKey:e.key}},Rrt=t=>{const e=t.filter((({sortOrder:t})=>t)).map(Drt);if(0===e.length&&t.length){const e=t.length-1;return Object.assign(Object.assign({},Drt(t[e])),{column:void 0,order:void 0,field:void 0,columnKey:void 0})}return e.length<=1?e[0]||{}:e},Brt=(t,e,n)=>{const i=e.slice().sort(((t,e)=>e.multiplePriority-t.multiplePriority)),r=t.slice(),o=i.filter((({column:{sorter:t},sortOrder:e})=>Prt(t)&&e));return o.length?r.sort(((t,e)=>{for(let n=0;n<o.length;n+=1){const i=o[n],{column:{sorter:r},sortOrder:s}=i,a=Prt(r);if(a&&s){const n=a(t,e,s);if(0!==n)return s===Art?n:-n}}return 0})).map((t=>{const i=t[n];return i?Object.assign(Object.assign({},t),{[n]:Brt(i,e,n)}):t})):r};const Nrt=(t,e)=>t.map((t=>{const n=Object.assign({},t);return n.title=Wnt(t.title,e),"children"in n&&(n.children=Nrt(n.children,e)),n}));var Lrt=j5(((t,e)=>{const{_renderTimes:n}=t,{_renderTimes:i}=e;return n!==i})),jrt=C8(((t,e)=>{const{_renderTimes:n}=t,{_renderTimes:i}=e;return n!==i})),_rt=t=>{const{componentCls:e,lineWidth:n,lineType:i,tableBorderColor:r,tableHeaderBg:o,tablePaddingVertical:s,tablePaddingHorizontal:a,calc:l}=t,c=`${(0,h.zA)(n)} ${i} ${r}`,u=(t,i,r)=>({[`&${e}-${t}`]:{[`> ${e}-container`]:{[`> ${e}-content, > ${e}-body`]:{"\n            > table > tbody > tr > th,\n            > table > tbody > tr > td\n          ":{[`> ${e}-expanded-row-fixed`]:{margin:`${(0,h.zA)(l(i).mul(-1).equal())}\n              ${(0,h.zA)(l(l(r).add(n)).mul(-1).equal())}`}}}}}});return{[`${e}-wrapper`]:{[`${e}${e}-bordered`]:Object.assign(Object.assign(Object.assign({[`> ${e}-title`]:{border:c,borderBottom:0},[`> ${e}-container`]:{borderInlineStart:c,borderTop:c,[`\n            > ${e}-content,\n            > ${e}-header,\n            > ${e}-body,\n            > ${e}-summary\n          `]:{"> table":{"\n                > thead > tr > th,\n                > thead > tr > td,\n                > tbody > tr > th,\n                > tbody > tr > td,\n                > tfoot > tr > th,\n                > tfoot > tr > td\n              ":{borderInlineEnd:c},"> thead":{"> tr:not(:last-child) > th":{borderBottom:c},"> tr > th::before":{backgroundColor:"transparent !important"}},"\n                > thead > tr,\n                > tbody > tr,\n                > tfoot > tr\n              ":{[`> ${e}-cell-fix-right-first::after`]:{borderInlineEnd:c}},"\n                > tbody > tr > th,\n                > tbody > tr > td\n              ":{[`> ${e}-expanded-row-fixed`]:{margin:`${(0,h.zA)(l(s).mul(-1).equal())} ${(0,h.zA)(l(l(a).add(n)).mul(-1).equal())}`,"&::after":{position:"absolute",top:0,insetInlineEnd:n,bottom:0,borderInlineEnd:c,content:'""'}}}}}},[`&${e}-scroll-horizontal`]:{[`> ${e}-container > ${e}-body`]:{"> table > tbody":{[`\n                > tr${e}-expanded-row,\n                > tr${e}-placeholder\n              `]:{"> th, > td":{borderInlineEnd:0}}}}}},u("middle",t.tablePaddingVerticalMiddle,t.tablePaddingHorizontalMiddle)),u("small",t.tablePaddingVerticalSmall,t.tablePaddingHorizontalSmall)),{[`> ${e}-footer`]:{border:c,borderTop:0}}),[`${e}-cell`]:{[`${e}-container:first-child`]:{borderTop:0},"&-scrollbar:not([rowspan])":{boxShadow:`0 ${(0,h.zA)(n)} 0 ${(0,h.zA)(n)} ${o}`}},[`${e}-bordered ${e}-cell-scrollbar`]:{borderInlineEnd:c}}}},Irt=t=>{const{componentCls:e}=t;return{[`${e}-wrapper`]:{[`${e}-cell-ellipsis`]:Object.assign(Object.assign({},J.L9),{wordBreak:"keep-all",[`\n          &${e}-cell-fix-left-last,\n          &${e}-cell-fix-right-first\n        `]:{overflow:"visible",[`${e}-cell-content`]:{display:"block",overflow:"hidden",textOverflow:"ellipsis"}},[`${e}-column-title`]:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"keep-all"}})}}},zrt=t=>{const{componentCls:e}=t;return{[`${e}-wrapper`]:{[`${e}-tbody > tr${e}-placeholder`]:{textAlign:"center",color:t.colorTextDisabled,"\n          &:hover > th,\n          &:hover > td,\n        ":{background:t.colorBgContainer}}}}},Qrt=t=>{const{componentCls:e,antCls:n,motionDurationSlow:i,lineWidth:r,paddingXS:o,lineType:s,tableBorderColor:a,tableExpandIconBg:l,tableExpandColumnWidth:c,borderRadius:u,tablePaddingVertical:d,tablePaddingHorizontal:f,tableExpandedRowBg:p,paddingXXS:g,expandIconMarginTop:m,expandIconSize:v,expandIconHalfInner:b,expandIconScale:y,calc:w}=t,O=`${(0,h.zA)(r)} ${s} ${a}`,S=w(g).sub(r).equal();return{[`${e}-wrapper`]:{[`${e}-expand-icon-col`]:{width:c},[`${e}-row-expand-icon-cell`]:{textAlign:"center",[`${e}-row-expand-icon`]:{display:"inline-flex",float:"none",verticalAlign:"sub"}},[`${e}-row-indent`]:{height:1,float:"left"},[`${e}-row-expand-icon`]:Object.assign(Object.assign({},(0,J.Y1)(t)),{position:"relative",float:"left",width:v,height:v,color:"inherit",lineHeight:(0,h.zA)(v),background:l,border:O,borderRadius:u,transform:`scale(${y})`,"&:focus, &:hover, &:active":{borderColor:"currentcolor"},"&::before, &::after":{position:"absolute",background:"currentcolor",transition:`transform ${i} ease-out`,content:'""'},"&::before":{top:b,insetInlineEnd:S,insetInlineStart:S,height:r},"&::after":{top:S,bottom:S,insetInlineStart:b,width:r,transform:"rotate(90deg)"},"&-collapsed::before":{transform:"rotate(-180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"},"&-spaced":{"&::before, &::after":{display:"none",content:"none"},background:"transparent",border:0,visibility:"hidden"}}),[`${e}-row-indent + ${e}-row-expand-icon`]:{marginTop:m,marginInlineEnd:o},[`tr${e}-expanded-row`]:{"&, &:hover":{"> th, > td":{background:p}},[`${n}-descriptions-view`]:{display:"flex",table:{flex:"auto",width:"100%"}}},[`${e}-expanded-row-fixed`]:{position:"relative",margin:`${(0,h.zA)(w(d).mul(-1).equal())} ${(0,h.zA)(w(f).mul(-1).equal())}`,padding:`${(0,h.zA)(d)} ${(0,h.zA)(f)}`}}}},Hrt=t=>{const{componentCls:e,antCls:n,iconCls:i,tableFilterDropdownWidth:r,tableFilterDropdownSearchWidth:o,paddingXXS:s,paddingXS:a,colorText:l,lineWidth:c,lineType:u,tableBorderColor:d,headerIconColor:f,fontSizeSM:p,tablePaddingHorizontal:g,borderRadius:m,motionDurationSlow:v,colorIcon:b,colorPrimary:y,tableHeaderFilterActiveBg:w,colorTextDisabled:O,tableFilterDropdownBg:S,tableFilterDropdownHeight:x,controlItemBgHover:k,controlItemBgActive:C,boxShadowSecondary:A,filterDropdownMenuBg:M,calc:E}=t,P=`${n}-dropdown`,T=`${e}-filter-dropdown`,$=`${n}-tree`,D=`${(0,h.zA)(c)} ${u} ${d}`;return[{[`${e}-wrapper`]:{[`${e}-filter-column`]:{display:"flex",justifyContent:"space-between"},[`${e}-filter-trigger`]:{position:"relative",display:"flex",alignItems:"center",marginBlock:E(s).mul(-1).equal(),marginInline:`${(0,h.zA)(s)} ${(0,h.zA)(E(g).div(2).mul(-1).equal())}`,padding:`0 ${(0,h.zA)(s)}`,color:f,fontSize:p,borderRadius:m,cursor:"pointer",transition:`all ${v}`,"&:hover":{color:b,background:w},"&.active":{color:y}}}},{[`${n}-dropdown`]:{[T]:Object.assign(Object.assign({},(0,J.dF)(t)),{minWidth:r,backgroundColor:S,borderRadius:m,boxShadow:A,overflow:"hidden",[`${P}-menu`]:{maxHeight:x,overflowX:"hidden",border:0,boxShadow:"none",borderRadius:"unset",backgroundColor:M,"&:empty::after":{display:"block",padding:`${(0,h.zA)(a)} 0`,color:O,fontSize:p,textAlign:"center",content:'"Not Found"'}},[`${T}-tree`]:{paddingBlock:`${(0,h.zA)(a)} 0`,paddingInline:a,[$]:{padding:0},[`${$}-treenode ${$}-node-content-wrapper:hover`]:{backgroundColor:k},[`${$}-treenode-checkbox-checked ${$}-node-content-wrapper`]:{"&, &:hover":{backgroundColor:C}}},[`${T}-search`]:{padding:a,borderBottom:D,"&-input":{input:{minWidth:o},[i]:{color:O}}},[`${T}-checkall`]:{width:"100%",marginBottom:s,marginInlineStart:s},[`${T}-btns`]:{display:"flex",justifyContent:"space-between",padding:`${(0,h.zA)(E(a).sub(c).equal())} ${(0,h.zA)(a)}`,overflow:"hidden",borderTop:D}})}},{[`${n}-dropdown ${T}, ${T}-submenu`]:{[`${n}-checkbox-wrapper + span`]:{paddingInlineStart:a,color:l},"> ul":{maxHeight:"calc(100vh - 130px)",overflowX:"hidden",overflowY:"auto"}}}]},Vrt=t=>{const{componentCls:e,lineWidth:n,colorSplit:i,motionDurationSlow:r,zIndexTableFixed:o,tableBg:s,zIndexTableSticky:a,calc:l}=t,c=i;return{[`${e}-wrapper`]:{[`\n        ${e}-cell-fix-left,\n        ${e}-cell-fix-right\n      `]:{position:"sticky !important",zIndex:o,background:s},[`\n        ${e}-cell-fix-left-first::after,\n        ${e}-cell-fix-left-last::after\n      `]:{position:"absolute",top:0,right:{_skip_check_:!0,value:0},bottom:l(n).mul(-1).equal(),width:30,transform:"translateX(100%)",transition:`box-shadow ${r}`,content:'""',pointerEvents:"none"},[`${e}-cell-fix-left-all::after`]:{display:"none"},[`\n        ${e}-cell-fix-right-first::after,\n        ${e}-cell-fix-right-last::after\n      `]:{position:"absolute",top:0,bottom:l(n).mul(-1).equal(),left:{_skip_check_:!0,value:0},width:30,transform:"translateX(-100%)",transition:`box-shadow ${r}`,content:'""',pointerEvents:"none"},[`${e}-container`]:{position:"relative","&::before, &::after":{position:"absolute",top:0,bottom:0,zIndex:l(a).add(1).equal({unit:!1}),width:30,transition:`box-shadow ${r}`,content:'""',pointerEvents:"none"},"&::before":{insetInlineStart:0},"&::after":{insetInlineEnd:0}},[`${e}-ping-left`]:{[`&:not(${e}-has-fix-left) ${e}-container::before`]:{boxShadow:`inset 10px 0 8px -8px ${c}`},[`\n          ${e}-cell-fix-left-first::after,\n          ${e}-cell-fix-left-last::after\n        `]:{boxShadow:`inset 10px 0 8px -8px ${c}`},[`${e}-cell-fix-left-last::before`]:{backgroundColor:"transparent !important"}},[`${e}-ping-right`]:{[`&:not(${e}-has-fix-right) ${e}-container::after`]:{boxShadow:`inset -10px 0 8px -8px ${c}`},[`\n          ${e}-cell-fix-right-first::after,\n          ${e}-cell-fix-right-last::after\n        `]:{boxShadow:`inset -10px 0 8px -8px ${c}`}},[`${e}-fixed-column-gapped`]:{[`\n        ${e}-cell-fix-left-first::after,\n        ${e}-cell-fix-left-last::after,\n        ${e}-cell-fix-right-first::after,\n        ${e}-cell-fix-right-last::after\n      `]:{boxShadow:"none"}}}}},Wrt=t=>{const{componentCls:e,antCls:n,margin:i}=t;return{[`${e}-wrapper`]:{[`${e}-pagination${n}-pagination`]:{margin:`${(0,h.zA)(i)} 0`},[`${e}-pagination`]:{display:"flex",flexWrap:"wrap",rowGap:t.paddingXS,"> *":{flex:"none"},"&-left":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-right":{justifyContent:"flex-end"}}}}},Frt=t=>{const{componentCls:e,tableRadius:n}=t;return{[`${e}-wrapper`]:{[e]:{[`${e}-title, ${e}-header`]:{borderRadius:`${(0,h.zA)(n)} ${(0,h.zA)(n)} 0 0`},[`${e}-title + ${e}-container`]:{borderStartStartRadius:0,borderStartEndRadius:0,[`${e}-header, table`]:{borderRadius:0},"table > thead > tr:first-child":{"th:first-child, th:last-child, td:first-child, td:last-child":{borderRadius:0}}},"&-container":{borderStartStartRadius:n,borderStartEndRadius:n,"table > thead > tr:first-child":{"> *:first-child":{borderStartStartRadius:n},"> *:last-child":{borderStartEndRadius:n}}},"&-footer":{borderRadius:`0 0 ${(0,h.zA)(n)} ${(0,h.zA)(n)}`}}}}},qrt=t=>{const{componentCls:e}=t;return{[`${e}-wrapper-rtl`]:{direction:"rtl",table:{direction:"rtl"},[`${e}-pagination-left`]:{justifyContent:"flex-end"},[`${e}-pagination-right`]:{justifyContent:"flex-start"},[`${e}-row-expand-icon`]:{float:"right","&::after":{transform:"rotate(-90deg)"},"&-collapsed::before":{transform:"rotate(180deg)"},"&-collapsed::after":{transform:"rotate(0deg)"}},[`${e}-container`]:{"&::before":{insetInlineStart:"unset",insetInlineEnd:0},"&::after":{insetInlineStart:0,insetInlineEnd:"unset"},[`${e}-row-indent`]:{float:"right"}}}}},Xrt=t=>{const{componentCls:e,antCls:n,iconCls:i,fontSizeIcon:r,padding:o,paddingXS:s,headerIconColor:a,headerIconHoverColor:l,tableSelectionColumnWidth:c,tableSelectedRowBg:u,tableSelectedRowHoverBg:d,tableRowHoverBg:f,tablePaddingHorizontal:p,calc:g}=t;return{[`${e}-wrapper`]:{[`${e}-selection-col`]:{width:c,[`&${e}-selection-col-with-dropdown`]:{width:g(c).add(r).add(g(o).div(4)).equal()}},[`${e}-bordered ${e}-selection-col`]:{width:g(c).add(g(s).mul(2)).equal(),[`&${e}-selection-col-with-dropdown`]:{width:g(c).add(r).add(g(o).div(4)).add(g(s).mul(2)).equal()}},[`\n        table tr th${e}-selection-column,\n        table tr td${e}-selection-column,\n        ${e}-selection-column\n      `]:{paddingInlineEnd:t.paddingXS,paddingInlineStart:t.paddingXS,textAlign:"center",[`${n}-radio-wrapper`]:{marginInlineEnd:0}},[`table tr th${e}-selection-column${e}-cell-fix-left`]:{zIndex:g(t.zIndexTableFixed).add(1).equal({unit:!1})},[`table tr th${e}-selection-column::after`]:{backgroundColor:"transparent !important"},[`${e}-selection`]:{position:"relative",display:"inline-flex",flexDirection:"column"},[`${e}-selection-extra`]:{position:"absolute",top:0,zIndex:1,cursor:"pointer",transition:`all ${t.motionDurationSlow}`,marginInlineStart:"100%",paddingInlineStart:(0,h.zA)(g(p).div(4).equal()),[i]:{color:a,fontSize:r,verticalAlign:"baseline","&:hover":{color:l}}},[`${e}-tbody`]:{[`${e}-row`]:{[`&${e}-row-selected`]:{[`> ${e}-cell`]:{background:u,"&-row-hover":{background:d}}},[`> ${e}-cell-row-hover`]:{background:f}}}}}},Krt=t=>{const{componentCls:e,tableExpandColumnWidth:n,calc:i}=t,r=(t,r,o,s)=>({[`${e}${e}-${t}`]:{fontSize:s,[`\n        ${e}-title,\n        ${e}-footer,\n        ${e}-cell,\n        ${e}-thead > tr > th,\n        ${e}-tbody > tr > th,\n        ${e}-tbody > tr > td,\n        tfoot > tr > th,\n        tfoot > tr > td\n      `]:{padding:`${(0,h.zA)(r)} ${(0,h.zA)(o)}`},[`${e}-filter-trigger`]:{marginInlineEnd:(0,h.zA)(i(o).div(2).mul(-1).equal())},[`${e}-expanded-row-fixed`]:{margin:`${(0,h.zA)(i(r).mul(-1).equal())} ${(0,h.zA)(i(o).mul(-1).equal())}`},[`${e}-tbody`]:{[`${e}-wrapper:only-child ${e}`]:{marginBlock:(0,h.zA)(i(r).mul(-1).equal()),marginInline:`${(0,h.zA)(i(n).sub(o).equal())} ${(0,h.zA)(i(o).mul(-1).equal())}`}},[`${e}-selection-extra`]:{paddingInlineStart:(0,h.zA)(i(o).div(4).equal())}}});return{[`${e}-wrapper`]:Object.assign(Object.assign({},r("middle",t.tablePaddingVerticalMiddle,t.tablePaddingHorizontalMiddle,t.tableFontSizeMiddle)),r("small",t.tablePaddingVerticalSmall,t.tablePaddingHorizontalSmall,t.tableFontSizeSmall))}},Zrt=t=>{const{componentCls:e,marginXXS:n,fontSizeIcon:i,headerIconColor:r,headerIconHoverColor:o}=t;return{[`${e}-wrapper`]:{[`${e}-thead th${e}-column-has-sorters`]:{outline:"none",cursor:"pointer",transition:`all ${t.motionDurationSlow}, left 0s`,"&:hover":{background:t.tableHeaderSortHoverBg,"&::before":{backgroundColor:"transparent !important"}},"&:focus-visible":{color:t.colorPrimary},[`\n          &${e}-cell-fix-left:hover,\n          &${e}-cell-fix-right:hover\n        `]:{background:t.tableFixedHeaderSortActiveBg}},[`${e}-thead th${e}-column-sort`]:{background:t.tableHeaderSortBg,"&::before":{backgroundColor:"transparent !important"}},[`td${e}-column-sort`]:{background:t.tableBodySortBg},[`${e}-column-title`]:{position:"relative",zIndex:1,flex:1,minWidth:0},[`${e}-column-sorters`]:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between","&::after":{position:"absolute",inset:0,width:"100%",height:"100%",content:'""'}},[`${e}-column-sorters-tooltip-target-sorter`]:{"&::after":{content:"none"}},[`${e}-column-sorter`]:{marginInlineStart:n,color:r,fontSize:0,transition:`color ${t.motionDurationSlow}`,"&-inner":{display:"inline-flex",flexDirection:"column",alignItems:"center"},"&-up, &-down":{fontSize:i,"&.active":{color:t.colorPrimary}},[`${e}-column-sorter-up + ${e}-column-sorter-down`]:{marginTop:"-0.3em"}},[`${e}-column-sorters:hover ${e}-column-sorter`]:{color:o}}}},Yrt=t=>{const{componentCls:e,opacityLoading:n,tableScrollThumbBg:i,tableScrollThumbBgHover:r,tableScrollThumbSize:o,tableScrollBg:s,zIndexTableSticky:a,stickyScrollBarBorderRadius:l,lineWidth:c,lineType:u,tableBorderColor:d}=t,f=`${(0,h.zA)(c)} ${u} ${d}`;return{[`${e}-wrapper`]:{[`${e}-sticky`]:{"&-holder":{position:"sticky",zIndex:a,background:t.colorBgContainer},"&-scroll":{position:"sticky",bottom:0,height:`${(0,h.zA)(o)} !important`,zIndex:a,display:"flex",alignItems:"center",background:s,borderTop:f,opacity:n,"&:hover":{transformOrigin:"center bottom"},"&-bar":{height:o,backgroundColor:i,borderRadius:l,transition:`all ${t.motionDurationSlow}, transform 0s`,position:"absolute",bottom:0,"&:hover, &-active":{backgroundColor:r}}}}}}},Grt=t=>{const{componentCls:e,lineWidth:n,tableBorderColor:i,calc:r}=t,o=`${(0,h.zA)(n)} ${t.lineType} ${i}`;return{[`${e}-wrapper`]:{[`${e}-summary`]:{position:"relative",zIndex:t.zIndexTableFixed,background:t.tableBg,"> tr":{"> th, > td":{borderBottom:o}}},[`div${e}-summary`]:{boxShadow:`0 ${(0,h.zA)(r(n).mul(-1).equal())} 0 ${i}`}}}},Urt=t=>{const{componentCls:e,motionDurationMid:n,lineWidth:i,lineType:r,tableBorderColor:o,calc:s}=t,a=`${(0,h.zA)(i)} ${r} ${o}`,l=`${e}-expanded-row-cell`;return{[`${e}-wrapper`]:{[`${e}-tbody-virtual`]:{[`${e}-tbody-virtual-holder-inner`]:{[`\n            & > ${e}-row, \n            & > div:not(${e}-row) > ${e}-row\n          `]:{display:"flex",boxSizing:"border-box",width:"100%"}},[`${e}-cell`]:{borderBottom:a,transition:`background ${n}`},[`${e}-expanded-row`]:{[`${l}${l}-fixed`]:{position:"sticky",insetInlineStart:0,overflow:"hidden",width:`calc(var(--virtual-width) - ${(0,h.zA)(i)})`,borderInlineEnd:"none"}}},[`${e}-bordered`]:{[`${e}-tbody-virtual`]:{"&:after":{content:'""',insetInline:0,bottom:0,borderBottom:a,position:"absolute"},[`${e}-cell`]:{borderInlineEnd:a,[`&${e}-cell-fix-right-first:before`]:{content:'""',position:"absolute",insetBlock:0,insetInlineStart:s(i).mul(-1).equal(),borderInlineStart:a}}},[`&${e}-virtual`]:{[`${e}-placeholder ${e}-cell`]:{borderInlineEnd:a,borderBottom:a}}}}}};const Jrt=t=>{const{componentCls:e,fontWeightStrong:n,tablePaddingVertical:i,tablePaddingHorizontal:r,tableExpandColumnWidth:o,lineWidth:s,lineType:a,tableBorderColor:l,tableFontSize:c,tableBg:u,tableRadius:d,tableHeaderTextColor:f,motionDurationMid:p,tableHeaderBg:g,tableHeaderCellSplitColor:m,tableFooterTextColor:v,tableFooterBg:b,calc:y}=t,w=`${(0,h.zA)(s)} ${a} ${l}`;return{[`${e}-wrapper`]:Object.assign(Object.assign({clear:"both",maxWidth:"100%"},(0,J.t6)()),{[e]:Object.assign(Object.assign({},(0,J.dF)(t)),{fontSize:c,background:u,borderRadius:`${(0,h.zA)(d)} ${(0,h.zA)(d)} 0 0`,scrollbarColor:`${t.tableScrollThumbBg} ${t.tableScrollBg}`}),table:{width:"100%",textAlign:"start",borderRadius:`${(0,h.zA)(d)} ${(0,h.zA)(d)} 0 0`,borderCollapse:"separate",borderSpacing:0},[`\n          ${e}-cell,\n          ${e}-thead > tr > th,\n          ${e}-tbody > tr > th,\n          ${e}-tbody > tr > td,\n          tfoot > tr > th,\n          tfoot > tr > td\n        `]:{position:"relative",padding:`${(0,h.zA)(i)} ${(0,h.zA)(r)}`,overflowWrap:"break-word"},[`${e}-title`]:{padding:`${(0,h.zA)(i)} ${(0,h.zA)(r)}`},[`${e}-thead`]:{"\n          > tr > th,\n          > tr > td\n        ":{position:"relative",color:f,fontWeight:n,textAlign:"start",background:g,borderBottom:w,transition:`background ${p} ease`,"&[colspan]:not([colspan='1'])":{textAlign:"center"},[`&:not(:last-child):not(${e}-selection-column):not(${e}-row-expand-icon-cell):not([colspan])::before`]:{position:"absolute",top:"50%",insetInlineEnd:0,width:1,height:"1.6em",backgroundColor:m,transform:"translateY(-50%)",transition:`background-color ${p}`,content:'""'}},"> tr:not(:last-child) > th[colspan]":{borderBottom:0}},[`${e}-tbody`]:{"> tr":{"> th, > td":{transition:`background ${p}, border-color ${p}`,borderBottom:w,[`\n              > ${e}-wrapper:only-child,\n              > ${e}-expanded-row-fixed > ${e}-wrapper:only-child\n            `]:{[e]:{marginBlock:(0,h.zA)(y(i).mul(-1).equal()),marginInline:`${(0,h.zA)(y(o).sub(r).equal())}\n                ${(0,h.zA)(y(r).mul(-1).equal())}`,[`${e}-tbody > tr:last-child > td`]:{borderBottomWidth:0,"&:first-child, &:last-child":{borderRadius:0}}}}},"> th":{position:"relative",color:f,fontWeight:n,textAlign:"start",background:g,borderBottom:w,transition:`background ${p} ease`}}},[`${e}-footer`]:{padding:`${(0,h.zA)(i)} ${(0,h.zA)(r)}`,color:v,background:b}})}};var tot=(0,Ui.OF)("Table",(t=>{const{colorTextHeading:e,colorSplit:n,colorBgContainer:i,controlInteractiveSize:r,headerBg:o,headerColor:s,headerSortActiveBg:a,headerSortHoverBg:l,bodySortBg:c,rowHoverBg:h,rowSelectedBg:u,rowSelectedHoverBg:d,rowExpandedBg:f,cellPaddingBlock:p,cellPaddingInline:g,cellPaddingBlockMD:m,cellPaddingInlineMD:v,cellPaddingBlockSM:b,cellPaddingInlineSM:y,borderColor:w,footerBg:O,footerColor:S,headerBorderRadius:x,cellFontSize:k,cellFontSizeMD:C,cellFontSizeSM:A,headerSplitColor:M,fixedHeaderSortActiveBg:E,headerFilterHoverBg:P,filterDropdownBg:T,expandIconBg:$,selectionColumnWidth:D,stickyScrollBarBg:R,calc:B}=t,N=(0,Ji.oX)(t,{tableFontSize:k,tableBg:i,tableRadius:x,tablePaddingVertical:p,tablePaddingHorizontal:g,tablePaddingVerticalMiddle:m,tablePaddingHorizontalMiddle:v,tablePaddingVerticalSmall:b,tablePaddingHorizontalSmall:y,tableBorderColor:w,tableHeaderTextColor:s,tableHeaderBg:o,tableFooterTextColor:S,tableFooterBg:O,tableHeaderCellSplitColor:M,tableHeaderSortBg:a,tableHeaderSortHoverBg:l,tableBodySortBg:c,tableFixedHeaderSortActiveBg:E,tableHeaderFilterActiveBg:P,tableFilterDropdownBg:T,tableRowHoverBg:h,tableSelectedRowBg:u,tableSelectedRowHoverBg:d,zIndexTableFixed:2,zIndexTableSticky:B(2).add(1).equal({unit:!1}),tableFontSizeMiddle:C,tableFontSizeSmall:A,tableSelectionColumnWidth:D,tableExpandIconBg:$,tableExpandColumnWidth:B(r).add(B(t.padding).mul(2)).equal(),tableExpandedRowBg:f,tableFilterDropdownWidth:120,tableFilterDropdownHeight:264,tableFilterDropdownSearchWidth:140,tableScrollThumbSize:8,tableScrollThumbBg:R,tableScrollThumbBgHover:e,tableScrollBg:n});return[Jrt(N),Wrt(N),Grt(N),Zrt(N),Hrt(N),_rt(N),Frt(N),Qrt(N),Grt(N),zrt(N),Xrt(N),Vrt(N),Yrt(N),Irt(N),Krt(N),qrt(N),Urt(N)]}),(t=>{const{colorFillAlter:e,colorBgContainer:n,colorTextHeading:i,colorFillSecondary:r,colorFillContent:o,controlItemBgActive:s,controlItemBgActiveHover:a,padding:l,paddingSM:c,paddingXS:h,colorBorderSecondary:u,borderRadiusLG:d,controlHeight:f,colorTextPlaceholder:p,fontSize:g,fontSizeSM:m,lineHeight:v,lineWidth:b,colorIcon:y,colorIconHover:w,opacityLoading:O,controlInteractiveSize:S}=t,x=new I.Y(r).onBackground(n).toHexString(),k=new I.Y(o).onBackground(n).toHexString(),C=new I.Y(e).onBackground(n).toHexString(),A=new I.Y(y),M=new I.Y(w),E=S/2-b,P=2*E+3*b;return{headerBg:C,headerColor:i,headerSortActiveBg:x,headerSortHoverBg:k,bodySortBg:C,rowHoverBg:C,rowSelectedBg:s,rowSelectedHoverBg:a,rowExpandedBg:e,cellPaddingBlock:l,cellPaddingInline:l,cellPaddingBlockMD:c,cellPaddingInlineMD:h,cellPaddingBlockSM:h,cellPaddingInlineSM:h,borderColor:u,headerBorderRadius:d,footerBg:C,footerColor:i,cellFontSize:g,cellFontSizeMD:g,cellFontSizeSM:g,headerSplitColor:u,fixedHeaderSortActiveBg:x,headerFilterHoverBg:o,filterDropdownMenuBg:n,filterDropdownBg:n,expandIconBg:n,selectionColumnWidth:f,stickyScrollBarBg:p,stickyScrollBarBorderRadius:100,expandIconMarginTop:(g*v-3*b)/2-Math.ceil((1.4*m-3*b)/2),headerIconColor:A.clone().setA(A.a*O).toRgbString(),headerIconHoverColor:M.clone().setA(M.a*O).toRgbString(),expandIconHalfInner:E,expandIconSize:P,expandIconScale:S/P}}),{unitless:{expandIconScale:!0}});const eot=[],not=(t,e)=>{var i,r;const{prefixCls:o,className:s,rootClassName:a,style:h,size:u,bordered:d,dropdownPrefixCls:f,dataSource:p,pagination:g,rowSelection:m,rowKey:b="key",rowClassName:y,columns:w,children:O,childrenColumnName:S,onChange:x,getPopupContainer:k,loading:C,expandIcon:A,expandable:M,expandedRowRender:P,expandIconColumnIndex:T,indentSize:$,scroll:D,sortDirections:R,locale:B,showSorterTooltip:N={target:"full-header"},virtual:L}=t;v();const j=n.useMemo((()=>w||O5(O)),[w,O]),_=n.useMemo((()=>j.some((t=>t.responsive))),[j]),I=ott(_),z=n.useMemo((()=>{const t=new Set(Object.keys(I).filter((t=>I[t])));return j.filter((e=>!e.responsive||e.responsive.some((e=>t.has(e)))))}),[j,I]),Q=(0,Yi.A)(t,["className","style","columns"]),{locale:H=E,direction:V,table:W,renderEmpty:F,getPrefixCls:q,getPopupContainer:X}=n.useContext(c.QO),K=(0,Sl.A)(u),Z=Object.assign(Object.assign({},H.Table),B),G=p||eot,U=q("table",o),J=q("dropdown",f),[,tt]=(0,Y.Ay)(),et=Zi(U),[nt,it,rt]=tot(U,et),ot=Object.assign(Object.assign({childrenColumnName:S,expandIconColumnIndex:T},M),{expandIcon:null!==(i=null==M?void 0:M.expandIcon)&&void 0!==i?i:null===(r=null==W?void 0:W.expandable)||void 0===r?void 0:r.expandIcon}),{childrenColumnName:st="children"}=ot,at=n.useMemo((()=>G.some((t=>null==t?void 0:t[st]))?"nest":P||(null==M?void 0:M.expandedRowRender)?"row":null),[G]),lt={body:n.useRef(null)},ct=function(t){return(e,n)=>{const i=e.querySelector(`.${t}-container`);let r=n;if(i){const t=getComputedStyle(i);r=n-parseInt(t.borderLeftWidth,10)-parseInt(t.borderRightWidth,10)}return r}}(U),ht=n.useRef(null),ut=n.useRef(null);!function(t,e){(0,n.useImperativeHandle)(t,(()=>{const t=e(),{nativeElement:n}=t;return"undefined"!=typeof Proxy?new Proxy(n,{get(e,n){return t[n]?t[n]:Reflect.get(e,n)}}):(r=t,(i=n)._antProxy=i._antProxy||{},Object.keys(r).forEach((t=>{if(!(t in i._antProxy)){const e=i[t];i._antProxy[t]=e,i[t]=r[t]}})),i);var i,r}))}(e,(()=>Object.assign(Object.assign({},ut.current),{nativeElement:ht.current})));const dt=n.useMemo((()=>"function"==typeof b?b:t=>null==t?void 0:t[b]),[b]),[ft]=((t,e,i)=>{const r=n.useRef({});return[function(n){var o;if(!r.current||r.current.data!==t||r.current.childrenColumnName!==e||r.current.getRowKey!==i){const s=new Map;function a(t){t.forEach(((t,n)=>{const r=i(t,n);s.set(r,t),t&&"object"==typeof t&&e in t&&a(t[e]||[])}))}a(t),r.current={data:t,childrenColumnName:e,kvMap:s,getRowKey:i}}return null===(o=r.current.kvMap)||void 0===o?void 0:o.get(n)}]})(G,st,dt),pt={},gt=(t,e,n=!1)=>{var i,r,o,s;const a=Object.assign(Object.assign({},pt),t);n&&(null===(i=pt.resetPagination)||void 0===i||i.call(pt),(null===(r=a.pagination)||void 0===r?void 0:r.current)&&(a.pagination.current=1),g&&(null===(o=g.onChange)||void 0===o||o.call(g,1,null===(s=a.pagination)||void 0===s?void 0:s.pageSize))),D&&!1!==D.scrollToFirstRowOnChange&&lt.body.current&&function(t,e={}){const{getContainer:n=()=>window,callback:i,duration:r=450}=e,o=n(),s=(t=>{var e,n;if("undefined"==typeof window)return 0;let i=0;return q7(t)?i=t.pageYOffset:t instanceof Document?i=t.documentElement.scrollTop:(t instanceof HTMLElement||t)&&(i=t.scrollTop),t&&!q7(t)&&"number"!=typeof i&&(i=null===(n=(null!==(e=t.ownerDocument)&&void 0!==e?e:t).documentElement)||void 0===n?void 0:n.scrollTop),i})(o),a=Date.now(),l=()=>{const e=Date.now()-a,n=function(t,e,n,i){const r=n-e;return(t/=i/2)<1?r/2*t*t*t+e:r/2*((t-=2)*t*t+2)+e}(e>r?r:e,s,t,r);q7(o)?o.scrollTo(window.pageXOffset,n):o instanceof Document||"HTMLDocument"===o.constructor.name?o.documentElement.scrollTop=n:o.scrollTop=n,e<r?(0,hl.A)(l):"function"==typeof i&&i()};(0,hl.A)(l)}(0,{getContainer:()=>lt.body.current}),null==x||x(a.pagination,a.filters,a.sorter,{currentDataSource:grt(Brt(G,a.sorterStates,st),a.filterStates,st),action:e})},[mt,vt,bt,yt]=(t=>{const{prefixCls:e,mergedColumns:i,sortDirections:r,tableLocale:o,showSorterTooltip:s,onSorterChange:a}=t,[c,h]=n.useState((()=>Trt(i,!0))),u=(t,e)=>{const n=[];return t.forEach(((t,i)=>{const r=Vnt(i,e);if(n.push(Hnt(t,r)),Array.isArray(t.children)){const e=u(t.children,r);n.push.apply(n,(0,l.A)(e))}})),n},d=n.useMemo((()=>{let t=!0;const e=Trt(i,!1);if(!e.length){const t=u(i);return c.filter((({key:e})=>t.includes(e)))}const n=[];function r(e){t?n.push(e):n.push(Object.assign(Object.assign({},e),{sortOrder:null}))}let o=null;return e.forEach((e=>{null===o?(r(e),e.sortOrder&&(!1===e.multiplePriority?t=!1:o=!0)):(o&&!1!==e.multiplePriority||(t=!1),r(e))})),n}),[i,c]),f=n.useMemo((()=>{var t,e;const n=d.map((({column:t,sortOrder:e})=>({column:t,order:e})));return{sortColumns:n,sortColumn:null===(t=n[0])||void 0===t?void 0:t.column,sortOrder:null===(e=n[0])||void 0===e?void 0:e.order}}),[d]),p=t=>{let e;e=!1!==t.multiplePriority&&d.length&&!1!==d[0].multiplePriority?[].concat((0,l.A)(d.filter((({key:e})=>e!==t.key))),[t]):[t],h(e),a(Rrt(e),e)};return[t=>$rt(e,t,d,p,r,o,s),d,f,()=>Rrt(d)]})({prefixCls:U,mergedColumns:z,onSorterChange:(t,e)=>{gt({sorter:t,sorterStates:e},"sort",!1)},sortDirections:R||["ascend","descend"],tableLocale:Z,showSorterTooltip:N}),wt=n.useMemo((()=>Brt(G,vt,st)),[G,vt]);pt.sorter=yt(),pt.sorterStates=vt;const[Ot,St,xt]=vrt({prefixCls:U,locale:Z,dropdownPrefixCls:J,mergedColumns:z,onFilterChange:(t,e)=>{gt({filters:t,filterStates:e},"filter",!0)},getPopupContainer:k||X,rootClassName:At()(a,et)}),kt=grt(wt,St,st);pt.filters=xt,pt.filterStates=St;const Ct=n.useMemo((()=>{const t={};return Object.keys(xt).forEach((e=>{null!==xt[e]&&(t[e]=xt[e])})),Object.assign(Object.assign({},bt),{filters:t})}),[bt,xt]),[Mt]=(t=>[n.useCallback((e=>Nrt(e,t)),[t])])(Ct),[Et,Pt]=yrt(kt.length,((t,e)=>{gt({pagination:Object.assign(Object.assign({},pt.pagination),{current:t,pageSize:e})},"paginate")}),g);pt.pagination=!1===g?{}:function(t,e){const n={current:t.current,pageSize:t.pageSize},i=e&&"object"==typeof e?e:{};return Object.keys(i).forEach((e=>{const i=t[e];"function"!=typeof i&&(n[e]=i)})),n}(Et,g),pt.resetPagination=Pt;const Tt=n.useMemo((()=>{if(!1===g||!Et.pageSize)return kt;const{current:t=1,total:e,pageSize:n=brt}=Et;return kt.length<e?kt.length>n?kt.slice((t-1)*n,t*n):kt:kt.slice((t-1)*n,t*n)}),[!!g,kt,null==Et?void 0:Et.current,null==Et?void 0:Et.pageSize,null==Et?void 0:Et.total]),[$t,Dt]=((t,e)=>{const{preserveSelectedRowKeys:i,selectedRowKeys:r,defaultSelectedRowKeys:o,getCheckboxProps:s,onChange:a,onSelect:c,onSelectAll:h,onSelectInvert:u,onSelectNone:d,onSelectMultiple:f,columnWidth:p,type:g,selections:m,fixed:b,renderCell:y,hideSelectAll:w,checkStrictly:O=!0}=e||{},{prefixCls:S,data:x,pageData:k,getRecordByKey:C,getRowKey:A,expandType:M,childrenColumnName:E,locale:P,getPopupContainer:T}=t,$=v(),[D,R]=function(){const[t,e]=(0,n.useState)(null);return[(0,n.useCallback)(((n,i,r)=>{const o=null!=t?t:n,s=Math.min(o||0,n),a=Math.max(o||0,n),l=i.slice(s,a+1).map((t=>t)),c=l.some((t=>!r.has(t))),h=[];return l.forEach((t=>{c?(r.has(t)||h.push(t),r.add(t)):(r.delete(t),h.push(t))})),e(c?a:null),h}),[t]),t=>{e(t)}]}(),[B,N]=(0,mo.A)(r||o||W7,{value:r}),L=n.useRef(new Map),j=(0,n.useCallback)((t=>{if(i){const e=new Map;t.forEach((t=>{let n=C(t);!n&&L.current.has(t)&&(n=L.current.get(t)),e.set(t,n)})),L.current=e}}),[C,i]);n.useEffect((()=>{j(B)}),[B]);const _=(0,n.useMemo)((()=>F7(E,k)),[E,k]),{keyEntities:I}=(0,n.useMemo)((()=>{if(O)return{keyEntities:null};let t=x;if(i){const e=new Set(_.map(((t,e)=>A(t,e)))),n=Array.from(L.current).reduce(((t,[n,i])=>e.has(n)?t:t.concat(i)),[]);t=[].concat((0,l.A)(t),(0,l.A)(n))}return G8(t,{externalGetKey:A,childrenPropName:E})}),[x,A,O,E,i,_]),z=(0,n.useMemo)((()=>{const t=new Map;return _.forEach(((e,n)=>{const i=A(e,n),r=(s?s(e):null)||{};t.set(i,r)})),t}),[_,A,s]),Q=(0,n.useCallback)((t=>{const e=A(t);let n;return n=z.has(e)?z.get(A(t)):s?s(t):void 0,!!(null==n?void 0:n.disabled)}),[z,A]),[H,V]=(0,n.useMemo)((()=>{if(O)return[B||[],[]];const{checkedKeys:t,halfCheckedKeys:e}=m3(B,!0,I,Q);return[t||[],e]}),[B,O,I,Q]),W=(0,n.useMemo)((()=>{const t="radio"===g?H.slice(0,1):H;return new Set(t)}),[H,g]),F=(0,n.useMemo)((()=>"radio"===g?new Set:new Set(V)),[V,g]);n.useEffect((()=>{e||N(W7)}),[!!e]);const q=(0,n.useCallback)(((t,e)=>{let n,r;j(t),i?(n=t,r=t.map((t=>L.current.get(t)))):(n=[],r=[],t.forEach((t=>{const e=C(t);void 0!==e&&(n.push(t),r.push(e))}))),N(n),null==a||a(n,r,{type:e})}),[N,C,a,i]),X=(0,n.useCallback)(((t,e,n,i)=>{if(c){const r=n.map((t=>C(t)));c(C(t),e,r,i)}q(n,"single")}),[c,C,q]),K=(0,n.useMemo)((()=>!m||w?null:(!0===m?[Q7,H7,V7]:m).map((t=>t===Q7?{key:"all",text:P.selectionAll,onSelect(){q(x.map(((t,e)=>A(t,e))).filter((t=>{const e=z.get(t);return!(null==e?void 0:e.disabled)||W.has(t)})),"all")}}:t===H7?{key:"invert",text:P.selectInvert,onSelect(){const t=new Set(W);k.forEach(((e,n)=>{const i=A(e,n),r=z.get(i);(null==r?void 0:r.disabled)||(t.has(i)?t.delete(i):t.add(i))}));const e=Array.from(t);u&&($.deprecated(!1,"onSelectInvert","onChange"),u(e)),q(e,"invert")}}:t===V7?{key:"none",text:P.selectNone,onSelect(){null==d||d(),q(Array.from(W).filter((t=>{const e=z.get(t);return null==e?void 0:e.disabled})),"none")}}:t)).map((t=>Object.assign(Object.assign({},t),{onSelect:(...e)=>{var n,i;null===(i=t.onSelect)||void 0===i||(n=i).call.apply(n,[t].concat(e)),R(null)}})))),[m,W,k,A,u,q]),Z=(0,n.useCallback)((t=>{var i;if(!e)return t.filter((t=>t!==z7));let r=(0,l.A)(t);const o=new Set(W),s=_.map(A).filter((t=>!z.get(t).disabled)),a=s.every((t=>o.has(t))),c=s.some((t=>o.has(t))),u=()=>{const t=[];a?s.forEach((e=>{o.delete(e),t.push(e)})):s.forEach((e=>{o.has(e)||(o.add(e),t.push(e))}));const e=Array.from(o);null==h||h(!a,e.map((t=>C(t))),t.map((t=>C(t)))),q(e,"all"),R(null)};let d,v,x;if("radio"!==g){let t;if(K){const e={getPopupContainer:T,items:K.map(((t,e)=>{const{key:n,text:i,onSelect:r}=t;return{key:null!=n?n:e,onClick:()=>{null==r||r(s)},label:i}}))};t=n.createElement("div",{className:`${S}-selection-extra`},n.createElement(S7,{menu:e,getPopupContainer:T},n.createElement("span",null,n.createElement(E8,null))))}const e=_.map(((t,e)=>{const n=A(t,e),i=z.get(n)||{};return Object.assign({checked:o.has(n)},i)})).filter((({disabled:t})=>t)),i=!!e.length&&e.length===_.length,r=i&&e.every((({checked:t})=>t)),l=i&&e.some((({checked:t})=>t));v=n.createElement(_3,{checked:i?r:!!_.length&&a,indeterminate:i?!r&&l:!a&&c,onChange:u,disabled:0===_.length||i,"aria-label":t?"Custom selection":"Select all",skipGroup:!0}),d=!w&&n.createElement("div",{className:`${S}-selection`},v,t)}if(x="radio"===g?(t,e,i)=>{const r=A(e,i),s=o.has(r),a=z.get(r);return{node:n.createElement(I7,Object.assign({},a,{checked:s,onClick:t=>{var e;t.stopPropagation(),null===(e=null==a?void 0:a.onClick)||void 0===e||e.call(a,t)},onChange:t=>{var e;o.has(r)||X(r,!0,[r],t.nativeEvent),null===(e=null==a?void 0:a.onChange)||void 0===e||e.call(a,t)}})),checked:s}}:(t,e,i)=>{var r;const a=A(e,i),c=o.has(a),h=F.has(a),u=z.get(a);let d;return d="nest"===M?h:null!==(r=null==u?void 0:u.indeterminate)&&void 0!==r?r:h,{node:n.createElement(_3,Object.assign({},u,{indeterminate:d,checked:c,skipGroup:!0,onClick:t=>{var e;t.stopPropagation(),null===(e=null==u?void 0:u.onClick)||void 0===e||e.call(u,t)},onChange:t=>{var e;const{nativeEvent:n}=t,{shiftKey:i}=n,r=s.findIndex((t=>t===a)),h=H.some((t=>s.includes(t)));if(i&&O&&h){const t=D(r,s,o),e=Array.from(o);null==f||f(!c,e.map((t=>C(t))),t.map((t=>C(t)))),q(e,"multiple")}else{const t=H;if(O){const e=c?o3(t,a):s3(t,a);X(a,!c,e,n)}else{const e=m3([].concat((0,l.A)(t),[a]),!0,I,Q),{checkedKeys:i,halfCheckedKeys:r}=e;let o=i;if(c){const t=new Set(i);t.delete(a),o=m3(Array.from(t),{checked:!1,halfCheckedKeys:r},I,Q).checkedKeys}X(a,!c,o,n)}}R(c?null:r),null===(e=null==u?void 0:u.onChange)||void 0===e||e.call(u,t)}})),checked:c}},!r.includes(z7))if(0===r.findIndex((t=>{var e;return"EXPAND_COLUMN"===(null===(e=t[c5])||void 0===e?void 0:e.columnType)}))){const[t,...e]=r;r=[t,z7].concat((0,l.A)(e))}else r=[z7].concat((0,l.A)(r));const k=r.indexOf(z7);r=r.filter(((t,e)=>t!==z7||e===k));const E=r[k-1],P=r[k+1];let $=b;void 0===$&&(void 0!==(null==P?void 0:P.fixed)?$=P.fixed:void 0!==(null==E?void 0:E.fixed)&&($=E.fixed)),$&&E&&"EXPAND_COLUMN"===(null===(i=E[c5])||void 0===i?void 0:i.columnType)&&void 0===E.fixed&&(E.fixed=$);const B=At()(`${S}-selection-col`,{[`${S}-selection-col-with-dropdown`]:m&&"checkbox"===g}),N={fixed:$,width:p,className:`${S}-selection-column`,title:(null==e?void 0:e.columnTitle)?"function"==typeof e.columnTitle?e.columnTitle(v):e.columnTitle:d,render:(t,e,n)=>{const{node:i,checked:r}=x(t,e,n);return y?y(r,e,n,i):i},onCell:e.onCell,align:e.align,[c5]:{className:B}};return r.map((t=>t===z7?N:t))}),[A,_,e,H,W,F,p,K,M,z,f,X,Q]);return[Z,W]})({prefixCls:U,data:kt,pageData:Tt,getRowKey:dt,getRecordByKey:ft,expandType:at,childrenColumnName:st,locale:Z,getPopupContainer:k||X},m);ot.__PARENT_RENDER_ICON__=ot.expandIcon,ot.expandIcon=ot.expandIcon||A||function(t){return e=>{const{prefixCls:i,onExpand:r,record:o,expanded:s,expandable:a}=e,l=`${i}-row-expand-icon`;return n.createElement("button",{type:"button",onClick:t=>{r(o,t),t.stopPropagation()},className:At()(l,{[`${l}-spaced`]:!a,[`${l}-expanded`]:a&&s,[`${l}-collapsed`]:a&&!s}),"aria-label":s?t.collapse:t.expand,"aria-expanded":s})}}(Z),"nest"===at&&void 0===ot.expandIconColumnIndex?ot.expandIconColumnIndex=m?1:0:ot.expandIconColumnIndex>0&&m&&(ot.expandIconColumnIndex-=1),"number"!=typeof ot.indentSize&&(ot.indentSize="number"==typeof $?$:15);const Rt=n.useCallback((t=>Mt($t(Ot(mt(t))))),[mt,Ot,$t]);let Bt,Nt,Lt;if(!1!==g&&(null==Et?void 0:Et.total)){let t;t=Et.size?Et.size:"small"===K||"middle"===K?"small":void 0;const e=e=>n.createElement(Ent,Object.assign({},Et,{className:At()(`${U}-pagination ${U}-pagination-${e}`,Et.className),size:t})),i="rtl"===V?"left":"right",{position:r}=Et;if(null!==r&&Array.isArray(r)){const t=r.find((t=>t.includes("top"))),n=r.find((t=>t.includes("bottom"))),o=r.every((t=>"none"==`${t}`));t||n||o||(Nt=e(i)),t&&(Bt=e(t.toLowerCase().replace("top",""))),n&&(Nt=e(n.toLowerCase().replace("bottom","")))}else Nt=e(i)}"boolean"==typeof C?Lt={spinning:C}:"object"==typeof C&&(Lt=Object.assign({spinning:!0},C));const jt=At()(rt,et,`${U}-wrapper`,null==W?void 0:W.className,{[`${U}-wrapper-rtl`]:"rtl"===V},s,a,it),_t=Object.assign(Object.assign({},null==W?void 0:W.style),h),It=void 0!==(null==B?void 0:B.emptyText)?B.emptyText:(null==F?void 0:F("Table"))||n.createElement(ett,{componentName:"Table"}),zt=L?jrt:Lrt,Qt={},Ht=n.useMemo((()=>{const{fontSize:t,lineHeight:e,lineWidth:n,padding:i,paddingXS:r,paddingSM:o}=tt,s=Math.floor(t*e);switch(K){case"middle":return 2*o+s+n;case"small":return 2*r+s+n;default:return 2*i+s+n}}),[tt,K]);return L&&(Qt.listItemHeight=Ht),nt(n.createElement("div",{ref:ht,className:jt,style:_t},n.createElement(Qnt,Object.assign({spinning:!1},Lt),Bt,n.createElement(zt,Object.assign({},Qt,Q,{ref:ut,columns:z,direction:V,expandable:ot,prefixCls:U,className:At()({[`${U}-middle`]:"middle"===K,[`${U}-small`]:"small"===K,[`${U}-bordered`]:d,[`${U}-empty`]:0===G.length},rt,et,it),data:Tt,rowKey:dt,rowClassName:(t,e,n)=>{let i;return i="function"==typeof y?At()(y(t,e,n)):At()(y),At()({[`${U}-row-selected`]:Dt.has(dt(t,e))},i)},emptyText:It,internalHooks:m2,internalRefs:lt,transformColumns:Rt,getContainerWidth:ct})),Nt)))};var iot=n.forwardRef(not);const rot=(t,e)=>{const i=n.useRef(0);return i.current+=1,n.createElement(iot,Object.assign({},t,{ref:e,_renderTimes:i.current}))},oot=n.forwardRef(rot);oot.SELECTION_COLUMN=z7,oot.EXPAND_COLUMN=g2,oot.SELECTION_ALL=Q7,oot.SELECTION_INVERT=H7,oot.SELECTION_NONE=V7,oot.Column=t=>null,oot.ColumnGroup=t=>null,oot.Summary=Y2;var sot,aot,lot=oot,cot=__webpack_require__(5391);function hot(){var e=(0,i.GV)(cot.nG.selectFilteredWidgets);return(0,t.FD)("div",{children:[(0,t.Y)(Kc.Title,{level:2,children:"Widget Browser"}),(0,t.Y)(lot,{dataSource:e,columns:[{title:"Widget ID",dataIndex:"widgetId",key:"widgetId"},{title:"Route",dataIndex:["plugin","route"],key:"route"},{title:"Version",dataIndex:"version",key:"version"},{title:"Has Auth",dataIndex:["plugin","auth"],key:"auth",render:function(t){return t?"true":"false"}}],rowKey:"widgetId",locale:{emptyText:"No widget configuration found."}})]})}function uot(t){return uot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uot(t)}function dot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function fot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dot(Object(n),!0).forEach((function(e){pot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pot(t,e,n){return(e=function(t){var e=function(t){if("object"!=uot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=uot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uot(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function got(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var mot,vot=(0,e.A)(xh.az)(sot||(sot=got(["\n  display: grid;\n  grid-template-rows: auto 1fr;\n  grid-template-columns: 100%;\n  grid-template-areas: 'header' 'content';\n  height: 100%;\n  width: 100%;\n"]))),bot=e.A.main(aot||(aot=got(["\n  grid-area: content;\n  overflow: auto;\n  height: 100%;\n  width: 100%;\n"]))),yot=(0,n.memo)((function(e){var s=(0,i.GV)(r.Iv),a=(s.isLoading,s.error,(0,i.GV)(r.Ep)),l=((0,o.W)(),(0,i.jL)());return(0,n.useEffect)((function(){l(p2.Z.loadWidgets())}),[l]),(0,t.FD)(vot,{children:[(0,t.Y)(X1,{}),(0,t.Y)(bot,{id:"main",children:a?(0,t.Y)(F1.u,fot({},e)):(0,t.Y)(hot,{})})]})})),wot=(mot=yot,function(e){return(0,t.Y)(f2,{"data-qa":"bathtub.provider",children:(0,t.Y)(K1.Kq,{store:i.M_,children:(0,t.Y)(mot,u2({},e))})})})}(),__webpack_exports__}())}}}));